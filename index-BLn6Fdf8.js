
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="224cc9d9-50d4-5112-a785-c71dcf9ad412")}catch(e){}}();
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-BOHDLaz9.js","assets/vendor-XhZj4hnV.js","assets/index-DRv7cCk4.js","assets/botd.esm-BXibAnG2.js","assets/index-CARCewIo.js","assets/index.es-DxI5XnPj.js","assets/llm-selector-DpqJKxHh.js","assets/index-BIm7PB5Z.js","assets/deferred-Duz6f1jU.js","assets/math.scalar.functions-B0475LkX.js","assets/animationGroup-C1ddwlzK.js","assets/skeleton-BqoE2N-g.js","assets/rawTexture-ByCDm0dJ.js","assets/easing-BIEIL6rV.js","assets/weightedsound-CvC3LSY3.js","assets/audioEngine-CRjxQw-0.js","assets/babylonFileParser.function-CWsVgwsY.js","assets/outlineRenderer-DUdwp2JT.js","assets/discBuilder-BvfFjbze.js","assets/backgroundMaterial-pw7gyCqs.js","assets/standardMaterial-B3z_F88M.js","assets/cubeTexture-BpppjGBn.js","assets/abstractEngine.cubeTexture-C465RdHo.js","assets/lazy-BTjU8Nrt.js","assets/ray-DgBPdiT7.js","assets/dds-DH1cg2tG.js","assets/dumpTools-C0ELh8Xp.js","assets/khronosTextureContainer2-BRHdCEU0.js","assets/workerPool-H9Ji3mCo.js","assets/assetContainer-C1Ciaaq7.js","assets/shaderMaterial-DXyh6orU.js","assets/timer-DM9wL3V-.js","assets/math.scalar-Bsa5v8mh.js","assets/logDepthDeclaration-BAb1-aRF.js","assets/fogFragmentDeclaration-Ct8A9d2L.js","assets/sceneUboDeclaration-C2gSwGao.js","assets/meshUboDeclaration-VevakjCq.js","assets/logDepthVertex-DduWLlHk.js","assets/helperFunctions-B_NNA0KM.js","assets/clipPlaneFragment-CQ_XwIiL.js","assets/logDepthDeclaration-BoxFKoLN.js","assets/fogFragmentDeclaration-C2DZZ0sY.js","assets/sceneUboDeclaration-Ba7RE2dX.js","assets/meshUboDeclaration-aTrm9TtP.js","assets/helperFunctions-DNlP7B8w.js","assets/clipPlaneVertex-y6SMU6IO.js","assets/logDepthVertex-CqkKvZ2E.js","assets/pointLight-B_gL-vhH.js","assets/fresnelFunction-g4XQzPCb.js","assets/proceduralTexture-jMXg7sCi.js","assets/abstractAudioBus-BFUDiGn4.js","assets/webAudioBaseSubGraph-W-90skSB.js","assets/abstractSoundInstance-BT-89fPJ.js","assets/abstractSoundSource-Di3yl-B0.js","assets/webAudioBus-keUN3eq5.js","assets/spatialWebAudio-D-XUuOje.js","assets/webAudioMainBus-DpepXmBj.js","assets/webAudioStaticSound-9de1qx5t.js","assets/webAudioStreamingSound-BDMyj-4g.js","assets/webAudioSoundSource-wR8nVE5v.js","assets/webgpuEngine-BWblPmgH.js","assets/bakedVertexAnimation-7nCkKJih.js","assets/instancesDeclaration-BdK2C8fd.js","assets/fresnelFunction-C_k-QL5z.js","assets/decalFragment-C2Q22qLZ.js","assets/bonesVertex-B3ew3XHD.js","assets/morphTargetsVertex-BSeUHY5O.js","assets/asyncLock-C3c9_zsM.js","assets/engine.multiRender-BTAciIbs.js","assets/environmentTextureTools-Ck7pZ_8h.js","assets/engine.multiRender-DiKiyYfg.js","assets/flowGraphParser-Djaow2ZP.js","assets/flowGraphRichTypes-By6lmXnI.js","assets/flowGraphJsonPointerParserBlock-BOW5JHEe.js","assets/flowGraphCachedOperationBlock-BZgomHHQ.js","assets/flowGraphConsoleLogBlock-BUAvlL5N.js","assets/flowGraphBranchBlock-Q4GVi0mj.js","assets/flowGraphDoNBlock-C7EkLBbW.js","assets/flowGraphForLoopBlock-DB8EBLun.js","assets/flowGraphThrottleBlock-C3g77n0O.js","assets/flowGraphMultiGateBlock-M_six-eA.js","assets/flowGraphSwitchBlock-Dy3l2zxo.js","assets/flowGraphWaitAllBlock-DTJmQD4x.js","assets/flowGraphCounterBlock-BIfQ2G3w.js","assets/flowGraphWhileLoopBlock-L3zf8vUW.js","assets/flowGraphDebounceBlock-jaWaPNXu.js","assets/flowGraphFlipFlopBlock-0pv_Ii7b.js","assets/flowGraphSequenceBlock-DINnjdC9.js","assets/flowGraphSetDelayBlock-CiF65lc7.js","assets/flowGraphCancelDelayBlock-DzKd3_FQ.js","assets/flowGraphPlayAnimationBlock-BycUafok.js","assets/flowGraphStopAnimationBlock-tmMlx37K.js","assets/flowGraphPauseAnimationBlock-C-7hW-KL.js","assets/flowGraphInterpolationBlock-B-SNw9oX.js","assets/flowGraphEasingBlock-BFetjewD.js","assets/flowGraphBezierCurveEasingBlock-B4Tb7bsh.js","assets/flowGraphConditionalDataBlock-3bcY7ZDp.js","assets/flowGraphGetVariableBlock-Dd86jF6e.js","assets/flowGraphSetVariableBlock-5iX8GOou.js","assets/flowGraphTransformCoordinatesSystemBlock-DEIHVsYz.js","assets/flowGraphGetPropertyBlock-1njIuQSH.js","assets/flowGraphSetPropertyBlock-DpvNC-tS.js","assets/flowGraphConstantBlock-BeNWi3f2.js","assets/flowGraphGetAssetBlock-BTuJr_iF.js","assets/flowGraphDataSwitchBlock-B435avBV.js","assets/flowGraphMathBlocks-sJvQYCUK.js","assets/flowGraphBinaryOperationBlock-BRUYJDiC.js","assets/flowGraphUnaryOperationBlock-Bu6aLsZj.js","assets/flowGraphMathCombineExtractBlocks-BtpvgByR.js","assets/flowGraphMatrixMathBlocks-CLr4cIAY.js","assets/flowGraphVectorMathBlocks-A-mhPL_Z.js","assets/flowGraphTypeToTypeBlocks-SILhhqDU.js","assets/flowGraphContextBlock-D14FYper.js","assets/flowGraphArrayIndexBlock-_WMf0hBR.js","assets/flowGraphCodeExecutionBlock-D9jJHtUz.js","assets/flowGraphIndexOfBlock-BmesLfu_.js","assets/flowGraphFunctionReferenceBlock-LE6Sc3a4.js","assets/flowGraphMeshPickEventBlock-W9rlSzqn.js","assets/flowGraphSceneReadyEventBlock-CAOIgW7B.js","assets/flowGraphReceiveCustomEventBlock-Cw5Xf-QQ.js","assets/flowGraphSendCustomEventBlock-DrfMfqnr.js","assets/flowGraphSceneTickEventBlock-C4ZQHrD9.js","assets/flowGraphPointerOutEventBlock-D0OXXY0p.js","assets/flowGraphPointerOverEventBlock-CxoGlnup.js","assets/spotLight-CD7A0Fyj.js","assets/glowMapGeneration.fragment-IxFk9AIg.js","assets/glowMapGeneration.vertex-DORqEpUq.js","assets/glowMapGeneration.fragment-DzcW0DXc.js","assets/glowMapGeneration.vertex-ngpR9WIL.js","assets/glowMapMerge.fragment-D-RY_lPS.js","assets/glowMapMerge.vertex-Csanapib.js","assets/glowBlurPostProcess.fragment-gb0cyPf8.js","assets/glowMapMerge.fragment-_TqZdACK.js","assets/glowMapMerge.vertex-rRdZu__x.js","assets/glowBlurPostProcess.fragment-DXXlvVJ7.js","assets/shadowGeneratorSceneComponent-BgIPnWj3.js","assets/shadowMap.fragment-DWVV6JF2.js","assets/packingFunctions-CW2EdcP2.js","assets/shadowMapFragment-CPNZRMdC.js","assets/shadowMap.vertex-Czg84bSh.js","assets/shadowMapVertexMetric-CH7dCDbc.js","assets/depthBoxBlur.fragment-B8I4mnKm.js","assets/shadowMapFragmentSoftTransparentShadow-y7baGrha.js","assets/shadowMap.fragment-BbKelNB-.js","assets/shadowMapFragment-a6J7pTg3.js","assets/shadowMap.vertex-An823YnO.js","assets/shadowMapVertexMetric-CzNXxqSi.js","assets/depthBoxBlur.fragment-Ccatstli.js","assets/shadowMapFragmentSoftTransparentShadow-Dc1exlPt.js","assets/rectAreaLight-rQsrByA9.js","assets/thinInstanceMesh-CyWeJMzQ.js","assets/lightFragment-BgFJSxxa.js","assets/lightFragment-U0Gz_9jo.js","assets/iesTextureLoader-CLk7ERSW.js","assets/hdrCubeTexture-Bfv74VPa.js","assets/iblCdfGenerator-DMIuUyHc.js","assets/hdr-BNOo4Omf.js","assets/background.vertex-DCG1UfGW.js","assets/backgroundUboDeclaration-Cl4I1gBP.js","assets/shadowsVertex-BOhSJxxu.js","assets/background.fragment-CgEv-f8j.js","assets/lightsFragmentFunctions-nhFhPl78.js","assets/background.vertex-pCpmDLPc.js","assets/backgroundUboDeclaration-BsunKgYj.js","assets/shadowsVertex-COQ_Iuyp.js","assets/background.fragment-3zRyaRbL.js","assets/lightsFragmentFunctions-D3gEQLzp.js","assets/color.fragment-_xxVcUKH.js","assets/color.vertex-Cihriz1u.js","assets/vertexColorMixing-CFGvUzIm.js","assets/pbr.vertex-BV0__qAE.js","assets/harmonicsFunctions-D_aEfndx.js","assets/samplerVertexImplementation-DDyxyqTb.js","assets/mainUVVaryingDeclaration-MxrUqpsR.js","assets/bumpVertex-DIJzHQHw.js","assets/vertexColorMixing-DGus7LQ8.js","assets/pbr.fragment-CX4LEKYO.js","assets/oitFragment-C8_53dIm.js","assets/bumpFragment-BZ2s9edC.js","assets/pbr.vertex-Co7CG6A_.js","assets/samplerVertexImplementation-CARItyO_.js","assets/harmonicsFunctions-BsIwNx5D.js","assets/mainUVVaryingDeclaration-BwRLtV8T.js","assets/bumpVertex-BPEH2VNX.js","assets/pbr.fragment-TuqE-Mj8.js","assets/oitFragment-h1HGJeRK.js","assets/bumpFragment-CxLuz2PD.js","assets/shaderLanguage-BjwqUAVi.js","assets/exrTextureLoader-BAxUHUCD.js","assets/ddsTextureLoader-B9GrgrfF.js","assets/envTextureLoader-DKXlcGGh.js","assets/ktxTextureLoader-TyjpH6Pd.js","assets/tgaTextureLoader-CmIiR6XP.js","assets/hdrTextureLoader-D4xfKnRB.js","assets/basisTextureLoader-CgTQEATz.js","assets/geometryBufferRenderer-DSIex4fi.js","assets/rawCubeTexture-DxrXMm2r.js","assets/iblShadowsRenderPipeline-BWPCHk7R.js","assets/iblCdfGeneratorSceneComponent-BG333EiU.js","assets/procedural.vertex-Dswl1WfD.js","assets/procedural.vertex-CXlzVpnF.js","assets/default.fragment-wEnLCrfy.js","assets/defaultUboDeclaration-BKp0KYIA.js","assets/default.vertex-D_5fi8Z_.js","assets/default.fragment-BuE8uqaq.js","assets/defaultUboDeclaration-CqFjkWgR.js","assets/default.vertex-B3UCzoHP.js","assets/dracoDecoder-DDEZ16j4.js","assets/meshoptCompression-C2lay6P-.js","assets/mesh.vertexData.functions-BXkNVxNr.js","assets/pointsCloudSystem-CuPSKpeg.js","assets/color.fragment-CgwfSGxz.js","assets/color.vertex-DCkqGDnY.js","assets/lodCube.fragment-DF8-CoFf.js","assets/lod.fragment-i9ADFpsT.js","assets/lodCube.fragment-Cu9BeCDZ.js","assets/lod.fragment-CLSPNhX0.js","assets/rgbdDecode.fragment-ErozDtZd.js","assets/rgbdEncode.fragment-CMYCMxOj.js","assets/rgbdDecode.fragment-BCZhTihY.js","assets/rgbdEncode.fragment-ColVNEvY.js","assets/particles.fragment-BVXtZOY4.js","assets/particles.vertex-CaaL4pP1.js","assets/particles.fragment-DdvN5XDl.js","assets/particles.vertex-cUcOmaBk.js","assets/postProcessRenderPipelineManagerSceneComponent-DX6zEJLi.js","assets/postprocess.vertex-CAgQ98r9.js","assets/kernelBlur.fragment-DM15w3wc.js","assets/kernelBlurVaryingDeclaration-DZruR0hn.js","assets/kernelBlur.vertex-UhUro8kh.js","assets/kernelBlur.fragment-Btx5OM06.js","assets/kernelBlurVaryingDeclaration-DDQFXyEo.js","assets/kernelBlur.vertex-BtHTToDu.js","assets/pass.fragment-BpeHQgd0.js","assets/passCube.fragment-C4orGnOS.js","assets/pass.fragment-CuFXGUZR.js","assets/passCube.fragment-TSCIWoNt.js","assets/vrDistortionCorrection.fragment-pPhAgNeV.js","assets/vrDistortionCorrection.fragment-Cnbto1fc.js","assets/depth.fragment-BadXIGty.js","assets/depth.vertex-C04u_REA.js","assets/geometry.fragment-B4q9QJtg.js","assets/geometry.vertex-0x_wwqG-.js","assets/boundingBoxRenderer.fragment-Co_CJ8ww.js","assets/boundingBoxRendererUboDeclaration-Dafx7zUw.js","assets/boundingBoxRenderer.vertex-CtOJGvSj.js","assets/boundingBoxRenderer.fragment-BjuwfBhz.js","assets/boundingBoxRenderer.vertex-CSzO7WNv.js","assets/outline.fragment-Bg5G7aOm.js","assets/outline.vertex-D1BXRkeB.js","assets/outline.fragment-jf2jeWJ8.js","assets/outline.vertex-CPzKcDWb.js","assets/index-CXK_O86P.js","assets/glTFLoader-CPJxWl2N.js","assets/glTFLoaderExtensionRegistry-CG18ekbh.js","assets/objectModelMapping-DapBXeOz.js","assets/glTFLoaderAnimation-DxmmLF5O.js","assets/EXT_lights_image_based-DMvZI5DU.js","assets/EXT_mesh_gpu_instancing-YYzphpzy.js","assets/EXT_meshopt_compression-B5nsEiu9.js","assets/EXT_texture_webp-CuzG0QB7.js","assets/EXT_texture_avif-Cr9gIO5m.js","assets/EXT_lights_ies-DskGASmM.js","assets/KHR_draco_mesh_compression-BsdRhlG4.js","assets/KHR_lights_punctual-BwXVPDBc.js","assets/KHR_materials_pbrSpecularGlossiness-FgyDvQQu.js","assets/KHR_materials_unlit-BuJOR4Xi.js","assets/KHR_materials_clearcoat-C7OpYfYp.js","assets/KHR_materials_iridescence-BdUr_T-4.js","assets/KHR_materials_anisotropy-QvrKx6n4.js","assets/KHR_materials_emissive_strength-DLT9LVG1.js","assets/KHR_materials_sheen-CuErNUjK.js","assets/KHR_materials_specular-Gnzn9f5L.js","assets/KHR_materials_ior-CfR31nZx.js","assets/KHR_materials_variants-Chjb0QIr.js","assets/KHR_materials_transmission-wM8wgjU8.js","assets/KHR_materials_diffuse_transmission-3Ozww9c7.js","assets/KHR_materials_volume-BhkfM3Ha.js","assets/KHR_materials_dispersion-Dt9q3dDA.js","assets/EXT_materials_diffuse_roughness-DJfMqMsh.js","assets/KHR_mesh_quantization-BKno-gfQ.js","assets/KHR_texture_basisu-DWeW_1vB.js","assets/KHR_texture_transform-C8m5s2A9.js","assets/KHR_xmp_json_ld-Cv9RbfO7.js","assets/KHR_animation_pointer-B_PuEhOX.js","assets/MSFT_audio_emitter-LQAlL0g5.js","assets/MSFT_lod-CQs1rG8i.js","assets/MSFT_minecraftMesh-CoSoxYTN.js","assets/MSFT_sRGBFactors-DiP9h1js.js","assets/KHR_interactivity-B7mGi1G7.js","assets/declarationMapper-o87tGGKL.js","assets/KHR_node_visibility-CgFZxrH9.js","assets/KHR_node_selectability-D4NtjXj9.js","assets/KHR_node_hoverability-DvcD8UwQ.js","assets/ExtrasAsMetadata-DCrPGP5Z.js","assets/index-DQy82BnJ.js","assets/stlFileLoader.metadata-2VxBZznk.js","assets/babylon.inspector.bundle-DHNd3Zau.js","assets/index-Dl28CgqM.js","assets/bvhFileLoader-Dvw9VSWZ.js","assets/objFileLoader-1XUxAeZ7.js","assets/stlFileLoader-Boz2QW4D.js","assets/splatFileLoader-DkaslJW_.js","assets/sidebar-settings-D5MbrWfv.js","assets/use-personal-family-upsell-premium-DhZZrL_R.js","assets/settings-BdpiAmkt.js","assets/voice-options-C8MCTAzI.js","assets/wallet-schemas-DTbbAZqZ.js","assets/utils-CoxV7_yt.js","assets/constants-Cw5D1Mhf.js","assets/order-details-view-CMkxmcJS.js","assets/card-info-D9nKtd8s.js","assets/visa-JoE_mpwe.js","assets/product-info-DJsxwMF3.js","assets/pidl-pages-DUiic29_.js","assets/constants-BnxRz7co.js","assets/get-products-recurrence-prices-MRGQ_XSF.js","assets/v4-CtRu48qb.js","assets/index-Chjiymov.js","assets/subtract-BL0PE28-.js","assets/shipping-address-B-Nnnkbk.js","assets/atoms-43fSdZ_3.js","assets/tracked-product-settings-ciL1a5MI.js","assets/use-price-tracking-CeEsH-VA.js","assets/buy-button-fRBzgT6L.js","assets/wallet-apis-6rXuDt7l.js","assets/shopping-telemetry-SCeFgbJz.js","assets/shopping-utils-BA-yV0Ev.js","assets/format-money-5coY0IJJ.js","assets/shopping-api-o-HOx9N4.js","assets/conversion-tracking-disclaimer-DlCn45yX.js","assets/faq-link-BaUKH9Rl.js","assets/utils-5NaMzf53.js","assets/use-ocv-feedback-CldBzKNf.js","assets/rewards-link-BS5NP16M.js","assets/gift-DbDn7R1O.js","assets/alert-CBMwgQ3Z.js","assets/error-B2ZOEfnu.js","assets/mask-wrapper-CAGZ13VU.js","assets/use-set-first-name-CxB31HkN.js","assets/moon-Br2UoPnh.js","assets/sun-brmEXQkf.js","assets/task-manager-DyNYVJg0.js","assets/wallet-element-factory-ClZdAJQN.js","assets/disconnect--ow6wsc-.js","assets/settings-button-ColUQ58o.js","assets/sidebar-pages-BKZq3krK.js","assets/conversations-BEje2hIU.js","assets/door-arrow-left-DhdwOVbt.js","assets/people-add-xdxEb_wJ.js","assets/rename-BTkswIHB.js","assets/shield-error-BCJxFnbq.js","assets/use-leave-group-BHuMlND8.js","assets/people-DhvmTWAQ.js","assets/use-tasks-BhwgDS_9.js","assets/code-BcT_a_lQ.js","assets/play-outline-ccXtENTJ.js","assets/use-executable-web-artifacts-hook-DHOmT9Vz.js","assets/core-DcX8QUKm.js","assets/language-loader-ChtJbygM.js","assets/index-CNYqgb-b.js","assets/sender-share-conversation-modal-B_GKVcoU.js","assets/sender-share-modal-cta-with-social-media-D1hvOME2.js","assets/subscription-promo-strategy-modal-CMrDmx8h.js","assets/constants-B2Xedztk.js","assets/word-DW967tDz.js","assets/apps-bs-br6Ic.js","assets/checklist-B_QSfMZY.js","assets/cloud-BMthpwcv.js","assets/research-BIQfb2b6.js","assets/index-Dw3fydpB.js","assets/appearance-component-interface-DMue6u2y.js","assets/character-BmSd48ML.js","assets/use-set-up-babylon-rJ5PJxPs.js","assets/starter-prompt-category-DOTQmFv7.js","assets/wallet-section-BoTMHx3b.js","assets/product-purchase-CMBd-_22.js","assets/upsell-block-D2CVy_eV.js","assets/cross-selling-strip-Bg4WA3T2.js","assets/price-tracking-block-hD2btxv3.js","assets/use-shopping-telemetry-CBS5g2vi.js","assets/composer-auto-complete-CHindCg5.js","assets/composer-actions-prompt-suggestions-BKsIw8f5.js","assets/composer-prompt-suggestions-NgityoDf.js","assets/composer-file-upload-prompt-suggestions-BR7OAGB2.js","assets/over-task-quota-B2ztPXJR.js","assets/composer-action-xioSqFg2.js","assets/computer-use-task-closed-C5z4DwVH.js","assets/arrow-export-D1SH4icV.js","assets/arrow-import-BEb_oJRW.js","assets/settings-bXgS7Nlo.js","assets/speed-DgNgRAby.js","assets/audio-controls-zT7a_a59.js","assets/pause-nAuTwTs-.js","assets/play-Hxx3A52A.js","assets/close-button-CJK0aKPw.js","assets/progress-bar-BuwPMWbu.js","assets/replay-CJmSx9eW.js","assets/safety-risk-card-D09yQGoS.js","assets/use-send-action-command-weTkb1gv.js","assets/add-to-page-CqlfBnUa.js","assets/cross-selling-strip-consumer-D37H-wD8.js","assets/composer-prompt-review-Oxt-D8j5.js","assets/biometric-consent-DDoMo4z5.js","assets/daily-briefing-chat-DKoBLz5g.js","assets/contract-down-left-D1SzSstz.js","assets/dailly-briefing-composer-input-Ca_80u4c.js","assets/composer-sign-in-DhH3hb3w.js","assets/merge-conversation-checkbox--Lp2--e6.js","assets/daily-briefing-composer-player-XOJBDVN8.js","assets/actions-chat-detail-GgERrXLw.js","assets/arrow-loop-Ccy9pP4G.js","assets/panel-right-expand-CiqLSYrr.js","assets/new-tab-J746Q_JP.js","assets/showroom-chat-detail-CBeHXotG.js","assets/settings-wrapper-CNkMY6KE.js","assets/dismiss-strong-DcmuEJIM.js","assets/group-chats-telemetry-BiH26vJ6.js","assets/media-viewer-CoOWZPhA.js","assets/picture-in-picture-ChHWGAsI.js","assets/video-player-C_q9BPxN.js","assets/native-player-D1dGdN0P.js","assets/composer-large-screen-yIPPnJl9.js","assets/list-card-carousel-CE738f6H.js","assets/use-carousel-BrlCVvX_.js","assets/image-card-JJ38AcOK.js","assets/image-card-telemetry-299Oi1bY.js","assets/image-gallery-CV3iziO4.js","assets/use-media-connection-CmBvRcXH.js","assets/weather-card-xiGDQEtP.js","assets/weather-utils-CEv3K6TP.js","assets/weather-states-categories-CmeEET4X.js","assets/weather-temperature-daily-QSVHp93Y.js","assets/card-carousel-CVkNu0Sw.js","assets/types-S47nI6MK.js","assets/audio-recorder-tlDtiSpY.js","assets/ai-message-DhfPbXpJ.js","assets/research-header-DAxMunHB.js","assets/citation-chips-row-CXqmCKUe.js","assets/research-final-response-DbUs5f65.js","assets/use-ads-card-operations-DVDkyTBJ.js","assets/progress-bar-optimistic-DkHjgUlY.js","assets/podcast-CYLT_viy.js","assets/use-podcast-share-C_4pSKoy.js","assets/use-podcasts-navigation-VAUP-i4-.js","assets/use-research-navigation-Cs6jiFmk.js","assets/widget-section-CkOZAdJ3.js","assets/shopping-starter-card-BdMC8xea.js","assets/sse-stream-reader-CprQQx-M.js","assets/use-shopping-duration-telemetry-C-1Q8ItB.js","assets/product-rating-CaLTy96s.js","assets/bell-filled-B1jYa6ZA.js","assets/bell-CX7GaD34.js","assets/star-filled-SnxQLuy9.js","assets/use-shopping-visibility-telemetry-BzdBLhWC.js","assets/arrow-up-right-bF77Ih0I.js","assets/arrow-trending-down-Dk1H9fwv.js","assets/price-history-chart-ho8XBU4-.js","assets/ResponsiveContainer-DIMISnb3.js","assets/CategoricalChart-CmiRusFe.js","assets/CartesianChart-CiixeUGN.js","assets/ReferenceDot-CayEImA0.js","assets/rich-card-actions-B61TOteb.js","assets/appearance-chat-CjboCFso.js","assets/appearance-analytics-adapter-B3mHNB4C.js","assets/typeahead-ESfLmDG3.js","assets/product-details-modal-CDHrI0py.js","assets/wallet-dropdown-ts3uozk0.js","assets/wallet-list-DItiqkBU.js","assets/price-tracking-modal-BnjNpweT.js","assets/topic-selection.lazy-CtPXZBG_.js","assets/shopping.lazy-B9-Ukm6X.js","assets/use-product-details-entrypoint-qseteCH5.js","assets/login.lazy-BSnlLQM4.js","assets/library.lazy-DNlxHNmr.js","assets/edit-line-horizontal-u46pVmJG.js","assets/page-share-modal-CsbG58mf.js","assets/word-B90tdQFy.js","assets/page-delete-modal-CEhHeQuu.js","assets/shared-page-delete-modal-u_lD-Col.js","assets/secondsToMinutes-DCUcWLUJ.js","assets/task-share-modal-DZQUvI19.js","assets/tasks-schemas-CVpzmS-g.js","assets/share-url-modal-DMc6cyNY.js","assets/imagine._galleryItemId.lazy-CZAgLBD_.js","assets/creator-gallery-detail-DHxAOJlZ.js","assets/heart-filled-DwQkWcna.js","assets/heart-BUI9MTJI.js","assets/separator-CX2V1Zpp.js","assets/model-viewer-3d-DEe8MdvS.js","assets/cube-filled-Bs_y_l_b.js","assets/cube-nbqXGsCW.js","assets/gaming.lazy-Bwrd6bAY.js","assets/use-labs-telemetry-BYwjjD5T.js","assets/gallery._galleryItemId.lazy-CrmHEoT-.js","assets/daily.lazy-B3DP2Cro.js","assets/daily-briefing-yA0MhSpr.js","assets/formatDistanceToNow-efsVegXm.js","assets/constructNow-B9lqkW9k.js","assets/en-US-DXcgFgB0.js","assets/parseISO-BtovwkKf.js","assets/use-scroll-element-into-view-DLLVmTyH.js","assets/arrow-maximize-SvoEz6ao.js","assets/arrow-minimize-DYyMwyl1.js","assets/use-is-portrait-DUvb4nJ_.js","assets/wand-B8ht7_4r.js","assets/use-discover-feed-CI5VLi6d.js","assets/agents.lazy-BOiDXjaC.js","assets/index.lazy-C001kU32.js","assets/arrow-referral-B8Y1seT-.js","assets/chat-sparkle-CoNFYa0_.js","assets/four-leaf-clover-Be-CmGBR.js","assets/copliot-outline-vjKy9AnK.js","assets/index.lazy-DCHrotUH.js","assets/index-CQkorxqn.js","assets/index.lazy-C0kI_3Ay.js","assets/subscription.start.lazy-D7vq01YT.js","assets/subscription.manage.lazy-Cl7C5P0c.js","assets/shares._conversationId.lazy-4Ld18ygc.js","assets/research._researchId.lazy-DCazggvq.js","assets/use-page-back-C-jOiTwl.js","assets/task-error-UShptakI.js","assets/rules.lazy-CiG5_vRq.js","assets/link-multiple-CybAXck_.js","assets/pro.subscribe.lazy-DfQbPle2.js","assets/checkout-wrapper-CWE7sNTf.js","assets/add-address-BPmQSdjK.js","assets/address-DSA7ijzq.js","assets/pidl-element-factory-CrVvngZj.js","assets/workflow-pi-dropdown-disabler-ApIX-w6i.js","assets/react-number-format.es-btAfnDrP.js","assets/dropdown-radio-TydZNQSy.js","assets/credit-card-BVpd1BYc.js","assets/wallet-dropdown-expanded-title-D4s6Lp7k.js","assets/pidl-element-factory-Cq7KyA6l.css","assets/add-address-view-CiD6xkiU.js","assets/form-field-skeleton-CRbZ20p-.js","assets/add-payment-instrument-DJcJQCa2.js","assets/add-payment-instrument-view-WuGGa8SS.js","assets/add-ewallet-skeleton-DykSy8aT.js","assets/select-payment-instrument-BvThrgdR.js","assets/start-line-BkL62B0X.js","assets/paywall-container-ClG5y80K.js","assets/pro.subscribe-jQX9gqYg.css","assets/memory.narrative.lazy-PZBy-HC3.js","assets/e.sol.lazy-B0s3aLYS.js","assets/e.so.lazy-Ci6xLu9N.js","assets/connector.callback.lazy-CQEXIkLj.js","assets/chats.private.lazy-Xvauu3Bp.js","assets/campaigns._campaignId.lazy-DdxvQc7L.js","assets/partners.feedback.lazy-KdpHXT7b.js","assets/CentroFeedbackFunctions-CV6VAruf.js","assets/pages._pageId.lazy-D6pwkz3s.js","assets/use-clean-history-state-BrFrS4_f.js","assets/text-bold-BdbXrbIp.js","assets/text-bullet-list--_rkkDHO.js","assets/text-code-C9A1Gx_D.js","assets/text-italic-CJdcQBMh.js","assets/text-numbered-list-BNgWwIC0.js","assets/text-paragraph-B1x0v9hA.js","assets/use-ensure-authenticated-erb1D-QM.js","assets/arrow-enter-up-DamBzCZL.js","assets/thumbs-down-filled-qbWr9p6F.js","assets/thumbs-up-filled-DTU1MQRi.js","assets/use-emit-page-loaded-DbsUJkZo.js","assets/use-clean-history-state-D2jPmWlQ.css","assets/copy-add-BaLnQdPD.js","assets/index.lazy-CI10m7_v.js","assets/portrait-gallery-DWSwMNAY.js","assets/consent-modal-BruF6syL.js","assets/portrait-cache-D5hDYDqN.js","assets/mock-interview.lazy-BD4lXo3U.js","assets/index.lazy-DlIEjFhG.js","assets/labs-badge-BOiCbdbT.js","assets/shares.tasks._shareId.lazy-Bk2RYtnS.js","assets/shares.podcasts._shareId.lazy-DjwnNRvd.js","assets/shares.3d-generations._shareId.lazy-_GIecbTu.js","assets/use-3d-generations-D5IcLeZ_.js","assets/arrow-counter-clockwise-D2g1Y4PE.js","assets/printer-3d-B_v2qNY1.js","assets/use-sidebar-position-DbTOOXrD.js","assets/pro.redeem._redeemCode.lazy-Bg9UeqZ_.js","assets/pro.ewallet.return.lazy-Qi319rlM.js","assets/podcasts._podcastType._podcastId.lazy-Bc-6xAVK.js","assets/talk.lazy-umDRrR1G.js","assets/portrait-talk-Dq1UO11Z.js","assets/audio-call-zqMG4iVj.js","assets/timer-B_Tw5uo9.js","assets/use-appearance-preload-behind-modal-WwFRzPBH.js","assets/gallery.lazy-B0_Giqo6.js","assets/experiments._experimentAlias.lazy-CQTE4oNS.js","assets/discover._-_modalType_._-_modalId_.lazy-CksPN7Ee.js","assets/conversations.join._token.lazy-BI_N0jlN.js","assets/shares.pages._shareId.lazy-pBfZZYvH.js","assets/eye-DgqCauNK.js","assets/chats_._conversationId.talk.lazy-CH-SnYa4.js","assets/index.lazy-BnKzTktL.js","assets/my-creations.lazy-Cf7W6k4H.js","assets/use-responsive-masonry-DLtiVR8p.js","assets/use-window-size-DE1yMN4Q.js","assets/my-creations-BiEk7v8n.css","assets/create.lazy-CSMo7x40.js"])))=>i.map(i=>d[i]);
var qL=Object.defineProperty;var vb=e=>{throw TypeError(e)};var ZL=(e,t,n)=>t in e?qL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O=(e,t,n)=>ZL(e,typeof t!="symbol"?t+"":t,n),Zh=(e,t,n)=>t.has(e)||vb("Cannot "+n);var ue=(e,t,n)=>(Zh(e,t,"read from private field"),n?n.call(e):t.get(e)),jt=(e,t,n)=>t.has(e)?vb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),vt=(e,t,n,s)=>(Zh(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Oe=(e,t,n)=>(Zh(e,t,"access private method"),n);import{a0 as KL,r as l,j as c,_ as V,a1 as YL,R as gi,C as Ne,l as w,o as S,s as h,p as ke,P as At,n as j,q as nt,h as L,g as fe,a2 as rr,f as ki,J as O9,a3 as Wp,a4 as QL,a5 as Cb,a6 as wd,a7 as D9,a8 as qm,a9 as JL,aa as XL,ab as yb,ac as zf,i as Pt,z as Rs,t as z,e as Id,I as j9,ad as eO,ae as tO,K as nO,af as sO,ag as bb,ah as oO,ai as rO,b as Y,L as aO,H as pl,W as iO,d as Mi,T as hn,aj as cO,v as $p,A as qp,M as lO,ak as uO,O as dO,al as mO,am as ou,a as fO,an as F9,ao as pO,ap as hO,aq as gO,ar as Kh,m as Je,x as vO,as as CO,at as yO,au as bO,av as xO}from"./vendor-XhZj4hnV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();KL({jitless:!0});const U9=l.createContext({});function ir(e){const t=l.useRef(null);return t.current===null&&(t.current=e()),t.current}const _d=l.createContext(null),vi=l.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class SO extends l.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,o=s instanceof HTMLElement&&s.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=o-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function EO({children:e,isPresent:t,anchorX:n}){const s=l.useId(),o=l.useRef(null),r=l.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=l.useContext(vi);return l.useInsertionEffect(()=>{const{width:i,height:u,top:d,left:m,right:f}=r.current;if(t||!o.current||!i||!u)return;const p=n==="left"?`left: ${m}`:`right: ${f}`;o.current.dataset.motionPopId=s;const g=document.createElement("style");return a&&(g.nonce=a),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[t]),c.jsx(SO,{isPresent:t,childRef:o,sizeRef:r,children:l.cloneElement(e,{ref:o})})}const wO=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:r,mode:a,anchorX:i})=>{const u=ir(IO),d=l.useId(),m=l.useCallback(p=>{u.set(p,!0);for(const g of u.values())if(!g)return;s&&s()},[u,s]),f=l.useMemo(()=>({id:d,initial:t,isPresent:n,custom:o,onExitComplete:m,register:p=>(u.set(p,!1),()=>u.delete(p))}),r?[Math.random(),m]:[n,m]);return l.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[n]),l.useEffect(()=>{!n&&!u.size&&s&&s()},[n]),a==="popLayout"&&(e=c.jsx(EO,{isPresent:n,anchorX:i,children:e})),c.jsx(_d.Provider,{value:f,children:e})};function IO(){return new Map}function _O(e=!0){const t=l.useContext(_d);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=t,r=l.useId();l.useEffect(()=>{if(e)return o(r)},[e]);const a=l.useCallback(()=>e&&s&&s(r),[r,s,e]);return!n&&s?[!1,a]:[!0]}function ESe(){return TO(l.useContext(_d))}function TO(e){return e===null?!0:e.isPresent}const Zm=e=>e.key||"";function xb(e){const t=[];return l.Children.forEach(e,n=>{l.isValidElement(n)&&t.push(n)}),t}const B9=typeof window<"u",Td=B9?l.useLayoutEffect:l.useEffect,pt=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:r="sync",propagate:a=!1,anchorX:i="left"})=>{const[u,d]=_O(a),m=l.useMemo(()=>xb(e),[e]),f=a&&!u?[]:m.map(Zm),p=l.useRef(!0),g=l.useRef(m),C=ir(()=>new Map),[v,b]=l.useState(m),[y,E]=l.useState(m);Td(()=>{p.current=!1,g.current=m;for(let _=0;_<y.length;_++){const T=Zm(y[_]);f.includes(T)?C.delete(T):C.get(T)!==!0&&C.set(T,!1)}},[y,f.length,f.join("-")]);const x=[];if(m!==v){let _=[...m];for(let T=0;T<y.length;T++){const A=y[T],k=Zm(A);f.includes(k)||(_.splice(T,0,A),x.push(A))}return r==="wait"&&x.length&&(_=x),E(xb(_)),b(m),null}const{forceRender:I}=l.useContext(U9);return c.jsx(c.Fragment,{children:y.map(_=>{const T=Zm(_),A=a&&!u?!1:m===y||f.includes(T),k=()=>{if(C.has(T))C.set(T,!0);else return;let R=!0;C.forEach(P=>{P||(R=!1)}),R&&(I==null||I(),E(g.current),a&&(d==null||d()),s&&s())};return c.jsx(wO,{isPresent:A,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:r,onExitComplete:A?void 0:k,anchorX:i,children:_},T)})})},ya=e=>e;let AO=ya,V9=ya;const j0={skipAnimations:!1,useManualTiming:!1},Km=["read","resolveKeyframes","update","preRender","render","postRender"];function kO(e,t){let n=new Set,s=new Set,o=!1,r=!1;const a=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function u(m){a.has(m)&&(d.schedule(m),e()),m(i)}const d={schedule:(m,f=!1,p=!1)=>{const C=p&&o?n:s;return f&&a.add(m),C.has(m)||C.add(m),m},cancel:m=>{s.delete(m),a.delete(m)},process:m=>{if(i=m,o){r=!0;return}o=!0,[n,s]=[s,n],n.forEach(u),n.clear(),o=!1,r&&(r=!1,d.process(m))}};return d}const MO=40;function H9(e,t){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=Km.reduce((y,E)=>(y[E]=kO(r),y),{}),{read:i,resolveKeyframes:u,update:d,preRender:m,render:f,postRender:p}=a,g=()=>{const y=j0.useManualTiming?o.timestamp:performance.now();n=!1,j0.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(y-o.timestamp,MO),1)),o.timestamp=y,o.isProcessing=!0,i.process(o),u.process(o),d.process(o),m.process(o),f.process(o),p.process(o),o.isProcessing=!1,n&&t&&(s=!1,e(g))},C=()=>{n=!0,s=!0,o.isProcessing||e(g)};return{schedule:Km.reduce((y,E)=>{const x=a[E];return y[E]=(I,_=!1,T=!1)=>(n||C(),x.schedule(I,_,T)),y},{}),cancel:y=>{for(let E=0;E<Km.length;E++)a[Km[E]].cancel(y)},state:o,steps:a}}const{schedule:_s,cancel:Zp,state:Zu,steps:wSe}=H9(typeof requestAnimationFrame<"u"?requestAnimationFrame:ya,!0),V5=l.createContext({strict:!1}),Sb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Gf={};for(const e in Sb)Gf[e]={isEnabled:t=>Sb[e].some(n=>!!t[n])};function F0(e){for(const t in e)Gf[t]={...Gf[t],...e[t]}}function NO({children:e,features:t,strict:n=!1}){const[,s]=l.useState(!Yh(t)),o=l.useRef(void 0);if(!Yh(t)){const{renderer:r,...a}=t;o.current=r,F0(a)}return l.useEffect(()=>{Yh(t)&&t().then(({renderer:r,...a})=>{F0(a),o.current=r,s(!0)})},[]),c.jsx(V5.Provider,{value:{renderer:o.current,strict:n},children:e})}function Yh(e){return typeof e=="function"}const RO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||RO.has(e)}let z9=e=>!Wf(e);function G9(e){e&&(z9=t=>t.startsWith("on")?!Wf(t):e(t))}try{G9(require("@emotion/is-prop-valid").default)}catch{}function PO(e,t,n){const s={};for(const o in e)o==="values"&&typeof e.values=="object"||(z9(o)||n===!0&&Wf(o)||!t&&!Wf(o)||e.draggable&&o.startsWith("onDrag"))&&(s[o]=e[o]);return s}function W9({children:e,isValidProp:t,...n}){t&&G9(t),n={...l.useContext(vi),...n},n.isStatic=ir(()=>n.isStatic);const s=l.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return c.jsx(vi.Provider,{value:s,children:e})}function LO(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,o)=>o==="create"?e:(t.has(o)||t.set(o,e(o)),t.get(o))})}const Kp=l.createContext({});function $9(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function U0(e){return typeof e=="string"||Array.isArray(e)}const OO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],DO=["initial",...OO];function H5(e){return $9(e.animate)||DO.some(t=>U0(e[t]))}function jO(e){return!!(H5(e)||e.variants)}function FO(e,t){if(H5(e)){const{initial:n,animate:s}=e;return{initial:n===!1||U0(n)?n:void 0,animate:U0(s)?s:void 0}}return e.inherit!==!1?t:{}}function UO(e){const{initial:t,animate:n}=FO(e,l.useContext(Kp));return l.useMemo(()=>({initial:t,animate:n}),[Eb(t),Eb(n)])}function Eb(e){return Array.isArray(e)?e.join(" "):e}const BO=Symbol.for("motionComponentSymbol");function q9(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function VO(e,t,n){return l.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):q9(n)&&(n.current=s))},[t])}const Z9=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HO="framerAppearId",zO="data-"+Z9(HO),{schedule:GO}=H9(queueMicrotask,!1),WO=l.createContext({});function $O(e,t,n,s,o){var r,a;const{visualElement:i}=l.useContext(Kp),u=l.useContext(V5),d=l.useContext(_d),m=l.useContext(vi).reducedMotion,f=l.useRef(null);s=s||u.renderer,!f.current&&s&&(f.current=s(e,{visualState:t,parent:i,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m}));const p=f.current,g=l.useContext(WO);p&&!p.projection&&o&&(p.type==="html"||p.type==="svg")&&qO(f.current,n,o,g);const C=l.useRef(!1);l.useInsertionEffect(()=>{p&&C.current&&p.update(n,d)});const v=n[zO],b=l.useRef(!!v&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,v))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,v)));return Td(()=>{p&&(C.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),GO.render(p.render),b.current&&p.animationState&&p.animationState.animateChanges())}),l.useEffect(()=>{p&&(!b.current&&p.animationState&&p.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,v)}),b.current=!1))}),p}function qO(e,t,n,s){const{layoutId:o,layout:r,drag:a,dragConstraints:i,layoutScroll:u,layoutRoot:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:K9(e.parent)),e.projection.setOptions({layoutId:o,layout:r,alwaysMeasureLayout:!!a||i&&q9(i),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,layoutScroll:u,layoutRoot:d})}function K9(e){if(e)return e.options.allowProjection!==!1?e.projection:K9(e.parent)}function ZO({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:o}){var r,a;e&&F0(e);function i(d,m){let f;const p={...l.useContext(vi),...d,layoutId:KO(d)},{isStatic:g}=p,C=UO(d),v=s(d,g);if(!g&&B9){YO();const b=QO(p);f=b.MeasureLayout,C.visualElement=$O(o,v,p,t,b.ProjectionNode)}return c.jsxs(Kp.Provider,{value:C,children:[f&&C.visualElement?c.jsx(f,{visualElement:C.visualElement,...p}):null,n(o,d,VO(v,C.visualElement,m),v,g,C.visualElement)]})}i.displayName=`motion.${typeof o=="string"?o:`create(${(a=(r=o.displayName)!==null&&r!==void 0?r:o.name)!==null&&a!==void 0?a:""})`}`;const u=l.forwardRef(i);return u[BO]=o,u}function KO({layoutId:e}){const t=l.useContext(U9).id;return t&&e!==void 0?t+"-"+e:e}function YO(e,t){l.useContext(V5).strict}function QO(e){const{drag:t,layout:n}=Gf;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const Y9=e=>t=>typeof t=="string"&&t.startsWith(e),Q9=Y9("--"),JO=Y9("var(--"),XO=e=>JO(e)?eD.test(e.split("/*")[0].trim()):!1,eD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,B0={};function ISe(e){for(const t in e)B0[t]=e[t],Q9(t)&&(B0[t].isCSSVariable=!0)}const Ad=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],z5=new Set(Ad);function J9(e,{layout:t,layoutId:n}){return z5.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!B0[e]||e==="opacity")}const cr=e=>!!(e&&e.getVelocity),X9=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ia=(e,t,n)=>n>t?t:n<e?e:n,kd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ku={...kd,transform:e=>ia(0,1,e)},Ym={...kd,default:1},Md=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Da=Md("deg"),Mu=Md("%"),et=Md("px"),_Se=Md("vh"),TSe=Md("vw"),wb={...Mu,parse:e=>Mu.parse(e)/100,transform:e=>Mu.transform(e*100)},tD={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,backgroundPositionX:et,backgroundPositionY:et},nD={rotate:Da,rotateX:Da,rotateY:Da,rotateZ:Da,scale:Ym,scaleX:Ym,scaleY:Ym,scaleZ:Ym,skew:Da,skewX:Da,skewY:Da,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:Ku,originX:wb,originY:wb,originZ:et},Ib={...kd,transform:Math.round},e7={...tD,...nD,zIndex:Ib,size:et,fillOpacity:Ku,strokeOpacity:Ku,numOctaves:Ib},sD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oD=Ad.length;function rD(e,t,n){let s="",o=!0;for(let r=0;r<oD;r++){const a=Ad[r],i=e[a];if(i===void 0)continue;let u=!0;if(typeof i=="number"?u=i===(a.startsWith("scale")?1:0):u=parseFloat(i)===0,!u||n){const d=X9(i,e7[a]);if(!u){o=!1;const m=sD[a]||a;s+=`${m}(${d}) `}n&&(t[a]=d)}}return s=s.trim(),n?s=n(t,o?"":s):o&&(s="none"),s}function t7(e,t,n){const{style:s,vars:o,transformOrigin:r}=e;let a=!1,i=!1;for(const u in t){const d=t[u];if(z5.has(u)){a=!0;continue}else if(Q9(u)){o[u]=d;continue}else{const m=X9(d,e7[u]);u.startsWith("origin")?(i=!0,r[u]=m):s[u]=m}}if(t.transform||(a||n?s.transform=rD(t,e.transform,n):s.transform&&(s.transform="none")),i){const{originX:u="50%",originY:d="50%",originZ:m=0}=r;s.transformOrigin=`${u} ${d} ${m}`}}const G5=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function n7(e,t,n){for(const s in t)!cr(t[s])&&!J9(s,n)&&(e[s]=t[s])}function aD({transformTemplate:e},t){return l.useMemo(()=>{const n=G5();return t7(n,t,e),Object.assign({},n.vars,n.style)},[t])}function iD(e,t){const n=e.style||{},s={};return n7(s,n,e),Object.assign(s,aD(e,t)),s}function cD(e,t){const n={},s=iD(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const lD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function s7(e){return typeof e!="string"||e.includes("-")?!1:!!(lD.indexOf(e)>-1||/[A-Z]/u.test(e))}const uD={offset:"stroke-dashoffset",array:"stroke-dasharray"},dD={offset:"strokeDashoffset",array:"strokeDasharray"};function mD(e,t,n=1,s=0,o=!0){e.pathLength=1;const r=o?uD:dD;e[r.offset]=et.transform(-s);const a=et.transform(t),i=et.transform(n);e[r.array]=`${a} ${i}`}function _b(e,t,n){return typeof e=="string"?e:et.transform(t+n*e)}function fD(e,t,n){const s=_b(t,e.x,e.width),o=_b(n,e.y,e.height);return`${s} ${o}`}function o7(e,{attrX:t,attrY:n,attrScale:s,originX:o,originY:r,pathLength:a,pathSpacing:i=1,pathOffset:u=0,...d},m,f){if(t7(e,d,f),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g,dimensions:C}=e;p.transform&&(C&&(g.transform=p.transform),delete p.transform),C&&(o!==void 0||r!==void 0||g.transform)&&(g.transformOrigin=fD(C,o!==void 0?o:.5,r!==void 0?r:.5)),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),s!==void 0&&(p.scale=s),a!==void 0&&mD(p,a,i,u,!1)}const r7=()=>({...G5(),attrs:{}}),a7=e=>typeof e=="string"&&e.toLowerCase()==="svg";function pD(e,t,n,s){const o=l.useMemo(()=>{const r=r7();return o7(r,t,a7(s),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};n7(r,e.style,e),o.style={...r,...o.style}}return o}function hD(e=!1){return(n,s,o,{latestValues:r},a)=>{const u=(s7(n)?pD:cD)(s,r,a,n),d=PO(s,typeof n=="string",e),m=n!==l.Fragment?{...d,...u,ref:o}:{},{children:f}=s,p=l.useMemo(()=>cr(f)?f.get():f,[f]);return l.createElement(n,{...m,children:p})}}function Tb(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function gD(e,t,n,s){if(typeof t=="function"){const[o,r]=Tb(s);t=t(n!==void 0?n:e.custom,o,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,r]=Tb(s);t=t(n!==void 0?n:e.custom,o,r)}return t}const vD=e=>Array.isArray(e),CD=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),ASe=e=>vD(e)?e[e.length-1]||0:e;function yD(e){const t=cr(e)?e.get():e;return CD(t)?t.toValue():t}function bD({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},s,o,r){const a={latestValues:xD(s,o,r,e),renderState:t()};return n&&(a.onMount=i=>n({props:s,current:i,...a}),a.onUpdate=i=>n(i)),a}const i7=e=>(t,n)=>{const s=l.useContext(Kp),o=l.useContext(_d),r=()=>bD(e,t,s,o);return n?r():ir(r)};function xD(e,t,n,s){const o={},r=s(e,{});for(const p in r)o[p]=yD(r[p]);let{initial:a,animate:i}=e;const u=H5(e),d=jO(e);t&&d&&!u&&e.inherit!==!1&&(a===void 0&&(a=t.initial),i===void 0&&(i=t.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const f=m?i:a;if(f&&typeof f!="boolean"&&!$9(f)){const p=Array.isArray(f)?f:[f];for(let g=0;g<p.length;g++){const C=gD(e,p[g]);if(C){const{transitionEnd:v,transition:b,...y}=C;for(const E in y){let x=y[E];if(Array.isArray(x)){const I=m?x.length-1:0;x=x[I]}x!==null&&(o[E]=x)}for(const E in v)o[E]=v[E]}}}return o}function c7(e,t,n){var s;const{style:o}=e,r={};for(const a in o)(cr(o[a])||t.style&&cr(t.style[a])||J9(a,e)||((s=n==null?void 0:n.getValue(a))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(r[a]=o[a]);return r}const SD={useVisualState:i7({scrapeMotionValuesFromProps:c7,createRenderState:G5})};function ED(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function wD(e,{style:t,vars:n},s,o){Object.assign(e.style,t,o&&o.getProjectionStyles(s));for(const r in n)e.style.setProperty(r,n[r])}const ID=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _D(e,t,n,s){wD(e,t,void 0,s);for(const o in t.attrs)e.setAttribute(ID.has(o)?o:Z9(o),t.attrs[o])}function TD(e,t,n){const s=c7(e,t,n);for(const o in e)if(cr(e[o])||cr(t[o])){const r=Ad.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[r]=e[o]}return s}const Ab=["x","y","width","height","cx","cy","r"],AD={useVisualState:i7({scrapeMotionValuesFromProps:TD,createRenderState:r7,onUpdate:({props:e,prevProps:t,current:n,renderState:s,latestValues:o})=>{if(!n)return;let r=!!e.drag;if(!r){for(const i in o)if(z5.has(i)){r=!0;break}}if(!r)return;let a=!t;if(t)for(let i=0;i<Ab.length;i++){const u=Ab[i];e[u]!==t[u]&&(a=!0)}a&&_s.read(()=>{ED(n,s),_s.render(()=>{o7(s,o,a7(n.tagName),e.transformTemplate),_D(n,s)})})}})};function kD(e,t){return function(s,{forwardMotionProps:o}={forwardMotionProps:!1}){const a={...s7(s)?AD:SD,preloadedFeatures:e,useRender:hD(o),createVisualElement:t,Component:s};return ZO(a)}}const MD=kD(),ge=LO(MD);let Sf;function ND(){Sf=void 0}const ui={now:()=>(Sf===void 0&&ui.set(Zu.isProcessing||j0.useManualTiming?Zu.timestamp:performance.now()),Sf),set:e=>{Sf=e,queueMicrotask(ND)}};function RD(e,t){e.indexOf(t)===-1&&e.push(t)}function PD(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function kSe([...e],t,n){const s=t<0?e.length+t:t;if(s>=0&&s<e.length){const o=n<0?e.length+n:n,[r]=e.splice(t,1);e.splice(o,0,r)}return e}class LD{constructor(){this.subscriptions=[]}add(t){return RD(this.subscriptions,t),()=>PD(this.subscriptions,t)}notify(t,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,s);else for(let r=0;r<o;r++){const a=this.subscriptions[r];a&&a(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function W5(e,t){return t?e*(1e3/t):0}const kb=30,OD=e=>!isNaN(parseFloat(e)),Nu={current:void 0};class DD{constructor(t,n={}){this.version="12.4.7",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,o=!0)=>{const r=ui.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ui.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=OD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new LD);const s=this.events[t].add(n);return t==="change"?()=>{s(),_s.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Nu.current&&Nu.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=ui.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>kb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,kb);return W5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ac(e,t){return new DD(e,t)}function jD(e){let t;return()=>(t===void 0&&(t=e()),t)}const FD=jD(()=>window.ScrollTimeline!==void 0),$5=e=>e*1e3,jc=e=>e/1e3,UD={current:!1};function l7(e){return typeof e=="function"}const BD=e=>Array.isArray(e)&&typeof e[0]=="number",Yp=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},VD=(e,t,n=10)=>{let s="";const o=Math.max(Math.round(t/n),2);for(let r=0;r<o;r++)s+=e(Yp(0,o-1,r))+", ";return`linear(${s.substring(0,s.length-2)})`},u7=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,HD=1e-7,zD=12;function GD(e,t,n,s,o){let r,a,i=0;do a=t+(n-t)/2,r=u7(a,s,o)-e,r>0?n=a:t=a;while(Math.abs(r)>HD&&++i<zD);return a}function Nd(e,t,n,s){if(e===t&&n===s)return ya;const o=r=>GD(r,0,1,e,n);return r=>r===0||r===1?r:u7(o(r),t,s)}const d7=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,m7=e=>t=>1-e(1-t),f7=Nd(.33,1.53,.69,.99),q5=m7(f7),WD=d7(q5),$D=e=>(e*=2)<1?.5*q5(e):.5*(2-Math.pow(2,-10*(e-1))),Z5=e=>1-Math.sin(Math.acos(e)),qD=m7(Z5),ZD=d7(Z5),Ru=e=>Math.round(e*1e5)/1e5,p7=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KD(e){return e==null}const YD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,K5=(e,t)=>n=>!!(typeof n=="string"&&YD.test(n)&&n.startsWith(e)||t&&!KD(n)&&Object.prototype.hasOwnProperty.call(n,t)),h7=(e,t,n)=>s=>{if(typeof s!="string")return s;const[o,r,a,i]=s.match(p7);return{[e]:parseFloat(o),[t]:parseFloat(r),[n]:parseFloat(a),alpha:i!==void 0?parseFloat(i):1}},QD=e=>ia(0,255,e),Qh={...kd,transform:e=>Math.round(QD(e))},ri={test:K5("rgb","red"),parse:h7("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Qh.transform(e)+", "+Qh.transform(t)+", "+Qh.transform(n)+", "+Ru(Ku.transform(s))+")"};function JD(e){let t="",n="",s="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,s+=s,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const V0={test:K5("#"),parse:JD,transform:ri.transform},kc={test:K5("hsl","hue"),parse:h7("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Mu.transform(Ru(t))+", "+Mu.transform(Ru(n))+", "+Ru(Ku.transform(s))+")"},Yu={test:e=>ri.test(e)||V0.test(e)||kc.test(e),parse:e=>ri.test(e)?ri.parse(e):kc.test(e)?kc.parse(e):V0.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ri.transform(e):kc.transform(e)},XD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ej(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(p7))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(XD))===null||n===void 0?void 0:n.length)||0)>0}const g7="number",v7="color",tj="var",nj="var(",Mb="${}",sj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $f(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},o=[];let r=0;const i=t.replace(sj,u=>(Yu.test(u)?(s.color.push(r),o.push(v7),n.push(Yu.parse(u))):u.startsWith(nj)?(s.var.push(r),o.push(tj),n.push(u)):(s.number.push(r),o.push(g7),n.push(parseFloat(u))),++r,Mb)).split(Mb);return{values:n,split:i,indexes:s,types:o}}function C7(e){return $f(e).values}function y7(e){const{split:t,types:n}=$f(e),s=t.length;return o=>{let r="";for(let a=0;a<s;a++)if(r+=t[a],o[a]!==void 0){const i=n[a];i===g7?r+=Ru(o[a]):i===v7?r+=Yu.transform(o[a]):r+=o[a]}return r}}const oj=e=>typeof e=="number"?0:e;function rj(e){const t=C7(e);return y7(e)(t.map(oj))}const b7={test:ej,parse:C7,createTransformer:y7,getAnimatableNone:rj},MSe=e=>e===kd||e===et,Nb=(e,t)=>parseFloat(e.split(", ")[t]),Rb=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const o=s.match(/^matrix3d\((.+)\)$/u);if(o)return Nb(o[1],t);{const r=s.match(/^matrix\((.+)\)$/u);return r?Nb(r[1],e):0}},aj=new Set(["x","y","z"]),ij=Ad.filter(e=>!aj.has(e));function cj(e){const t=[];return ij.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const qf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Rb(4,13),y:Rb(5,14)};qf.translateX=qf.x;qf.translateY=qf.y;const di=new Set;let H0=!1,z0=!1;function x7(){if(z0){const e=Array.from(di).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const o=cj(s);o.length&&(n.set(s,o),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const o=n.get(s);o&&o.forEach(([r,a])=>{var i;(i=s.getValue(r))===null||i===void 0||i.set(a)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}z0=!1,H0=!1,di.forEach(e=>e.complete()),di.clear()}function S7(){di.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(z0=!0)})}function lj(){S7(),x7()}class uj{constructor(t,n,s,o,r,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=o,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(di.add(this),H0||(H0=!0,_s.read(S7),_s.resolveKeyframes(x7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:o}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const a=o==null?void 0:o.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(s&&n){const u=s.readValue(n,i);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=i),o&&a===void 0&&o.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),di.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,di.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Pb=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(b7.test(e)||e==="0")&&!e.startsWith("url("));function dj(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function mj(e,t,n,s){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],a=Pb(o,t),i=Pb(r,t);return!a||!i?!1:dj(e)||(n==="spring"||l7(n))&&s}const fj=e=>e!==null;function E7(e,{repeat:t,repeatType:n="loop"},s){const o=e.filter(fj),r=t&&n!=="loop"&&t%2===1?0:o.length-1;return!r||s===void 0?o[r]:s}const pj=40;class hj{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:r=0,repeatType:a="loop",...i}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ui.now(),this.options={autoplay:t,delay:n,type:s,repeat:o,repeatDelay:r,repeatType:a,...i},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>pj?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&lj(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=ui.now(),this.hasAttemptedResolve=!0;const{name:s,type:o,velocity:r,delay:a,onComplete:i,onUpdate:u,isGenerator:d}=this.options;if(!d&&!mj(t,s,o,r))if(UD.current||!a){u&&u(E7(t,this.options,n)),i&&i(),this.resolveFinishedPromise();return}else this.options.duration=0;const m=this.initPlayback(t,n);m!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const G0=2e4;function w7(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<G0;)t+=n,s=e.next(t);return t>=G0?1/0:t}const Qp=(e,t,n)=>e+(t-e)*n;function Jh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function gj({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let o=0,r=0,a=0;if(!t)o=r=a=n;else{const i=n<.5?n*(1+t):n+t-n*t,u=2*n-i;o=Jh(u,i,e+1/3),r=Jh(u,i,e),a=Jh(u,i,e-1/3)}return{red:Math.round(o*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:s}}function Zf(e,t){return n=>n>0?t:e}const Xh=(e,t,n)=>{const s=e*e,o=n*(t*t-s)+s;return o<0?0:Math.sqrt(o)},vj=[V0,ri,kc],Cj=e=>vj.find(t=>t.test(e));function Lb(e){const t=Cj(e);if(!t)return!1;let n=t.parse(e);return t===kc&&(n=gj(n)),n}const Ob=(e,t)=>{const n=Lb(e),s=Lb(t);if(!n||!s)return Zf(e,t);const o={...n};return r=>(o.red=Xh(n.red,s.red,r),o.green=Xh(n.green,s.green,r),o.blue=Xh(n.blue,s.blue,r),o.alpha=Qp(n.alpha,s.alpha,r),ri.transform(o))},yj=(e,t)=>n=>t(e(n)),Y5=(...e)=>e.reduce(yj),W0=new Set(["none","hidden"]);function bj(e,t){return W0.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function xj(e,t){return n=>Qp(e,t,n)}function Q5(e){return typeof e=="number"?xj:typeof e=="string"?XO(e)?Zf:Yu.test(e)?Ob:wj:Array.isArray(e)?I7:typeof e=="object"?Yu.test(e)?Ob:Sj:Zf}function I7(e,t){const n=[...e],s=n.length,o=e.map((r,a)=>Q5(r)(r,t[a]));return r=>{for(let a=0;a<s;a++)n[a]=o[a](r);return n}}function Sj(e,t){const n={...e,...t},s={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(s[o]=Q5(e[o])(e[o],t[o]));return o=>{for(const r in s)n[r]=s[r](o);return n}}function Ej(e,t){var n;const s=[],o={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],i=e.indexes[a][o[a]],u=(n=e.values[i])!==null&&n!==void 0?n:0;s[r]=u,o[a]++}return s}const wj=(e,t)=>{const n=b7.createTransformer(t),s=$f(e),o=$f(t);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?W0.has(e)&&!o.values.length||W0.has(t)&&!s.values.length?bj(e,t):Y5(I7(Ej(s,o),o.values),n):Zf(e,t)};function _7(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Qp(e,t,n):Q5(e)(e,t)}const Ij=5;function T7(e,t,n){const s=Math.max(t-Ij,0);return W5(n-e(s),t-s)}const en={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Db=.001;function _j({duration:e=en.duration,bounce:t=en.bounce,velocity:n=en.velocity,mass:s=en.mass}){let o,r,a=1-t;a=ia(en.minDamping,en.maxDamping,a),e=ia(en.minDuration,en.maxDuration,jc(e)),a<1?(o=d=>{const m=d*a,f=m*e,p=m-n,g=$0(d,a),C=Math.exp(-f);return Db-p/g*C},r=d=>{const f=d*a*e,p=f*n+n,g=Math.pow(a,2)*Math.pow(d,2)*e,C=Math.exp(-f),v=$0(Math.pow(d,2),a);return(-o(d)+Db>0?-1:1)*((p-g)*C)/v}):(o=d=>{const m=Math.exp(-d*e),f=(d-n)*e+1;return-.001+m*f},r=d=>{const m=Math.exp(-d*e),f=(n-d)*(e*e);return m*f});const i=5/e,u=Aj(o,r,i);if(e=$5(e),isNaN(u))return{stiffness:en.stiffness,damping:en.damping,duration:e};{const d=Math.pow(u,2)*s;return{stiffness:d,damping:a*2*Math.sqrt(s*d),duration:e}}}const Tj=12;function Aj(e,t,n){let s=n;for(let o=1;o<Tj;o++)s=s-e(s)/t(s);return s}function $0(e,t){return e*Math.sqrt(1-t*t)}const kj=["duration","bounce"],Mj=["stiffness","damping","mass"];function jb(e,t){return t.some(n=>e[n]!==void 0)}function Nj(e){let t={velocity:en.velocity,stiffness:en.stiffness,damping:en.damping,mass:en.mass,isResolvedFromDuration:!1,...e};if(!jb(e,Mj)&&jb(e,kj))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),o=s*s,r=2*ia(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:en.mass,stiffness:o,damping:r}}else{const n=_j(e);t={...t,...n,mass:en.mass},t.isResolvedFromDuration=!0}return t}function A7(e=en.visualDuration,t=en.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:o}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],i={done:!1,value:r},{stiffness:u,damping:d,mass:m,duration:f,velocity:p,isResolvedFromDuration:g}=Nj({...n,velocity:-jc(n.velocity||0)}),C=p||0,v=d/(2*Math.sqrt(u*m)),b=a-r,y=jc(Math.sqrt(u/m)),E=Math.abs(b)<5;s||(s=E?en.restSpeed.granular:en.restSpeed.default),o||(o=E?en.restDelta.granular:en.restDelta.default);let x;if(v<1){const _=$0(y,v);x=T=>{const A=Math.exp(-v*y*T);return a-A*((C+v*y*b)/_*Math.sin(_*T)+b*Math.cos(_*T))}}else if(v===1)x=_=>a-Math.exp(-y*_)*(b+(C+y*b)*_);else{const _=y*Math.sqrt(v*v-1);x=T=>{const A=Math.exp(-v*y*T),k=Math.min(_*T,300);return a-A*((C+v*y*b)*Math.sinh(k)+_*b*Math.cosh(k))/_}}const I={calculatedDuration:g&&f||null,next:_=>{const T=x(_);if(g)i.done=_>=f;else{let A=0;v<1&&(A=_===0?$5(C):T7(x,_,T));const k=Math.abs(A)<=s,R=Math.abs(a-T)<=o;i.done=k&&R}return i.value=i.done?a:T,i},toString:()=>{const _=Math.min(w7(I),G0),T=VD(A=>I.next(_*A).value,_,30);return _+"ms "+T}};return I}function Fb({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:r=500,modifyTarget:a,min:i,max:u,restDelta:d=.5,restSpeed:m}){const f=e[0],p={done:!1,value:f},g=k=>i!==void 0&&k<i||u!==void 0&&k>u,C=k=>i===void 0?u:u===void 0||Math.abs(i-k)<Math.abs(u-k)?i:u;let v=n*t;const b=f+v,y=a===void 0?b:a(b);y!==b&&(v=y-f);const E=k=>-v*Math.exp(-k/s),x=k=>y+E(k),I=k=>{const R=E(k),P=x(k);p.done=Math.abs(R)<=d,p.value=p.done?y:P};let _,T;const A=k=>{g(p.value)&&(_=k,T=A7({keyframes:[p.value,C(p.value)],velocity:T7(x,k,p.value),damping:o,stiffness:r,restDelta:d,restSpeed:m}))};return A(0),{calculatedDuration:null,next:k=>{let R=!1;return!T&&_===void 0&&(R=!0,I(k),A(k)),_!==void 0&&k>=_?T.next(k-_):(!R&&I(k),p)}}}const Rj=Nd(.42,0,1,1),Pj=Nd(0,0,.58,1),k7=Nd(.42,0,.58,1),Lj=e=>Array.isArray(e)&&typeof e[0]!="number",Oj={linear:ya,easeIn:Rj,easeInOut:k7,easeOut:Pj,circIn:Z5,circInOut:ZD,circOut:qD,backIn:q5,backInOut:WD,backOut:f7,anticipate:$D},Ub=e=>{if(BD(e)){V9(e.length===4);const[t,n,s,o]=e;return Nd(t,n,s,o)}else if(typeof e=="string")return Oj[e];return e};function Dj(e,t,n){const s=[],o=n||_7,r=e.length-1;for(let a=0;a<r;a++){let i=o(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||ya:t;i=Y5(u,i)}s.push(i)}return s}function J5(e,t,{clamp:n=!0,ease:s,mixer:o}={}){const r=e.length;if(V9(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=Dj(t,s,o),u=i.length,d=m=>{if(a&&m<e[0])return t[0];let f=0;if(u>1)for(;f<e.length-2&&!(m<e[f+1]);f++);const p=Yp(e[f],e[f+1],m);return i[f](p)};return n?m=>d(ia(e[0],e[r-1],m)):d}function jj(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const o=Yp(0,t,s);e.push(Qp(n,1,o))}}function M7(e){const t=[0];return jj(t,e.length-1),t}function Fj(e,t){return e.map(n=>n*t)}function Uj(e,t){return e.map(()=>t||k7).splice(0,e.length-1)}function Kf({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const o=Lj(s)?s.map(Ub):Ub(s),r={done:!1,value:t[0]},a=Fj(n&&n.length===t.length?n:M7(t),e),i=J5(a,t,{ease:Array.isArray(o)?o:Uj(t,o)});return{calculatedDuration:e,next:u=>(r.value=i(u),r.done=u>=e,r)}}const Bj=e=>{const t=({timestamp:n})=>e(n);return{start:()=>_s.update(t,!0),stop:()=>Zp(t),now:()=>Zu.isProcessing?Zu.timestamp:ui.now()}},Vj={decay:Fb,inertia:Fb,tween:Kf,keyframes:Kf,spring:A7},Hj=e=>e/100;class zj extends hj{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:s,element:o,keyframes:r}=this.options,a=(o==null?void 0:o.KeyframeResolver)||uj,i=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new a(r,i,n,s,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:r,velocity:a=0}=this.options,i=l7(n)?n:Vj[n]||Kf;let u,d;i!==Kf&&typeof t[0]!="number"&&(u=Y5(Hj,_7(t[0],t[1])),t=[0,100]);const m=i({...this.options,keyframes:t});r==="mirror"&&(d=i({...this.options,keyframes:[...t].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=w7(m));const{calculatedDuration:f}=m,p=f+o,g=p*(s+1)-o;return{generator:m,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:f,resolvedDuration:p,totalDuration:g}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:o,generator:r,mirroredGenerator:a,mapPercentToKeyframes:i,keyframes:u,calculatedDuration:d,totalDuration:m,resolvedDuration:f}=s;if(this.startTime===null)return r.next(0);const{delay:p,repeat:g,repeatType:C,repeatDelay:v,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-m/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-p*(this.speed>=0?1:-1),E=this.speed>=0?y<0:y>m;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let x=this.currentTime,I=r;if(g){const k=Math.min(this.currentTime,m)/f;let R=Math.floor(k),P=k%1;!P&&k>=1&&(P=1),P===1&&R--,R=Math.min(R,g+1),!!(R%2)&&(C==="reverse"?(P=1-P,v&&(P-=v/f)):C==="mirror"&&(I=a)),x=ia(0,1,P)*f}const _=E?{done:!1,value:u[0]}:I.next(x);i&&(_.value=i(_.value));let{done:T}=_;!E&&d!==null&&(T=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return A&&o!==void 0&&(_.value=E7(u,this.options,o)),b&&b(_.value),A&&this.finish(),_}get duration(){const{resolved:t}=this;return t?jc(t.calculatedDuration):0}get time(){return jc(this.currentTime)}set time(t){t=$5(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=jc(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=Bj,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}function Gj(e){return new zj(e)}function N7(e,t,n){var s;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;t&&(o=t.current);const r=(s=n==null?void 0:n[e])!==null&&s!==void 0?s:o.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}function R7(e,t){let n;const s=()=>{const{currentTime:o}=t,a=(o===null?0:o.value)/100;n!==a&&e(a),n=a};return _s.update(s,!0),()=>Zp(s)}const Ef=new WeakMap;let jr;function Wj(e,t){if(t){const{inlineSize:n,blockSize:s}=t[0];return{width:n,height:s}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function $j({target:e,contentRect:t,borderBoxSize:n}){var s;(s=Ef.get(e))===null||s===void 0||s.forEach(o=>{o({target:e,contentSize:t,get size(){return Wj(e,n)}})})}function qj(e){e.forEach($j)}function Zj(){typeof ResizeObserver>"u"||(jr=new ResizeObserver(qj))}function Kj(e,t){jr||Zj();const n=N7(e);return n.forEach(s=>{let o=Ef.get(s);o||(o=new Set,Ef.set(s,o)),o.add(t),jr==null||jr.observe(s)}),()=>{n.forEach(s=>{const o=Ef.get(s);o==null||o.delete(t),o!=null&&o.size||jr==null||jr.unobserve(s)})}}const wf=new Set;let Pu;function Yj(){Pu=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};wf.forEach(n=>n(t))},window.addEventListener("resize",Pu)}function Qj(e){return wf.add(e),Pu||Yj(),()=>{wf.delete(e),!wf.size&&Pu&&(Pu=void 0)}}function Jj(e,t){return typeof e=="function"?Qj(e):Kj(e,t)}const Xj=50,Bb=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),eF=()=>({time:0,x:Bb(),y:Bb()}),tF={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Vb(e,t,n,s){const o=n[t],{length:r,position:a}=tF[t],i=o.current,u=n.time;o.current=e[`scroll${a}`],o.scrollLength=e[`scroll${r}`]-e[`client${r}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=Yp(0,o.scrollLength,o.current);const d=s-u;o.velocity=d>Xj?0:W5(o.current-i,d)}function nF(e,t,n){Vb(e,"x",t,n),Vb(e,"y",t,n),t.time=n}function sF(e,t){const n={x:0,y:0};let s=e;for(;s&&s!==t;)if(s instanceof HTMLElement)n.x+=s.offsetLeft,n.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const o=s.getBoundingClientRect();s=s.parentElement;const r=s.getBoundingClientRect();n.x+=o.left-r.left,n.y+=o.top-r.top}else if(s instanceof SVGGraphicsElement){const{x:o,y:r}=s.getBBox();n.x+=o,n.y+=r;let a=null,i=s.parentNode;for(;!a;)i.tagName==="svg"&&(a=i),i=s.parentNode;s=a}else break;return n}const q0={start:0,center:.5,end:1};function Hb(e,t,n=0){let s=0;if(e in q0&&(e=q0[e]),typeof e=="string"){const o=parseFloat(e);e.endsWith("px")?s=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?s=o/100*document.documentElement.clientWidth:e.endsWith("vh")?s=o/100*document.documentElement.clientHeight:e=o}return typeof e=="number"&&(s=t*e),n+s}const oF=[0,0];function rF(e,t,n,s){let o=Array.isArray(e)?e:oF,r=0,a=0;return typeof e=="number"?o=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,q0[e]?e:"0"]),r=Hb(o[0],n,s),a=Hb(o[1],t),r-a}const aF={All:[[0,0],[1,1]]},iF={x:0,y:0};function cF(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function lF(e,t,n){const{offset:s=aF.All}=n,{target:o=e,axis:r="y"}=n,a=r==="y"?"height":"width",i=o!==e?sF(o,e):iF,u=o===e?{width:e.scrollWidth,height:e.scrollHeight}:cF(o),d={width:e.clientWidth,height:e.clientHeight};t[r].offset.length=0;let m=!t[r].interpolate;const f=s.length;for(let p=0;p<f;p++){const g=rF(s[p],d[a],u[a],i[r]);!m&&g!==t[r].interpolatorOffsets[p]&&(m=!0),t[r].offset[p]=g}m&&(t[r].interpolate=J5(t[r].offset,M7(s),{clamp:!1}),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=ia(0,1,t[r].interpolate(t[r].current))}function uF(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)n.x.targetOffset+=s.offsetLeft,n.y.targetOffset+=s.offsetTop,s=s.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function dF(e,t,n,s={}){return{measure:()=>uF(e,s.target,n),update:o=>{nF(e,n,o),(s.offset||s.target)&&lF(e,n,s)},notify:()=>t(n)}}const ru=new WeakMap,zb=new WeakMap,eg=new WeakMap,Gb=e=>e===document.documentElement?window:e;function X5(e,{container:t=document.documentElement,...n}={}){let s=eg.get(t);s||(s=new Set,eg.set(t,s));const o=eF(),r=dF(t,e,o,n);if(s.add(r),!ru.has(t)){const i=()=>{for(const p of s)p.measure()},u=()=>{for(const p of s)p.update(Zu.timestamp)},d=()=>{for(const p of s)p.notify()},m=()=>{_s.read(i,!1,!0),_s.read(u,!1,!0),_s.update(d,!1,!0)};ru.set(t,m);const f=Gb(t);window.addEventListener("resize",m,{passive:!0}),t!==document.documentElement&&zb.set(t,Jj(t,m)),f.addEventListener("scroll",m,{passive:!0})}const a=ru.get(t);return _s.read(a,!1,!0),()=>{var i;Zp(a);const u=eg.get(t);if(!u||(u.delete(r),u.size))return;const d=ru.get(t);ru.delete(t),d&&(Gb(t).removeEventListener("scroll",d),(i=zb.get(t))===null||i===void 0||i(),window.removeEventListener("resize",d))}}function mF({source:e,container:t,axis:n="y"}){e&&(t=e);const s={value:0},o=X5(r=>{s.value=r[n].progress*100},{container:t,axis:n});return{currentTime:s,cancel:o}}const tg=new Map;function P7({source:e,container:t=document.documentElement,axis:n="y"}={}){e&&(t=e),tg.has(t)||tg.set(t,{});const s=tg.get(t);return s[n]||(s[n]=FD()?new ScrollTimeline({source:t,axis:n}):mF({source:t,axis:n})),s[n]}function fF(e){return e.length===2}function L7(e){return e&&(e.target||e.offset)}function pF(e,t){return fF(e)||L7(t)?X5(n=>{e(n[t.axis].progress,n)},t):R7(e,P7(t))}function hF(e,t){if(e.flatten(),L7(t))return e.pause(),X5(n=>{e.time=e.duration*n[t.axis].progress},t);{const n=P7(t);return e.attachTimeline?e.attachTimeline(n,s=>(s.pause(),R7(o=>{s.time=s.duration*o},n))):ya}}function gF(e,{axis:t="y",...n}={}){const s={axis:t,...n};return typeof e=="function"?pF(e,s):hF(e,s)}function Wb(e,t){AO(!!(!t||t.current))}const vF=()=>({scrollX:Ac(0),scrollY:Ac(0),scrollXProgress:Ac(0),scrollYProgress:Ac(0)});function CF({container:e,target:t,layoutEffect:n=!0,...s}={}){const o=ir(vF);return(n?Td:l.useEffect)(()=>(Wb("target",t),Wb("container",e),gF((a,{x:i,y:u})=>{o.scrollX.set(i.current),o.scrollXProgress.set(i.progress),o.scrollY.set(u.current),o.scrollYProgress.set(u.progress)},{...s,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(s.offset)]),o}function O7(e){const t=ir(()=>Ac(e)),{isStatic:n}=l.useContext(vi);if(n){const[,s]=l.useState(e);l.useEffect(()=>t.on("change",s),[])}return t}function D7(e,t){const n=O7(t()),s=()=>n.set(t());return s(),Td(()=>{const o=()=>_s.preRender(s,!1,!0),r=e.map(a=>a.on("change",o));return()=>{r.forEach(a=>a()),Zp(s)}}),n}function j7(e,t={}){const{isStatic:n}=l.useContext(vi),s=l.useRef(null),o=ir(()=>cr(e)?e.get():e),r=ir(()=>typeof o=="string"?o.replace(/[\d.-]/g,""):void 0),a=O7(o),i=l.useRef(o),u=l.useRef(ya),d=()=>{m(),s.current=Gj({keyframes:[qb(a.get()),qb(i.current)],velocity:a.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:u.current})},m=()=>{s.current&&s.current.stop()};return l.useInsertionEffect(()=>a.attach((f,p)=>n?p(f):(i.current=f,u.current=g=>p($b(g,r)),_s.postRender(d),a.get()),m),[JSON.stringify(t)]),Td(()=>{if(cr(e))return e.on("change",f=>a.set($b(f,r)))},[a,r]),a}function $b(e,t){return t?e+t:e}function qb(e){return typeof e=="number"?e:parseFloat(e)}const yF=e=>e&&typeof e=="object"&&e.mix,bF=e=>yF(e)?e.mix:void 0;function xF(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],o=e[1+n],r=e[2+n],a=e[3+n],i=J5(o,r,{mixer:bF(r[0]),...a});return t?i(s):i}function SF(e){Nu.current=[],e();const t=D7(Nu.current,e);return Nu.current=void 0,t}function tl(e,t,n,s){if(typeof e=="function")return SF(e);const o=typeof t=="function"?t:xF(t,n,s);return Array.isArray(e)?Zb(e,o):Zb([e],([r])=>o(r))}function Zb(e,t){const n=ir(()=>[]);return D7(e,()=>{n.length=0;const s=e.length;for(let o=0;o<s;o++)n[o]=e[o].get();return t(n)})}const EF={some:0,all:1};function wF(e,t,{root:n,margin:s,amount:o="some"}={}){const r=N7(e),a=new WeakMap,i=d=>{d.forEach(m=>{const f=a.get(m.target);if(m.isIntersecting!==!!f)if(m.isIntersecting){const p=t(m.target,m);typeof p=="function"?a.set(m.target,p):u.unobserve(m.target)}else typeof f=="function"&&(f(m),a.delete(m.target))})},u=new IntersectionObserver(i,{root:n,rootMargin:s,threshold:typeof o=="number"?o:EF[o]});return r.forEach(d=>u.observe(d)),()=>u.disconnect()}function hl(e,{root:t,margin:n,amount:s,once:o=!1,initial:r=!1}={}){const[a,i]=l.useState(r);return l.useEffect(()=>{if(!e.current||o&&a)return;const u=()=>(i(!0),o?void 0:()=>i(!1)),d={root:t&&t.current||void 0,margin:n,amount:s};return wF(e.current,u,d)},[t,e,n,o,s]),a}const F7=l.createContext(void 0);function IF(){return l.useContext(F7)}function _F(e){const{children:t,randomSeed:n}=e;return c.jsx(F7.Provider,{value:n,children:t})}const TF=()=>V(()=>import("./react-BOHDLaz9.js"),__vite__mapDeps([0,1])).then(e=>e.domMax);function AF(e){const{children:t,queryClient:n,randomSeed:s}=e;return c.jsx(W9,{reducedMotion:"user",children:c.jsx(NO,{features:TF,strict:!0,children:c.jsx(YL,{client:n,children:c.jsx(_F,{randomSeed:s,children:t})})})})}const U7=[{name:"Arabic",i18nCode:"ar",direction:"rtl"},{name:"Basque",i18nCode:"eu",direction:"ltr"},{name:"Bengali",i18nCode:"bn-IN",direction:"ltr"},{name:"Bulgarian",i18nCode:"bg",direction:"ltr"},{name:"Catalan",i18nCode:"ca",direction:"ltr"},{name:"Chinese (Simplified)",i18nCode:"zh-Hans",direction:"ltr"},{name:"Chinese (Traditional)",i18nCode:"zh-Hant",direction:"ltr"},{name:"Croatian",i18nCode:"hr",direction:"ltr"},{name:"Czech",i18nCode:"cs",direction:"ltr"},{name:"Danish",i18nCode:"da",direction:"ltr"},{name:"Dutch",i18nCode:"nl",direction:"ltr"},{name:"English (US)",i18nCode:"en-US",direction:"ltr"},{name:"English (UK)",i18nCode:"en-GB",direction:"ltr"},{name:"Estonian",i18nCode:"et",direction:"ltr"},{name:"Finnish",i18nCode:"fi",direction:"ltr"},{name:"French",i18nCode:"fr",direction:"ltr"},{name:"Galician",i18nCode:"gl",direction:"ltr"},{name:"German",i18nCode:"de",direction:"ltr"},{name:"Gujarati",i18nCode:"gu",direction:"ltr"},{name:"Hebrew",i18nCode:"he",direction:"rtl"},{name:"Hindi",i18nCode:"hi",direction:"ltr"},{name:"Hungarian",i18nCode:"hu",direction:"ltr"},{name:"Icelandic",i18nCode:"is",direction:"ltr"},{name:"Indonesian",i18nCode:"id",direction:"ltr"},{name:"Italian",i18nCode:"it",direction:"ltr"},{name:"Japanese",i18nCode:"ja",direction:"ltr"},{name:"Kannada",i18nCode:"kn",direction:"ltr"},{name:"Korean",i18nCode:"ko",direction:"ltr"},{name:"Latvian",i18nCode:"lv",direction:"ltr"},{name:"Lithuanian",i18nCode:"lt",direction:"ltr"},{name:"Malay",i18nCode:"ms",direction:"ltr"},{name:"Malayalam",i18nCode:"ml",direction:"ltr"},{name:"Marathi",i18nCode:"mr",direction:"ltr"},{name:"Norwegian (Bokml)",i18nCode:"nb-NO",direction:"ltr"},{name:"Polish",i18nCode:"pl",direction:"ltr"},{name:"Portuguese (Brazil)",i18nCode:"pt-BR",direction:"ltr"},{name:"Portuguese (Portugal)",i18nCode:"pt-PT",direction:"ltr"},{name:"Punjabi",i18nCode:"pa",direction:"ltr"},{name:"Romanian",i18nCode:"ro",direction:"ltr"},{name:"Russian",i18nCode:"ru",direction:"ltr"},{name:"Serbian (Latin)",i18nCode:"sr-Latn-RS",direction:"ltr"},{name:"Slovak",i18nCode:"sk",direction:"ltr"},{name:"Slovenian",i18nCode:"sl",direction:"ltr"},{name:"Spanish",i18nCode:"es",direction:"ltr"},{name:"Swedish",i18nCode:"sv",direction:"ltr"},{name:"Tamil",i18nCode:"ta",direction:"ltr"},{name:"Telugu",i18nCode:"te",direction:"ltr"},{name:"Thai",i18nCode:"th",direction:"ltr"},{name:"Turkish",i18nCode:"tr",direction:"ltr"},{name:"Ukrainian",i18nCode:"uk",direction:"ltr"},{name:"Vietnamese",i18nCode:"vi",direction:"ltr"}],B7=U7.map(e=>e.i18nCode);function ev(e){const t="en-US";if(!e)return[t];const n=kF(e),s=MF(e),o=NF(e);return[n,s,o,t].filter(r=>!!r).filter((r,a,i)=>i.indexOf(r)===a)}function kF(e){return B7.find(t=>t.toLowerCase()===e.toLowerCase())}function MF(e){if(["en-AU","en-NZ","en-IE"].includes(e))return"en-GB";if(e.startsWith("zh-")){const t=e.toLocaleLowerCase();return t==="zh-TW".toLocaleLowerCase()||t==="zh-HK".toLocaleLowerCase()?"zh-Hant":"zh-Hans"}}function NF(e){var n;const t=(n=e.split("-")[0])==null?void 0:n.toLowerCase();if(t){const s=B7.find(o=>o.toLowerCase()===t||o.toLowerCase().startsWith(`${t}-`));if(s)return s}}const RF="__i18n__";function PF(){if(!(typeof window>"u"))return window[RF]}const ao={};let LF=0;function N(e,t){const n=`atom${++LF}`,s={toString(){return(ao?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?s.read=e:(s.init=e,s.read=OF,s.write=DF),t&&(s.write=t),s}function OF(e){return e(this)}function DF(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const Kb=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,ng=e=>"init"in e,sg=e=>!!e.write,Yf=new WeakMap,Z0=e=>{var t;return K0(e)&&!((t=Yf.get(e))!=null&&t[1])},jF=(e,t)=>{const n=Yf.get(e);if(n)n[1]=!0,n[0].forEach(s=>s(t));else if((ao?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},FF=e=>{if(Yf.has(e))return;const t=[new Set,!1];Yf.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=s=>{t[0].add(s)}},K0=e=>typeof(e==null?void 0:e.then)=="function",Yb=e=>"v"in e||"e"in e,Qm=e=>{if("e"in e)throw e.e;if((ao?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},V7=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},Qb=(e,t,n,s,o)=>{var r;if((ao?"production":void 0)!=="production"&&s===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(s,o.n),Z0(n.v)&&V7(t,n.v,o),(r=o.m)==null||r.t.add(t),e&&UF(e,s,t)},pc=()=>[new Map,new Map,new Set],og=(e,t,n)=>{e[0].has(t)||e[0].set(t,new Set),e[1].set(t,n)},UF=(e,t,n)=>{const s=e[0].get(t);s&&s.add(n)},BF=(e,t)=>e[0].get(t),Jb=(e,t)=>{e[2].add(t)},ja=e=>{for(;e[1].size||e[2].size;){e[0].clear();const t=new Set(e[1].values());e[1].clear();const n=new Set(e[2]);e[2].clear(),t.forEach(s=>{var o;return(o=s.m)==null?void 0:o.l.forEach(r=>r())}),n.forEach(s=>s())}},H7=e=>{let t;(ao?"production":void 0)!=="production"&&(t=new Set);const n=(v,b,y)=>{const E="v"in b,x=b.v,I=Z0(b.v)?b.v:null;if(K0(y)){FF(y);for(const _ of b.d.keys())V7(v,y,e(_,b));b.v=y,delete b.e}else b.v=y,delete b.e;(!E||!Object.is(x,b.v))&&(++b.n,I&&jF(I,y))},s=(v,b,y,E)=>{var x;if(Yb(y)&&(y.m&&!(E!=null&&E.has(b))||Array.from(y.d).every(([R,P])=>s(v,R,e(R,y),E).n===P)))return y;y.d.clear();let I=!0;const _=R=>{if(Kb(b,R)){const B=e(R,y);if(!Yb(B))if(ng(R))n(R,B,R.init);else throw new Error("no atom init");return Qm(B)}const P=s(v,R,e(R,y),E);if(I)Qb(v,b,y,R,P);else{const B=pc();Qb(B,b,y,R,P),d(B,b,y),ja(B)}return Qm(P)};let T,A;const k={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return(ao?"production":void 0)!=="production"&&!sg(b)&&console.warn("setSelf function cannot be used with read-only atom"),!A&&sg(b)&&(A=(...R)=>{if((ao?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)return u(b,...R)}),A}};try{const R=b.read(_,k);if(n(b,y,R),K0(R)){(x=R.onCancel)==null||x.call(R,()=>T==null?void 0:T.abort());const P=()=>{if(y.m){const B=pc();d(B,b,y),ja(B)}};R.then(P,P)}return y}catch(R){return delete y.v,y.e=R,++y.n,y}finally{I=!1}},o=v=>Qm(s(void 0,v,e(v))),r=(v,b,y)=>{var E,x;const I=new Map;for(const _ of((E=y.m)==null?void 0:E.t)||[])I.set(_,e(_,y));for(const _ of y.p)I.set(_,e(_,y));return(x=BF(v,b))==null||x.forEach(_=>{I.set(_,e(_,y))}),I},a=(v,b,y)=>{const E=[],x=new Set,I=(T,A)=>{if(!x.has(T)){x.add(T);for(const[k,R]of r(v,T,A))T!==k&&I(k,R);E.push([T,A,A.n])}};I(b,y);const _=new Set([b]);for(let T=E.length-1;T>=0;--T){const[A,k,R]=E[T];let P=!1;for(const B of k.d.keys())if(B!==A&&_.has(B)){P=!0;break}P&&(s(v,A,k,x),d(v,A,k),R!==k.n&&(og(v,A,k),_.add(A))),x.delete(A)}},i=(v,b,y,...E)=>{const x=T=>Qm(s(v,T,e(T,y))),I=(T,...A)=>{const k=e(T,y);let R;if(Kb(b,T)){if(!ng(T))throw new Error("atom not writable");const P="v"in k,B=k.v,U=A[0];n(T,k,U),d(v,T,k),(!P||!Object.is(B,k.v))&&(og(v,T,k),a(v,T,k))}else R=i(v,T,k,...A);return ja(v),R};return b.write(x,I,...E)},u=(v,...b)=>{const y=pc(),E=i(y,v,e(v),...b);return ja(y),E},d=(v,b,y)=>{if(y.m&&!Z0(y.v)){for(const E of y.d.keys())y.m.d.has(E)||(m(v,E,e(E,y)).t.add(b),y.m.d.add(E));for(const E of y.m.d||[])if(!y.d.has(E)){y.m.d.delete(E);const x=f(v,E,e(E,y));x==null||x.t.delete(b)}}},m=(v,b,y)=>{if(!y.m){s(v,b,y);for(const E of y.d.keys())m(v,E,e(E,y)).t.add(b);if(y.m={l:new Set,d:new Set(y.d.keys()),t:new Set},(ao?"production":void 0)!=="production"&&t.add(b),sg(b)&&b.onMount){const E=y.m,{onMount:x}=b;Jb(v,()=>{const I=x((..._)=>i(v,b,y,..._));I&&(E.u=I)})}}return y.m},f=(v,b,y)=>{if(y.m&&!y.m.l.size&&!Array.from(y.m.t).some(E=>{var x;return(x=e(E,y).m)==null?void 0:x.d.has(b)})){const E=y.m.u;E&&Jb(v,E),delete y.m,(ao?"production":void 0)!=="production"&&t.delete(b);for(const x of y.d.keys()){const I=f(v,x,e(x,y));I==null||I.t.delete(b)}return}return y.m},C={get:o,set:u,sub:(v,b)=>{const y=pc(),E=e(v),x=m(y,v,E);ja(y);const I=x.l;return I.add(b),()=>{I.delete(b);const _=pc();f(_,v,E),ja(_)}},unstable_derive:v=>H7(...v(e))};return(ao?"production":void 0)!=="production"&&Object.assign(C,{dev4_get_internal_weak_map:()=>({get:b=>{const y=e(b);if(y.n!==0)return y}}),dev4_get_mounted_atoms:()=>t,dev4_restore_atoms:b=>{const y=pc();for(const[E,x]of b)if(ng(E)){const I=e(E),_="v"in I,T=I.v;n(E,I,x),d(y,E,I),(!_||!Object.is(T,I.v))&&(og(y,E,I),a(y,E,I))}ja(y)}}),C},VF=()=>{const e=new WeakMap;return H7(n=>{let s=e.get(n);return s||(s={d:new Map,p:new Set,n:0},e.set(n,s)),s})};let au;const qe=()=>(au||(au=VF(),(ao?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=au),globalThis.__JOTAI_DEFAULT_STORE__!==au&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),au),z7={},HF=l.createContext(void 0),G7=e=>l.useContext(HF)||qe(),W7=e=>typeof(e==null?void 0:e.then)=="function",zF=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},GF=gi.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(zF(e),e)}),rg=new WeakMap,WF=e=>{let t=rg.get(e);return t||(t=new Promise((n,s)=>{let o=e;const r=u=>d=>{o===u&&n(d)},a=u=>d=>{o===u&&s(d)},i=u=>{"onCancel"in u&&typeof u.onCancel=="function"&&u.onCancel(d=>{if((z7?"production":void 0)!=="production"&&d===u)throw new Error("[Bug] p is not updated even after cancelation");W7(d)?(rg.set(d,t),o=d,d.then(r(d),a(d)),i(d)):n(d)})};e.then(r(e),a(e)),i(e)}),rg.set(e,t)),t};function M(e,t){const n=G7(),[[s,o,r],a]=l.useReducer(d=>{const m=n.get(e);return Object.is(d[0],m)&&d[1]===n&&d[2]===e?d:[m,n,e]},void 0,()=>[n.get(e),n,e]);let i=s;if((o!==n||r!==e)&&(a(),i=n.get(e)),l.useEffect(()=>{const d=n.sub(e,()=>{a()});return a(),d},[n,e,void 0]),l.useDebugValue(i),W7(i)){const d=WF(i);return GF(d)}return i}function se(e,t){const n=G7();return l.useCallback((...o)=>{if((z7?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...o)},[n,e])}function Fe(e,t){return[M(e),se(e)]}const Jp={},$F=Symbol((Jp?"production":void 0)!=="production"?"RESET":"");function NSe(e,t){let n=null;const s=new Map,o=new Set,r=i=>{let u;if(t===void 0)u=s.get(i);else for(const[m,f]of s)if(t(m,i)){u=f;break}if(u!==void 0)if(n!=null&&n(u[1],i))r.remove(i);else return u[0];const d=e(i);return s.set(i,[d,Date.now()]),a("CREATE",i,d),d};function a(i,u,d){for(const m of o)m({type:i,param:u,atom:d})}return r.unstable_listen=i=>(o.add(i),()=>{o.delete(i)}),r.getParams=()=>s.keys(),r.remove=i=>{{if(!s.has(i))return;const[u]=s.get(i);s.delete(i),a("REMOVE",i,u)}},r.setShouldRemove=i=>{if(n=i,!!n)for(const[u,[d,m]]of s)n(m,u)&&(s.delete(u),a("REMOVE",u,d))},r}const ag=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),qF=new WeakMap,ZF=(e,t,n,s)=>{const o=ag(()=>new WeakMap,qF,t),r=ag(()=>new WeakMap,o,n);return ag(e,r,s)};function $7(e,t,n=Object.is){return ZF(()=>{const s=Symbol(),o=([a,i])=>{if(i===s)return t(a);const u=t(a,i);return n(i,u)?i:u},r=N(a=>{const i=a(r),u=a(e);return o([u,i])});return r.init=s,r},e,t,n)}const Xb=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),KF=new WeakMap,YF=(e,t,n)=>{const s=Xb(()=>new WeakMap,KF,t);return Xb(e,s,n)},QF={},e4=e=>!!e.write,JF=e=>typeof e=="function";function RSe(e,t){return YF(()=>{const n=new WeakMap,s=(a,i)=>{let u=n.get(a);if(u)return u;const d=i&&n.get(i),m=[],f=[];return a.forEach((p,g)=>{const C=g;f[g]=C;const v=d&&d.atomList[d.keyList.indexOf(C)];if(v){m[g]=v;return}const b=E=>{const x=E(o),I=E(e),T=s(I,x==null?void 0:x.arr).keyList.indexOf(C);if(T<0||T>=I.length){const A=a[s(a).keyList.indexOf(C)];if(A)return A;throw new Error("splitAtom: index out of bounds for read")}return I[T]},y=(E,x,I)=>{const _=E(o),T=E(e),k=s(T,_==null?void 0:_.arr).keyList.indexOf(C);if(k<0||k>=T.length)throw new Error("splitAtom: index out of bounds for write");const R=JF(I)?I(T[k]):I;Object.is(T[k],R)||x(e,[...T.slice(0,k),R,...T.slice(k+1)])};m[g]=e4(e)?N(b,y):N(b)}),d&&d.keyList.length===f.length&&d.keyList.every((p,g)=>p===f[g])?u=d:u={arr:a,atomList:m,keyList:f},n.set(a,u),u},o=N(a=>{const i=a(o),u=a(e);return s(u,i==null?void 0:i.arr)});(Jp?"production":void 0)!=="production"&&(o.debugPrivate=!0),o.init=void 0;const r=e4(e)?N(a=>a(o).atomList,(a,i,u)=>{switch(u.type){case"remove":{const d=a(r).indexOf(u.atom);if(d>=0){const m=a(e);i(e,[...m.slice(0,d),...m.slice(d+1)])}break}case"insert":{const d=u.before?a(r).indexOf(u.before):a(r).length;if(d>=0){const m=a(e);i(e,[...m.slice(0,d),u.value,...m.slice(d)])}break}case"move":{const d=a(r).indexOf(u.atom),m=u.before?a(r).indexOf(u.before):a(r).length;if(d>=0&&m>=0){const f=a(e);d<m?i(e,[...f.slice(0,d),...f.slice(d+1,m),f[d],...f.slice(m)]):i(e,[...f.slice(0,m),f[d],...f.slice(m,d),...f.slice(d+1)])}break}}}):N(a=>a(o).atomList);return r},e,QF)}const XF=e=>typeof(e==null?void 0:e.then)=="function";function eU(e=()=>{try{return window.localStorage}catch(n){(Jp?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let s,o;const r={getItem:(u,d)=>{var m,f;const p=C=>{if(C=C||"",s!==C){try{o=JSON.parse(C,t==null?void 0:t.reviver)}catch{return d}s=C}return o},g=(f=(m=e())==null?void 0:m.getItem(u))!=null?f:null;return XF(g)?g.then(p):p(g)},setItem:(u,d)=>{var m;return(m=e())==null?void 0:m.setItem(u,JSON.stringify(d,void 0))},removeItem:u=>{var d;return(d=e())==null?void 0:d.removeItem(u)}},a=u=>(d,m,f)=>u(d,p=>{let g;try{g=JSON.parse(p||"")}catch{g=f}m(g)});let i;try{i=(n=e())==null?void 0:n.subscribe}catch{}return!i&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(i=(u,d)=>{if(!(e()instanceof window.Storage))return()=>{};const m=f=>{f.storageArea===e()&&f.key===u&&d(f.newValue)};return window.addEventListener("storage",m),()=>{window.removeEventListener("storage",m)}}),i&&(r.subscribe=a(i)),r}const tU=eU();function tv(e,t,n=tU,s){const o=s==null?void 0:s.getOnInit,r=N(o?n.getItem(e,t):t);return(Jp?"production":void 0)!=="production"&&(r.debugPrivate=!0),r.onMount=i=>{i(n.getItem(e,t));let u;return n.subscribe&&(u=n.subscribe(e,i,t)),u},N(i=>i(r),(i,u,d)=>{const m=typeof d=="function"?d(i(r)):d;return m===$F?(u(r,t),n.removeItem(e)):m instanceof Promise?m.then(f=>(u(r,f),n.setItem(e,f))):(u(r,m),n.setItem(e,m))})}const nU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-banner-Dtr5ysxQ.webp",sU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-copied-popup-BRVm_KWU.webp",oU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-engaging-popup-YSBImXns.webp",rU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-secondday-popup--nxha975.webp",aU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-setting-TTFEOcbN.webp",iU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-think-deeper-popup-FHodYGgC.webp",cU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-thumbsup-card-DH3zTT3T.webp",lU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-thumbsup-popup-D7hBD_1Q.webp",uU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-discover-strip-DnlsnV3g.webp",dU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-setting-banner-CqsoJ8gk.webp",mU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-setting-menu-item-C25mGU_p.webp",fU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-banner-CKv2a8_f.webp",pU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-copied-popup-M4nhJM3H.webp",hU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-engaging-popup-B-vXLUhP.webp",gU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-secondday-popup-DBikSjcg.webp",vU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-setting-D2OBsvlS.webp",CU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-think-deeper-popup-D5tA7N2r.webp",yU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-thumbsup-card-CwLVOvcv.webp",bU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-thumbsup-popup-DM6aMFdv.webp",xU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-discover-strip-flsYDh7H.webp",SU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-setting-banner-C2lNCEe_.webp",EU="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-setting-menu-item-BzBe-XWV.webp",t4="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-shopping-Dm2se5Rq.png",wU={appLayout:{showSettings:!0,showCookieBanner:!0,showSettingsRelyOnChatDetailLayout:!0,showMobileCrossSelling:!0},surfaceQueryParam:null,showScrollbarOnHover:!1,dailyBriefingOcid:"cp_msn_cmc",persistThemeChoice:!0,entraRedirectModalBehaviour:"replace",redirectBackEnabled:!0,crossPromotion:{discoverStrip:{dark:uU,light:xU,fontSize:"m"},settingMenuItem:{dark:mU,light:EU},settingBanner:{dark:dU,light:SU},aggressive:{banner:{dark:nU,light:fU},setting:{dark:aU,light:vU},card:{thumbsUp:{dark:cU,light:yU}},popup:{secondDay:{dark:rU,light:gU},thumbsUp:{dark:lU,light:bU},copied:{dark:sU,light:pU},engaging:{dark:oU,light:hU},thinkDeeper:{dark:iU,light:CU}}}},connectorPlatform:{isGoogleDriveEnabled:!0,isGoogleCalendarEnabled:!0,isOutlookEnabled:!0,isOneDriveEnabled:!0,isGmailEnabled:!0,isGoogleContactsEnabled:!0,isEdgeBrowserEnabled:!0},proSubscription:{enabled:!0,manageRefId:"cmc",urlParams:{client:"cmc",ocids:{ActionsLimit:{freeTrial:"cmmmcpyae96",buy:"cmm46gj0qnu"},VoiceLimit:{freeTrial:"cmm0ghcr8ka",buy:"cmmxki6wg02"},Settings:{freeTrial:"cmma4vbm2dq",buy:"cmmugsiwg58"},MarketSelect:{freeTrial:"cmmxe0nad8b",buy:"cmmtbwi4652",market:"none"},PodcastLimit:{buy:"cmmtzkwxk60"},DeepResearchLimit:{buy:"cmmoe57pdco"}}},m365UrlParams:{ocids:{Management:{buy:"cmmw7mw3yqb"},"Management-FromWinNative":{buy:"cmmuqx95kk5"},Settings:{buy:"cmma1qqdrup"},"Settings-FromWinNative":{buy:"cmmgeuw7z2g"},Unknown:{buy:"cmmipliy5qj"},VisionLimit:{buy:"cmm1z6j7vhd"},"VisionLimit-FromWinNative":{buy:"cmmipxlurfj"},"VisionLimit-FromEdge":{buy:"cmmkxmbp63s"},"VisionLimit-FromEdgeCopilotMode":{buy:"cmmtardi03n"},PodcastLimit:{buy:"cmml80k74li"},"PodcastLimit-FromWinNative":{buy:"cmmeqe0ui7z"},"PodcastLimit-FromEdgeCopilotMode":{buy:"cmmxl5ui5bi"},ActionsLimit:{buy:"cmm77pn9501"},"ActionsLimit-FromWinNative":{buy:"cmm5tgy4bxa"},"ActionsLimit-FromEdgeCopilotMode":{buy:"cmmq2as5182"},DeepResearchLimit:{buy:"cmmnfbwmed3"},"DeepResearchLimit-FromWinNative":{buy:"cmmoehrafkb"},"DeepResearchLimit-FromEdgeCopilotMode":{buy:"cmm8w5fhoop"},UpsellProToPremium:{buy:"cmm7zptzbn8"},"UpsellProToPremium-FromWinNative":{buy:"cmmtftzk1ke"}}},upsellFromAuth0:{navigateToProSubPageAfterLogin:!0}},referralEnabled:!0,adsEnabled:!0,adsIdSyncEnabled:!0,adsShowroomEnabled:!0,thinkDeeperFreemiumEnabled:!0,monitorAccountChangesAcrossTabs:!0,shopping:{upsell:{banner:{light:t4,dark:t4}},showPdpSidepane:!0},sidebarNavigation:!0,showChatDetail:!0,enableAuth0:!0,settingsOverrides:{shouldShowActivityHistory:!0,shouldShowMemoryDelete:!0,shouldShowEdgePasswordsAccessSetting:!0},enableCustom1DS:!0,actions:{enableActions:()=>Promise.resolve(!0)},landingPage:{enableCentralComposer:!0,enableStarterPrompts:!0,enableAutoSuggest:!0,enableWidgets:!0,enablePromptedGreetings:!0,shouldFetchWidgetsData:!0,regexForAutoSuggest:/\S+/},supportsYouTubeVideos:!0,useMSALPwBApp:!0,isBotDetectionEnabled:!0,enableLabs:!0,supportsChatDetails:!0,pages:{enableEditorImageUpload:!0},webWorkerEnabled:!0,restrictPromptPassthroughDomains:!0,enableSearchMode:!0},ei=class ei{constructor(){O(this,"cfg",wU)}static instance(){return ei.singleton||(ei.singleton=new ei),ei.singleton}config(){return this.cfg}setConfig(t){this.cfg=t}};O(ei,"singleton",null);let ae=ei;function IU(e,t){return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}function nv(e){const t=typeof window<"u"?window.matchMedia(e):null,[n,s]=l.useState(t==null?void 0:t.matches);return l.useEffect(()=>{t&&IU(t,o=>s(o.matches))},[e,t]),!!n}function q7(e){const{children:t,serverFallback:n=null}=e;return Xp()?t:n}function Xp(){return l.useSyncExternalStore(_U,()=>!0,()=>!1)}function _U(){return()=>{}}const Z7={sm:"640",md:"768",lg:"1024",xl:"1280","2xl":"1536","3xl":"1920"};function bt(e){const{breakpoint:t}=e,n=Z7[t],s=!nv(`(min-width: ${n}px)`);return Xp()?s:!1}function e1(e){const{breakpoint:t}=e,s=`(min-width: ${Z7[t]}px)`,o=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia(s):null;return!(o!=null&&o.matches)}function Dt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Y0(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function sv(e,t){const n=Dt(e);return isNaN(t)?Y0(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const K7=typeof document<"u",TU=typeof navigator<"u";function AU(e,t){if(K7)return document.cookie.split(";").filter(n=>n.trim().startsWith(`${e}=`)).at(t)}function ca(e,t=0){const n=AU(e,t),s=n==null?void 0:n.split("=")[1];if(s)return decodeURIComponent(s)}function nl(e,t,n={}){const{expireDays:s,path:o="/",domain:r,secure:a=!0,host:i}=n;if(!K7)return;let u=e;a&&!r&&o==="/"&&i&&(u=`__Host-${e}`);let d=`${u}=${encodeURIComponent(t)}; path=${o}`;if(s){const m=sv(new Date,s);d+=`; expires=${m.toUTCString()}`}r&&(d+=`; domain=${r}`),a&&(d+="; secure"),document.cookie=d}function Y7(e,t={}){nl(e,"",{...t,expireDays:-1})}const wc={name:"CMCCP",expirationDays:365},t1={name:"BCP"},kU="3PAdsOptOut";function ov(){return ca(wc.name)??ca(t1.name)}function n4(e,t){const{analytics:n,advertising:s,socialMedia:o}=e,r=new URLSearchParams;r.set("AD",s?"1":"0"),r.set("AL",n?"1":"0"),r.set("SM",o?"1":"0");const a=sv(new Date,t);return r.set("expires",a.getTime().toString()),r.toString()}function MU(e){nl(wc.name,n4(e,wc.expirationDays),{expireDays:wc.expirationDays}),nl(t1.name,n4(e,wc.expirationDays),{expireDays:wc.expirationDays})}function Ni(){const e=ca(t1.name);if(!e)return{advertising:!1,analytics:!1,socialMedia:!1};const t=new URLSearchParams(e),n=t.get("AD")==="1",s=t.get("AL")==="1",o=t.get("SM")==="1";return{advertising:n,analytics:s,socialMedia:o}}function Q7(){const e=ca(kU)!=="1";return TU?navigator.globalPrivacyControl?!1:e:!1}const s4="mobileCrossSellingLastClosed",ig="mobilePromoCountClose",Q0="hasBeenAuthenticated",$r="colorTheme",n1="newConversationsStarted",sl="timeOfNewConversationThreshold",J0="hasResetConversationDisclaimer",X0="banAppealSubmitted",NU="hideDeleteConversationModal",RU="hasBeenPromptedForLocation",PU="hasSeenCharacter",o4="voiceAppearanceId",r4="voiceLiveCaptionEnabled",LU="disableAppearanceOnHomeScreen",J7="hasSeenAppearance",OU="hasSeenAppearanceEducationPopup",X7="hasSeenAppearanceOnVoiceCall",DU="hasSeenFirstRunExperienceAnimation",jU="hasUsedAppearanceColorShuffler",FU="hasUsedAppearanceVoiceCustomization",a4="actionOnAppearanceDiscoveryCta",UU="hasDismissedAppearanceModal",e2="crossPromoFirstVisit",rv="crossPromoDiscoverStripLastClosed",Qf="crossPromoDiscoverStripCountClose",PSe="crossPromoStripGetAppIsClicked",i4="reviewActiveDays",t2="reviewPromptResponse",Jf="userSidebarOpen",LSe="referralEligibilityStatus",OSe="referralHasSeenEntryNewBadge",BU="coachmark",n2="isMsalSilentSsoEnabled",s2="isStartRetryEnabled",eS="user.UserFirstName",o2="loginStartTime",r2="reauthLoginFlag",DSe="subscription.m365SubscriberFRE",c4="userConversationVoiceSpeed",a2="tokenRetryMax2",i2="tokenRetryMax2Auth0",VU="copilotBeta",HU="copilotBetaAnnouncementRequired",c2="isMsalV4Upgrade",nr="copilotMsalLoginHint",l4="msalSilentSsoLastRunAt",Xf="msalLoginSdkVersion",zU="copilotVisionLastClicked",GU="hasEnteredGalleryDetailFromHome",jSe="portraitsConfig",l2="isReauthRedirectEnabled",s1="persistConversationMode",u4="hasOctoberMomentNotificationDismissedLsKey";function Mn(e,t){typeof window<"u"&&localStorage.setItem(e,t)}function tn(e){return typeof window<"u"?localStorage.getItem(e):null}function Ht(e){typeof window<"u"&&localStorage.removeItem(e)}function wt(e,t){const n=tn(e);if(!n)return null;try{const s=JSON.parse(n);return t.parse(s)}catch{return null}}function Gn(e,t,n){try{t.parse(n),Mn(e,JSON.stringify(n))}catch{}}const av=Ne([w("open"),w("close")]),tS=S({sidebarVisibility:av.optional()});function WU(e){Gn(Jf,tS,{sidebarVisibility:e}),nl(Jf,e,{expireDays:365*10})}function $U(e){const t=av.safeParse(e);return t.success?t.data:"close"}function nS(){var n;const e=av.safeParse(ca(Jf));if(e.success)return e.data;const t=(n=wt(Jf,tS))==null?void 0:n.sidebarVisibility;return $U(t)}function qU(){return ae.instance().config().sidebarNavigation?nS()!=="close":!1}const Fc=N({left:qU(),right:!1}),Vo=N(e=>e(Fc).left,(e,t,n)=>{const s=e(Fc);t(Fc,{left:n,right:n&&e1({breakpoint:"xl"})?!1:s.right})}),Rd=N(e=>e(Fc).right,(e,t,n)=>{const s=e(Fc);t(Fc,{left:n&&e1({breakpoint:"xl"})?!1:s.left,right:n})}),sS=l.createContext(null),cg={didCatch:!1,error:null};class oS extends l.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=cg}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,s,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];(n=(s=this.props).onReset)===null||n===void 0||n.call(s,{args:r,reason:"imperative-api"}),this.setState(cg)}}componentDidCatch(t,n){var s,o;(s=(o=this.props).onError)===null||s===void 0||s.call(o,t,n)}componentDidUpdate(t,n){const{didCatch:s}=this.state,{resetKeys:o}=this.props;if(s&&n.error!==null&&ZU(t.resetKeys,o)){var r,a;(r=(a=this.props).onReset)===null||r===void 0||r.call(a,{next:o,prev:t.resetKeys,reason:"keys"}),this.setState(cg)}}render(){const{children:t,fallbackRender:n,FallbackComponent:s,fallback:o}=this.props,{didCatch:r,error:a}=this.state;let i=t;if(r){const u={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")i=n(u);else if(s)i=l.createElement(s,u);else if(o!==void 0)i=o;else throw a}return l.createElement(sS.Provider,{value:{didCatch:r,error:a,resetErrorBoundary:this.resetErrorBoundary}},i)}}function ZU(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,s)=>!Object.is(n,t[s]))}function KU(e){if(e==null||typeof e.didCatch!="boolean"||typeof e.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function rS(){const e=l.useContext(sS);KU(e);const[t,n]=l.useState({error:null,hasError:!1}),s=l.useMemo(()=>({resetBoundary:()=>{e.resetErrorBoundary(),n({error:null,hasError:!1})},showBoundary:o=>n({error:o,hasError:!0})}),[e.resetErrorBoundary]);if(t.hasError)throw t.error;return s}const iv=N(!1),sn=N(null),Ri=N(e=>{const t=e(sn);return t?t.accountType==="AAD":!1}),Pd=N(e=>{const t=e(sn);return t?t.accountType==="MSA":!1}),aS=N(e=>e(sn)!==null),qr=N(null),YU=N(!0);var iS=Symbol.for("immer-nothing"),d4=Symbol.for("immer-draftable"),Ct=Symbol.for("immer-state");function zs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ol=Object.getPrototypeOf;function rl(e){return!!e&&!!e[Ct]}function lr(e){var t;return e?cS(e)||Array.isArray(e)||!!e[d4]||!!((t=e.constructor)!=null&&t[d4])||r1(e)||a1(e):!1}var QU=Object.prototype.constructor.toString();function cS(e){if(!e||typeof e!="object")return!1;const t=ol(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===QU}function Qu(e,t){o1(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,s)=>t(s,n,e))}function o1(e){const t=e[Ct];return t?t.type_:Array.isArray(e)?1:r1(e)?2:a1(e)?3:0}function u2(e,t){return o1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function lS(e,t,n){const s=o1(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function JU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function r1(e){return e instanceof Map}function a1(e){return e instanceof Set}function An(e){return e.copy_||e.base_}function d2(e,t){if(r1(e))return new Map(e);if(a1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=cS(e);if(t===!0||t==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[Ct];let o=Reflect.ownKeys(s);for(let r=0;r<o.length;r++){const a=o[r],i=s[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(s[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(ol(e),s)}else{const s=ol(e);if(s!==null&&n)return{...e};const o=Object.create(s);return Object.assign(o,e)}}function cv(e,t=!1){return i1(e)||rl(e)||!lr(e)||(o1(e)>1&&(e.set=e.add=e.clear=e.delete=XU),Object.freeze(e),t&&Object.entries(e).forEach(([n,s])=>cv(s,!0))),e}function XU(){zs(2)}function i1(e){return Object.isFrozen(e)}var m2={};function Ci(e){const t=m2[e];return t||zs(0,e),t}function eB(e,t){m2[e]||(m2[e]=t)}var Ju;function ep(){return Ju}function tB(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function m4(e,t){t&&(Ci("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function f2(e){p2(e),e.drafts_.forEach(nB),e.drafts_=null}function p2(e){e===Ju&&(Ju=e.parent_)}function f4(e){return Ju=tB(Ju,e)}function nB(e){const t=e[Ct];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function p4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ct].modified_&&(f2(t),zs(4)),lr(e)&&(e=tp(t,e),t.parent_||np(t,e)),t.patches_&&Ci("Patches").generateReplacementPatches_(n[Ct].base_,e,t.patches_,t.inversePatches_)):e=tp(t,n,[]),f2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==iS?e:void 0}function tp(e,t,n){if(i1(t))return t;const s=t[Ct];if(!s)return Qu(t,(o,r)=>h4(e,s,t,o,r,n)),t;if(s.scope_!==e)return t;if(!s.modified_)return np(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let r=o,a=!1;s.type_===3&&(r=new Set(o),o.clear(),a=!0),Qu(r,(i,u)=>h4(e,s,o,i,u,n,a)),np(e,o,!1),n&&e.patches_&&Ci("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function h4(e,t,n,s,o,r,a){if(rl(o)){const i=r&&t&&t.type_!==3&&!u2(t.assigned_,s)?r.concat(s):void 0,u=tp(e,o,i);if(lS(n,s,u),rl(u))e.canAutoFreeze_=!1;else return}else a&&n.add(o);if(lr(o)&&!i1(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;tp(e,o),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&np(e,o)}}function np(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&cv(t,n)}function sB(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:ep(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=s,r=lv;n&&(o=[s],r=Xu);const{revoke:a,proxy:i}=Proxy.revocable(o,r);return s.draft_=i,s.revoke_=a,i}var lv={get(e,t){if(t===Ct)return e;const n=An(e);if(!u2(n,t))return oB(e,n,t);const s=n[t];return e.finalized_||!lr(s)?s:s===lg(e.base_,t)?(ug(e),e.copy_[t]=ed(s,e)):s},has(e,t){return t in An(e)},ownKeys(e){return Reflect.ownKeys(An(e))},set(e,t,n){const s=uS(An(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const o=lg(An(e),t),r=o==null?void 0:o[Ct];if(r&&r.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(JU(n,o)&&(n!==void 0||u2(e.base_,t)))return!0;ug(e),er(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return lg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ug(e),er(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=An(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty(){zs(11)},getPrototypeOf(e){return ol(e.base_)},setPrototypeOf(){zs(12)}},Xu={};Qu(lv,(e,t)=>{Xu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Xu.deleteProperty=function(e,t){return Xu.set.call(this,e,t,void 0)};Xu.set=function(e,t,n){return lv.set.call(this,e[0],t,n,e[0])};function lg(e,t){const n=e[Ct];return(n?An(n):e)[t]}function oB(e,t,n){var o;const s=uS(t,n);return s?"value"in s?s.value:(o=s.get)==null?void 0:o.call(e.draft_):void 0}function uS(e,t){if(!(t in e))return;let n=ol(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=ol(n)}}function er(e){e.modified_||(e.modified_=!0,e.parent_&&er(e.parent_))}function ug(e){e.copy_||(e.copy_=d2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var rB=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,s)=>{if(typeof t=="function"&&typeof n!="function"){const r=n;n=t;const a=this;return function(u=r,...d){return a.produce(u,m=>n.call(this,m,...d))}}typeof n!="function"&&zs(6),s!==void 0&&typeof s!="function"&&zs(7);let o;if(lr(t)){const r=f4(this),a=ed(t,void 0);let i=!0;try{o=n(a),i=!1}finally{i?f2(r):p2(r)}return m4(r,s),p4(o,r)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===iS&&(o=void 0),this.autoFreeze_&&cv(o,!0),s){const r=[],a=[];Ci("Patches").generateReplacementPatches_(t,o,r,a),s(r,a)}return o}else zs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...i)=>this.produceWithPatches(a,u=>t(u,...i));let s,o;return[this.produce(t,n,(a,i)=>{s=a,o=i}),s,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){lr(e)||zs(8),rl(e)&&(e=aB(e));const t=f4(this),n=ed(e,void 0);return n[Ct].isManual_=!0,p2(t),n}finishDraft(e,t){const n=e&&e[Ct];(!n||!n.isManual_)&&zs(9);const{scope_:s}=n;return m4(s,t),p4(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const s=Ci("Patches").applyPatches_;return rl(e)?s(e,t):this.produce(e,o=>s(o,t))}};function ed(e,t){const n=r1(e)?Ci("MapSet").proxyMap_(e,t):a1(e)?Ci("MapSet").proxySet_(e,t):sB(e,t);return(t?t.scope_:ep()).drafts_.push(n),n}function aB(e){return rl(e)||zs(10,e),dS(e)}function dS(e){if(!lr(e)||i1(e))return e;const t=e[Ct];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=d2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=d2(e,!0);return Qu(n,(s,o)=>{lS(n,s,dS(o))}),t&&(t.finalized_=!1),n}function iB(){class e extends Map{constructor(u,d){super(),this[Ct]={type_:2,parent_:d,scope_:d?d.scope_:ep(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return An(this[Ct]).size}has(u){return An(this[Ct]).has(u)}set(u,d){const m=this[Ct];return a(m),(!An(m).has(u)||An(m).get(u)!==d)&&(n(m),er(m),m.assigned_.set(u,!0),m.copy_.set(u,d),m.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const d=this[Ct];return a(d),n(d),er(d),d.base_.has(u)?d.assigned_.set(u,!1):d.assigned_.delete(u),d.copy_.delete(u),!0}clear(){const u=this[Ct];a(u),An(u).size&&(n(u),er(u),u.assigned_=new Map,Qu(u.base_,d=>{u.assigned_.set(d,!1)}),u.copy_.clear())}forEach(u,d){const m=this[Ct];An(m).forEach((f,p,g)=>{u.call(d,this.get(p),p,this)})}get(u){const d=this[Ct];a(d);const m=An(d).get(u);if(d.finalized_||!lr(m)||m!==d.base_.get(u))return m;const f=ed(m,d);return n(d),d.copy_.set(u,f),f}keys(){return An(this[Ct]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const d=u.next();return d.done?d:{done:!1,value:this.get(d.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const d=u.next();if(d.done)return d;const m=this.get(d.value);return{done:!1,value:[d.value,m]}}}}[Symbol.iterator](){return this.entries()}}function t(i,u){return new e(i,u)}function n(i){i.copy_||(i.assigned_=new Map,i.copy_=new Map(i.base_))}class s extends Set{constructor(u,d){super(),this[Ct]={type_:3,parent_:d,scope_:d?d.scope_:ep(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return An(this[Ct]).size}has(u){const d=this[Ct];return a(d),d.copy_?!!(d.copy_.has(u)||d.drafts_.has(u)&&d.copy_.has(d.drafts_.get(u))):d.base_.has(u)}add(u){const d=this[Ct];return a(d),this.has(u)||(r(d),er(d),d.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const d=this[Ct];return a(d),r(d),er(d),d.copy_.delete(u)||(d.drafts_.has(u)?d.copy_.delete(d.drafts_.get(u)):!1)}clear(){const u=this[Ct];a(u),An(u).size&&(r(u),er(u),u.copy_.clear())}values(){const u=this[Ct];return a(u),r(u),u.copy_.values()}entries(){const u=this[Ct];return a(u),r(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,d){const m=this.values();let f=m.next();for(;!f.done;)u.call(d,f.value,f.value,this),f=m.next()}}function o(i,u){return new s(i,u)}function r(i){i.copy_||(i.copy_=new Set,i.base_.forEach(u=>{if(lr(u)){const d=ed(u,i);i.drafts_.set(u,d),i.copy_.add(d)}else i.copy_.add(u)}))}function a(i){i.revoked_&&zs(3,JSON.stringify(An(i)))}eB("MapSet",{proxyMap_:t,proxySet_:o})}var ks=new rB,Un=ks.produce;ks.produceWithPatches.bind(ks);ks.setAutoFreeze.bind(ks);ks.setUseStrictShallowCopy.bind(ks);ks.applyPatches.bind(ks);ks.createDraft.bind(ks);ks.finishDraft.bind(ks);function FSe(e){return e}function c1(e){const t=N(e,(n,s,o)=>s(t,Un(n(t),typeof o=="function"?o:()=>o)));return t}function gl(e,t){const n=se(e);return l.useCallback(s=>n(Un(s)),[n])}function mS(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=mS(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function de(){for(var e,t,n=0,s="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=mS(e))&&(s&&(s+=" "),s+=t);return s}const Ld={Namibia:"NA","South Africa":"ZA",Cameroon:"CM",Japan:"JP",Ghana:"GH",Ethiopia:"ET","United States":"US","United Arab Emirates":"AE",Bahrain:"BH",Djibouti:"DJ",Algeria:"DZ",Egypt:"EG","Western Sahara":"EH",Eritrea:"ER",Israel:"IL",Iraq:"IQ",Jordan:"JO",Comoros:"KM",Kuwait:"KW",Lebanon:"LB",Libya:"LY",Morocco:"MA",Mauritania:"MR",Oman:"OM","Palestinian Territories":"PS",Qatar:"QA","Saudi Arabia":"SA",Sudan:"SD",Somalia:"SO","South Sudan":"SS",Syria:"SY",Chad:"TD",Tunisia:"TN",Yemen:"YE",Chile:"CL",India:"IN",Tanzania:"TZ",Spain:"ES",Azerbaijan:"AZ",Russia:"RU",Belarus:"BY",Zambia:"ZM",Bulgaria:"BG",Mali:"ML",Bangladesh:"BD","China mainland":"CN",France:"FR","Bosnia & Herzegovina":"BA",Andorra:"AD",Italy:"IT",Philippines:"PH",Uganda:"UG",Iran:"IR",Czechia:"CZ","United Kingdom":"GB",Denmark:"DK",Greenland:"GL",Kenya:"KE",Austria:"AT",Belgium:"BE",Switzerland:"CH",Germany:"DE",Liechtenstein:"LI",Luxembourg:"LU",Niger:"NE",Maldives:"MV",Senegal:"SN",Bhutan:"BT",Togo:"TG",Cyprus:"CY",Greece:"GR","Antigua & Barbuda":"AG",Anguilla:"AI",Albania:"AL",Argentina:"AR","American Samoa":"AS",Australia:"AU",Barbados:"BB",Burundi:"BI",Bermuda:"BM",Brunei:"BN",Brazil:"BR",Bahamas:"BS",Botswana:"BW",Belize:"BZ",Canada:"CA","Cocos (Keeling) Islands":"CC","Cook Islands":"CK",Colombia:"CO","Cape Verde":"CV","Christmas Island":"CX","Diego Garcia":"DG",Dominica:"DM",Estonia:"EE",Finland:"FI",Fiji:"FJ","Falkland Islands":"FK",Micronesia:"FM",Grenada:"GD",Guernsey:"GG",Gibraltar:"GI",Gambia:"GM",Guam:"GU",Guyana:"GY","Hong Kong":"HK",Hungary:"HU",Indonesia:"ID",Ireland:"IE","Isle of Man":"IM","Chagos Archipelago":"IO",Jersey:"JE",Jamaica:"JM",Kiribati:"KI","St. Kitts & Nevis":"KN","South Korea":"KR","Cayman Islands":"KY","St. Lucia":"LC",Liberia:"LR",Lesotho:"LS",Lithuania:"LT",Latvia:"LV",Madagascar:"MG","Marshall Islands":"MH","Myanmar (Burma)":"MM",Macao:"MO","Northern Mariana Islands":"MP",Montserrat:"MS",Malta:"MT",Mauritius:"MU",Malawi:"MW",Mexico:"MX",Malaysia:"MY","Norfolk Island":"NF",Nigeria:"NG",Netherlands:"NL",Norway:"NO",Nauru:"NR",Niue:"NU","New Zealand":"NZ","Papua New Guinea":"PG",Pakistan:"PK",Poland:"PL","Pitcairn Islands":"PN","Puerto Rico":"PR",Portugal:"PT",Palau:"PW",Rwanda:"RW","Solomon Islands":"SB",Seychelles:"SC",Sweden:"SE",Singapore:"SG","St. Helena":"SH",Slovenia:"SI",Slovakia:"SK","Sierra Leone":"SL","Sint Maarten":"SX",Eswatini:"SZ","Turks & Caicos Islands":"TC",Thailand:"TH",Tokelau:"TK",Tonga:"TO",Trkiye:"TR","Trinidad & Tobago":"TT",Tuvalu:"TV",Taiwan:"TW",Ukraine:"UA","U.S. Outlying Islands":"UM","St. Vincent & Grenadines":"VC","British Virgin Islands":"VG","U.S. Virgin Islands":"VI",Vanuatu:"VU",Samoa:"WS",Zimbabwe:"ZW",Bolivia:"BO","Caribbean Netherlands":"BQ","Costa Rica":"CR",Cuba:"CU",Curaao:"CW","Dominican Republic":"DO","Ceuta & Melilla":"EA",Ecuador:"EC","Equatorial Guinea":"GQ",Guatemala:"GT",Honduras:"HN",Haiti:"HT","Canary Islands":"IC",Nicaragua:"NI",Panama:"PA",Peru:"PE",Paraguay:"PY","El Salvador":"SV",Uruguay:"UY",Venezuela:"VE",Afghanistan:"AF","Burkina Faso":"BF",Guinea:"GN","Guinea-Bissau":"GW","Faroe Islands":"FO",Benin:"BJ","St. Barthlemy":"BL","Congo - Kinshasa":"CD","Central African Republic":"CF","Congo - Brazzaville":"CG","Cte d'Ivoire":"CI",Gabon:"GA","French Guiana":"GF",Guadeloupe:"GP",Monaco:"MC","St. Martin":"MF",Martinique:"MQ","New Caledonia":"NC","French Polynesia":"PF","St. Pierre & Miquelon":"PM",Runion:"RE","Wallis & Futuna":"WF",Mayotte:"YT",Croatia:"HR",Armenia:"AM",Iceland:"IS","San Marino":"SM","Vatican City":"VA",Georgia:"GE",Kazakhstan:"KZ",Cambodia:"KH","North Korea":"KP",Kyrgyzstan:"KG",Angola:"AO",Laos:"LA",Mozambique:"MZ","North Macedonia":"MK",Mongolia:"MN","Svalbard & Jan Mayen":"SJ",Nepal:"NP",Aruba:"AW",Suriname:"SR","So Tom & Prncipe":"ST","Timor-Leste":"TL",Moldova:"MD",Romania:"RO","Sri Lanka":"LK",Kosovo:"XK",Montenegro:"ME",Serbia:"RS","land Islands":"AX",Tajikistan:"TJ",Turkmenistan:"TM",Uzbekistan:"UZ",Vietnam:"VN"},fS=["blowing-dust","blowing-sand","blowing-snow","clear","clear-occasional-rain-or-thunderstorms","clear-then-cloudy","clear-then-occasional-rain","clear-then-occasional-snow","clear-then-rain","clear-then-rain-or-snow","clear-then-rain-or-thunderstorms","clear-then-snow","clear-then-snow-or-rain","clear-then-thunderstorms","clear-with-isolated-snow","clear-with-isolated-thunderstorms","clear-with-occasional-clouds","clear-with-occasional-rain","clear-with-occasional-rain-or-snow","clear-with-occasional-snow","clear-with-occasional-snow-or-rain","cloudy","cloudy-and-occasionally-clear","cloudy-occasional-rain-or-thunderstorms","cloudy-then-clear","cloudy-then-occasional-rain","cloudy-then-occasional-snow","cloudy-then-occasionally-clear","cloudy-then-rain","cloudy-then-rain-or-snow","cloudy-then-rain-or-thunderstorms","cloudy-then-snow","cloudy-then-snow-or-rain","cloudy-with-isolated-rain","cloudy-with-occasional-rain","cloudy-with-occasional-rain-or-snow","cloudy-with-occasional-snow","cloudy-with-occasional-snow-or-rain","cloudy-with-thundersnow-at-times","drifting-sand","drifting-snow","drizzle","duststorm","fair","fog","freezing-drizzle","freezing-fog","freezing-rain","hail","haze","heavy-drizzle","heavy-rain","heavy-snow","heavy-thunderstorms","ice-pellets","light-drizzle","light-fog","light-freezing-drizzle","light-freezing-rain","light-hail","light-rain","light-rain-and-snow","light-rain-and-snow-shower","light-rain-shower","light-snow","light-snow-shower","mostly-clear","mostly-cloudy","mostly-sunny","partly-cloudy","partly-sunny","patchy-fog","rain","rain-and-occasionally-clear","rain-and-occasionally-cloudy","rain-and-snow","rain-and-snow-shower","rain-or-snow","rain-or-snow-then-clear","rain-or-snow-then-cloudy","rain-showers","rain-then-clear","rain-then-cloudy","rain-then-occasional-snow","rain-turning-to-snow","rain-with-occasional-snow","severe-duststorm","sleet","smoke","snow","snow-and-occasionally-clear","snow-and-occasionally-cloudy","snow-or-rain","snow-or-rain-then-clear","snow-or-rain-then-cloudy","snow-showers","snow-then-clear","snow-then-cloudy","snow-then-rain","squalls","sunny","thundersnow","thunderstorms","unknown","windy-rainstorm","windy-with-heavy-snow"],cB=["adult","teen"],lB=["twenty-four-hours","one-day","five-days","one-week","one-month","one-year","five-years","max"],uB=["pro","m365-basic","m365-personal-classic","m365-family-classic-admin","m365-family-classic-guest","m365-personal","m365-family-admin","m365-family-guest","m365-premium-admin","m365-premium-guest"],dB=["direct","apple","google","retail"],mB=["guest","free","m365-personal","pro","m365-premium"],fB=["python"],pB=["ready","disconnected","disabled","sign-in-required","unavailable"],pS=["google-drive","google-calendar","gmail","one-drive","outlook","outlook-calendar","google-contacts","edge-browser","unknown"],hB=["implicit-consent","explicit-consent"],gB=5,hS=10240,USe=100,BSe=2,vB=15e3,CB=372,yB=352,gS=6,lt={mediaViewer:"z-10",composer:"z-10",composerBottomSlot:"z-20",coachmark:"z-30",chatScrollToBottomButton:"z-10",babylonCharacter:"z-10",citations:"z-40",settings:"z-30",audioBase:"z-10",audioDisplayContent:"z-40",modalBackground:"z-30",modal:"z-40",sidebar:"z-40",sidebarSmallScreen:"max-md:z-40",tooltip:"z-40",toastNotification:"z-50",dropdownMenuOverModal:"z-50",pages:{warning:"z-10",chat:"z-20",chatSmallScreenOverlay:"z-50",floatingMenu:"z-50"},shopping:{navigation:"z-10"},stickyHeader:"z-20",headerIcon:"z-30",header:"z-[60]",default:"z-0",labs3d:{errorPage:"z-20"},composerDimmedBackground:"z-40",composerModalOnDimmedBackground:"z-50",citationHoverCard:"z-5"},ns={default:.15,slow:.5,composerButton:.2,settings:.1,audio:{available:.5,unavailable:2,deepLinkLanding:.5},suggestions:.2,dailyBriefing:{background:.5,sourcePopoverScale:.2,sourcePopoverOpacity:.15}},VSe=.25,HSe=2,zSe=0,bB=1.5,vS=2e3,xB=1e3,SB=.25,Be={opacity:0},tt={opacity:1},EB=.2,wB=.025,GSe={initial:Be,animate:{...tt,transition:{delayChildren:EB,staggerChildren:wB}}},uv={willChange:"auto"},IB="9188040d-6c67-4c5b-b112-36a304b66dad",dg="copilot.cloud.microsoft",WSe=de("mt-px text-end uppercase text-foreground-450 text-xs dark:text-foreground-600"),$Se="flex items-center justify-between text-start",_B=["Austria","Belgium","Brazil","Bulgaria","Canada","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Iceland","Ireland","Italy","Latvia","Liechtenstein","Lithuania","Luxembourg","Malta","Netherlands","Norway","China mainland","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden","Switzerland","Trkiye","United Kingdom"],l1=_B.map(e=>Ld[e]),TB=["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden"],AB=TB.map(e=>Ld[e]),kB=["Belarus","China mainland","Lebanon","Macao","Russia","Venezuela","North Korea","Cuba","Syria","Iran"],dv=kB.map(e=>Ld[e]),MB="https://account.live.com/ep",CS="Think Deeper",yS="Smart",bS="Smart (GPT-5)",NB="Search",qSe=1500,sp=24*60*60*1e3,RB=5,mv=451,xS="Not allowed child account",fv="LEGALLY_UNAVAILABLE_STATUS",h2=3,mg=[80,100,110,125,150],Od=100,PB=1e3,LB=!1,g4=!1,OB=!1,ZSe="/chats/private",op=3,u1="userInput";function fs(e){const{key:t,schema:n,initialValue:s}=e;return tv(t,s,{getItem:()=>wt(t,n)??s,setItem:(r,a)=>{a===void 0?Ht(t):Gn(t,n,a)},removeItem:()=>Ht(t)},{getOnInit:!0})}class d1 extends Error{constructor(n,s){super(n);O(this,"endpoint");O(this,"status");this.name="ApiError",this.endpoint=s.route,this.status=s.statusCode}get route(){return this.endpoint}get statusCode(){return this.status}}function Jr(e){const t=e.split("://");return t.length===1?`https://${e}`:t[0]==="http"?`https://${t[1]}`:e}async function DB(e){return new Promise(t=>{let n=!1;e==null||e.catch(s=>{s instanceof Error?(n=!0,t(`Type: ${s.name}, Message: ${s.message}, Stack: ${s.stack}`)):(n=!0,t(`Type: ${typeof s}, Value: ${JSON.stringify(s)}`))}),setTimeout(()=>{n||t("Promise.catch wasn't called. The Promise is not rejected.")},1e3)})}function pe(e){return qe().get(e)}const pv=N(!1);function SS(e){const{children:t}=e;return Dd()?t:null}function Dd(){return M(pv)}function ES(){return pe(pv)}const wS=N([]),v4=new Map,jB=N(!0),FB=["sidebar-narrow","sidebar-settings","sidebar-compact-nav-items","composer-v4","library","creator-gallery-rename-to-imagine"],ba=e=>{if(!ES()&&FB.includes(e))return jB;let t=v4.get(e);return t||(t=N(n=>n(wS).includes(e)),v4.set(e,t),t)};function H(e){return M(ba(e))}function ye(e){return qe().get(ba(e))}function on(e){return M(ba(e))}function Rt(e){return qe().get(ba(e))}class UB{constructor(){O(this,"latestClientExperimentationAssignmentRequestId",null);O(this,"latestApiExperimentationAssignmentRequestId",null)}getTraceIdAnalytics(){return{TraceId_LastClientAssignment:this.latestClientExperimentationAssignmentRequestId,TraceId_Latest:this.latestApiExperimentationAssignmentRequestId}}trackClientExperimentationAssignment(t){const n=this.getTraceIdFromResponseHeaders(t);n&&(this.latestClientExperimentationAssignmentRequestId=n)}trackLatestApiAssignment(t){const n=this.getTraceIdFromResponseHeaders(t);n&&(this.latestApiExperimentationAssignmentRequestId=n)}trackLatestChatConnectedAssignment(t){const{requestId:n}=t;this.latestApiExperimentationAssignmentRequestId=n}getTraceIdFromResponseHeaders(t){return(t.get("x-ceto-ref")??"").split("|")[0]??null}}const td=new UB;function hv(){return"0952648"}function BB(){return`mscmc@${hv().substring(0,7)}`}const ti=class ti{constructor(){O(this,"listeners",new Map)}static getInstance(){return ti.instance||(ti.instance=new ti),ti.instance}on(t,n){var s;this.listeners.has(t)||this.listeners.set(t,[]),(s=this.listeners.get(t))==null||s.push(n)}emit(t,n){const s=this.listeners.get(t);if(s)for(const o of s)o(n)}off(t,n){const s=this.listeners.get(t);s&&this.listeners.set(t,s.filter(o=>o!==n))}};O(ti,"instance",null);let g2=ti;const We=g2.getInstance();function VB(e){let t="unknown";try{const n=/(?:CopilotNative|BingNative|MicrosoftLauncher)\/([0-9]+(?:\.[0-9]+)*(?:-[a-zA-Z0-9]+)?)/,s=e==null?void 0:e.match(n);if(s!=null&&s[1]){const[,o]=s;t=o}return t}catch{return t}}function la(e,t){typeof sessionStorage>"u"||sessionStorage.setItem(e,t)}function ur(e){return typeof sessionStorage>"u"?null:sessionStorage.getItem(e)}function KSe(e){return ur(e)==="true"}function HB(e){typeof sessionStorage>"u"||sessionStorage.removeItem(e)}const ps=S({partId:h()}),vl=S({event:w("invokeAction"),actionId:h()}),zB=ke(fB),GB=S({type:w("code"),language:zB,content:h()}),WB=S({type:w("file"),url:h().refine(e=>e.startsWith("/")||At().safeParse(e).success,{error:"Must be a valid URL or relative path"}),name:h(),contentType:h()}),$B=S({type:w("browser"),screenshot:h().optional(),tabIds:j().array().optional(),activeTabId:j().optional()}),qB=nt("type",[GB,WB,$B]),IS=Ne([w("running"),w("completed"),w("failed")]),ZB=S({title:h(),status:IS}),_S=S({status:IS,title:h(),steps:L(ZB),artifacts:L(qB)}),TS=ps.extend({type:w("activity"),activity:_S}),dn=S({amount:j(),currency:h().nullable(),currencySymbol:h().nullable()}),KB=ke(["current-search-term","recent-searches","age","gender","website-visits","interests","custom-audience","similar-audience","profile-targeting"]);ke(["multimedia","product","tourActivity","propertyPromotion","text","miniShowroom","mainShowroom"]);const YB=ke(["top","bottom","left","right"]),AS=S({adDomain:h(),advertiser:S({name:h(),country:h()}),isVerified:fe(),selectionReasons:L(KB)}),Pi=S({url:h(),urlPingSuffix:h()}),hr=S({url:h(),width:j().nullish(),height:j().nullish(),link:Pi.nullish(),impressionToken:h().nullish()}),kS=S({downPayment:h(),description:h()}),QB=S({rating:j(),link:Pi,impressionToken:h()}),jd=S({businessName:h(),image:hr,impressionToken:h().nullish()}),gv=S({text:h(),url:h(),urlPingSuffix:h()}),JB=S({title:h(),text:h(),url:h(),layout:ke(["inline","overlay"])}),Cl=S({impressionToken:h(),selectionCriteria:AS}),MS=S({rowIndex:rr(),columnIndex:rr(),textPosition:YB,imagesPerRow:rr()}),XB=Cl.extend({type:w("multimedia"),description:h(),title:h(),displayUrl:h(),link:Pi,image:hr.nullish(),logo:jd.nullish(),action:gv.nullish()}),Fd=S({category:h(),value:h()}),NS=S({seller:h(),link:Pi,price:dn,lowPrice:dn.nullish(),item:S({name:h(),image:hr})}),RS=S({isFree:fe(),description:h()}),PS=Cl.extend({type:w("product"),offer:NS,tags:L(Fd).nullish(),shipping:RS.nullish(),productRating:QB.nullish(),installment:kS.nullish(),pricePerUnit:h().nullish(),energyRating:h().nullish()}),LS=Cl.extend({type:w("tourActivity"),title:h(),domain:h(),startingPrice:dn,image:hr,link:Pi,tags:L(Fd).nullish()}),OS=Cl.extend({type:w("propertyPromotion"),title:h(),domain:h(),price:dn,image:hr,link:Pi,tags:L(Fd).nullish()}),eV=Cl.extend({type:w("text"),title:h(),description:h(),displayUrl:h(),link:Pi,image:hr.nullish(),logo:jd.nullish(),disclaimer:JB.nullish()}),tV=Cl.extend({type:w("miniShowroom"),title:h(),description:h(),displayUrl:h(),image:hr,logo:jd.nullish(),brandId:h().nullish(),brandBackground:rr().nullish()}),DS=S({impressionToken:h(),layout:MS,selectionCriteria:AS.nullish()}),nV=DS.extend({type:w("multimedia"),image:hr,title:h(),description:h(),action:gv.nullish()}),sV=DS.extend({type:w("product"),offer:NS,shipping:RS.nullish(),installment:kS.nullish(),pricePerUnit:h().nullish()}),oV=Ne([sV,nV]),rV=S({ad:oV,adId:h().nullish()}),aV=S({isLoading:fe().nullish(),loadErrorCount:rr().nullish()}),jS=aV.extend({type:w("mainShowroom"),id:h(),impressionToken:h(),brandId:h().nullish(),title:h().nullish(),description:h().nullish(),backgroundColor:rr().nullish(),images:L(hr).nullish(),logo:jd.nullish(),slotAds:L(rV).nullish(),action:gv.nullish(),layout:MS.nullish()}),FS=Ne([XB,PS,LS,OS,eV,tV,jS]),iV=Ne([PS,LS,OS]),vv=S({pageLoadPingUrl:h(),visibilityPingUrlBase:h(),clickPingUrlBase:h()}),fg=S({tagsSupported:fe()});S({supportedTypes:L(ke(["multimedia","product","tourActivity","propertyPromotion","text","showroom","miniShowroom","mainShowroom"])),product:fg.nullish(),propertyPromotion:fg.nullish(),tourActivity:fg.nullish(),optOutOfPersonalization:fe().nullish()});const US=ke(["open","expand","chat"]);S({showroom:S({scenario:US.nullish(),brandId:h(),brandName:h().nullish(),adId:h().nullish()})});const cV=S({requestId:h(),ads:L(jS),instrumentation:vv}),lV=cV.extend({key:h()}),uV=S({brandBackground:rr().nullish(),brandLogo:jd.nullish(),conversationId:h(),miniShowroomAd:S({messageId:h(),partId:h(),rguid:h()}),showroomData:L(lV).nullish(),openAt:j(),theme:ke(["light","dark"]).nullish(),viewMode:ke(["cardView","extendedView"]),activeCardRguid:h().nullish(),lastUserMessageRguid:h().nullish()});uV.extend({brandId:h(),adId:h().nullish(),scenario:US.nullish()});S({brandId:h(),brandName:h().nullish(),messageId:h(),conversationId:h(),visible:fe()});const dV=S({selectedTag:Fd.nullish(),collapsed:fe().nullish(),filteredAds:L(iV).nullish(),createdAt:j().nullish()}),mV=dV.extend({type:w("ads"),requestId:h(),summary:h(),ads:L(FS).nullish(),instrumentation:vv,adsSessionId:h().nullish(),adTags:L(Fd).nullish()}),YSe=S({requestId:h(),ads:L(FS).nullish(),instrumentation:vv}),vs={OneDriveAccess:"one-drive-access",BrowserAction:"browser-action",BrowserActions:"browser-actions",ComputerUseActions:"computer-use-actions",OutlookAccess:"outlook-access",OutlookCalendarAccess:"outlook-calendar-access",GoogleDriveAccess:"google-drive-access",GoogleCalendarAccess:"google-calendar-access",GoogleContactsAccess:"google-contacts-access",GmailAccess:"gmail-access",EdgePasswords:"edge-passwords",EdgeBrowserAccess:"edge-browser-access"},fV=ke([vs.OneDriveAccess,vs.BrowserAction,vs.BrowserActions,vs.ComputerUseActions,vs.OutlookAccess,vs.OutlookCalendarAccess,vs.GoogleDriveAccess,vs.GoogleCalendarAccess,vs.GoogleContactsAccess,vs.GmailAccess,vs.EdgePasswords,vs.EdgeBrowserAccess]),C4={active:"active",rejected:"rejected"},BS=ke([C4.active,C4.rejected]),pV=S({type:w("consent"),consentTypes:L(fV),status:BS}),pg={notAllowed:"not-allowed",blocked:"blocked",safetyCheck:"safety-check"},hV=ke([pg.notAllowed,pg.blocked,pg.safetyCheck]),gV=S({type:w("browserAction"),title:h(),description:h().nullish(),url:h().nullish(),reason:hV}),vV=nt("type",[gV]),CV=S({type:w("consentV2"),status:BS,consents:L(vV)}),yV=nt("type",[pV,CV]),QSe={BrowserAction:"browser-action"};S({type:w("command"),command:S({type:w("updateCard"),messageId:h(),partId:h(),update:S({type:w("consent"),status:w("rejected")})})});const bV=S({type:w("computerUseFeedback")}),Li=Ne([w("startTask"),w("pauseTask"),w("resumeTask"),w("cancelTask"),w("takeTaskControl"),w("releaseTaskControl"),w("sendFormData")]),xV=Ne([w("bringAgentTabsToForeground"),w("failedTask"),w("completedTask"),w("moveAgentTabsToBackground"),w("showConsentDialog")]);Ne([Li,xV]);const SV=Ne([w("allSessionInfo"),w("activeSessionInfo"),w("failedTask"),w("completedTask")]);Ne([Li,SV]);const EV=Ne([w("allSessionInfo"),w("activeSessionInfo"),w("failedTask"),w("completedTask")]);Ne([Li,EV]);const VS=Ne([w("askUserInput"),w("safetyRiskDetected"),w("userTakeControl"),w("giveBackControl"),w("resumeFromInput"),w("resumeFromRisk"),w("pauseByClick"),w("resumeByClick"),w("taskCompleted")]),wV=S({reason:VS,title:h().optional(),text:h().optional()}),Oi=S({taskId:h()}),IV=Oi.extend({type:w("startTask")}),_V=Oi.extend({type:w("pauseTask")}),TV=Oi.extend({type:w("resumeTask")}),AV=Oi.extend({type:w("cancelTask")}),kV=Oi.extend({type:w("takeTaskControl")}),MV=Oi.extend({type:w("releaseTaskControl")}),NV=S({identifier:h(),value:h()}),RV=Oi.extend({type:w("sendFormData"),fields:L(NV)}),HS=S({title:h(),instruction:S({text:h(),websites:L(S({url:At(),iconUrl:At().optional()}))})}),JSe=HS.extend({id:h()});HS.extend({isActive:fe()});const PV=ke(["choose","replay"]),LV=ke(["2","1","0.5"]),OV=S({isRunning:fe().nullish(),speed:LV.nullish()}),DV=S({name:h(),url:h().nullish(),description:h().nullish(),phoneNumber:h().nullish(),smsNumber:h().nullish(),chatUrl:h().nullish(),whatsAppUrl:h().nullish()}),jV=S({type:w("safetyHelpline"),countryEmergencyNumber:h().nullable(),helplines:L(DV)}),FV=S({type:w("artifact"),title:h(),artifact:S({type:Ne([w("code")]),language:Ne([w("html")]),content:h()})}),UV=S({type:w("document"),attachmentId:h(),fileName:h(),contentType:h()}),BV=S({username:h(),password:h()}),VV=S({type:w("edge-passwords"),websiteName:h(),usernameSuggestion:h().optional(),savedCredentials:L(BV).optional(),allowManualEntry:fe().optional()}),HV=ke(["email","google","microsoft","apple","phone","x","facebook","amazon"]),zV=S({type:w("federatedLogin"),providers:L(HV),websiteName:h()}),GV=S({type:w("file"),url:At(),name:h(),contentType:h()}),WV=S({name:h(),disclaimerUrl:h(),url:h()}),zS=S({price:j().nullish(),changeInPercentage:j().nullish(),changeInAmount:j().nullish()}),$V=ke(["unavailable","upcoming","live","beat","miss","inline"]),qV=S({releaseAt:h().nullish(),status:$V}),GS=S({id:h(),symbol:h(),displayName:h(),price:j(),previousClosePrice:j(),changeInPercentage:j(),changeInAmount:j(),updatedAt:h(),iconUrl:h(),provider:WV,isFollowed:fe().nullish()}),ZV=S({priceOpen:j().nullish(),priceHigh:j().nullish(),priceLow:j().nullish(),price52wHigh:j().nullish(),price52wLow:j().nullish()}),Ud=GS.extend({intradayPricing:ZV,isMarketLastSale:fe(),exchangeTimeZoneId:h().nullish(),isMarketRegularHours:fe().nullish(),lastUpdatedAt:h(),tradingDayEndAt:h(),accumulatedVolume:j().nullish()}),KV=Ud.extend({securityType:w("stock"),marketCap:j().nullish(),marketCapCurrency:h().nullish(),averageVolume:j().nullish(),peRatio:j().nullish(),postMarket:zS.nullish(),earnings:qV.nullish()}),YV=Ud.extend({securityType:w("etf"),netAssets:j().nullish(),expenseRatio:j().nullish(),yieldPercent:j().nullish(),postMarket:zS.nullish()}),QV=Ud.extend({securityType:w("index")}),JV=GS.extend({securityType:w("fund"),price52wHigh:j().nullish(),price52wLow:j().nullish(),netAssets:j().nullish(),expenseRatio:j().nullish(),yieldPercent:j().nullish(),oneYearReturn:j().nullish()}),WS=S({amount:j().nullish(),currency:h().nullish(),currencySymbol:h().nullish()}),y4=S({value:WS,fullName:h().nullish()}),XV=S({oneMonth:j().nullish(),sixMonths:j().nullish(),oneYear:j().nullish()}),eH=Ud.extend({securityType:w("currencyExchange"),fromCurrency:y4,toCurrency:y4,percentageReturns:XV}),tH=Ud.extend({securityType:w("cryptocurrency"),marketDominancePercentage:j().nullish(),circulatingSupply:j().nullish(),maxSupply:j().nullish(),oneYearReturn:j().nullish(),marketCap:WS,marketCapCurrency:h().nullish()}),nH=ke(lB),sH=S({price:j(),volume:j(),at:h()}),b4=L(sH),oH=S({afterHoursSeries:b4,series:b4,chartType:nH}),rH=nt("securityType",[KV,YV,QV,JV,eH,tH]),$S=S({currency:h(),instrument:rH,chart:oH.nullish()}),aH=$S.extend({type:w("financeChart")}),iH=S({securities:L($S)}),cH=iH.extend({type:w("financeComparisonChart")}),lH=nt("type",[aH,cH]),uH=S({id:h()}),dH=L(uH),XSe=S({entities:dH}),mH=S({type:w("basic"),front:h(),back:h()}),fH=S({type:w("flashcard"),title:h(),flashcards:L(mH)}),pH=S({id:j(),autocompleteAttribute:h(),autofillType:h(),fieldLabel:h(),fieldName:h(),formControlType:h()}),hH=S({fields:L(pH)}),gH=S({forms:L(hH)}),vH=S({type:w("form-fill"),websiteName:h(),headerText:h().optional(),bodyText:h().optional(),formStructure:gH}),CH=S({type:w("generativeUI"),markup:h(),data:ki(h(),O9())}),yH=S({latitude:j(),longitude:j()}),rp=S({name:h(),location:yH}),bH=S({value:j(),count:j().nullish(),maxRating:j().nullish()}),xH=rp.extend({npi:h(),name:h(),primarySpecialtyTitle:h(),rating:bH.nullish(),professionalCredentials:L(h()).nullish(),location:rp.shape.location.extend({uuid:h(),address:h(),name:h().nullish(),phoneNumber:h().nullish()}),url:h().nullish()}),SH=S({type:w("healthcareEntity"),entities:L(xH)}),EH=S({name:h(),type:h().nullish(),year:rr().nullish()}),wH=S({carrierName:h().nullish()}),IH=S({name:h().nullish(),address:h(),latitude:j(),longitude:j(),phoneNumber:h().nullish()}),_H=S({npi:h(),name:h(),professionalCredentials:L(h()).nullish(),location:IH.nullish(),url:h().nullish(),primarySpecialtyTitle:h().nullish(),otherSpecialtyTitles:L(h()).nullish(),educations:L(EH).nullish(),insurances:L(wH).nullish(),performanceOutcomesIndex:j().nullish(),languages:L(h()).nullish(),dataSourceUrl:h()}),TH=S({name:h(),subtitle:h(),logoUrl:h()}),AH=S({title:h(),previewContent:h(),detailedContent:h().nullish()}),kH=S({type:w("healthcareInfo"),content:AH,source:TH}),MH=Ne([SH,kH]),qS=S({image:S({url:h(),thumbnailUrl:h(),altText:h(),width:j(),height:j()}),source:S({title:h(),url:h(),iconUrl:h().nullable()})}),NH=S({type:w("image"),images:L(qS)}),RH=S({type:w("inlineImage"),title:h(),description:h()}).extend(qS.shape),ZS=S({title:h(),description:h(),startTime:j(),endTime:j()}),PH=S({title:h(),description:h(),videos:L(S({title:h(),description:h(),url:h(),embedUrl:h(),thumbnailUrl:h(),iconUrl:h().optional()}))}),LH=S({video:S({url:h(),thumbnailUrl:h(),duration:j(),title:h(),isShort:fe(),playlistIndex:j().optional()}),source:S({url:h(),iconUrl:h().optional()}),bestMomentIndex:j().optional(),moments:L(ZS).optional(),playlists:L(PH).optional()}),OH=S({type:w("video"),videos:L(LH)}),DH=S({type:w("inlineVideo"),title:h(),description:h(),video:S({url:h(),thumbnailUrl:h(),title:h(),isShort:fe()}),source:S({url:h(),iconUrl:h().optional()}),moments:L(ZS).optional()}),jH=S({name:h(),logoUrl:h().nullable(),postUrl:h()}),FH=S({title:h(),companyName:h(),companyLogoUrl:h().nullable(),postedAt:h(),location:h(),providers:L(jH),description:h(),salary:h().nullable(),type:h().nullable(),locationType:h().nullable(),tags:L(h()).nullable()}),UH=S({type:w("job"),jobs:L(FH)}),BH=S({type:w("localEntity"),entities:L(rp.extend({phoneNumber:h().nullish(),url:h().nullish(),reviews:L(S({count:j(),rating:j(),providerName:h(),providerIconUrl:h().nullish(),url:h()})),location:rp.shape.location.extend({address:h().nullish()}),photos:L(S({url:h(),altText:h().nullish(),providerName:h().nullish(),providerUrl:h()})),openState:h().nullish(),category:h().nullish(),price:h().nullish()}))}),VH=S({providerName:h(),url:h().nullish(),thumbnailUrl:h(),providerOptions:L(h()).nullish(),source:S({url:h(),name:h()}).nullish()}),HH=S({sourceName:h(),maxRating:j(),rating:j(),url:h()}),zH=S({url:h(),source:S({url:h(),name:h()}).nullish()}),v2=S({url:h().nullish(),name:h().nullish()}),GH={thumbnail:S({url:h(),source:v2.nullish()}),source:v2.nullish()},WH=S({type:w("mediaSpotlight"),title:h(),label:h().nullish(),description:h(),thumbnail:zH,facts:ki(h(),h()).nullish(),criticRatings:L(HH).nullish(),watchLinks:L(VH).nullish(),featuredVideo:S(GH).nullish(),sources:L(v2).nullish()}),$H=S({entityId:h(),title:h(),subtitle:h(),thumbnailUrl:h()}),qH=S({type:w("mediaCarousel"),items:L($H)}),KS=S({url:At(),title:h(),snippet:h().nullish(),publisher:h().nullish(),iconUrl:Ne([At(),w("")]).nullish()}),ZH=L(KS),KH=S({relatedResults:ZH}),YH=KS.extend({type:w("navigation")}),QH=S({name:h(),thumbnailUrl:h()}),JH=S({provider:QH,title:h(),url:h(),thumbnailUrl:h(),updatedAt:h()}),XH=S({title:h(),articles:L(JH)}),ez=XH.extend({type:w("newsCarousel")}),tz=S({id:h(),type:w("oneDrive"),name:h(),lastModifiedAt:h(),url:h(),webDavUrl:h().optional(),contentType:h(),size:j()}),nz=S({type:w("m365"),items:L(tz)}),sz=S({type:w("linkedin"),firstName:h().nullish(),lastName:h().nullish(),profileUrl:At().nullish(),backgroundPictureUrl:At().nullish(),profilePictureUrl:At().nullish(),headline:h().nullish(),location:h().nullish(),followerCount:j().nullish(),positions:L(S({title:h().nullish(),company:h().nullish(),description:h().nullish()})).nullish(),educations:L(S({degree:h().nullish(),fieldOfStudy:h().nullish(),school:h().nullish()})).nullish(),isLimitedResult:fe().nullish()}),oz=S({type:w("bing"),title:h().nullish(),label:h().nullish(),description:h().nullish(),thumbnail:S({url:At(),source:S({url:At(),name:h()}).nullish()}),facts:L(S({name:h(),value:h()})).nullish(),sources:L(S({url:At(),name:h()})).nullish()}),rz=nt("type",[sz,oz]),az=S({type:w("person"),persons:L(rz)}),iz=ke(["one-drive","google-drive","outlook-calendar","google-calendar","google-contacts","gmail","outlook","edge-browser","windows"]),yl=S({id:h(),source:iz,url:h().nullish()}),cz=yl.extend({type:w("document"),fileName:h(),modifiedAt:h().nullish(),contentType:h().optional()}),lz=yl.extend({type:w("image"),fileName:h(),modifiedAt:h().nullish(),thumbnailUrl:h().optional()}),uz=yl.extend({type:w("event"),subject:h().nullish(),startsAt:h(),endsAt:h(),location:h().nullish()}),dz=yl.extend({type:w("contact"),displayName:h(),thumbnailUrl:h().nullish(),emailAddresses:L(h()).nullish(),phoneNumbers:L(S({type:h().nullish(),value:h().nullish()})).nullish()}),mz=yl.extend({type:w("email"),id:h(),senderEmailAddress:h(),receivedAt:h(),subject:h().nullish()}),fz=yl.extend({type:w("webPage"),url:h(),title:h(),iconUrl:h().optional(),visitedAt:h()}),pz=nt("type",[cz,lz,uz,dz,mz,fz]),hz=S({type:w("personalArtifacts"),artifacts:L(pz)}),gz=S({name:h(),url:h(),width:j().optional(),height:j().optional(),thumbnailUrl:h().optional()}),vz=S({images:L(gz)}),Cz=vz.extend({type:w("phoneImages")}),yz=S({qrCodeUrl:h(),linkDeviceUrl:h()}),bz=yz.extend({type:w("phoneLinking")}),xz=Ne([w("executing"),w("completed"),w("failed")]),Cv=S({deviceName:h().optional(),state:xz.optional(),disabled:fe().optional(),completedAt:h().optional()}),Sz=ke(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]),Ez=Cv.extend({triggerAt:h(),repeatDays:L(Sz).optional().nullable()}),wz=Ez.extend({type:w("phoneAlarm")}),Iz=Cv.extend({seconds:j()}),_z=Iz.extend({type:w("phoneTimer")}),Tz=Cv.extend({actionId:h(),text:h(),phoneNumber:h().nullable().optional(),contactName:h().nullable().optional(),deviceName:h().optional()}),Az=Tz.extend({type:w("phoneSendMessage")}),kz=vl.extend({actionName:w("phone_send_message"),parameters:S({text:h(),phoneNumber:h().nullable().optional(),contactName:h().nullable().optional()})}),Mz=nt("type",[bz,Cz,wz,_z,Az]),Nz=S({id:h(),label:h(),type:w("single-select"),options:L(h()),defaultOptionIndex:j()}),Rz=S({id:h(),label:h(),type:w("multiple-select"),options:L(h())}),Pz=Ne([Nz,Rz]),Lz=S({id:h(),displayName:h(),previewImageUrl:h()}),Oz=S({type:w("powerPointCreator"),actionId:h(),actionType:h(),text:h(),questions:L(Pz),themes:L(Lz)}),Dz=S({type:w("quiz"),title:h(),quiz:L(S({type:w("singleSelect"),question:h(),options:L(h()),answer:j(),topics:L(h()).nullable(),explanation:h()}))}),jz=S({value:j(),count:j().nullish(),maxRating:j().nullish()}),Fz=S({hours:j(),minutes:j()}),YS=S({name:h(),quantity:j().nullish(),unit:h().nullish()}),Uz=S({title:h(),url:At(),source:h(),imageUrl:At().nullish(),rating:jz.nullish(),serving:j().nullish(),calories:j().nullish(),cookingTime:Fz.nullish(),instructions:L(h()).nullish(),ingredients:L(YS).nullish()}),Bz=S({type:w("recipe"),recipes:L(Uz)});S({title:h(),url:At(),ingredients:L(YS),instructions:L(h()).nullish(),imageUrl:At().nullish(),messageId:h().nullish()});const yv=S({position:j(),url:h(),title:h(),iconUrl:h().nullish(),publisher:h().nullish(),snippet:h().nullish()}),QS=S({url:h(),name:h(),imageUrl:h(),images:L(h()).nullish(),price:dn,seller:h().nullish()}),bv=S({value:j(),count:j()}).nullish(),Vz=QS.extend({type:w("shopping"),id:h(),rating:bv}),Hz=S({emailEnabled:fe(),anyRetailer:fe()}),JS=QS.extend({isNotificationEnabled:fe().nullish(),offerId:h(),currentPrice:dn.nullish(),percentageDrop:j(),durationInWeeks:j(),notificationOptions:Hz.nullish()}),xv=S({title:h().nullish(),url:h()}),zz=ke(["textual","visual"]),Gz=S({displayName:h(),value:h(),isActive:fe(),isSelected:fe(),thumbnailImage:xv.nullish()}),XS=S({id:h(),displayName:h(),filterValues:L(Gz),filterType:zz}),eE=S({id:h().nullish(),groupId:h().nullish(),brandGroupId:h().nullish()}),tE=S({displayName:h(),values:L(h())}),nE=S({offerUrl:h(),domain:h()}),sE=S({summary:h(),attributions:L(nE)}),oE=S({pros:L(h()).nullish(),cons:L(h()).nullish(),attributions:L(nE)}),rE=nt("type",[S({type:w("buyWithMerchant"),checkoutUrl:h().nullish(),merchant:h().nullish()}),S({type:w("buyWithCopilot"),merchantProvider:h().nullish(),storeId:h().nullish()})]),Sv=S({product:eE,offerId:h(),url:h(),name:h(),description:h().nullish(),images:L(xv).nullish(),filters:L(XS).nullish(),specifications:L(tE).nullish(),review:sE.nullish(),prosAndCons:oE.nullish(),price:dn,discountPrice:dn.nullish(),seller:h(),sellerLogoUrl:h().nullish(),brandName:h().nullish(),rating:bv.nullish(),checkoutOption:rE.nullish(),curation:h().nullish(),canTrackPrice:fe()}),Wz=S({type:w("shoppingProducts"),products:L(Sv)}),Ev=Ne([w("lowest-price"),w("free-shipping")]),aE=S({offerName:h(),offerId:h(),url:h(),price:dn,discountPrice:dn.nullish(),seller:h(),sellerLogoUrl:h().nullish(),tags:L(Ev).nullish(),canTrackPrice:fe()}),eEe=S({error:h(),message:h()}),iE=S({minPrice:dn,maxPrice:dn,averagePrice:dn,timePeriodInDays:j()}),cE=S({date:Wp(),price:dn}),lE=S({daily:cE.array()}),uE=S({label:h(),prompt:h()}),$z=Ne([w("nudge"),w("flyout")]),dE=S({edgeEntryPoint:$z.optional()}),qz=dE.extend({scenario:w("priceHistory"),priceHistory:S({dailyPrices:cE.array(),type:Ne([w("increase"),w("decrease")]),percentage:j()})}),Zz=dE.extend({scenario:w("cashback"),cashbackData:S({isAdOffer:fe()})}),mE=nt("scenario",[qz,Zz]),wv=S({name:h(),logoUrl:h().nullish()}),Iv=ke(["affiliate","storewideAd","productAd"]),m1=ke(["flat","percentage"]),Kz=S({type:w(m1.enum.percentage),percentage:j()}),Yz=S({type:w(m1.enum.flat),cashback:dn}),Qz=nt("type",[Kz,Yz]),Jz=S({rebate:Qz,name:h()}),Xz=S({type:w(m1.enum.percentage),percentage:j(),maxCashback:dn}),eG=S({type:w(m1.enum.flat),cashback:dn,minPurchaseRequired:dn}),tG=nt("type",[Xz,eG]),fE=S({type:w(Iv.enum.productAd),cashback:dn,expiresAt:h()}),nG=fE.extend({seller:wv}),pE=S({type:w(Iv.enum.storewideAd),rebate:tG,expiresAt:h()}),sG=pE.extend({seller:wv}),hE=S({type:w(Iv.enum.affiliate),categories:L(Jz),exclusions:h()}),oG=hE.extend({seller:wv}),rG=nt("type",[fE,pE,hE]);nt("type",[nG,sG,oG]);const tEe=Sv.extend({otherBuyingOptions:L(aE).nullish(),priceInsight:iE.nullish(),tags:L(Ev).nullish(),priceHistory:lE.nullish(),conversationStarters:L(uE).nullish(),insights:mE.nullish(),supportsPriceInsights:fe()}),aG=S({product:eE.nullish(),offerId:h().nullish(),url:h().nullish(),name:h().nullish(),description:h().nullish(),images:L(xv).nullish(),filters:L(XS).nullish(),specifications:L(tE).nullish(),review:sE.nullish(),prosAndCons:oE.nullish(),price:dn.nullish(),discountPrice:dn.nullish(),seller:h().nullish(),sellerLogoUrl:h().nullish(),brandName:h().nullish(),rating:bv.nullish(),checkoutOption:rE.nullish(),curation:h().nullish(),canTrackPrice:fe().nullish(),otherBuyingOptions:L(aE).nullish(),priceInsight:iE.nullish(),tags:L(Ev).nullish(),priceHistory:lE.nullish(),conversationStarters:L(uE).nullish(),insights:mE.nullish()});S({metadata:aG.nullish(),cashbackOffers:L(rG).nullish(),seller:h().nullish(),sellerLogoUrl:h().nullish()});const nEe=S({products:JS.array()}),iG=S({category:h(),curationGroupId:h(),position:Ne([w("top"),w("middle"),w("bottom")]).nullish()}),If=Sv.extend({curationInfo:iG.nullish()});S({product:If,messageId:h(),allProducts:L(If).nullish(),accessories:L(If).nullish()});const cG=S({type:w("shoppingCurated"),title:h().optional(),products:L(If),groupType:h().nullish()}),lG=nt("type",[Vz,Wz,cG]),sEe=S({emailNotificationEnabled:fe()}),uG=S({name:h(),url:h(),offerId:h()}),dG=S({url:h(),source:h()}),mG=S({reason:h(),references:L(dG)}),fG=ke(["buy-now","buy-later"]),oEe=S({whenToBuy:fG,seller:uG,supportingReasons:L(mG)}),pG=Ne([w("top-highlight"),w("buying-tip"),w("ideal-for"),w("review-snapshot")]),rEe=S({title:h(),content:h(),type:pG,citations:L(yv)}),hG=S({muid:h().default(""),isShoppingEnabled:fe().default(!1),isPersonalizationDataConsentEnabled:fe().default(!1)}),gG=S({isRebatesActive:fe().nullish(),ldClickData:h().nullish(),msClickId:h().nullish(),uClickData:h().nullish()});S({isPDP:fe().nullish(),name:h().nullish(),image:At().nullish(),base64_image:h().nullish(),price_currency:h().nullish(),price_value:QL().nullish(),isShoppingEnabled:fe().nullish(),cashback:gG.nullish(),isPersonalizationDataConsentEnabled:fe().nullish(),muid:h().nullish(),"aggregateRating/ratingValue":Ne([h(),Cb()]).nullish(),"aggregateRating/reviewCount":Ne([h(),Cb()]).nullish(),"offers/price":h().nullish()});S({name:h().optional(),rating:S({value:j(),count:j()}).optional(),images:L(S({url:h()})).optional(),price:S({amount:j(),currency:h().nullable(),currencySymbol:h().nullable()}).optional(),offerPrice:h().optional(),isPDP:fe().optional()});const vG=S({title:h(),prompt:h(),imageUrl:h()}),gE=S({name:h(),cards:L(vG)});S({tabs:L(gE)});S({title:h(),description:h(),videoSourceDarkMode:h(),videoSourceLightMode:h()});const CG=S({imageUrls:L(h()),title:h(),prompt:h()}),vE=S({title:h(),prompt:h()});L(vE);const yG=S({type:w("continueShopping"),items:L(CG)}),bG=S({type:w("forYou"),items:L(vE)}),xG=S({type:w("trackedProducts"),products:L(JS)}),SG=S({type:w("momentInTime"),tabs:L(gE)}),EG=nt("type",[yG,bG,xG,SG]),aEe=S({sections:L(EG).nullable()}),wG=ke(["home","away"]),mo=ke(["win","loss","tie","no-game"]),CE=ke(["pre-game","in-progress","final","postponed","delayed","abandoned","cancelled"]),IG=ke(["test","odi","t20"]),_G=ke(["test","limited-overs","super-over"]),TG=ke([...CE.options,"drinks","dinner","tea","lunch","innings-break","super-over","toss","stumps","strategic-timeout","forfeited"]),AG=ke([...CE.options,"bye","retired","forfeited","unscheduled","suspended"]),kG=ke(["men-singles","men-doubles","women-singles","women-doubles","mixed-doubles"]),MG=ke(["round-of256","round-of128","round-of64","round-of32","round-of16","quarter-final","semi-final","final"]),yE=S({name:h(),city:h().nullish()}),NG=S({name:h(),thumbnailUrl:h().nullish(),seasonPhase:h().nullish(),seasonStartsAt:h().nullish(),seasonEndsAt:h().nullish(),leagueId:h()}),RG=S({type:w("league"),league:NG}),ap=S({name:h(),thumbnailUrl:h().nullish()}),PG=S({type:w("team"),team:ap}),LG=S({type:w("matchup"),matchup:S({teamA:ap,teamB:ap})}),Bd=nt("type",[RG,PG,LG]),OG=S({name:h(),alias:h().nullish(),thumbnailUrl:h().nullish()}),DG=S({playerName:h(),clock:S({minutes:j(),seconds:j()})}),jG=S({ballPossessionPercentage:j().nullish(),goals:L(DG).nullish()}),f1=S({wins:j(),losses:j(),overtimeLosses:j().nullish()}),FG=ke(["quarter","half","halftime","extra","penalties","shoot-out","overtime","inning","period"]),UG=ke(["top","bottom"]),gr=S({type:FG,period:j().nullish(),division:UG.nullish()}),Vd=S({playingPeriod:gr,score:h()}),rs=OG.extend({primaryColorHex:h().nullish(),venueType:wG.nullish(),previousGameOutcomes:L(mo).nullish(),seed:j().nullish(),gameOutcome:mo.nullish(),score:h().nullish(),record:f1.nullish(),winProbability:j().nullish(),playingPeriodScores:L(Vd).nullish()}),_v=rs.extend({winProbability:j().nullish()}),bE=rs.extend({score:h(),gameStats:jG.nullish()}),BG=bE.extend({gameOutcome:mo}),VG=S({wins:j(),participantName:h()}),HG=ke(["final","not-started","in-progress"]),zG=ke(["national-championship","first-four","first-round","second-round","conference-semifinal","conference-final","sweet16","sweet-sixteen","elite-eight","final-four","final"]),GG=S({state:HG,winsInfo:L(VG).nullish(),gameNumber:j().nullish(),conference:h().nullish()}),xE=GG.extend({phase:zG}),Tv=S({name:h(),score:h()}),WG=S({current:j(),total:j(),aggregatedScores:L(Tv).nullish()}),Av=S({startsAt:h(),status:h(),leagueName:h(),legInfo:WG.nullish(),leagueId:h().nullish(),gameId:h().nullish(),startTimeToBeAnnounced:fe().nullish(),seasonPhase:h().nullish()}),Di=S({minutes:j(),seconds:j()}),$G=_v.extend({record:f1.nullish(),gameOutcome:mo.nullish(),score:h().nullish(),playingPeriodScores:L(Vd).nullish(),gameStats:wd().nullish()}),ji=Av.extend({name:h().nullish(),week:j().nullish(),clock:Di.nullish(),bracket:wd().nullish(),currentPlayingPeriod:gr.nullish()}),Fi=Av.extend({name:h().nullish(),bracket:xE.nullish(),week:j().nullish(),clock:Di.nullish(),currentPlayingPeriod:gr.nullish()}),qG=ji.extend({status:w("pre-game"),participants:L(_v)}),kv=S({clock:Di,description:h(),team:ap,participantScores:L(Tv).nullish()}),SE=kv.extend({type:ke(["score-change","yellow-card","red-card"])}),Mv=kv.extend({type:ke(["three-point-made","two-point-made","touchdown","field-goal","extra-point","safety","two-point-conversion","blocked-punt-safety","blocked-field-goal-safety","fumble-safety"])}),Ui=S({url:h(),thumbnailUrl:h(),title:h(),durationInSeconds:j().nullish()}),ZG=Fi.extend({status:w("pre-game"),participants:L($G),timeline:S({events:L(Mv)}).nullish(),videos:L(Ui).nullish()}),KG=ji.extend({status:w("in-progress"),participants:L(bE),clock:Di,currentPlayingPeriod:gr.nullish(),timeline:S({events:L(SE)}).nullish(),videos:L(Ui).nullish()}),YG=ji.extend({status:w("final"),participants:L(BG),videos:L(Ui).nullish(),timeline:S({events:L(SE)}).nullish()}),QG=ji.extend({status:w("postponed"),participants:L(rs)}),JG=ji.extend({status:w("delayed"),participants:L(rs)}),XG=ji.extend({status:w("abandoned"),participants:L(rs)}),eW=ji.extend({status:w("cancelled"),participants:L(rs)}),C2=nt("status",[qG,KG,YG,XG,eW,JG,QG]),EE=rs.extend({playingPeriodScores:L(Vd).nullish(),score:h(),record:f1.nullish(),gameOutcome:mo.nullish(),winProbability:j().nullish(),gameStats:wd().nullish()}),tW=EE.extend({gameOutcome:mo}),nW=Fi.extend({status:w("in-progress"),participants:L(EE),clock:Di,currentPlayingPeriod:gr,timeline:S({events:L(Mv)}).nullish(),videos:L(Ui).nullish()}),sW=Fi.extend({status:w("final"),participants:L(tW),videos:L(Ui).nullish(),clock:Di.nullish(),currentPlayingPeriod:gr.nullish(),timeline:S({events:L(Mv)}).nullish()}),oW=Fi.extend({status:w("postponed"),participants:L(rs)}),rW=Fi.extend({status:w("delayed"),participants:L(rs)}),aW=Fi.extend({status:w("abandoned"),participants:L(rs)}),iW=Fi.extend({status:w("cancelled"),participants:L(rs)}),y2=nt("status",[ZG,nW,sW,aW,iW,rW,oW]),cW=S({type:w("sportsSchedule"),sport:ke(["basketball","ice-hockey","football"]),games:L(y2),header:Bd.nullish(),heroGame:y2.nullish()}),lW=S({type:w("sportsSchedule"),sport:w("soccer"),games:L(C2),header:Bd.nullish(),heroGame:C2.nullish()}),uW=S({type:w("sportsGame"),sport:ke(["basketball","ice-hockey","football"]),game:y2}),dW=S({type:w("sportsGame"),sport:w("soccer"),game:C2}),Bi=Av.extend({name:h().nullish(),week:j().nullish(),videos:L(Ui).nullish(),bracket:xE.nullish(),clock:Di.nullish(),currentPlayingPeriod:gr.nullish()}),wE=S({hits:j(),errors:j(),runs:j()}),Nv=kv.extend({type:ke(["conversion","bat"]),playingPeriod:gr,participantScores:L(Tv)}),IE=_v.extend({record:f1.nullish(),gameOutcome:mo.nullish(),score:h().nullish(),playingPeriodScores:L(Vd).nullish(),gameStats:wE.nullish()}),_E=IE.extend({playingPeriodScores:L(Vd).nullish(),score:h(),gameStats:wE.nullish()}),mW=_E.extend({gameOutcome:mo}),fW=Bi.extend({status:w("pre-game"),participants:L(IE),timeline:S({events:L(Nv)}).nullish()}),pW=Bi.extend({status:w("in-progress"),participants:L(_E),currentPlayingPeriod:gr.nullish(),timeline:S({events:L(Nv)}).nullish()}),hW=Bi.extend({status:w("final"),participants:L(mW),videos:L(Ui).nullish(),timeline:S({events:L(Nv)}).nullish()}),gW=Bi.extend({status:w("postponed"),participants:L(rs)}),vW=Bi.extend({status:w("delayed"),participants:L(rs)}),CW=Bi.extend({status:w("abandoned"),participants:L(rs)}),yW=Bi.extend({status:w("cancelled"),participants:L(rs)}),b2=nt("status",[fW,pW,hW,gW,vW,CW,yW]),bW=S({type:w("sportsSchedule"),sport:w("baseball"),games:L(b2),header:Bd.nullish(),heroGame:b2.nullish()}),xW=S({type:w("sportsGame"),sport:w("baseball"),game:b2}),SW=S({ballsFaced:j(),runsScored:j(),isBatting:fe()}),EW=S({oversBowled:h(),wicketsTaken:j(),runsConceded:j(),isBowling:fe()}),wW=SW.extend({type:w("batting")}),IW=EW.extend({type:w("bowling")}),TE=nt("type",[wW,IW]),_W=S({name:h(),stats:TE}),TW=S({playerName:h(),teamName:h(),gameStats:L(TE).nullish()}),AW=S({current:j(),required:j().nullish()}),kW=S({name:h(),currentMatch:j(),totalMatches:j(),roundName:h().nullish(),equation:h().nullish()}),AE=S({type:_G,runs:j(),wickets:j(),oversPlayed:h(),isFollowedOn:fe(),isDeclared:fe(),duckworthLewisEquation:S({target:j(),revisedOvers:h()}).nullish()}),Rv=S({name:h(),alias:h().nullish(),thumbnailUrl:h().nullish()}),MW=Rv.extend({previousGameOutcomes:L(mo).nullish()}),NW=Rv.extend({inningScores:L(AE).nullish(),playersStats:L(_W).nullish(),yetToBat:fe()}),RW=Rv.extend({gameOutcome:mo,didNotBat:fe(),inningScores:L(AE).nullish()}),PW=S({startsAt:h(),startTimeToBeAnnounced:fe(),tossInfo:h().nullish(),participants:L(MW),type:w("pre")}),LW=S({gameSummary:h(),runRate:AW.nullish(),participants:L(NW),type:w("live")}),OW=S({startsAt:h(),gameSummary:h(),playerOfTheMatch:TW.nullish(),participants:L(RW),type:w("final")}),DW=nt("type",[PW,LW,OW]),x2=S({gameId:h(),leagueId:h(),venue:yE.nullish(),format:IG,status:TG,seriesInfo:kW,phase:DW}),jW=S({type:w("sportsGame"),sport:w("cricket"),game:x2}),FW=S({type:w("sportsSchedule"),sport:w("cricket"),games:L(x2),header:Bd.nullish(),heroGame:x2.nullable()}),UW=S({name:h(),countryFlagThumbnailUrl:h().nullish(),seed:j().nullish()}),BW=S({points:j(),isServing:fe(),tieBreakerPoints:j().nullish(),currentGamePoints:h().nullish(),setWon:fe().nullish()}),kE=S({players:L(UW)}),VW=kE,ME=kE.extend({setPoints:L(BW)}),HW=ME.extend({gameOutcome:mo}),zW=S({type:w("pre"),participants:L(VW)}),GW=S({type:w("live"),participants:L(ME)}),WW=S({type:w("final"),participants:L(HW)}),$W=nt("type",[zW,GW,WW]),x4=S({gameId:h(),leagueId:h(),status:AG,startsAt:h().nullish(),startTimeToBeAnnounced:fe(),venue:yE.nullish(),matchType:kG,round:MG.nullish(),phase:$W}),qW=S({type:w("sportsSchedule"),sport:w("tennis"),games:L(x4),header:Bd.nullish(),heroGame:x4.nullish()}),ZW=Ne([cW,lW,bW,FW,qW]),KW=nt("sport",[dW,uW,xW,jW]),YW=Ne([ZW,KW]),QW=S({type:w("suggestVision")}),JW=ke(["c","f"]),XW=ke(["mm","cm","in"]),e$=ke(["hPa","inHg","mb","mmHg"]),t$=ke(["bft","kph","mph","ms"]),n$=ke(["m","km","mi"]),s$=S({temperature:JW,height:XW,pressure:e$.optional(),speed:t$.optional(),distance:n$.optional()}),Pv=ke(fS),o$=ke(["rain","snow"]),Lv=S({type:o$.nullish(),amount:j().nullish(),chance:j()}),r$=S({current:j(),high:j().optional(),low:j().optional()}),a$=S({at:h(),state:Pv,summary:h(),description:h().optional(),temperature:r$,precipitation:Lv.optional()}),NE=S({high:j(),low:j()}),i$=S({date:h(),state:Pv,temperature:NE,precipitation:Lv.optional()}),c$=S({at:h(),state:Pv,temperature:NE,precipitation:Lv.optional()}),l$=S({daily:L(i$),hourly:L(c$).nullish().optional()}),u$=S({type:w("weather"),location:h(),units:s$,spotlight:a$.optional(),forecast:l$}),nd=ke(fS),d$=S({type:w("weatherTemperatureHourly"),location:h(),unit:Ne([w("f"),w("c")]),spotlight:S({date:h(),state:nd,summary:h(),temperature:j().optional(),high:j(),low:j()}),forecast:L(S({at:h(),state:nd,temperature:j(),precipitationChance:j()}))}),m$=S({type:w("weatherTemperatureDaily"),location:h(),unit:Ne([w("f"),w("c")]),forecast:L(S({date:h(),state:nd,high:j(),low:j(),precipitationChance:j()}))}),RE=Ne([w("rain"),w("snow")]),PE=Ne([w("in"),w("mm")]),f$=S({type:w("weatherPrecipitationHourly"),location:h(),unit:PE,precipitationType:RE,spotlight:S({date:h(),summary:h(),amount:j(),chance:j()}),forecast:L(S({at:h(),state:nd,amount:j(),chance:j()}))}),p$=S({type:w("weatherPrecipitationDaily"),location:h(),unit:PE,precipitationType:RE,forecast:L(S({date:h(),state:nd,amount:j(),chance:j()}))}),h$=Ne([u$,d$,m$,f$,p$]),LE=Ne([mV,FV,yV,VV,zV,lH,vH,CH,MH,NH,RH,UH,BH,nz,WH,qH,az,Mz,Dz,GV,jV,lG,DH,YW,OH,h$,Bz,bV,UV,ez,hz,fH,YH,QW,Oz]),OE="clicked",Ov="dismissed",iEe=S({mainColor:h().nullable().optional(),secondaryColor:h().nullable().optional(),leftAccentColor:h().nullable().optional(),rightAccentColor:h().nullable().optional(),selectedVariant:h().nullable().optional(),palette:h().nullable().optional(),randomPalette:fe().optional()}),S4=Ne([ke([OE,Ov]),D9()]),DE=S({primaryColor:h(),secondaryColor:h().nullable().optional(),leftAccentColor:h().nullable().optional(),rightAccentColor:h().nullable().optional()}),cEe=S({appearance:S({body:DE}).nullable()}),S2=S({userId:h(),userDisplayName:h().nullish()}),g$=S({participants:L(S2).nullish(),owner:S2.nullish()});S2.extend({isYou:fe(),avatar:h().optional(),isOwner:fe()});S({token:h().min(1),displayName:h().trim().min(1).optional()});const lEe=S({conversationId:h()}),v$=S({url:At()}),C$=S({url:At().nullish()}),uEe=S({owner:h().nullish(),conversationTitle:h().nullish(),numberOfOtherParticipants:j().min(1)}),dEe=S({errorCode:h().optional()}),y$=S({id:h(),imageUrl:h(),voiceId:h()}),mEe=nt("type",[S({type:w("media"),delta:h()}),S({type:w("remainingTime"),seconds:j()}),S({type:w("startFailed"),startFailedType:Ne([w("time-expired"),w("throttled")])}),S({type:w("terminated"),reason:Ne([w("time-expired-day"),w("interrupted")])})]),b$=S({id:h(),previewUrl:h(),voiceId:h()}),fEe=S({portraits:L(b$)});ke(["free-talk","prepare-interview","learn-about-x","practice-speaking","talk-to-future-self"]);const Rr=S({light:h(),dark:h()}),x$=S({foreground1:Rr,foreground2:Rr,accent:Rr,shape:Rr,shapeInverse:Rr,background1:Rr,background2:Rr,background3:Rr}),E4=S({name:ke(["ginto-copilot-nord-bold","ginto-copilot-nord-medium-italic","ginto-copilot-480","kari-regular"]),url:At()}),S$=S({name:h(),url:At()}),al=S({url:At()}),il=S({urlLight:At(),urlDark:At()}),E2=S({url:At()}),bl=S({type:h(),title:h()}),E$=bl.extend({type:w("coverPage"),content:h(),template:ke(["image-background","fuzzy-image"]),image0:al,sticker0:il.nullish(),sticker1:il.nullish()}),w$=bl.extend({type:w("heroImage"),content:h(),template:ke(["noisy-circle","macaron","wavy-shape"]),image0:al}),I$=bl.extend({type:w("stickerSheet"),content:h(),template:ke(["sticker1","sticker2"]),sticker0:il,sticker1:il,accent0:E2,accent1:E2}),_$=bl.extend({type:w("simpleText"),content:h(),template:h().nullish()}),T$=bl.extend({type:w("photoJournal"),content:h().nullish(),template:ke(["shapes-only","shapes-accents"]),variation:ke(["shape-group1","shape-group2"]),label0:h(),label1:h(),image0:al,image1:al,sticker0:il.nullish(),accent0:E2.nullish()}),A$=bl.extend({type:w("endPage"),content:h(),template:ke(["wide-cards","tall-cards"]),variation:ke(["shape-group1","shape-group2"]),questions:L(h()),image0:al,image1:al.nullish(),sticker0:il}),k$=S({type:w("shareDefault"),template:h().nullish()}),M$=nt("type",[E$,w$,I$,_$,T$,A$,k$]),N$=S({id:h(),modifiedAt:h(),theme:x$,font:E4,fontHandwriting:E4.nullish(),masks:L(S$),sections:L(M$)}),R$=S({type:w("chatAboutNarrative"),narrativeId:h(),messageIndex:j()}),P$=S({id:h(),text:h(),createdAt:h()}),L$=S({results:L(P$),next:h().nullable()}),O$=S({type:w("provideImageFeedback"),messageId:h(),feedbackTypes:L(h())}),D$=S({type:w("createPage"),messageId:h()}),j$=S({type:w("appendToPage"),messageId:h(),pageId:h()}),jE=S({id:h(),conversationId:h()}),F$=S({id:h(),fileName:h(),contentType:h()}),pEe=S({title:h().nullish(),content:h().nullish(),conversationId:h(),attachments:L(F$).optional().nullable()}),U$=ps.extend({type:w("page"),page:S({id:h(),conversationId:h(),title:h().nullish()})}),B$=S({id:h(),title:h().nullish(),updatedAt:h(),conversationId:h().optional(),type:ke(["page","sharedPage"]).optional(),previewContent:h().nullish()}),V$=S({results:L(B$),next:h().nullish()}),hEe=S({title:h().nullish(),content:h().nullish(),shareLink:h(),page:S({id:h()}).nullable()}),gEe=S({id:h(),url:h()}),H$=ke(["page-count-exceeded","page-content-length-exceeded"]),z$=S({errorCode:H$}),vEe=S({title:h().nullish()}).nullish(),CEe=ke(["public","user"]),yEe=S({id:h(),url:h()});S({type:w("podcast"),id:h().min(1)});const FE=w("generatePodcast"),G$=S({type:FE,taskId:h().min(1)}),UE=w("createPowerPoint"),W$=S({type:UE,messageId:h(),themeId:h(),responses:ki(h(),L(j()))}),$$=S({prompt:h()}),p1=w("executeTask"),q$=S({type:p1,taskId:h(),context:$$.optional()}),Z$=h(),K$=S({currentConversationId:h().nullable(),isNewUser:fe(),banExpiresAt:h().nullable(),remainingTurns:j().nullable(),features:L(Z$),allowBeta:fe().nullish(),userId:h().nullish(),inDataUseWaitingPeriod:fe().nullish()}),Y$=S({id:h(),name:h(),previewUrl:h(),voicemails:L(h())}),Q$=S({id:h(),backgroundImageUrl:h()}),J$=S({id:h(),name:h(),location:Q$.nullish()}),lo=S({type:h(),label:h()}),X$=L(lo),eq=S({positive:L(lo),negative:L(lo)}),Kn=Ne([X$,eq]),Fa=S({type:h(),label:h(),subOptions:L(lo).nullish()}),BE=S({local:Kn,ads:Kn,video:Kn,image:Kn,sports:Kn,job:Kn,shopping:Kn,recipe:Kn,finance:Kn,quiz:Kn,weather:Kn,personalArtifacts:Kn,healthcareInfo:Kn,navigation:Kn,healthcareEntity:Kn}),tq=S({positive:L(lo).nullish(),negative:L(lo)});BE.keyof();const VE=S({newsArticle:L(Fa),newsVideo:L(Fa),newsGem:L(Fa),chat:L(Fa),dailyBriefing:L(Fa),podcast:L(Fa),default:L(Fa)});VE.keyof();const nq=S({computerUse:L(lo)}),sq=S({text:L(lo),image:L(lo),call:L(lo),appearance:L(lo),card:BE,showroom:tq.nullish(),discover:VE.nullish(),task:nq.nullish()}),oq=S({maxFilesPerMessage:j(),maxFileNameLength:j(),image:S({mimeTypes:L(h()),maxBytes:j()}),document:S({mimeTypes:L(h()),maxBytes:j()}),binary:S({mimeTypes:L(h()),maxBytes:j()})}),rq=S({minTextLength:j().min(0),textDeltaPercent:j().min(0).max(100),debounceInMilliseconds:j().min(0)}),aq=S({signInPrompts:L(j()),voices:L(Y$),maxTextMessageLength:j(),feedbackOptions:sq,characters:L(J$).nullish(),pageLimit:j(),maxPageContentLength:j(),maxPageTitleLength:j(),messagePreview:rq,attachments:oq,portraits:L(y$).nullish()});S({hasVisionAccess:fe(),allowedDomains:L(h()).nullable(),allowedDomainSuffixes:L(h()).nullable(),blockedDomains:L(h()).nullable(),blockedDomainSuffixes:L(h()).nullable()});const iq=S({startTime:h(),text:h()}),cq=S({startTime:h(),text:h(),words:L(iq)}),w4=S({url:h(),duration:j(),transcript:L(cq).nullish()}),lq=S({title:h(),image:h(),url:h(),createdAt:h()}),uq=S({publisherName:h(),publisherIcon:h(),articles:L(lq)}),I4=S({url:h(),foregroundColor:h(),backgroundColor:h()}),_4=S({name:h(),foregroundColor:h(),backgroundColor:h(),altText:h().nullish(),url:h()}),dq=S({landscape:_4,portrait:_4}),mq=S({id:h(),title:h(),image:S({landscape:I4,portrait:I4}),audio:ki(h(),w4),transitionMusic:w4.nullable(),sources:L(uq)}),HE=S({topics:L(S({id:h(),label:h(),imageUrl:h(),isFollowed:fe()}))}),fq=S({position:j(),chapterId:h()}),zE=S({isAvailable:fe(),podcastId:h(),chapters:L(mq),topics:HE.optional(),playback:fq}),pq=S({positionInSeconds:j(),chapterId:h()}),hq=S({id:h(),title:h(),topic:h().nullable().optional(),image:dq,audio:S({name:h(),duration:j()})}),ip=S({isAvailable:fe(),podcastId:h(),chapters:L(hq),playback:pq}),gq=ke(mB),GE=ke(uB),vq=ke(dB),Cq=S({channel:vq,tier:GE,isAutoRenew:fe()}),yq=S({portrait:S({consentType:w("portrait"),version:h().nullable()}).nullable()}),WE=qm({id:h(),firstName:h().nullable(),anid:h().nullable(),isPro:fe(),isDeprecated:fe().nullish(),inEeaPlusRegion:fe(),inGdprRegion:fe(),regionCode:ke(Object.values(Ld)),isHistoryMigrationPending:fe(),isInsider:fe(),isEligibleForFreeTrial:fe().optional(),phoneLink:qm({deviceName:h().nullable()}).nullable(),ageGroup:ke(cB).nullable(),allowedToggles:qm({textTraining:fe(),voiceTraining:fe(),personalization:fe()}),remainingUsage:qm({reasoningCalls:j(),podcastGenerations:j(),researchCalls:j(),visionCallSeconds:j(),videoGenerations:j()}).nullish(),accountTier:gq.nullish(),subscriptions:L(Cq).nullish(),requiredConsents:yq,privacyRequirement:ke(hB).nullable()}),bq=S({preferredVoice:h().nullable(),preferredCharacter:h().nullable().optional(),optOutOfTraining:fe(),optInToVoiceTraining:fe(),optOutOfPersonalization:fe(),optOutOfPhoneConnection:fe(),optInToGenerativeUI:fe().optional(),allowBiometricDataUse:fe().optional(),allowOneDriveAccess:fe().optional(),allowEdgePasswordsAccess:fe().optional(),allowBrowserActions:fe().optional(),allowComputerUseActions:fe().optional(),allowOutlookAccess:fe().optional(),features:S({suggestedFollowups:fe().optional()}).nullish()}),$E=S({errorCode:Ne([w("attachment-too-large"),w("unsupported-content-type"),w("empty-attachment"),w("content-blocked"),w("rate-limit-exceeded"),w("not-signed-in")])}),xq=Ne([S({url:h()}),$E]),qE=Ne([S({id:h()}),$E]),Dv=S({id:h(),title:h().optional(),updatedAt:h(),characterId:h().nullable().optional(),continuedAt:h().nullable(),group:g$.nullish()}),Sq=S({results:L(Dv),next:h().nullable()}),Eq=S({id:h()}),ZE=Ne([w("thumbs-down"),w("thumbs-up"),wd()]),Hd=Ne([w("running"),w("completed"),w("failed"),w("cancelled"),w("pending"),w("paused")]),wq=Ne([w("research"),w("computerUse"),w("podcast"),w("videoGeneration")]),Iq=S({type:w("chainOfThought"),text:h()}),_q=S({type:w("query"),text:h()}),Tq=S({type:w("citation"),title:h(),url:h()}),Aq=ke(["start","preplan","plan","exploration","reflection","report"]),kq=S({completion:j().min(0).max(1),step:Aq}),Mq=nt("type",[Iq,_q,Tq]),Nq=S({url:h().nullish(),prompt:h()}),KE=S({id:h(),title:h().nullish(),contents:L(Mq).nullish(),inlineCitations:L(yv).nullish(),partialOutput:L(h()).nullish(),finalResponse:h().nullish(),summary:h().nullish(),coverImage:Nq.nullish(),type:w("research"),status:Hd,prompt:h().optional(),progress:kq.nullish()}),bEe=KE.omit({id:!0}).extend({shareId:h()}),YE=S({url:h(),createdAt:h()}),Rq=S({type:w("computerUse"),title:h().nullish(),conversationId:h().nullish(),id:h(),status:Hd,lastScreenshot:YE.nullish(),updatedAt:h().nullish()}),QE=S({id:h(),title:h().nullish(),thumbnail:S({name:h().nullish()}).nullish()}),Pq=S({type:w("podcast"),id:h(),podcast:QE.nullish(),status:Hd,updatedAt:h().nullish()}),Lq=S({type:w("error"),errorCode:ke(["Failed","Blocked","Throttled"])}),Oq=S({type:w("success"),thumbnailUrl:h().nullish(),videoUrl:h().nullish()}),JE=nt("type",[Lq,Oq]),Dq=S({type:w("videoGeneration"),id:h(),result:JE.nullish(),status:Hd,prompt:h().nullish(),updatedAt:h().nullish()}),XE=nt("type",[KE,Rq,Pq,Dq]),h1=S({id:h(),title:h().optional(),conversationId:h().optional(),updatedAt:h(),status:Hd,type:wq}),jq=h1.extend({type:w("research")}),Fq=h1.extend({type:w("computerUse"),screenshot:h().nullish(),lastScreenshot:YE.nullish(),chainOfThought:L(h()).nullish(),computerAction:h().nullish(),statusChange:wV.optional(),lastUserCommand:Li.optional(),reaction:ZE.optional(),activeTabFaviconUrl:h().nullish(),activeTabTitle:h().nullish(),viewMode:PV.nullish(),replay:OV.nullish()}),Uq=h1.extend({type:w("podcast"),podcast:QE.nullish()}),Bq=h1.extend({type:w("videoGeneration"),result:JE.nullish()}),Vq=nt("type",[jq,Fq,Uq,Bq]),xEe=S({results:L(Vq),next:h().nullable()}),Vi=Ne([w("report"),...ZE.options]),Hq=Ne([w("generating"),w("generated"),w("failed"),w("non-complete")]),g1=S({id:h(),createdAt:h()}),zq=S({index:h(),title:h(),url:h(),iconUrl:h().nullable(),publisher:h().nullable(),snippet:h().nullish()}),Gq=ps.extend({type:w("image"),url:h().optional(),prompt:h().optional().nullable(),isPartiallyLoading:fe().optional(),reaction:Vi.optional(),partialGenerationStep:j().optional(),status:Hq.optional(),progressionText:h().nullable().optional()}),Wq=ps.extend({type:w("citation"),...yv.shape}),$q=ps.extend({type:w("text"),text:h(),citations:L(zq).optional(),reaction:Vi.optional()}),qq=ps.extend({type:w("task"),task:XE.nullish(),reaction:Vi.optional()}),Zq=ps.extend({type:w("card"),card:LE,reaction:Vi.optional()}),Kq=Ne([w("loading"),w("success"),w("failed")]),Yq=ps.extend({type:w("indicator-ai-response"),text:h(),state:Kq}),Qq=ps.extend({type:w("document"),attachmentId:h(),fileName:h(),contentType:h(),reaction:Vi.optional()}),Jq=ps.extend({type:w("deleted"),partType:ke(["page","task"])}),Xq=ps.extend({type:w("error"),text:h()});S({text:h(),title:h().optional(),lastSubActionScreenshotUrl:h().nullish()});const ew=ps.extend({type:w("chainOfThought"),text:h(),title:h().optional(),screenshotUrl:h().nullish(),reaction:Vi.optional(),partId:h()}),eZ=Ne([ew,TS]),tZ=ps.extend({type:w("chainOfThoughtGroup"),items:L(eZ).optional(),isComplete:fe()}),nZ=ps.extend({type:w("memorySignal"),text:h(),signalType:Ne([w("remember"),w("forget")]).nullish()}),sZ=S({position:Ne([w("left"),w("right")]),isDefault:fe(),isStreamingComplete:fe().optional()}),oZ=nt("type",[$q,Gq,U$,Wq,Xq,Zq,Qq,qq,Jq,ew,tZ,TS,nZ,Yq]),rZ=S({type:w("text"),text:h()}),aZ=S({type:w("browserTabs"),tabs:L(S({title:h().optional(),url:h().optional(),id:j().optional(),favIconUrl:h().optional(),windowId:j()}))}),iZ=S({type:w("image"),url:h()}),cZ=S({type:w("document"),partId:h(),fileName:h(),contentType:h()});S({type:w("document"),attachmentId:h()});const jv=w("startProductCheckoutActions"),lZ=S({type:jv,offerId:h().nullish()}),tw=w("requestPrompt"),uZ=S({type:tw,promptKey:h()});Ne([Li,p1,jv]);Ne([w("provideImageFeedback"),w("createPage"),w("appendToPage"),w("promptCharacterSpeech"),w("chatAboutNarrative"),w("sendFormData"),w("topicClick"),w("setCharacterAppearance"),Li,p1,FE,UE,jv,tw]);const dZ=S({type:w("promptCharacterSpeech")}),mZ=S({type:w("topicClick"),topic:h()}),fZ=S({type:w("setCharacterAppearance"),body:DE}),pZ=nt("type",[O$,D$,j$,IV,_V,TV,AV,kV,MV,RV,dZ,R$,q$,G$,W$,mZ,lZ,fZ,uZ]),hZ=S({type:w("command"),command:pZ}),gZ=S({type:w("dailyBriefing"),chapterId:h()}),vZ=S({type:w("greeting"),greetingMessage:h()}),CZ=S({type:w("news"),articleId:h()}),yZ=S({type:w("newsGem"),gemId:h(),snapshotKey:h()}),bZ=nt("type",[gZ,vZ,CZ,yZ]);S({type:w("reference"),reference:bZ});const nw=nt("type",[rZ,iZ,cZ,hZ,aZ]),xl=ke(["chat","smart","study","reasoning","research","computerUse","search","coco"]),Fv=S({type:w("ai")}),Uv=S({type:w("human")}),Bv=S({type:w("groupParticipant"),id:h(),displayName:h().nullish()});nt("type",[Fv,Uv,Bv]);const xZ=ke(["idle","streaming"]),Vv=g1.extend({author:w("ai"),authorMetadata:Fv.optional(),content:L(oZ),mode:xl.optional(),sideBySideConfig:sZ.optional(),reaction:Vi.optional(),streamingState:xZ.optional().default("idle")}),Hv=g1.extend({author:w("human"),authorMetadata:Uv.optional(),content:L(nw)}),zv=g1.extend({author:w("groupParticipant"),authorMetadata:Bv.optional(),content:L(nw)}),SZ=g1.extend({author:w("system")}),EZ=ke(["kicked","joined","left"]),wZ=SZ.extend({participant:S({userId:h(),userDisplayName:h()}),updateType:EZ}),sw=Ne([Vv.omit({authorMetadata:!0}).extend({author:Fv}),Hv.omit({authorMetadata:!0}).extend({author:Uv}),zv.omit({authorMetadata:!0}).extend({author:Bv})]),ow=S({results:L(sw),next:h().nullable()}),SEe=S({url:h()}),IZ=S({conversation:S({id:h(),title:h()})});S({qc:S({q:h(),gt:h(),sc:h()}),s:L(S({st:h(),t:h()}))});const _Z=S({suggestions:L(S({text:h(),source:h()}))}),Gv=Ne([w("active"),w("banned"),w("ineligible")]),Wv=Ne([w("active"),w("not-started"),w("expired"),w("paused")]),TZ=Ne([w("not-started"),w("completed"),w("ineligible")]),AZ=S({id:h(),type:h(),points:j()}),kZ=S({redeemableCount:j(),redeemedCount:j(),skus:L(AZ)}),EEe=S({userStatus:Gv,status:Wv,startAt:h(),endAt:h(),referralCode:h().nullish(),referralTaskStatus:TZ.nullish(),rewards:kZ.nullish()}),wEe=S({userStatus:Gv.nullish(),programStatus:Wv}),IEe=S({userStatus:Gv.nullish(),programStatus:Wv,lastRequestTime:h(),userId:h()}),T4=ke(["prefillComposer","sendMessage"]),$v=nt("type",[S({type:w(T4.enum.prefillComposer),prompt:h()}),S({type:w(T4.enum.sendMessage),prompt:h()})]),rw=S({id:h(),text:h(),action:$v}),MZ=S({id:h(),text:h(),thumbnail:S({url:h(),altText:h()}),action:$v});S({id:h(),text:h(),action:$v});const NZ=S({id:h(),label:h(),items:L(rw)}),aw=nt("type",[S({type:w("text"),id:h(),title:h().nullish(),items:L(rw)}),S({type:w("textAndImage"),id:h(),title:h().nullish(),items:L(MZ)}),S({type:w("categories"),id:h(),title:h().nullish(),categories:L(NZ)})]);S({widgets:L(aw)});const RZ=S({text:h()}),PZ=S({greetingOptions:L(RZ),widgets:L(aw)}),LZ=S({pages:L(PZ)});S({Questions:L(h()),Url:h(),NormalizedUrl:h().optional(),DebugInfo:h().optional()});S({tabId:j(),windowId:j(),url:h(),title:h(),content:h().optional(),favIconUrl:h().optional()});const iw=S({id:h(),type:ke(pS),status:ke(pB)}),OZ=S({connections:L(iw)}),DZ=S({connection:iw,loginUrl:h()}),jZ=S({encrypted:S({keyName:h(),blob:h()}),unencryptedMetadata:S({url:h(),blacklisted:fe().optional(),dateLastUsedWindowsEpochMicros:j().optional(),passwordIssues:ki(h(),O9()).optional(),type:j()}),encryptedNotesBackup:S({keyName:h(),blob:h()}).optional()});S({passwords:L(jZ),count:j(),hasMore:fe().optional()});const FZ=nt("author",[Vv,Hv,zv]),_Ee=nt("author",[Vv,Hv,zv,wZ]),UZ=nt("eventName",[S({eventName:w("auth0.accountAdded")}),S({eventName:w("auth0.accountRemoved")})]),BZ=["imagegeneration","f1","school","msn","bing"],Zr={OPENED:0,RECENT:1,HISTORY:2},VZ=S({messages:L(FZ),conversationTitle:h()}),HZ={ocid:"OCID",OCID:"OCID",msclkid:"msclkid",gclid:"gclid",rdt_cid:"rdtCid",fbclid:"fbclid",ttclid:"ttclid",li_fat_id:"liFatId",vmcid:"vmcid",ttd_clk:"ttdClk"},A4={gclid:"Google",msclkid:"Bing",rdt_cid:"Reddit",fbclid:"Meta",ttclid:"TikTok",li_fat_id:"LinkedIn",vmcid:"Yahoo",ttd_clk:"TradeDesk"};let w2=null;function Qt(e){return typeof window>"u"?null:new URLSearchParams(window.location.search).get(e)}function dr(e){qv([e])}function qv(e){const t=new URL(window.location.href),n=e.filter(s=>t.searchParams.has(s));if(n.length!==0){for(const s of n)t.searchParams.delete(s);window.history.replaceState(null,"",t)}}function zZ(){return Object.entries(HZ).reduce((e,[t,n])=>{const s=Qt(t);return s?{...e,[n]:s}:e},{})}function cw(){qv(["ocid","OCID","msclkid","gclid","rdt_cid","fbclid","ttclid","li_fat_id","vmcid","ttd_clk"])}function GZ(){const e=Qt("form");if(e)return dr("form"),e;const t=Qt("FORM");return t&&dr("FORM"),t}function WZ(){const e=Qt("ocid");return e||Qt("OCID")}function $Z(){return Qt("alias")}function qZ(){const e=Qt("chat-mode");return e&&dr("chat-mode"),e}function TEe(){const e=Qt("audiomode");return e&&dr("audiomode"),e}function ZZ(){const e=Qt("q");return e&&dr("q"),e}function KZ(){const e=Qt("prompt");return e&&dr("prompt"),e}function YZ(){const e=Qt("sandbox");return e&&dr("sandbox"),e==="1"}function QZ(){if(typeof window>"u")return!1;const e=Qt("disable-all-features");return e!==null&&e!=="0"&&e!=="false"}function AEe(){return Qt("payflow-correlationId")}function kEe(){return Qt("entry-point")??""}function MEe(){const e=Qt("campaign");return e?(la("campaignId",e),e):null}function NEe(){const e=Qt("referral-code");return e?(la("referralCode",e),e):null}function JZ(){const e=Qt("windows");return e&&dr("windows"),e==="1"}function XZ(){return Qt("charid")}const eK=[["payflowCorrelationId","pfcid"],["payflowFrom","pff"],["payflowAuthHint","pfah"],["payflowEntry","pfe"],["payflowRequiresPremium","pfrp"]];function REe(){const e={payflowCorrelationId:"",payflowFrom:"",payflowAuthHint:"",payflowEntry:"",payflowRequiresPremium:""};for(const[t,n]of eK){const s=Qt(n);s&&(e[t]=s)}return e}function tK(){const e=Qt("intent");return w2===null&&(w2=e),e}function nK(){return w2}function sK(e){const t=e.toLowerCase();return BZ.includes(t)}const oK=["text","queryParam"];function rK(e){return oK.includes(e)}function aK(){const e=Qt("input-method");return e?(dr("input-method"),rK(e)?e:"queryParam"):"queryParam"}function PEe(){return[]}function LEe(){return[]}function xa(e){const t=typeof navigator<"u"?navigator.userAgent:null;return t?e.test(t):!1}function iK(){return xa(/BingSapphire/gi)}function cK(){return xa(/NewsSapphire/gi)}function Zv(){return typeof navigator>"u"?!1:!!(navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Macintosh/i.test(navigator.userAgent)&&"ontouchend"in document)}function zd(){return Zv()||xa(/iPad|iPhone|Android|iPod/gi)}function lK(){return xa(/macintosh|mac os x/gi)&&!Zv()&&!Kv()}function uK(){return xa(/Android/gi)}function Kv(){return Zv()||xa(/iPhone|iPad|iPod/gi)}function lw(){return xa(/Windows|Win32|WOW64/i)}function dK(){return xa(/CopilotNative.*macOS/gi)}const v1=N(!1),mK=fe().optional(),cl=fs({key:VU,schema:mK,initialValue:void 0}),fK=fe().optional(),hg=fs({key:HU,schema:fK,initialValue:void 0});function pK(){return pe(v1)&&!!pe(cl)}function uw(){return typeof window>"u"||window.isStudioServer?"studio":"snr"}function dw(){if(typeof window<"u"&&window.isStudioSsr)return"ssr"}const hK={"thumbs-up":"thumbsUp","thumbs-down":"thumbsDown",report:"reportMessage"},k4="homepage";function gK(){return Rt("kill-analytics-custom-batch")?{instrumentationKey:"be6e4c19699f4fdf9f8c0ec9f9b398ef-25d58bb9-9926-4df7-8e36-bc7afb4b2c34-7563",channelConfiguration:{eventsLimitInMem:5e3},propertyConfiguration:{populateBrowserInfo:!0},disableCookiesUsage:!0}:{instrumentationKey:"be6e4c19699f4fdf9f8c0ec9f9b398ef-25d58bb9-9926-4df7-8e36-bc7afb4b2c34-7563",channelConfiguration:{eventsLimitInMem:5e3,autoFlushEventsLimit:5},propertyConfiguration:{populateBrowserInfo:!0},disableCookiesUsage:!0,extensionConfig:{PostChannel:{maxBatchInterval:1e4,maxBatchCount:20,immediateEventLimit:100}}}}class vK{constructor(t={}){O(this,"analytics",null);O(this,"features");O(this,"picassoId",null);O(this,"anid",null);O(this,"formCode",null);O(this,"landingPage",k4);O(this,"trafficAlias",null);O(this,"settings",null);O(this,"isAADUser",null);O(this,"isNewUser",null);O(this,"isCopilotMode",null);O(this,"accountType",null);O(this,"referrer",null);O(this,"deviceInfo",null);O(this,"anaheimId",null);O(this,"pluginProvider",null);O(this,"pluginCache",null);O(this,"publisherInfo",null);O(this,"isInitializing",!1);O(this,"pendingEvents",[]);O(this,"initRetryCount",0);O(this,"maxRetries");O(this,"maxPendingEvents");O(this,"delay");O(this,"onInitializeError");O(this,"initializationPromise",null);this.maxRetries=t.maxRetries??3,this.maxPendingEvents=t.maxPendingEvents??1e3,this.delay=t.delay??0,this.onInitializeError=t.onInitializeError}getSurface(){return this.getPlatformSurface("cmc")}getAppName(){return`CopilotN-${this.currentEnv}-web-${this.getSurface()}`}ensureInitialized(t){!this.isInitialized&&!this.isInitializing&&(this.pluginProvider=t,this.isInitializing=!0,this.initialize())}get plugin(){return this.pluginCache===null&&this.pluginProvider!==null&&this.analytics!==null&&(this.pluginCache=this.pluginProvider(),this.pluginCache&&this.analytics.addNotificationListener(this.pluginCache)),this.pluginCache}get isInitialized(){return this.analytics!==null&&this.analytics.isInitialized()}get currentEnv(){return"prod"}get initializationFailed(){return this.initRetryCount>=this.maxRetries}setFeatures(t){this.features=t.join(",")}setAnid(t){this.anid=t}getAnid(){return this.anid}setIsNewUser(t){this.isNewUser===null&&(this.isNewUser=t)}setIsAad(t){this.isAADUser=t}setCopilotMode(t){this.isCopilotMode=t}setSettings(t){this.settings={...this.settings,...t}}getPicassoId(){return this.picassoId}setPicassoId(t){this.picassoId=t}setFormCode(t){this.formCode=t}getFormCode(){return this.formCode}setDeviceInfo(t){this.deviceInfo=t}setLandingPage(t){this.landingPage===k4&&(this.landingPage=t)}getLandingPage(){return this.landingPage}isValidLowercaseUserAccountType(t){return["msa","aad","apple","google"].includes(t)}setUserAccountType(t){if(!t){this.accountType=null;return}const n=t.toLowerCase();this.isValidLowercaseUserAccountType(n)?this.accountType=n:this.accountType=null}getUserAccountType(){return this.accountType}processFormCode(){const t=GZ();this.formCode=t}processAlias(){const t=$Z();t&&(this.trafficAlias=t)}processReferrer(){this.referrer===null&&typeof document<"u"&&(this.referrer=document.referrer)}getAnaheimIdFromHTML(){try{const t=document.querySelector("meta[name='x-client-data']");if(!t)return null;const n=t.getAttribute("content");if(!n)return null;const s=atob(n),o=JSON.parse(s);if(typeof o!="object"||o===null)return null;const r=o;if(!("4"in r))return null;const a=r[4];return typeof a=="string"?a:null}catch{return null}}processAnaheimId(){const t=this.getAnaheimIdFromHTML();t&&(this.anaheimId=t)}initialize(){this.isInitialized||(this.processFormCode(),this.processAlias(),this.processReferrer(),this.processAnaheimId(),this.processPublisherFromUrl(),this.initializationPromise=this.dynamicInitialization(),this.initializationPromise.catch(()=>{}))}async dynamicInitialization(){var n,s;this.delay>0&&await new Promise(o=>{setTimeout(o,this.delay)});const t=await V(()=>import("./vendor-XhZj4hnV.js").then(o=>o.aw),[]).catch(o=>o instanceof Error?o:new Error(`Failed to load @microsoft/1ds-analytics-js: ${o}`));if(t instanceof Error)(n=this.onInitializeError)==null||n.call(this,t),this.initRetryCount+=1,this.initRetryCount>=this.maxRetries&&((s=this.onInitializeError)==null||s.call(this,new Error("ApplicationInsights initialization: Max retries reached")),this.pendingEvents.length=0);else{const{ApplicationInsights:o}=t;this.analytics=new o;const r=gK();this.analytics.initialize(r,[]),this.flushPendingEvents()}this.isInitializing=!1}flushPendingEvents(){for(let t=0,n=this.pendingEvents.length;t<n;t+=1){const s=this.pendingEvents[t];s&&this.trackEventInternal(s)}this.pendingEvents.length=0}getPlatformSurface(t){if(t==="pageseditor"){if(uK())return"android";if(Kv())return"ios";if(dK())return"mac"}return t}getAppFlavor(){return pK()?{eventInfo_appFlavor:"beta"}:null}processPublisherFromUrl(){const t=new URLSearchParams(window.location.search),n=Object.keys(A4).find(s=>t.has(s));n&&(this.publisherInfo={publisher:A4[n]})}getFixEventProperties(){var t;return{appName:this.getAppName(),appVersion:hv(),surface:this.getSurface(),server:uw(),surfaceVersion:VB(navigator.userAgent),accountType:this.accountType,userMuid:ca("MUID"),aliasMuid:ca("MUID",1),userAnid:this.anid,userPicassoId:this.picassoId,userFlightIds:this.features,trafficAlias:this.trafficAlias,eventInfo_entryPoint:this.formCode,eventInfo_surfaceVisible:document.visibilityState==="visible",eventInfo_isCopilotMode:this.isCopilotMode,isAADUser:this.isAADUser,isNewUser:this.isNewUser,pathname:window.location.pathname,msalVersion:(t=window.msal)==null?void 0:t.version,referrer:this.referrer,anaheimId:this.anaheimId,serverFeature:dw(),"UserInfo.Id":this.picassoId,...td.getTraceIdAnalytics(),...this.settings,...this.deviceInfo,...this.getAppFlavor(),...this.publisherInfo}}trackEvent(t){if(!this.initializationFailed){if(this.pendingEvents.length>=this.maxPendingEvents){console.warn(`Analytics pending events queue is full (${this.maxPendingEvents}). Dropping event: ${JSON.stringify(t)}`);return}if(this.ensureInitialized(this.pluginProvider),this.isInitializing||!this.isInitialized){this.pendingEvents.push(t);return}this.trackEventInternal(t)}}async trackEventAsyncAfterInit(t){this.isInitialized?this.trackEvent(t):this.initializationPromise&&await this.initializationPromise}trackEventInternal(t){var i,u;const n=this.getFixEventProperties(),s=Ni(),o=Q7(),r=((i=this.plugin)==null?void 0:i.generateClientEventId(t))??void 0;if(!this.analytics){console.error("Failed to initialize AnalyticsService.");return}const a={name:t.name,data:{...n,eventInfo_clientEventId:r,...t.data},ext:{web:{consentDetails:JSON.stringify({Required:!0,Analytics:s.analytics,SocialMedia:s.socialMedia,Advertising:s.advertising,GPC_DataSharingOptIn:o})}}};(t.data.eventName==="copilotCompose"||t.data.eventName==="copilotAudioInput")&&We.emit("composer:send-query",{isNewUser:this.isNewUser,event:t.data}),(u=this.plugin)==null||u.onBeforeTrackEvent(a),this.analytics.track(a)}}const D=new vK({maxRetries:3,maxPendingEvents:1e3,delay:200,onInitializeError:e=>{console.error("AnalyticsService initialization error:",e)}}),CK=.03,yK=.1;function bK(){return ae.instance().config().sentryDsnOverride??"https://323dd84fb4f632ccd95493debe9312e0@o4508134825000960.ingest.us.sentry.io/4508799962644480"}let gg,hc;async function xK(e,t){const n=await Yv();n&&n.captureReactException(e,t)}async function Yv(){if(gg)return gg;if(!Rt("kill-sentry"))return hc||(hc=(async()=>{try{const t=await V(()=>import("./index-DRv7cCk4.js"),__vite__mapDeps([2,1]));gg=t;const n=[t.browserTracingIntegration(),t.tanstackRouterBrowserTracingIntegration(Ma())],s=g4?[t.browserProfilingIntegration()]:[];t.init({dsn:bK(),release:BB(),sampleRate:yK,environment:"production",integrations:[...n,...s],tracesSampleRate:CK,profilesSampleRate:g4?.1:0,replaysSessionSampleRate:0,replaysOnErrorSampleRate:0}),t.setTag("surface","cmc"),t.setTag("isMobile",zd()?"1":"0"),t.setTag("server",uw());const o=dw();return o&&t.setTag("serverFeature",o),hc=void 0,t}catch{hc=void 0;return}})(),hc)}async function SK(e){const t=await Yv();t!==void 0&&t.setUser(e?{id:e}:null)}function mw(e,t){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ErrorBoundary",eventInfo_errorName:e.name,eventInfo_errorMessage:e.message,eventInfo_errorStack:e.stack??"",eventInfo_componentStack:t.componentStack??"",...e instanceof d1&&{eventInfo_apiRoute:e.route,eventInfo_statusCode:e.statusCode}}}),xK(e,t)}function sd(e,t,n=!1){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"APIResponseParseError",eventInfo_apiUrl:t,eventInfo_errors:JSON.stringify(e.format()),eventInfo_safe:n}})}async function M4(e){const t=await DB(e.promise);D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"UnhandledRejection",eventInfo_reason:`${e.reason}`,eventInfo_customData:t}})}function EK(e,t,n){try{new URL(Jr(e)).hostname}catch(s){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"invalidCitationURL",eventInfo_url:e,eventInfo_errorMessage:s instanceof Error?s.message:"",eventInfo_conversationId:t,eventInfo_messageId:n}})}}function fw(e){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"PlaybackApiError",eventInfo_errorMessage:e instanceof Error?e.message:"",eventInfo_details:"An error occurred during media playback tracking api call."}})}function wK(e,t,n){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"InvalidJsonResponse",eventInfo_apiUrl:n,eventInfo_errorMessage:e.message,eventInfo_errorCode:t.statusText,eventInfo_details:JSON.stringify(Object.fromEntries(t.headers.entries()))}})}const IK=25,_K=25,TK=6e3,AK=12,kK=["mica","aqua","erin"];function pw(e){switch(e){case"mica":case"aqua":case"erin":return e;default:return null}}function MK(e,t){switch(e){case"mica":return t("characterAnimation.characterNameMica");case"aqua":return t("characterAnimation.characterNameAqua");case"erin":return t("characterAnimation.characterNameErin");default:return""}}function NK(e,t){return(n,s)=>{D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CharacterError",eventInfo_details:`animatingMessageId: ${e}, characterId: ${t}, name: ${n.name}, info: ${s.componentStack}`,eventInfo_errorMessage:n.message}}),mw(n,s)}}function RK(e,t){try{const n=e==null?void 0:e.updatedAt;if(!t||!n)return;const s=new Date(n),o=new Date(t);(s.getTime()-o.getTime())/1e3/60>1&&D.trackEvent({name:"system",data:{eventName:"historyUpdatedAtDiscrepancy",eventInfo_conversationId:e.id,eventInfo_conversationUpdatedAt:n,eventInfo_lastMessageCreatedAt:t}})}catch{}}function Qv(e){return e?e.history.some(t=>t.author==="ai"&&t.streamingState==="streaming"):!1}iB();const Sa=N(!1),hw=N(!1),PK=N(!1),LK=N(!1),Gd=N(void 0),xt=N(new Map),De=N(void 0),I2=N(null),vg=N(void 0),gw=N(e=>e(vg),(e,t,n)=>{const s=e(vg);s!==n&&(t(xt,o=>{const r=new Map(o);return s&&r.delete(s),r}),t(vg,n))}),vw=N(null),bn=N(e=>{const t=e(De);if(t)return e(xt).get(t)}),Jv=$7(bn,e=>e?Qv(e):!1,(e,t)=>e===t),OEe=e=>$7(xt,t=>{const n=t.get(e);return n?Qv(n):!1},(t,n)=>t===n),Uc=N(!1),fo=N(new Map),DEe=N([]);N([]);const jEe=e=>N(t=>t(fo).get(e)),vr=N(e=>{var t;return((t=e(bn))==null?void 0:t.history)??[]}),C1=N(e=>{const t=e(xt);for(const n of t.values())if(!n.title&&!n.history.length&&n.isNew)return n.id}),y1=N(new Map),OK=N(new Map),Eu=N(void 0),b1=N([]),Xv=N(e=>{var t;return pw((t=e(bn))==null?void 0:t.characterId)}),mi=N("idle"),Cw=N(!1),Wo=N(null),N4=N("idle"),Qa=N("checking-availability"),DK=N(null),yw=N([]),yi=N(null),eC=N(null),tC=N([]),jK=N([]),bw=N(null),FK=N(e=>e(yi)===0),nC=N(null),sC=N(null),UK=N(null),fi=N(!1),BK=N(!1),xw=N(!1),Sw=N(hS),od=N(void 0),VK=N(!0),Ew=N(null),HK=N(e=>!!e(Ew));N(null);const Sl=N(!1),x1=N(void 0),zK=N(void 0),GK=N(e=>{const t=e(bn);return t==null?void 0:t.suggestedFollowup}),FEe=N(void 0),ww=N(null),UEe=N(!1),WK=N(!1),oC=N(void 0),BEe=N(!1),VEe=N(void 0);N(null);const $K=N(!1),HEe=c1({}),Wn=N("chat-only"),zEe=N(null),GEe=N(null),WEe=N(null),S1=N(null),Iw=N({}),rC=N(!1),sr=N(null),_w=N({data:void 0,isLoading:!1}),qK=N(e=>e(_w).data),Tw=N(e=>e(_w).isLoading),_f=N(!1),Aw=N(null);N(e=>{const t=e(Aw);return(t==null?void 0:t.lcp)??null});const aC=N(null),ZK=N(null),kw=N(null),_2=fs({key:BU,schema:ki(h(),h()),initialValue:{}}),iC=N(null),cC=N(!1),rd=N([]),Mw=N(null),KK=N(null);S({url:h().optional()});const xn=N(null);S({enabled:fe().optional()});function YK(){return!1}const QK="https://www.copilot.com",JK="https://www.copilot-stg.com";function Nw(){return typeof window>"u"?!1:window.location.origin===QK||window.location.origin===JK}function Rw(){return Nw()?`${window.location.origin}/c/api`:"https://copilot.microsoft.com/c/api"}function XK(){return wt(c2,fe().nullable())===!0}function eY(){return wt(a2,fe().nullable())===!0}function tY(){return wt(i2,fe().nullable())===!0}function nY(){return wt(l2,fe().nullable())===!0}const Ja={UNDEFINED:"0",CHILD:"1",ADULT:"3",NOT_ADULT:"4",CHILD_NO_PARENTAL_CONSENT_REQUIRED:"5"},sY=S({name:h(),email:h(),ageGroup:ke([Ja.UNDEFINED,Ja.CHILD,Ja.ADULT,Ja.NOT_ADULT,Ja.CHILD_NO_PARENTAL_CONSENT_REQUIRED]),sub:h()}),ws={LOGIN_START:"auth0:loginStart",LOGIN_SUCCESS:"auth0:loginSuccess",LOGIN_FAILURE:"auth0:loginFailure",LOGOUT_SUCCESS:"auth0:logoutSuccess",LOGOUT_FAILURE:"auth0:logoutFailure",ACQUIRE_TOKEN_START:"auth0:acquireTokenStart",ACQUIRE_TOKEN_FAILURE:"auth0:acquireTokenFailure",REAUTH_START:"auth0:reauthStart",REAUTH_SUCCESS:"auth0:reauthSuccess",INITIALIZE_START:"auth0:initializeStart",INITIALIZE_END:"auth0:initializeEnd",ACQUIRE_TOKEN_OVERALL_SUCCESS:"auth0:acquireTokenOverallSuccess",ACQUIRE_TOKEN_OVERALL_FAILURE:"auth0:acquireTokenOverallFailure",ACQUIRE_TOKEN_TIMEOUT:"auth0:acquireTokenTimeout"},Cr={ACQUIRE_TOKEN_OVERALL_SUCCESS:"msal:acquireTokenOverallSuccess",ACQUIRE_TOKEN_OVERALL_FAILURE:"msal:acquireTokenOverallFailure",ACQUIRE_TOKEN_TIMEOUT:"msal:acquireTokenTimeout",INTERACTION_IN_PROGRESS:"msal:interactionInProgress",REAUTH_ACQUIRETOKENREDIRECT_START:"msal:reauthAcquireTokenRedirectStart",REAUTH_ACQUIRETOKENREDIRECT_SUCCESS:"msal:reauthAcquireTokenRedirectSuccess",REAUTH_POPUP_SHOW:"msal:reauthPopupShow",RETRIEVE_LOGIN_WITH_LOGIN_HINT_START:"msal:retrieveLoginWithLoginHintStart",RETRIEVE_LOGIN_WITH_LOGIN_HINT_SUCCESS:"msal:retrieveLoginWithLoginHintSuccess"};function E1(){return YK()||!1}function w1(){if(!E1())return"140e65af-45d1-4427-bf08-3e7295db6836/ChatAI.ReadWrite"}const oY={auth:{clientId:"14638111-3389-403d-b206-a6a71d9f8f16",authority:"https://login.microsoftonline.com/common",navigateToLoginRequestUrl:!1},system:{allowPlatformBroker:!1},cache:{cacheLocation:"localStorage"}},rY={auth:{clientId:"14638111-3389-403d-b206-a6a71d9f8f16",authority:"https://login.microsoftonline.com/common",navigateToLoginRequestUrl:!1},system:{allowNativeBroker:!1},cache:{cacheLocation:"localStorage"}},aY={scopes:[w1()],extraQueryParameters:{lw:"1",coa:"1",nopa:"2",fl:"easi2_nowld",cobrandid:"8c0b039e-5a73-4399-9b56-7e237be2cd06"},prompt:"select_account",redirectUri:typeof window<"u"?window.location.origin:void 0},iY={scopes:[w1()],prompt:"none",authority:"https://login.microsoftonline.com/consumers",redirectUri:typeof window<"u"?window.location.origin:void 0};function cY(){return{...iY,scopes:[w1()]}}function Wd(){return{...aY,scopes:[w1()]}}const R4={scopes:["User.Read"]},lY={scopes:["OneDrive.ReadWrite"],authority:"https://login.microsoftonline.com/consumers"},uY={scopes:["service::http://Passport.NET/purpose::PURPOSE_GETKEYDATA_ANAHEIM"],authority:"https://login.microsoftonline.com/consumers"},lC={graphMeApiSuffix:"/me",graphMeImageApiSuffix:"/me/photo/$value",graphMeLicenseDetails:"/me/licenseDetails"},P4={appName:"copilot_studio",enableMATS:!0,appVersion:"0.0.0"};function dY(){return E1()?void 0:"IalDS3vRtEI5X0zvsmGG7zJP9UrHTcei"}function mY(){return E1()?void 0:"auth.copilot.microsoft.com"}function Pw(){return E1()?void 0:"https://copilot.microsoft.com"}function fY(){return{clientId:dY(),domain:mY(),cacheLocation:"localstorage",useRefreshTokens:!0,useRefreshTokensFallback:!0}}const Lw="openid profile email offline_access ChatAI.ReadWrite",Ow=typeof window<"u"?window.location.origin:void 0;function I1(){return{authorizationParams:{audience:Pw(),scope:Lw,redirect_uri:Ow}}}function pY(){return{authorizationParams:{audience:Pw(),scope:Lw,redirect_uri:Ow,prompt:"select_account"}}}const T2="cp-pro";function hY(e){switch(e){case"login":return Wd();case"graph":return R4;case"oneDrive":return lY;case"decryptionService":return uY;default:return R4}}const gY={actAsBroker:!0,preferredInteractionType:"redirect"};function at(e,t){qe().set(e,t)}const vY=1e4,CY=1e4,yY=1.8,bY=2.6,Dw={initialDelayMs:100,maxDelayMs:500,backoffFactor:2,maxRetries:2},jw=["UpsellProToPremium","UpsellProToPremium-FromWinNative","ActionsLimit","ActionsLimit-FromWinNative","ActionsLimit-FromEdgeCopilotMode","DeepResearchLimit","DeepResearchLimit-FromWinNative","DeepResearchLimit-FromEdgeCopilotMode","VisionLimit","VisionLimit-FromWinNative","VisionLimit-FromEdge","VisionLimit-FromEdgeCopilotMode","PodcastLimit","PodcastLimit-FromWinNative","PodcastLimit-FromEdgeCopilotMode","Management","Management-FromWinNative","MarketSelect","Settings","Settings-FromWinNative","ProfileUpdateRequired","VoiceLimit","VideoLimit","Unknown"],$Ee={Pageseditor:"pageseditor-supported-features"},xY=["m365-family-classic-guest","m365-family-guest","m365-premium-guest"],SY="App Store",EY="Google Play",wY=["m365-personal","m365-family-admin"],Fw=["m365-family-guest","m365-premium-guest","m365-premium-admin"],Uw=["m365-personal","m365-family-admin"],IY=["m365-personal","m365-family-admin"];function uC(e){const t=Rt("kill-subs-pro-to-premium"),n=e.some(a=>a.tier==="pro"),s=e.some(a=>IY.includes(a.tier)),o=e.some(a=>a.channel!=="direct");return{isEligible:!t&&n&&!o&&(e.length===1||s&&e.length===2),hasM365Transition:s}}const Bw=["m365-personal-classic","m365-premium-guest","m365-family-guest","m365-family-classic-admin","m365-family-classic-guest","m365-basic"],Vw=["m365-family-admin","m365-personal"],_1=["m365-premium-admin","pro"],L4=[..._1,...Vw,...Bw];function _Y(e,t=!1){if(e.length===0)return t?"buypremium":"buym365";if(e.some(n=>n.tier==="pro")){if(Rt("kill-subs-pro-to-premium"))return null;const{isEligible:n,hasM365Transition:s}=uC(e);return n?s?"switchpremiumm365dual":"switchpremiumsolo":"buypremium"}return e.some(n=>Fw.includes(n.tier))?null:e.some(n=>Uw.includes(n.tier))||t?"upgradepremium":"upgradem365"}function TY(e,t=[]){return t.length===0?null:e.length===0?t.includes("m365-personal")?"buym365":t.includes("m365-premium")?"buypremium":null:t.includes("m365-personal")?e.some(n=>Bw.includes(n.tier))?"upgradem365":null:t.includes("m365-premium")?e.some(n=>_1.includes(n.tier))?null:"upgradepremium":null}function qEe(e){return["m365-personal","m365-family-admin","m365-premium-admin"].find(n=>n===e)??null}function ZEe(e){var t;return e.length>0&&((t=Hw(e)[0])==null?void 0:t.tier)!=="pro"}function KEe(e){return e.some(t=>wY.includes(t.tier))&&!e.some(t=>_1.includes(t.tier))}function Hw(e){return e.slice().sort((t,n)=>L4.indexOf(t.tier)-L4.indexOf(n.tier))}function YEe(e){const t=e.find(n=>n.tier==="pro");return(t==null?void 0:t.isAutoRenew)??!1}function AY(e){const t=e==null?void 0:e.tier,n=e==null?void 0:e.channel,s=t!==void 0&&!xY.includes(t)&&(n==="apple"||n==="google");return{shouldRedirectMobile:s,redirectMobileSource:s?n:null}}function QEe({isPro:e,subscriptions:t}){if(t.length===0&&!e)return!0;if(e){const{isEligible:n}=uC(t);return n}return!1}function kY(e){return e.toLowerCase()==="zh-hant"?"zh-TW":e}function JEe(e,t){const n=t?`${e}-From${t}`:e;return jw.find(s=>s.toLowerCase()===n.toLowerCase())??"Unknown"}function XEe(e){if(!e)return"settings.accountPlan.freePlan";switch(e.tier){case"pro":return"settings.accountPlan.proPlan";case"m365-premium-admin":return"settings.accountPlan.premiumPlan";case"m365-family-admin":return"settings.accountPlan.familyPlan";case"m365-personal":return"settings.accountPlan.personalPlan";default:return null}}const Ea="ellie",zw=[Ea],O4=Ne([ke(zw),D9()]),MY=S({model:w("vasa"),eyesOpenRatio:L(j()).min(1),eyesPose:L(j()).min(6),jawPose:L(j()).length(3),neckPose:L(j()).length(3),rotation:L(j()).length(3),translation:L(j()).length(3),viseme:L(j()).min(10)}),NY=S({model:w("spda2e"),poseDiffusion:L(j())}),RY=S({type:w("summary"),text:h()}),PY=S({type:w("topicList"),id:h(),topics:L(S({text:h()})).nullable(),selectedIndex:j().nullable()}),LY=nt("type",[PY,RY]).nullable(),OY=Ne([h(),j(),fe(),wd()]),ad=JL(()=>Ne([OY,L(ad),ki(h(),ad)])),DY=S({op:w("add"),path:h(),value:ad}),jY=S({op:w("remove"),path:h()}),FY=S({op:w("replace"),path:h(),value:ad}),UY=S({op:w("move"),from:h(),path:h()}),BY=S({op:w("copy"),from:h(),path:h()}),VY=S({op:w("test"),path:h(),value:ad}),HY=nt("op",[DY,jY,FY,UY,BY,VY]),Cg=L(HY),zY=Ne([w("event-not-recognized"),w("over-turn-limit"),w("unknown-error"),w("message-too-large"),w("invalid-event"),w("empty-message"),w("empty-text"),w("text-too-long"),w("multiple-text-parts"),w("multiple-image-parts"),w("too-many-messages"),w("over-lifetime-task-quota"),w("over-task-quota"),w("page-content-length-exceeded"),w("page-count-exceeded"),w("character-out-of-capacity"),h()]),GY=Ne([w("blocked"),w("not-signed-in"),w("failed"),h()]),Gw=Ne([w("quiz"),w("generative-ui"),w("flashcard")]),Ww=Ne([w("throttled"),w("throttled-non-pro"),w("time-expired"),w("time-expired-non-pro"),w("not-in-flight"),w("error"),w("signed-out"),w("region-not-available"),w("time-expired-month"),w("time-expired-month-non-pro")]),WY=Ne([w("throttled"),w("error"),w("time-expired"),w("inactivity")]),$Y=ke(["human","ai"]),qY=S({voice:h().optional(),speed:j().min(50).max(200).optional(),initiator:$Y.optional()}).partial(),D4=j().min(0).max(200).prefault(100),j4=Ne([w("standard"),w("character")]),F4=nt("event",[vl,S({event:w("pong"),id:h()}),S({event:w("connected"),id:h(),requestId:h()}),S({event:w("received"),conversationId:h(),messageId:h(),createdAt:h()}),S({event:w("newMessage"),id:h(),conversationId:h(),message:sw}),S({event:w("emojiReaction"),messageId:h(),emoji:h()}),S({event:w("startMessage"),conversationId:h(),messageId:h(),createdAt:h()}),S({event:w("appendText"),messageId:h(),text:h(),partId:h()}),S({event:w("replaceText"),messageId:h(),text:h(),partId:h()}),S({event:w("titleUpdate"),conversationId:h(),title:h()}),S({event:w("generatingImage"),messageId:h(),prompt:h(),partId:h(),progressionText:h().nullable().optional()}),S({id:h(),event:w("generatingImages"),messageId:h(),partIds:L(h()),prompt:h()}),S({event:w("imageGenerated"),messageId:h(),url:h(),partId:h()}),S({event:w("partialImageGenerated"),messageId:h(),url:h(),partId:h(),content:h()}),S({event:w("page"),messageId:h(),partId:h(),page:S({id:h(),conversationId:h(),title:h().nullish()})}),S({event:w("challenge"),method:Ne([w("copilot"),w("hashcash"),w("cloudflare")]).nullish(),parameter:h().nullish()}),S({event:w("imageGenerationFailed"),messageId:h(),errorCode:GY,partId:h()}),S({id:h(),event:w("generatingCard"),messageId:h(),partId:h(),type:Gw}),S({id:h(),event:w("cardGenerationFailed"),messageId:h(),partId:h()}),S({event:w("transcriptEvent"),text:h()}),S({event:w("audioStart"),conversationId:h()}),S({event:w("audio"),audio:h()}),S({event:w("audioStartFailed"),reason:Ww}),S({event:w("audioTimeRemaining"),seconds:j()}),S({event:w("callTerminated"),reason:WY}),S({event:w("audioEnd")}),S({event:w("callEnded"),id:h()}),S({event:w("audioConfig"),options:qY}),S({event:w("interruptAudio")}),S({event:w("speechEndDetected")}),S({event:w("citation"),messageId:h(),url:h(),title:h(),partId:h(),iconUrl:h().nullable(),publisher:h().nullable(),snippet:h().nullish()}),S({event:w("chainOfThought"),messageId:h(),partId:h(),text:h()}),S({event:w("turnLimitReached"),id:h()}),S({event:w("done"),messageId:h()}),S({event:w("error"),errorCode:zY}),S({event:w("card"),messageId:h(),partId:h(),card:LE}),S({event:w("document"),messageId:h(),partId:h(),attachmentId:h(),fileName:h(),contentType:h()}),S({event:w("callUI"),id:h(),callUI:LY}),S({event:w("callUIUpdate"),id:h(),update:Cg}),S({event:w("banned"),expiresAt:h()}),S({id:h(),event:w("suggestedFollowups"),messageId:h(),suggestions:L(h())}),S({event:w("taskStart"),id:h(),messageId:h(),partId:h(),task:XE}),S({event:w("taskUpdate"),id:h().nullish(),taskId:h(),update:Cg}),S({event:w("startSuggestion"),id:h(),pageId:h(),suggestionId:h(),editTargets:L(S({startIndex:j(),endIndex:j()}))}),S({event:w("appendSuggestion"),id:h(),pageId:h(),suggestionId:h(),text:h()}),S({event:w("characterAnimation"),id:h(),offsetInMilliseconds:j().nullable().optional(),frame:nt("model",[MY,NY]).nullable().optional()}),S({event:w("characterAnimationEnd"),messageId:h()}),S({event:w("setCallType"),callType:j4}),S({event:w("callTypeChanged"),callType:j4}),S({event:w("activityStart"),activity:_S,id:h(),messageId:h(),partId:h()}),S({event:w("activityUpdate"),id:h(),messageId:h(),partId:h(),update:Cg}),S({event:w("memorySignal"),messageId:h(),partId:h(),text:h(),signalType:Ne([w("remember"),w("forget")]).nullish()}),S({event:w("sideBySideComparison"),id:h(),conversationId:h(),sideBySideComparisonId:h(),defaultMessageId:h(),options:L(S({messageId:h(),position:Ne([w("left"),w("right")])}))}),S({event:w("characterEmotion"),emotion:h(),bodyReaction:h()}),S({event:w("modeSelected"),id:h(),messageId:h(),mode:Ne([w("chat"),w("reasoning")])}),S({event:w("partCompleted"),id:h(),messageId:h(),partId:h()}),S({event:w("characterAppearance"),body:S({primaryColor:h().nullable(),secondaryColor:h().nullable(),leftAccentColor:h().nullable(),rightAccentColor:h().nullable(),colorParticles:h().nullable().optional(),shape:h().nullable().optional()}),props:S({hat:h().nullable().optional(),glasses:h().nullable().optional(),accessory:h().nullable().optional()}).optional(),id:h()}),S({event:w("browserAutomate"),messageId:h(),partId:h(),tabIds:L(j()),activeTabId:j().optional()}),S({event:w("relatedSearchResultsAvailable"),messageId:h()}),S({event:w("participantUpdate"),conversationId:h(),participant:S({userId:h(),userDisplayName:h()}),updateType:Ne([w("kicked"),w("joined"),w("left")]),id:h()}),S({event:w("suggestVision"),conversationId:h()})]),$w={kNotPresent:0,kAccepted:1},ewe={kNoError:0,kUnknownError:1,kNoConsent:2,kBlockedByDlp:3,kNotSupportedError:4,kNetworkError:5,kNoVideoTranscript:6,kNoWebContents:7,kNoDocumentHelper:8},twe={kNotYetDetermined:0,kWeb:1,kVideoTranscript:4};function nwe(e){return typeof e=="object"&&e!==null&&"eventName"in e&&"requestId"in e&&(!("isOutgoing"in e)||!e.isOutgoing)&&"args"in e}const Jt=N(void 0),$d=N(e=>e(Jt)!==void 0),qw=fs({key:eS,schema:h().optional(),initialValue:void 0}),Zw=N(e=>{const t=e(Jt),n=e(qw);return t===void 0?n:t.firstName??t.givenName}),T1=N(e=>{var t;return(t=e(Jt))==null?void 0:t.id}),qd=N(void 0),swe=N(e=>e(b1).find(t=>t.id===e(qd))),owe=N(e=>{var s,o;const t=e(b1),n=e(qd)??((s=t[0])==null?void 0:s.id);return(o=t.find(r=>r.id===n))==null?void 0:o.voicemails}),ZY=fs({key:c4,schema:D4,initialValue:wt(c4,D4)??Od}),vo=fs({key:o4,schema:O4,initialValue:wt(o4,O4)??void 0}),KY=fs({key:LU,schema:fe().optional(),initialValue:void 0}),rwe=fs({key:r4,schema:fe(),initialValue:wt(r4,fe())??!1}),Kw=N(null),Zd=N(null),Yw=N(e=>e(tC).find(t=>t.id===e(Zd))),awe=N(!1),iwe=N($w.kNotPresent),cwe=N($w.kNotPresent),Qw=N(void 0),dC=N(!1),A1=N(void 0),YY=N(!1),lwe=N(!1),Jw=N(void 0),QY=N(!1),JY=N(!1),XY=N(!1),Xw=N(void 0),eI=N(void 0),k1=N(null),Kd=N(null),M1=N(null),eQ=N(!0),uwe=N(!1),dwe=N(!1),tQ=N(e=>{const t=e(Jt),n=(t==null?void 0:t.subscriptions)??[];return n.some(s=>s.tier==="pro")&&!n.some(s=>s.tier==="m365-premium-admin")}),nQ=N(e=>{var t;return(t=e(Jt))==null?void 0:t.isStudent}),tI=N(e=>{var t;return(t=e(Jt))==null?void 0:t.inEeaPlusRegion}),Rn=N(void 0),sQ=N(!1);N(e=>{const t=e(Rn);return t&&AB.includes(t)});const nI=N(void 0),mwe=N(e=>{var t;return((t=e(Jt))==null?void 0:t.isEligibleForFreeTrial)??!1}),sI=N(void 0),Yd=N(e=>{var t;return((t=e(Jt))==null?void 0:t.ageGroup)==="teen"}),fwe=N(!1),pwe=N(e=>{var t;return(t=e(Jt))==null?void 0:t.allowedToggles.computerUseActions}),oQ=N(e=>{var t;return(t=e(Jt))==null?void 0:t.allowedToggles.personalization}),rQ=N(e=>{var t;return(t=e(Jt))==null?void 0:t.allowedToggles.textTraining}),aQ=N(e=>{var t;return(t=e(Jt))==null?void 0:t.allowedToggles.voiceTraining}),oI=N(!1),rI=N(null),Qd=N(e=>{var t,n;return((n=(t=e(Jt))==null?void 0:t.subscriptions)==null?void 0:n.filter(s=>GE.safeParse(s.tier).success))??[]}),Hi=N(e=>{const t=e(Qd);return Hw(t)[0]}),iQ=N(e=>{const t=e(Hi);return(t==null?void 0:t.tier)??"free"}),cQ=N(null),mC=N(null);N(e=>{var t;return((t=e(Jt))==null?void 0:t.accountTier)??null});const lQ=N(e=>{var n;const t=(n=e(Hi))==null?void 0:n.tier;return t!==void 0&&Vw.includes(t)}),fC=N(e=>{var n;const t=(n=e(Hi))==null?void 0:n.tier;return t!==void 0&&_1.includes(t)}),N1=N(e=>{const t=e(lQ),n=e(fC);return t||n}),uQ=N(e=>e(Qd).length>0);function aI(e,t,n){return n!==void 0?n:t&&!e}function an(){const e=M(nI),t=M(Ri),n=!!M(sn);return aI(t,n,e)}function R1(){const e=qe(),t=e.get(nI),n=e.get(Ri),s=!!e.get(sn);return aI(n,s,t)}const dQ=ke(["upgrade-subscription","mobile-cross-selling","mac-cross-selling"]),iI={connectorConsentFlowStartUrl:h(),parsedPayflowEntryPoint:ke(jw),payflowAuthHint:h(),payflowCorrelationId:h(),payflowInstanceId:h(),payflowRequiresPremium:fe(),reauthAcquireTokenStartTime:h(),redirectPathOnNextStart:h(),retrieveLoginWithLoginHintStartTime:h(),settingsPromoteContent:dQ,shouldStartSubscription:fe(),"sticky-conversation-mode":xl};function Ws(e,t){if(typeof sessionStorage>"u")return!1;try{return iI[e].parse(t),sessionStorage.setItem(e,JSON.stringify(t)),!0}catch{return!1}}function jn(e){if(typeof sessionStorage>"u")return null;const t=sessionStorage.getItem(e);if(!t)return null;try{const n=JSON.parse(t);return iI[e].parse(n)}catch{return null}}function pi(e){typeof sessionStorage>"u"||sessionStorage.removeItem(e)}async function mQ(e){var s;const t=(s=e.body)==null?void 0:s.getReader();if(!t)return 0;let n=0;try{const o=performance.now();for(;performance.now()-o<2e3;){const{value:r,done:a}=await t.read();if(a)break;n+=r.byteLength}return n}catch{return 0}}const fQ=1e3;function $t(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:e.source,eventInfo_clickScenario:e.scenario,eventInfo_clickDestination:e.destination,eventInfo_conversationId:e.conversationId,eventInfo_podcastId:e.podcastId,eventInfo_messageId:e.messageId,eventInfo_mode:e.chatMode,eventInfo_messageType:e.messageType,eventInfo_cardType:e.cardType,eventInfo_merchantPlatform:e.merchantPlatform,eventInfo_additionalData:e.additionalData?JSON.stringify(e.additionalData):void 0}})}function Ce(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_pageName:e.pageName,eventInfo_sectionName:e.sectionName,eventInfo_clickSource:e.source,eventInfo_clickScenario:e.scenario,eventInfo_clickDestination:e.destination,eventInfo_conversationId:e.conversationId,eventInfo_customData:e.customData}})}const pQ=30*60*1e3;function cI(e){const t=Date.now(),n={eventInfo_pageName:e.pageName,eventInfo_sectionName:e.sectionName,eventInfo_clickSource:e.source,eventInfo_clickScenario:e.scenario,eventInfo_conversationId:e.conversationId,eventInfo_correlationId:`${e.conversationId}-${t}`};D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickDestination:e.destination,eventInfo_customData:e.customData,...n}});let s=!1,o=null;const r=()=>{o!==null&&(window.clearTimeout(o),o=null),document.removeEventListener("visibilitychange",a)},a=()=>{if(document.visibilityState==="visible"&&!s){s=!0;const i=Math.floor((Date.now()-t)/1e3);D.trackEvent({name:"interaction",data:{eventName:"copilotClickDwellTime",eventInfo_dwellTime:i,...n}}),r()}};document.addEventListener("visibilitychange",a),o=window.setTimeout(()=>{r()},pQ)}function cn(e){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionScenario:e.scenario,eventInfo_impressionPage:e.page,eventInfo_impressionElement:e.element,eventInfo_status:e.status,eventInfo_customData:e.customData}})}function po(e){D.trackEvent({name:"health",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:e.feature,eventInfo_scenario:e.scenario,eventInfo_duration:e.duration,eventInfo_customData:e.customData}})}function Yt(e){D.trackEvent({name:"health",data:{eventName:"copilotError",eventInfo_feature:e.feature,eventInfo_scenario:e.scenario,eventInfo_errorType:e.errorType,eventInfo_errorMessage:e.errorMessage,eventInfo_exception:e.exception,eventInfo_customData:e.customData}})}function hQ(e){D.trackEvent({name:"interaction",data:{eventName:"copilotSettingChange",eventInfo_settingName:e.settingName,eventInfo_settingOldValue:e.oldValue,eventInfo_settingNewValue:e.newValue}})}function lI(e,t=fQ){let n;function s(){n=window.setTimeout(()=>{e()},t)}function o(){window.clearTimeout(n)}return{onHoverStart:s,onHoverEnd:o}}function uI(e,t,n,s){setTimeout(async()=>{try{const{status:o}=s,r=await mQ(s),a=s.headers.get("x-ceto-ref")??"";D.trackEvent({name:"apiresponse",data:{eventName:"copilotApiResponse",eventInfo_path:e,eventInfo_method:t,eventInfo_status:o,eventInfo_duration:n,eventInfo_responseContentLength:r,eventInfo_cetoRef:a}})}catch{}},0)}function U4(){performance.mark("userSession-end",{startTime:performance.now()});const{duration:e}=performance.measure("userSession-duration","startupTime-begin","userSession-end");D.trackEvent({name:"system",data:{eventName:"copilotExitEvent",eventInfo_duration:e}})}function gQ(e,t,n){D.trackEvent({name:"interaction",data:{eventName:"copilotComposerInput",eventInfo_conversationId:e,eventInfo_inputMethod:t,eventInfo_customData:n}})}function vQ(e){D.trackEvent({name:"interaction",data:{eventName:"copilotScroll",eventInfo_ScrollSource:e.scrollSource,eventInfo_ScrollStartX:e.scrollStartX,eventInfo_ScrollStartY:e.scrollStartY,eventInfo_ScrollEndX:e.scrollEndX,eventInfo_ScrollEndY:e.scrollEndY,eventInfo_ScrollDuration:e.scrollDuration,eventInfo_userInitiated:e.userInitiated,eventInfo_customData:e.customData}})}const A2="authInitStartTime";function dI(e,t){if(R1()){const s=qe().get(sn),o=s==null?void 0:s.accountType;Yt({feature:"api",scenario:t,errorType:"missingToken",errorMessage:`User is authenticated but no token was available for ${t==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:e,accountType:o})})}}function mI(e,t){const s=qe().get(sn),o=s==null?void 0:s.accountType,r=s==null?void 0:s.provider,a=s==null?void 0:s.tenantId;o||Yt({feature:"api",scenario:t,errorType:"emptyAccountTypeWithToken",errorMessage:`Can get the token but with no user account type ${t==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:e,provider:r,tenantId:a})})}function fI(e){const{providerType:t,apiName:n,extraInfo:s}=e,o=Date.now().toString();la(A2,o),D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_providerType:t,...s})}})}function pI(e){const{providerType:t,apiName:n,extraInfo:s}=e,o=Date.now(),r=ur(A2);if(r){const a=parseFloat(r),i=o-a;sessionStorage.removeItem(A2),D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_duration:i,eventInfo_customData:JSON.stringify({eventInfo_providerType:t,...s})}})}}function hI(e){const{authWorkflowAccountType:t,interactionType:n,correlationId:s,prompt:o,redirectUri:r,apiName:a,extraInfo:i}=e,u=Date.now().toString();Mn(o2,u),D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:a,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_interactionType:n??"",eventInfo_correlationId:s??"",eventInfo_prompt:o??"",eventInfo_redirectUri:r??"",...i})}})}function gI(e){const{authWorkflowAccountType:t,isMSA:n,authority:s,correlationId:o,interactionType:r,apiName:a,extraInfo:i}=e,u=Date.now(),d=tn(o2);let m;if(d){const f=parseFloat(d);m=u-f,Ht(o2)}D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:a,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_interactionType:r,eventInfo_correlationId:o,eventInfo_authority:s,eventInfo_isMSA:n??!1,...i}),eventInfo_duration:m??0}})}function vI(e){const{providerType:t,apiName:n,extraInfo:s}=e;D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_providerType:t,...s})}})}function Uo(e){const{authWorkflowAccountType:t,apiName:n,duration:s,extraInfo:o}=e;D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:s??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_wasInBackground:P1(),...o})}})}async function CI(e){const{authWorkflowAccountType:t,apiName:n,duration:s,extraInfo:o}=e;await D.trackEventAsyncAfterInit({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:s??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_wasInBackground:P1(),...o})}})}function ua(e){const{authWorkflowAccountType:t,apiName:n,errorMessage:s,errorType:o,errorExtraInfo:r,errorCode:a,extraInfo:i}=e;D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!1,eventInfo_apiName:n,eventInfo_errorType:o,eventInfo_errorMessage:s,eventInfo_errorCode:a,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_wasInBackground:P1(),...i,...r})}})}function yg(e){const{authWorkflowAccountType:t,apiName:n}=e;Mn(r2,"1"),D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t})}})}function CQ(e){const{authWorkflowAccountType:t,apiName:n,duration:s}=e,o=tn(r2);o==="1"&&Ht(r2),o==="1"&&D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:s??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t})}})}function pC(e,t){return{eventInfo_requestType:t,eventInfo_retryAttemptCount:e.attemptCount,eventInfo_retryStartTime:e.startTime,eventInfo_retryEndDelay:e.endTime,eventInfo_retryDelayTimings:e.delayTimings.join(","),eventInfo_allErrors:JSON.stringify(e.errors),eventInfo_wasInBackground:P1()}}function yI(e,t,n){Uo({authWorkflowAccountType:n,apiName:n==="microsoft"?Cr.ACQUIRE_TOKEN_OVERALL_SUCCESS:ws.ACQUIRE_TOKEN_OVERALL_SUCCESS,extraInfo:pC(e,t)})}function bI(e,t,n){const s=pC(e,t),o=e.errors[e.errors.length-1];ua({authWorkflowAccountType:n,apiName:n==="microsoft"?Cr.ACQUIRE_TOKEN_OVERALL_FAILURE:ws.ACQUIRE_TOKEN_OVERALL_FAILURE,errorType:(o==null?void 0:o.errorType)??"unknown",errorMessage:(o==null?void 0:o.errorMessage)??"unknown error",extraInfo:{...s,eventInfo_exitReason:e.exitReason}})}function xI(e,t,n){const s=pC(e,t);ua({authWorkflowAccountType:n,apiName:n==="microsoft"?Cr.ACQUIRE_TOKEN_TIMEOUT:ws.ACQUIRE_TOKEN_TIMEOUT,errorType:"RequestTimeoutError",errorMessage:`Token acquisition timed out on attempt ${e.attemptCount}`,extraInfo:{...s,eventInfo_totalDuration:e.endTime-e.startTime}})}function yQ(e){const t=e instanceof Error?e.message:String(e);D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"GraphAPITimeout",eventInfo_errorMessage:t,eventInfo_details:"Student status check failed or timed out"}})}function P1(){return typeof document<"u"&&document.visibilityState==="hidden"}async function bQ(e){Ws("reauthAcquireTokenStartTime",Date.now().toString()),await CI({apiName:Cr.REAUTH_ACQUIRETOKENREDIRECT_START,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_errorMessage:e.errorMessage,eventInfo_correlationId:e.correlationId}})}function xQ(){const e=jn("reauthAcquireTokenStartTime"),t=Date.now();if(e){const n=t-parseInt(e,10);Ws("reauthAcquireTokenStartTime",""),Uo({apiName:Cr.REAUTH_ACQUIRETOKENREDIRECT_SUCCESS,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_duration:n}})}}function SQ(e){Uo({apiName:Cr.REAUTH_POPUP_SHOW,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_errorMessage:e}})}async function EQ(){Ws("retrieveLoginWithLoginHintStartTime",Date.now().toString()),await CI({apiName:Cr.RETRIEVE_LOGIN_WITH_LOGIN_HINT_START,authWorkflowAccountType:"microsoft"})}function wQ(){const e=jn("retrieveLoginWithLoginHintStartTime"),t=Date.now();if(e){const n=t-parseInt(e,10);Ws("retrieveLoginWithLoginHintStartTime",""),Uo({apiName:Cr.RETRIEVE_LOGIN_WITH_LOGIN_HINT_SUCCESS,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_duration:n}})}}var Ed,Wr,Wc,tr;class zi{constructor(t,n){jt(this,Ed);jt(this,Wr,null);jt(this,Wc);jt(this,tr,null);vt(this,Ed,t),vt(this,Wc,n)}async get(t){return(ue(this,tr)===null||ue(this,Wc)&&(!ue(this,Wr)||ue(this,Wr)<Date.now()-ue(this,Wc)))&&(vt(this,tr,ue(this,Ed).call(this,t)),vt(this,Wr,Date.now())),ue(this,tr)}set(t){vt(this,tr,t),vt(this,Wr,Date.now())}reset(){vt(this,tr,null),vt(this,Wr,null)}get isInstantiated(){return ue(this,tr)!==null}}Ed=new WeakMap,Wr=new WeakMap,Wc=new WeakMap,tr=new WeakMap;function Jd(e){return new Promise(t=>{setTimeout(t,e)})}class Xd extends Error{constructor(n,s){super(s??`Request timed out after ${n}ms`);O(this,"name","RequestTimeoutError");O(this,"timeoutMs");this.timeoutMs=n,Object.setPrototypeOf(this,Xd.prototype)}}async function IQ(e,t){const n=new AbortController,s=setTimeout(()=>{n.abort()},t);try{const o=await e(n);return clearTimeout(s),o}catch(o){throw clearTimeout(s),n.signal.aborted||o instanceof Error&&o.name==="AbortError"?new Xd(t):o}}async function SI(e,t,n,s,o){let r=s!==void 0&&n!==void 0?t*s**n:t,a;const i=new Promise((d,m)=>{a=setTimeout(()=>{m(new Xd(r))},r)}),u=e().then(d=>(clearTimeout(a),d)).catch(d=>{throw clearTimeout(a),d});return Promise.race([u,i])}function _Q(e){return e instanceof Xd}const TQ={maxRetries:2,initialDelayMs:100,maxDelayMs:500,backoffFactor:2,jitterFactor:.1};function AQ(e){return e instanceof Error?{errorType:e.name,errorMessage:e.message}:{errorType:"Unknown",errorMessage:String(e)}}function kQ(e,t,n,s){const o=e.maxDurationMs!==void 0&&s>=e.maxDurationMs;return n>e.maxRetries?{shouldExit:!0,exitReason:"maxRetriesReached"}:o?{shouldExit:!0,exitReason:"maxDurationReached"}:e.shouldRetry&&!e.shouldRetry(t)?{shouldExit:!0,exitReason:"shouldRetryFalse"}:{shouldExit:!1,exitReason:null}}function MQ(e,t){const n=t.jitterFactor?e*t.jitterFactor*(Math.random()*2-1):0,s=e+n;return Math.min(Math.max(s,0),t.maxDelayMs)}async function em(e,t={}){var u,d,m,f;const n={...TQ,...t},s=performance.now();let o=n.initialDelayMs,r=0;const a=[],i=[];for(let p=0;p<=n.maxRetries;p+=1)try{const g=await e(p),C=performance.now();return(u=n.onSuccess)==null||u.call(n,{attemptCount:p+1,delayTimings:i,startTime:s,endTime:C,errors:a}),g}catch(g){r=p+1,a.push(AQ(g));const C=performance.now(),v=_Q(g);if(v&&n.onTimeout&&n.onTimeout({attemptCount:p+1,delayTimings:i,startTime:s,endTime:C,errors:a}),p===n.maxRetries)throw(d=n.onFailure)==null||d.call(n,{attemptCount:p+1,delayTimings:i,startTime:s,endTime:C,errors:a,exitReason:v?"requestTimeout":"maxRetriesReached"}),g;const b=C-s,{shouldExit:y,exitReason:E}=kQ(n,g,r,b);if(y)throw(m=n.onFailure)==null||m.call(n,{attemptCount:p+1,delayTimings:i,startTime:s,endTime:C,errors:a,exitReason:E}),g;let x=MQ(o,n);if(n.maxDurationMs!==void 0){const A=n.maxDurationMs-b;if(A<=0)throw(f=n.onFailure)==null||f.call(n,{attemptCount:p+1,delayTimings:i,startTime:s,endTime:C,errors:a,exitReason:"maxDurationReached"}),g;x=Math.min(x,A)}const I=performance.now();await Jd(x);const T=performance.now()-I;i.push(T),o=Math.min(o*n.backoffFactor,n.maxDelayMs)}throw new Error("Unexpected end of retry loop")}const Oo=new zi(NQ);async function NQ(){fI({apiName:ws.INITIALIZE_START,providerType:"auth0"});const e=await XL(fY());pI({apiName:ws.INITIALIZE_END,providerType:"auth0"});const t=new Map([["on",null],["off",null],["cache-only",null]]);async function n(r,a){const i=performance.now();Uo({authWorkflowAccountType:a,apiName:ws.ACQUIRE_TOKEN_START});const u=tY();try{if(!u){const p=await e.getTokenSilently(r),g=performance.now();return po({feature:"auth0SdkUsage",scenario:"getAuth0AccessToken",duration:g-i,customData:JSON.stringify({cacheMode:r.cacheMode??"on"})}),p}const d={...Dw,shouldRetry:p=>!(p instanceof yb&&p.error==="login_required"),onSuccess:p=>yI(p,"graph",a??"google"),onFailure:p=>bI(p,"graph",a??"google"),onTimeout:p=>xI(p,"graph",a??"google")},m=await em((p=0)=>SI(()=>e.getTokenSilently(r),CY,p,bY),d),f=performance.now();return po({feature:"auth0SdkUsage",scenario:"getAuth0AccessToken",duration:f-i,customData:JSON.stringify({cacheMode:r.cacheMode??"on"})}),m}catch(d){d instanceof yb?(o({options:r,startTime:i,authWorkflowAccountType:a,errorType:d.error,errorMessage:d.error_description,exception:d.stack}),d.error==="login_required"&&at(qr,{reason:"token-expired",provider:"auth0"})):d instanceof Error?o({options:r,startTime:i,authWorkflowAccountType:a,errorType:d.name,errorMessage:d.message,exception:d.stack}):o({options:r,startTime:i,authWorkflowAccountType:a,errorType:"unknown",errorMessage:`${d}`});return}}async function s(r){const a=await e.getUser();if(!a)return;const i=a.sub&&a.sub.startsWith("google")?"google":"apple",u=r.cacheMode??"on",d=t.get(u);if(!d){const m=n(r,i);t.set(u,m);const f=await m;return t.set(u,null),f}return d}function o(r){const{startTime:a,options:i,authWorkflowAccountType:u,errorType:d,errorMessage:m,exception:f}=r;ua({authWorkflowAccountType:u,apiName:ws.ACQUIRE_TOKEN_FAILURE,errorType:d,errorMessage:m,errorExtraInfo:{eventInfo_providerType:"auth0",eventInfo_exception:f??"",cacheMode:i.cacheMode??"on",duration:performance.now()-a}})}return{auth0:e,getAuth0AccessToken:s}}function hC(e){const t=e.split(".")[1];if(t===void 0)return;const n=t.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(n).split("").map(o=>`%${`00${o.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));try{const o=JSON.parse(s);return sY.parse(o)}catch{return}}async function RQ(e,t){const{getAuth0AccessToken:n}=await Oo.get(),{authorizationParams:s}=I1(),o={...s,dob:e,ctry:t},r=await n({authorizationParams:o,cacheMode:"off"});if(!r)return;const a=hC(r);if(a)return a}async function PQ(){const{getAuth0AccessToken:e}=await Oo.get(),t=await e(I1());if(!t)return;const n=hC(t);if(n){if(n.sub.startsWith("google"))return"Google";if(n.sub.startsWith("apple"))return"Apple"}}function LQ(e){switch(e){case"apple":return"Apple";case"google":return"Google";case"msa":return"MSA";default:return}}function OQ(){const e=wt(Xf,h());return XK()&&(!e||!e.startsWith("3."))}const k2=new BroadcastChannel("cp.broadcast");class DQ{constructor(){O(this,"hasTrackedRedirectError",!1);O(this,"CODE_RE",/[?&]code=[^&]+/);O(this,"STATE_RE",/[?&]state=[^&]+/);O(this,"ERROR_RE",/[?&]error=[^&]+/)}async handleRedirectWithoutAccount(){try{const{auth0:t}=await Oo.get();if(this.hasAuthParams()){const n=performance.now();await t.handleRedirectCallback();const s=performance.now();po({feature:"auth0SdkUsage",scenario:"handleRedirect",duration:s-n});const o=await t.getUser();if(!o)return;const r=o.sub?this.getTokenType(o.sub):void 0;gI({apiName:ws.LOGIN_SUCCESS,authWorkflowAccountType:r}),k2.postMessage({eventName:"auth0.accountAdded"})}}catch(t){this.trackRedirectErrorOncePerSession(t)}}async getCurrentActiveUserAccount(){const{auth0:t}=await Oo.get(),n=await t.getUser();if(!n)return null;const{sub:s}=n;return s?{id:s,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(s)}:null}async logIn(t){const{connection:n}=t;if(!n)throw new Error("connection in LoginOpts are required");const{auth0:s}=await Oo.get();return hI({apiName:ws.LOGIN_START,authWorkflowAccountType:t.connection??void 0}),s.loginWithRedirect({authorizationParams:{...pY().authorizationParams,connection:this.getConnectionFromTokenType(n)}})}async logOut(){const{auth0:t}=await Oo.get(),n=await t.getUser(),s=n&&n.sub?this.getTokenType(n.sub):void 0;try{await t.logout({logoutParams:{returnTo:window.location.origin}}),k2.postMessage({eventName:"auth0.accountRemoved"}),vI({apiName:ws.LOGOUT_SUCCESS,providerType:"auth0"})}catch(o){ua({authWorkflowAccountType:s,apiName:ws.LOGOUT_FAILURE,errorMessage:`${o}`,errorExtraInfo:{eventInfo_providerType:"auth0"}}),console.error("Auth0 logout failed:",o)}}async getAuthToken(t="login"){if(t!=="graph")try{const{auth0:n,getAuth0AccessToken:s}=await Oo.get(),o=await s(I1());if(!o)return;const r=await n.getUser();if(r){const a=r.sub,i=this.getTokenType(a);return{accessToken:o,tokenType:i}}}catch{return}}async getUserInfo(){const{auth0:t}=await Oo.get(),n=await t.getUser();if(n)return{mail:n.email??"",givenName:n.given_name??"",surname:n.surname??"",imgSrc:n.picture,isStudent:!1}}async getUserInfoFromToken(t){const n=hC(t);if(!n)return;const{email:s,name:o}=n;return{mail:s,givenName:o.split(" ")[0]??"",surname:"",imgSrc:"",isStudent:!1}}supportsTokenType(t){return t==="apple"||t==="google"}getTokenType(t){return t.startsWith("google")?"google":"apple"}getAccountType(t){return t.startsWith("google")?"Google":"Apple"}getConnectionFromTokenType(t){return t==="apple"?"apple":"google-oauth2"}hasAuthParams(t=window.location.search){return(this.CODE_RE.test(t)||this.ERROR_RE.test(t))&&this.STATE_RE.test(t)}trackRedirectErrorOncePerSession(t){this.hasTrackedRedirectError||(D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"auth0HandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${t}`}}),ua({apiName:ws.LOGIN_FAILURE,errorExtraInfo:{eventInfo_providerType:"auth0"},errorMessage:`${t}`})),this.hasTrackedRedirectError=!0}}var M2=function(e,t){return M2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},M2(e,t)};function hwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");M2(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var B4=function(){return B4=Object.assign||function(t){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B4.apply(this,arguments)};function Nt(e,t,n,s){function o(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function i(m){try{d(s.next(m))}catch(f){a(f)}}function u(m){try{d(s.throw(m))}catch(f){a(f)}}function d(m){m.done?r(m.value):o(m.value).then(i,u)}d((s=s.apply(e,t||[])).next())})}function gwe(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,o,r,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=i(0),a.throw=i(1),a.return=i(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function i(d){return function(m){return u([d,m])}}function u(d){if(s)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(s=1,o&&(r=d[0]&2?o.return:d[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,d[1])).done)return r;switch(o=0,r&&(d=[d[0]&2,r.value]),d[0]){case 0:case 1:r=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){n.label=d[1];break}if(d[0]===6&&n.label<r[1]){n.label=r[1],r=d;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(d);break}r[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],o=0}finally{s=r=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function vwe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cwe(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),o,r=[],a;try{for(;(t===void 0||t-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(i){a={error:i}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return r}function ywe(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,r;s<o;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}var ys;(function(e){e.GET="GET",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"})(ys||(ys={}));const jQ="v1.0",FQ="https://graph.microsoft.com/",UQ=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class bi extends Error{static setGraphClientError(t){let n;return t instanceof Error?n=t:(n=new bi,n.customError=t),n}constructor(t){super(t),Object.setPrototypeOf(this,bi.prototype)}}const BQ=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],VQ=e=>{const t=r=>r.replace(/\/+$/,""),n=r=>r.replace(/^\/+/,""),s=(r,a)=>[t(r),n(a)].join("/");return Array.prototype.slice.call(e).reduce(s)},bg=e=>{const t=e&&e.constructor&&e.constructor.name;if(t==="Buffer"||t==="Blob"||t==="File"||t==="FormData"||typeof e=="string")return e;if(t==="ArrayBuffer")e=Buffer.from(e);else if(t==="Int8Array"||t==="Int16Array"||t==="Int32Array"||t==="Uint8Array"||t==="Uint16Array"||t==="Uint32Array"||t==="Uint8ClampedArray"||t==="Float32Array"||t==="Float64Array"||t==="DataView")e=Buffer.from(e.buffer);else try{e=JSON.stringify(e)}catch{throw new Error("Unable to stringify the content")}return e},EI=e=>II(e),wI=(e,t)=>(t.forEach(n=>HQ(n)),II(e,t)),II=(e,t=UQ)=>{if(e=e.toLowerCase(),e.indexOf("https://")!==-1){e=e.replace("https://","");const n=e.indexOf(":"),s=e.indexOf("/");let o="";if(s!==-1)return n!==-1&&n<s?(o=e.substring(0,n),t.has(o)):(o=e.substring(0,s),t.has(o))}return!1},HQ=e=>{if(e.indexOf("/")!==-1)throw new bi("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class xi{constructor(t=[]){this.middlewareOptions=new Map;for(const n of t){const s=n.constructor;this.middlewareOptions.set(s,n)}}getMiddlewareOptions(t){return this.middlewareOptions.get(t)}setMiddlewareOptions(t,n){this.middlewareOptions.set(t,n)}}const zQ=()=>{let e="";for(let t=0;t<32;t++)(t===8||t===12||t===16||t===20)&&(e+="-"),e+=Math.floor(Math.random()*16).toString(16);return e},_I=(e,t,n)=>{let s=null;if(typeof Request<"u"&&e instanceof Request)s=e.headers.get(n);else if(typeof t<"u"&&t.headers!==void 0)if(typeof Headers<"u"&&t.headers instanceof Headers)s=t.headers.get(n);else if(t.headers instanceof Array){const o=t.headers;for(let r=0,a=o.length;r<a;r++)if(o[r][0]===n){s=o[r][1];break}}else t.headers[n]!==void 0&&(s=t.headers[n]);return s},TI=(e,t,n,s)=>{if(typeof Request<"u"&&e instanceof Request)e.headers.set(n,s);else if(typeof t<"u")if(t.headers===void 0)t.headers=new Headers({[n]:s});else if(typeof Headers<"u"&&t.headers instanceof Headers)t.headers.set(n,s);else if(t.headers instanceof Array){let o=0;const r=t.headers.length;for(;o<r;o++){const a=t.headers[o];if(a[0]===n){a[1]=s;break}}o===r&&t.headers.push([n,s])}else Object.assign(t.headers,{[n]:s})},AI=(e,t,n,s)=>{typeof Request<"u"&&e instanceof Request?e.headers.append(n,s):typeof t<"u"&&(t.headers===void 0?t.headers=new Headers({[n]:s}):typeof Headers<"u"&&t.headers instanceof Headers?t.headers.append(n,s):t.headers instanceof Array?t.headers.push([n,s]):t.headers===void 0?t.headers={[n]:s}:t.headers[n]===void 0?t.headers[n]=s:t.headers[n]+=`, ${s}`)},GQ=(e,t)=>Nt(void 0,void 0,void 0,function*(){const n=t.headers.get("Content-Type")?yield t.blob():yield Promise.resolve(void 0),{method:s,headers:o,referrer:r,referrerPolicy:a,mode:i,credentials:u,cache:d,redirect:m,integrity:f,keepalive:p,signal:g}=t;return new Request(e,{method:s,headers:o,body:n,referrer:r,referrerPolicy:a,mode:i,credentials:u,cache:d,redirect:m,integrity:f,keepalive:p,signal:g})});class WQ{constructor(t,n){this.authenticationProvider=t,this.authenticationProviderOptions=n}}var ll;(function(e){e[e.NONE=0]="NONE",e[e.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",e[e.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",e[e.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(ll||(ll={}));class Xr{constructor(){this.featureUsage=ll.NONE}static updateFeatureUsageFlag(t,n){let s;t.middlewareControl instanceof xi?s=t.middlewareControl.getMiddlewareOptions(Xr):t.middlewareControl=new xi,typeof s>"u"&&(s=new Xr,t.middlewareControl.setMiddlewareOptions(Xr,s)),s.setFeatureUsage(n)}setFeatureUsage(t){this.featureUsage=this.featureUsage|t}getFeatureUsage(){return this.featureUsage.toString(16)}}class id{constructor(t){this.authenticationProvider=t}execute(t){return Nt(this,void 0,void 0,function*(){const n=typeof t.request=="string"?t.request:t.request.url;if(EI(n)||t.customHosts&&wI(n,t.customHosts)){let s;t.middlewareControl instanceof xi&&(s=t.middlewareControl.getMiddlewareOptions(WQ));let o,r;s&&(o=s.authenticationProvider,r=s.authenticationProviderOptions),o||(o=this.authenticationProvider);const i=`Bearer ${yield o.getAccessToken(r)}`;AI(t.request,t.options,id.AUTHORIZATION_HEADER,i),Xr.updateFeatureUsageFlag(t,ll.AUTHENTICATION_HANDLER_ENABLED)}else t.options.headers&&delete t.options.headers[id.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(t)})}setNext(t){this.nextMiddleware=t}}id.AUTHORIZATION_HEADER="Authorization";class $Q{execute(t){return Nt(this,void 0,void 0,function*(){t.response=yield fetch(t.request,t.options)})}}class Kt{constructor(t=Kt.DEFAULT_DELAY,n=Kt.DEFAULT_MAX_RETRIES,s=Kt.defaultShouldRetry){if(t>Kt.MAX_DELAY&&n>Kt.MAX_MAX_RETRIES){const o=new Error(`Delay and MaxRetries should not be more than ${Kt.MAX_DELAY} and ${Kt.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(t>Kt.MAX_DELAY){const o=new Error(`Delay should not be more than ${Kt.MAX_DELAY}`);throw o.name="MaxLimitExceeded",o}else if(n>Kt.MAX_MAX_RETRIES){const o=new Error(`MaxRetries should not be more than ${Kt.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(t<0&&n<0){const o=new Error("Delay and MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}else if(t<0){const o=new Error("Delay should not be negative");throw o.name="MinExpectationNotMet",o}else if(n<0){const o=new Error("MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}this.delay=Math.min(t,Kt.MAX_DELAY),this.maxRetries=Math.min(n,Kt.MAX_MAX_RETRIES),this.shouldRetry=s}getMaxDelay(){return Kt.MAX_DELAY}}Kt.DEFAULT_DELAY=3;Kt.DEFAULT_MAX_RETRIES=3;Kt.MAX_DELAY=180;Kt.MAX_MAX_RETRIES=10;Kt.defaultShouldRetry=()=>!0;class ea{constructor(t=new Kt){this.options=t}isRetry(t){return ea.RETRY_STATUS_CODES.indexOf(t.status)!==-1}isBuffered(t,n){const s=typeof t=="string"?n.method:t.method;return!((s===ys.PUT||s===ys.PATCH||s===ys.POST)&&_I(t,n,"Content-Type")==="application/octet-stream")}getDelay(t,n,s){const o=()=>Number(Math.random().toFixed(3)),r=t.headers!==void 0?t.headers.get(ea.RETRY_AFTER_HEADER):null;let a;return r!==null?Number.isNaN(Number(r))?a=Math.round((new Date(r).getTime()-Date.now())/1e3):a=Number(r):a=n>=2?this.getExponentialBackOffTime(n)+s+o():s+o(),Math.min(a,this.options.getMaxDelay()+o())}getExponentialBackOffTime(t){return Math.round(1/2*(Math.pow(2,t)-1))}sleep(t){return Nt(this,void 0,void 0,function*(){const n=t*1e3;return new Promise(s=>setTimeout(s,n))})}getOptions(t){let n;return t.middlewareControl instanceof xi&&(n=t.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof n>"u"&&(n=Object.assign(new Kt,this.options)),n}executeWithRetry(t,n,s){return Nt(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(t),n<s.maxRetries&&this.isRetry(t.response)&&this.isBuffered(t.request,t.options)&&s.shouldRetry(s.delay,n,t.request,t.options,t.response)){++n,TI(t.request,t.options,ea.RETRY_ATTEMPT_HEADER,n.toString());const o=this.getDelay(t.response,n,s.delay);return yield this.sleep(o),yield this.executeWithRetry(t,n,s)}else return})}execute(t){return Nt(this,void 0,void 0,function*(){const s=this.getOptions(t);return Xr.updateFeatureUsageFlag(t,ll.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(t,0,s)})}setNext(t){this.nextMiddleware=t}}ea.RETRY_STATUS_CODES=[429,503,504];ea.RETRY_ATTEMPT_HEADER="Retry-Attempt";ea.RETRY_AFTER_HEADER="Retry-After";class Gs{constructor(t=Gs.DEFAULT_MAX_REDIRECTS,n=Gs.defaultShouldRedirect){if(t>Gs.MAX_MAX_REDIRECTS){const s=new Error(`MaxRedirects should not be more than ${Gs.MAX_MAX_REDIRECTS}`);throw s.name="MaxLimitExceeded",s}if(t<0){const s=new Error("MaxRedirects should not be negative");throw s.name="MinExpectationNotMet",s}this.maxRedirects=t,this.shouldRedirect=n}}Gs.DEFAULT_MAX_REDIRECTS=5;Gs.MAX_MAX_REDIRECTS=20;Gs.defaultShouldRedirect=()=>!0;class xs{constructor(t=new Gs){this.options=t}isRedirect(t){return xs.REDIRECT_STATUS_CODES.indexOf(t.status)!==-1}hasLocationHeader(t){return t.headers.has(xs.LOCATION_HEADER)}getLocationHeader(t){return t.headers.get(xs.LOCATION_HEADER)}isRelativeURL(t){return t.indexOf("://")===-1}shouldDropAuthorizationHeader(t,n){const s=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,o=s.exec(t);let r,a;o!==null&&(r=o[0]);const i=s.exec(n);return i!==null&&(a=i[0]),typeof r<"u"&&typeof a<"u"&&r!==a}updateRequestUrl(t,n){return Nt(this,void 0,void 0,function*(){n.request=typeof n.request=="string"?t:yield GQ(t,n.request)})}getOptions(t){let n;return t.middlewareControl instanceof xi&&(n=t.middlewareControl.getMiddlewareOptions(Gs)),typeof n>"u"&&(n=Object.assign(new Gs,this.options)),n}executeWithRedirect(t,n,s){return Nt(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(t);const o=t.response;if(n<s.maxRedirects&&this.isRedirect(o)&&this.hasLocationHeader(o)&&s.shouldRedirect(o)){if(++n,o.status===xs.STATUS_CODE_SEE_OTHER)t.options.method=ys.GET,delete t.options.body;else{const r=this.getLocationHeader(o);!this.isRelativeURL(r)&&this.shouldDropAuthorizationHeader(o.url,r)&&delete t.options.headers[xs.AUTHORIZATION_HEADER],yield this.updateRequestUrl(r,t)}yield this.executeWithRedirect(t,n,s)}else return})}execute(t){return Nt(this,void 0,void 0,function*(){const s=this.getOptions(t);return t.options.redirect=xs.MANUAL_REDIRECT,Xr.updateFeatureUsageFlag(t,ll.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(t,0,s)})}setNext(t){this.nextMiddleware=t}}xs.REDIRECT_STATUS_CODES=[301,302,303,307,308];xs.STATUS_CODE_SEE_OTHER=303;xs.LOCATION_HEADER="Location";xs.AUTHORIZATION_HEADER="Authorization";xs.MANUAL_REDIRECT="manual";const qQ="3.0.7";class bs{execute(t){return Nt(this,void 0,void 0,function*(){const n=typeof t.request=="string"?t.request:t.request.url;if(EI(n)||t.customHosts&&wI(n,t.customHosts)){let s=_I(t.request,t.options,bs.CLIENT_REQUEST_ID_HEADER);s||(s=zQ(),TI(t.request,t.options,bs.CLIENT_REQUEST_ID_HEADER,s));let o=`${bs.PRODUCT_NAME}/${qQ}`,r;if(t.middlewareControl instanceof xi&&(r=t.middlewareControl.getMiddlewareOptions(Xr)),r){const a=r.getFeatureUsage();o+=` (${bs.FEATURE_USAGE_STRING}=${a})`}AI(t.request,t.options,bs.SDK_VERSION_HEADER,o)}else delete t.options.headers[bs.CLIENT_REQUEST_ID_HEADER],delete t.options.headers[bs.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(t)})}setNext(t){this.nextMiddleware=t}}bs.CLIENT_REQUEST_ID_HEADER="client-request-id";bs.SDK_VERSION_HEADER="SdkVersion";bs.PRODUCT_NAME="graph-js";bs.FEATURE_USAGE_STRING="featureUsage";function ZQ(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var V4;(function(e){e[e.MANUAL=0]="MANUAL",e[e.RANDOM=1]="RANDOM"})(V4||(V4={}));var Po;(function(e){e.ARRAYBUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.RAW="raw",e.STREAM="stream",e.TEXT="text"})(Po||(Po={}));var N2;(function(e){e.TEXT_HTML="text/html",e.TEXT_XML="text/xml",e.APPLICATION_XML="application/xml",e.APPLICATION_XHTML="application/xhtml+xml"})(N2||(N2={}));var cp;(function(e){e.TEXT_PLAIN="text/plain",e.APPLICATION_JSON="application/json"})(cp||(cp={}));var lp;(function(e){e.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",e.IMAGE="^image\\/.+"})(lp||(lp={}));class Lu{static parseDocumentResponse(t,n){return typeof DOMParser<"u"?new Promise((s,o)=>{t.text().then(r=>{try{const i=new DOMParser().parseFromString(r,n);s(i)}catch(a){o(a)}})}):Promise.resolve(t.body)}static convertResponse(t,n){return Nt(this,void 0,void 0,function*(){if(t.status===204)return Promise.resolve();let s;const o=t.headers.get("Content-type");switch(n){case Po.ARRAYBUFFER:s=yield t.arrayBuffer();break;case Po.BLOB:s=yield t.blob();break;case Po.DOCUMENT:s=yield Lu.parseDocumentResponse(t,N2.TEXT_XML);break;case Po.JSON:s=yield t.json();break;case Po.STREAM:s=yield Promise.resolve(t.body);break;case Po.TEXT:s=yield t.text();break;default:if(o!==null){const r=o.split(";")[0];new RegExp(lp.DOCUMENT).test(r)?s=yield Lu.parseDocumentResponse(t,r):new RegExp(lp.IMAGE).test(r)?s=t.blob():r===cp.TEXT_PLAIN?s=yield t.text():r===cp.APPLICATION_JSON?s=yield t.json():s=Promise.resolve(t.body)}else s=Promise.resolve(t.body);break}return s})}static getResponse(t,n,s){return Nt(this,void 0,void 0,function*(){if(n===Po.RAW)return Promise.resolve(t);{const o=yield Lu.convertResponse(t,n);if(t.ok)if(typeof s=="function")s(null,o);else return o;else throw o}})}}class KQ{constructor(t){this.provider=t}getAccessToken(){return Nt(this,void 0,void 0,function*(){return new Promise((t,n)=>{this.provider((s,o)=>Nt(this,void 0,void 0,function*(){if(o)t(o);else{if(!s){const a="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";s=new bi(a)}const r=yield bi.setGraphClientError(s);n(r)}}))})})}}class Ou extends Error{constructor(t=-1,n,s){super(n||s&&s.message),Object.setPrototypeOf(this,Ou.prototype),this.statusCode=t,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=s?s.stack:this.stack}}class up{static constructError(t,n,s){const o=new Ou(n,"",t);return t.name!==void 0&&(o.code=t.name),o.body=t.toString(),o.date=new Date,o.headers=s==null?void 0:s.headers,o}static constructErrorFromResponse(t,n,s){const o=t.error,r=new Ou(n,o.message);return r.code=o.code,o.innerError!==void 0&&(r.requestId=o.innerError["request-id"],r.date=new Date(o.innerError.date)),r.body=JSON.stringify(o),r.headers=s==null?void 0:s.headers,r}static getError(t=null,n=-1,s,o){return Nt(this,void 0,void 0,function*(){let r;if(t&&t.error?r=up.constructErrorFromResponse(t,n,o):t instanceof Error?r=up.constructError(t,n,o):(r=new Ou(n),r.body=t),typeof s=="function")s(r,null);else return r})}}class YQ{constructor(t,n,s){this.parsePath=o=>{if(o.indexOf("https://")!==-1){o=o.replace("https://","");const a=o.indexOf("/");a!==-1&&(this.urlComponents.host="https://"+o.substring(0,a),o=o.substring(a+1,o.length));const i=o.indexOf("/");i!==-1&&(this.urlComponents.version=o.substring(0,i),o=o.substring(i+1,o.length))}o.charAt(0)==="/"&&(o=o.substr(1));const r=o.indexOf("?");if(r===-1)this.urlComponents.path=o;else{this.urlComponents.path=o.substr(0,r);const a=o.substring(r+1,o.length).split("&");for(const i of a)this.parseQueryParameter(i)}},this.httpClient=t,this.config=n,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(s)}addCsvQueryParameter(t,n,s){this.urlComponents.oDataQueryParams[t]=this.urlComponents.oDataQueryParams[t]?this.urlComponents.oDataQueryParams[t]+",":"";let o=[];s.length>1&&typeof n=="string"?o=Array.prototype.slice.call(s):typeof n=="string"?o.push(n):o=o.concat(n),this.urlComponents.oDataQueryParams[t]+=o.join(",")}buildFullUrl(){const t=VQ([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(t),t}createQueryString(){const t=this.urlComponents,n=[];if(Object.keys(t.oDataQueryParams).length!==0)for(const s in t.oDataQueryParams)Object.prototype.hasOwnProperty.call(t.oDataQueryParams,s)&&n.push(s+"="+t.oDataQueryParams[s]);if(Object.keys(t.otherURLQueryParams).length!==0)for(const s in t.otherURLQueryParams)Object.prototype.hasOwnProperty.call(t.otherURLQueryParams,s)&&n.push(s+"="+t.otherURLQueryParams[s]);if(t.otherURLQueryOptions.length!==0)for(const s of t.otherURLQueryOptions)n.push(s);return n.length>0?"?"+n.join("&"):""}parseQueryParameter(t){if(typeof t=="string")if(t.charAt(0)==="?"&&(t=t.substring(1)),t.indexOf("&")!==-1){const n=t.split("&");for(const s of n)this.parseQueryParamenterString(s)}else this.parseQueryParamenterString(t);else if(t.constructor===Object)for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.setURLComponentsQueryParamater(n,t[n]);return this}parseQueryParamenterString(t){if(this.isValidQueryKeyValuePair(t)){const n=t.indexOf("="),s=t.substring(0,n),o=t.substring(n+1);this.setURLComponentsQueryParamater(s,o)}else this.urlComponents.otherURLQueryOptions.push(t)}setURLComponentsQueryParamater(t,n){if(BQ.indexOf(t)!==-1){const s=this.urlComponents.oDataQueryParams[t],o=s&&(t==="$expand"||t==="$select"||t==="$orderby");this.urlComponents.oDataQueryParams[t]=o?s+","+n:n}else this.urlComponents.otherURLQueryParams[t]=n}isValidQueryKeyValuePair(t){const n=t.indexOf("=");return!(n===-1||t.indexOf("(")!==-1&&t.indexOf("(")<n)}updateRequestOptions(t){const n=Object.assign({},t.headers);if(this.config.fetchOptions!==void 0){const s=Object.assign({},this.config.fetchOptions);Object.assign(t,s),typeof this.config.fetchOptions.headers!==void 0&&(t.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(t,this._options),t.headers!==void 0&&Object.assign(n,t.headers),Object.assign(n,this._headers),t.headers=n}send(t,n,s){var o;return Nt(this,void 0,void 0,function*(){let r;const a=new xi(this._middlewareOptions);this.updateRequestOptions(n);const i=(o=this.config)===null||o===void 0?void 0:o.customHosts;try{return r=(yield this.httpClient.sendRequest({request:t,options:n,middlewareControl:a,customHosts:i})).response,yield Lu.getResponse(r,this._responseType,s)}catch(u){if(u instanceof bi)throw u;let d;throw r&&(d=r.status),yield up.getError(u,d,s,r)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const t=Object.keys(this._headers);for(const n of t)if(n.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(t,n){return this._headers[t]=n,this}headers(t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._headers[n]=t[n]);return this}option(t,n){return this._options[t]=n,this}options(t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._options[n]=t[n]);return this}middlewareOptions(t){return this._middlewareOptions=t,this}version(t){return this.urlComponents.version=t,this}responseType(t){return this._responseType=t,this}select(t){return this.addCsvQueryParameter("$select",t,arguments),this}expand(t){return this.addCsvQueryParameter("$expand",t,arguments),this}orderby(t){return this.addCsvQueryParameter("$orderby",t,arguments),this}filter(t){return this.urlComponents.oDataQueryParams.$filter=t,this}search(t){return this.urlComponents.oDataQueryParams.$search=t,this}top(t){return this.urlComponents.oDataQueryParams.$top=t,this}skip(t){return this.urlComponents.oDataQueryParams.$skip=t,this}skipToken(t){return this.urlComponents.oDataQueryParams.$skipToken=t,this}count(t=!0){return this.urlComponents.oDataQueryParams.$count=t.toString(),this}query(t){return this.parseQueryParameter(t)}get(t){return Nt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),s={method:ys.GET};return yield this.send(n,s,t)})}post(t,n){return Nt(this,void 0,void 0,function*(){const s=this.buildFullUrl(),o={method:ys.POST,body:bg(t)};return(t&&t.constructor&&t.constructor.name)==="FormData"?o.headers={}:(this.setHeaderContentType(),o.headers=this._headers),yield this.send(s,o,n)})}create(t,n){return Nt(this,void 0,void 0,function*(){return yield this.post(t,n)})}put(t,n){return Nt(this,void 0,void 0,function*(){const s=this.buildFullUrl();this.setHeaderContentType();const o={method:ys.PUT,body:bg(t)};return yield this.send(s,o,n)})}patch(t,n){return Nt(this,void 0,void 0,function*(){const s=this.buildFullUrl();this.setHeaderContentType();const o={method:ys.PATCH,body:bg(t)};return yield this.send(s,o,n)})}update(t,n){return Nt(this,void 0,void 0,function*(){return yield this.patch(t,n)})}delete(t){return Nt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),s={method:ys.DELETE};return yield this.send(n,s,t)})}del(t){return Nt(this,void 0,void 0,function*(){return yield this.delete(t)})}getStream(t){return Nt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),s={method:ys.GET};return this.responseType(Po.STREAM),yield this.send(n,s,t)})}putStream(t,n){return Nt(this,void 0,void 0,function*(){const s=this.buildFullUrl(),o={method:ys.PUT,headers:{"Content-Type":"application/octet-stream"},body:t};return yield this.send(s,o,n)})}}class kI{constructor(...t){if(!t||!t.length){const n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware(...t)}setMiddleware(...t){t.length>1?this.parseMiddleWareArray(t):this.middleware=t[0]}parseMiddleWareArray(t){t.forEach((n,s)=>{s<t.length-1&&n.setNext(t[s+1])}),this.middleware=t[0]}sendRequest(t){return Nt(this,void 0,void 0,function*(){if(typeof t.request=="string"&&t.options===void 0){const n=new Error;throw n.name="InvalidRequestOptions",n.message="Unable to execute the middleware, Please provide valid options for a request",n}return yield this.middleware.execute(t),t})}}const QQ=()=>typeof process=="object"&&typeof ZQ=="function";class gC{static createWithAuthenticationProvider(t){const n=new id(t),s=new ea(new Kt),o=new bs,r=new $Q;if(n.setNext(s),QQ()){const a=new xs(new Gs);s.setNext(a),a.setNext(o)}else s.setNext(o);return o.setNext(r),gC.createWithMiddleware(n)}static createWithMiddleware(...t){return new kI(...t)}}const JQ=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const e=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw e.name="PolyFillNotAvailable",e}else if(typeof Promise>"u"){const e=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}else if(typeof fetch>"u"){const e=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}return!0};class dp{static init(t){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=s==="authProvider"?new KQ(t[s]):t[s]);return dp.initWithMiddleware(n)}static initWithMiddleware(t){return new dp(t)}constructor(t){this.config={baseUrl:FQ,debugLogging:!1,defaultVersion:jQ},JQ();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(this.config[s]=t[s]);let n;if(t.authProvider!==void 0&&t.middleware!==void 0){const s=new Error;throw s.name="AmbiguityInInitialization",s.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",s}else if(t.authProvider!==void 0)n=gC.createWithAuthenticationProvider(t.authProvider);else if(t.middleware!==void 0)n=new kI(...[].concat(t.middleware));else{const s=new Error;throw s.name="InvalidMiddlewareChain",s.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",s}this.httpClient=n}api(t){return new YQ(this.httpClient,this.config,t)}}const XQ=["CAREERCOACH_STUDENTS","EXCHANGESTANDARD_STUDENT","M365EDU_A3_STUDENT","M365EDU_A3_STUUSEBNFT","M365EDU_A3_STUUSEBNFT_RPA1","M365EDU_A5_STUDENT","M365EDU_A5_STUUSEBNFT","M365EDU_A5_NOPSTNCONF_STUUSEBNFT","OFFICESUBSCRIPTION_STUDENT","ATP_ENTERPRISE_STUDENT","ATP_ENTERPRISE_STUDENTS_USE_BENEFIT","POWER_BI_STANDARD_STUDENT","MCOEV_STUDENT","MEE_STUDENT","STANDARDWOFFPACK_STUDENT","STANDARDWOFFPACK_IW_STUDENT","ENTERPRISEPACKPLUS_STUDENT","ENTERPRISEPREMIUM_STUDENT","WIN10_ENT_A3_STU","MCO_TEAMS_EDU_HS_STUDENT","PROJECT_PROFESSIONAL_STUDENT","PROJECT_P1_STUDENT"];function eJ(e){return dp.init({authProvider:t=>{t(null,e)}})}async function xg(e,t){const n=performance.now(),s=await t;return D.trackEvent({name:"system",data:{eventName:"externalApiResponse",eventInfo_id:e,eventInfo_duration:performance.now()-n,eventInfo_service:"microsoft-graph"}}),s}async function tJ(e){return e.api(lC.graphMeApiSuffix).get()}async function nJ(e){try{const t=await e.api(lC.graphMeImageApiSuffix).get();return URL.createObjectURL(t)}catch{return}}async function sJ(e){const t=pe(Ri);if(ye("aad-student")&&t)try{const n=await e.api(lC.graphMeLicenseDetails).get();return n&&n.value.some(o=>o.skuPartNumber&&XQ.includes(o.skuPartNumber))}catch(n){return console.error("Error checking student status:",n),!1}else return!1}async function H4(e){const t=eJ(e),[n,s,o]=await Promise.all([xg("user",tJ(t)),xg("user_photo",nJ(t)),xg("is_student",sJ(t))]);return{...n,imgSrc:s,isStudent:o}}class oJ{supportsNaa(){return!1}supportsPwBBroker(){return!1}async handleInteractionRequiredError(t,n,s,o){var r;at(sn,null),at(qr,{reason:"token-expired",provider:"microsoft",loginHint:(r=n.account)==null?void 0:r.username,errorMessage:s,correlationId:o})}}class rJ extends oJ{supportsPwBBroker(){return ae.instance().config().useMSALPwBApp??!1}async instantiateMsal(){let t,n,s;if(OQ()){const i=(await V(()=>import("./index-CJGT3s_5.js"),[])).default;window.msal=i;const{PublicClientApplication:u,PairwiseBrokerApplication:d}=i;t=u,n=d,s=oY}else{const a=await V(()=>import("./vendor-XhZj4hnV.js").then(d=>d.ax),[]);window.msal=a;const{PublicClientApplication:i,PairwiseBrokerApplication:u}=a;t=i,n=u,s=rY}const o=this.supportsPwBBroker();fI({apiName:window.msal.EventType.INITIALIZE_START,providerType:"microsoft",extraInfo:{eventInfo_isPwB:o}});let r;return o?(r=new n(s,gY,P4),await r.initialize(),await r.initializeBrokering()):r=await t.createPublicClientApplication(s,P4),pI({apiName:window.msal.EventType.INITIALIZE_END,providerType:"microsoft",extraInfo:{eventInfo_isPwB:o}}),r}}const MI=new zi(aJ);async function aJ(){return new rJ}function iJ(e){return!(window.msal&&e instanceof window.msal.InteractionRequiredAuthError||window.msal&&e instanceof window.msal.AuthError&&(e.errorMessage===xS||parseInt(e.errorCode,10)===mv))}const Ss=new zi(cJ);async function cJ(){const e=await MI.get(),t=await e.instantiateMsal(),n=new Map([["login",null],["graph",null],["oneDrive",null],["decryptionService",null]]);async function s(r,a){var m,f;const i=hY(r),u={account:a,...i,extraQueryParameters:{sus:"1"},tokenQueryParameters:{sus:"1"}},d=eY();try{if(!d)return{accessToken:(await t.acquireTokenSilent(u)).accessToken};const p={...Dw,shouldRetry:C=>iJ(C),onSuccess:C=>yI(C,r,"microsoft"),onFailure:C=>bI(C,r,"microsoft"),onTimeout:C=>xI(C,r,"microsoft")};return await em(async(C=0)=>SI(async()=>({accessToken:(await t.acquireTokenSilent(u)).accessToken}),vY,C,yY),p)}catch(p){if(window.msal&&p instanceof window.msal.InteractionRequiredAuthError){if(D.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenRedirect",eventInfo_requestType:r,eventInfo_traceId:p.traceId,eventInfo_errorMessage:p.errorMessage,eventInfo_errorCode:p.errorCode,eventInfo_correlationId:p.correlationId,eventInfo_timeSinceStartMs:performance.now()-window.appStart}}),nY()&&!e.supportsNaa()){await bQ({correlationId:p.correlationId,errorMessage:p.errorMessage}),await t.acquireTokenRedirect({...Wd(),loginHint:(f=(m=u.account)==null?void 0:m.idTokenClaims)==null?void 0:f.login_hint,account:u.account,prompt:void 0});return}return e.handleInteractionRequiredError(t,u,p.errorMessage,p.correlationId)}if(window.msal&&p instanceof window.msal.AuthError&&(p.errorMessage===xS||parseInt(p.errorCode,10)===mv))throw D.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenUnderaged",eventInfo_requestType:r,eventInfo_errorMessage:p.errorMessage,eventInfo_errorCode:p.errorCode,eventInfo_correlationId:p.correlationId}}),new Error(fv);return}}return{msal:t,getMsalAccessToken:async r=>{const a=t.getActiveAccount();if(!a&&!e.supportsNaa())return;const i=n.get(r);if(!i){const u=s(r,a??void 0);n.set(r,u);const d=await u;return n.set(r,null),d}return i}}}function lJ(e){var n;const t=(n=e.payload)==null?void 0:n.scopes;return Array.isArray(t)?t.some(s=>typeof s!="string"?!1:s==="ConsumerStore.Purchase"||s.endsWith("purchase.create")):!1}function uJ(e){var n,s,o,r,a,i,u,d,m;const t=lJ(e);if(e.eventType===((n=window.msal)==null?void 0:n.EventType.LOGIN_START)){const f=e.payload;hI({apiName:window.msal.EventType.LOGIN_START,authWorkflowAccountType:"microsoft",interactionType:e.interactionType??void 0,correlationId:f.correlationId,prompt:f.prompt,redirectUri:f.redirectUri,extraInfo:{eventInfo_isBrokered:t}})}else if(e.eventType===((s=window.msal)==null?void 0:s.EventType.LOGIN_SUCCESS)||e.eventType===((o=window.msal)==null?void 0:o.EventType.SSO_SILENT_SUCCESS)){const f=e.payload&&"account"in e.payload?e.payload.account:null,p=f?!ta(f.tenantId):void 0,g=e.payload,C=(r=f==null?void 0:f.idTokenClaims)==null?void 0:r.login_hint;C&&Gn(nr,h(),C),gI({apiName:e.eventType,authWorkflowAccountType:"microsoft",interactionType:e.interactionType??void 0,correlationId:g.correlationId,authority:g.authority,isMSA:p,extraInfo:{eventInfo_isBrokered:t}})}else if(e.eventType===((a=window.msal)==null?void 0:a.EventType.LOGOUT_SUCCESS))wt(nr,h())&&Ht(nr),wt(Xf,h())&&Ht(Xf),vI({apiName:window.msal.EventType.LOGOUT_SUCCESS,providerType:"microsoft",extraInfo:{eventInfo_isBrokered:t}});else if(e.eventType===((i=window.msal)==null?void 0:i.EventType.ACQUIRE_TOKEN_START)||e.eventType===((u=window.msal)==null?void 0:u.EventType.ACQUIRE_TOKEN_NETWORK_START)){la("msalAcquireTokenStartTime",Date.now().toString());const f=e.payload;Uo({authWorkflowAccountType:"microsoft",apiName:e.eventType,extraInfo:{eventInfo_interactionType:e.interactionType??void 0,eventInfo_correlationId:f.correlationId,eventInfo_redirectUri:f.redirectUri,eventInfo_cacheLookupPolicy:f.cacheLookupPolicy,eventInfo_prompt:f.prompt,eventInfo_isBrokered:t}})}else if(e.eventType===((d=window.msal)==null?void 0:d.EventType.ACQUIRE_TOKEN_SUCCESS)){const f=Date.now()-parseInt(ur("msalAcquireTokenStartTime")??"0",10);la("msalAcquireTokenStartTime","");const p=e.payload,{account:g}=p,C=(m=g.idTokenClaims)==null?void 0:m.login_hint;C&&Gn(nr,h(),C),Uo({authWorkflowAccountType:"microsoft",apiName:e.eventType,extraInfo:{eventInfo_interactionType:e.interactionType??void 0,eventInfo_correlationId:p.correlationId,eventInfo_expiresOn:p.expiresOn,eventInfo_extExpiresOn:p.extExpiresOn,eventInfo_refreshOn:p.refreshOn,eventInfo_duration:f,eventInfo_fromCache:p.fromCache,eventInfo_isBrokered:t}})}else if(window.msal&&(e.eventType===window.msal.EventType.LOGIN_FAILURE||e.eventType===window.msal.EventType.ACQUIRE_TOKEN_FAILURE||e.eventType===window.msal.EventType.SSO_SILENT_FAILURE||e.eventType===window.msal.EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE||e.eventType===window.msal.EventType.LOGOUT_FAILURE)){let f;e.eventType===window.msal.EventType.ACQUIRE_TOKEN_FAILURE&&(f=Date.now()-parseInt(ur("msalAcquireTokenStartTime")??"0",10)),e.eventType===window.msal.EventType.LOGIN_FAILURE&&Ht(nr);const p=e.error;ua({authWorkflowAccountType:"microsoft",apiName:e.eventType,errorType:(p==null?void 0:p.name)??"",errorMessage:(p==null?void 0:p.message)??"",extraInfo:{eventInfo_isBrokered:t},errorExtraInfo:{eventInfo_correlationId:p==null?void 0:p.correlationId,eventInfo_errorMessage:p==null?void 0:p.errorMessage,eventInfo_errorCode:p==null?void 0:p.errorCode,eventInfo_name:p==null?void 0:p.name,eventInfo_interactionType:e.interactionType??void 0,eventInfo_subError:p==null?void 0:p.subError,eventInfo_duration:f}})}else Uo({authWorkflowAccountType:"microsoft",apiName:e.eventType,extraInfo:{eventInfo_interactionType:e.interactionType??void 0,eventInfo_isBrokered:t}})}function ta(e){return e!==IB}function dJ(e){Uo({apiName:"msal:silentSSOCustomSuccess",authWorkflowAccountType:"microsoft",duration:e.duration,extraInfo:{eventInfo_accountUpdate:e.accountUpdate,eventInfo_accountType:e.accountType,eventInfo_message:e.message}})}function Sg(e){ua({apiName:"msal:silentSsoCustomError",authWorkflowAccountType:"microsoft",errorMessage:e.message,errorCode:e.errorCode})}class mJ{constructor(){O(this,"hasTrackedRedirectError",!1);O(this,"isHandlingRedirect",!1)}async handleRedirectWithoutAccount(){try{const{msal:t}=await Ss.get();this.isHandlingRedirect&&ua({authWorkflowAccountType:"microsoft",apiName:Cr.INTERACTION_IN_PROGRESS,errorType:"interaction_in_progress",errorMessage:"Attempted to call handleRedirectPromise while already handling a redirect"}),this.isHandlingRedirect=!0;try{const n=await t.handleRedirectPromise();n&&(t.setActiveAccount(n.account),wQ(),xQ(),CQ({authWorkflowAccountType:"microsoft",apiName:"msal:reauthSuccess"}))}finally{this.isHandlingRedirect=!1}}catch(t){this.trackRedirectErrorOncePerSession(t)}}async logIn(){var o;const{msal:t}=await Ss.get(),n={...Wd()};Gn(Xf,h(),((o=window.msal)==null?void 0:o.version)??"");const s=this.buildRedirectUri();return s&&(n.redirectUri=s),t.loginRedirect(n)}buildRedirectUri(){const{surfaceQueryParam:t}=ae.instance().config(),n=new URLSearchParams;let s;if(t!=null&&t.useForLoginRedirect)for(const[r,a]of Object.entries(t.params))n.set(r,a);const o=new URLSearchParams(window.location.search).get("back");return o&&n.set("back",o),n.toString()&&(s=`${window.location.origin}?${n}`),s}async logOut(){const{msal:t}=await Ss.get(),n=t.getActiveAccount();await t.logoutRedirect({account:n,onRedirectNavigate:()=>!1}),D.setPicassoId(null)}async getAuthToken(t="login"){return(await Ss.get()).getMsalAccessToken(t)}async getUserInfo(){const t=await this.getAuthToken("graph");if(t)return H4(t.accessToken)}async getUserInfoFromToken(t){return H4(t)}supportsTokenType(t){return t===void 0}trackRedirectErrorOncePerSession(t){this.hasTrackedRedirectError||D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"msalHandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${t}`}}),this.hasTrackedRedirectError=!0}async getAccount(){var o;const{msal:t}=await Ss.get(),n=t.getAllAccounts(),s=t.getActiveAccount();if((n.length>1||n.length===1&&(s==null?void 0:s.homeAccountId)!==((o=n[0])==null?void 0:o.homeAccountId))&&Uo({authWorkflowAccountType:"microsoft",apiName:"msal:getAllAccounts",extraInfo:{eventInfo_accountCount:n.length,eventInfo_accountTypes:n.map(r=>ta(r.tenantId)?"AAD":"MSA")}}),n.length!==0){if(n.length===1)return n[0];if(n.length>1&&s)return s}}async getCurrentActiveUserAccount(){var n;const t=await this.getAccount();return t?{id:((n=t.idTokenClaims)==null?void 0:n.oid)??"",tenantId:t.tenantId,provider:"microsoft",accountType:ta(t.tenantId)?"AAD":"MSA"}:null}async NAAGetTokenAndSetAccount(){var s;const{msal:t}=await Ss.get(),n=await this.getAuthToken();if(n){const o=await this.getAccount();return o?(t.setActiveAccount(o),{userAccount:{id:((s=o.idTokenClaims)==null?void 0:s.oid)??"",tenantId:o.tenantId,provider:"microsoft",accountType:ta(o.tenantId)?"AAD":"MSA"},authToken:n}):null}return null}}class Gt{constructor(){O(this,"middlewares",[])}add(t){this.middlewares.push(t)}async run(t){let n={...t};for(const s of this.middlewares)try{n=await s(n)}catch{continue}return n}}class NI{constructor(){O(this,"handlers",[])}add(t){this.handlers.push(t)}run(t){let n={...t};for(const s of this.handlers)try{n=s(n)}catch{continue}return n}}const RI=new Gt,z4=new Gt,bwe=new Gt,xwe=new Gt,fJ=new Gt,pJ=new Gt,hJ=new Gt,gJ=new Gt,vJ=new Gt,CJ=new Gt,yJ=new Gt,Swe=new Gt,G4=new Gt,Ewe=new Gt,bJ=new Gt,xJ=new Gt,SJ=new Gt,EJ=new Gt,wJ=new Gt,IJ=new Gt,PI=new Gt,_J=new Gt,TJ=new Gt,wwe=new NI,Iwe=new NI,_we=new Gt,Twe={ContextualConsent:"browser.underside_chat_consent",OptionalDiagnosticDataMetrics:"user_experience_metrics.reporting_enabled",VideoTranscriptConsent:"browser.underside_video_transcript_consent"},Awe=new Gt;var $c;const ni=class ni{constructor(){O(this,"providers");this.providers={microsoft:new mJ,auth0:new DQ}}async handleRedirectWithoutAccount(){await this.providers.microsoft.handleRedirectWithoutAccount(),ae.instance().config().enableAuth0&&await this.providers.auth0.handleRedirectWithoutAccount()}async getCurrentActiveUserAccountAndSetGlobalUserAccount(){const t=await this.providers.microsoft.getCurrentActiveUserAccount();if(t){this.setUserAccount(t);return}if(!ae.instance().config().enableAuth0)return;const n=await this.providers.auth0.getCurrentActiveUserAccount();n&&this.setUserAccount(n)}static instance(){return ue(ni,$c)||vt(ni,$c,new ni),ue(ni,$c)}getCurrentProvider(){const t=pe(sn);return t?this.providers[t.provider]:null}async getAccountFromProviders(){var t;return((t=this.getCurrentProvider())==null?void 0:t.getCurrentActiveUserAccount())??null}setUserAccount(t){at(sn,t),D.setUserAccountType(t==null?void 0:t.accountType)}async getAuthToken(t="login"){var o,r,a;const n=await z4.run({type:t});if(n.isHandled){if(t==="login"&&((o=n.authToken)==null?void 0:o.tokenType)!==void 0){const i=LQ(n.authToken.tokenType);D.setUserAccountType(i)}return n.authToken}const s=this.getCurrentProvider();if(!s&&t==="login"){if((await MI.get()).supportsNaa()){const u=await((a=(r=this.providers.microsoft).NAAGetTokenAndSetAccount)==null?void 0:a.call(r));if(u){const{authToken:d,userAccount:m}=u;return this.setUserAccount(m),d}}return}return s==null?void 0:s.getAuthToken(t)}async getUserInfo(){const t=await z4.run({type:"graph"});if(t.isHandled){if(!t.authToken)return;const{tokenType:s,accessToken:o}=t.authToken,r=s!=="msa"?s:void 0;if(this.providers.microsoft.supportsTokenType(r))return this.providers.microsoft.getUserInfoFromToken(o);if(this.providers.auth0.supportsTokenType(r)){const a=await this.providers.auth0.getUserInfoFromToken(o);if(a)return a}return}const n=this.getCurrentProvider();if(n)return n.getUserInfo()}logIn(t,n){return this.providers[t].logIn(n)}async logOut(){const t=this.getCurrentProvider();return t&&(await t.logOut(),this.setUserAccount(null)),Promise.resolve()}async initAuthAccount(){await this.handleRedirectWithoutAccount(),await this.getCurrentActiveUserAccountAndSetGlobalUserAccount()}};$c=new WeakMap,jt(ni,$c,null);let da=ni;function LI(){return null}function AJ(){return null}function OI(){return null}function DI({featureOverrides:e,localFeatureOverrides:t,localFeaturesToDisable:n,serverFeatures:s,surfaceConfig:o}){var a,i,u;const r=new Set([...s]);(a=o.settingsOverrides)!=null&&a.shouldHideShopping&&r.delete("shopping-card"),o.startInVoice&&r.add("start-in-voice"),(i=o.pages)!=null&&i.enabled?r.add("pages"):((u=o.pages)==null?void 0:u.enabled)===!1&&r.delete("pages");for(const d of e)r.add(d);for(const d of t)r.add(d);for(const d of n)r.delete(d);return Array.from(r)}function jI(){return[]}function FI(){return[]}async function vC(){const{msal:e}=await Ss.get();return e.getActiveAccount()}async function CC(){const e=await vC();return e?ta(e.tenantId):!1}async function W4(){const e=await vC();if(!(!e||!ta(e.tenantId)))return e}async function UI(){const e=await vC();if(!(!e||ta(e.tenantId)))return e}async function kJ(){return(await Ss.get()).getMsalAccessToken("oneDrive")}async function MJ(){if(!await CC())return;Ht(nr);const{msal:e}=await Ss.get(),t=e.getActiveAccount();t&&e.clearCache({account:t})}const BI="urlFeatureOverrides";function NJ(){return typeof window>"u"?null:sessionStorage.getItem(BI)}function VI(){const e=NJ();return e?e.split(",").map(n=>n):[]}function RJ(){const e=Qt("features");return e!=null&&e.trim()&&typeof window<"u"&&sessionStorage.setItem(BI,e.trim()),VI()}const PJ={VITE_API_URL:"copilot.microsoft.com/c/api"};async function LJ(e,t){try{return await e.json()}catch(n){throw(n instanceof SyntaxError||n instanceof TypeError||n instanceof DOMException)&&wK(n,e,t),n}}function HI(e={}){const{query:t={}}=e,n=new URLSearchParams;for(const[i,u]of Object.entries(t))n.append(i,u);const s=DI({featureOverrides:VI(),localFeatureOverrides:jI(),localFeaturesToDisable:FI(),serverFeatures:[],surfaceConfig:ae.instance().config()}).join(",");s&&(n.append("features",s),n.append("setflight",s));const o=LI();o&&(n.append("promptBranch",o),AJ()&&n.append("useSxs","true"));const r=OI();r&&n.append("sxsFeature",r);const{surfaceQueryParam:a}=ae.instance().config();if(a)for(const[i,u]of Object.entries(a.params))n.append(i,u);return n}function zI(e){return e!==void 0&&e.tokenType!==void 0&&e.tokenType!=="msa"}async function $4(e,t){const{VITE_API_URL:n}=PJ;let s;if(Nw()?s=`${window.location.host}/c/api`:s=n,!s)throw new Error("Cannot initialize websocket because the required env vars are not set: VITE_API_URL");const o={...t,"api-version":"2"},r=await da.instance().getAuthToken(),a=await CC();r&&!a&&(o.accessToken=r.accessToken,zI(r)&&(o["X-UserIdentityType"]=r.tokenType)),r===void 0?dI(e,"getWssAPIUrl"):mI(e,"getWssAPIUrl"),pe(cl)&&(o.appFlavor="beta");const i=HI({query:o});return`wss://${s}/${e}?${i}`}function OJ(e,t){const n=[Rw(),e],s=HI({query:t});return s.toString()&&n.push("?",String(s)),n.join("")}function DJ(e,t,n){if(e.attemptCount>1){const s=e.errors.filter(o=>o.errorType==="RequestTimeoutError").length;D.trackEvent({name:"system",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:"apiRetry",eventInfo_scenario:t,eventInfo_duration:e.endTime-e.startTime,eventInfo_customData:JSON.stringify({attemptCount:e.attemptCount,errorCount:e.errors.length,timeoutErrorCount:s,delayTimings:e.delayTimings})}})}n==null||n(e)}function jJ(e,t,n){var r,a;const s=e.exitReason==="requestTimeout",o={path:t,attemptCount:e.attemptCount,totalDuration:e.endTime-e.startTime,exitReason:e.exitReason,errorCount:e.errors.length,isTimeoutFailure:s,lastErrorType:(r=e.errors[e.errors.length-1])==null?void 0:r.errorType,lastErrorMessage:(a=e.errors[e.errors.length-1])==null?void 0:a.errorMessage,delayTimings:e.delayTimings};D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ApiRetryFailure",eventInfo_errorMessage:s?`API retry failed due to timeout after ${e.attemptCount} attempts`:`API retry failed after ${e.attemptCount} attempts. Exit reason: ${e.exitReason}`,eventInfo_details:JSON.stringify(o)}}),n==null||n(e)}function FJ(e,t,n){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ApiRetryTimeout",eventInfo_errorMessage:`Request timed out after ${e.timeoutMs}ms (attempt ${e.attemptCount})`,eventInfo_details:JSON.stringify({timeoutMs:e.timeoutMs,attemptCount:e.attemptCount,errorCount:e.errors.length,delayTimings:e.delayTimings,scenario:t,duration:e.endTime-e.startTime})}}),n==null||n(e)}async function $n(e,t={}){const{options:n,query:s,analytics:o,retry:r,requestTimeoutMs:a}=t;if(r){const{onSuccess:i,onFailure:u,onTimeout:d,retryOn401:m}=r,f={...r,onSuccess:g=>{DJ(g,(o==null?void 0:o.anonymousPath)??e,i)},onFailure:g=>{jJ(g,(o==null?void 0:o.anonymousPath)??e,u)},onTimeout:g=>{FJ({...g,timeoutMs:a??-1},(o==null?void 0:o.anonymousPath)??e,d)}};return em(a?()=>IQ(g=>Eg({path:e,options:n,query:s,analytics:o,abortController:g,retryOn401:m}),a):()=>Eg({path:e,options:n,query:s,analytics:o,retryOn401:m}),f)}return Eg({path:e,options:n,query:s,analytics:o})}async function Eg(e){const{path:t,options:n,query:s,analytics:o,abortController:r,retryOn401:a}=e,i=new Headers(n==null?void 0:n.headers);Pt.resolvedLanguage?i.set("X-Search-UILang",Pt.resolvedLanguage.toLowerCase()):Pt.language&&i.set("X-Search-UILang",Pt.language.toLowerCase());const u=await da.instance().getAuthToken(),d=await CC();u&&!d&&(i.set("Authorization",`Bearer ${u.accessToken}`),zI(u)&&i.set("X-UserIdentityType",u.tokenType)),u===void 0?dI(t,"fetchApi"):mI(t,"fetchApi"),pe(cl)&&i.set("X-Copilot-App-Flavor","beta");const m=performance.now(),f=await fetch(OJ(t,s),{...n,credentials:"include",headers:i,signal:r==null?void 0:r.signal}),p=performance.now();if(uI((o==null?void 0:o.anonymousPath)??t,(n==null?void 0:n.method)??"GET",p-m,f.clone()),td.trackLatestApiAssignment(f.headers),a&&f.status===401)throw new d1(`401 Unauthorized: ${t}`,{statusCode:401,route:t});return f}async function Nn({path:e,args:t={}}){var s;const n={method:"POST",...t.options,headers:{"Content-Type":"application/json",...(s=t.options)==null?void 0:s.headers},body:t.body?JSON.stringify(t.body):void 0};return $n(e,{...t,options:n})}async function St(e,t,n={}){const{analytics:s,onFailedRequest:o}=n,r=(s==null?void 0:s.anonymousPath)??e,a=await $n(e,n);let i=!0;if(!a.ok&&o&&(i=!!o(a)),!i)return{data:void 0,response:{ok:a.ok,status:a.status,headers:a.headers},zodError:void 0};const u=await LJ(a,r);let d,m;const{safe:f}=n.parseOptions??{};if(f){const p=t.safeParse(u);p.error&&sd(p.error,r,!0),d=u,m=p.error}else try{d=t.parse(u)}catch(p){throw p instanceof zf&&sd(p,r,!1),p}return{data:d,response:{ok:a.ok,status:a.status,headers:a.headers},zodError:m}}class UJ{generateClientEventId(t){if(this.shouldLogForEventName(t.data.eventName))return crypto.randomUUID()}onBeforeTrackEvent(t){this.logEventIfNeededNonBlocking(t,"prepared")}eventsSent(t){for(const n of t)this.logEventIfNeededNonBlocking(n,"success")}eventsDiscarded(t,n){for(const s of t)this.logEventIfNeededNonBlocking(s,this.getStatusFromDiscardedReason(n))}logEventIfNeededNonBlocking(t,n){this.logEventIfNeeded(t,n).catch(()=>{})}async logEventIfNeeded(t,n){var s,o,r,a,i,u,d,m;this.shouldLogForEventName((s=t.data)==null?void 0:s.eventName)&&await $n("/client-telemetry",{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:(o=t.data)==null?void 0:o.eventInfo_clientEventId,eventName:(r=t.data)==null?void 0:r.eventName,status:n,retryCount:"sendAttempt"in t?t.sendAttempt:0,appInfoName:(a=t.data)==null?void 0:a.appName,userId:(i=t.data)==null?void 0:i.userPicassoId,userMuid:(u=t.data)==null?void 0:u.userMuid,conversationId:(d=t.data)==null?void 0:d.eventInfo_conversationId,messageId:(m=t.data)==null?void 0:m.eventInfo_messageId,isSdkInitialized:!0,clientTimestamp:t.time??new Date().toISOString()})}})}getStatusFromDiscardedReason(t){switch(t){case 1:return"nonRetryableStatus";case 2:return"invalidEvent";case 3:return"sizeLimitExceeded";case 4:return"killSwitch";case 5:return"queueFull";default:return"unknown"}}shouldLogForEventName(t){switch(t){case"copilotCompose":case"copilotResponseRender":case"copilotStart":return!0;default:return!1}}}const q4={global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lrn_uni;u1={REGION};u2={LANG_LOCALE};u6=CMC;u50=submit_message;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://secure.adnxs.com/px?id=1869141&t=2","https://servedby.flashtalking.com/spot/1/5155;147512;16638/?spotName=USA_FY25H2_Copilot_Consumer_Chat_Send_button_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=Custom&m.customEventName=COPChatSend&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://insight.adsrvr.org/track/pxl/?adv=tq5ketp&ct=0:e8n8utj&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],gb:["https://secure.adnxs.com/px?id=1869542&t=2&seg=39793132&consent={CONSENT}","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://servedby.flashtalking.com/spot/1/3360;147492;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Chat_Send_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=csnj4o5&ct=0:7s8ltxf&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}"]},Tf={onPageLoad:{global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lp_uniq;u1={REGION};u2={LANG_LOCALE};u6=CMC;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869069&t=2","https://servedby.flashtalking.com/spot/1/5155;147507;16638/?spotName=USA_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=PageVisit&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=tq5ketp&ct=0:tzodkxv&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],gb:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869539&seg=39793125&t=2&consent={CONSENT}","https://servedby.flashtalking.com/spot/1/3360;147490;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=csnj4o5&ct=0:2slc99p&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}"]},onMessageSend:q4,onStartVoiceChat:q4,onSuggestionChipClicked:{global:[],us:[],gb:[],other:[]},onDiscoverCardClicked:{global:[],us:[],gb:[],other:[]},onQueryParamSubmit:{global:[],us:[],gb:[],other:[]}},BJ={onPageLoad:{behavior:20,Content:{Id:"CMCChatLoaded",cN:"CMC Chat Loaded"}},onMessageSend:{behavior:63,Content:{Id:"ChatManualMessage",cN:"Chat Manual Message"}},onStartVoiceChat:{behavior:300,Content:{Id:"VoiceMessageClick",cN:"Voice Message Click"}},onSuggestionChipClicked:{behavior:60,Content:{Id:"SuggestionChipClicked",cN:"Suggestion Chip Clicked"}},onDiscoverCardClicked:{behavior:144,Content:{Id:"DiscoverCardClicked",cN:"Discover Card Clicked"}},onQueryParamSubmit:{behavior:141,Content:{Id:"QueryParamMessageSubmit",cN:"Query Param Message Submit"}}};function VJ(e,t){return t==="US"?Tf[e].us:t==="GB"?Tf[e].gb:t&&["AU","CA","DE","FR","JP"].includes(t)?Tf[e].other:[]}function HJ(e){if(!ye("ads-pixels"))return;const t=qe().get(Rn),n=Pt.language,s=Date.now().toString(),o=Tf[e].global,r=VJ(e,t),{set:a}=qe();a(Iw,i=>{for(const u of o.concat(r))i[u]||(i[u]={url:u.replace("{CACHE_BUSTER}",s).replace("{REGION}",t??"").replace("{LANG_LOCALE}",n).replace("{CONSENT}",WJ(t)).replace("{td1}",t??"").replace("{td2}",n).replace("{td3}","CMC").replace("{td4}","").replace("{td5}","").replace("{td6}",$J(e)),isMounted:!0,timestamp:Date.now()});return{...i}})}function zJ(e){ye("custom-1ds")&&(window.OneDsAzureAnalytics.capturePageAction(null,BJ[e]),cw())}function Mc(e){try{HJ(e),zJ(e)}catch{Yt({feature:"sendIdeasTelemetry",customData:JSON.stringify({eventName:e})})}}function GJ(e){Mc(e==="suggestion"?"onSuggestionChipClicked":e==="discover"?"onDiscoverCardClicked":e==="queryParam"?"onQueryParamSubmit":"onMessageSend")}function WJ(e){return(e&&l1.includes(e))===!0?Ni().advertising?"1":"0":""}function $J(e){switch(e){case"onPageLoad":return"page_load";case"onMessageSend":return"submit_message";case"onStartVoiceChat":return"voice_message";case"onSuggestionChipClicked":return"suggestion_chip";case"onDiscoverCardClicked":return"discover_card";case"onQueryParamSubmit":return"query_param_submit";default:return""}}function qJ(e){const t=M(Rn);l.useEffect(()=>{D.ensureInitialized(ZJ()),e&&(window.appEnd=performance.now(),performance.mark("startupTime-begin",{startTime:window.appStart}),performance.mark("startupTime-end",{startTime:window.appEnd}),performance.measure("startupTime","startupTime-begin","startupTime-end"))},[e]),l.useEffect(()=>{e&&t&&setTimeout(()=>{Mc("onPageLoad")},1e3)},[e,t])}function ZJ(){return()=>ye("picasso-telemetry")?new UJ:null}function KJ({appInitialized:e}){const t=M(sn);l.useEffect(()=>{e&&Yv().catch(console.error)},[e]),l.useEffect(()=>{e&&SK(t==null?void 0:t.id).catch(console.error)},[e,t])}function YJ(e){l.useEffect(()=>(document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}),[e])}function QJ(){YJ(()=>{document.visibilityState==="visible"?D.trackEvent({name:"system",data:{eventName:"copilotVisible",eventInfo_landingPage:D.getLandingPage()}}):D.trackEvent({name:"system",data:{eventName:"copilotBackground"}})})}function JJ(){const e=XZ(),t=se(Zd);e&&(s=>kK.includes(s))(e)&&t(e)}const L1=N(void 0),As=N(void 0),XJ=N(e=>{var t;return(t=e(As))==null?void 0:t.showroomData},(e,t,n)=>{const s=e(As);if(s){const o=typeof n=="function"?n(s.showroomData):n;t(As,{...s,showroomData:o})}});N(!1);function eX(e){qe().set(XJ,t=>Un(t,n=>{e(n)}))}const kwe="https://aka.ms/copilot-ads/ads-settings",Mwe="https://aka.ms/copilot-ads/verification-program",Nwe=["website-visits","interests","similar-audience"],Rwe="data-ad-part",Pwe={text:"textAd",multimedia:"multimediaAd",product:"productAd",propertyPromotion:"propertyPromotionAd",tourActivity:"tourActivityAd",miniShowroom:"miniShowroomAd",mainShowroom:"mainShowroomAd"},tX=.05,Lwe="focus:underline hover:underline group-focus/trackable-link:underline",nX=128,sX=128,oX=147,rX=95,Owe=59*60*1e3;function Dwe(e,t,n){const s=t==="product"?nX:oX,o=t==="product"?sX:rX;if(n.length===0||!e)return{width:s,height:o,resize:"object-contain"};const{maxDeviation:r,averageAspectRatio:a,count:i}=GI(n);return i===0||a===0?{width:s,height:o,resize:"object-contain"}:r>tX?{width:s,height:aX(n,s,o),resize:"object-contain"}:{width:s,height:s/a,resize:"object-cover"}}function aX(e,t,n){const s=iX(e,t);return s===-1?n:Math.min(n,s)}function iX(e,t){const n=e.map(s=>{const o=s.type==="product"?s.offer.item.image:s.image;if(o.width&&o.height)return o.height/o.width*t}).filter(s=>typeof s=="number");return n.length>0?Math.max(...n):-1}function GI(e){if(e.length===0)return{maxDeviation:0,averageAspectRatio:0,count:0};const t=[];for(const o of e){const r=o.type==="product"?o.offer.item.image:o.image;if(r.width&&r.height){const a=r.width/r.height;t.push(a)}}if(t.length===0)return{maxDeviation:0,averageAspectRatio:0,count:0};const n=t.reduce((o,r)=>o+r,0)/t.length;return{maxDeviation:t.reduce((o,r)=>{const a=Math.abs(r/n-1);return Math.max(o,a)},0),averageAspectRatio:n,count:t.length}}function cX(e){if(e.length===0)return{};const t=e.map(s=>{const o=s.type==="product"?s.offer.item.image:s.image;return{originalWidth:o.width,originalHeight:o.height}}),n=GI(e);return{imageSizes:t.length>0?t:void 0,imageAspectRatioVariance:n}}function lX(e){var n;const t=[];for(const s of e){if(s.type!=="product"&&s.type!=="propertyPromotion"&&s.type!=="tourActivity")return null;if(!s.tags)continue;if(s.tags.length>1)return null;const o=s.tags[0];if(!(!o||!o.value))if(t.length===0)t.push(o);else{if(((n=t[0])==null?void 0:n.category)!==o.category)return null;t.find(r=>r.value===o.value)||t.push(o)}}return t}function jwe(e,t){var n;return e!=null&&e.length?JSON.stringify({tagCategory:(n=e[0])==null?void 0:n.category,tagValue:(t==null?void 0:t.value)??"recommended",tagPosition:t?e.indexOf(t)+1:null,tagCount:e.length}):""}function uX(e){return e.every(t=>t.type==="product"||t.type==="propertyPromotion"||t.type==="tourActivity")}function Fwe(e,t,n){let s=e;return t!=null&&t.length&&n?s=e.filter(o=>{var r;return o.tags&&((r=o.tags[0])==null?void 0:r.value)===n.value}):t!=null&&t.length&&!n&&(s=e.filter(o=>!o.tags)),s}class dX{constructor(t){O(this,"startTime",0);O(this,"timeToFirstToken",0);O(this,"receivedFirstToken",!1);O(this,"receivedLastToken",!1);O(this,"currentAdditionalData");O(this,"currentMessageId","");O(this,"receivedMessageTime",0);O(this,"startMessageTime",0);O(this,"mostRecentTokenTime",0);this.startTime=t}resetStartTime(t){this.startTime=t,this.timeToFirstToken=0}onBeforeSend(){this.receivedFirstToken=!1,this.receivedLastToken=!1}onSent(t){this.currentAdditionalData=t}onReceived(t){this.receivedMessageTime=performance.now(),D.trackEvent({name:"system",data:{eventName:"copilotChatRequest",eventInfo_additionalData:this.currentAdditionalData,eventInfo_duration:this.receivedMessageTime-this.startTime,eventInfo_conversationId:t.conversationId,eventInfo_messageId:this.currentMessageId,eventInfo_mode:t.chatMode}})}onStartMessage(t){this.startMessageTime=performance.now(),this.currentMessageId=t.messageId,this.receivedMessageTime||(this.receivedMessageTime=this.startTime),D.trackEvent({name:"system",data:{eventName:"copilotChatReqToResp",eventInfo_duration:this.startMessageTime-this.receivedMessageTime,eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:t.conversationId,eventInfo_messageId:t.messageId,eventInfo_mode:t.chatMode}})}onFirstToken(t,n,s){if(!this.receivedFirstToken&&t===this.currentMessageId){const o=performance.now()-this.startTime;this.timeToFirstToken=o,this.receivedFirstToken=!0,D.trackEvent({name:"system",data:{eventName:"copilotChatRespToReceived",eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:s,eventInfo_duration:performance.now()-this.receivedMessageTime,eventInfo_messageId:t,eventInfo_mode:n}}),D.trackEvent({name:"system",data:{eventName:"copilotFirstTokenReceived",eventInfo_conversationId:s,eventInfo_messageId:t,eventInfo_duration:o,eventInfo_mode:n,eventInfo_additionalData:this.currentAdditionalData}}),TJ.run({duration:o})}this.mostRecentTokenTime=performance.now()}onLastToken(t){const{citationCount:n,imageCount:s,messageId:o,inputMethod:r,conversationId:a,chatMode:i,chainOfThoughtCount:u,guidedLinksCount:d,uploadImageCount:m,uploadFileCount:f}=t;if(!this.receivedLastToken&&o===this.currentMessageId){const p=this.mostRecentTokenTime-this.startTime;this.receivedLastToken=!0,D.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_conversationId:a,eventInfo_messageId:o,eventInfo_numCitations:n,eventInfo_numImagesGenerated:s,eventInfo_numChainOfThoughts:u,eventInfo_numGuidedLinks:d,eventInfo_inputMethod:r,eventInfo_responseMethod:"text",eventInfo_mode:i,eventInfo_additionalData:this.currentAdditionalData,eventInfo_landingPage:D.getLandingPage(),eventInfo_firstToLastTokenDuration:p-this.timeToFirstToken,eventInfo_customData:JSON.stringify({eventInfo_numImagesUploaded:m,eventInfo_numDocumentsUploaded:f})}}),D.trackEvent({name:"system",data:{eventName:"copilotLastTokenReceived",eventInfo_conversationId:a,eventInfo_messageId:o,eventInfo_duration:p,eventInfo_mode:i,eventInfo_additionalData:this.currentAdditionalData}}),D.trackEvent({name:"system",data:{eventName:"copilotChatE2E",eventInfo_conversationId:a,eventInfo_messageId:o,eventInfo_duration:performance.now()-this.startTime,eventInfo_mode:i,eventInfo_additionalData:this.currentAdditionalData}}),this.currentAdditionalData=void 0}}onAdsRender(t){const n=performance.now()-this.startTime,{ads:s}=t,o=s==null?void 0:s.find(g=>g.type==="miniShowroom"),r=o??(s&&s.length>0?s[0]:void 0),a=s&&uX(s)?lX(s):[],i=s==null?void 0:s.find(g=>g.type==="mainShowroom"),u=pe(As),d=ye("adsshowroombrandagent"),m=s&&s.length>0&&((r==null?void 0:r.type)==="product"||(r==null?void 0:r.type)==="tourActivity"||(r==null?void 0:r.type)==="propertyPromotion")?cX(s):{};let f;o?f={brandId:o.brandId??(i==null?void 0:i.brandId),miniShowroom:{messageId:t.messageId,rguid:t.requestId}}:i&&u&&(f={brandId:u.brandId,brandLogo:u.brandLogo,brandBackground:u.brandBackground,viewMode:u.viewMode,brandAgentScenario:d?"chat":void 0,triggeredAtRguid:u.lastUserMessageRguid??void 0,miniShowroom:{messageId:u.miniShowroomAd.messageId,adId:u.adId},activeCard:{adId:i.id,rguid:t.requestId},previousCard:{adId:u.adId,rguid:u.activeCardRguid}});const p=JSON.stringify({eventType:t.eventType,adTags:a!=null&&a.length?a:void 0,showroom:f,...m});D.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"render",eventInfo_adType:r==null?void 0:r.type,eventInfo_adCount:s==null?void 0:s.length,eventInfo_rguid:t.requestId,eventInfo_messageId:t.messageId,eventInfo_conversationId:t.conversationId,eventInfo_duration:n,eventInfo_additionalData:p}})}onSubmitMessageBlocked(t,n,s){D.trackEvent({name:"interaction",data:{eventName:"copilotUserInputBlocked",eventInfo_inputMethod:n,eventInfo_mode:t,eventInfo_messageId:this.currentMessageId,eventInfo_conversationId:s,eventInfo_duration:performance.now()-this.startTime,eventInfo_additionalData:this.currentAdditionalData}})}onImageGenerationStart(t){const{messageId:n,conversationId:s,chatMode:o}=t,a=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenStarted",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_mode:o,eventInfo_duration:a}})}onImageReceived(t){const{messageId:n,conversationId:s,chatMode:o}=t,r=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_mode:o,eventInfo_duration:r}})}onPartialImageReceived(t){const{messageId:n,imageGenPhase:s,conversationId:o,chatMode:r}=t,a=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"PartialImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:o,eventInfo_mode:r,eventInfo_duration:a,eventInfo_customData:`${s}`}})}onMemorySignalReceived(t){const{messageId:n,conversationId:s}=t,r=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"MemorySignalReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_duration:r}})}onChainOfThoughtReceived(t){const{messageId:n,conversationId:s,chatMode:o}=t,r=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotCoTFirstTokenReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_mode:o,eventInfo_duration:r}})}}function yC(e,t){let n=null;return(...s)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>e(...s),t)}}const WI=300,Uwe=2e3,kn=()=>ye("smart-mode-default")?"smart":"chat",El=qe(),mX=500,O1=N(""),$I=N("starter-prompts"),qI=N(!0),ZI=N(!1),wg=N(kn()),Do=N(e=>e(wg),(e,t,n)=>{const s=e(wg),o=ye("sticky-conversation-mode"),r=ye("persist-conversation-mode");o&&(Ws("sticky-conversation-mode",n),r&&Gn(s1,xl,n)),s!==n&&t(wg,n)}),Du=N(null);function R2(e){El.set(O1,e)}function mp(){El.set(O1,"")}function wu(e){El.set($I,e)}function qa(e){El.set(qI,e)}function KI(e){El.set(Sl,e)}function fp(e){El.set(ZI,e)}function zt(e){const t=pe(Do);switch((t==="computerUse"||t==="research")&&at(Du,null),at(Do,e),e){case"computerUse":{at(Du,"actions");break}case"research":{at(Du,"researchReport");break}}}function bC(e){switch(at(Du,e),e){case"image":at(Do,"chat");break;case"podcast":at(Do,"chat");break;case"researchReport":at(Do,"research");break;case"quiz":at(Do,"chat");break;case"actions":at(Do,"computerUse");break;case"video":at(Do,"chat");break}}function xC(){return M(O1)}function fX(){return pe(O1)}function pX(){return M($I)}function hX(){return M(qI)}function Co(){return M(Do)}function yo(){return pe(Do)}function gX(){return M(ZI)}function SC(){return M(Du)}const vX=yC((e,t)=>{gQ(pe(De),e,JSON.stringify(t))},mX);function CX(e,t){vX(e,t)}async function yX(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n);return new Uint8Array(s)}function bX({bytes:e,difficulty:t}){const n=Math.floor(t/8),s=t%8;for(let o=0;o<n;o+=1)if(e[o]!==0)return!1;if(s>0){const o=255<<8-s,r=e[n];if(r!==void 0&&(r&o)!==0)return!1}return!0}async function xX(e){const{token:t,difficulty:n,startNonce:s=0,batchSize:o=1e4}=e;let r=s,a=0;const i=async u=>{const d=t+u,m=await yX(d);return a+=1,bX({bytes:m,difficulty:n})?{found:!0,nonce:u}:{found:!1,nonce:0}};for(;;){const u=[];for(let m=0;m<o;m+=1){const f=r+m;u.push(i(f))}const d=await Promise.all(u);for(const m of d)if(m.found)return{nonce:m.nonce,totalHashes:a};r+=o,await new Promise(m=>{setTimeout(m,0)})}}const SX=10*1e3;function Af({duration:e,success:t,errorMessage:n}){const{userAgent:s}=navigator;D.trackEvent({name:"system",data:{eventName:"webWorkerRegistrationEvent",eventInfo_name:"hashcash-worker",eventInfo_userAgent:s,eventInfo_duration:e,eventInfo_success:t,eventInfo_errorMessage:t?void 0:n??"Unknown error"}})}async function EX(e,t){const{token:n,difficulty:s,startNonce:o=0,batchSize:r=1e4}=e,a=Math.floor(Number.MAX_SAFE_INTEGER/t),i=[],u=[],d=()=>{for(const f of i)f.terminate()};window.addEventListener("beforeunload",d,{once:!0});const m=f=>{const p=new Worker(new URL("https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/hashcash.worker-BKwywZyM.js",import.meta.url),{type:"module"});return i.push(p),new Promise((g,C)=>{const v=performance.now(),b=setTimeout(()=>{const E=performance.now()-v;Af({duration:E,success:!1,errorMessage:"Registration timeout"}),p.terminate(),C(new Error(`Worker ${f} timeout`))},SX);p.onmessage=E=>{const{data:x}=E;if(x.type==="ready"){const I=performance.now()-v;Af({duration:I,success:!0}),clearTimeout(b);return}if(x.type==="success"){for(const[I,_]of i.entries())I!==f&&(_.postMessage({type:"cancel"}),_.terminate());g({nonce:x.nonce,timeElapsed:x.timeElapsed,totalHashes:x.totalHashes})}x.type==="error"&&(clearTimeout(b),p.terminate(),C(new Error(x.error)))},p.onerror=E=>{const x=performance.now()-v;Af({duration:x,success:!1,errorMessage:E.message||"Worker error"}),clearTimeout(b),p.terminate(),C(E)},p.postMessage({type:"register"});const y=o+f*a;p.postMessage({type:"start",token:n,difficulty:s,startNonce:y,batchSize:r})})};for(let f=0;f<t;f+=1)u.push(m(f));try{const f=await Promise.any(u);return window.removeEventListener("beforeunload",d),d(),f}catch(f){if(window.removeEventListener("beforeunload",d),d(),f instanceof AggregateError){const p=f.errors.map(g=>g instanceof Error?g.message:String(g)).join(", ");throw new Error(`All ${t} workers failed: ${p}`)}throw f}}async function wX(e,t){const{hardwareConcurrency:n}=navigator,s=Math.max(n-2,1),o=Date.now(),r=ye("web-worker"),a=ye("web-worker-multi-thread"),{webWorkerEnabled:i}=ae.instance().config();try{if(!r||!i)throw new Error(`Web Worker feature flag is enabled: ${r}
        Web Worker surface config is enabled: ${i}`);const u=a?t??s:1;return{...await EX(e,u),numberOfWorkers:u,method:"webworker"}}catch(u){Af({duration:Date.now()-o,success:!1,errorMessage:`Web worker registration failed or worker feature is disabled: ${u instanceof Error?u.message:String(u)}`});const d=await xX(e),m=Date.now()-o;return{...d,timeElapsed:m,method:"mainthread"}}}function IX(e,t,n){switch(e.type){case"research":return{type:"task",task:{id:e.id,type:e.type,contents:[],partialOutput:[],inlineCitations:[],status:"pending",prompt:e.prompt,progress:e.progress},partId:t};case"computerUse":return{type:"task",task:{id:e.id,conversationId:e.conversationId,type:e.type,status:"running",updatedAt:n},partId:t};case"podcast":return{type:"task",task:{id:e.id,type:e.type,status:e.status,podcast:e.podcast,updatedAt:e.updatedAt??n},partId:t};case"videoGeneration":return{type:"task",task:{id:e.id,type:e.type,status:e.status,result:e.result,updatedAt:e.updatedAt??n},partId:t};default:return null}}const YI=["ceo-thinkdeeper","ceo-smart-mode","ceo","webretrieval","webcontent","browser-actions"],_X=N(e=>{const t=e(vr);if(!YI.some(o=>e(ba(o)))||t.length===0)return!1;const s=t[t.length-1];return(s==null?void 0:s.author)==="ai"&&s.content.some(o=>o.type==="activity"&&o.activity.status==="running")});function P2(){return YI.some(ye)}const pp=["completed","failed","cancelled"];function TX(e){if(e.author==="ai")return e.content.find(t=>{var s;if(t.type!=="task")return!1;const n=(s=t.task)==null?void 0:s.status;return n&&!pp.includes(n)})}function AX(e){for(let t=e.length-1;t>=0;t-=1){const n=e[t];if(n&&n.type==="task")return n}}function EC(e){for(const t of e){const n=TX(t);if(n)return{message:t,part:n}}return null}const kX=N(0),MX=N(null),NX=N(null),QI=N(void 0),bo=N(null),RX=N(null),tm=N(null),D1=N(null),PX=N(e=>{var s;const t=e(vr),n=EC(t);return((s=n==null?void 0:n.part.task)==null?void 0:s.type)==="research"}),LX=N(!1);N(new Map);const OX=N(!1),Bwe=N(!1),wC=N(null),Gi=N(!1),DX=N(!1),L2=N(!1),jX=N(e=>e(wa).isOpen||e(JI)),wa=N({isOpen:!1,scenario:null}),JI=N(e=>{const t=e(yi);return t===null?!1:t===0||e(yw).includes(t)}),FX=N(e=>{const t=e(JI),n=e(ba("location-prompt")),s=e(vr).filter(({author:r})=>r==="human").length,o=!!tn(RU);return t||!n||o?!1:s===gB});function XI(e){const{tasks:t,conversationId:n,taskType:s}=e;for(const o of t.values())if(o.conversationId===n){if(s&&o.type!==s)continue;return o.id}return""}function e_(e,t){return XI({tasks:e,conversationId:t,taskType:"computerUse"})!==""}async function qs({from:e,to:t,params:n,search:s,state:o}){t.startsWith("/chats/")||qe().set(I2,null),await Jd(0),await Ma().navigate({to:t,params:n,state:r=>({...r,from:e,...o}),search:s})}function xo(){return qs}const t_=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M3.28034 2.21968C2.98745 1.92678 2.51257 1.92677 2.21968 2.21966C1.92678 2.51255 1.92677 2.98743 2.21966 3.28032L3.48326 4.54395C3.17684 5.03983 3 5.62426 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C18.3757 21 18.96 20.8232 19.4559 20.5169L20.7194 21.7805C21.0123 22.0734 21.4872 22.0734 21.7801 21.7805C22.073 21.4876 22.073 21.0127 21.7801 20.7198L3.28034 2.21968ZM11.1189 12.1797C10.8678 12.2864 10.6322 12.4409 10.4258 12.643L4.60326 18.3437C4.53643 18.1583 4.5 17.9584 4.5 17.75V6.25C4.5 6.0437 4.5357 5.84574 4.60125 5.66196L11.1189 12.1797ZM19.5 6.25V16.3183L20.9993 17.8176C20.9998 17.7951 21 17.7726 21 17.75V6.25C21 4.45507 19.5449 3 17.75 3H6.25C6.2275 3 6.20505 3.00023 6.18265 3.00068L7.68194 4.5H17.75C18.7165 4.5 19.5 5.2835 19.5 6.25ZM18.3305 19.4014C18.1489 19.4653 17.9535 19.5 17.75 19.5H6.25C6.04613 19.5 5.8504 19.4651 5.66845 19.4011L11.4752 13.7148L11.5588 13.644C11.8501 13.4316 12.2596 13.4553 12.5247 13.7148L18.3305 19.4014ZM15.2521 6.5C16.4959 6.5 17.5042 7.50831 17.5042 8.75212C17.5042 9.99592 16.4959 11.0042 15.2521 11.0042C14.0083 11.0042 13 9.99592 13 8.75212C13 7.50831 14.0083 6.5 15.2521 6.5ZM15.2521 8C14.8367 8 14.5 8.33673 14.5 8.75212C14.5 9.1675 14.8367 9.50423 15.2521 9.50423C15.6675 9.50423 16.0042 9.1675 16.0042 8.75212C16.0042 8.33673 15.6675 8 15.2521 8Z"})),Vwe=Object.freeze(Object.defineProperty({__proto__:null,default:t_},Symbol.toStringTag,{value:"Module"}));function UX(e,t=200,n=50){const[s,o]=l.useState(!1),[r,a]=l.useState(null);return l.useEffect(()=>{let i;if(!e)i=setTimeout(()=>{o(!0),a(Date.now())},t);else if(s){const u=r?Date.now()-r:1/0,d=n-u;d>0?i=setTimeout(()=>{o(!1),a(null)},d):(o(!1),a(null))}return()=>{clearTimeout(i)}},[e,t,n,s,r]),s}const IC="-",BX=e=>{const t=HX(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{const i=a.split(IC);return i[0]===""&&i.length!==1&&i.shift(),n_(i,t)||VX(a)},getConflictingClassGroupIds:(a,i)=>{const u=n[a]||[];return i&&s[a]?[...u,...s[a]]:u}}},n_=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),o=s?n_(e.slice(1),s):void 0;if(o)return o;if(t.validators.length===0)return;const r=e.join(IC);return(a=t.validators.find(({validator:i})=>i(r)))==null?void 0:a.classGroupId},Z4=/^\[(.+)\]$/,VX=e=>{if(Z4.test(e)){const t=Z4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},HX=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return GX(Object.entries(e.classGroups),n).forEach(([r,a])=>{O2(a,s,r,t)}),s},O2=(e,t,n,s)=>{e.forEach(o=>{if(typeof o=="string"){const r=o===""?t:K4(t,o);r.classGroupId=n;return}if(typeof o=="function"){if(zX(o)){O2(o(s),t,n,s);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([r,a])=>{O2(a,K4(t,r),n,s)})})},K4=(e,t)=>{let n=e;return t.split(IC).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},zX=e=>e.isThemeGetter,GX=(e,t)=>t?e.map(([n,s])=>{const o=s.map(r=>typeof r=="string"?t+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([a,i])=>[t+a,i])):r);return[n,o]}):e,WX=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const o=(r,a)=>{n.set(r,a),t++,t>e&&(t=0,s=n,n=new Map)};return{get(r){let a=n.get(r);if(a!==void 0)return a;if((a=s.get(r))!==void 0)return o(r,a),a},set(r,a){n.has(r)?n.set(r,a):o(r,a)}}},s_="!",$X=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,o=t[0],r=t.length,a=i=>{const u=[];let d=0,m=0,f;for(let b=0;b<i.length;b++){let y=i[b];if(d===0){if(y===o&&(s||i.slice(b,b+r)===t)){u.push(i.slice(m,b)),m=b+r;continue}if(y==="/"){f=b;continue}}y==="["?d++:y==="]"&&d--}const p=u.length===0?i:i.substring(m),g=p.startsWith(s_),C=g?p.substring(1):p,v=f&&f>m?f-m:void 0;return{modifiers:u,hasImportantModifier:g,baseClassName:C,maybePostfixModifierPosition:v}};return n?i=>n({className:i,parseClassName:a}):a},qX=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},ZX=e=>({cache:WX(e.cacheSize),parseClassName:$X(e),...BX(e)}),KX=/\s+/,YX=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:o}=t,r=[],a=e.trim().split(KX);let i="";for(let u=a.length-1;u>=0;u-=1){const d=a[u],{modifiers:m,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(d);let C=!!g,v=s(C?p.substring(0,g):p);if(!v){if(!C){i=d+(i.length>0?" "+i:i);continue}if(v=s(p),!v){i=d+(i.length>0?" "+i:i);continue}C=!1}const b=qX(m).join(":"),y=f?b+s_:b,E=y+v;if(r.includes(E))continue;r.push(E);const x=o(v,C);for(let I=0;I<x.length;++I){const _=x[I];r.push(y+_)}i=d+(i.length>0?" "+i:i)}return i};function QX(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=o_(t))&&(s&&(s+=" "),s+=n);return s}const o_=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=o_(e[s]))&&(n&&(n+=" "),n+=t);return n};function JX(e,...t){let n,s,o,r=a;function a(u){const d=t.reduce((m,f)=>f(m),e());return n=ZX(d),s=n.cache.get,o=n.cache.set,r=i,i(u)}function i(u){const d=s(u);if(d)return d;const m=YX(u,n);return o(u,m),m}return function(){return r(QX.apply(null,arguments))}}const Ft=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},r_=/^\[(?:([a-z-]+):)?(.+)\]$/i,XX=/^\d+\/\d+$/,eee=new Set(["px","full","screen"]),tee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,see=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ree=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Yo=e=>Bc(e)||eee.has(e)||XX.test(e),Pr=e=>wl(e,"length",fee),Bc=e=>!!e&&!Number.isNaN(Number(e)),Ig=e=>wl(e,"number",Bc),iu=e=>!!e&&Number.isInteger(Number(e)),aee=e=>e.endsWith("%")&&Bc(e.slice(0,-1)),rt=e=>r_.test(e),Lr=e=>tee.test(e),iee=new Set(["length","size","percentage"]),cee=e=>wl(e,iee,a_),lee=e=>wl(e,"position",a_),uee=new Set(["image","url"]),dee=e=>wl(e,uee,hee),mee=e=>wl(e,"",pee),cu=()=>!0,wl=(e,t,n)=>{const s=r_.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},fee=e=>nee.test(e)&&!see.test(e),a_=()=>!1,pee=e=>oee.test(e),hee=e=>ree.test(e),gee=()=>{const e=Ft("colors"),t=Ft("spacing"),n=Ft("blur"),s=Ft("brightness"),o=Ft("borderColor"),r=Ft("borderRadius"),a=Ft("borderSpacing"),i=Ft("borderWidth"),u=Ft("contrast"),d=Ft("grayscale"),m=Ft("hueRotate"),f=Ft("invert"),p=Ft("gap"),g=Ft("gradientColorStops"),C=Ft("gradientColorStopPositions"),v=Ft("inset"),b=Ft("margin"),y=Ft("opacity"),E=Ft("padding"),x=Ft("saturate"),I=Ft("scale"),_=Ft("sepia"),T=Ft("skew"),A=Ft("space"),k=Ft("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",rt,t],U=()=>[rt,t],$=()=>["",Yo,Pr],Q=()=>["auto",Bc,rt],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",rt],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Bc,rt];return{cacheSize:500,separator:":",theme:{colors:[cu],spacing:[Yo,Pr],blur:["none","",Lr,rt],brightness:W(),borderColor:[e],borderRadius:["none","","full",Lr,rt],borderSpacing:U(),borderWidth:$(),contrast:W(),grayscale:Z(),hueRotate:W(),invert:Z(),gap:U(),gradientColorStops:[e],gradientColorStopPositions:[aee,Pr],inset:B(),margin:B(),opacity:W(),padding:U(),saturate:W(),scale:W(),sepia:Z(),skew:W(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[Lr]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),rt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",iu,rt]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",iu,rt]}],"grid-cols":[{"grid-cols":[cu]}],"col-start-end":[{col:["auto",{span:["full",iu,rt]},rt]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[cu]}],"row-start-end":[{row:["auto",{span:[iu,rt]},rt]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,t]}],"min-w":[{"min-w":[rt,t,"min","max","fit"]}],"max-w":[{"max-w":[rt,t,"none","full","min","max","fit","prose",{screen:[Lr]},Lr]}],h:[{h:[rt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Lr,Pr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ig]}],"font-family":[{font:[cu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",Bc,Ig]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Yo,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Yo,Pr]}],"underline-offset":[{"underline-offset":["auto",Yo,rt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),lee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dee]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:X()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[Yo,rt]}],"outline-w":[{outline:[Yo,Pr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Yo,Pr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Lr,mee]}],"shadow-color":[{shadow:[cu]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Lr,rt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[iu,rt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Yo,Pr,Ig]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vee=JX(gee);function F(...e){return vee(de(e))}const nm="overflow-hidden",yr="backdrop-blur-2xl backdrop-saturate-200",_C="bg-white/70 dark:bg-muted-200/70",Ys=de(nm,yr,_C),Cee=de(nm,yr),yee=de(yr,_C),bee="bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]",xee="dark:bg-white/70  bg-slate-800/70",See=de(nm,yr,xee);de(yr,_C);const i_="bg-accent-100/60 dark:bg-muted-200/50",Eee=de(yr,i_),Kr=de(nm,yr,i_),wee="bg-acrylic-thin-fallback-light/95 dark:bg-acrylic-thin-fallback-dark/[92]",c_="dark:bg-accent-900/60 bg-slate-800/50";de(yr,c_);const Iee=de(nm,yr,c_);function _ee(e={},t=!1){const[n,s]=l.useState(!1),[o,r]=l.useState(!1),{onFocus:a,onBlur:i,onPointerDown:u}=e;return[n,{onFocus:m=>{(!o||t)&&s(!0),a==null||a(m)},onBlur:m=>{s(!1),r(!1),i==null||i(m)},onPointerDown:m=>{r(!0),u==null||u(m)}}]}function Tee(){return/^.*(EdgA|EdgiOS|Edg).*/i.test(navigator.userAgent)}const Nc="bg-background-300/20 dark:bg-background-650/5",Ua="border-black/10 dark:border-white/10";function Aee(e,t){return e?e===!0?{animate:{...t}}:{animate:e}:{style:t}}function kee(e,t,n,s){const o=t?s:n;return e?{animate:o}:{style:o}}function j1(e){const{children:t,size:n="md",position:s="default",nested:o=!1,background:r="default",stroke:a,strokeChildren:i,className:u,containerRef:d,interactable:m=!1,label:f,animate:p,onFocus:g,onBlur:C,onPointerDown:v,onAnimationStart:b,onAnimationComplete:y,focusOnPointerDown:E,isSelected:x=!1,...I}=e,[_,T]=_ee({onFocus:g,onBlur:C,onPointerDown:v},E),A=x||_,k=Tee(),P=o&&(r==="acrylic"||r==="acrylic-thin"),B=P?_g[`${n}-${s}`]:Mee[`${n}-${s}`],U=P?_g[`${n}-${s}`]:Nee[`${n}-${s}`],$=P?_g[`${n}-${s}`]:Ree[`${n}-${s}`],Q={default:"bg-white/45 dark:bg-background-650/10",darker:Nc,acrylic:Ys,"acrylic-fallback":bee,"acrylic-thin":Kr,"acrylic-thin-fallback":wee,transparent:"bg-transparent"},te=m?{"aria-label":f,role:"button",tabIndex:0,...T,onKeyDown:q=>{var Z;(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),(Z=I.onClick)==null||Z.call(I,q))}}:{onFocus:g,onBlur:C,onPointerDown:v},X=Aee(p,B),ne=kee(p,A,U,$);return c.jsxs(ge.div,{className:F("relative isolate will-change-transform",Q[r],u,P&&"outline-1 outline-offset-2",p&&k&&"transition-[clip-path]"),ref:d,onAnimationComplete:y,...X,...te,...I,children:[t,c.jsx(ge.div,{className:F(A&&"before:border-foreground-750 dark:before:border-white",a&&!A&&"before:border-black/10 dark:before:border-white/10",r==="transparent"&&a&&!A&&"dark:before:border-white/18",!a&&!A&&"before:border-transparent",!P&&"before:border-[20px]",P&&a&&!A&&"before:border",P&&a&&A&&"before:border-2","pointer-events-none absolute inset-0 before:absolute before:inset-0 before:rounded-inherit",p&&k&&"transition-[clip-path]"),...ne,children:i})]})}const Mee={"xs-default":{clipPath:"var(--clip-path-squircle-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-24)"},"md-default":{clipPath:"var(--clip-path-squircle-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-48-60)"}},Nee={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-48-60)"}},Ree={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-focused-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-focused-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-focused-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-focused-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-focused-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-focused-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-focused-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-focused-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-focused-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-focused-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-48-60)"}},_g={"xs-default":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-default":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-default":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-default":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-default":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:60,borderBottomRightRadius:60},"xs-top":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:12,borderBottomRightRadius:12},"sm-top":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:16,borderBottomRightRadius:16},"md-top":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:24,borderBottomRightRadius:24},"lg-top":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:36,borderBottomRightRadius:36},"xl-top":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xs-bottom":{borderTopLeftRadius:12,borderTopRightRadius:12,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-bottom":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-bottom":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-bottom":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-bottom":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:60,borderBottomRightRadius:60}};function ju(e){const{onError:t,onLoad:n,loadingPlaceholder:s,alt:o,errorClass:r,className:a,src:i,fallbackSrc:u,stableKey:d,...m}=e,[f,p]=l.useState(!1),[g,C]=l.useState(!1),[v,b]=l.useState(!1),y=UX(g);if(l.useEffect(()=>{p(!1),C(!1),b(!1)},[i]),f)return c.jsx(l_,{className:r});const E=v&&u?u:i;return c.jsxs(c.Fragment,{children:[y&&(s==null?void 0:s()),l.createElement("img",{...m,alt:o,key:d??E,src:E,className:F(a,!g&&s&&"absolute size-px opacity-0"),onLoad:x=>{C(!0),n==null||n(x)},onError:x=>{u&&!v?b(!0):p(!0),t==null||t(x)}})]})}function l_(e){const{className:t}=e;return c.jsx("div",{className:F("flex size-full items-center justify-center",Nc,t),children:c.jsx(t_,{className:"size-6"})})}function u_(e){const{path:t,args:n,onLoad:s,alt:o,...r}=e,{data:a,isPending:i}=Rs({queryKey:["apiImg",t],queryFn:async()=>{const m=await(await $n(t,n)).blob();return URL.createObjectURL(m)}});l.useEffect(()=>{!i&&s&&s()},[i,s]);const u=()=>c.jsx("div",{...r});return c.jsx(ju,{...r,alt:o,className:r.className,errorClass:r.className,loadingPlaceholder:i?u:void 0,src:i?void 0:a})}const Y4=qe();function Pee(e){var n,s;if(e.status!=="completed")return;const t=Y4.get(De);Ma().latestLocation.pathname.startsWith("/chats")&&t&&e.conversationId===t||Y4.set(xn,{iconProvider:()=>{var o,r,a;return c.jsx(u_,{path:`/podcasts/user/${(o=e.podcast)==null?void 0:o.id}/Files/${(a=(r=e.podcast)==null?void 0:r.thumbnail)==null?void 0:a.name}`,className:"rounded-xl object-cover"})},title:z("podcasts.generationNotification.title"),subtitle:((n=e.podcast)==null?void 0:n.title)??"",action:()=>{var o;qs({from:window.location.pathname,to:`/podcasts/user/${(o=e.podcast)==null?void 0:o.id}`})},trackingArgs:{scenario:"podcastGenerationNotification",customData:JSON.stringify({podcastId:(s=e.podcast)==null?void 0:s.id})},dismissAfter:3e4})}const Lee=N(!1),d_=N(void 0),Oee=N(!1),Dee=N(void 0);function jee(e,t){if(!t)return e;const[n,s,o]=e.slice(-3);if(!(Si(o)&&Si(s)&&(n==null?void 0:n.author)==="human"))return e;const a={left:o.sideBySideConfig.position==="left"?o:s,right:o.sideBySideConfig.position==="right"?o:s,createdAt:o.createdAt,id:t};return[n,a]}function Fee(e){return m_(e)||Si(e)}function m_(e){return"left"in e&&"right"in e}function Si(e){return!e||e.author!=="ai"?!1:!!e.sideBySideConfig}const Wi=qe();function Xt({history:e,messageId:t}){const n=e.find(({id:s})=>s===t);if((n==null?void 0:n.author)==="ai")return n}function Uee(e,t){const n=e.find(({author:s})=>s==="human");if((n==null?void 0:n.id)===t&&n.author==="human")return n}function Bee(e){if(!e)return;const t=Wi.get(xt).get(e);if(!t)return;const{history:n}=t,s=n.find(({author:o})=>o==="human");if((s==null?void 0:s.author)==="human")return s}function hi(e){const t=e.at(-1);if((t==null?void 0:t.author)==="ai")return t}function Ro(e,t){return e.find(n=>n.partId===t)}function Q4(e){for(let t=e.length-1;t>=0;t-=1){const n=e[t];if(n&&n.type==="text")return n}}function Hwe(e){return e.filter(t=>t.author==="ai").map(t=>({...t,content:t.content.filter(n=>n.type==="image")})).filter(t=>t.content.length>0)}function zwe(e,t,n){const s=e.find(o=>o.id===t);if(!(!s||s.author!=="ai")){for(const o of s.content)if("partId"in o&&o.partId===n)return o}}function f_(e){if(!e)return null;const t=Wi.get(xt).get(e);if(!t)return null;const{history:n}=t;return EC(n)}function ot(e,t){Wi.set(xt,n=>Un(n,s=>{const o=s.get(e);o&&t(o.history)}))}function Vee(e,t,n,s){ot(e,o=>{const r=o.find(a=>a.id===t);if((r==null?void 0:r.author)==="ai"){const a=Ro(r.content,n);a&&s(a)}})}function TC(e,t){Wi.set(fo,n=>Un(n,s=>{const o=s.get(e);o&&t(o)}))}function D2(e,t){Wi.set(xt,n=>Un(n,s=>{const o=s.get(e);o&&t(o)}))}function Ic(e,t){Wi.set(y1,n=>Un(n,s=>{if(!t)return;const o=s.get(e);o?o.add(t):s.set(e,new Set([t]))}))}function Hee(e){Wi.set(OK,t=>Un(t,n=>{e&&n.set(e,!0)}))}function p_(e){zt(e)}function kf(e,t){const n={type:"error",text:e,partId:"0"},s=Math.random().toString(),o={id:s,createdAt:new Date().toISOString(),author:"ai",content:[n],mode:kn(),streamingState:"idle"};Ic(t,s),ot(t,r=>{r.push(o)})}function zee(e){if(P2())for(const t of e.content)t.type==="activity"&&t.activity.status==="running"&&(t.activity.status="completed")}function h_(e){D2(e,t=>{t.sideBySideComparisonId=void 0})}function g_(e,t){const n=!t;ot(e,s=>{const[o,r]=s.slice(-2);if(!(Si(r)&&Si(o)))return;const i=n?!r.sideBySideConfig.isDefault:r.id!==t,u=n?!o.sideBySideConfig.isDefault:o.id!==t;i?s.splice(s.length-1,1):u&&s.splice(s.length-2,1)})}function Gee(e,t){g_(e,t),h_(e)}function AC(e){g_(e,void 0),h_(e)}function Wee(e,t){const n=`indicator-ai-response-${Math.random().toString()}`;return ot(e,s=>{const o=hi(s);o&&o.content.push({type:"indicator-ai-response",partId:n,state:"loading",text:t})}),n}function J4(e,t,n){t&&ot(e,s=>{const o=hi(s);if(!o)return;const r=Ro(o.content,t);!r||r.type!=="indicator-ai-response"||r.state!==n&&(o.content=o.content.map(a=>a.type==="indicator-ai-response"&&t===a.partId?{...a,state:n}:a))})}const Tg=qe();function $ee(e,t){const n=Tg.get(De);if(ye("ds-new-progress")&&e.status!=="completed"||!pp.includes(e.status)||(p_(kn()),!n||n===t))return;const o=e.id,r={title:z("research.generationNotification.title"),subtitle:z("research.generationNotification.subTitle"),link:z("research.generationNotification.subTitleLink"),action:()=>{qs({from:window.location.pathname,to:`/chats/${t}`})},onClick:()=>{Tg.set(Dee,o)},dismissable:!0,trackingArgs:{scenario:"researchCompletionNotification",customData:JSON.stringify({researchId:e.id,sourceConversationId:t})}};Tg.set(xn,r)}function qee(){const e=M(fo),t=M(De);return l.useMemo(()=>{if(t){for(const n of e.values())if(n.conversationId===t)return n}},[t,e])}function Zee(){const e=qe(),t=e.get(fo),n=e.get(De);if(n){for(const s of t.values())if(s.conversationId===n)return s}}async function v_(e){const{conversationId:t=pe(De),talk:n=!1,location:s}=e;t&&await qs({to:`/chats/$conversationId${n?"/talk":""}`,params:{conversationId:t},from:s.pathname,search:s.search?Object.fromEntries(new URLSearchParams(s.search)):{}})}async function Qs(e={}){await v_({conversationId:e.conversationId,talk:e.talk,location:Ma().state.location})}function C_(){const e=Id(),{location:t}=e.state;return l.useCallback(async(n={})=>v_({conversationId:n.conversationId,talk:n.talk,location:{pathname:t.pathname,search:t.search}}),[t.search,t.pathname])}function Il(e){at(MC,e)}function kC(){return M(MC)}function Kee(){return pe(MC)}const MC=N(null);function sm(e){var i,u;const{id:t,shouldNavigateToChat:n=!0,shouldClearParentConversation:s=!0}=e;s&&pe(De)!==pe(I2)&&at(I2,null),Il(null),at(De,t),at(Sl,!1),at(xt,d=>Un(d,m=>{const f=m.get(t);if(f!=null&&f.history.length&&(f.isNew=!1),f!=null&&f.history.some(p=>p.author!=="system"&&p.content.some(g=>g.type==="card"&&g.card.type==="ads"))){for(const p of f.history)if(p.author==="ai"&&p.content.some(g=>g.type==="card"&&g.card.type==="ads")){const g=p.content.filter(C=>C.type!=="card"||C.card.type!=="ads");p.content=g}}}));const o=pe(C1);if(o&&o!==t&&at(xt,d=>Un(d,m=>{m.delete(o)})),((u=(i=f_(t))==null?void 0:i.part.task)==null?void 0:u.type)==="research")zt("research");else{let d=kn();ye("sticky-conversation-mode")&&(ye("persist-conversation-mode")?d=wt(s1,xl)??d:jn("sticky-conversation-mode")&&(d=jn("sticky-conversation-mode")??kn())),zt(d)}const a=pe(fo);e_(a,t)?at(Wn,"side-by-side"):at(Wn,"chat-only"),n&&Qs({conversationId:t})}function Yee(){return e=>sm(e)}const Vc=qe(),Qee="MissingUrlFromApi",Jee="https://aka.ms/copilot-actions-faq";function Xee(e,t){const n=Vc.get(fo).get(e);return(n==null?void 0:n.type)==="computerUse"&&!n.lastUserCommand&&ete(n)&&t.some(o=>o.op==="replace"&&o.path==="/status"&&o.value==="paused")?j2(t,["userTakeControl","pauseByClick"]):!1}function y_(e){return e==="paused"||e==="running"||e==="pending"}function ete(e){var t,n;return e.status==="paused"&&(((t=e.statusChange)==null?void 0:t.reason)==="safetyRiskDetected"||((n=e.statusChange)==null?void 0:n.reason)==="askUserInput")}function tte(e){var t;return e.status==="paused"&&((t=e.statusChange)==null?void 0:t.reason)==="safetyRiskDetected"}function nte(e){var t;return e.status==="paused"&&((t=e.statusChange)==null?void 0:t.reason)==="userTakeControl"&&e.lastUserCommand==="takeTaskControl"}function Ag(e,t=!1){return e.map(n=>({type:"chainOfThought",text:n.text,screenshotUrl:t?Qee:null,reaction:null,partId:Math.random().toString()}))}function j2(e,t){return e.some(n=>{if(n.op==="replace"&&n.path==="/statusChange"){const{value:s}=n;if(typeof s=="object"&&s!==null&&"reason"in s){const{reason:o}=s;if(typeof o=="string"){const r=VS.safeParse(o);return r.success&&t.includes(r.data)}}}return!1})}function ste(e,t){const n=Vc.get(fo).get(e);if((n==null?void 0:n.type)==="computerUse"){const{conversationId:s,status:o,statusChange:r}=n;if(!s)return;if(o==="cancelled"&&ot(s,f=>{const p=X4(e,"cancelTask");f.push(p)}),j2(t,["giveBackControl"])?ot(s,f=>{const p=X4(e,"takeTaskControl");f.push(p)}):(r==null?void 0:r.reason)==="giveBackControl"&&e6(e),j2(t,["taskCompleted"])&&ot(s,f=>{const p={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",streamingState:"idle",content:[{type:"card",partId:Math.random().toString(),card:{type:"computerUseFeedback"}}]};f.push(p)}),r)switch(r.reason){case"askUserInput":case"safetyRiskDetected":{o==="paused"?(r.reason==="askUserInput"&&po({feature:"computerUse",scenario:"askUserInput",customData:JSON.stringify({id:n.id,conversationId:n.conversationId})}),s===Vc.get(De)||Vc.set(xn,{title:n.title&&n.title!==""?z("actions.alertTitleTemplate",{conversationName:n.title}):z("actions.defaultAlertTitle"),subtitle:r.reason==="safetyRiskDetected"?z("actions.safetyRiskAlertSubTitle"):z("actions.askUserInputAlertSubTitle"),action:()=>sm({id:s}),dismissAfter:30*1e3,dismissable:!0}),TC(e,p=>{"lastUserCommand"in p&&(p.lastUserCommand=void 0)})):e6(e);break}}const u=t.filter(f=>f.op==="add"&&f.path==="/chainOfThought/-").map(f=>({text:"value"in f?f.value:""}));u.length>0&&ot(s,f=>{if(f.length===0)return;const p=t6(f);if(p)p.push(...Ag(u));else{const g={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",streamingState:"idle",content:Ag(u)};f.push(g)}}),t.filter(f=>f.op==="replace"&&f.path==="/computerAction").length>0&&ot(s,f=>{const p=t6(f);p&&p.push(...Ag([{text:n.computerAction??""}],!0))}),t.filter(f=>f.op==="replace"&&f.path==="/formStructure").length>0}}function ote(e,t,n){switch(t){case"sendFormData":return{type:t,taskId:e,fields:n??[]};default:return{type:t,taskId:e}}}function X4(e,t,...n){const s=n[0],o=ote(e,t,s);return{id:Math.random().toString(),createdAt:new Date().toISOString(),author:"human",content:[{type:"command",command:o}]}}function e6(e){TC(e,t=>{"statusChange"in t&&(t.statusChange=void 0)})}function t6(e){const t=e.at(-1);if(t&&t.author==="ai"&&t.content.find(n=>n.type==="chainOfThought"))return t.content}function Gwe(e){var n;const t=Zee();return(t==null?void 0:t.type)==="computerUse"?t.status!=="running"&&!((n=t.replay)!=null&&n.isRunning)?!0:!e:!0}function Wwe(e){return!!(ye("labs-actions-replay")&&e&&e.type==="computerUse"&&!y_(e.status))}function $we(e){return{cancelTask:"copilotActionsCancelTask",takeTaskControl:"copilotActionsTakeControl",sendFormData:"copilotActionsSendFormData",startTask:void 0,pauseTask:void 0,resumeTask:void 0,releaseTaskControl:void 0}[e]}function rte(e){return XI({tasks:Vc.get(fo),conversationId:e,taskType:"computerUse"})}function ate(e,t){e===t&&(Vc.set(Wn,"side-by-side"),p_(kn()))}const ite=qe();function cte(e){if(!ye("video-gen")||e.status!=="completed"||!e.conversationId||!e.result||e.result.type!=="success"||!e.result.videoUrl)return;const{conversationId:t,result:n}=e,s=ye("library")&&ye("library-video"),o=z("video.generationNotification.title"),r=s?z("video.generationNotification.subtitle"):z("video.generationNotification.subtitleToChat"),a=()=>{s?qs({from:window.location.pathname,to:"/library",search:{type:"video"}}):sm({id:t})};ite.set(xn,{iconProvider:()=>c.jsx("img",{src:n.thumbnailUrl??"",alt:n.thumbnailUrl??"",className:"rounded-xl object-cover"}),title:o,subtitle:r,action:a,trackingArgs:{scenario:"videoGenerationNotification"},dismissAfter:3e4})}function lte(e){return e?!e.slotAds||e.slotAds.length===0?!0:e.slotAds.every(t=>!!t.ad.layout):!1}function ute(e,t){const n=ye("adsshowroombrandagent"),s=pe(As),o=!!s;if(o){if(e)return{isValid:!1,detailedInfoObj:{hasEntryAd:!0,isShowroomOpened:o}};if(n){const r=!!((t==null?void 0:t.logo)??(s==null?void 0:s.brandLogo)),a=lte(t);return{isValid:!!(a&&r),detailedInfoObj:{noBrandLogo:!r,noValidMainAd:!a,isShowroomAgentEnabled:!0,isShowroomOpened:o}}}return{isValid:!1,detailedInfoObj:{isShowroomAgentEnabled:!1,isShowroomMvpEnabled:!1,isShowroomOpened:o}}}return e?n?{isValid:!!(e.brandId&&!t),detailedInfoObj:{noBrandId:!e.brandId,hasMainAd:!!t,isShowroomAgentEnabled:!0,isShowroomOpened:o}}:{isValid:!1,detailedInfoObj:{isShowroomAgentEnabled:!1,isShowroomMvpEnabled:!1,isShowroomOpened:o}}:{isValid:!1,detailedInfoObj:{noEntryAd:!0,isShowroomOpened:o}}}function dte({entryAd:e,mainAd:t,messageId:n,partId:s,conversationId:o}){const{isValid:r,detailedInfoObj:a}=ute(e,t);return r||D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"AdsError",eventInfo_details:JSON.stringify({messageId:n,partId:s,conversationId:o,...a}),eventInfo_errorMessage:"Unexpected showroom data received"}}),r}function mte({card:e,messageId:t,partId:n,conversationState:s,conversationId:o}){const{ads:r}=e,a=pe(As);if(r!=null&&r.some(i=>i.type==="mainShowroom"||i.type==="miniShowroom")){const i=r[0],u=(i==null?void 0:i.type)==="miniShowroom",d=u?i:void 0,m=u?r[1]:i;if(!dte({entryAd:d,partId:n,conversationId:o,messageId:t,mainAd:(m==null?void 0:m.type)==="mainShowroom"?m:void 0}))return}if(s.timing.onAdsRender({requestId:e.requestId,messageId:t,conversationId:o,eventType:"card",ads:r}),a){const i=r==null?void 0:r.filter(u=>u.type==="mainShowroom");if(i){eX(u=>u==null?void 0:u.push({key:t,requestId:e.requestId,ads:i,instrumentation:e.instrumentation}));return}}ot(o,i=>{const u=Xt({history:i,messageId:t});u&&u.content.push({type:"card",partId:n,card:{...e,createdAt:Date.now()}})})}function b_(e){at(xt,t=>Un(t,n=>{const s=n.get(e.id);s&&(e.title!==void 0&&(s.title=e.title),s.updatedAt=e.updatedAt,s.continuedAt=e.continuedAt,e.characterId!==void 0&&(s.characterId=e.characterId),e.group!==void 0&&(s.group=e.group))}))}async function x_(e){const t=await St(`/conversations/${e}`,Dv,{options:{method:"GET"},parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/*"}}).then(n=>n.data);b_(t)}function qwe(e,t){const{data:n,isLoading:s,error:o,refetch:r}=Rs({queryKey:["conversationMetadata",e],queryFn:async()=>await St(`/conversations/${e}`,Dv,{options:{method:"GET"},parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/*"}}).then(i=>i.data),enabled:!!e,...t});return l.useEffect(()=>{n&&b_(n)},[n,e]),{data:n,isLoading:s,error:o,refetch:l.useCallback(()=>{r()},[r])}}function ut(){return j9({select:t=>t.pathname})}function _l(){return ut(),!1}function NC(e){return!1}function S_(e,t){var s;const n=ae.instance().config();return e&&!((s=n.settingsOverrides)!=null&&s.shouldHideMultipleCharacters)&&!t}function om(){const e=H("multiplecharacters"),t=_l();return S_(e,t)}function F2(){const e=ye("multiplecharacters"),t=NC();return S_(e,t)}const fte=vl.extend({actionName:w("edge_get_page_content"),parameters:L(S({tabId:j(),windowId:j(),pageUrl:h().nullish(),pageTitle:h().nullish(),pageType:h().nullish(),lastAccessedTime:j().nullish()}))}),pte=vl.extend({actionName:w("browser_search"),parameters:S({queries:L(h()),startTime:h().nullish(),endTime:h().nullish(),maxResults:rr().positive().prefault(10),states:L(h()).prefault(["history"])})}),hte=S({state:h(),title:h(),url:h(),pageSummary:h().nullish(),lastAccessed:Wp().nullish()});S({results:L(hte)});const br=vl.extend({actionType:h(),id:h()}),gte=br.extend({actionName:w("edge_navigate_to"),parameters:S({tabId:j().optional(),url:h(),foregroundRun:fe().optional()})}),vte=br.extend({actionName:w("edge_switch_tab"),parameters:S({tabId:j()})}),Cte=br.extend({actionName:w("edge_close_tabs"),parameters:S({tabIds:L(j())})}),yte=br.extend({actionName:w("edge_find_browser_tab_groups"),parameters:S({queries:h().array()})}),bte=br.extend({actionName:w("edge_group_open_browser_tabs"),parameters:S({tabGroups:S({title:h(),tabIds:L(j()),color:Ne([w("red"),w("green"),w("blue")]),collapsed:fe()}).array()})}),xte=br.extend({actionName:w("edge_ungroup_open_browser_tabs"),parameters:S({tabGroupIds:j().array()})}),Ste=br.extend({actionName:w("edge_media_controls"),parameters:S({action:Ne([w("play"),w("pause")])})}),Ete=br.extend({actionName:w("edge_go_back_forward"),parameters:S({direction:Ne([w("back"),w("forward")]),tabId:j().optional()})}),wte=Ne([gte,Cte,yte,bte,xte,Ste,vte,Ete]),Ite=S({type:w("screenshot")}),_te=S({type:w("click"),x:j(),y:j(),button:Ne([w("back"),w("forward"),w("left"),w("right"),w("middle")])}),Tte=S({type:w("scroll"),x:j(),y:j(),scrollX:j(),scrollY:j()}),Ate=S({type:w("doubleClick"),x:j(),y:j()}),kte=S({type:w("moveMouse"),x:j(),y:j()}),Mte=S({type:w("keyPress"),keys:h().array()}),Nte=S({type:w("drag"),path:S({x:j(),y:j()}).array()}),Rte=S({type:w("type"),text:h()}),Pte=S({type:w("wait"),seconds:j()}),Lte=nt("type",[Ite,_te,Ate,kte,Mte,Nte,Tte,Rte,Pte]),Ote=Ne([w("blocked"),w("not-allowed")]),Dte=br.extend({actionName:w("computer_use"),parameters:S({tabId:j(),callId:h(),given:S({required:Ote,allowed:Ne([w("always-allow"),w("allow-once"),w("not-now")]),url:h()}).nullish(),action:Lte})}),jte=Ne([...wte.options,Dte]),Fte=S({Prefill:h(),Position:j(),PhraseLength:j()}),Ute=vl.extend({actionName:w("guided_conversation"),actionType:h(),id:h(),parameters:Fte}),Bte=nt("actionName",[fte,pte,kz,Ute,...jte.options]),Vte=["edge://discover-chat-v2","edge://discover-chat-v2.top-chrome","edge://copilot-ntp"];let kg;function Hte(){if(kg===void 0){const e=window.location.ancestorOrigins[0]??"";if(!Vte.includes(e))throw new Error(`Unexpected browser origin: ${e}.`);kg=e}return kg}const zte="82864fa0-ed49-4711-8395-a0e6003dca1f",n6="Edge.Context.Pref",Gte="Edge.Context.OnPref",Wte="Edge.Context.GetDocumentBody",$te="Edge.Context.OnGetDocumentBody",Zwe=32e3,qte=48e3,s6=64e3,Zte=128e3,Kte="Edge.Chat.Ready",Yte="Edge.Chat.IsVisionCapable",Qte="Edge.Chat.OnIsVisionCapable",Jte="Edge.Chat.VisionLaunch",Xte="Edge.Chat.OnVisionLaunch",ene="Edge.Chat.Screenshot",tne="Edge.Chat.OnScreenshot",nne="Edge.Chat.HistorySearch",sne="Edge.Chat.OnHistorySearch",one="Edge.RealnameAuth.GetStatus",rne="Edge.RealnameAuth.OnGetStatus",ane="Edge.RealnameAuth.Start",ine="Edge.RealnameAuth.OnStart",cne="chrome.tabs.create",o6="chrome.tabs.onActivated",r6="chrome.tabs.onUpdated",lne="chrome.tabs.reload",a6="chrome.tabs.query",une="chrome.tabs.update",i6="chrome.authPrivate.onSignInStateChanged",c6="chrome.authPrivate.getPrimaryAccountInfo",dne="chrome.metricsPrivate.recordMediumTime",mne="chrome.authPrivate.acquireAccessTokenWithUserInteraction",fne="chrome.authPrivate.acquireAccessTokenSilently",l6="chrome.authPrivate.startEdgeSignIn",u6="chrome.windows.getCurrent",d6="chrome.copilotAuthPrivate.startSignIn",m6="chrome.copilotAuthPrivate.startSignOut",pne="Edge.Chat.AgentMessage",hne="Edge.Chat.OnAgentMessage",gne="Edge.Auth.NaaRequest",vne="Edge.Auth.NaaResponse",Cne="Edge.Notify.Conv",yne="Edge.Notify.User",bne="Edge.Notify.MessageSent",xne="Edge.Notify.OnUserClosedChatSettings",Sne="Edge.Notify.HeaderCommand.ClosePane",Ene="Edge.Notify.HeaderCommand.SendFeedback",wne="Edge.Notify.HeaderCommand.TogglePinState",Ine="Edge.Notify.Error",_ne="Edge.Notify.OpenSidepane.WithConversation",Tne="Edge.Notify.ContentSize",Ane="Edge.Chat.GetCopilotMode",kne="Edge.IsFeatureEnabled",Mne="Edge.OnIsFeatureEnabled",Nne="Edge.NTP.QueryQuickLinks",Rne="Edge.NTP.UpdateQuickLink",Pne="Edge.NTP.RemoveQuickLink",Lne="Edge.NTP.OnReceivedQuickLinks",f6="Edge.ToolAction",One="Edge.ShowTabs",Dne="Edge.LockTabs",jne="Edge.ReleaseTabs",Fne="Edge.AllowActionForUrl",Une="Edge.Searchbox.QueryAutocomplete",Bne="Edge.Searchbox.OpenAutocompleteMatch",Kwe="isCopilotToolsSupported",Ywe="isShowCopilotButtonSupported",Vne="Edge.Chat.SetVideoCurrentTime",Hne="Edge.WCP.Notify.DraggableRegions",zne="Edge.WCP.Notify.OpenCopilotSettings",Qwe="edge_tools.enabled";class In{constructor(){O(this,"resolve",null);O(this,"isCancelled");O(this,"token");this.token=new Promise(t=>{this.resolve=t}),this.isCancelled=!1}static cancelled(){const t=new In;return t.cancel(),t}static create(t){const n=new In;return t&&t.then(()=>n.cancel()),n}static delay(t){return this.create(new Promise(n=>{setTimeout(()=>n(null),t)}))}cancelled(){return this.isCancelled}cancel(){return!this.isCancelled&&this.resolve&&this.resolve(this),this.isCancelled=!0,this.isCancelled}dispose(){this.cancel()}}class Ut{constructor(t,n="",s,o,r){O(this,"listenerKey",Ut.name);O(this,"result",null);O(this,"priority","Normal");O(this,"createdDate",new Date);O(this,"id");O(this,"resolveListener");O(this,"eventName");O(this,"canResolve");O(this,"options");this.eventName=t,this.id=r!=null&&r.ignoreRequestId?"-1":n,s==null||s.then(()=>this.cancel()),this.canResolve=o,this.options=r}init(t){var s;!t||((s=this.options)==null?void 0:s.autoRemoveWhenResolveListenerReturnTrue)?this.result=new Promise((o,r)=>{t?this.resolveListener=a=>{if(a===null)return;const i=t(a);Promise.resolve(i).then(u=>{u&&o(a)}).catch(r)}:this.resolveListener=o}):this.resolveListener=t}maybeHandleEvent(t){var o,r;if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");const{eventName:n,requestId:s}=t;return!((o=this.options)!=null&&o.ignoreRequestId)&&s!==this.id?!1:n===this.eventName?this.canResolve&&!this.canResolve(t)?!1:(this.resolveListener(t),!((r=this.options)!=null&&r.ignoreRequestId)):!1}cancel(){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");return this.result&&this.resolveListener(null),!0}}const si=class si{constructor(){O(this,"activeListeners",[])}static instance(){return si.singleton||(si.singleton=new si),si.singleton}push(t,n,s){return t.init(s),this.activeListeners.push(t),n&&n(),t.result===null?Promise.resolve(null):t.result.then(o=>(this.pop(t),o)).catch(()=>(this.pop(t),null))}pop(t){const n=this.activeListeners.indexOf(t);n>-1&&this.activeListeners.splice(n,1)}findAndHandleListener(t){for(const n of[...this.activeListeners].sort((s,o)=>s.createdDate<o.createdDate?-1:1))if(n.maybeHandleEvent(t))break}};O(si,"singleton",null);let Bt=si;class Gne{notifySidepaneOpened(t){const n={conversationId:t};this.postMessageToBrowser(_ne,n)}notifyConversationId(t){const n={convId:t};this.postMessageToBrowser(Cne,n)}notifyBrowserOnHeaderCommand(t){let n;switch(t){case"sendFeedback":n=Ene;break;case"closePane":n=Sne;break;case"togglePinState":n=wne;break;default:return}this.postMessageToBrowser(n,{})}notifyErrorPageState(t){const n={type:t};this.postMessageToBrowser(Ine,n)}notifyContentSize(t){const n={height:t};this.postMessageToBrowser(Tne,n)}notifyDraggableRegions(t){this.postMessageToBrowser(Hne,t)}notifyMessageSent(t){const n={isOrganic:t};this.postMessageToBrowser(bne,n)}notifyUserClosedSettings(){this.postMessageToBrowser(xne,{})}notifyOpenCopilotSettings(){this.postMessageToBrowser(zne,{})}notifyUserId(t){const n={picassoId:t};this.postMessageToBrowser(yne,n)}notifyEdgeChatReady(){this.postMessageToBrowser(Kte,{})}createTab(t){const n={url:t};this.postMessageToBrowser(cne,n)}lockTabs(t,n){const s={activityId:t,tabIds:n};this.postMessageToBrowser(Dne,s)}releaseTabs(t,n){const s={activityId:t,tabIds:n};this.postMessageToBrowser(jne,s)}showTabs(t){this.postMessageToBrowser(One,t)}async getTabs(t,n){const s=crypto.randomUUID();return Bt.instance().push(new Ut(a6,s,In.create(n).token),()=>{this.postMessageToBrowser(a6,t,s)})}reloadTab(t){this.postMessageToBrowser(lne,t)}updateTab(t){const n={url:t};this.postMessageToBrowser(une,n)}async onTabsActivated(t,n){const s=crypto.randomUUID();return Bt.instance().push(new Ut(o6,s,In.create(t).token),()=>{this.postMessageToBrowser(o6,{},s)},n)}async onTabsUpdated(t,n,s=crypto.randomUUID(),o=void 0){const r=o?{autoRemoveWhenResolveListenerReturnTrue:o}:void 0;return Bt.instance().push(new Ut(r6,s,In.create(t).token,void 0,r),()=>{this.postMessageToBrowser(r6,{},s)},n)}async getQuickLinks(t,n){const s=crypto.randomUUID(),o={count:t};return Bt.instance().push(new Ut(Lne,s,In.create(n).token),()=>{this.postMessageToBrowser(Nne,o,s)})}updateQuickLink(t,n,s){const o={rid:n??-1,url:s??"",title:t};this.postMessageToBrowser(Rne,o)}removeQuickLink(t){const n={rid:t};this.postMessageToBrowser(Pne,n)}async isVisionCapable(t){const n=crypto.randomUUID();return Bt.instance().push(new Ut(Qte,n,In.create(t).token),()=>{this.postMessageToBrowser(Yte,{},n)})}async launchVision(t,n){const s=crypto.randomUUID(),o={formCode:t};return Bt.instance().push(new Ut(Xte,s,In.create(n).token),()=>{this.postMessageToBrowser(Jte,o,s)})}async listenPreference(t,n,s,o){const r=crypto.randomUUID(),a={key:t,notifyOnChange:!0};await Bt.instance().push(new Ut(Gte,void 0,In.create(o).token,n,{ignoreRequestId:!0}),()=>{this.postMessageToBrowser(n6,a,r)},s)}setPreference(t,n){const s={key:t,value:n};this.postMessageToBrowser(n6,s)}async startListeningForSignedInStateChanges(t,n){const s=crypto.randomUUID();return Bt.instance().push(new Ut(i6,s,In.create(t).token),()=>{this.postMessageToBrowser(i6,{},s)},n)}async getPrimaryAccount(){const t=crypto.randomUUID(),n=await Bt.instance().push(new Ut(c6,t),()=>{this.postMessageToBrowser(c6,void 0,t)});return n!=null&&n.args?n.args:null}async acquireToken(t,n,s){const o=crypto.randomUUID(),r={account_id:n.account_id,account_type:n.account_type,client_id:zte,scope_or_resource:s??"",use_msa_v2_api:!0},a=t?mne:fne,i=await Bt.instance().push(new Ut(a,o),()=>{this.postMessageToBrowser(a,r,o)});return i!=null&&i.args?i.args:null}async startEdgeSignIn(){const t=crypto.randomUUID(),n=await Bt.instance().push(new Ut(l6,t),()=>{this.postMessageToBrowser(l6,void 0,t)});return n!=null&&n.args?n.args:null}async startCopilotSignIn(t){const n=crypto.randomUUID(),s=await Bt.instance().push(new Ut(d6,n),()=>{this.postMessageToBrowser(d6,t,n)});return s!=null&&s.args?s.args:null}async startCopilotSignOut(){const t=crypto.randomUUID(),n=await Bt.instance().push(new Ut(m6,t),()=>{this.postMessageToBrowser(m6,void 0,t)});return n!=null&&n.args?n.args:null}async getRealNameAuthStatus(t){const n=crypto.randomUUID(),s=In.delay(t),o=await Bt.instance().push(new Ut(rne,n,s.token),()=>{this.postMessageToBrowser(one,{},n)});return s.cancelled()?null:o!=null&&o.args?o.args:null}async startRealNameAuth(){const t=crypto.randomUUID(),n=await Bt.instance().push(new Ut(ine,t),()=>{this.postMessageToBrowser(ane,{},t)});return n!=null&&n.args?n.args:null}queryAutocomplete(t){const n={query:t,preventInlineAutocomplete:!0};this.postMessageToBrowser(Une,n)}openAutocompleteMatch(t,n,s,o,r){const a={line:t,url:n,areMatchesShowing:!0,mouseButton:s,altKey:!1,ctrlKey:o,metaKey:!1,shiftKey:r};this.postMessageToBrowser(Bne,a)}fetchIsCopilotMode(){this.postMessageToBrowser(Ane,{})}setVideoTime(t){const n={selector:"video",time:t};this.postMessageToBrowser(Vne,n)}async isFeatureEnabled(t){const n={featureNames:t},s=crypto.randomUUID(),o=1e3;return Bt.instance().push(new Ut(Mne,s,In.delay(o).token),()=>{this.postMessageToBrowser(kne,n,s)})}async searchHistory(t,n){const s=crypto.randomUUID();return Bt.instance().push(new Ut(sne,s,In.create(n).token),()=>{this.postMessageToBrowser(nne,t,s)})}async executeBrowserAction(t){const n=crypto.randomUUID();return Bt.instance().push(new Ut(f6,n),()=>{this.postMessageToBrowser(f6,t,n)})}allowActionForUrl(t){const n=crypto.randomUUID();this.postMessageToBrowser(Fne,t,n)}recordMediumTimeMetric(t,n){const s={eventName:t,value:Math.round(n)};this.postMessageToBrowser(dne,s)}async takeScreenshot(){const t=crypto.randomUUID(),n=await Bt.instance().push(new Ut(tne,t),()=>{this.postMessageToBrowser(ene,{range:0},t)});return n!=null&&n.args?n.args:null}async getComputerUse(t,n,s){const o=Date.now().toString(),r={eventType:t,requestId:o,sessionId:n},a=In.create(s),i=await Bt.instance().push(new Ut(hne,o,a.token),()=>{this.postMessageToBrowser(pne,r,o)});if(a.cancelled())return!1;const u=i!=null&&i.args?i.args:null;return(u==null?void 0:u.result)??!1}async makeNaaRequest(t,n){const s=crypto.randomUUID();return Bt.instance().push(new Ut(vne,s,In.create(n).token),()=>{this.postMessageToBrowser(gne,t,s)})}async getDocumentBody(t,n,s,o,r,a){const i={cleanBody:!0,maxChars:n,domSelector:"",frameName:"",retry:1,...o,fetchVideoTranscript:s};return Bt.instance().push(new Ut($te,t,In.create(a).token,r),()=>{this.postMessageToBrowser(Wte,i,t)})}async getCurrentWindow(t){const n=crypto.randomUUID(),s=In.create(t),o=await Bt.instance().push(new Ut(u6,n,s.token),()=>{this.postMessageToBrowser(u6,{},n)});return s.cancelled()?null:o!=null&&o.args?o.args:null}postMessageToBrowser(t,n,s=crypto.randomUUID()){const o={eventName:t,requestId:s,isOutgoing:!0,args:n};window.parent.postMessage(o,Hte())}}const Wne=new Gne;class $ne{constructor(){O(this,"isFeatureAvailableApiSupported");O(this,"enabledFeatures",new Map);this.isFeatureAvailableApiSupported=this.getFeatureAvailableApiSupported()}async isFeatureEnabled(t){return this.enabledFeatures.has(t)||await this.retrieveEnabledFeatures([t]),this.enabledFeatures.get(t)??!1}updateFeatureEnabledForTest(t,n){this.enabledFeatures.set(t,n)}async retrieveEnabledFeatures(t){if(!this.isFeatureAvailableApiSupported)return;await this.waitForNativeBridgeConnected();const n=await Wne.isFeatureEnabled(t);if(n){const s=n.args;for(const o of t){const r=s.featureNames.includes(o);this.enabledFeatures.set(o,r)}}}getFeatureAvailableApiSupported(){if(typeof navigator>"u")return!1;const t=132;for(const n of navigator.userAgent.split(" "))if(n.startsWith("Edg/")){const s=n.split("/")[1];if(s!==void 0){const o=s.split(".")[0];if(o!==void 0)return parseInt(o,10)>=t}}return!1}waitForNativeBridgeConnected(){const t=qe();return t.get(_f)?Promise.resolve():new Promise(n=>{const s=t.sub(_f,()=>{t.get(_f)&&(s(),n())})})}}const Jwe=new $ne;function qne(e){return e!=null&&typeof e=="object"&&"id"in e&&typeof e.id=="number"&&"windowId"in e&&typeof e.windowId=="number"&&"url"in e&&typeof e.url=="string"}function Zne(e){return Array.isArray(e)&&e.every(t=>qne(t))}function Xwe(e=s6){return ye("edge-long-doc-128k")?Zte:ye("edge-long-doc-64k")?s6:ye("edge-long-doc-48k")?qte:e}function p6(e){const t=new Date(e).getTime();if(!Number.isNaN(t))return t}const Kne={OPENED:Zr.OPENED,RECENT:Zr.RECENT,RECENTLY_CLOSED_TAB:Zr.RECENT,HISTORY:Zr.HISTORY};function Yne(e){return e.map(t=>{const n=t.toUpperCase();return Kne[n]??Zr.HISTORY})}const Qne=qe();function Jne(e){Qne.set(xt,t=>Un(t,n=>{for(const{title:s,id:o,updatedAt:r,continuedAt:a,group:i}of e){const u=n.get(o);u?(u.title=s,u.id=o,u.updatedAt=r,u.continuedAt=a,u.group=i??null):n.set(o,{id:o,title:s,updatedAt:r,history:[],continuedAt:a,group:i??null})}}))}const Xne=qe();function ese(e,t,n){nse(e.map(s=>tse(s,t,n)).filter(s=>s!==void 0))}function tse(e,t,n){switch(e.type){case"research":return{id:e.id,conversationId:t,type:e.type,status:e.status,updatedAt:""};case"computerUse":return{id:e.id,conversationId:e.conversationId??"",type:e.type,status:e.status,updatedAt:e.updatedAt??"",title:e.title??"",lastScreenshot:e.lastScreenshot};case"podcast":return{id:e.id,conversationId:t,status:e.status==="completed"?"completed":"running",type:e.type,podcast:e.podcast,updatedAt:e.updatedAt??n};case"videoGeneration":return{id:e.id,conversationId:t,status:e.status,type:e.type,result:e.result,updatedAt:e.updatedAt??n};default:return}}function nse(e){Xne.set(fo,n=>Un(n,s=>{for(const o of e){const r=s.get(o.id);if(r)r.title=o.title,r.conversationId=o.conversationId,r.updatedAt=o.updatedAt,r.status=o.status,r.type=o.type,r.type==="computerUse"&&o.type==="computerUse"&&(r.lastScreenshot=o.lastScreenshot);else{const a={id:o.id,title:o.title,conversationId:o.conversationId,updatedAt:o.updatedAt,status:o.status,type:o.type};a.type==="computerUse"&&o.type==="computerUse"&&(a.chainOfThought=[],a.lastScreenshot=o.lastScreenshot),o.type==="podcast"&&a.type==="podcast"&&(a.podcast=o.podcast),o.type==="videoGeneration"&&a.type==="videoGeneration"&&(a.result=o.result),s.set(o.id,a)}}}));const t=e.filter(n=>n.type==="computerUse"&&n.conversationId).map(n=>{const{conversationId:s,title:o,updatedAt:r}=n;return{id:s??"",title:o,updatedAt:r,continuedAt:null,history:[]}});Jne(t)}const sse=e=>e;function F1(e=sse){const t=l.useRef(null);return l.useEffect(()=>{const n=typeof document<"u"?document:void 0,s=n==null?void 0:n.defaultView;if(!s)return()=>{};const o=eO(s,{autoRoot:{}});return t.current=e(o),()=>{tO(o),t.current=null}},[e]),t}const hp=e=>{F1();const t=nO(e,!0);return l.useMemo(()=>({[sO]:t}),[t])},ose="data-tabster-never-hide",rse=e=>e.hasAttribute(ose);function ase(e){oO(e,void 0,rse),rO(e)}const U1=(e={})=>{const{trapFocus:t,alwaysFocusable:n,legacyTrapFocus:s}=e;F1(ase);const o=l.useId(),r=e.id??`modal-${o}`,a=hp({restorer:{type:bb.Source},...t&&{modalizer:{id:r,isOthersAccessible:!t,isAlwaysAccessible:n,isTrapped:!!s&&!!t}}}),i=hp({restorer:{type:bb.Target}});return{modalAttributes:a,triggerAttributes:i}},RC={type:"spring",mass:.5,stiffness:450,damping:35},ise={type:"spring",mass:.5,stiffness:450,damping:35},eIe={type:"spring",mass:1.8,stiffness:440,damping:40},U2={type:"spring",mass:1.4,stiffness:320,damping:40},E_={type:"spring",mass:1,stiffness:1200,damping:40},w_={type:"spring",mass:1.8,stiffness:640,damping:40},cse={type:"spring",mass:3.2,stiffness:640,damping:40},mn={type:"spring",mass:.5,stiffness:450,damping:35},h6={duration:1.2,ease:"easeInOut",repeat:3,repeatType:"reverse",type:"tween"},I_=.2,__=.25,lse=1.5,use=[.16,1,.3,1];function dse(e,t){const{children:n,id:s,eleId:o,labelById:r,role:a,className:i,mode:u="wait",duration:d=ns.default,exitDuration:m=ns.default,exitDelay:f=0,delay:p=0,delayChildren:g=0,onAnimationComplete:C,"data-testid":v,initial:b="initial"}=e;return c.jsx(pt,{mode:u,children:n&&c.jsx(ge.div,{id:o,"aria-labelledby":r,animate:"animate",exit:"exit",ref:t,role:a,initial:b,variants:{initial:Be,animate:tt,exit:{...Be,transition:{duration:m,delay:f}}},transition:{duration:d,ease:"easeInOut",delay:p,delayChildren:g},className:i,onAnimationComplete:C,"data-testid":v,children:n},s)})}const rn=l.forwardRef(dse),Tl=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M4.20889 10.7327C3.9232 11.0326 3.93475 11.5074 4.23467 11.7931C4.5346 12.0788 5.00933 12.0672 5.29502 11.7673L11.2495 5.516V20.25C11.2495 20.6642 11.5853 21 11.9995 21C12.4137 21 12.7495 20.6642 12.7495 20.25V5.51565L18.7043 11.7673C18.99 12.0672 19.4648 12.0788 19.7647 11.7931C20.0646 11.5074 20.0762 11.0326 19.7905 10.7327L12.7238 3.31379C12.5627 3.14474 12.3573 3.04477 12.1438 3.01386C12.0971 3.00477 12.0489 3 11.9995 3C11.9498 3 11.9012 3.00483 11.8543 3.01406C11.6412 3.04518 11.4363 3.14509 11.2756 3.31379L4.20889 10.7327Z"})),tIe=Object.freeze(Object.defineProperty({__proto__:null,default:Tl},Symbol.toStringTag,{value:"Module"})),nn=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M4.39705 4.55379L4.46967 4.46967C4.73594 4.2034 5.1526 4.1792 5.44621 4.39705L5.53033 4.46967L12 10.939L18.4697 4.46967C18.7626 4.17678 19.2374 4.17678 19.5303 4.46967C19.8232 4.76256 19.8232 5.23744 19.5303 5.53033L13.061 12L19.5303 18.4697C19.7966 18.7359 19.8208 19.1526 19.6029 19.4462L19.5303 19.5303C19.2641 19.7966 18.8474 19.8208 18.5538 19.6029L18.4697 19.5303L12 13.061L5.53033 19.5303C5.23744 19.8232 4.76256 19.8232 4.46967 19.5303C4.17678 19.2374 4.17678 18.7626 4.46967 18.4697L10.939 12L4.46967 5.53033C4.2034 5.26406 4.1792 4.8474 4.39705 4.55379L4.46967 4.46967L4.39705 4.55379Z"})),nIe=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"}));function $i(e,t=!0,n=!1){l.useEffect(()=>{var s;t&&((s=e.current)==null||s.focus({preventScroll:n}))},[e,t,n])}function T_(){const e=l.useRef(null);return{captureFocus:()=>{document.activeElement instanceof HTMLElement&&(e.current=document.activeElement)},restoreFocus:()=>{e.current&&e.current.focus()}}}function qi(){const{i18n:e}=Y();return e.dir(e.language)==="rtl"}function PC(){return on("kill-domain-referrer")?"noopener noreferrer":"noopener"}function mse(e){return e==="."||e==="!"||e==="?"}function fse(e){return e===" "||e===`
`||e==="	"}function pse(e){let t=e.length-1;for(;t>=0&&fse(e[t]);)t-=1;return[e.slice(0,t+1),e.slice(t+1)]}function hse(e,t,n){return e.slice(0,n)+t+e.slice(n)}const gse=/^(?:(?:https?):\/\/)?(?:(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.))+[a-z]{2,}(?:\/[\w%.-]*)*\/?(?:\?[^\s#]*)?(?:#[^\s]*)?$/,vse=/\b((https?:\/\/|www\.)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,})([/?#][\w\-._~:/?#@!$&'()*+,;=%]*)?(?=[\s<>()"'.,!?)}\]]|$)/gi;function B1(e){return gse.test(e)}function Cse(e){return e.startsWith("/attachments/onedrive/")}function sIe(e){return!!Cse(e)}function yse(e){const[t,n]=pse(e),s=mse(t[t.length-1]),o=s?t.slice(0,-1):t;if(B1(o)){const r=s?t[t.length-1]:"";return{url:Jr(o),word:o,suffix:`${r}${n}`}}return{word:e}}function Ts(e){let t="";try{t=new URL(e).hostname}catch{}return t}function B2(e){const t=Ts(e),n=t.match(/^(?:https?:\/\/)?(?:www\.)?([^/]+)/i);return n&&n[1]?n[1]:t}function bse(e,t,n){const{overwrite:s}=n??{};try{const o=new URL(e);for(const[r,a]of Object.entries(t))s&&o.searchParams.delete(r),o.searchParams.append(r,a);return o.toString()}catch{}return e}function co(e){const{formCodeParamOnLinks:t}=ae.instance().config();return t?bse(e,{form:t}):e}function xse(e){return e.replace(/[.,!?]+$/,"")}function Sse(e,t){return!e||t<=0?!1:e[t-1]==="@"||/[\w.-]+@/.test(e.slice(Math.max(0,t-20),t+1))}function oIe(e){const t=[];if(!e)return t;for(const n of e.matchAll(vse)){const s=n[0],{index:o}=n;if(o<0||Sse(e,o))continue;const r=xse(s),a=Jr(r),i=o+r.length;t.push({url:a,from:o,to:i})}return t}function rIe(e){return B1(e)?e:Rw()+e}function aIe(e){const t=e.match(/^(?:https?:\/\/)?(?:www\.)?(.+)/i);return(t&&t[1]?t[1]:e).replace(/\/$/,"")}function iIe(e){return e?B1(e)?e.replace(/\/$/,"").replace(/\//g,"").replace("","//").replace(//g,"  "):e:""}const ls=l.forwardRef((e,t)=>{const{children:n,href:s,className:o,title:r,"aria-controls":a,"aria-expanded":i,"aria-haspopup":u,"aria-label":d,id:m,target:f,onClick:p,onPointerDown:g,onFocus:C}=e,v=PC();return c.jsx("a",{id:m,ref:t,"aria-controls":a,"aria-expanded":i,"aria-haspopup":u,"aria-label":d,className:o,title:r,href:s&&co(s),target:f??"_blank",rel:v,onClick:p,onPointerDown:g,onFocus:C,children:n})});ls.displayName="Link";const A_=l.forwardRef((e,t)=>{const{children:n,...s}=e;return c.jsx(aO,{ref:t,...s,children:n})});A_.displayName="RouterLink";function V1(){return typeof window<"u"}function Ia(e){return k_(e)?(e.nodeName||"").toLowerCase():"#document"}function us(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $o(e){var t;return(t=(k_(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function k_(e){return V1()?e instanceof Node||e instanceof us(e).Node:!1}function Ot(e){return V1()?e instanceof Element||e instanceof us(e).Element:!1}function gn(e){return V1()?e instanceof HTMLElement||e instanceof us(e).HTMLElement:!1}function V2(e){return!V1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof us(e).ShadowRoot}const Ese=new Set(["inline","contents"]);function rm(e){const{overflow:t,overflowX:n,overflowY:s,display:o}=Ms(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!Ese.has(o)}const wse=new Set(["table","td","th"]);function Ise(e){return wse.has(Ia(e))}const _se=[":popover-open",":modal"];function H1(e){return _se.some(t=>{try{return e.matches(t)}catch{return!1}})}const Tse=["transform","translate","scale","rotate","perspective"],Ase=["transform","translate","scale","rotate","perspective","filter"],kse=["paint","layout","strict","content"];function LC(e){const t=z1(),n=Ot(e)?Ms(e):e;return Tse.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Ase.some(s=>(n.willChange||"").includes(s))||kse.some(s=>(n.contain||"").includes(s))}function Mse(e){let t=mr(e);for(;gn(t)&&!ar(t);){if(LC(t))return t;if(H1(t))return null;t=mr(t)}return null}function z1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Nse=new Set(["html","body","#document"]);function ar(e){return Nse.has(Ia(e))}function Ms(e){return us(e).getComputedStyle(e)}function G1(e){return Ot(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function mr(e){if(Ia(e)==="html")return e;const t=e.assignedSlot||e.parentNode||V2(e)&&e.host||$o(e);return V2(t)?t.host:t}function M_(e){const t=mr(e);return ar(t)?e.ownerDocument?e.ownerDocument.body:e.body:gn(t)&&rm(t)?t:M_(t)}function na(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=M_(e),r=o===((s=e.ownerDocument)==null?void 0:s.body),a=us(o);if(r){const i=H2(a);return t.concat(a,a.visualViewport||[],rm(o)?o:[],i&&n?na(i):[])}return t.concat(o,na(o,[],n))}function H2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function io(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Ln(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&V2(n)){let s=t;for(;s;){if(e===s)return!0;s=s.parentNode||s.host}}return!1}function N_(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function R_(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:s}=t;return n+"/"+s}).join(" "):navigator.userAgent}function P_(e){return e.mozInputSource===0&&e.isTrusted?!0:z2()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function OC(e){return Pse()?!1:!z2()&&e.width===0&&e.height===0||z2()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function L_(){return/apple/i.test(navigator.vendor)}function z2(){const e=/android/i;return e.test(N_())||e.test(R_())}function Rse(){return N_().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Pse(){return R_().includes("jsdom/")}function cd(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function Lse(e){return"nativeEvent"in e}function Ose(e){return e.matches("html,body")}function Dn(e){return(e==null?void 0:e.ownerDocument)||document}function Mg(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Vr(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Dse="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function DC(e){return gn(e)&&e.matches(Dse)}function On(e){e.preventDefault(),e.stopPropagation()}function O_(e){return e?e.getAttribute("role")==="combobox"&&DC(e):!1}const jse=["top","right","bottom","left"],ma=Math.min,Es=Math.max,gp=Math.round,Rc=Math.floor,Bo=e=>({x:e,y:e}),Fse={left:"right",right:"left",bottom:"top",top:"bottom"},Use={start:"end",end:"start"};function G2(e,t,n){return Es(e,ma(t,n))}function Zi(e,t){return typeof e=="function"?e(t):e}function fa(e){return e.split("-")[0]}function Al(e){return e.split("-")[1]}function D_(e){return e==="x"?"y":"x"}function jC(e){return e==="y"?"height":"width"}const Bse=new Set(["top","bottom"]);function or(e){return Bse.has(fa(e))?"y":"x"}function FC(e){return D_(or(e))}function Vse(e,t,n){n===void 0&&(n=!1);const s=Al(e),o=FC(e),r=jC(o);let a=o==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(a=vp(a)),[a,vp(a)]}function Hse(e){const t=vp(e);return[W2(e),t,W2(t)]}function W2(e){return e.replace(/start|end/g,t=>Use[t])}const g6=["left","right"],v6=["right","left"],zse=["top","bottom"],Gse=["bottom","top"];function Wse(e,t,n){switch(e){case"top":case"bottom":return n?t?v6:g6:t?g6:v6;case"left":case"right":return t?zse:Gse;default:return[]}}function $se(e,t,n,s){const o=Al(e);let r=Wse(fa(e),n==="start",s);return o&&(r=r.map(a=>a+"-"+o),t&&(r=r.concat(r.map(W2)))),r}function vp(e){return e.replace(/left|right|bottom|top/g,t=>Fse[t])}function qse(e){return{top:0,right:0,bottom:0,left:0,...e}}function j_(e){return typeof e!="number"?qse(e):{top:e,right:e,bottom:e,left:e}}function Cp(e){const{x:t,y:n,width:s,height:o}=e;return{width:s,height:o,top:n,left:t,right:t+s,bottom:n+o,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Zse=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],yp=Zse.join(","),F_=typeof Element>"u",ul=F_?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,bp=!F_&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},xp=function e(t,n){var s;n===void 0&&(n=!0);var o=t==null||(s=t.getAttribute)===null||s===void 0?void 0:s.call(t,"inert"),r=o===""||o==="true",a=r||n&&t&&e(t.parentNode);return a},Kse=function(t){var n,s=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return s===""||s==="true"},Yse=function(t,n,s){if(xp(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(yp));return n&&ul.call(t,yp)&&o.unshift(t),o=o.filter(s),o},Qse=function e(t,n,s){for(var o=[],r=Array.from(t);r.length;){var a=r.shift();if(!xp(a,!1))if(a.tagName==="SLOT"){var i=a.assignedElements(),u=i.length?i:a.children,d=e(u,!0,s);s.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else{var m=ul.call(a,yp);m&&s.filter(a)&&(n||!t.includes(a))&&o.push(a);var f=a.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(a),p=!xp(f,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(a));if(f&&p){var g=e(f===!0?a.children:f.children,!0,s);s.flatten?o.push.apply(o,g):o.push({scopeParent:a,candidates:g})}else r.unshift.apply(r,a.children)}}return o},U_=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},B_=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Kse(t))&&!U_(t)?0:t.tabIndex},Jse=function(t,n){var s=B_(t);return s<0&&n&&!U_(t)?0:s},Xse=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},V_=function(t){return t.tagName==="INPUT"},eoe=function(t){return V_(t)&&t.type==="hidden"},toe=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(s){return s.tagName==="SUMMARY"});return n},noe=function(t,n){for(var s=0;s<t.length;s++)if(t[s].checked&&t[s].form===n)return t[s]},soe=function(t){if(!t.name)return!0;var n=t.form||bp(t),s=function(i){return n.querySelectorAll('input[type="radio"][name="'+i+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=s(window.CSS.escape(t.name));else try{o=s(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var r=noe(o,t.form);return!r||r===t},ooe=function(t){return V_(t)&&t.type==="radio"},roe=function(t){return ooe(t)&&!soe(t)},aoe=function(t){var n,s=t&&bp(t),o=(n=s)===null||n===void 0?void 0:n.host,r=!1;if(s&&s!==t){var a,i,u;for(r=!!((a=o)!==null&&a!==void 0&&(i=a.ownerDocument)!==null&&i!==void 0&&i.contains(o)||t!=null&&(u=t.ownerDocument)!==null&&u!==void 0&&u.contains(t));!r&&o;){var d,m,f;s=bp(o),o=(d=s)===null||d===void 0?void 0:d.host,r=!!((m=o)!==null&&m!==void 0&&(f=m.ownerDocument)!==null&&f!==void 0&&f.contains(o))}}return r},C6=function(t){var n=t.getBoundingClientRect(),s=n.width,o=n.height;return s===0&&o===0},ioe=function(t,n){var s=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var r=ul.call(t,"details>summary:first-of-type"),a=r?t.parentElement:t;if(ul.call(a,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof o=="function"){for(var i=t;t;){var u=t.parentElement,d=bp(t);if(u&&!u.shadowRoot&&o(u)===!0)return C6(t);t.assignedSlot?t=t.assignedSlot:!u&&d!==t.ownerDocument?t=d.host:t=u}t=i}if(aoe(t))return!t.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return C6(t);return!1},coe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var s=0;s<n.children.length;s++){var o=n.children.item(s);if(o.tagName==="LEGEND")return ul.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},loe=function(t,n){return!(n.disabled||xp(n)||eoe(n)||ioe(n,t)||toe(n)||coe(n))},$2=function(t,n){return!(roe(n)||B_(n)<0||!loe(t,n))},uoe=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},doe=function e(t){var n=[],s=[];return t.forEach(function(o,r){var a=!!o.scopeParent,i=a?o.scopeParent:o,u=Jse(i,a),d=a?e(o.candidates):i;u===0?a?n.push.apply(n,d):n.push(i):s.push({documentOrder:r,tabIndex:u,item:o,isScope:a,content:d})}),s.sort(Xse).reduce(function(o,r){return r.isScope?o.push.apply(o,r.content):o.push(r.content),o},[]).concat(n)},W1=function(t,n){n=n||{};var s;return n.getShadowRoot?s=Qse([t],n.includeContainer,{filter:$2.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:uoe}):s=Yse(t,n.includeContainer,$2.bind(null,n)),doe(s)},moe=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return ul.call(t,yp)===!1?!1:$2(n,t)};function y6(e,t,n){let{reference:s,floating:o}=e;const r=or(t),a=FC(t),i=jC(a),u=fa(t),d=r==="y",m=s.x+s.width/2-o.width/2,f=s.y+s.height/2-o.height/2,p=s[i]/2-o[i]/2;let g;switch(u){case"top":g={x:m,y:s.y-o.height};break;case"bottom":g={x:m,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:f};break;case"left":g={x:s.x-o.width,y:f};break;default:g={x:s.x,y:s.y}}switch(Al(t)){case"start":g[a]-=p*(n&&d?-1:1);break;case"end":g[a]+=p*(n&&d?-1:1);break}return g}const foe=async(e,t,n)=>{const{placement:s="bottom",strategy:o="absolute",middleware:r=[],platform:a}=n,i=r.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:m,y:f}=y6(d,s,u),p=s,g={},C=0;for(let v=0;v<i.length;v++){const{name:b,fn:y}=i[v],{x:E,y:x,data:I,reset:_}=await y({x:m,y:f,initialPlacement:s,placement:p,strategy:o,middlewareData:g,rects:d,platform:a,elements:{reference:e,floating:t}});m=E??m,f=x??f,g={...g,[b]:{...g[b],...I}},_&&C<=50&&(C++,typeof _=="object"&&(_.placement&&(p=_.placement),_.rects&&(d=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:o}):_.rects),{x:m,y:f}=y6(d,p,u)),v=-1)}return{x:m,y:f,placement:p,strategy:o,middlewareData:g}};async function ld(e,t){var n;t===void 0&&(t={});const{x:s,y:o,platform:r,rects:a,elements:i,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Zi(t,e),C=j_(g),b=i[p?f==="floating"?"reference":"floating":f],y=Cp(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(b)))==null||n?b:b.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(i.floating)),boundary:d,rootBoundary:m,strategy:u})),E=f==="floating"?{x:s,y:o,width:a.floating.width,height:a.floating.height}:a.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(i.floating)),I=await(r.isElement==null?void 0:r.isElement(x))?await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1}:{x:1,y:1},_=Cp(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:E,offsetParent:x,strategy:u}):E);return{top:(y.top-_.top+C.top)/I.y,bottom:(_.bottom-y.bottom+C.bottom)/I.y,left:(y.left-_.left+C.left)/I.x,right:(_.right-y.right+C.right)/I.x}}const poe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:o,rects:r,platform:a,elements:i,middlewareData:u}=t,{element:d,padding:m=0}=Zi(e,t)||{};if(d==null)return{};const f=j_(m),p={x:n,y:s},g=FC(o),C=jC(g),v=await a.getDimensions(d),b=g==="y",y=b?"top":"left",E=b?"bottom":"right",x=b?"clientHeight":"clientWidth",I=r.reference[C]+r.reference[g]-p[g]-r.floating[C],_=p[g]-r.reference[g],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let A=T?T[x]:0;(!A||!await(a.isElement==null?void 0:a.isElement(T)))&&(A=i.floating[x]||r.floating[C]);const k=I/2-_/2,R=A/2-v[C]/2-1,P=ma(f[y],R),B=ma(f[E],R),U=P,$=A-v[C]-B,Q=A/2-v[C]/2+k,te=G2(U,Q,$),X=!u.arrow&&Al(o)!=null&&Q!==te&&r.reference[C]/2-(Q<U?P:B)-v[C]/2<0,ne=X?Q<U?Q-U:Q-$:0;return{[g]:p[g]+ne,data:{[g]:te,centerOffset:Q-te-ne,...X&&{alignmentOffset:ne}},reset:X}}}),hoe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:o,middlewareData:r,rects:a,initialPlacement:i,platform:u,elements:d}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:v=!0,...b}=Zi(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const y=fa(o),E=or(i),x=fa(i)===i,I=await(u.isRTL==null?void 0:u.isRTL(d.floating)),_=p||(x||!v?[vp(i)]:Hse(i)),T=C!=="none";!p&&T&&_.push(...$se(i,v,C,I));const A=[i,..._],k=await ld(t,b),R=[];let P=((s=r.flip)==null?void 0:s.overflows)||[];if(m&&R.push(k[y]),f){const Q=Vse(o,a,I);R.push(k[Q[0]],k[Q[1]])}if(P=[...P,{placement:o,overflows:R}],!R.every(Q=>Q<=0)){var B,U;const Q=(((B=r.flip)==null?void 0:B.index)||0)+1,te=A[Q];if(te&&(!(f==="alignment"?E!==or(te):!1)||P.every(q=>or(q.placement)===E?q.overflows[0]>0:!0)))return{data:{index:Q,overflows:P},reset:{placement:te}};let X=(U=P.filter(ne=>ne.overflows[0]<=0).sort((ne,q)=>ne.overflows[1]-q.overflows[1])[0])==null?void 0:U.placement;if(!X)switch(g){case"bestFit":{var $;const ne=($=P.filter(q=>{if(T){const Z=or(q.placement);return Z===E||Z==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Z=>Z>0).reduce((Z,J)=>Z+J,0)]).sort((q,Z)=>q[1]-Z[1])[0])==null?void 0:$[0];ne&&(X=ne);break}case"initialPlacement":X=i;break}if(o!==X)return{reset:{placement:X}}}return{}}}};function b6(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function x6(e){return jse.some(t=>e[t]>=0)}const goe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...o}=Zi(e,t);switch(s){case"referenceHidden":{const r=await ld(t,{...o,elementContext:"reference"}),a=b6(r,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:x6(a)}}}case"escaped":{const r=await ld(t,{...o,altBoundary:!0}),a=b6(r,n.floating);return{data:{escapedOffsets:a,escaped:x6(a)}}}default:return{}}}}},voe=new Set(["left","top"]);async function Coe(e,t){const{placement:n,platform:s,elements:o}=e,r=await(s.isRTL==null?void 0:s.isRTL(o.floating)),a=fa(n),i=Al(n),u=or(n)==="y",d=voe.has(a)?-1:1,m=r&&u?-1:1,f=Zi(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:C}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return i&&typeof C=="number"&&(g=i==="end"?C*-1:C),u?{x:g*m,y:p*d}:{x:p*d,y:g*m}}const yoe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:o,y:r,placement:a,middlewareData:i}=t,u=await Coe(t,e);return a===((n=i.offset)==null?void 0:n.placement)&&(s=i.arrow)!=null&&s.alignmentOffset?{}:{x:o+u.x,y:r+u.y,data:{...u,placement:a}}}}},boe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:o}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:i={fn:b=>{let{x:y,y:E}=b;return{x:y,y:E}}},...u}=Zi(e,t),d={x:n,y:s},m=await ld(t,u),f=or(fa(o)),p=D_(f);let g=d[p],C=d[f];if(r){const b=p==="y"?"top":"left",y=p==="y"?"bottom":"right",E=g+m[b],x=g-m[y];g=G2(E,g,x)}if(a){const b=f==="y"?"top":"left",y=f==="y"?"bottom":"right",E=C+m[b],x=C-m[y];C=G2(E,C,x)}const v=i.fn({...t,[p]:g,[f]:C});return{...v,data:{x:v.x-n,y:v.y-s,enabled:{[p]:r,[f]:a}}}}}},xoe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:o,rects:r,platform:a,elements:i}=t,{apply:u=()=>{},...d}=Zi(e,t),m=await ld(t,d),f=fa(o),p=Al(o),g=or(o)==="y",{width:C,height:v}=r.floating;let b,y;f==="top"||f==="bottom"?(b=f,y=p===(await(a.isRTL==null?void 0:a.isRTL(i.floating))?"start":"end")?"left":"right"):(y=f,b=p==="end"?"top":"bottom");const E=v-m.top-m.bottom,x=C-m.left-m.right,I=ma(v-m[b],E),_=ma(C-m[y],x),T=!t.middlewareData.shift;let A=I,k=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(k=x),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(A=E),T&&!p){const P=Es(m.left,0),B=Es(m.right,0),U=Es(m.top,0),$=Es(m.bottom,0);g?k=C-2*(P!==0||B!==0?P+B:Es(m.left,m.right)):A=v-2*(U!==0||$!==0?U+$:Es(m.top,m.bottom))}await u({...t,availableWidth:k,availableHeight:A});const R=await a.getDimensions(i.floating);return C!==R.width||v!==R.height?{reset:{rects:!0}}:{}}}};function H_(e){const t=Ms(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const o=gn(e),r=o?e.offsetWidth:n,a=o?e.offsetHeight:s,i=gp(n)!==r||gp(s)!==a;return i&&(n=r,s=a),{width:n,height:s,$:i}}function UC(e){return Ot(e)?e:e.contextElement}function Hc(e){const t=UC(e);if(!gn(t))return Bo(1);const n=t.getBoundingClientRect(),{width:s,height:o,$:r}=H_(t);let a=(r?gp(n.width):n.width)/s,i=(r?gp(n.height):n.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!i||!Number.isFinite(i))&&(i=1),{x:a,y:i}}const Soe=Bo(0);function z_(e){const t=us(e);return!z1()||!t.visualViewport?Soe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Eoe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==us(e)?!1:t}function Ei(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),r=UC(e);let a=Bo(1);t&&(s?Ot(s)&&(a=Hc(s)):a=Hc(e));const i=Eoe(r,n,s)?z_(r):Bo(0);let u=(o.left+i.x)/a.x,d=(o.top+i.y)/a.y,m=o.width/a.x,f=o.height/a.y;if(r){const p=us(r),g=s&&Ot(s)?us(s):s;let C=p,v=H2(C);for(;v&&s&&g!==C;){const b=Hc(v),y=v.getBoundingClientRect(),E=Ms(v),x=y.left+(v.clientLeft+parseFloat(E.paddingLeft))*b.x,I=y.top+(v.clientTop+parseFloat(E.paddingTop))*b.y;u*=b.x,d*=b.y,m*=b.x,f*=b.y,u+=x,d+=I,C=us(v),v=H2(C)}}return Cp({width:m,height:f,x:u,y:d})}function $1(e,t){const n=G1(e).scrollLeft;return t?t.left+n:Ei($o(e)).left+n}function G_(e,t){const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-$1(e,n),o=n.top+t.scrollTop;return{x:s,y:o}}function woe(e){let{elements:t,rect:n,offsetParent:s,strategy:o}=e;const r=o==="fixed",a=$o(s),i=t?H1(t.floating):!1;if(s===a||i&&r)return n;let u={scrollLeft:0,scrollTop:0},d=Bo(1);const m=Bo(0),f=gn(s);if((f||!f&&!r)&&((Ia(s)!=="body"||rm(a))&&(u=G1(s)),gn(s))){const g=Ei(s);d=Hc(s),m.x=g.x+s.clientLeft,m.y=g.y+s.clientTop}const p=a&&!f&&!r?G_(a,u):Bo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+m.x+p.x,y:n.y*d.y-u.scrollTop*d.y+m.y+p.y}}function Ioe(e){return Array.from(e.getClientRects())}function _oe(e){const t=$o(e),n=G1(e),s=e.ownerDocument.body,o=Es(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=Es(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let a=-n.scrollLeft+$1(e);const i=-n.scrollTop;return Ms(s).direction==="rtl"&&(a+=Es(t.clientWidth,s.clientWidth)-o),{width:o,height:r,x:a,y:i}}const S6=25;function Toe(e,t){const n=us(e),s=$o(e),o=n.visualViewport;let r=s.clientWidth,a=s.clientHeight,i=0,u=0;if(o){r=o.width,a=o.height;const m=z1();(!m||m&&t==="fixed")&&(i=o.offsetLeft,u=o.offsetTop)}const d=$1(s);if(d<=0){const m=s.ownerDocument,f=m.body,p=getComputedStyle(f),g=m.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,C=Math.abs(s.clientWidth-f.clientWidth-g);C<=S6&&(r-=C)}else d<=S6&&(r+=d);return{width:r,height:a,x:i,y:u}}const Aoe=new Set(["absolute","fixed"]);function koe(e,t){const n=Ei(e,!0,t==="fixed"),s=n.top+e.clientTop,o=n.left+e.clientLeft,r=gn(e)?Hc(e):Bo(1),a=e.clientWidth*r.x,i=e.clientHeight*r.y,u=o*r.x,d=s*r.y;return{width:a,height:i,x:u,y:d}}function E6(e,t,n){let s;if(t==="viewport")s=Toe(e,n);else if(t==="document")s=_oe($o(e));else if(Ot(t))s=koe(t,n);else{const o=z_(e);s={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Cp(s)}function W_(e,t){const n=mr(e);return n===t||!Ot(n)||ar(n)?!1:Ms(n).position==="fixed"||W_(n,t)}function Moe(e,t){const n=t.get(e);if(n)return n;let s=na(e,[],!1).filter(i=>Ot(i)&&Ia(i)!=="body"),o=null;const r=Ms(e).position==="fixed";let a=r?mr(e):e;for(;Ot(a)&&!ar(a);){const i=Ms(a),u=LC(a);!u&&i.position==="fixed"&&(o=null),(r?!u&&!o:!u&&i.position==="static"&&!!o&&Aoe.has(o.position)||rm(a)&&!u&&W_(e,a))?s=s.filter(m=>m!==a):o=i,a=mr(a)}return t.set(e,s),s}function Noe(e){let{element:t,boundary:n,rootBoundary:s,strategy:o}=e;const a=[...n==="clippingAncestors"?H1(t)?[]:Moe(t,this._c):[].concat(n),s],i=a[0],u=a.reduce((d,m)=>{const f=E6(t,m,o);return d.top=Es(f.top,d.top),d.right=ma(f.right,d.right),d.bottom=ma(f.bottom,d.bottom),d.left=Es(f.left,d.left),d},E6(t,i,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Roe(e){const{width:t,height:n}=H_(e);return{width:t,height:n}}function Poe(e,t,n){const s=gn(t),o=$o(t),r=n==="fixed",a=Ei(e,!0,r,t);let i={scrollLeft:0,scrollTop:0};const u=Bo(0);function d(){u.x=$1(o)}if(s||!s&&!r)if((Ia(t)!=="body"||rm(o))&&(i=G1(t)),s){const g=Ei(t,!0,r,t);u.x=g.x+t.clientLeft,u.y=g.y+t.clientTop}else o&&d();r&&!s&&o&&d();const m=o&&!s&&!r?G_(o,i):Bo(0),f=a.left+i.scrollLeft-u.x-m.x,p=a.top+i.scrollTop-u.y-m.y;return{x:f,y:p,width:a.width,height:a.height}}function Ng(e){return Ms(e).position==="static"}function w6(e,t){if(!gn(e)||Ms(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return $o(e)===n&&(n=n.ownerDocument.body),n}function $_(e,t){const n=us(e);if(H1(e))return n;if(!gn(e)){let o=mr(e);for(;o&&!ar(o);){if(Ot(o)&&!Ng(o))return o;o=mr(o)}return n}let s=w6(e,t);for(;s&&Ise(s)&&Ng(s);)s=w6(s,t);return s&&ar(s)&&Ng(s)&&!LC(s)?n:s||Mse(e)||n}const Loe=async function(e){const t=this.getOffsetParent||$_,n=this.getDimensions,s=await n(e.floating);return{reference:Poe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Ooe(e){return Ms(e).direction==="rtl"}const Doe={convertOffsetParentRelativeRectToViewportRelativeRect:woe,getDocumentElement:$o,getClippingRect:Noe,getOffsetParent:$_,getElementRects:Loe,getClientRects:Ioe,getDimensions:Roe,getScale:Hc,isElement:Ot,isRTL:Ooe};function q_(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function joe(e,t){let n=null,s;const o=$o(e);function r(){var i;clearTimeout(s),(i=n)==null||i.disconnect(),n=null}function a(i,u){i===void 0&&(i=!1),u===void 0&&(u=1),r();const d=e.getBoundingClientRect(),{left:m,top:f,width:p,height:g}=d;if(i||t(),!p||!g)return;const C=Rc(f),v=Rc(o.clientWidth-(m+p)),b=Rc(o.clientHeight-(f+g)),y=Rc(m),x={rootMargin:-C+"px "+-v+"px "+-b+"px "+-y+"px",threshold:Es(0,ma(1,u))||1};let I=!0;function _(T){const A=T[0].intersectionRatio;if(A!==u){if(!I)return a();A?a(!1,A):s=setTimeout(()=>{a(!1,1e-7)},1e3)}A===1&&!q_(d,e.getBoundingClientRect())&&a(),I=!1}try{n=new IntersectionObserver(_,{...x,root:o.ownerDocument})}catch{n=new IntersectionObserver(_,x)}n.observe(e)}return a(!0),r}function _a(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:o=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,d=UC(e),m=o||r?[...d?na(d):[],...na(t)]:[];m.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),r&&y.addEventListener("resize",n)});const f=d&&i?joe(d,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(y=>{let[E]=y;E&&E.target===d&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var x;(x=g)==null||x.observe(t)})),n()}),d&&!u&&g.observe(d),g.observe(t));let C,v=u?Ei(e):null;u&&b();function b(){const y=Ei(e);v&&!q_(v,y)&&n(),v=y,C=requestAnimationFrame(b)}return n(),()=>{var y;m.forEach(E=>{o&&E.removeEventListener("scroll",n),r&&E.removeEventListener("resize",n)}),f==null||f(),(y=g)==null||y.disconnect(),g=null,u&&cancelAnimationFrame(C)}}const Foe=yoe,Uoe=boe,Boe=hoe,Voe=xoe,Hoe=goe,I6=poe,zoe=(e,t,n)=>{const s=new Map,o={platform:Doe,...n},r={...o.platform,_c:s};return foe(e,t,{...o,platform:r})};var Goe=typeof document<"u",Woe=function(){},Mf=Goe?l.useLayoutEffect:Woe;function Sp(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Sp(e[s],t[s]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,o[s]))return!1;for(s=n;s--!==0;){const r=o[s];if(!(r==="_owner"&&e.$$typeof)&&!Sp(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function Z_(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _6(e,t){const n=Z_(e);return Math.round(t*n)/n}function Rg(e){const t=l.useRef(e);return Mf(()=>{t.current=e}),t}function BC(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:o,elements:{reference:r,floating:a}={},transform:i=!0,whileElementsMounted:u,open:d}=e,[m,f]=l.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=l.useState(s);Sp(p,s)||g(s);const[C,v]=l.useState(null),[b,y]=l.useState(null),E=l.useCallback(q=>{q!==T.current&&(T.current=q,v(q))},[]),x=l.useCallback(q=>{q!==A.current&&(A.current=q,y(q))},[]),I=r||C,_=a||b,T=l.useRef(null),A=l.useRef(null),k=l.useRef(m),R=u!=null,P=Rg(u),B=Rg(o),U=Rg(d),$=l.useCallback(()=>{if(!T.current||!A.current)return;const q={placement:t,strategy:n,middleware:p};B.current&&(q.platform=B.current),zoe(T.current,A.current,q).then(Z=>{const J={...Z,isPositioned:U.current!==!1};Q.current&&!Sp(k.current,J)&&(k.current=J,pl.flushSync(()=>{f(J)}))})},[p,t,n,B,U]);Mf(()=>{d===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(q=>({...q,isPositioned:!1})))},[d]);const Q=l.useRef(!1);Mf(()=>(Q.current=!0,()=>{Q.current=!1}),[]),Mf(()=>{if(I&&(T.current=I),_&&(A.current=_),I&&_){if(P.current)return P.current(I,_,$);$()}},[I,_,$,P,R]);const te=l.useMemo(()=>({reference:T,floating:A,setReference:E,setFloating:x}),[E,x]),X=l.useMemo(()=>({reference:I,floating:_}),[I,_]),ne=l.useMemo(()=>{const q={position:n,left:0,top:0};if(!X.floating)return q;const Z=_6(X.floating,m.x),J=_6(X.floating,m.y);return i?{...q,transform:"translate("+Z+"px, "+J+"px)",...Z_(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:J}},[n,i,X.floating,m.x,m.y]);return l.useMemo(()=>({...m,update:$,refs:te,elements:X,floatingStyles:ne}),[m,$,te,X,ne])}const $oe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:o}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?I6({element:s.current,padding:o}).fn(n):{}:s?I6({element:s,padding:o}).fn(n):{}}}},pa=(e,t)=>({...Foe(e),options:[e,t]}),ha=(e,t)=>({...Uoe(e),options:[e,t]}),kl=(e,t)=>({...Boe(e),options:[e,t]}),K_=(e,t)=>({...Voe(e),options:[e,t]}),qoe=(e,t)=>({...Hoe(e),options:[e,t]}),Y_=(e,t)=>({...$oe(e),options:[e,t]});function ud(e){return l.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const Q_={...iO},Zoe=Q_.useInsertionEffect,Koe=Zoe||(e=>e());function yn(e){const t=l.useRef(()=>{});return Koe(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t.current==null?void 0:t.current(...s)},[])}const VC="ArrowUp",am="ArrowDown",sa="ArrowLeft",oa="ArrowRight";function Jm(e,t,n){return Math.floor(e/t)!==n}function Fu(e,t){return t<0||t>=e.current.length}function Pg(e,t){return zn(e,{disabledIndices:t})}function T6(e,t){return zn(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function zn(e,t){let{startingIndex:n=-1,decrement:s=!1,disabledIndices:o,amount:r=1}=t===void 0?{}:t;const a=e.current;let i=n;do i+=s?-r:r;while(i>=0&&i<=a.length-1&&Nf(a,i,o));return i}function Yoe(e,t){let{event:n,orientation:s,loop:o,rtl:r,cols:a,disabledIndices:i,minIndex:u,maxIndex:d,prevIndex:m,stopEvent:f=!1}=t,p=m;if(n.key===VC){if(f&&On(n),m===-1)p=d;else if(p=zn(e,{startingIndex:p,amount:a,decrement:!0,disabledIndices:i}),o&&(m-a<u||p<0)){const g=m%a,C=d%a,v=d-(C-g);C===g?p=d:p=C>g?v:v-a}Fu(e,p)&&(p=m)}if(n.key===am&&(f&&On(n),m===-1?p=u:(p=zn(e,{startingIndex:m,amount:a,disabledIndices:i}),o&&m+a>d&&(p=zn(e,{startingIndex:m%a-a,amount:a,disabledIndices:i}))),Fu(e,p)&&(p=m)),s==="both"){const g=Rc(m/a);n.key===(r?sa:oa)&&(f&&On(n),m%a!==a-1?(p=zn(e,{startingIndex:m,disabledIndices:i}),o&&Jm(p,a,g)&&(p=zn(e,{startingIndex:m-m%a-1,disabledIndices:i}))):o&&(p=zn(e,{startingIndex:m-m%a-1,disabledIndices:i})),Jm(p,a,g)&&(p=m)),n.key===(r?oa:sa)&&(f&&On(n),m%a!==0?(p=zn(e,{startingIndex:m,decrement:!0,disabledIndices:i}),o&&Jm(p,a,g)&&(p=zn(e,{startingIndex:m+(a-m%a),decrement:!0,disabledIndices:i}))):o&&(p=zn(e,{startingIndex:m+(a-m%a),decrement:!0,disabledIndices:i})),Jm(p,a,g)&&(p=m));const C=Rc(d/a)===g;Fu(e,p)&&(o&&C?p=n.key===(r?oa:sa)?d:zn(e,{startingIndex:m-m%a-1,disabledIndices:i}):p=m)}return p}function Qoe(e,t,n){const s=[];let o=0;return e.forEach((r,a)=>{let{width:i,height:u}=r,d=!1;for(n&&(o=0);!d;){const m=[];for(let f=0;f<i;f++)for(let p=0;p<u;p++)m.push(o+f+p*t);o%t+i<=t&&m.every(f=>s[f]==null)?(m.forEach(f=>{s[f]=a}),d=!0):o++}}),[...s]}function Joe(e,t,n,s,o){if(e===-1)return-1;const r=n.indexOf(e),a=t[e];switch(o){case"tl":return r;case"tr":return a?r+a.width-1:r;case"bl":return a?r+(a.height-1)*s:r;case"br":return n.lastIndexOf(e)}}function Xoe(e,t){return t.flatMap((n,s)=>e.includes(n)?[s]:[])}function Nf(e,t,n){if(n)return n.includes(t);const s=e[t];return s==null||s.hasAttribute("disabled")||s.getAttribute("aria-disabled")==="true"}var Wt=typeof document<"u"?l.useLayoutEffect:l.useEffect;let A6=!1,ere=0;const k6=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+ere++;function tre(){const[e,t]=l.useState(()=>A6?k6():void 0);return Wt(()=>{e==null&&t(k6())},[]),l.useEffect(()=>{A6=!0},[]),e}const nre=Q_.useId,im=nre||tre,sre=l.forwardRef(function(t,n){const{context:{placement:s,elements:{floating:o},middlewareData:{arrow:r,shift:a}},width:i=14,height:u=7,tipRadius:d=0,strokeWidth:m=0,staticOffset:f,stroke:p,d:g,style:{transform:C,...v}={},...b}=t,y=im(),[E,x]=l.useState(!1);if(Wt(()=>{if(!o)return;Ms(o).direction==="rtl"&&x(!0)},[o]),!o)return null;const[I,_]=s.split("-"),T=I==="top"||I==="bottom";let A=f;(T&&a!=null&&a.x||!T&&a!=null&&a.y)&&(A=null);const k=m*2,R=k/2,P=i/2*(d/-8+1),B=u/2*d/4,U=!!g,$=A&&_==="end"?"bottom":"top";let Q=A&&_==="end"?"right":"left";A&&E&&(Q=_==="end"?"left":"right");const te=(r==null?void 0:r.x)!=null?A||r.x:"",X=(r==null?void 0:r.y)!=null?A||r.y:"",ne=g||"M0,0"+(" H"+i)+(" L"+(i-P)+","+(u-B))+(" Q"+i/2+","+u+" "+P+","+(u-B))+" Z",q={top:U?"rotate(180deg)":"",left:U?"rotate(90deg)":"rotate(-90deg)",bottom:U?"":"rotate(180deg)",right:U?"rotate(-90deg)":"rotate(90deg)"}[I];return c.jsxs("svg",{...b,"aria-hidden":!0,ref:n,width:U?i:i+k,height:i,viewBox:"0 0 "+i+" "+(u>i?u:i),style:{position:"absolute",pointerEvents:"none",[Q]:te,[$]:X,[I]:T||U?"100%":"calc(100% - "+k/2+"px)",transform:[q,C].filter(Z=>!!Z).join(" "),...v},children:[k>0&&c.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:p,strokeWidth:k+(g?0:1),d:ne}),c.jsx("path",{stroke:k&&!g?b.fill:"none",d:ne}),c.jsx("clipPath",{id:y,children:c.jsx("rect",{x:-R,y:R*(U?-1:1),width:i+k,height:i})})]})});function J_(){const e=new Map;return{emit(t,n){var s;(s=e.get(t))==null||s.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var s;e.set(t,((s=e.get(t))==null?void 0:s.filter(o=>o!==n))||[])}}}const X_=l.createContext(null),eT=l.createContext(null),Ki=()=>{var e;return((e=l.useContext(X_))==null?void 0:e.id)||null},Ml=()=>l.useContext(eT);function ore(e){const t=im(),n=Ml(),o=Ki();return Wt(()=>{if(!t)return;const r={id:t,parentId:o};return n==null||n.addNode(r),()=>{n==null||n.removeNode(r)}},[n,t,o]),t}function rre(e){const{children:t,id:n}=e,s=Ki();return c.jsx(X_.Provider,{value:l.useMemo(()=>({id:n,parentId:s}),[n,s]),children:t})}function are(e){const{children:t}=e,n=l.useRef([]),s=l.useCallback(a=>{n.current=[...n.current,a]},[]),o=l.useCallback(a=>{n.current=n.current.filter(i=>i!==a)},[]),r=l.useState(()=>J_())[0];return c.jsx(eT.Provider,{value:l.useMemo(()=>({nodesRef:n,addNode:s,removeNode:o,events:r}),[s,o,r]),children:t})}function wi(e){return"data-floating-ui-"+e}function Is(e){const t=l.useRef(e);return Wt(()=>{t.current=e}),t}const M6=wi("safe-polygon");function Lg(e,t,n){return n&&!cd(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function ire(e,t){t===void 0&&(t={});const{open:n,onOpenChange:s,dataRef:o,events:r,elements:a}=e,{enabled:i=!0,delay:u=0,handleClose:d=null,mouseOnly:m=!1,restMs:f=0,move:p=!0}=t,g=Ml(),C=Ki(),v=Is(d),b=Is(u),y=Is(n),E=l.useRef(),x=l.useRef(-1),I=l.useRef(),_=l.useRef(-1),T=l.useRef(!0),A=l.useRef(!1),k=l.useRef(()=>{}),R=l.useRef(!1),P=l.useCallback(()=>{var ne;const q=(ne=o.current.openEvent)==null?void 0:ne.type;return(q==null?void 0:q.includes("mouse"))&&q!=="mousedown"},[o]);l.useEffect(()=>{if(!i)return;function ne(q){let{open:Z}=q;Z||(clearTimeout(x.current),clearTimeout(_.current),T.current=!0,R.current=!1)}return r.on("openchange",ne),()=>{r.off("openchange",ne)}},[i,r]),l.useEffect(()=>{if(!i||!v.current||!n)return;function ne(Z){P()&&s(!1,Z,"hover")}const q=Dn(a.floating).documentElement;return q.addEventListener("mouseleave",ne),()=>{q.removeEventListener("mouseleave",ne)}},[a.floating,n,s,i,v,P]);const B=l.useCallback(function(ne,q,Z){q===void 0&&(q=!0),Z===void 0&&(Z="hover");const J=Lg(b.current,"close",E.current);J&&!I.current?(clearTimeout(x.current),x.current=window.setTimeout(()=>s(!1,ne,Z),J)):q&&(clearTimeout(x.current),s(!1,ne,Z))},[b,s]),U=yn(()=>{k.current(),I.current=void 0}),$=yn(()=>{if(A.current){const ne=Dn(a.floating).body;ne.style.pointerEvents="",ne.removeAttribute(M6),A.current=!1}}),Q=yn(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);l.useEffect(()=>{if(!i)return;function ne(W){if(clearTimeout(x.current),T.current=!1,m&&!cd(E.current)||f>0&&!Lg(b.current,"open"))return;const le=Lg(b.current,"open",E.current);le?x.current=window.setTimeout(()=>{y.current||s(!0,W,"hover")},le):n||s(!0,W,"hover")}function q(W){if(Q())return;k.current();const le=Dn(a.floating);if(clearTimeout(_.current),R.current=!1,v.current&&o.current.floatingContext){n||clearTimeout(x.current),I.current=v.current({...o.current.floatingContext,tree:g,x:W.clientX,y:W.clientY,onClose(){$(),U(),Q()||B(W,!0,"safe-polygon")}});const Ae=I.current;le.addEventListener("mousemove",Ae),k.current=()=>{le.removeEventListener("mousemove",Ae)};return}(E.current==="touch"?!Ln(a.floating,W.relatedTarget):!0)&&B(W)}function Z(W){Q()||o.current.floatingContext&&(v.current==null||v.current({...o.current.floatingContext,tree:g,x:W.clientX,y:W.clientY,onClose(){$(),U(),Q()||B(W)}})(W))}if(Ot(a.domReference)){var J;const W=a.domReference;return n&&W.addEventListener("mouseleave",Z),(J=a.floating)==null||J.addEventListener("mouseleave",Z),p&&W.addEventListener("mousemove",ne,{once:!0}),W.addEventListener("mouseenter",ne),W.addEventListener("mouseleave",q),()=>{var le;n&&W.removeEventListener("mouseleave",Z),(le=a.floating)==null||le.removeEventListener("mouseleave",Z),p&&W.removeEventListener("mousemove",ne),W.removeEventListener("mouseenter",ne),W.removeEventListener("mouseleave",q)}}},[a,i,e,m,f,p,B,U,$,s,n,y,g,b,v,o,Q]),Wt(()=>{var ne;if(i&&n&&(ne=v.current)!=null&&ne.__options.blockPointerEvents&&P()){A.current=!0;const Z=a.floating;if(Ot(a.domReference)&&Z){var q;const J=Dn(a.floating).body;J.setAttribute(M6,"");const W=a.domReference,le=g==null||(q=g.nodesRef.current.find(_e=>_e.id===C))==null||(q=q.context)==null?void 0:q.elements.floating;return le&&(le.style.pointerEvents=""),J.style.pointerEvents="none",W.style.pointerEvents="auto",Z.style.pointerEvents="auto",()=>{J.style.pointerEvents="",W.style.pointerEvents="",Z.style.pointerEvents=""}}}},[i,n,C,a,g,v,P]),Wt(()=>{n||(E.current=void 0,R.current=!1,U(),$())},[n,U,$]),l.useEffect(()=>()=>{U(),clearTimeout(x.current),clearTimeout(_.current),$()},[i,a.domReference,U,$]);const te=l.useMemo(()=>{function ne(q){E.current=q.pointerType}return{onPointerDown:ne,onPointerEnter:ne,onMouseMove(q){const{nativeEvent:Z}=q;function J(){!T.current&&!y.current&&s(!0,Z,"hover")}m&&!cd(E.current)||n||f===0||R.current&&q.movementX**2+q.movementY**2<2||(clearTimeout(_.current),E.current==="touch"?J():(R.current=!0,_.current=window.setTimeout(J,f)))}}},[m,s,n,y,f]),X=l.useMemo(()=>({onMouseEnter(){clearTimeout(x.current)},onMouseLeave(ne){Q()||B(ne.nativeEvent,!1)}}),[B,Q]);return l.useMemo(()=>i?{reference:te,floating:X}:{},[i,te,X])}let N6=0;function Za(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:s=!0,sync:o=!1}=t;s&&cancelAnimationFrame(N6);const r=()=>e==null?void 0:e.focus({preventScroll:n});o?r():N6=requestAnimationFrame(r)}function R6(e,t){var n;let s=[],o=(n=e.find(r=>r.id===t))==null?void 0:n.parentId;for(;o;){const r=e.find(a=>a.id===o);o=r==null?void 0:r.parentId,r&&(s=s.concat(r))}return s}function zc(e,t){let n=e.filter(o=>{var r;return o.parentId===t&&((r=o.context)==null?void 0:r.open)}),s=n;for(;s.length;)s=e.filter(o=>{var r;return(r=s)==null?void 0:r.some(a=>{var i;return o.parentId===a.id&&((i=o.context)==null?void 0:i.open)})}),n=n.concat(s);return n}function cre(e,t){let n,s=-1;function o(r,a){a>s&&(n=r,s=a),zc(e,r).forEach(u=>{o(u.id,a+1)})}return o(t,0),e.find(r=>r.id===n)}let gc=new WeakMap,Xm=new WeakSet,ef={},Og=0;const lre=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,tT=e=>e&&(e.host||tT(e.parentNode)),ure=(e,t)=>t.map(n=>{if(e.contains(n))return n;const s=tT(n);return e.contains(s)?s:null}).filter(n=>n!=null);function dre(e,t,n,s){const o="data-floating-ui-inert",r=s?"inert":n?"aria-hidden":null,a=ure(t,e),i=new Set,u=new Set(a),d=[];ef[o]||(ef[o]=new WeakMap);const m=ef[o];a.forEach(f),p(t),i.clear();function f(g){!g||i.has(g)||(i.add(g),g.parentNode&&f(g.parentNode))}function p(g){!g||u.has(g)||[].forEach.call(g.children,C=>{if(Ia(C)!=="script")if(i.has(C))p(C);else{const v=r?C.getAttribute(r):null,b=v!==null&&v!=="false",y=gc.get(C)||0,E=r?y+1:y,x=(m.get(C)||0)+1;gc.set(C,E),m.set(C,x),d.push(C),E===1&&b&&Xm.add(C),x===1&&C.setAttribute(o,""),!b&&r&&C.setAttribute(r,"true")}})}return Og++,()=>{d.forEach(g=>{const C=gc.get(g)||0,v=r?C-1:C,b=(m.get(g)||0)-1;gc.set(g,v),m.set(g,b),v||(!Xm.has(g)&&r&&g.removeAttribute(r),Xm.delete(g)),b||g.removeAttribute(o)}),Og--,Og||(gc=new WeakMap,gc=new WeakMap,Xm=new WeakSet,ef={})}}function P6(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=Dn(e[0]).body;return dre(e.concat(Array.from(s.querySelectorAll("[aria-live]"))),s,t,n)}const q1=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function nT(e,t){const n=W1(e,q1());t==="prev"&&n.reverse();const s=n.indexOf(io(Dn(e)));return n.slice(s+1)[0]}function sT(){return nT(document.body,"next")}function oT(){return nT(document.body,"prev")}function Uu(e,t){const n=t||e.currentTarget,s=e.relatedTarget;return!s||!Ln(n,s)}function mre(e){W1(e,q1()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function L6(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const s=n.dataset.tabindex;delete n.dataset.tabindex,s?n.setAttribute("tabindex",s):n.removeAttribute("tabindex")})}const Z1={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let fre;function O6(e){e.key==="Tab"&&(e.target,clearTimeout(fre))}const Ep=l.forwardRef(function(t,n){const[s,o]=l.useState();Wt(()=>(L_()&&o("button"),document.addEventListener("keydown",O6),()=>{document.removeEventListener("keydown",O6)}),[]);const r={ref:n,tabIndex:0,role:s,"aria-hidden":s?void 0:!0,[wi("focus-guard")]:"",style:Z1};return c.jsx("span",{...t,...r})}),rT=l.createContext(null),D6=wi("portal");function pre(e){e===void 0&&(e={});const{id:t,root:n}=e,s=im(),o=aT(),[r,a]=l.useState(null),i=l.useRef(null);return Wt(()=>()=>{r==null||r.remove(),queueMicrotask(()=>{i.current=null})},[r]),Wt(()=>{if(!s||i.current)return;const u=t?document.getElementById(t):null;if(!u)return;const d=document.createElement("div");d.id=s,d.setAttribute(D6,""),u.appendChild(d),i.current=d,a(d)},[t,s]),Wt(()=>{if(n===null||!s||i.current)return;let u=n||(o==null?void 0:o.portalNode);u&&!Ot(u)&&(u=u.current),u=u||document.body;let d=null;t&&(d=document.createElement("div"),d.id=t,u.appendChild(d));const m=document.createElement("div");m.id=s,m.setAttribute(D6,""),u=d||u,u.appendChild(m),i.current=m,a(m)},[t,n,s,o]),r}function Nl(e){const{children:t,id:n,root:s,preserveTabOrder:o=!0}=e,r=pre({id:n,root:s}),[a,i]=l.useState(null),u=l.useRef(null),d=l.useRef(null),m=l.useRef(null),f=l.useRef(null),p=a==null?void 0:a.modal,g=a==null?void 0:a.open,C=!!a&&!a.modal&&a.open&&o&&!!(s||r);return l.useEffect(()=>{if(!r||!o||p)return;function v(b){r&&Uu(b)&&(b.type==="focusin"?L6:mre)(r)}return r.addEventListener("focusin",v,!0),r.addEventListener("focusout",v,!0),()=>{r.removeEventListener("focusin",v,!0),r.removeEventListener("focusout",v,!0)}},[r,o,p]),l.useEffect(()=>{r&&(g||L6(r))},[g,r]),c.jsxs(rT.Provider,{value:l.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:u,afterOutsideRef:d,beforeInsideRef:m,afterInsideRef:f,portalNode:r,setFocusManagerState:i}),[o,r]),children:[C&&r&&c.jsx(Ep,{"data-type":"outside",ref:u,onFocus:v=>{if(Uu(v,r)){var b;(b=m.current)==null||b.focus()}else{const y=oT()||(a==null?void 0:a.domReference);y==null||y.focus()}}}),C&&r&&c.jsx("span",{"aria-owns":r.id,style:Z1}),r&&pl.createPortal(t,r),C&&r&&c.jsx(Ep,{"data-type":"outside",ref:d,onFocus:v=>{if(Uu(v,r)){var b;(b=f.current)==null||b.focus()}else{const y=sT()||(a==null?void 0:a.domReference);y==null||y.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,v.nativeEvent,"focus-out"))}}})]})}const aT=()=>l.useContext(rT),q2="data-floating-ui-focusable";function Z2(e){return e?e.hasAttribute(q2)?e:e.querySelector("["+q2+"]")||e:null}const hre=20;let Ka=[];function Dg(e){Ka=Ka.filter(t=>t.isConnected),e&&Ia(e)!=="body"&&(Ka.push(e),Ka.length>hre&&(Ka=Ka.slice(-20)))}function j6(){return Ka.slice().reverse().find(e=>e.isConnected)}function gre(e){const t=q1();return moe(e,t)?e:W1(e,t)[0]||e}const vre=l.forwardRef(function(t,n){return c.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:Z1})});function K1(e){const{context:t,children:n,disabled:s=!1,order:o=["content"],guards:r=!0,initialFocus:a=0,returnFocus:i=!0,restoreFocus:u=!1,modal:d=!0,visuallyHiddenDismiss:m=!1,closeOnFocusOut:f=!0,outsideElementsInert:p=!1}=e,{open:g,onOpenChange:C,events:v,dataRef:b,elements:{domReference:y,floating:E}}=t,x=yn(()=>{var oe;return(oe=b.current.floatingContext)==null?void 0:oe.nodeId}),I=typeof a=="number"&&a<0,_=O_(y)&&I,T=lre(),A=T?r:!0,k=!A||T&&p,R=Is(o),P=Is(a),B=Is(i),U=Ml(),$=aT(),Q=l.useRef(null),te=l.useRef(null),X=l.useRef(!1),ne=l.useRef(!1),q=l.useRef(-1),Z=$!=null,J=Z2(E),W=yn(function(oe){return oe===void 0&&(oe=J),oe?W1(oe,q1()):[]}),le=yn(oe=>{const ie=W(oe);return R.current.map(ee=>y&&ee==="reference"?y:J&&ee==="floating"?J:ie).filter(Boolean).flat()});l.useEffect(()=>{if(s||!d)return;function oe(ee){if(ee.key==="Tab"){Ln(J,io(Dn(J)))&&W().length===0&&!_&&On(ee);const me=le(),Pe=Vr(ee);R.current[0]==="reference"&&Pe===y&&(On(ee),ee.shiftKey?Za(me[me.length-1]):Za(me[1])),R.current[1]==="floating"&&Pe===J&&ee.shiftKey&&(On(ee),Za(me[0]))}}const ie=Dn(J);return ie.addEventListener("keydown",oe),()=>{ie.removeEventListener("keydown",oe)}},[s,y,J,d,R,_,W,le]),l.useEffect(()=>{if(s||!E)return;function oe(ie){const ee=Vr(ie),Pe=W().indexOf(ee);Pe!==-1&&(q.current=Pe)}return E.addEventListener("focusin",oe),()=>{E.removeEventListener("focusin",oe)}},[s,E,W]),l.useEffect(()=>{if(s||!f)return;function oe(){ne.current=!0,setTimeout(()=>{ne.current=!1})}function ie(ee){const me=ee.relatedTarget;queueMicrotask(()=>{const Pe=x(),Ve=!(Ln(y,me)||Ln(E,me)||Ln(me,E)||Ln($==null?void 0:$.portalNode,me)||me!=null&&me.hasAttribute(wi("focus-guard"))||U&&(zc(U.nodesRef.current,Pe).find(Qe=>{var st,ve;return Ln((st=Qe.context)==null?void 0:st.elements.floating,me)||Ln((ve=Qe.context)==null?void 0:ve.elements.domReference,me)})||R6(U.nodesRef.current,Pe).find(Qe=>{var st,ve,xe;return[(st=Qe.context)==null?void 0:st.elements.floating,Z2((ve=Qe.context)==null?void 0:ve.elements.floating)].includes(me)||((xe=Qe.context)==null?void 0:xe.elements.domReference)===me})));if(u&&Ve&&io(Dn(J))===Dn(J).body){gn(J)&&J.focus();const Qe=q.current,st=W(),ve=st[Qe]||st[st.length-1]||J;gn(ve)&&ve.focus()}(_||!d)&&me&&Ve&&!ne.current&&me!==j6()&&(X.current=!0,C(!1,ee,"focus-out"))})}if(E&&gn(y))return y.addEventListener("focusout",ie),y.addEventListener("pointerdown",oe),E.addEventListener("focusout",ie),()=>{y.removeEventListener("focusout",ie),y.removeEventListener("pointerdown",oe),E.removeEventListener("focusout",ie)}},[s,y,E,J,d,U,$,C,f,u,W,_,x]);const _e=l.useRef(null),Ae=l.useRef(null),K=ud([_e,$==null?void 0:$.beforeInsideRef]),be=ud([Ae,$==null?void 0:$.afterInsideRef]);l.useEffect(()=>{var oe;if(s||!E)return;const ie=Array.from(($==null||(oe=$.portalNode)==null?void 0:oe.querySelectorAll("["+wi("portal")+"]"))||[]),ee=U&&!d?R6(U==null?void 0:U.nodesRef.current,x()).map(Ve=>{var Qe;return(Qe=Ve.context)==null?void 0:Qe.elements.floating}):[],me=[E,...ie,...ee,Q.current,te.current,_e.current,Ae.current,$==null?void 0:$.beforeOutsideRef.current,$==null?void 0:$.afterOutsideRef.current,R.current.includes("reference")||_?y:null].filter(Ve=>Ve!=null),Pe=d||_?P6(me,!k,k):P6(me);return()=>{Pe()}},[s,y,E,d,R,$,_,A,k,U,x]),Wt(()=>{if(s||!gn(J))return;const oe=Dn(J),ie=io(oe);queueMicrotask(()=>{const ee=le(J),me=P.current,Pe=(typeof me=="number"?ee[me]:me.current)||J,Ve=Ln(J,ie);!I&&!Ve&&g&&Za(Pe,{preventScroll:Pe===J})})},[s,g,J,I,le,P]),Wt(()=>{if(s||!J)return;let oe=!1;const ie=Dn(J),ee=io(ie);let Pe=b.current.openEvent;Dg(ee);function Ve(ve){let{open:xe,reason:Te,event:Ze,nested:Le}=ve;xe&&(Pe=Ze),Te==="escape-key"&&y&&Dg(y),["hover","safe-polygon"].includes(Te)&&Ze.type==="mouseleave"&&(X.current=!0),Te==="outside-press"&&(Le?(X.current=!1,oe=!0):X.current=!(P_(Ze)||OC(Ze)))}v.on("openchange",Ve);const Qe=ie.createElement("span");Qe.setAttribute("tabindex","-1"),Qe.setAttribute("aria-hidden","true"),Object.assign(Qe.style,Z1),Z&&y&&y.insertAdjacentElement("afterend",Qe);function st(){return typeof B.current=="boolean"?j6()||Qe:B.current.current||Qe}return()=>{v.off("openchange",Ve);const ve=io(ie),xe=Ln(E,ve)||U&&zc(U.nodesRef.current,x()).some(Le=>{var Ye;return Ln((Ye=Le.context)==null?void 0:Ye.elements.floating,ve)});(xe||Pe&&["click","mousedown"].includes(Pe.type))&&y&&Dg(y);const Ze=st();queueMicrotask(()=>{const Le=gre(Ze);B.current&&!X.current&&gn(Le)&&(!(Le!==ve&&ve!==ie.body)||xe)&&Le.focus({preventScroll:oe}),Qe.remove()})}},[s,E,J,B,b,v,U,Z,y,x]),l.useEffect(()=>{queueMicrotask(()=>{X.current=!1})},[s]),Wt(()=>{if(!s&&$)return $.setFocusManagerState({modal:d,closeOnFocusOut:f,open:g,onOpenChange:C,domReference:y}),()=>{$.setFocusManagerState(null)}},[s,$,d,g,C,f,y]),Wt(()=>{if(s||!J||typeof MutationObserver!="function"||I)return;const oe=()=>{const ee=J.getAttribute("tabindex"),me=W(),Pe=io(Dn(E)),Ve=me.indexOf(Pe);Ve!==-1&&(q.current=Ve),R.current.includes("floating")||Pe!==y&&me.length===0?ee!=="0"&&J.setAttribute("tabindex","0"):ee!=="-1"&&J.setAttribute("tabindex","-1")};oe();const ie=new MutationObserver(oe);return ie.observe(J,{childList:!0,subtree:!0,attributes:!0}),()=>{ie.disconnect()}},[s,E,J,y,R,W,I]);function Me(oe){return s||!m||!d?null:c.jsx(vre,{ref:oe==="start"?Q:te,onClick:ie=>C(!1,ie.nativeEvent),children:typeof m=="string"?m:"Dismiss"})}const je=!s&&A&&(d?!_:!0)&&(Z||d);return c.jsxs(c.Fragment,{children:[je&&c.jsx(Ep,{"data-type":"inside",ref:K,onFocus:oe=>{if(d){const ee=le();Za(o[0]==="reference"?ee[0]:ee[ee.length-1])}else if($!=null&&$.preserveTabOrder&&$.portalNode)if(X.current=!1,Uu(oe,$.portalNode)){const ee=sT()||y;ee==null||ee.focus()}else{var ie;(ie=$.beforeOutsideRef.current)==null||ie.focus()}}}),!_&&Me("start"),n,Me("end"),je&&c.jsx(Ep,{"data-type":"inside",ref:be,onFocus:oe=>{if(d)Za(le()[0]);else if($!=null&&$.preserveTabOrder&&$.portalNode)if(f&&(X.current=!0),Uu(oe,$.portalNode)){const ee=oT()||y;ee==null||ee.focus()}else{var ie;(ie=$.afterOutsideRef.current)==null||ie.focus()}}})]})}function F6(e){return gn(e.target)&&e.target.tagName==="BUTTON"}function U6(e){return DC(e)}function HC(e,t){t===void 0&&(t={});const{open:n,onOpenChange:s,dataRef:o,elements:{domReference:r}}=e,{enabled:a=!0,event:i="click",toggle:u=!0,ignoreMouse:d=!1,keyboardHandlers:m=!0,stickIfOpen:f=!0}=t,p=l.useRef(),g=l.useRef(!1),C=l.useMemo(()=>({onPointerDown(v){p.current=v.pointerType},onMouseDown(v){const b=p.current;v.button===0&&i!=="click"&&(cd(b,!0)&&d||(n&&u&&(!(o.current.openEvent&&f)||o.current.openEvent.type==="mousedown")?s(!1,v.nativeEvent,"click"):(v.preventDefault(),s(!0,v.nativeEvent,"click"))))},onClick(v){const b=p.current;if(i==="mousedown"&&p.current){p.current=void 0;return}cd(b,!0)&&d||(n&&u&&(!(o.current.openEvent&&f)||o.current.openEvent.type==="click")?s(!1,v.nativeEvent,"click"):s(!0,v.nativeEvent,"click"))},onKeyDown(v){p.current=void 0,!(v.defaultPrevented||!m||F6(v))&&(v.key===" "&&!U6(r)&&(v.preventDefault(),g.current=!0),v.key==="Enter"&&s(!(n&&u),v.nativeEvent,"click"))},onKeyUp(v){v.defaultPrevented||!m||F6(v)||U6(r)||v.key===" "&&g.current&&(g.current=!1,s(!(n&&u),v.nativeEvent,"click"))}}),[o,r,i,d,m,s,n,f,u]);return l.useMemo(()=>a?{reference:C}:{},[a,C])}const Cre={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},yre={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},B6=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function cm(e,t){t===void 0&&(t={});const{open:n,onOpenChange:s,elements:o,dataRef:r}=e,{enabled:a=!0,escapeKey:i=!0,outsidePress:u=!0,outsidePressEvent:d="pointerdown",referencePress:m=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:g,capture:C}=t,v=Ml(),b=yn(typeof u=="function"?u:()=>!1),y=typeof u=="function"?b:u,E=l.useRef(!1),x=l.useRef(!1),{escapeKey:I,outsidePress:_}=B6(g),{escapeKey:T,outsidePress:A}=B6(C),k=l.useRef(!1),R=yn(te=>{var X;if(!n||!a||!i||te.key!=="Escape"||k.current)return;const ne=(X=r.current.floatingContext)==null?void 0:X.nodeId,q=v?zc(v.nodesRef.current,ne):[];if(!I&&(te.stopPropagation(),q.length>0)){let Z=!0;if(q.forEach(J=>{var W;if((W=J.context)!=null&&W.open&&!J.context.dataRef.current.__escapeKeyBubbles){Z=!1;return}}),!Z)return}s(!1,Lse(te)?te.nativeEvent:te,"escape-key")}),P=yn(te=>{var X;const ne=()=>{var q;R(te),(q=Vr(te))==null||q.removeEventListener("keydown",ne)};(X=Vr(te))==null||X.addEventListener("keydown",ne)}),B=yn(te=>{var X;const ne=E.current;E.current=!1;const q=x.current;if(x.current=!1,d==="click"&&q||ne||typeof y=="function"&&!y(te))return;const Z=Vr(te),J="["+wi("inert")+"]",W=Dn(o.floating).querySelectorAll(J);let le=Ot(Z)?Z:null;for(;le&&!ar(le);){const be=mr(le);if(ar(be)||!Ot(be))break;le=be}if(W.length&&Ot(Z)&&!Ose(Z)&&!Ln(Z,o.floating)&&Array.from(W).every(be=>!Ln(le,be)))return;if(gn(Z)&&Q){const be=ar(Z),Me=Ms(Z),je=/auto|scroll/,oe=be||je.test(Me.overflowX),ie=be||je.test(Me.overflowY),ee=oe&&Z.clientWidth>0&&Z.scrollWidth>Z.clientWidth,me=ie&&Z.clientHeight>0&&Z.scrollHeight>Z.clientHeight,Pe=Me.direction==="rtl",Ve=me&&(Pe?te.offsetX<=Z.offsetWidth-Z.clientWidth:te.offsetX>Z.clientWidth),Qe=ee&&te.offsetY>Z.clientHeight;if(Ve||Qe)return}const _e=(X=r.current.floatingContext)==null?void 0:X.nodeId,Ae=v&&zc(v.nodesRef.current,_e).some(be=>{var Me;return Mg(te,(Me=be.context)==null?void 0:Me.elements.floating)});if(Mg(te,o.floating)||Mg(te,o.domReference)||Ae)return;const K=v?zc(v.nodesRef.current,_e):[];if(K.length>0){let be=!0;if(K.forEach(Me=>{var je;if((je=Me.context)!=null&&je.open&&!Me.context.dataRef.current.__outsidePressBubbles){be=!1;return}}),!be)return}s(!1,te,"outside-press")}),U=yn(te=>{var X;const ne=()=>{var q;B(te),(q=Vr(te))==null||q.removeEventListener(d,ne)};(X=Vr(te))==null||X.addEventListener(d,ne)});l.useEffect(()=>{if(!n||!a)return;r.current.__escapeKeyBubbles=I,r.current.__outsidePressBubbles=_;let te=-1;function X(W){s(!1,W,"ancestor-scroll")}function ne(){window.clearTimeout(te),k.current=!0}function q(){te=window.setTimeout(()=>{k.current=!1},z1()?5:0)}const Z=Dn(o.floating);i&&(Z.addEventListener("keydown",T?P:R,T),Z.addEventListener("compositionstart",ne),Z.addEventListener("compositionend",q)),y&&Z.addEventListener(d,A?U:B,A);let J=[];return p&&(Ot(o.domReference)&&(J=na(o.domReference)),Ot(o.floating)&&(J=J.concat(na(o.floating))),!Ot(o.reference)&&o.reference&&o.reference.contextElement&&(J=J.concat(na(o.reference.contextElement)))),J=J.filter(W=>{var le;return W!==((le=Z.defaultView)==null?void 0:le.visualViewport)}),J.forEach(W=>{W.addEventListener("scroll",X,{passive:!0})}),()=>{i&&(Z.removeEventListener("keydown",T?P:R,T),Z.removeEventListener("compositionstart",ne),Z.removeEventListener("compositionend",q)),y&&Z.removeEventListener(d,A?U:B,A),J.forEach(W=>{W.removeEventListener("scroll",X)}),window.clearTimeout(te)}},[r,o,i,y,d,n,s,p,a,I,_,R,T,P,B,A,U]),l.useEffect(()=>{E.current=!1},[y,d]);const $=l.useMemo(()=>({onKeyDown:R,...m&&{[Cre[f]]:te=>{s(!1,te.nativeEvent,"reference-press")},...f!=="click"&&{onClick(te){s(!1,te.nativeEvent,"reference-press")}}}}),[R,s,m,f]),Q=l.useMemo(()=>({onKeyDown:R,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[yre[d]]:()=>{E.current=!0}}),[R,d]);return l.useMemo(()=>a?{reference:$,floating:Q}:{},[a,$,Q])}function bre(e){const{open:t=!1,onOpenChange:n,elements:s}=e,o=im(),r=l.useRef({}),[a]=l.useState(()=>J_()),i=Ki()!=null,[u,d]=l.useState(s.reference),m=yn((g,C,v)=>{r.current.openEvent=g?C:void 0,a.emit("openchange",{open:g,event:C,reason:v,nested:i}),n==null||n(g,C,v)}),f=l.useMemo(()=>({setPositionReference:d}),[]),p=l.useMemo(()=>({reference:u||s.reference||null,floating:s.floating||null,domReference:s.reference}),[u,s.reference,s.floating]);return l.useMemo(()=>({dataRef:r,open:t,onOpenChange:m,elements:p,events:a,floatingId:o,refs:f}),[t,m,p,a,o,f])}function Rl(e){e===void 0&&(e={});const{nodeId:t}=e,n=bre({...e,elements:{reference:null,floating:null,...e.elements}}),s=e.rootContext||n,o=s.elements,[r,a]=l.useState(null),[i,u]=l.useState(null),m=(o==null?void 0:o.domReference)||r,f=l.useRef(null),p=Ml();Wt(()=>{m&&(f.current=m)},[m]);const g=BC({...e,elements:{...o,...i&&{reference:i}}}),C=l.useCallback(x=>{const I=Ot(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;u(I),g.refs.setReference(I)},[g.refs]),v=l.useCallback(x=>{(Ot(x)||x===null)&&(f.current=x,a(x)),(Ot(g.refs.reference.current)||g.refs.reference.current===null||x!==null&&!Ot(x))&&g.refs.setReference(x)},[g.refs]),b=l.useMemo(()=>({...g.refs,setReference:v,setPositionReference:C,domReference:f}),[g.refs,v,C]),y=l.useMemo(()=>({...g.elements,domReference:m}),[g.elements,m]),E=l.useMemo(()=>({...g,...s,refs:b,elements:y,nodeId:t}),[g,b,y,t,s]);return Wt(()=>{s.dataRef.current.floatingContext=E;const x=p==null?void 0:p.nodesRef.current.find(I=>I.id===t);x&&(x.context=E)}),l.useMemo(()=>({...g,context:E,refs:b,elements:y}),[g,b,y,E])}function xre(e,t){t===void 0&&(t={});const{open:n,onOpenChange:s,events:o,dataRef:r,elements:a}=e,{enabled:i=!0,visibleOnly:u=!0}=t,d=l.useRef(!1),m=l.useRef(),f=l.useRef(!0);l.useEffect(()=>{if(!i)return;const g=us(a.domReference);function C(){!n&&gn(a.domReference)&&a.domReference===io(Dn(a.domReference))&&(d.current=!0)}function v(){f.current=!0}return g.addEventListener("blur",C),g.addEventListener("keydown",v,!0),()=>{g.removeEventListener("blur",C),g.removeEventListener("keydown",v,!0)}},[a.domReference,n,i]),l.useEffect(()=>{if(!i)return;function g(C){let{reason:v}=C;(v==="reference-press"||v==="escape-key")&&(d.current=!0)}return o.on("openchange",g),()=>{o.off("openchange",g)}},[o,i]),l.useEffect(()=>()=>{clearTimeout(m.current)},[]);const p=l.useMemo(()=>({onPointerDown(g){OC(g.nativeEvent)||(f.current=!1)},onMouseLeave(){d.current=!1},onFocus(g){if(d.current)return;const C=Vr(g.nativeEvent);if(u&&Ot(C))try{if(L_()&&Rse())throw Error();if(!C.matches(":focus-visible"))return}catch{if(!f.current&&!DC(C))return}s(!0,g.nativeEvent,"focus")},onBlur(g){d.current=!1;const C=g.relatedTarget,v=g.nativeEvent,b=Ot(C)&&C.hasAttribute(wi("focus-guard"))&&C.getAttribute("data-type")==="outside";m.current=window.setTimeout(()=>{var y;const E=io(a.domReference?a.domReference.ownerDocument:document);!C&&E===a.domReference||Ln((y=r.current.floatingContext)==null?void 0:y.refs.floating.current,E)||Ln(a.domReference,E)||b||s(!1,v,"focus")})}}),[r,a.domReference,s,u]);return l.useMemo(()=>i?{reference:p}:{},[i,p])}const V6="active",H6="selected";function jg(e,t,n){const s=new Map,o=n==="item";let r=e;if(o&&e){const{[V6]:a,[H6]:i,...u}=e;r=u}return{...n==="floating"&&{tabIndex:-1,[q2]:""},...r,...t.map(a=>{const i=a?a[n]:null;return typeof i=="function"?e?i(e):null:i}).concat(e).reduce((a,i)=>(i&&Object.entries(i).forEach(u=>{let[d,m]=u;if(!(o&&[V6,H6].includes(d)))if(d.indexOf("on")===0){if(s.has(d)||s.set(d,[]),typeof m=="function"){var f;(f=s.get(d))==null||f.push(m),a[d]=function(){for(var p,g=arguments.length,C=new Array(g),v=0;v<g;v++)C[v]=arguments[v];return(p=s.get(d))==null?void 0:p.map(b=>b(...C)).find(b=>b!==void 0)}}}else a[d]=m}),a),{})}}function Y1(e){e===void 0&&(e=[]);const t=e.map(i=>i==null?void 0:i.reference),n=e.map(i=>i==null?void 0:i.floating),s=e.map(i=>i==null?void 0:i.item),o=l.useCallback(i=>jg(i,e,"reference"),t),r=l.useCallback(i=>jg(i,e,"floating"),n),a=l.useCallback(i=>jg(i,e,"item"),s);return l.useMemo(()=>({getReferenceProps:o,getFloatingProps:r,getItemProps:a}),[o,r,a])}function Q1(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function z6(e,t){return Q1(t,e===VC||e===am,e===sa||e===oa)}function Fg(e,t,n){return Q1(t,e===am,n?e===sa:e===oa)||e==="Enter"||e===" "||e===""}function Sre(e,t,n){return Q1(t,n?e===sa:e===oa,e===am)}function G6(e,t,n){return Q1(t,n?e===oa:e===sa,e===VC)}function Ere(e,t){const{open:n,onOpenChange:s,elements:o}=e,{listRef:r,activeIndex:a,onNavigate:i=()=>{},enabled:u=!0,selectedIndex:d=null,allowEscape:m=!1,loop:f=!1,nested:p=!1,rtl:g=!1,virtual:C=!1,focusItemOnOpen:v="auto",focusItemOnHover:b=!0,openOnArrowKeyDown:y=!0,disabledIndices:E=void 0,orientation:x="vertical",cols:I=1,scrollItemIntoView:_=!0,virtualItemRef:T,itemSizes:A,dense:k=!1}=t,R=Z2(o.floating),P=Is(R),B=Ki(),U=Ml(),$=yn(()=>{i(X.current===-1?null:X.current)}),Q=O_(o.domReference),te=l.useRef(v),X=l.useRef(d??-1),ne=l.useRef(null),q=l.useRef(!0),Z=l.useRef($),J=l.useRef(!!o.floating),W=l.useRef(n),le=l.useRef(!1),_e=l.useRef(!1),Ae=Is(E),K=Is(n),be=Is(_),Me=Is(d),[je,oe]=l.useState(),[ie,ee]=l.useState(),me=yn(()=>{function Te(Ye){C?(oe(Ye.id),U==null||U.events.emit("virtualfocus",Ye),T&&(T.current=Ye)):Za(Ye,{sync:le.current,preventScroll:!0})}const Ze=r.current[X.current];Ze&&Te(Ze),(le.current?Ye=>Ye():requestAnimationFrame)(()=>{const Ye=r.current[X.current]||Ze;if(!Ye)return;Ze||Te(Ye);const Ue=be.current;Ue&&Ve&&(_e.current||!q.current)&&(Ye.scrollIntoView==null||Ye.scrollIntoView(typeof Ue=="boolean"?{block:"nearest",inline:"nearest"}:Ue))})});Wt(()=>{u&&(n&&o.floating?te.current&&d!=null&&(_e.current=!0,X.current=d,$()):J.current&&(X.current=-1,Z.current()))},[u,n,o.floating,d,$]),Wt(()=>{if(u&&n&&o.floating)if(a==null){if(le.current=!1,Me.current!=null)return;if(J.current&&(X.current=-1,me()),(!W.current||!J.current)&&te.current&&(ne.current!=null||te.current===!0&&ne.current==null)){let Te=0;const Ze=()=>{r.current[0]==null?(Te<2&&(Te?requestAnimationFrame:queueMicrotask)(Ze),Te++):(X.current=ne.current==null||Fg(ne.current,x,g)||p?Pg(r,Ae.current):T6(r,Ae.current),ne.current=null,$())};Ze()}}else Fu(r,a)||(X.current=a,me(),_e.current=!1)},[u,n,o.floating,a,Me,p,r,x,g,$,me,Ae]),Wt(()=>{var Te;if(!u||o.floating||!U||C||!J.current)return;const Ze=U.nodesRef.current,Le=(Te=Ze.find(he=>he.id===B))==null||(Te=Te.context)==null?void 0:Te.elements.floating,Ye=io(Dn(o.floating)),Ue=Ze.some(he=>he.context&&Ln(he.context.elements.floating,Ye));Le&&!Ue&&q.current&&Le.focus({preventScroll:!0})},[u,o.floating,U,B,C]),Wt(()=>{if(!u||!U||!C||B)return;function Te(Ze){ee(Ze.id),T&&(T.current=Ze)}return U.events.on("virtualfocus",Te),()=>{U.events.off("virtualfocus",Te)}},[u,U,C,B,T]),Wt(()=>{Z.current=$,W.current=n,J.current=!!o.floating}),Wt(()=>{n||(ne.current=null)},[n]);const Pe=a!=null,Ve=l.useMemo(()=>{function Te(Le){if(!n)return;const Ye=r.current.indexOf(Le);Ye!==-1&&X.current!==Ye&&(X.current=Ye,$())}return{onFocus(Le){let{currentTarget:Ye}=Le;le.current=!0,Te(Ye)},onClick:Le=>{let{currentTarget:Ye}=Le;return Ye.focus({preventScroll:!0})},...b&&{onMouseMove(Le){let{currentTarget:Ye}=Le;le.current=!0,_e.current=!1,Te(Ye)},onPointerLeave(Le){let{pointerType:Ye}=Le;if(!(!q.current||Ye==="touch")&&(le.current=!0,X.current=-1,$(),!C)){var Ue;(Ue=P.current)==null||Ue.focus({preventScroll:!0})}}}}},[n,P,b,r,$,C]),Qe=yn(Te=>{if(q.current=!1,le.current=!0,Te.which===229||!K.current&&Te.currentTarget===P.current)return;if(p&&G6(Te.key,x,g)){On(Te),s(!1,Te.nativeEvent,"list-navigation"),gn(o.domReference)&&(C?U==null||U.events.emit("virtualfocus",o.domReference):o.domReference.focus());return}const Ze=X.current,Le=Pg(r,E),Ye=T6(r,E);if(Q||(Te.key==="Home"&&(On(Te),X.current=Le,$()),Te.key==="End"&&(On(Te),X.current=Ye,$())),I>1){const Ue=A||Array.from({length:r.current.length},()=>({width:1,height:1})),he=Qoe(Ue,I,k),ze=he.findIndex(we=>we!=null&&!Nf(r.current,we,E)),It=he.reduce((we,Ee,Ke)=>Ee!=null&&!Nf(r.current,Ee,E)?Ke:we,-1),kt=he[Yoe({current:he.map(we=>we!=null?r.current[we]:null)},{event:Te,orientation:x,loop:f,rtl:g,cols:I,disabledIndices:Xoe([...E||r.current.map((we,Ee)=>Nf(r.current,Ee)?Ee:void 0),void 0],he),minIndex:ze,maxIndex:It,prevIndex:Joe(X.current>Ye?Le:X.current,Ue,he,I,Te.key===am?"bl":Te.key===(g?sa:oa)?"tr":"tl"),stopEvent:!0})];if(kt!=null&&(X.current=kt,$()),x==="both")return}if(z6(Te.key,x)){if(On(Te),n&&!C&&io(Te.currentTarget.ownerDocument)===Te.currentTarget){X.current=Fg(Te.key,x,g)?Le:Ye,$();return}Fg(Te.key,x,g)?f?X.current=Ze>=Ye?m&&Ze!==r.current.length?-1:Le:zn(r,{startingIndex:Ze,disabledIndices:E}):X.current=Math.min(Ye,zn(r,{startingIndex:Ze,disabledIndices:E})):f?X.current=Ze<=Le?m&&Ze!==-1?r.current.length:Ye:zn(r,{startingIndex:Ze,decrement:!0,disabledIndices:E}):X.current=Math.max(Le,zn(r,{startingIndex:Ze,decrement:!0,disabledIndices:E})),Fu(r,X.current)&&(X.current=-1),$()}}),st=l.useMemo(()=>C&&n&&Pe&&{"aria-activedescendant":ie||je},[C,n,Pe,ie,je]),ve=l.useMemo(()=>({"aria-orientation":x==="both"?void 0:x,...Q?{}:st,onKeyDown:Qe,onPointerMove(){q.current=!0}}),[st,Qe,x,Q]),xe=l.useMemo(()=>{function Te(Le){v==="auto"&&P_(Le.nativeEvent)&&(te.current=!0)}function Ze(Le){te.current=v,v==="auto"&&OC(Le.nativeEvent)&&(te.current=!0)}return{...st,onKeyDown(Le){q.current=!1;const Ye=Le.key.startsWith("Arrow"),Ue=["Home","End"].includes(Le.key),he=Ye||Ue,ze=Sre(Le.key,x,g),It=G6(Le.key,x,g),kt=z6(Le.key,x),we=(p?ze:kt)||Le.key==="Enter"||Le.key.trim()==="";if(C&&n){const Re=U==null?void 0:U.nodesRef.current.find(ht=>ht.parentId==null),ft=U&&Re?cre(U.nodesRef.current,Re.id):null;if(he&&ft&&T){const ht=new KeyboardEvent("keydown",{key:Le.key,bubbles:!0});if(ze||It){var Ee,Ke;const Bn=((Ee=ft.context)==null?void 0:Ee.elements.domReference)===Le.currentTarget,Io=It&&!Bn?(Ke=ft.context)==null?void 0:Ke.elements.domReference:ze?r.current.find(_o=>(_o==null?void 0:_o.id)===je):null;Io&&(On(Le),Io.dispatchEvent(ht),ee(void 0))}if((kt||Ue)&&ft.context&&ft.context.open&&ft.parentId&&Le.currentTarget!==ft.context.elements.domReference){var dt;On(Le),(dt=ft.context.elements.domReference)==null||dt.dispatchEvent(ht);return}}return Qe(Le)}if(!(!n&&!y&&Ye)){if(we&&(ne.current=p&&kt?null:Le.key),p){ze&&(On(Le),n?(X.current=Pg(r,Ae.current),$()):s(!0,Le.nativeEvent,"list-navigation"));return}kt&&(d!=null&&(X.current=d),On(Le),!n&&y?s(!0,Le.nativeEvent,"list-navigation"):Qe(Le),n&&$())}},onFocus(){n&&!C&&(X.current=-1,$())},onPointerDown:Ze,onPointerEnter:Ze,onMouseDown:Te,onClick:Te}},[je,st,Qe,Ae,v,r,p,$,s,n,y,x,g,d,U,C,T]);return l.useMemo(()=>u?{reference:xe,floating:ve,item:Ve}:{},[u,xe,ve,Ve])}const wre=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function J1(e,t){var n;t===void 0&&(t={});const{open:s,floatingId:o}=e,{enabled:r=!0,role:a="dialog"}=t,i=(n=wre.get(a))!=null?n:a,u=im(),m=Ki()!=null,f=l.useMemo(()=>i==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:s?o:void 0}:{"aria-expanded":s?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":s?o:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:u},...i==="menu"&&m&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[i,o,m,s,u,a]),p=l.useMemo(()=>{const C={id:o,...i&&{role:i}};return i==="tooltip"||a==="label"?C:{...C,...i==="menu"&&{"aria-labelledby":u}}},[i,o,u,a]),g=l.useCallback(C=>{let{active:v,selected:b}=C;const y={role:"option",...v&&{id:o+"-option"}};switch(a){case"select":return{...y,"aria-selected":v&&b};case"combobox":return{...y,...v&&{"aria-selected":!0}}}return{}},[o,a]);return l.useMemo(()=>r?{reference:f,floating:p,item:g}:{},[r,f,p,g])}function Ire(e,t){var n;const{open:s,dataRef:o}=e,{listRef:r,activeIndex:a,onMatch:i,onTypingChange:u,enabled:d=!0,findMatch:m=null,resetMs:f=750,ignoreKeys:p=[],selectedIndex:g=null}=t,C=l.useRef(),v=l.useRef(""),b=l.useRef((n=g??a)!=null?n:-1),y=l.useRef(null),E=yn(i),x=yn(u),I=Is(m),_=Is(p);Wt(()=>{s&&(clearTimeout(C.current),y.current=null,v.current="")},[s]),Wt(()=>{if(s&&v.current===""){var P;b.current=(P=g??a)!=null?P:-1}},[s,g,a]);const T=yn(P=>{P?o.current.typing||(o.current.typing=P,x(P)):o.current.typing&&(o.current.typing=P,x(P))}),A=yn(P=>{function B(X,ne,q){const Z=I.current?I.current(ne,q):ne.find(J=>(J==null?void 0:J.toLocaleLowerCase().indexOf(q.toLocaleLowerCase()))===0);return Z?X.indexOf(Z):-1}const U=r.current;if(v.current.length>0&&v.current[0]!==" "&&(B(U,U,v.current)===-1?T(!1):P.key===" "&&On(P)),U==null||_.current.includes(P.key)||P.key.length!==1||P.ctrlKey||P.metaKey||P.altKey)return;s&&P.key!==" "&&(On(P),T(!0)),U.every(X=>{var ne,q;return X?((ne=X[0])==null?void 0:ne.toLocaleLowerCase())!==((q=X[1])==null?void 0:q.toLocaleLowerCase()):!0})&&v.current===P.key&&(v.current="",b.current=y.current),v.current+=P.key,clearTimeout(C.current),C.current=setTimeout(()=>{v.current="",b.current=y.current,T(!1)},f);const Q=b.current,te=B(U,[...U.slice((Q||0)+1),...U.slice(0,(Q||0)+1)],v.current);te!==-1?(E(te),y.current=te):P.key!==" "&&(v.current="",T(!1))}),k=l.useMemo(()=>({onKeyDown:A}),[A]),R=l.useMemo(()=>({onKeyDown:A,onKeyUp(P){P.key===" "&&T(!1)}}),[A,T]);return l.useMemo(()=>d?{reference:k,floating:R}:{},[d,k,R])}const _re="(hover: hover) and (pointer: fine)";function Tre(){return typeof window<"u"&&typeof window.matchMedia=="function"}function Ug(){return Tre()?window.matchMedia(_re):null}function iT(){let e=Ug();const t=()=>(e??(e=Ug()),(e==null?void 0:e.matches)??!1),n=()=>!1,s=o=>{e??(e=Ug());const r=e;return r?(r.addEventListener("change",o),()=>r.removeEventListener("change",o)):()=>{}};return l.useSyncExternalStore(s,t,n)}const Are=40,kre=40;function Mre(e={}){const{defaultOpen:t=!1,placement:n="top",gap:s=6,open:o,onOpenChange:r,openDelay:a=Are,closeDelay:i=kre,disabled:u=!1,disableOnTouch:d=!0,closeOnTrigger:m=!0}=e,[f,p]=l.useState(t),g=o??f,C=l.useCallback(B=>{r?r(B):p(B)},[r]),v=l.useMemo(()=>[pa(s),kl({crossAxis:n.includes("-"),fallbackAxisSideDirection:"start",padding:s}),ha({padding:s})],[n,s]),b=Rl({placement:n,open:u?!1:g,onOpenChange:u?void 0:C,whileElementsMounted:_a,middleware:v}),{context:y}=b,E=iT(),x=!u&&o===void 0&&(!d||E),I=ire(y,{move:!1,enabled:x,restMs:a,delay:{open:a,close:i}}),_=xre(y,{enabled:x}),T=E?m:!1,A=cm(y,{enabled:!u,escapeKey:!0,referencePress:T!==!1,referencePressEvent:typeof T=="string"?T:"pointerdown"}),k=J1(y,{role:"tooltip",enabled:!u}),R=Y1([I,_,A,k]),P=l.useId();return l.useMemo(()=>({open:u?!1:g,setOpen:C,labelId:P,disabled:u,...R,...b}),[g,u,C,P,R,b])}const cT=l.createContext(null),lT=()=>{const e=l.useContext(cT);if(e===null)throw new Error("Tooltip components must be wrapped in <Tooltip />");return e};function uT(e){const{children:t,...n}=e,s=Mre(n);return c.jsx(cT.Provider,{value:s,children:t})}const zC=l.forwardRef((e,t)=>{const{children:n,asChild:s=!1,...o}=e,r=lT(),a=l.isValidElement(n)&&n.props!==null&&typeof n.props=="object"&&"ref"in n.props?n.props.ref:void 0,i=ud([r.refs.setReference,t,a]),u=ud([g=>r.refs.setReference(g),t]),d={...o,...r.disabled?{}:{"aria-describedby":r.open?r.labelId:void 0}};let m;r.disabled?m=d:s&&l.isValidElement(n)?m=r.getReferenceProps({...d,...n.props,ref:i}):m=r.getReferenceProps(d);const f={...m,onBlur:g=>{var C;(C=m.onBlur)==null||C.call(m,g),r.setOpen(!1)}},p=()=>{if(!r.disabled)return r.open?"open":"closed"};if(s&&l.isValidElement(n)){const g=n;return l.cloneElement(g,{ref:i,...f,"data-tooltip-state":p()})}return c.jsx("button",{ref:u,type:"button",...f,"data-tooltip-state":p(),children:n})});zC.displayName="TooltipTrigger";const GC=l.forwardRef((e,t)=>{const{style:n,className:s,...o}=e,r=lT(),a=ud([r.refs.setFloating,t]);if(!(r.open&&!r.disabled))return null;const u=r.getFloatingProps({id:r.labelId,role:"tooltip",...o});return c.jsx(Nl,{children:c.jsx("div",{ref:a,className:F("pointer-events-none w-max rounded-lg border border-white/20 bg-background-100 px-2 py-1 text-foreground-800 shadow-lg text-xs",lt.tooltip,s),style:{...r.floatingStyles,...n},...u,"data-tooltip-state":"open"})})});GC.displayName="TooltipContent";const Nre="SN:ROOT",Rre=l.createContext(null);function dT(){return l.useContext(Rre)}const X1=l.createContext(Nre);X1.displayName="FocusContext";function Pre(){return l.useContext(X1)}function lu(){}function Lre({focusable:e=!0,saveLastFocusedChild:t=!0,trackChildren:n=!1,autoRestoreFocus:s=!0,forceFocus:o=!1,isFocusBoundary:r=!1,focusBoundaryDirections:a,focusKey:i,preferredChildFocusKey:u,onEnterPress:d=lu,onEnterRelease:m=lu,onArrowPress:f=()=>!0,onArrowRelease:p=lu,onFocus:g=lu,onBlur:C=lu}){const v=dT(),b=l.useCallback(Q=>{Q&&d(Q)},[d]),y=l.useCallback(()=>{m()},[m]),E=l.useCallback((Q,te)=>f(Q,te),[f]),x=l.useCallback(Q=>{p(Q)},[p]),I=l.useCallback((Q,te)=>{g(Q,te)},[g]),_=l.useCallback((Q,te)=>{C(Q,te)},[C]),T=l.useRef(null),[A,k]=l.useState(!1),[R,P]=l.useState(!1),B=Pre(),U=l.useMemo(()=>v?i??crypto.randomUUID():void 0,[i,v]),$=l.useCallback((Q={})=>{U&&(v==null||v.setFocus(U,Q))},[U,v]);return l.useEffect(()=>{const Q=T.current;return Q&&U&&(v==null||v.addFocusable({focusKey:U,node:Q,parentFocusKey:B,preferredChildFocusKey:u,onEnterPress:b,onEnterRelease:y,onArrowPress:E,onArrowRelease:x,onFocus:I,onBlur:_,onUpdateFocus:(te=!1)=>k(te),onUpdateHasFocusedChild:(te=!1)=>P(te),saveLastFocusedChild:t,trackChildren:n,isFocusBoundary:r,focusBoundaryDirections:a,autoRestoreFocus:s,forceFocus:o,focusable:e})),()=>{U&&(v==null||v.removeFocusable({focusKey:U}))}},[]),l.useEffect(()=>{const Q=T.current;Q&&U&&(v==null||v.updateFocusable(U,{node:Q,preferredChildFocusKey:u,focusable:e,isFocusBoundary:r,focusBoundaryDirections:a,onEnterPress:b,onEnterRelease:y,onArrowPress:E,onArrowRelease:x,onFocus:I,onBlur:_}))},[U,u,e,r,a,b,y,E,x,I,_,v]),{ref:T,focusSelf:$,focused:A,hasFocusedChild:R,focusKey:U}}function mT(...e){return t=>{for(const n of e)n&&(typeof n=="function"?n(t):n.current=t)}}function Ta(e,...t){const n=Lre({onEnterPress:()=>{var o;(o=n.ref.current)==null||o.click()},onFocus:()=>{var o,r;(o=n.ref.current)==null||o.focus(),e.scrollIntoViewOnFocus&&((r=n.ref.current)==null||r.scrollIntoView({block:"nearest"}))},onBlur:()=>{var o;(o=n.ref.current)==null||o.blur()},...e}),s=mT(...t,n.ref);return{focusable:n,refCallback:s}}const dd="relative flex items-center",so="text-foreground-800 fill-foreground-800 active:text-foreground-600 active:fill-foreground-600 dark:active:text-foreground-650 dark:active:fill-foreground-650",W6="text-neutral-200 fill-neutral-200 active:text-neutral-300 active:fill-neutral-300 dark:text-neutral-800 dark:fill-neutral-800 dark:active:text-neutral-600 dark:active:fill-neutral-600",Ore="text-foreground-250 fill-foreground-250 active:text-foreground-350 active:fill-foreground-350 dark:text-foreground-750 dark:fill-foreground-750 dark:active:text-foreground-650 dark:active:fill-foreground-650",Dre="text-accent-550 fill-accent-550 active:text-accent-450/80 active:fill-accent-450/80 dark:text-accent-850 dark:fill-accent-850 dark:active:text-accent-700 dark:active:fill-accent-700",uu="shadow-sm",$6="shadow-with-highlight-sm",jre="text-muted-550 safe-hover:text-accent-450 dark:text-foreground-700 dark:active:text-foreground-800",Fre="bg-white/70 safe-hover:bg-accent-200 active:bg-accent-200/20 dark:bg-muted-550/30 dark:safe-hover:bg-background-100 dark:active:bg-background-200/20",Ure="border-[0.5px] border-transparent safe-hover:border-accent-400 dark:safe-hover:border-accent-650",Bre="text-accent-600 fill-accent-600 active:text-accent-400 active:fill-accent-400 dark:text-foreground-800 dark:fill-text-foreground-800 dark:active:text-foreground-900 dark:active:fill-foreground-900",Vre="bg-accent-200 safe-hover:bg-accent-250 active:bg-accent-250 dark:bg-muted-350 dark:safe-hover:bg-muted-300 dark:active:bg-muted-300",Bg="bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-black/30 dark:active:bg-black/20",Ii={default:`${so} ${$6} bg-white/70 safe-hover:bg-white active:bg-white/60 dark:bg-muted-550/30 dark:safe-hover:bg-muted-550/40 dark:active:bg-muted-550/20`,strong:`${Ore} ${uu} bg-background-800 safe-hover:bg-black active:bg-background-750 dark:bg-muted-400 dark:safe-hover:bg-muted-450 dark:active:bg-muted-400/80`,accent:`${Dre} bg-accent-250 safe-hover:bg-accent-300 active:bg-accent-200 dark:bg-accent-550 dark:safe-hover:bg-accent-450 dark:active:bg-accent-600/80`,"overlay-bright":`${so} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"overlay-bright-inverted":`${so} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed":`${so} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed-inverted":`${so} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"subtle-bright":`${so} bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,"subtle-bright-inverted":`${so} ${Bg}`,"subtle-dimmed":`${so} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-black/30 dark:active:bg-black/20`,"subtle-dimmed-inverted":`${so} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,acrylic:`${so} ${uu} ${Bg}`,"acrylic-inverted":`${W6} ${uu} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,"acrylic-thin":`${so} ${uu} ${Bg}`,"acrylic-thin-inverted":`${W6} ${uu} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,chip:`${jre} ${Fre} ${$6} ${Ure}`,alert:"bg-system-red-600 safe-hover:bg-system-red-650 active:bg-system-red-550","composer-selected":`${Bre} ${Vre}`},fT={acrylic:`${Ys}`,"acrylic-inverted":`${See}`,"acrylic-thin":`${Kr}`,"acrylic-thin-inverted":`${Iee}`};function Hre(e){return e in fT}const zre={start:"justify-start",center:"justify-center",end:"justify-end"},WC={"28-xxs":"text-sm","32-xs":"text-sm","36-sm":"text-sm","40-base":"text-sm","48-lg":"text-base","56-xl":"text-base","64-xxl":"text-base"},Fr={"28-xxs":"gap-x-1.5","32-xs":"gap-x-1.5","36-sm":"gap-x-1.5","40-base":"gap-x-2","48-lg":"gap-x-3","56-xl":"gap-x-3","64-xxl":"gap-x-3"},$C={"28-xxs":`min-h-7 min-w-8 px-3 py-1 ${Fr["28-xxs"]}`,"32-xs":`min-h-8 min-w-8 px-2.5 py-1 ${Fr["32-xs"]}`,"36-sm":`min-h-9 min-w-9 px-2.5 py-1 ${Fr["36-sm"]}`,"40-base":`min-h-10 min-w-10 px-3 py-2 ${Fr["40-base"]}`,"48-lg":`min-h-12 min-w-12 px-3 py-2.5 ${Fr["48-lg"]}`,"56-xl":`min-h-14 min-w-14 px-4 py-3.5 ${Fr["56-xl"]}`,"64-xxl":`min-h-16 min-w-16 p-4 ${Fr["64-xxl"]}`},Gre={"28-xxs":"size-7","32-xs":"size-8","36-sm":"size-9","40-base":"size-10","48-lg":"size-12","56-xl":"size-14","64-xxl":"size-16"},K2={"28-xxs":"rounded-lg after:rounded-lg","32-xs":"rounded-lg after:rounded-lg","36-sm":"rounded-xl after:rounded-xl","40-base":"rounded-xl after:rounded-xl","48-lg":"rounded-3xl after:rounded-3xl","56-xl":"rounded-4xl after:rounded-4xl","64-xxl":"rounded-4xl after:rounded-4xl"},Wre={none:"",weak:"after:border after:border-black/10 dark:after:border-white/10",regular:"after:border after:border-black/30 dark:after:border-white/30",strong:"after:border after:border-2 after:border-black/30 dark:after:border-white/30"},q6="rounded-full after:rounded-full",$re="opacity-40 pointer-events-none",lm="after:absolute after:inset-0 after:pointer-events-none after:border after:border-transparent after:contrast-more:border-2 outline-2 outline-offset-1 focus-visible:z-[1] focus-visible:outline focus-visible:outline-stroke-900",qre=F("safe-hover:bg-background-800 dark:safe-hover:bg-white","focus-visible:bg-background-800 dark:focus-visible:bg-white","safe-hover:text-foreground-200 safe-hover:fill-foreground-200 dark:safe-hover:text-foreground-200 dark:safe-hover:fill-foreground-200","focus-visible:text-foreground-200 focus-visible:fill-foreground-200 dark:focus-visible:text-foreground-200 dark:focus-visible:fill-foreground-200","safe-hover:after:border-transparent dark:safe-hover:after:border-transparent","focus-visible:after:border-transparent dark:focus-visible:after:border-transparent","safe-hover:outline-transparent safe-hover:dark:outline-transparent","focus-visible:outline-transparent focus-visible:dark:outline-transparent","group/button-stronger-focus"),Zre=F("group-hover/button-stronger-focus:fill-foreground-200 group-hover/button-stronger-focus:text-foreground-200","group-focus-visible/button-stronger-focus:fill-foreground-200 group-focus-visible/button-stronger-focus:text-foreground-200"),re=l.forwardRef((e,t)=>{var ie;const{children:n,onFocus:s,onBlur:o,onKeyDown:r,onKeyUp:a,onMouseEnter:i,onMouseLeave:u,className:d,title:m,variant:f="rect",alignment:p="center",color:g="default",outline:C="none",size:v="40-base",id:b,role:y,testId:E,tabIndex:x,tooltip:I,strongerFocusColors:_,spatialNavigationAutofocus:T=!1,"aria-controls":A,"aria-expanded":k,"aria-haspopup":R,"aria-pressed":P,"aria-checked":B,"aria-label":U,"aria-selected":$,"aria-describedby":Q}=e,te="disabled"in e&&e.disabled,X=typeof _=="boolean"?_:((ie=ae.instance().config().uiOverrides)==null?void 0:ie.enableStrongerFocusButtons)??!1,ne=f==="circle"||f==="square",q=f==="circle"||f==="pill",Z=F(dd,Ii[g],WC[v],zre[p],ne?Gre[v]:$C[v],q?q6:K2[v],lm,te&&$re,Wre[C],X&&qre,d);let J=n;if(Hre(g)){const ee=F(fT[g],q?q6:K2[v]);J=c.jsxs(c.Fragment,{children:[c.jsx("div",{className:F("absolute inset-0",ee,X&&"group-hover/button-stronger-focus:hidden group-focus-visible/button-stronger-focus:hidden")}),c.jsx("div",{className:F(dd,Fr[v]),children:n})]})}const{refCallback:W,focusable:le}=Ta({autoRestoreFocus:!0,forceFocus:!0},t),_e=!!I,Ae=typeof I=="boolean"?void 0:I,K=_e?void 0:m;let be=U;_e&&!(U!=null&&U.trim())&&(be=m);let Me;if("href"in e&&e.href!==void 0){const{href:ee,target:me,onClick:Pe,onPointerDown:Ve}=e;Me=c.jsx(ls,{id:b,onPointerDown:Ve,"aria-controls":A,"aria-describedby":Q,"aria-expanded":k,"aria-haspopup":R,"aria-label":be,"aria-selected":$,href:ee,target:me,ref:le.ref,onClick:Pe,title:K,className:Z,"data-testid":E,children:J})}else if("to"in e&&e.to!==void 0){const{to:ee,params:me,search:Pe,hash:Ve,preload:Qe,resetScroll:st,onClick:ve,onPointerDown:xe}=e;Me=c.jsx(A_,{id:b,ref:le.ref,onPointerDown:xe,"aria-controls":A,"aria-describedby":Q,"aria-expanded":k,"aria-haspopup":R,"aria-label":be,"aria-selected":$,to:ee,params:me,search:Pe,hash:Ve,preload:Qe,resetScroll:st,disabled:te,onClick:ve,title:K,className:Z,"data-testid":E,children:J})}else{const{onClick:ee,onPointerDown:me}=e;Me=c.jsx("button",{onPointerDown:me,ref:W,id:b,"aria-controls":A,"aria-describedby":Q,"aria-expanded":k,"aria-haspopup":R,"aria-label":be,"aria-pressed":P,"aria-checked":B,"aria-selected":$,type:"button",className:Z,title:K,role:y,disabled:te,onClick:ee,onFocus:s,onBlur:o,onKeyDown:r,onKeyUp:a,onMouseEnter:i,onMouseLeave:u,"data-testid":E,"data-spatial-navigation-autofocus":T,"data-spatial-focus-key":le.focusKey,tabIndex:x,children:J})}if(!_e)return Me;const{tooltipContentProps:je,...oe}=Ae??{};return c.jsxs(uT,{...oe,children:[c.jsx(zC,{asChild:!0,children:Me}),c.jsx(GC,{...je,children:m})]})});re.displayName="Button";const Vg=ns.default,Ho=l.forwardRef((e,t)=>{const{isOpen:n,onBack:s,headerText:o,children:r,onClose:a,className:i,disableCloseOutside:u,headerTextClassName:d,headerClassName:m,trapFocus:f=!1,variant:p="modal"}=e,{t:g}=Y(),C=l.useId(),{modalAttributes:v}=U1({trapFocus:f,legacyTrapFocus:f,alwaysFocusable:f}),b=f?v:{},y=qi()?-1:1,E=l.useRef(null),{captureFocus:x,restoreFocus:I}=T_();l.useEffect(()=>{n?x():I()},[n,x,I]),$i(E,n),l.useEffect(()=>{const R=P=>{P.key==="Escape"&&n&&a&&(P.stopPropagation(),P.preventDefault(),a())};return n&&document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[n,a]);const _=R=>{(u??!a)||R.target===R.currentTarget&&a()},T=R=>{R.stopPropagation()},A=p==="drawer",k=A?{initial:{x:`${y*100}%`},animate:{x:0,transition:U2},exit:{x:`${y*100}%`,transition:{duration:Vg}}}:void 0;return c.jsx(rn,{id:String(n),mode:"sync",duration:Vg,exitDuration:Vg,className:F("fixed inset-0",lt.modal),children:n&&c.jsxs("div",{...b,role:"dialog","aria-modal":"true","aria-labelledby":o?C:void 0,children:[c.jsx("div",{className:F("fixed inset-0 bg-background-850/30 backdrop-blur-[10px] dark:bg-background-150/70",lt.modalBackground)}),c.jsx("div",{className:F("fixed inset-0 flex",A?"items-start justify-end":"items-center justify-center",lt.modal),onClick:_,children:c.jsxs(ge.div,{...k,className:F("t-custom-scrollbar flex flex-col gap-3 border border-white/10 bg-background-150 p-6 shadow-xl dark:bg-background-250",A?"h-full w-96":"min-h-[150px] rounded-4xl",i),onClick:T,tabIndex:-1,ref:R=>{E.current!==R&&(E.current=R),typeof t=="function"?t(R):t&&(t.current=R)},children:[c.jsxs("div",{className:F("flex items-center justify-between gap-2",m),children:[s&&c.jsx(re,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.backText"),"aria-label":g("common.backText"),onClick:s,children:c.jsx(Tl,{className:"size-5 -rotate-90"})}),o&&c.jsx("h2",{id:C,className:F("text-foreground-800 text-lg-strong",d),children:o}),a&&c.jsx(re,{className:!s&&!o?"ms-auto":"",variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.closeText"),"aria-label":g("common.closeText"),onClick:a,children:c.jsx(nn,{className:"size-5"})})]}),r]})})]})})});Ho.displayName="Modal";const pT="cf-turnstile",Kre=`#${pT}`;function Yre(){const e=M(fi),t=M(Wo);return on("kill-cf-turnstile")?null:c.jsx(Ho,{isOpen:e,className:"w-3/4 sm:w-[350px]",children:c.jsx("div",{id:pT,className:"flex flex-1 items-center justify-center","data-theme":t})})}const Qre=new zi(()=>new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("CF Turnstile script took too long to load"))},15e3),s=document.createElement("script");s.type="text/javascript",s.defer=!0,s.src="https://challenges.cloudflare.com/turnstile/v0/api.js",s.onload=()=>{clearTimeout(n),e()},s.onerror=()=>{clearTimeout(n),t(new Error("Failed to load turnstile script"))},document.body.appendChild(s)}));async function hT(e){var s;if(Rt("kill-cf-turnstile")||pe(fi))return;const n=qe();D.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"attempt"}}),pl.flushSync(()=>{n.set(fi,!0),n.set(BK,!0)});try{await Qre.get()}catch{n.set(od,"cf-turnstile");return}try{(s=window.turnstile)==null||s.render(Kre,{sitekey:"0x4AAAAAAAg146IpY3lPNWte",callback:async o=>{var r;e(o),We.emit("challenge:success"),(r=window.turnstile)==null||r.remove(),n.set(fi,!1),D.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"success"}})},"error-callback":o=>{We.emit("challenge:error",o),D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRenderErrorCallback",eventInfo_details:"Error rendering CF Turnstile.",eventInfo_errorMessage:o}})}})}catch(o){We.emit("challenge:error",o),D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRender",eventInfo_details:"Error rendering CF Turnstile",eventInfo_errorMessage:o instanceof Error?o.message:""}}),n.set(od,"cf-turnstile")}}function Jre(e){const t=e.match(/^\*\*(.*?)\*\*\n\n$/);if(t){const[,n]=t;return{title:(n==null?void 0:n.trim())??"",text:""}}return{title:"",text:e}}function Y2(e){if(window.clarity)for(const[t,n]of Object.entries(e))window.clarity("set",t,n)}function Z6(e){if(window.clarity)for(const t of e)window.clarity("event",t)}function wp(e,t){return e?Date.now()-parseInt(e,10)<=t:!1}function qC(e,t){return!e||parseInt(e,10)<t}var T9;const Yn=(T9=ae.instance().config().crossPromotion)==null?void 0:T9.aggressive;var A9,k9,M9,N9,R9;const Yi={"thumbs-up":{cardFeature:"cross-promo-card-thumbsup",popupFeature:"cross-promo-popup-thumbsup",cardConfig:(A9=Yn==null?void 0:Yn.card)==null?void 0:A9.thumbsUp,popupConfig:(k9=Yn==null?void 0:Yn.popup)==null?void 0:k9.thumbsUp},copied:{cardFeature:void 0,popupFeature:"cross-promo-popup-copied",cardConfig:void 0,popupConfig:(M9=Yn==null?void 0:Yn.popup)==null?void 0:M9.copied},engaging:{cardFeature:void 0,popupFeature:"cross-promo-popup-engaging",cardConfig:void 0,popupConfig:(N9=Yn==null?void 0:Yn.popup)==null?void 0:N9.engaging},"think-deeper":{cardFeature:void 0,popupFeature:"cross-promo-popup-think-deeper",cardConfig:void 0,popupConfig:(R9=Yn==null?void 0:Yn.popup)==null?void 0:R9.thinkDeeper}};function Xre(){return{type:"popup",title:z("crossSelling.aggressivePromotion.popup.thumbsUpTitle"),subTitle:z("crossSelling.aggressivePromotion.popup.thumbsUpSubTitle"),images:Yi["thumbs-up"].popupConfig}}function eae(){return{type:"card",title:z("crossSelling.aggressivePromotion.card.thumbsUpTitle"),subTitle:z("crossSelling.aggressivePromotion.card.thumbsUpSubTitle"),images:Yi["thumbs-up"].cardConfig}}function tae(){return{type:"popup",title:z("crossSelling.aggressivePromotion.popup.copiedTitle"),subTitle:z("crossSelling.aggressivePromotion.popup.copiedSubTitle"),images:Yi.copied.popupConfig}}function nae(){return{type:"popup",title:z("crossSelling.aggressivePromotion.popup.engagingTitle"),subTitle:z("crossSelling.aggressivePromotion.popup.engagingSubTitle"),images:Yi.engaging.popupConfig}}function sae(){return{type:"popup",title:z("crossSelling.aggressivePromotion.popup.thinkDeeperTitle"),subTitle:z("crossSelling.aggressivePromotion.popup.thinkDeeperSubTitle"),images:Yi["think-deeper"].popupConfig}}function gT(e){const n=qe().get(oC),s=n===!0?!1:n!==void 0,o=tn(rv),r=!wp(o,2*sp),a=tn(Qf),i=qC(a,2);s&&rae(e)&&r&&i&&aae(e)}let K6=!1;function oae(){const e=yo();!K6&&(e==="reasoning"||e==="research")&&(gT("think-deeper"),K6=!0)}function rae(e){return Iu(e)||vT(e)}function Iu(e){const t=Yi[e];return ye(t.popupFeature)&&t.popupConfig!==void 0}function vT(e){const t=Yi[e];return t.cardFeature!==void 0&&ye(t.cardFeature)&&t.cardConfig!==void 0&&!zd()}function aae(e){const t=qe();e==="thumbs-up"&&Iu(e)?t.set(sr,Xre()):e==="thumbs-up"&&vT(e)?t.set(sr,eae()):e==="copied"&&Iu(e)?t.set(sr,tae()):e==="engaging"&&Iu(e)?t.set(sr,nae()):e==="think-deeper"&&Iu(e)&&t.set(sr,sae())}const Hg=N({counter:0,isActive:!0});function iae(){const e=qe(),t=e.get(Hg);if(!t.isActive)return;const n=t.counter+1;n===RB?(gT("engaging"),e.set(Hg,{counter:n,isActive:!1})):e.set(Hg,{counter:n,isActive:t.isActive})}function cae(e){const{artifacts:t}=e;return t.find(n=>n.type==="browser")}function ZC(e,t="all"){const n=l.useRef(e),s=l.useMemo(()=>{const o=n.current.map(ba);return N(r=>t==="all"?o.every(a=>r(a)):o.some(a=>r(a)))},[t]);return M(s)}function md(e,t="all"){return t==="all"?e.every(n=>ye(n)):e.some(n=>ye(n))}const lae="guide://action",uae="prefill";function Q2(){return md(["guided-conversations-black","guided-conversations-cocoa","guided-conversations-caramel"],"any")}function dae(e){return e.startsWith("guide://")}function mae(e){const t=new URL(e);if(t.protocol==="guide:"&&t.search){const s=new URLSearchParams(t.search).get("prefill");if(s)return decodeURIComponent(s)}return null}function fae(e){const{parameters:t}=e,{Prefill:n}=t,s=z("guidedConversation.actionPrefix"),o=n.startsWith(s)?n.substring(s.length).trim():n.trim();return{prefill:n,targetText:o}}function cIe(e){var t,n;return((n=(t=ae.instance().config()).textOverrides)==null?void 0:n.call(t,e))??e}function pae(){return ye("media-spotlight-card")||ye("media-spotlight-card-v2")}async function hae(){const e=ye("weather-cards"),t=!Rt("kill-image-cards"),n=!Rt("kill-local-cards"),s=!Rt("kill-sports-cards"),o=!Rt("kill-video-cards"),r=!Rt("kill-searchhealthcareinfo"),a=!Rt("kill-searchhealthcareprovider"),i=ye("shopping-card"),u=ye("shopping-curated"),d=pae(),m=ye("job-cards"),f=ye("safetycards"),p=ye("quiz-cards"),g=ye("generateads"),C=ye("generateadsint"),v=ye("adsparity"),b=!Rt("kill-finance-cards"),y=ye("adstagsonline"),E=ye("product-ads-dynamic-filter"),x=ye("property-promotion-ads-dynamic-filter"),I=ye("tour-activity-ads-dynamic-filter"),_=ye("adsshowroombrandagent"),T=ye("emoji-reactions"),A=ye("imagegenv3");ye("turn-telemetry");const k=!Rt("kill-recipe-cards"),R=ye("file-cards"),P=ye("side-by-side-comparison"),B=ye("inline-image"),U=ye("inline-video"),{adsEnabled:$,adsShowroomEnabled:Q,disableAnswerCards:te,enforceAdsOptOutOfPersonalization:X,answerCardOverrides:ne}=ae.instance().config(),q=!!qe().get(uQ),Z=(g||C||v)&&$&&!q,J=ye("ppt-generation"),W=d&&(ne==null?void 0:ne.shouldEnableMediaSpotlightCard),le=ye("news-card"),_e=ye("media-carousel-card"),Ae=ye("search-personal-data"),K=ye("onedrive-search"),be=ye("nav-links"),Me=ye("consent-card-v2"),je=ye("flash-cards"),oe=ye("person-cards"),ie=Q2(),ee=[];te||(e&&ee.push("weather"),n&&ee.push("local"),t&&ee.push("image"),B&&ee.push("inlineImage"),s&&ee.push("sports"),o&&ee.push("video"),U&&ee.push("inlineVideo"),a&&ee.push("healthcareEntity"),r&&ee.push("healthcareInfo"),i&&ee.push("shopping"),m&&ee.push("job"),Z&&ee.push("ads"),f&&ee.push("safetyHelpline"),p&&ee.push("quiz"),b&&ee.push("finance"),u&&ee.push("shoppingCurated"),k&&ee.push("recipe"),R&&ee.push("file"),W&&ee.push("mediaSpotlight"),le&&ee.push("newsCarousel"),_e&&ee.push("mediaCarousel"),Ae&&ee.push("personalArtifacts"),K&&ee.push("m365"),je&&ee.push("flashcard"),be&&ee.push("navigation"),Me&&ee.push("consent"),oe&&ee.push("person"),J&&ee.push("powerPointCreator"));const me={supportedTypes:["text","product","multimedia","tourActivity","propertyPromotion"]};X&&(me.optOutOfPersonalization=!0),_&&$&&Q&&me.supportedTypes.push("showroom"),(E||y)&&(me.product={tagsSupported:!0}),x&&(me.propertyPromotion={tagsSupported:!0}),I&&(me.tourActivity={tagsSupported:!0});const Pe=[];T&&Pe.push("emoji-reactions"),A&&Pe.push("partial-generated-images"),ie&&Pe.push("guided-conversations");const Ve=!e1({breakpoint:"lg"});P&&Ve&&Pe.push("side-by-side-comparison");const Qe={supportedFeatures:Pe,supportedCards:ee.length>0?ee:void 0,ads:Z?me:null};return await xJ.run(Qe)}const CT="space-y-3 break-words",J2="bg-accent-200 dark:bg-accent-250",lIe=`group/ai-message-item ${CT}`,um="&#95;{{{CITATION{{{&#95;",fd="{";function yT(e,t){return`[${um}${e}${fd}](${t})`}const gae=new RegExp(`\\[${um}.*?\\)`,"g");function vae(e){return e.replace(gae,"")}const Cae=new RegExp(`\\[${um}([^${fd}]+)${fd}\\]`,"g");function uIe(e,t,n){return e.replace(Cae,(s,o)=>{if(!n)return`  [${o}]`;const r=t.find(a=>a.index===o);return`  [${(r==null?void 0:r.publisher)??(r!=null&&r.url?B2(r.url):o)}]`})}function yae(e){return e.type==="word"}function bae(e){return yae(e)&&e.word.trim()==="."}function xae(e,t){var n,s;for(let o=t-1;o>=0;o-=1){if(((n=e[o])==null?void 0:n.type)==="citation"){const r=o+1;return r<e.length&&bae(e[r])?r+1:r}if(((s=e[o])==null?void 0:s.type)==="word"&&e[o].word.includes(`
`))return o+1}return 0}function Sae(e,t,n){return t!==null&&n!==null&&e>=t&&e<n}function bT(e){const{author:t}=e;return t.type==="ai"?{...e,author:"ai",authorMetadata:t,streamingState:"idle"}:t.type==="human"?{...e,author:"human",authorMetadata:t}:{...e,author:"groupParticipant",authorMetadata:t}}function Eae(e){return e.map(bT)}const wae=2500,Iae=255,dIe=["pdf","docx"],eh=c1(new Map),mIe=N(null),_ae=N(vB),Tae=N(Iae),Aae=N(wae),kae=N([]),So=N(e=>e(kae).filter(t=>t.uploadStatus==="success").length);function Mae(e,t,n){return`${e}_${t}_${n}`}function Nae(e,t){qe().set(eh,s=>{const o=s.get(e)??[],r=[];for(const a of t.editTargets){const i={id:Mae(t.id,a.startIndex,a.endIndex),pageSuggestionId:t.id,startIndex:a.startIndex,endIndex:a.endIndex,text:t.text};r.push(i)}s.set(e,[...o,...r])})}function fIe(e,t){qe().set(eh,s=>{const o=s.get(e);o&&s.set(e,o.filter(r=>r.id!==t))})}function pIe(e){qe().set(eh,n=>{n.delete(e)})}function Rae(e,t,n){qe().set(eh,o=>{const r=o.get(e);if(r){const a=r.filter(i=>i.pageSuggestionId===t);for(const i of a)i.text===void 0&&(i.text=""),i.text+=n}})}function xT(e){try{return new URL(e,window.location.origin).origin!==window.location.origin}catch{return!1}}function Qi(e){pe(Sa)&&xT(e)?qe().set(x1,e.toString()):window.location.href=e}function Pl(){KC()}function KC(e){const{surfaceQueryParam:t}=ae.instance().config(),n=new URL(window.location.href);if(e&&(n.pathname=e),t)for(const[s,o]of Object.entries(t.params))n.searchParams.delete(s),n.searchParams.append(s,o);Qi(n.href)}function Pae(e){cn({scenario:"sideBySideMessages",page:"chat",customData:JSON.stringify({eventInfo_event:"receivedSxsEvent",eventInfo_sideBySideComparisonId:e})})}function Lae(e){const{sideBySideComparisonId:t,reason:n}=e;cn({scenario:"sideBySideMessages",page:"chat",customData:JSON.stringify({eventInfo_event:"skippedSxsMessages",eventInfo_sideBySideComparisonId:t,eventInfo_skippedReason:n})})}function Oae(e){const{sideBySideComparisonId:t,sideBySideConfig:n}=e,{position:s,isDefault:o}=n;Ce({pageName:"chat",sectionName:"sideBySideMessages",source:"selectedSxs",customData:JSON.stringify({eventInfo_sideBySideComparisonId:t,eventInfo_position:s,eventInfo_isControlMessage:o})})}function ST(e){const{sideBySideComparisonId:t,reason:n}=e;Ce({pageName:"chat",sectionName:"sideBySideMessages",source:"defaultedSxs",customData:JSON.stringify({eventInfo_sideBySideComparisonId:t,eventInfo_defaultReason:n})})}function Dae(e){const{card:t,messageId:n,conversationId:s}=e,o={eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_impressionScenario:"answerCardReceived",eventInfo_answerCardType:t.type,eventInfo_messageId:n,eventInfo_conversationId:s};switch(t.type){case"image":o.eventInfo_answerCardContentLength=t.images.length;break;case"localEntity":o.eventInfo_answerCardContentLength=t.entities.length;break;case"financeChart":o.eventInfo_answerCardScenario=t.instrument.securityType;break}D.trackEvent({name:"system",data:o})}function jae(e){const{card:t,messageId:n,conversationId:s}=e,o=performance.now(),r=pe(vw);if(!r)return;const a={eventName:"copilotAnswerCardReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_cardType:t.type,eventInfo_duration:o-r};D.trackEvent({name:"system",data:a})}function Fae(e){const{message:t,conversationId:n}=e;for(const s of t.content)switch(s.type){case"card":Dae({card:s.card,messageId:t.id,conversationId:n}),jae({card:s.card,messageId:t.id,conversationId:n});break}}function Uae(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}const hIe=6048e5,Bae=864e5,gIe=6e4,Vae=36e5,vIe=1e3,CIe=43200,yIe=1440,bIe=60;function Hae(e,t){return+Dt(e)-+Dt(t)}function zae(e,t,n){const s=Hae(e,t)/Vae;return Uae(n==null?void 0:n.roundingMethod)(s)}function YC(e){if(!e)return null;let t=null;const n=new Date(e).toISOString(),s=new Date().toISOString(),o=zae(n,s,{roundingMethod:"ceil"});return o>24?t="permanent":o>1&&o<=24?t="24-hr":o>0&&o<=1&&(t="1-hr"),t}function QC(e,t,n){if(!e){Ht(X0);return}const s=qe();D.trackEvent({name:"system",data:{eventName:"copilotUserBan",eventInfo_banDuration:e,eventInfo_banSource:t,eventInfo_banExpiryTimestamp:n}}),s.set(sI,e),s.set(od,"user-banned")}async function JC(e){D.setSettings({userConsentModelTraining:!e.optOutOfTraining,userConsentPersonalization:!e.optOutOfPersonalization,userSettingPhoneConnection:!e.optOutOfPhoneConnection,userSettingBrowserActions:e.allowBrowserActions,userSettingComputerUseActions:e.allowComputerUseActions,userSettingGenUI:!e.optInToGenerativeUI}),await Nn({path:"/user/settings",args:{options:{method:"PATCH"},body:{optOutOfTraining:e.optOutOfTraining,optOutOfPersonalization:e.optOutOfPersonalization,optInToVoiceTraining:e.optInToVoiceTraining,optOutOfPhoneConnection:e.optOutOfPhoneConnection,optInToGenerativeUI:e.optInToGenerativeUI,allowBiometricDataUse:e.allowBiometricDataUse,allowOneDriveAccess:e.allowOneDriveAccess,allowBrowserActions:e.allowBrowserActions,allowComputerUseActions:e.allowComputerUseActions,allowOutlookAccess:e.allowOutlookAccess,allowEdgePasswordsAccess:e.allowEdgePasswordsAccess,features:e.features}}})}async function Gae(){var t,n,s;const e=await St("/user",WE,{parseOptions:{safe:!0},query:{"api-version":"4"}}).then(o=>o.data);qe().set(k1,((t=e.remainingUsage)==null?void 0:t.podcastGenerations)??null),qe().set(Kd,((n=e.remainingUsage)==null?void 0:n.researchCalls)??null),qe().set(M1,((s=e.remainingUsage)==null?void 0:s.videoGenerations)??null)}const Et=qe();function Y6(e){return{chatMode:kn(),timing:new dX(e),citationCount:0,imageCount:0,chainOfThoughtCount:0,inputMethod:"text",pendingGuidedActions:[],processedGuidedLinksCount:0,uploadImageCount:0,uploadFileCount:0}}let zg=null;async function Q6(){return zg||(zg=V(()=>import("./index-DS1hydBz.js"),[]).then(e=>e.applyPatch)),zg}class Wae{constructor(t){O(this,"ws");O(this,"conversationMetadata",new Map);O(this,"conversationIdByMessageId",new Map);O(this,"messageIdByTaskId",new Map);O(this,"latestMessagePartIdentifier",null);O(this,"pendingSideBySideMessages",new Map);this.ws=t,this.send=this.send.bind(this),this.regenerate=this.regenerate.bind(this),this.sendChallengeResponse=this.sendChallengeResponse.bind(this),this.resetConversationState=this.resetConversationState.bind(this),this.resetConversationTiming=this.resetConversationTiming.bind(this),this.setConversationIdByMessageId=this.setConversationIdByMessageId.bind(this),this.setMessageIdByTaskId=this.setMessageIdByTaskId.bind(this),this.onSubmitMessageBlocked=this.onSubmitMessageBlocked.bind(this),this.callBeforeSendForConversation=this.callBeforeSendForConversation.bind(this),this.callOnSentForConversation=this.callOnSentForConversation.bind(this),this.setChatModeForConversation=this.setChatModeForConversation.bind(this),this.setInputMethodForConversation=this.setInputMethodForConversation.bind(this),this.setUploadCountsForConversation=this.setUploadCountsForConversation.bind(this),this.setUserMessageForConversation=this.setUserMessageForConversation.bind(this),this.processEvent=this.processEvent.bind(this),this.sendMessagePreview=this.sendMessagePreview.bind(this),this.updateChatOptions=this.updateChatOptions.bind(this),this.sendAudioClick=this.sendAudioClick.bind(this)}getConversationState(t){return this.conversationMetadata.has(t)||this.conversationMetadata.set(t,Y6(performance.now())),this.conversationMetadata.get(t)}get latestMessagePartId(){return this.latestMessagePartIdentifier}resetConversationState(t,n){this.conversationMetadata.set(t,Y6(n))}resetConversationTiming(t,n){this.getConversationState(t).timing.resetStartTime(n)}setConversationIdByMessageId(t){const{messageId:n,conversationId:s}=t;this.conversationIdByMessageId.set(n,s)}setMessageIdByTaskId(t){const{taskId:n,messageId:s}=t;this.messageIdByTaskId.set(n,s)}onSubmitMessageBlocked(t){const{timing:n,chatMode:s,inputMethod:o}=this.getConversationState(t);n.onSubmitMessageBlocked(s,o,t)}callBeforeSendForConversation(t){this.getConversationState(t).timing.onBeforeSend()}callOnSentForConversation(t,n){this.getConversationState(t).timing.onSent(n)}setChatModeForConversation(t,n){const s=this.getConversationState(t);s.chatMode=n}setInputMethodForConversation(t,n){const s=this.getConversationState(t);s.inputMethod=n}setUploadCountsForConversation(t,n,s){const o=this.getConversationState(t);o.uploadImageCount=n,o.uploadFileCount=s}setUserMessageForConversation(t,n){const s=this.getConversationState(t);s.lastUserMessage=n}send(t){const{content:n,conversationId:s,data:o,mode:r,context:a}=t,i={event:"send",conversationId:s,content:Array.isArray(n)?n:[n],mode:r,context:a,...o};this.ws.send(JSON.stringify(i))}sendChallengeResponse(t){this.ws.send(JSON.stringify({event:"challengeResponse",token:t.token,method:t.method}))}regenerate(t){const{messageId:n,mode:s,allowedConsents:o,context:r}=t,a={event:"regenerate",messageId:n,mode:s,...r?{context:r}:{},...o!=null&&o.length?{allowedConsents:o}:{}};this.ws.send(JSON.stringify(a))}sendMessagePreview(t){const{content:n,conversationId:s,data:o,mode:r,context:a}=t,i={event:"messagePreview",conversationId:s,content:Array.isArray(n)?n:[n],mode:r,context:a,...o};this.ws.send(JSON.stringify(i))}sendAudioClick(t,n){if(!n)return;const{chatMode:s}=this.getConversationState(n);this.send({conversationId:n,content:[{type:"command",command:{type:"topicClick",topic:t}}],mode:s})}setCharacterAppearance(t){var o;const n=(o=Et.get(bn))==null?void 0:o.id;if(!n)return;const{chatMode:s}=this.getConversationState(n);this.send({conversationId:n,content:[{type:"command",command:{type:"setCharacterAppearance",body:t}}],mode:s})}async updateChatOptions(){const n={event:"setOptions",...await hae()};this.ws.send(JSON.stringify(n))}processEvent(t){switch("id"in t&&(this.latestMessagePartIdentifier=t.id??null),t.event){case"received":this.handleReceived(t);break;case"newMessage":this.handleNewMessage(t);break;case"connected":this.handleConnected(t);break;case"emojiReaction":this.handleEmojiReaction(t);break;case"startMessage":this.handleStartMessage(t);break;case"appendText":this.handleAppendText(t);break;case"replaceText":this.handleReplaceText(t);break;case"invokeAction":this.handleInvokeAction(t);break;case"browserAutomate":this.handleBrowserAutomate(t);break;case"chainOfThought":this.handleChainOfThought(t);break;case"citation":this.handleCitation(t);break;case"generatingImage":this.handleGeneratingImage(t);break;case"imageGenerated":this.handleImageGenerated(t);break;case"partialImageGenerated":this.handlePartialImageGenerated(t);break;case"imageGenerationFailed":this.handleImageGenerationFailed(t);break;case"generatingCard":this.handleGeneratingCard(t);break;case"cardGenerationFailed":this.handleCardGenerationFailed(t);break;case"page":this.handlePage(t);break;case"titleUpdate":this.handleTitleUpdate(t);break;case"challenge":this.handleChallenge(t);break;case"card":this.handleCard(t);break;case"document":this.handleDocument(t);break;case"taskStart":this.handleTaskStart(t);break;case"taskUpdate":this.handleTaskUpdate(t);break;case"error":this.handleError(t);break;case"banned":this.handleBanned(t);break;case"suggestedFollowups":this.handleSuggestedFollowups(t);break;case"done":this.handleDone(t);break;case"startSuggestion":this.handleStartSuggestion(t);break;case"appendSuggestion":this.handleAppendSuggestion(t);break;case"activityStart":this.handleActivityStart(t);break;case"activityUpdate":this.handleActivityUpdate(t);break;case"memorySignal":this.handleMemorySignal(t);break;case"sideBySideComparison":this.handleSideBySideComparison(t);break;case"suggestVision":{const n=Et.get(De);ot(n,s=>{const o=hi(s);o&&o.content.push({type:"card",partId:Math.random().toString(),card:{type:"suggestVision"}})});break}case"modeSelected":this.handleModeSelected(t);break;case"pong":break;case"audio":case"interruptAudio":case"speechEndDetected":case"callTerminated":case"characterAnimation":case"characterAnimationEnd":case"characterAppearance":case"characterEmotion":case"callUI":case"callUIUpdate":break;case"relatedSearchResultsAvailable":this.handleRelatedSearchResultsAvailable(t);break;case"participantUpdate":this.handleParticipantUpdate(t);break}}handleMemorySignal(t){if(Rt("kill-memory-edf-basic"))return;const{messageId:n,partId:s,text:o,signalType:r}=t,a=this.conversationIdByMessageId.get(n);if(!a)return;this.getConversationState(a).timing.onMemorySignalReceived({messageId:n,conversationId:a}),ot(a,u=>{const d=Xt({history:u,messageId:n});d&&d.content.push({type:"memorySignal",partId:s,text:o,signalType:r})})}handleSideBySideComparison(t){if(!ye("side-by-side-comparison"))return;const{sideBySideComparisonId:n,conversationId:s,options:o,defaultMessageId:r}=t;Pae(n),D2(s,a=>{a.sideBySideComparisonId=n});for(const{messageId:a,position:i}of o)this.pendingSideBySideMessages.set(a,{position:i,isDefault:a===r})}handleModeSelected(t){const{messageId:n,mode:s}=t,o=this.conversationIdByMessageId.get(n),r=yo();if(!o)return;D.trackEvent({name:"system",data:{eventName:"modeSelectedEvent",eventInfo_conversationId:o,eventInfo_messageId:n,eventInfo_customData:JSON.stringify({eventInfo_selectedMode:s})}}),ye("smart-mode-cot")&&r==="smart"&&s==="reasoning"&&ot(o,i=>{const u=Xt({history:i,messageId:n});u&&u.content.push({type:"chainOfThought",text:z("chat.reasoningLoading.emptyCoTText"),partId:"-1"})})}clearAllStreamingStates(){const t=Et.get(xt);for(const n of t.values())ot(n.id,s=>{for(const o of s)o.author==="ai"&&o.streamingState==="streaming"&&(o.streamingState="idle")})}handleReceived(t){const{messageId:n,conversationId:s}=t;this.conversationIdByMessageId.set(n,s);const o=this.getConversationState(s);o.timing.onReceived({messageId:n,conversationId:s,chatMode:o.chatMode}),Z6([`humanMessage_${n}`,`conversation_${s}`]),Et.set(yi,r=>r&&!R1()?r-1:r),ot(s,r=>{const a=r.at(-1);(a==null?void 0:a.author)==="human"&&(a.id=n)}),iae()}handleNewMessage(t){const{message:n,conversationId:s}=t,o=bT(n);this.conversationIdByMessageId.set(o.id,s),ot(s,r=>{r.push(o)})}handleConnected(t){td.trackLatestChatConnectedAssignment(t)}handleEmojiReaction(t){const{messageId:n,emoji:s}=t,o=this.conversationIdByMessageId.get(n);o&&ot(o,r=>{const a=Uee(r,n);a&&(a.emojiReaction=s)})}handleStartMessage(t){const{messageId:n,conversationId:s,createdAt:o}=t;this.conversationIdByMessageId.set(n,s);const r=this.getConversationState(s),{chatMode:a}=r;r.citationCount=0,r.processedGuidedLinksCount=0,r.timing.onStartMessage({messageId:n,conversationId:s,chatMode:a}),F2()&&Et.set(mi,"responding"),Z6([`aiMesssage_${n}`,`conversation_${s}`]);const i=this.pendingSideBySideMessages.get(n),u={id:n,createdAt:o,author:"ai",content:[],mode:a,sideBySideConfig:i,streamingState:"streaming"};ot(s,d=>{d.length===0&&e_(Et.get(fo),s)||d.push(u)})}handleAppendText(t){const{text:n,messageId:s,partId:o}=t,r=this.conversationIdByMessageId.get(s);if(!r)return;const a=this.getConversationState(r);a.timing.onFirstToken(s,a.chatMode,r),ot(r,i=>{const u=Xt({history:i,messageId:s});if(u){Ic(r,u.id);let d=Ro(u.content,o);if(!d)d={type:"text",text:"",partId:o},u.content.push(d);else if(d.type!=="text"){console.error(`appendText event with partId that is not a text item. Item is of type ${d.type}`,t);return}d.text=d.text.concat(n),zee(u)}}),Q2()&&this.applyPendingGuidedActions(r)}handleReplaceText(t){const{text:n,messageId:s,partId:o}=t,r=this.conversationIdByMessageId.get(s);if(!r)return;const a=Et.get(bn),i=a==null?void 0:a.sideBySideComparisonId;i&&(Lae({sideBySideComparisonId:i,reason:"replacedText"}),AC(r)),ot(r,u=>{const d=Xt({history:u,messageId:s});if(d){Ic(r,d.id);let m=Ro(d.content,o);if(!m)m={type:"text",text:"",partId:o},d.content.push(m);else if(m.type!=="text"){console.error("replaceText event with partId that is not a text item",t);return}m.text=n,m.citations=void 0}})}handleCitation(t){const{title:n,url:s,messageId:o,publisher:r,iconUrl:a,snippet:i}=t,u=this.conversationIdByMessageId.get(o);if(!u)return;const d=this.getConversationState(u);EK(s,u,o),ot(u,m=>{const f=Xt({history:m,messageId:o});if(f){Ic(u,f.id);const p=Q4(f.content);if(p){p.citations||(p.citations=[]);const g=p.citations.find(v=>v.url===s);let C;if(g?C=g.index:(d.citationCount+=1,C=`${d.citationCount}`,p.citations.push({index:C,url:s,iconUrl:a,title:n,publisher:r,snippet:i})),p.text=p.text.concat(yT(C,s)),d.citationCount===1){const v=Kee();(v==null?void 0:v.type)==="citations"&&v.data.conversationId===u&&v.data.messageId!==o&&Il({type:"citations",data:{conversationId:u,messageId:o}})}}}})}handleGeneratingImage(t){const{prompt:n,messageId:s,partId:o,progressionText:r}=t,a=this.conversationIdByMessageId.get(s);if(!a)return;const i=this.getConversationState(a);i.timing.onImageGenerationStart({messageId:s,conversationId:a,chatMode:i.chatMode}),ot(a,u=>{const d=Xt({history:u,messageId:s});d&&d.content.push({type:"image",prompt:n,partId:o,partialGenerationStep:0,status:"generating",progressionText:r})})}handleImageGenerated(t){const{url:n,partId:s,messageId:o}=t,r=this.conversationIdByMessageId.get(o);if(!r)return;const a=this.getConversationState(r);a.imageCount+=1,a.timing.onImageReceived({messageId:o,conversationId:r,chatMode:a.chatMode}),ot(r,i=>{const u=Xt({history:i,messageId:o});if(u){const d=Ro(u.content,s);(d==null?void 0:d.type)==="image"&&(d.isPartiallyLoading=!1,d.url=n,d.partialGenerationStep=void 0,d.status="generated",d.progressionText=void 0)}})}handlePartialImageGenerated(t){const{content:n,messageId:s,partId:o}=t,r=this.conversationIdByMessageId.get(s);if(!r)return;const a=this.getConversationState(r);ot(r,i=>{const u=Xt({history:i,messageId:s});if(u){const d=Ro(u.content,o);if((d==null?void 0:d.type)==="image"){d.isPartiallyLoading=!0,d.url=`data:image/png;base64,${n}`;const m=(d.partialGenerationStep??0)+1;d.partialGenerationStep=m,d.status="generating",a.timing.onPartialImageReceived({messageId:s,conversationId:r,chatMode:a.chatMode,imageGenPhase:m})}}})}getImageGenerationErrorMessage(t){switch(t){case"not-signed-in":return;case"throttled":return;case"blocked":return;default:return z("error.imageGenerationFailed")}}handleImageGenerationFailed(t){const{messageId:n,partId:s,errorCode:o}=t,r=this.conversationIdByMessageId.get(n);if(!r)return;ot(r,i=>{const u=Xt({history:i,messageId:n});u&&(u.content=u.content.filter(d=>d.type!=="image"||d.partId!==s))});const a=this.getImageGenerationErrorMessage(o);o==="not-signed-in"&&Et.set(wa,{isOpen:!0,scenario:null,reason:"imageGeneration"}),a&&kf(a,r)}handleCardGenerationFailed(t){const n=Et.get(Eu);if(n&&this.isGeneratedCards(n)){Et.set(Eu,void 0);const s=this.conversationIdByMessageId.get(t.messageId);if(!s)return;n==="quiz"&&kf(z("quizCard.generatedQuizFailed"),s)}}handleGeneratingCard(t){const{type:n}=t;this.isGeneratedCards(n)&&Et.set(Eu,n)}isGeneratedCards(t){return Gw.safeParse(t).success}handleTitleUpdate(t){const{conversationId:n,title:s}=t;Et.set(xt,o=>Un(o,r=>{const a=r.get(n);a&&(a.title=s)}))}handleCard(t){const{messageId:n,partId:s,card:o}=t,r=this.conversationIdByMessageId.get(n);if(!r)return;const a=this.getConversationState(r);if(o.type==="ads"){mte({card:o,messageId:n,partId:s,conversationState:a,conversationId:r});return}ot(r,i=>{const u=Xt({history:i,messageId:n});u&&u.content.push({type:"card",partId:s,card:o})})}handleDocument(t){const{messageId:n,partId:s,attachmentId:o,fileName:r,contentType:a}=t,i=this.conversationIdByMessageId.get(n);i&&ot(i,u=>{const d=Xt({history:u,messageId:n});d&&d.content.push({type:"document",partId:s,attachmentId:o,fileName:r,contentType:a})})}handleBanned(t){const{expiresAt:n}=t,s=YC(n);s&&QC(s,"chat",n)}handlePage(t){const{messageId:n,page:s,partId:o}=t,r=this.conversationIdByMessageId.get(n);r&&(ot(r,a=>{const i=Xt({history:a,messageId:n});i&&i.content.push({type:"page",partId:o,page:s})}),We.emit("pages:page-created",s))}handleStartSuggestion(t){const{pageId:n,suggestionId:s,editTargets:o}=t;Nae(n,{id:s,text:void 0,editTargets:o})}applyPendingGuidedActions(t){const n=this.getConversationState(t),{pendingGuidedActions:s}=n;s.length!==0&&ot(t,o=>{const r=hi(o);if(!r)return;const a=Q4(r.content);if(!a||!a.text)return;const{text:i}=a,u=n.pendingGuidedActions[0];if(!u)return;const{targetText:d,prefill:m}=u;if(!d||!m)return;const f=i.lastIndexOf(d);if(f!==-1){const p=i.substring(0,f),g=i.substring(f+d.length),C=`[${d}](${lae}?${uae}=${encodeURIComponent(m)})`,v=p+C+g;a.text=v,n.processedGuidedLinksCount+=1,n.pendingGuidedActions.shift()}})}handleGuidedConversationAction(t,n){if(!Q2())return;const s=fae(t);this.getConversationState(n).pendingGuidedActions.push(s),this.applyPendingGuidedActions(n)}handleAppendSuggestion(t){const{pageId:n,suggestionId:s,text:o}=t;Rae(n,s,o)}handleActivityStart(t){if(!P2())return;const{messageId:n,partId:s,activity:o}=t,r=this.conversationIdByMessageId.get(n);r&&ot(r,a=>{const i=Xt({history:a,messageId:n});i?(Ic(r,i.id),i.content.push({activity:o,type:"activity",partId:s})):Yt({feature:"activity",errorType:"handleActivityStart",errorMessage:"Could not find message with messageId to start activity",customData:JSON.stringify({messageId:n})})})}async handleActivityUpdate(t){if(!P2())return;const{messageId:n,partId:s,update:o}=t,r=this.conversationIdByMessageId.get(n);if(r)try{const a=await Q6();ot(r,i=>{const u=Xt({history:i,messageId:n});if(!u)return;const d=Ro(u.content,s);if(!d||d.type!=="activity"){Yt({feature:"activity",errorType:"handleActivityUpdate",errorMessage:"Could not find activity message with partId in message with messageId",customData:JSON.stringify({messageId:n,partId:s})});return}a(d.activity,o),G4.run({conversationId:r,partId:s,activity:d.activity})})}catch(a){Yt({feature:"activity",errorType:"handleActivityUpdate",errorMessage:"Error updating activity",exception:JSON.stringify({error:a})})}}processInvokeAction(t){const n=Et.get(De);if(n)switch(t.actionName){case"phone_send_message":{ot(n,s=>{const o=hi(s);o&&o.content.push({type:"card",partId:Math.random().toString(),card:{type:"phoneSendMessage",actionId:t.actionId,contactName:t.parameters.contactName,text:t.parameters.text,phoneNumber:t.parameters.phoneNumber}})});break}case"edge_get_page_content":{const s=t.parameters.map(o=>({tabId:o.tabId,windowId:o.windowId,pageUrl:o.pageUrl??"",pageTitle:o.pageTitle??""}));CJ.run({actionId:t.actionId,tabs:s});break}case"edge_navigate_to":case"edge_switch_tab":case"edge_close_tabs":case"edge_group_open_browser_tabs":case"edge_ungroup_open_browser_tabs":case"edge_find_browser_tab_groups":case"edge_media_controls":case"edge_go_back_forward":case"computer_use":{yJ.run(t);break}case"browser_search":{const s=Wee(n,z("chat.multiTabsSearchIndicatorForHistory"));bJ.run({actionId:t.actionId,queries:t.parameters.queries,startTime:t.parameters.startTime?p6(t.parameters.startTime):void 0,endTime:t.parameters.endTime?p6(t.parameters.endTime):void 0,maxResults:t.parameters.maxResults,states:Yne(t.parameters.states)}).then(()=>{J4(n,s,"success")}).catch(o=>{Yt({feature:"multiTabsSearch",errorType:"fetchTabsContent",errorMessage:o instanceof Error?o.message:"unknown"}),J4(n,s,"failed")});break}case"guided_conversation":{this.handleGuidedConversationAction(t,n);break}}}handleInvokeAction(t){const{success:n,data:s}=Bte.safeParse(t);n?this.processInvokeAction(s):console.error("Invalid action data:",t)}handleBrowserAutomate(t){const{partId:n,tabIds:s,activeTabId:o,messageId:r}=t,a=this.conversationIdByMessageId.get(r);a&&(D.trackEvent({name:"system",data:{eventName:"browserAutomate",eventInfo_conversationId:a,eventInfo_messageId:r}}),ot(a,i=>{const u=Xt({history:i,messageId:r});if(u){const d=Ro(u.content,n);if(d&&d.type==="activity"){const m=d.activity.artifacts.find(f=>f.type==="browser");m?(m.tabIds=s,m.activeTabId=o):d.activity.artifacts.push({type:"browser",tabIds:s,activeTabId:o}),G4.run({conversationId:a,partId:n,activity:d.activity})}}}))}handleTaskStart(t){const{messageId:n,task:s,partId:o}=t,r=this.conversationIdByMessageId.get(n);this.messageIdByTaskId.set(s.id,n);const a=new Date().toISOString();if(r){ese([s],r,a),Et.set(Uc,!1),ot(r,u=>{const d=Xt({history:u,messageId:n});if(d){const m=IX(s,o,a);m&&d.content.push(m)}}),gJ.run({task:s,action:"startTask"});const i=Et.get(De);s.type==="computerUse"&&r===i&&ate(s.conversationId,r),(s.type==="podcast"||s.type==="research"||s.type==="videoGeneration")&&Gae()}}async handleTaskUpdate(t){const{taskId:n,update:s}=t;if(Xee(n,s))return;let o=!1;const r=this.messageIdByTaskId.get(n),a=r?this.conversationIdByMessageId.get(r):void 0;try{const i=await Q6();r&&a&&ot(a,u=>{const d=Xt({history:u,messageId:r});if(d){const m=AX(d.content),f=m==null?void 0:m.task;f&&f.type==="research"&&(i(f,s),$ee(f,a))}}),TC(n,u=>{var d;if(u.type==="computerUse"&&i(u,s),u.type==="podcast"){const m=((d=u.podcast)==null?void 0:d.id)??"";i(u,s),u.podcast&&(u.podcast.id=m)}u.type==="videoGeneration"&&i(u,s)}),o=!0}catch(i){console.error("Error applying task update patch:",i)}if(o){const i=Et.get(fo).get(n);switch(i==null?void 0:i.type){case"computerUse":ste(n,s);break;case"podcast":Pee(i);break;case"videoGeneration":cte(i);break}}}handleSuggestedFollowups(t){const{disableMultiturn:n}=ae.instance().config();if(!n){const{suggestions:s,messageId:o}=t,r=this.conversationIdByMessageId.get(o);r&&D2(r,a=>{a.suggestedFollowup={messageId:o,suggestions:s}})}}handleError(t){const{errorCode:n}=t;if(n==="over-turn-limit")Et.set(yi,0);else if(n==="over-task-quota"||n==="over-lifetime-task-quota")Et.set(zK,n),Et.set(bo,"over-task-quota");else if(n==="unknown-error")for(const[s]of this.conversationMetadata.entries())ot(s,o=>{for(const r of o)r.author==="ai"&&r.streamingState==="streaming"&&(r.streamingState="idle")});else if(n==="page-content-length-exceeded"||n==="page-count-exceeded"){We.emit("page:message-error",n);for(const[s]of this.conversationMetadata.entries())ot(s,o=>{for(const r of o)r.author==="ai"&&r.streamingState==="streaming"&&(r.streamingState="idle")})}else for(const[s]of this.conversationMetadata.entries())kf(z("error.eventNotRecognized"),s);Et.set(Uc,!1)}handleChainOfThought(t){const{messageId:n,partId:s,text:o}=t,r=this.conversationIdByMessageId.get(n);r&&ot(r,a=>{const i=Xt({history:a,messageId:n});if(i){Ic(r,i.id);let u=Ro(i.content,s);const d=this.getConversationState(r);if(u)u.type!=="chainOfThought"?console.error(`chainOfThought event with partId that is not a chainOfThought item. Item is of type ${u.type}`,t):u.text=u.text.concat(o);else{u={type:"chainOfThought",text:"",title:"",partId:s},i.content.push(u);const{title:m,text:f}=Jre(o);u.title=m,u.text=f,d.timing.onChainOfThoughtReceived({messageId:n,conversationId:r,chatMode:d.chatMode}),d.chainOfThoughtCount+=1}}})}async handleHashcashChallenge(t){if(!t)return;const n=Et.get(De);D.trackEvent({name:"system",data:{eventName:"challengeRequest",eventInfo_method:"hashcash",eventInfo_customData:JSON.stringify({conversationId:n,parameter:t})}});const[s,o]=t.split(":"),r=Number(o);if(!s||Number.isNaN(r)||r<=0)return;const a=await wX({token:s,difficulty:r});this.sendChallengeResponse({method:"hashcash",token:a.nonce.toString()}),D.trackEvent({name:"system",data:{eventName:"challengeResponse",eventInfo_method:"hashcash",eventInfo_duration:a.timeElapsed,eventInfo_customData:JSON.stringify({difficulty:r,numberOfTries:a.nonce,totalHashes:a.totalHashes,method:a.method,numberOfWorkers:a.numberOfWorkers})}})}async handleChallenge(t){const n=()=>{const s=Et.get(De);if(!s)return;const{lastUserMessage:o}=this.getConversationState(s);o&&this.send(o)};if(t.method==="copilot"){const{parameter:s}=t,o=Number(s),r=Math.round((o**3/100+o*25)%22).toString();this.sendChallengeResponse({method:"copilot",token:r}),n(),We.emit("challenge:success");return}if(ye("hashcash")&&t.method==="hashcash"){await this.handleHashcashChallenge(t.parameter),n(),We.emit("challenge:success");return}Rt("kill-cf-turnstile")||hT(s=>{this.sendChallengeResponse({token:s,method:"cloudflare"}),n()})}handleRelatedSearchResultsAvailable(t){const{messageId:n}=t;Hee(n)}handleParticipantUpdate(t){const{conversationId:n,participant:s,updateType:o,id:r}=t,a={id:r,createdAt:new Date().toISOString(),author:"system",participant:s,updateType:o};ot(n,u=>{u.push(a)});const i=pe(Jt);if(s.userId===(i==null?void 0:i.id)&&o==="kicked"){Pl();return}x_(n)}handleDone(t){var d;F2()&&Et.get(mi)==="responding"&&Et.set(mi,"idle");const{messageId:n}=t,s=this.conversationIdByMessageId.get(n);if(!s)return;const o=this.getConversationState(s);o.timing.onLastToken({messageId:n,conversationId:s,citationCount:o.citationCount,imageCount:o.imageCount,chainOfThoughtCount:o.chainOfThoughtCount,chatMode:o.chatMode,inputMethod:o.inputMethod,uploadImageCount:o.uploadImageCount,uploadFileCount:o.uploadFileCount,guidedLinksCount:o.processedGuidedLinksCount});const a=((d=Et.get(xt).get(s))==null?void 0:d.history)??[],i=Xt({history:a,messageId:n});ot(s,m=>{if(!i)return;const f=Xt({history:m,messageId:i.id}),p=i.content.find(g=>g.type==="image"&&g.partialGenerationStep!==void 0);if(f&&p){const g=Ro(f.content,p.partId);g&&(g.partialGenerationStep===0?g.type="deleted":g.type==="image"&&(g.isPartiallyLoading=!1,g.partialGenerationStep=void 0,g.status="non-complete"))}if(f){f.streamingState="idle";const g=f.content.filter(C=>C.type==="activity");for(const C of g)if(cae(C.activity)){C.activity.status==="running"&&(C.activity.status="failed");for(const b of C.activity.steps)b.status==="running"&&(b.status="completed")}}});const u=this.pendingSideBySideMessages.get(n);u&&(this.pendingSideBySideMessages.delete(n),ot(s,m=>{const f=Xt({history:m,messageId:n});f&&(f.streamingState="idle",f.sideBySideConfig={...u,isStreamingComplete:!0})})),Et.set(Eu,void 0),Et.set(Uc,!1),window.setTimeout(()=>{Et.set(y1,m=>Un(m,f=>{const p=f.get(s);p!=null&&p.has(n)&&(p.delete(n),p.size===0&&f.delete(s))}))},3e3),Et.set(xw,!0),i&&Fae({message:i,conversationId:s}),EJ.run({conversationMessages:a})}}async function $ae(){try{const{load:e}=await V(async()=>{const{load:s}=await import("./botd.esm-BXibAnG2.js");return{load:s}},__vite__mapDeps([3,1])),t=await e({monitoring:!1}),{bot:n}=t.detect();return n}catch(e){return D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"BotDetectionError",eventInfo_details:"Failed on bot detection",eventInfo_errorMessage:e instanceof Error?e.message:"Unknown bot detection error"}}),!1}}async function qae(){return new Promise((e,t)=>{hT(async n=>{try{const s=await Nn({path:"/challenges/verify",args:{body:{token:n,method:"cloudflare"}}}),{isValid:o}=await s.json();e(o)}catch(s){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CloudflareChallengeVerificationError",eventInfo_details:"Error verifying Cloudflare challenge",eventInfo_errorMessage:s instanceof Error?s.message:""}})}t()})})}const Zae="eval/chat",Gg=1e3,Kae=3e4,Yae=5e3,Qae=1e4,Jae=3,J6=6e4;class Xae{constructor({autoReconnect:t=!1}={}){O(this,"connection");O(this,"autoReconnect");O(this,"reconnectInterval");O(this,"maxReconnectInterval");O(this,"reconnectTimeout");O(this,"sendQueue",[]);O(this,"connecting",!1);O(this,"state",null);O(this,"cachedSendData",null);O(this,"pongTimeout",null);O(this,"windowStartTime",null);O(this,"connectionCount",0);O(this,"cooldownStart",null);O(this,"boundReconnectIfNeeded");O(this,"boundDisconnect");O(this,"boundVisibilityChange");O(this,"getUrl",null);O(this,"onopen");O(this,"onmessage");O(this,"onclose");O(this,"onerror");this.connection=null,this.autoReconnect=t,this.reconnectInterval=Gg,this.maxReconnectInterval=t?Kae:0,this.reconnectTimeout=null,this.onopen=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.connect=this.connect.bind(this),this.reconnect=this.reconnect.bind(this),this.processSendQueue=this.processSendQueue.bind(this)}async initialize(){this.state=null,await this.connect(),this.autoReconnect&&(this.boundReconnectIfNeeded=this.reconnectIfNeeded.bind(this),this.boundDisconnect=this.disconnect.bind(this),this.boundVisibilityChange=()=>{document.visibilityState==="visible"&&this.reconnectIfNeeded()},window.addEventListener("online",this.boundReconnectIfNeeded),window.addEventListener("offline",this.boundDisconnect),document.addEventListener("visibilitychange",this.boundVisibilityChange))}async connect(){var n;if(((n=this.connection)==null?void 0:n.readyState)===WebSocket.CONNECTING||this.connecting||this.pongTimeout)return;if(!this.getUrl)throw new Error("getUrl function is not set");this.connecting=!0;const t=await this.getUrl();this.connection=new WebSocket(t),this.connecting=!1,this.connection.onopen=s=>{if(this.state=null,!Rt("kill-rapid-reconnect-detect")){const o=performance.now();!this.windowStartTime||o-this.windowStartTime>=Qae?(this.windowStartTime=o,this.connectionCount=1):this.connectionCount+=1,this.connectionCount>=Jae&&(this.cooldownStart=o,this.windowStartTime=null,this.connectionCount=0,this.sendQueue=[])}this.onopen&&this.onopen(s),this.processSendQueue(),this.reconnectInterval=Gg,this.reconnectTimeout&&(window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},this.connection.onmessage=s=>{if(this.state!=="destroyed")try{const o=JSON.parse(s.data);this.onmessage&&this.onmessage(o),o.event==="pong"&&(this.removePongTimeout(),this.processSendQueue())}catch{}},this.connection.onclose=s=>{this.connection&&this.connection.bufferedAmount>0&&this.cachedSendData&&(this.sendQueue.push(this.cachedSendData),this.cachedSendData=null),this.onclose&&this.onclose(s),this.autoReconnect&&this.state===null&&this.reconnect(),this.removePongTimeout()},this.connection.onerror=s=>{this.onerror&&this.onerror(s),this.connection&&this.connection.close(),this.removePongTimeout()}}reconnect(){if(this.reconnectTimeout&&window.clearTimeout(this.reconnectTimeout),!Rt("kill-rapid-reconnect-detect")&&this.cooldownStart){const t=performance.now()-this.cooldownStart;if(t<J6){const n=J6-t;this.reconnectTimeout=window.setTimeout(this.connect,n);return}this.cooldownStart=null,this.reconnectInterval=Gg}this.reconnectTimeout=window.setTimeout(this.connect,this.reconnectInterval),this.reconnectInterval=Math.min(this.reconnectInterval*2,this.maxReconnectInterval)}processSendQueue(){if(this.sendQueue.length>0){const t=this.sendQueue;this.sendQueue=[];for(const n of t)this.send(n)}}reconnectIfNeeded(){if(this.state!=="destroyed"){if(!this.connection||this.connection.readyState!==WebSocket.OPEN){this.reconnect();return}this.pongTimeout===null&&(this.connection.send(JSON.stringify({event:"ping"})),this.pongTimeout=window.setTimeout(()=>{var t;this.pongTimeout=null,(t=this.connection)==null||t.close(),this.reconnect()},Yae))}}removePongTimeout(){this.pongTimeout!==null&&(window.clearTimeout(this.pongTimeout),this.pongTimeout=null)}send(t){if(this.state!=="destroyed")if(this.connection&&this.connection.readyState===WebSocket.OPEN&&this.pongTimeout===null)try{this.cachedSendData=t,this.connection.send(t)}catch{this.sendQueue.push(t),this.connect()}else this.sendQueue.push(t),this.connect()}cleanup(){this.boundReconnectIfNeeded&&window.removeEventListener("online",this.boundReconnectIfNeeded),this.boundDisconnect&&window.removeEventListener("offline",this.boundDisconnect),this.boundVisibilityChange&&document.removeEventListener("visibilitychange",this.boundVisibilityChange)}disconnect(){this.connection&&(this.state="disconnected",this.connection.close())}destroy(){this.connection&&(this.state="destroyed",this.cleanup(),this.connection.close(),this.connection=null,this.windowStartTime=null,this.connectionCount=0,this.cooldownStart=null)}}async function Ns({useMockConnection:e}={}){const t=async({cursor:n})=>{const o=!!LI()||!!OI()?Zae:"chat";return n?$4(o,{cursor:n}):$4(o)};return Rf.get({getUrl:t})}async function eie({getUrl:e}){if(typeof WebSocket>"u")return{destroy:()=>{},send:()=>{},regenerate:()=>{},sendSkipReasoning:()=>{},sendContext:()=>{},sendAudioStart:()=>{},sendAudio:()=>{},sendAudioEnd:()=>{},sendAudioClick:()=>{},setCharacterAppearance:()=>{},setCallType:()=>{},stop:()=>{},setOnEvent:()=>()=>{},setOnOpen:()=>{},sendChallengeResponse:()=>{},sendActionResult:()=>{},sendMessagePreview:()=>{},updateChatOptions:()=>Promise.resolve(),selectSxSMessage:()=>{},resetConversationState:()=>{},resetConversationTiming:()=>{},setConversationIdByMessageId:()=>{},setMessageIdByTaskId:()=>{},setChatModeForConversation:()=>{},setInputMethodForConversation:()=>{},setUploadCountsForConversation:()=>{},callBeforeSendForConversation:()=>{},callOnSentForConversation:()=>{},setUserMessageForConversation:()=>{},onSubmitMessageBlocked:()=>{}};const t=R1(),n=!!ae.instance().config().isBotDetectionEnabled;if(ye("client-side-request-challenge")&&!Rt("kill-client-side-request-challenge")&&n&&!t){const s=await $ae(),o=!s||await qae();if(D.trackEvent({name:"system",data:{eventName:"botDetectionTriggered",eventInfo_result:o?"success":"failed",eventInfo_isBot:s}}),!o)return Promise.reject()}return new Promise((s,o)=>{const r=Rt("kill-chat-auto-reconnect"),a=new Xae({autoReconnect:!r}),i=new Wae(a);let u=null;a.getUrl=()=>e({cursor:i.latestMessagePartId}),a.onopen=async()=>{a.onmessage=d=>{try{F4.parse(d)}catch(m){m instanceof zf&&sd(m,"/chat")}i.processEvent(d)},await i.updateChatOptions(),u&&u(),s({destroy:()=>{a.destroy(),i.clearAllStreamingStates()},stop:(d={})=>{const{conversationId:m,taskId:f}=d;a.send(JSON.stringify({event:"stop",conversationId:m})),f&&a.send(JSON.stringify({event:"send",conversationId:m,content:[{type:"command",command:{type:"cancelTask",taskId:f}}],mode:"research"})),m&&ot(m,p=>{for(const g of p)g.author==="ai"&&g.streamingState==="streaming"&&(g.streamingState="idle")})},send:i.send,regenerate:i.regenerate,sendSkipReasoning:d=>{const{messageId:m}=d;a.send(JSON.stringify({event:"skipReasoning",messageId:m}))},sendContext:d=>{a.send(JSON.stringify({event:"sendContext",context:d}))},sendAudioStart:d=>{const{conversationId:m,options:f,clientType:p,mode:g,context:C}=d,v={event:"audioStart",conversationId:m,mode:g,options:f,clientType:p,context:C};a.send(JSON.stringify(v))},sendAudio:d=>{const m={event:"audio",audio:d};a.send(JSON.stringify(m))},sendAudioEnd:()=>{const d={event:"audioEnd"};a.send(JSON.stringify(d))},sendAudioClick:(d,m)=>{i.sendAudioClick(d,m)},setCharacterAppearance:d=>{i.setCharacterAppearance(d)},setCallType:d=>{const m={event:"setCallType",callType:d};a.send(JSON.stringify(m))},sendChallengeResponse:i.sendChallengeResponse,setOnEvent:d=>{a.onmessage=m=>{try{F4.parse(m),i.processEvent(m)}catch(f){f instanceof zf&&sd(f,"/chat")}d(m)}},setOnOpen:d=>{u=d},sendActionResult:d=>{a.send(JSON.stringify({event:"actionResult",actionId:d.actionId,result:d.result}))},selectSxSMessage:d=>{const{sideBySideComparisonId:m,selectedMessageId:f}=d,p={event:"selectMessage",sideBySideComparisonId:m,selectedMessageId:f};a.send(JSON.stringify(p))},resetConversationState:i.resetConversationState,resetConversationTiming:i.resetConversationTiming,setConversationIdByMessageId:i.setConversationIdByMessageId,setMessageIdByTaskId:i.setMessageIdByTaskId,setChatModeForConversation:i.setChatModeForConversation,setInputMethodForConversation:i.setInputMethodForConversation,setUploadCountsForConversation:i.setUploadCountsForConversation,callBeforeSendForConversation:i.callBeforeSendForConversation,callOnSentForConversation:i.callOnSentForConversation,setUserMessageForConversation:i.setUserMessageForConversation,onSubmitMessageBlocked:i.onSubmitMessageBlocked,sendMessagePreview:i.sendMessagePreview.bind(i),updateChatOptions:i.updateChatOptions.bind(i)})},a.onclose=()=>{},a.onerror=d=>{const m=d instanceof ErrorEvent?d.message:"Unknown WebSocket error";D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketError",eventInfo_errorMessage:m,eventInfo_details:JSON.stringify(d)}}),o(new Error(`WebSocket connection error: ${m}`))},a.initialize().catch(d=>{const m=d instanceof Error?d.message:"Unknown WebSocket error";D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketInitializationError",eventInfo_errorMessage:m,eventInfo_details:d instanceof Error?d.stack??"":""}}),o(new Error(`WebSocket initialization error: ${m}`))})})}async function XC(){if(Rf.isInstantiated){const e=pe(bn),t=pe(Jv),n=await Rf.get();n.stop(),n.destroy(),n.stop({conversationId:e==null?void 0:e.id}),Rf.reset();try{D.trackEvent({name:"system",data:{eventName:"chatClientReset",eventInfo_isMessageStreaming:t}})}catch{}}}const Rf=new zi(e=>eie(e));function tie(){const e=M(sn),t=H("account-change-chat-reset");l.useEffect(()=>{t&&XC()},[e,t])}function ET(e){const{onStartComplete:t}=e;l.useEffect(()=>{const n=()=>{t(),We.off("app:start-complete",n)};return We.on("app:start-complete",n),()=>{We.off("app:start-complete",n)}},[t])}function nie(){ET({onStartComplete:()=>{e()}});const e=()=>{try{const n="n59ae4ieqq";if(Rt("kill-clarity")||!t(n))return()=>{};window.clarity||(window.clarity=function(...a){window.clarity&&(window.clarity.q=window.clarity.q??[]).push(a)});const o=document.createElement("script");return o.type="text/javascript",o.async=!0,o.src=`/cl/tag/${n}`,document.body.appendChild(o),window.clarity("signal",async r=>{if(r.type==="cl_dtrs"&&r.value){const a=pe(De);try{await Nn({path:"/clarity/signal",args:{body:{token:r.value,conversationId:a}}}),D.trackEvent({name:"system",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:"Clarity",eventInfo_scenario:"Clarity signal event sent via API",eventInfo_customData:JSON.stringify(r)}})}catch(i){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ClaritySignalError",eventInfo_details:"Failed to send clarity via API",eventInfo_errorMessage:i instanceof Error?i.message:"Unknown clarity signal error"}})}}}),window.clarity("metadata",()=>{Y2({surface:"cmc"});const r=pe(rI);r!==null&&Y2({isNewUser:r.toString()})},!1,!0),()=>{delete window.clarity,o.remove()}}catch(n){return D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"useClarity",eventInfo_details:"Error loading Clarity",eventInfo_errorMessage:`${n}`}}),()=>{}}},t=n=>n.trim()!==""}function sie(){l.useEffect(()=>{qv(["ak_failover"])},[])}function Wg(e){if(ae.instance().config().persistThemeChoice){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e!==n?(Mn($r,e),nl($r,e,{expireDays:365*10})):(Ht($r),Y7($r))}document.documentElement.setAttribute("data-theme",e),We.emit("theme:color-applied",e)}function oie(){const e=ca($r),t=tn($r);return e??t??null}function rie(){const{persistThemeChoice:e,enforceTheme:t}=ae.instance().config(),[n,s]=Fe(Wo);l.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),r=i=>{const u=i.matches?"dark":"light";s(u),Wg(u),e&&(Ht($r),Y7($r))};let a=e?oie():"";return a!=="dark"&&a!=="light"&&(a=o.matches?"dark":"light"),t&&(a=t),s(a),Wg(a),o.addEventListener("change",r),()=>{o.removeEventListener("change",r)}},[s,e,t]),l.useEffect(()=>{n&&Wg(n)},[n])}const e3=new Set;function aie(e=!1){return tn(J0)!==null&&!e?!1:(Ht(n1),Ht(sl),die(),Mn(J0,"true"),!0)}function wT(){return parseInt(tn(n1)??"0",10)}function iie(){return new Date(tn(sl)??new Date().toISOString())}function cie(e){tn(sl)||Mn(sl,e)}function lie(e){let t;try{t=wT()}catch{t=0}t<h2&&(t+=1,Mn(n1,`${t}`),e3.add(e),t===h2&&cie(new Date().toISOString()))}function uie(e){e&&(e3.has(e)||lie(e))}function die(){e3.clear()}function mie(){const e=an(),t=se(oI);l.useEffect(()=>{e&&aie()&&t(!0)},[e,t])}function fie(){l.useEffect(()=>{if(window.ReportingObserver===void 0)return()=>{};const e=new ReportingObserver(t=>{for(const n of t){if(n.type!=="csp-violation"||!n.body)continue;const{body:s}=n,{blockedURL:o,documentURL:r,effectiveDirective:a,disposition:i}=s;console.error("Reporting CSP violation",{blockedURL:o,documentURL:r,effectiveDirective:a,disposition:i}),D.trackEvent({name:"system",data:{eventName:"copilotCSPViolation",eventInfo_blockedURL:o,eventInfo_documentURL:r,eventInfo_effectiveDirective:a,eventInfo_disposition:i}})}},{buffered:!0,types:["csp-violation"]});return e.observe(),()=>{e.disconnect()}},[])}function pie(){const e=H("custom-1ds"),t=M(Rn);l.useEffect(()=>{if(!e||!ae.instance().config().enableCustom1DS)return cw(),()=>{};if(!t)return()=>{};const n=()=>{if(window.oneDS){const{ApplicationInsights:r}=window.oneDS;return new r}},s=()=>{var u;window.OneDsAzureAnalytics=window.OneDsAzureAnalytics??n();function r(){var m;return!!!((m=window.OneDsAzureAnalytics)!=null&&m.getCookieMgr().get("MSCC"))}const a={adobe:r(),google:r()},i={instrumentationKey:"c72e6b24df604532a6282edd268b4ba4-9cdee1fe-5d2f-4626-9620-dbad9b53a8e5-8065",channelConfiguration:{eventsLimitInMem:50,autoFlushEventsLimit:1},propertyConfiguration:{userConsentCookieName:t1.name,gpcDataSharingOptIn:Q7(),callback:{userConsentDetails:()=>{if(!l1.includes(t))return{Required:!0,Analytics:!0,SocialMedia:!0,Advertising:!0};const d=Ni();return{Required:Object.values(d).includes(!0),Analytics:d.analytics,SocialMedia:d.socialMedia,Advertising:d.advertising}}}},webAnalyticsConfiguration:{coreData:{appId:"JS:Copilot_microsoft_com"},cookiesToCollect:["_mkto_trk"],urlCollectQuery:!0,syncMuid:r()},extensionConfig:{IdSyncPlugin:a}};window.postConsAzure1DSInit||((u=window.OneDsAzureAnalytics)==null||u.initialize(i,[]),window.postConsAzure1DSInit=!0)},o=document.createElement("script");return o.src="https://az416426.vo.msecnd.net/scripts/c/ms.analytics-web-4.min.js",o.async=!0,o.onload=s,document.head.appendChild(o),()=>{document.head.removeChild(o)}},[e,t])}function th(){const[e,t]=Fe(UK),n=ut();return l.useEffect(()=>{n.endsWith("/chats/new/talk")&&(D.setLandingPage("deepLinkVoiceCall"),t("audioCall"))},[n,t]),[e,()=>t(null)]}function IT(e){const{deferred:t=!1}=e??{},n=j9(),[s,o]=Fe(sC),r=se(tm);l.useEffect(()=>{const u=KZ();u&&o(u)},[n.search,o]);const a=l.useCallback(()=>{o(null)},[o]),i=l.useCallback(u=>{u&&r({source:"promptInUrl",prompt:u})},[r]);return l.useEffect(()=>{s&&!t&&i(s)},[t,i,s]),{prompt:s,handler:t?i:void 0,clear:a}}function hie(){const e=H("prompt-pt-learn-partial"),t=H("prompt-pt-learn-full"),n=H("prompt-pt-learn-fill"),s=H("prompt-pt-advice-partial"),o=H("prompt-pt-advice-full"),r=H("prompt-pt-advice-fill"),a=H("prompt-pt-ideas-partial"),i=H("prompt-pt-ideas-full"),u=H("prompt-pt-ideas-fill"),d=H("prompt-pt-msn-answers"),m=H("prompt-pt-msn-headlines"),f=H("prompt-pt-msn-events"),p=H("prompt-pt-msn-answers-full"),g=H("prompt-pt-msn-headlines-full"),C=H("prompt-pt-msn-events-full"),v=D.getFormCode();let b=null,y=!1,E=!1,x=!1;switch(v){case"NTPCHB":{e||t||n?b="teach":s||o||r?b="advice":(a||i||u)&&(b="ideas"),y=e||s||a,E=t||o||i,x=n||r||u;break}case"MSNCHB":{d||p?b="answers":m||g?b="headlines":(f||C)&&(b="events"),E=p||g||C,x=d||m||f;break}default:b=null}let I=null;y?I="prefix":(E||x)&&(I="complete");let _=null;return y||x?_="partial":E&&(_="full"),{formCode:v,treatment:b,lengthVariant:I,passthroughType:_}}function _T(e){var p;const{inEeaPlusRegion:t,labsFeatureEnabled:n,region:s,isUpsellFeatureEnabled:o,isAuthenticated:r,isTeenUser:a,isPremiumTierUser:i,skipPremiumTierUserCheck:u}=e;if(t&&!n)return!1;const d=!s||dv.includes(s),m=((p=ae.instance().config().actions)==null?void 0:p.overrideFreemiumActionsUpsellFeatureEnabled)??!1;return i||u||(o||m)&&r&&!a&&!d}function gie(){const e=pe(fC),t=ye("labs-actions"),n=ye("labs-actions-skipprocheck"),s=!1,o=R1(),r=pe(Yd),a=pe(Rn),i=!!pe(tI);return _T({inEeaPlusRegion:i,labsFeatureEnabled:t,region:a,isUpsellFeatureEnabled:s,isAuthenticated:o,isTeenUser:r,isPremiumTierUser:e,skipPremiumTierUserCheck:n})}function TT(e){const{actionsAvailableForAccount:t,actionsAvailableForSurface:n}=e;return t&&n}async function vie(){var s;const e=gie(),n=await(((s=ae.instance().config().actions)==null?void 0:s.enableActions)??(()=>Promise.resolve(!1)))();return TT({actionsAvailableForAccount:e,actionsAvailableForSurface:n})}function Cie(e,t,n){return e&&(n&&t)}function AT(){const e=M(fC),t=H("labs-actions"),n=H("labs-actions-skipprocheck"),s=!1,o=an(),r=!!M(Yd),a=M(Rn),i=!!M(tI);return _T({inEeaPlusRegion:i,labsFeatureEnabled:t,region:a,isUpsellFeatureEnabled:s,isAuthenticated:o,isTeenUser:r,isPremiumTierUser:e,skipPremiumTierUserCheck:n})}function kT(){const[e,t]=l.useState(!1),n=M(_f);return l.useEffect(()=>{async function s(){var r;await(((r=ae.instance().config().actions)==null?void 0:r.enableActions)??(()=>Promise.resolve(!1)))()&&t(!0)}s().catch(()=>{})},[t,n]),e}function t3(){const e=AT(),t=kT();return TT({actionsAvailableForAccount:e,actionsAvailableForSurface:t})}function xIe(){var s;const e=AT(),t=kT(),n=((s=ae.instance().config().actions)==null?void 0:s.overrideLabsActionsFeatureEnabled)??!1;return Cie(e,t,n)}function n3(){const e=H("searchmode")||(ae.instance().config().enableSearchMode??!1),t=on("kill-search-mode");return e&&!t}const MT=["smart-mode-6e0b4c6f","smart-mode-cd0c997b","smart-mode"];function Ll(){return ZC(MT,"any")}function yie(){return md(MT,"any")}let Pf=null;function bie(){const e=se(hw),t=t3(),n=Ll(),s=n3(),o=H("study-mode"),r=H("coco-mode");l.useEffect(()=>{const a=qZ(),i=JZ();Pf===null&&(Pf=a);const u=m=>m==="td"?"reasoning":t&&m==="ac"?"computerUse":n&&m==="sm"?"smart":s&&m==="cs"?"search":o&&m==="st"?"study":r&&m==="co"?"coco":null,d=u(a||Pf);d&&zt(d),i&&e(!0)},[t,s,n,o,r,e])}function xie(){return Pf}function Sie(e,t,n,s={text:"",atTimestamp:0,files:[]}){return n?t.length!==s.files.length?!0:!!!(e&&e.length>=n.minTextLength)||s.atTimestamp&&s.atTimestamp+n.debounceInMilliseconds>=Date.now()?!1:e&&s.text&&(e.includes(s.text)||s.text.includes(e))?Math.abs((e.length-s.text.length)/s.text.length)>=n.textDeltaPercent/100:!0:!1}function SIe(e){let t,n;for(let s=e.length-1;s>=0;s-=1){const o=e[s];if((o==null?void 0:o.author)!=="system")if(!t)t=o;else{n=o;break}}return{lastNonSystemMessage:t,secondToLastNonSystemMessage:n}}N(null);const X6=N(new Map),NT=N(null),ra=N(null),s3=N(e=>{const t=e(ra);return(t==null?void 0:t.type)==="attachments"?t.uploadAttachments:[]},(e,t,n)=>{const s=e(ra),o=e(s3),r=typeof n=="function"?n(o):n;r.length===0&&(s==null?void 0:s.type)!=="attachments"||t(ra,{type:"attachments",uploadAttachments:r})}),zo=N(e=>{const t=e(ra);return(t==null?void 0:t.type)==="tabs"?t.userAddedTabs:new Map},(e,t,n)=>{const s=e(ra),o=e(zo),r=typeof n=="function"?n(o):n;r.size===0&&(s==null?void 0:s.type)!=="tabs"||t(ra,{type:"tabs",userAddedTabs:r})}),Eie=N(e=>{const t=e(ra);return(t==null?void 0:t.type)==="attachments"&&t.uploadAttachments.length>0}),wie=N(e=>{const t=e(ra);if((t==null?void 0:t.type)!=="tabs"||t.userAddedTabs.size===0)return!1;for(const n of t.userAddedTabs.values())if(n.sourceType==="journeysNTP")return!1;return!0});function Iie(){var t;const e=pe(Yw);if(e)return{character:{id:e.id,locationId:(t=e.location)==null?void 0:t.id}}}function RT(){const e=gl(xt),t=se(Gd);return l.useCallback((n,s)=>{e(o=>{const r=o.get(n);if(r){const{history:a}=r;s(a);const i=a.at(-1);if(i){const u=new Date(r.updatedAt),d=new Date(i.createdAt);u<d&&(r.updatedAt=i.createdAt)}a.length>2&&(r.isNew=!1,t(!0))}return o})},[e,t])}const _ie=qe();function o3(e,t){qe().set(xt,n=>Un(n,s=>{const o=s.get(e);if(o){const{history:r}=o;t(r);const a=r.at(-1);if(a){const i=new Date(o.updatedAt),u=new Date(a.createdAt);i<u&&(o.updatedAt=a.createdAt)}r.length>2&&(o.isNew=!1,_ie.set(Gd,!0))}}))}function nh(e){const t=H("force-cookie-banner-location");return(e&&l1.includes(e))===!0||t}const Tie=5e3,Aie="largest-contentful-paint";function kie(e,t=Tie){if(!Mie())return X2(e,t);try{return Rie(e,t)}catch{return X2(e,t)}}function Mie(){return"PerformanceObserver"in window}function X2(e,t){const n=setTimeout(e,t);return()=>clearTimeout(n)}function Nie(e){typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,0)}function Rie(e,t){let n=!1;const s=new PerformanceObserver(i=>{if(n)return;i.getEntries().length>0&&r()});try{s.observe({type:Aie,buffered:!0})}catch{return X2(e,t)}const o=setTimeout(()=>{n||r()},t);function r(){n=!0,s.disconnect(),Nie(e)}function a(){n||(n=!0,s.disconnect(),clearTimeout(o))}return a}function Pie(){const e=on("kill-bing-uet"),t=M(Rn),n=nh(t);l.useEffect(()=>{const s=Ni(),o=!!ov(),r=n?o&&s.advertising:!0;if(e||!r||!t)return;const a=document.createElement("script");a.src="https://bat.bing.com/bat.js",a.defer=!0,a.onload=()=>{if(!window.UET)return;window.uetq=window.uetq??[];const d={ti:"355045625",enableAutoSpaTracking:!0};window.uetq=new window.UET(d),window.uetq.push("pageLoad")};const u=kie(()=>{document.querySelector('script[src="https://bat.bing.com/bat.js"]')||document.head.appendChild(a)});return()=>{u();try{const d=document.querySelector('script[src="https://bat.bing.com/bat.js"]');d&&document.head.removeChild(d)}catch{}}},[e,t,n])}let ex=!1;function Lie(){ex||(ex=!0,window.uetq=window.uetq??[],window.uetq.push("event","outbound_click",{}))}function PT(){const e=H("smart-mode-6e0b4c6f"),t=H("smart-mode-cd0c997b"),n=OT(t),s=e||t?z("composer.chatModes.smart.coachmarkDescriptionGPT5Variant"):z("composer.chatModes.smart.description");return{title:e?bS:yS,description:z(n),coachmarkDescription:s}}function LT(){const e=ye("smart-mode-6e0b4c6f"),t=ye("smart-mode-cd0c997b"),n=OT(t);return{title:e?bS:yS,description:z(n)}}function OT(e){return e?"composer.chatModes.smart.descriptionGPT5Variant":"composer.chatModes.smart.description"}function DT(e){return e?e.startsWith("!"):!1}function pd(e){return e==="reasoning"?CS:e==="smart"?LT().title:z(`composer.chatModes.${e}.title`)}function Oie(e){const t=LT();return e==="smart"?t.description:z(`composer.chatModes.${e}.description`)}const Jo=qe(),tx={};async function jT(e){const{text:t,filesWithAttachment:n=[],command:s}=e,o=yo(),r=pe(De),{result:a}=await wJ.run({chatMode:o,message:t??""}),i=n.length===0||n.every(({error:f,attachment:p})=>!!f||!p);return{isSubmittable:!!r&&!(!t&&i&&!s),shouldDropAccordingToMiddleware:!!a}}async function FT(e,t=!1){const{text:n,filesWithAttachment:s=[],inputMethod:o,command:r,context:a,reference:i,galleryImageUrl:u}=e,d=Iie(),m=yo(),f=pe(De),p=pe(As),g=pe(zo),C=ye("adsshowroombrandagent");if(!f)throw new Error("No conversation ID found");let v=0,b=0;const y=[];if(u){const k=Wie(u);y.push(k)}for(const k of s)k.attachment&&(k.attachment.item.type==="image"?v+=1:k.attachment.item.type==="document"&&(k.attachment.item.partId=`${b}`,b+=1),y.push(k));const E=[],x={id:"",createdAt:new Date().toISOString(),author:"human",content:[],inputMethod:o};p&&p.conversationId===f&&(x.brand=p);for(const{attachment:k}of y)k&&(x.content.push(k.item),E.push(k.content));if(g.size>0&&(pe(NT)==="currentPage"?Jo.set(zo,new Map):x.content.push({type:"browserTabs",tabs:Array.from(g.values()).map(R=>({id:R.id,title:R.title,url:R.url,windowId:R.windowId,favIconUrl:R.favIconUrl}))})),n){x.content.push({type:"text",text:n});let{textToSend:k}=await IJ.run({textToSend:n,chatMode:m});g.size>0&&!k.startsWith("/")&&(k=`${z("composer.multiTabs.multitabsprompt",{CountOfAddTabs:g.size})} ${k}`),E.push({type:"text",text:k})}r&&(x.content.push({type:"command",command:r}),E.push({type:"command",command:r})),i&&E.push({type:"reference",reference:i}),!(r&&Ne([p1,Li]).safeParse(r.type).success)&&!t&&o3(f,k=>{k.push(x)});const{sendData:_,additionalData:T}=await RI.run(x);return{sendMessageParams:{content:E,conversationId:f,data:_,mode:m,context:{...d,...a,ads:p?{showroom:{brandId:p.brandId,adId:p.adId??void 0,scenario:C?"chat":void 0}}:void 0}},newMessage:x,filesToSubmit:y,additionalData:T,imagesUploaded:v,documentsUploaded:b}}async function Die(e){var E,x,I,_,T;const{text:t,inputMethod:n,scenario:s,customData:o,entryPoint:r}=e,a=yo(),i=pe(De),u=pe(As),d=pe(zo),m=pe(X6),f=ye("multi-file-upload"),{isSubmittable:p,shouldDropAccordingToMiddleware:g}=await jT(e);if(g){a==="computerUse"&&zt(kn());return}const C=performance.now();if(Jo.set(vw,C),!p||!i)return;await vie()&&(a==="computerUse"?(Ce({source:"copilotActionsStartTask",customData:JSON.stringify({conversationId:i})}),Jo.set(Uc,!0)):Jo.set(Uc,!1)),ST({sideBySideComparisonId:i,reason:"sentNewMessage"}),AC(i);const v=await FT(e);Jo.set(xt,A=>Un(A,k=>{const R=k.get(i);R&&(R.suggestedFollowup=void 0)})),Jo.set(As,A=>A&&{...A,lastUserMessageRguid:A.activeCardRguid});const b=await Ns({useMockConnection:DT(t)});d.size>0&&Jo.set(zo,new Map),m.size>0&&(Jo.set(X6,new Map),Jo.set(NT,null)),b.send(v.sendMessageParams),b.resetConversationState(i,C),b.setChatModeForConversation(i,a),b.setInputMethodForConversation(i,n),b.setUploadCountsForConversation(i,v.imagesUploaded,v.documentsUploaded),b.callBeforeSendForConversation(i),b.callOnSentForConversation(i,v.additionalData),b.setUserMessageForConversation(i,v.sendMessageParams);const y={eventName:"copilotCompose",eventInfo_conversationId:i,eventInfo_inputMethod:n,eventInfo_numImagesUploaded:v.imagesUploaded,eventInfo_numDocumentsUploaded:v.documentsUploaded,eventInfo_mode:a,eventInfo_landingPage:D.getLandingPage(),...v.filesToSubmit.length>0?{eventInfo_uploadFileSize:((x=(E=v.filesToSubmit[0])==null?void 0:E.file)==null?void 0:x.size)??0,eventInfo_uploadFileType:(_=(I=v.filesToSubmit[0])==null?void 0:I.attachment)==null?void 0:_.type}:{}};f&&(y.eventInfo_uploadFilesInfo=JSON.stringify(v.filesToSubmit.map(({file:A,attachment:k,scenario:R})=>({scenario:R,type:(k==null?void 0:k.type)??"",size:(A==null?void 0:A.size)??""})))),v.additionalData&&(y.eventInfo_additionalData=v.additionalData),s&&(y.eventInfo_scenario=s),o&&(y.eventInfo_customData=o),u&&(y.eventInfo_adsContext=JSON.stringify({showroomBrandId:u.brandId,showroomBrandName:(T=u.brandLogo)==null?void 0:T.businessName})),r&&(y.eventInfo_entryPoint=r),D.trackEvent({name:"interaction",data:y}),Lie(),GJ(n),oae(),a==="computerUse"&&zt(kn())}async function jie(){const e=pe(De);e&&(await Ns()).onSubmitMessageBlocked(e)}async function Fie(){var s,o;const e=await Ns(),t=pe(De),n=(o=(s=f_(t))==null?void 0:s.part.task)==null?void 0:o.id;t&&(AC(t),ST({sideBySideComparisonId:t,reason:"stoppedMessage"})),e.stop({conversationId:t,taskId:n})}async function Uie(e){const{messageId:t,runHumanMessageSendDataMiddleware:n}=e,s=performance.now(),o=pe(De);if(!o)return;o3(o,i=>{const u=hi(i);u&&u.id===t&&i.pop()});let r={...e};if(n){const i=Bee(o);if(i){const{sendData:u}=await RI.run({id:i.id,createdAt:i.createdAt,author:i.author,content:i.content});u&&(r={...r,...u})}}const a=await Ns();a.regenerate(r),a.resetConversationTiming(o,s),a.setChatModeForConversation(o,yo()),a.callBeforeSendForConversation(o)}async function Bie(e){const t=performance.now(),n=pe(De);if(!n)return;const s=await Ns();s.sendSkipReasoning(e),o3(n,o=>{const r=hi(o);(r==null?void 0:r.id)===e.messageId&&o.pop()}),s.resetConversationTiming(n,t),s.callBeforeSendForConversation(n)}async function Vie(e){const{text:t,filesWithAttachment:n=[]}=e,s=pe(De),o=pe(bw),{isSubmittable:r}=await jT(e);if(!r||!s)return;if(Sie(t??"",n,o,tx[s])){const i=await Ns({useMockConnection:DT(t)}),u=await FT(e,!0);i.sendMessagePreview(u.sendMessageParams),tx[s]={text:t??"",atTimestamp:Date.now(),files:n}}}async function Hie(e){(await Ns()).selectSxSMessage(e)}async function zie(e){const t=pe(De);if(!t)return;const{messageId:n,partId:s}=e,o=await Ns(),r=yo(),a={conversationId:t,mode:r,content:{type:"command",command:{type:"updateCard",messageId:n,partId:s,update:{type:"consent",status:"rejected"}}}};o.send(a)}async function Gie(){await Ns()}const Fn={connect:Gie,submitMessage:Die,stopMessage:Fie,onSubmitMessageBlocked:jie,regenerateMessage:Uie,skipReasoningForMessage:Bie,sendMessagePreview:Vie,selectSideBySideMessage:Hie,updateCardMessageCommand:zie};function EIe(e,t){return e.find(n=>n.partId===t)}function Wie(e){return{attachment:{item:{type:"image",url:e},content:{type:"image",url:e},size:0,type:"image/webp"}}}function UT(e){const{deferred:t=!1}=e??{},n=!!M(De),s=M($d),[o,r]=Fe(nC),a=se(tm),i=ut(),u=i.startsWith("/chats")&&i!=="/chats/new";l.useEffect(()=>{const p=xie()==="ac"||u?null:ZZ();if(p){const g=aK();r({prompt:p,inputMethod:g}),a({source:"queryInUrl",prompt:p})}},[a,r,u]);const d=l.useCallback(()=>{r(null)},[r]),m=l.useCallback(f=>{f&&(a({source:"queryInUrl",prompt:f}),(async()=>{if(n&&s&&f){const g=(o==null?void 0:o.inputMethod)??"queryParam";await Qs(),await Fn.submitMessage({text:f,inputMethod:g}),d()}})().catch(console.error))},[a,n,s,d,o]);return l.useEffect(()=>{!t&&o&&m(o.prompt)},[t,m,o]),{prompt:(o==null?void 0:o.prompt)??null,handler:t?m:void 0,clear:d}}function BT(){const e=$ie(),t=qie();return e.prompt?e:t}function $ie(){const{t:e}=Y(),{formCode:t,lengthVariant:n,treatment:s,passthroughType:o}=hie();if(t&&n&&s){const r=e(`promptsByFormCode.${t}.${s}.${n}`,"");return{passthroughType:o,prompt:r,source:r?{type:"formCode",formCode:t}:void 0}}return{passthroughType:null}}function qie(){const{prompt:e}=IT({deferred:!0}),{prompt:t}=UT({deferred:!0});let n=null,s;return e?(n="partial",s=e):t&&(n="full",s=t),{passthroughType:n,prompt:s,source:s?{type:"query"}:void 0}}const Zie=["www.bing.com"];function Kie(){if(!ye("restrict-prompt-passthrough-by-domain")||!ae.instance().config().restrictPromptPassthroughDomains)return!0;const{referrer:e}=document;if(!e)return!1;const t=new URL(e);return Zie.includes(t.hostname)}function Yie(e){const{handler:t,clear:n}=IT({deferred:!0}),{handler:s,clear:o}=UT({deferred:!0}),{passthroughType:r,prompt:a}=BT(),i=l.useCallback(f=>{D.setLandingPage("chatWithPartialPromptPassthrough"),t(f)},[t]),u=l.useCallback(f=>{D.setLandingPage("chatWithFullPromptPassthrough"),s(f)},[s]),d=l.useCallback(()=>{n(),o()},[o,n]),m=l.useCallback(()=>{if(!Kie()){d();return}if(a&&r)switch(r){case"partial":i(a);break;case"full":u(a);break}},[u,i,d,r,a]);l.useEffect(()=>{e&&m()},[e,m])}const VT=N(null),HT=N(!1),Qie=N(!1),wIe=N(0),Jie=N("free-talk");function r3(){const e=ut(),t=M(VT),n=M(HT),s=M(Jie),o=H("labs-portrait-enabled")&&e.startsWith("/labs/portrait"),r=H("labs-portrait-v2"),a=o&&t,i=a?t.id:void 0,u=a&&!n?t.voiceId:void 0;return{isPortraitEnabled:o,isPortraitV2Enabled:r,portraitId:i,portraitVoiceId:u,portraitScenario:s}}const Xie=["study-mode-lumi","study-mode-lumi-v2","study-mode-summary"];function sh(){const e=H("study-mode-summary"),n=Co()==="study";return e&&n&&!zd()}const zT=["character-animation-spda2e","character-animation-vasa"],ece=[...zT,...Xie];function GT(e){return e==="study"?ece:zT}function dm(){const{isPortraitEnabled:e}=r3(),t=Co(),{lumiEnabled:n=!1}=ae.instance().config();return!!((!!ZC(GT(t),"any")||n)&&!e&&!zd())}function a3(){const e=M(vo);return dm()&&!!e}function Us(){const e=qe().get(vo),t=yo(),{lumiEnabled:n=!1}=ae.instance().config();return!!((!!md(GT(t),"any")||n)&&e)}function tf(e){return zw.includes(e)}function tce(){const e=ut(),t=l.useRef(!1),n=M(Jt),[s,o]=Fe(vo),r=dm();l.useEffect(()=>{e.startsWith("/chats")&&Qt("appearance-talk")==="1"&&(t.current=!0)},[e]),l.useEffect(()=>{r&&n&&t.current&&(t.current=!1,o(Ea))},[n,t,s,o,r])}function Ji(){const e=M(vr),t=M(bn);return e.length===0&&!!(t!=null&&t.isNew)}function WT(){const e=M(nC),{passthroughType:t}=BT();return!!(e!=null&&e.prompt)&&t==="full"}function i3(){try{return Ma().latestLocation.pathname}catch{return typeof window<"u"&&window.location.pathname?window.location.pathname:"/"}}function xr(){return i3()==="/"}const Ip=N(0),nce=N(0),$T=N(void 0),oh=N(!1),c3=N(e=>{const t=e(qK),n=e(Tw),s=e($T),o=e(oh);if(t)return t;if(!(o||n))return s}),rh=N(e=>{const t=e(c3),n=t==null?void 0:t.widgets,s=e(Ip);if(!n||n.length===0)return;const o=Math.max(0,Math.min(s,n.length-1));return n[o]}),l3=N(e=>{var o;const t=e(c3),n=e(oh),s=e(Ip);if(n||!t)return null;if(t.greetingOptions.length>0){const r=Math.max(0,Math.min(s,t.greetingOptions.length-1));return((o=t.greetingOptions[r])==null?void 0:o.text)??null}return null}),qT=N(!1),sce=N(e=>{const t=e(rh);return t==null?void 0:t.id}),oce=N(e=>{const t=e(rh);return(t==null?void 0:t.type)==="textAndImage"}),rce=N(null,(e,t)=>{const n=e(c3),s=e(Ip);if(!n||n.widgets.length<=1||n.greetingOptions.length<=1)return;const o=Math.min(n.widgets.length,n.greetingOptions.length),r=(s+1)%o;t(Ip,r)}),IIe=[6,3,1],_Ie=[20,10],TIe=6,AIe=20,kIe=1e4,MIe={ChartHeight:250,Colors:{stroke:"white",gray:"#999",highPrice:"#D8001D",mediumHighPrice:"#F85900",mediumPrice:"#F8B200",mediumLowPrice:"#B4B400",lowPrice:"#56A503",label:"rgb(var(--color-background-900))"},GradientStopIndex:{Low:0,MediumLow:1,Medium:2,MediumHigh:3,High:4},GradientStepMultipliers:[.8,.9,1,1.1,1.2],LabelPositionThreshold:.85},NIe={initial:{height:0,opacity:0,overflow:"hidden"},animate:{height:"auto",opacity:1,transition:{height:{duration:.4},opacity:{duration:.25,delay:.15}}},exit:{height:0,opacity:0,transition:{height:{duration:.4},opacity:{duration:.25}}}},RIe="https://www.microsoft.com/microsoft-copilot/learn/#faqs8",PIe="https://www.bing.com/rebates/history",LIe=30;function ace(){return{hasMinimumMetadata:!1,hasRichMetadata:!1,breakdown:{hasProductTitle:!1,hasProductImage:!1,hasBuyingOptions:!1,hasReviews:!1,hasPriceHistory:!1,hasConversationStarters:!1,conversationStartersLength:0}}}const ice=N(void 0),OIe=N(!1),cce=N(void 0),lce=N(ace()),uce=N(void 0),u3=N(!1);N(void 0);const dce=c1(new Map),DIe=N(e=>{const t=e(dce);return Array.from(t.values()).some(n=>n.isTracked)});N(void 0);const jIe=N(null),FIe=c1(void 0),UIe=N(null);N(hG.parse({}));const mce=N(void 0);function ZT(e){var r;const{offer:t}=e,n=M(Pd),s=((r=M(mce))==null?void 0:r.isRebatesActive)===!0;return l.useMemo(()=>!t||!n?!1:t.type==="affiliate"?s:!(new Date(t.expiresAt)<new Date),[t,n,s])}function fce(e){const{cashbackOffers:t,shoppingInsights:n}=e,s=t??[],o=s.filter(u=>u.type==="productAd"||u.type==="storewideAd"),r=o.length>0?o.reduce((u,d)=>{const m=new Date(u.expiresAt);return new Date(d.expiresAt)>m?d:u}):null,a=s.find(u=>u.type==="affiliate")??null,i=ZT({offer:r});return(n==null?void 0:n.scenario)==="cashback"?{selectedOffer:n.cashbackData.isAdOffer?r:a}:i?{selectedOffer:r}:a?{selectedOffer:a}:{selectedOffer:null}}function pce(e){const{cashbackOffers:t,shoppingInsights:n,hasProductMetaData:s}=e,{selectedOffer:o}=fce({cashbackOffers:t,shoppingInsights:n}),r=H("edge-shopping-enable-product-ads-cashback"),a=(t==null?void 0:t.find(d=>d.type==="affiliate"))??null;return{overriddenCashbackOffer:!s&&(o==null?void 0:o.type)==="productAd"&&!r?a:o}}const hce=[{offerType:"affiliate",isActivated:!0,isAuthenticated:!0,scenario:"affiliateActivated"},{offerType:"affiliate",isActivated:!1,isAuthenticated:!1,scenario:"affiliateUnauthenticated"},{offerType:"productAd",isActivated:!0,isAuthenticated:!0,scenario:"productAdsActivatedMultipleOffers"},{offerType:"storewideAd",isActivated:!0,isAuthenticated:!0,scenario:"storewideActivated"},{offerType:"storewideAd",isActivated:!1,isAuthenticated:!1,scenario:"storewideUnauthenticated"}];function gce(e){const t=hce.find(n=>n.offerType===e.offerType&&n.isActivated===e.isActivated&&n.isAuthenticated===e.isAuthenticated);return t?t.scenario:null}function vce(e){const{cashbackOffer:t}=e,n=M(Pd),s=ZT({offer:t});return t?!!gce({offerType:t.type,isActivated:s,isAuthenticated:n}):!1}function Cce(e,t){const{hasMinimumMetadata:n}=e;if(n)return"shoppingCard";if(t)return"cashbackCard"}function ah(){var p;const e=M(u3),t=M(lce),n=M(cce),s=(p=M(uce))==null?void 0:p.offers,{overriddenCashbackOffer:o}=pce({cashbackOffers:s,shoppingInsights:(n==null?void 0:n.insights)??void 0,hasProductMetaData:!!n}),r=Ji(),a=!on("kill-contextual-shopping"),i=r&&a&&(!!n||!!o),u=i?Cce(t,!!o):void 0,d=i&&!!(n!=null&&n.insights),m=vce({cashbackOffer:o})&&u==="cashbackCard";return{isContextualShoppingCardExpanded:e,showShoppingCardInNewChat:i,shoppingScenario:u,cashbackOffer:o,shoppingProductMetadata:n,isCopilotOpenedViaEdgeCTAs:d,hasInsightsSummary:i&&(d||m)}}function yce(e){if(!e.length)return;const t=ur("greetingIndex"),n=e.length,s=t?(parseInt(t,10)+1)%n:0;return la("greetingIndex",s.toString()),e[s]}const d3=N(!1),bce=N(!1),KT=qe(),xce=["chat.launchMessage.authenticatedV3Type1","chat.launchMessage.authenticatedV3Type2","chat.launchMessage.authenticatedV3Type3"],Sce=["chat.launchMessage.unauthenticatedV3Type1","chat.launchMessage.unauthenticatedV3Type2","chat.launchMessage.unauthenticatedV3Type3"],Ece=["chat.launchMessage.authenticatedV4Type1","chat.launchMessage.authenticatedV4Type2","chat.launchMessage.authenticatedV4Type3","chat.launchMessage.authenticatedV4Type4","chat.launchMessage.authenticatedV4Type5","chat.launchMessage.authenticatedV4Type6","chat.launchMessage.authenticatedV4Type7","chat.launchMessage.authenticatedV4Type8","chat.launchMessage.authenticatedV4Type9","chat.launchMessage.authenticatedV4Type10"],wce=["chat.launchMessage.unauthenticatedV4Type1","chat.launchMessage.unauthenticatedV4Type2","chat.launchMessage.unauthenticatedV4Type3","chat.launchMessage.unauthenticatedV4Type4","chat.launchMessage.unauthenticatedV4Type5","chat.launchMessage.unauthenticatedV4Type6","chat.launchMessage.unauthenticatedV4Type7","chat.launchMessage.unauthenticatedV4Type8","chat.launchMessage.unauthenticatedV4Type9","chat.launchMessage.unauthenticatedV4Type10"];function Ice(){KT.set(d3,!0)}function _ce(){KT.set(d3,!1)}function YT(){const{t:e}=Y(),t=M(d3),n=M(Zw),s=M(sce),o=M(l3),r=H("landing-rotating-greeting"),{showShoppingCardInNewChat:a,shoppingScenario:i}=ah(),d=l.useCallback(()=>a?n?i==="cashbackCard"?["chat.launchMessage.authenticatedShoppingCashback"]:["chat.launchMessage.authenticatedShoppingType1"]:i==="cashbackCard"?["chat.launchMessage.unauthenticatedShoppingCashback"]:["chat.launchMessage.unauthenticatedShoppingType1"]:s&&s==="image-generation"?["chat.launchMessage.unauthenticatedImageWidgets"]:n?r?Ece:xce:r?wce:Sce,[n,r,a,i,s])(),m=l.useMemo(()=>yce(d),[d]),f=Number(ur("greetingIndex"))||0,p=l.useCallback(()=>s==="image-generation"?e("chat.launchMessage.subheadingImageGenWidget"):null,[s,e]);return{launchGreetingShown:t,greetingKey:m,widgetGreeting:o,widgetSubheading:p(),greetingIndex:f}}function m3(){const e=tK()??nK();if(e&&sK(e))return e}function Tce(){const e=pe(vr),t=pe(bn);return e.length===0&&!!(t!=null&&t.isNew)}function QT(){const e=i3(),t=e.endsWith("/talk"),n=e.startsWith("/chats")&&!t,s=xr();return n||s}function ih(){return!pe(Xv)}function Ace(){var i;const e=ut(),t=e==="/"?"center":"bottom",n=ih(),s=M(u3),o=e==="/",r=QT(),a=!!((i=ae.instance().config().landingPage)!=null&&i.enableCentralComposer);return n&&!s&&t==="center"&&r&&o&&a}function kce(){var s;const e=ih(),t=xr(),n=!!((s=ae.instance().config().landingPage)!=null&&s.enableStarterPrompts);return e&&t&&n}function JT(){var o;const e=ih(),t=xr(),n=pe(oce),s=!!((o=ae.instance().config().landingPage)!=null&&o.enableWidgets);return e&&n&&t&&s}function Mce(){const e=ih(),t=xr(),n=JT(),s=ye("appr-home");return e&&t&&s&&!n}function XT(){var r;const e=ye("autosuggest"),t=ye("edge-autosuggest"),n=xr(),s=e||t,o=!!((r=ae.instance().config().landingPage)!=null&&r.enableAutoSuggest);return s&&o&&n}function Nce(){const{launchGreetingShown:e}=YT(),{hasInsightsSummary:t}=ah(),n=M(bce),s=i3(),o=Tce()||s==="/",r=WT();return!t&&!n&&!e&&o&&!r}function Ol(){const e=Mce(),t=Ace(),n=Nce(),s=m3();return{isCompatibleLandingRoute:QT(),isAutoSuggestEnabled:XT(),isCentralComposerEnabled:t,isStarterPromptsEnabled:kce(),isWidgetSectionEnabled:JT(),isAppearanceOnHomeEnabled:e,isGreetingCentered:e||!s&&ye("categorized-conversation-starter-widget"),showLaunchGreeting:n}}function eA(e){l.useEffect(()=>{const t=()=>{e()};return Pt.on("languageChanged",t),()=>{Pt.off("languageChanged",t)}},[e])}const _p=1e3*60*60,Rce={refetchInterval:_p,refetchOnWindowFocus:!1,staleTime:_p};async function Pce(e,t,n){return St(e,LZ,{query:{supportedWidgets:t.join(","),...n?{intent:n}:{}},options:{method:"GET",headers:{"Content-Type":"application/json"}},analytics:{anonymousPath:e}}).then(s=>s.data)}function nx(e){return e?["conversation-starter"]:["conversation-starter","image-generation","conversation-starter-prompted-greeting","categorized-conversation-starter","conversation-starter-send-message"]}function Lce(){var p;const e=se($T),[t,n]=l.useState(!1),s=m3(),o=se(oh),r=on("kill-landing-widgets"),a=!!((p=ae.instance().config().landingPage)!=null&&p.shouldFetchWidgetsData);ET({onStartComplete:()=>{n(!0)}});const i=t&&a,{data:u,isLoading:d,error:m,refetch:f}=Rs({queryKey:["homepage",nx(r),s],enabled:i,queryFn:()=>Pce("/activation/homepage",nx(r),s),...Rce});l.useEffect(()=>{o(d)},[d,o]),eA(()=>i&&f()),l.useEffect(()=>{if(u!=null&&u.pages){const g=u.pages[0];g&&e(g)}},[u,e]),l.useEffect(()=>{m&&(D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"homepage",eventInfo_errorMessage:String(m),eventInfo_details:"Homepage API error"}}),o(!1),e(void 0))},[m,e,o])}function Oce(){const e=M(l3),t=Ji(),{isCompatibleLandingRoute:n}=Ol(),s=e&&t&&n;return l.useMemo(()=>{if(s)return{type:"greeting",greetingMessage:e}},[e,s])}function Dce(e=5){const t=M(De),n=M(T1),s=H("adsidsync"),o=M(Rn),r=an(),a=nh(o),i=M(rC),u=_l();l.useEffect(()=>{const{adsEnabled:d,adsIdSyncEnabled:m,enforceAdsOptOutOfPersonalization:f}=ae.instance().config(),p=d&&!u;if(t&&n&&(s||m)){const g=ov(),v=Ni().advertising;if(D.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"syncAdvertisingId",eventInfo_conversationId:t,eventInfo_additionalData:JSON.stringify({isAdsEnabled:p,isAdPersonalizationEnabled:v,isAuthenticated:r,adsIdSyncEnabled:m,isGdprPlusRegion:a,isChoiceCookieEmpty:!g})}}),!m&&!p)return;const b=new URLSearchParams;if(b.append("cpid",n),b.append("cvid",t),r&&b.append("cp","1"),g){if(a&&!v)return;v&&!f?b.append("ps","1"):b.append("ps","0")}else{if(a)return;b.append("ps","1")}const y=`https://c.bing.com/cp?${b}`,E=performance.now();em(async()=>{const x=await fetch(y,{method:"GET",mode:"no-cors",credentials:"include"}),I=performance.now();uI(y,"GET",I-E,x.clone())},{maxRetries:e,initialDelayMs:1e3,backoffFactor:2,maxDelayMs:6e4,jitterFactor:0,onFailure:({attemptCount:x,errors:I,exitReason:_})=>{const T=I[I.length-1],A={errorType:(T==null?void 0:T.errorType)??"Unknown",errorMessage:(T==null?void 0:T.errorMessage)??"Unknown error",attemptNumber:x,maxRetries:e,url:y,userAgent:navigator.userAgent,onlineStatus:navigator.onLine,exitReason:_};D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"AdsError",eventInfo_errorMessage:"Ads Id Sync failed with error",eventInfo_details:JSON.stringify(A)}})}}).catch(()=>{})}},[i,t,o,e,a,s,n,r,u])}function tA(){return M(Rn)==="US"&&ae.instance().config().proSubscription.enabled}const nA="free";function Hr(e){return e instanceof Error?{errorCode:e.toString(),errorDetails:e.message}:{errorCode:"unknown",errorDetails:String(e)}}function Dl(e,t,n){const s={eventInfo_payflowEntryPoint:t.payflowEntryPoint,eventInfo_upsellReason:t.upsellReason,eventInfo_loginProvider:t.loginProvider,eventInfo_payflowType:"DIME",eventInfo_payflowInstanceId:t.payflowInstanceId,eventInfo_curatedSubscription:t.curatedSubscription,eventInfo_correlationId:t.correlationId,eventInfo_dimeMarket:t.dimeMarket,eventInfo_campaignId:t.campaignId};let o;switch(e){case"payflowEnter":o={eventName:"payflowEnter",...s,eventInfo_upsellEntryStyle:(n==null?void 0:n.eventInfo_upsellEntryStyle)||"Banner"};break;case"payflowLoginClick":o={eventName:"payflowLoginClick",...s};break;case"dimeCheckoutRendering":o={eventName:"dimeCheckoutRendering",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;case"dimeCheckoutSuccess":o={eventName:"dimeCheckoutSuccess",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;case"dimeCheckoutClosed":o={eventName:"dimeCheckoutClosed",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;case"dimeCheckoutError":o={eventName:"dimeCheckoutError",eventInfo_errorCode:(n==null?void 0:n.eventInfo_errorCode)??"",eventInfo_errorDetails:(n==null?void 0:n.eventInfo_errorDetails)??"",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;default:o={eventName:"unknown",...s};break}D.trackEvent({name:"interaction",data:o})}function jce(e){Dl("payflowEnter",e,{eventInfo_upsellEntryStyle:"Banner"})}function BIe(e){Dl("payflowLoginClick",e)}function Fce(e){Dl("dimeCheckoutRendering",e,{eventInfo_dimeExperienceId:e.dimeExperienceId})}function Uce(e){Dl("dimeCheckoutSuccess",e,{eventInfo_dimeExperienceId:e.dimeExperienceId})}function Bce(e){Dl("dimeCheckoutClosed",e,{eventInfo_dimeExperienceId:e.dimeExperienceId})}function VIe(e){D.trackEvent({name:"interaction",data:{eventName:"manageSubPageActionClick",eventInfo_loginProvider:e.loginProvider,eventInfo_curatedSubscription:e.curatedSubscription,eventInfo_actionTarget:e.actionTarget}})}function HIe(e){D.trackEvent({name:"interaction",data:{eventName:"manageSubFREShown",eventInfo_loginProvider:e.loginProvider,eventInfo_curatedSubscription:e.curatedSubscription}})}function zIe(e){D.trackEvent({name:"interaction",data:{eventName:"manageSubPageLoaded",eventInfo_loginProvider:e.loginProvider,eventInfo_curatedSubscription:e.curatedSubscription,eventInfo_willShowFre:e.willShowFre,eventInfo_willShowProDeprecation:e.willShowProDeprecation,eventInfo_upgradeButtonShown:e.upgradeButtonShown,eventInfo_upgradeButtonTarget:e.upgradeButtonTarget,eventInfo_manageButtonShown:e.manageButtonShown,eventInfo_manageButtonTarget:e.manageButtonTarget,eventInfo_cancelButtonShown:e.cancelButtonShown,eventInfo_cancelButtonTarget:e.cancelButtonTarget,eventInfo_proAutoRenewOn:e.proAutoRenewOn}})}function $g(e){Dl("dimeCheckoutError",e,{eventInfo_dimeExperienceId:e.dimeExperienceId,eventInfo_errorCode:e.errorCode,eventInfo_errorDetails:e.errorDetails})}function jo({scenario:e,duration:t=0,customData:n}){po({feature:"subscriptions",scenario:e,duration:t,customData:n?JSON.stringify(n):void 0})}function aa({errorCode:e,errorDetails:t,scenario:n,customData:s}){Yt({feature:"subscriptions",scenario:n,errorType:e,errorMessage:t,customData:s?JSON.stringify(s):void 0})}function sA(e){const{correlationId:t,payflowInstanceId:n}=e;D.trackEvent({name:"system",data:{eventName:"payflowUserMismatched",eventInfo_correlationId:t,eventInfo_payflowInstanceId:n}})}function Vce(e){const{payflowEntryPoint:t,upsellReason:n,loginProvider:s,disabledReason:o,curatedSubscription:r}=e;D.trackEvent({name:"interaction",data:{eventName:"payflowEntryDisabled",eventInfo_payflowEntryPoint:t,eventInfo_upsellReason:n,eventInfo_loginProvider:s,eventInfo_disabledReason:o,eventInfo_curatedSubscription:r}})}function Hce(e){const{upsellEntryStyle:t,actionButton:n,payflowEntryPoint:s,upsellReason:o,loginProvider:r,payflowType:a,curatedSubscription:i}=e;D.trackEvent({name:"interaction",data:{eventName:"payflowEntryImpression",eventInfo_upsellEntryStyle:t,eventInfo_actionButton:n,eventInfo_payflowEntryPoint:s,eventInfo_upsellReason:o,eventInfo_loginProvider:r,eventInfo_payflowType:a,eventInfo_curatedSubscription:i}})}function qg(e){const{entryPoint:t,featureName:n}=e;D.trackEvent({name:"interaction",data:{eventName:"featureQuotaRunningOutShown",eventInfo_entryPoint:t,eventInfo_featureName:n}})}function Zg(e){const{entryPoint:t,featureName:n}=e;D.trackEvent({name:"interaction",data:{eventName:"featureQuotaRunningOutOptionClick",eventInfo_entryPoint:t,eventInfo_featureName:n}})}const zce="https://content.lifecycle.office.net/dime/v1/dime.js";function Gce(){return new Promise((e,t)=>{const n=performance.now(),s=document.createElement("script");s.src=zce,s.type="text/javascript",s.async=!0,s.onload=()=>{jo({scenario:"loadDimeScript",duration:performance.now()-n}),e()},s.onerror=()=>{const o=new Error("Failed to load Dime script");aa({...Hr(o),scenario:"loadDimeScript",customData:{duration:performance.now()-n}}),t(o)},document.head.appendChild(s)})}const sx=new zi(Gce);async function Wce({language:e,market:t,sessionId:n}){var r,a;const s={language:e,market:t,sessionId:n},o=performance.now();try{const[i]=await Promise.all([UI(),sx.get()]);jo({scenario:"prepareDimeInitialization",duration:performance.now()-o,customData:s}),i!=null&&i.username||aa({scenario:"initializeDime",errorCode:"NoMSAAuthHint"}),(r=i==null?void 0:i.idTokenClaims)!=null&&r.puid||aa({scenario:"initializeDime",errorCode:"NoMSAPuid"});const u=new window.Dime({language:e,market:t,sessionId:n,partnerId:"cmc",authHint:i==null?void 0:i.username,userInfo:{puid:(a=i==null?void 0:i.idTokenClaims)==null?void 0:a.puid}});return jo({scenario:"initializeDime",duration:performance.now()-o,customData:s}),u}catch(i){return sx.reset(),aa({...Hr(i),scenario:"initializeDime",customData:{...s,duration:performance.now()-o}}),null}}const Kg=new zi(e=>Wce(e));var ai,qc;class $ce{constructor(){jt(this,ai,jn("payflowCorrelationId")??crypto.randomUUID());jt(this,qc);O(this,"ensureDime",async({language:t,market:n})=>{const s=performance.now(),o={language:t,market:n,sessionId:ue(this,ai)};ue(this,qc)&&t!==ue(this,qc)&&(Kg.reset(),jo({scenario:"resetDimeForLanguageChange",customData:o})),vt(this,qc,t);const r=await Kg.get({language:t,market:n,sessionId:ue(this,ai)});return jo({scenario:"ensureDime",duration:performance.now()-s,customData:o}),r});O(this,"overrideSessionId",t=>{Kg.reset(),vt(this,ai,t)})}get sessionId(){return ue(this,ai)}}ai=new WeakMap,qc=new WeakMap;const nf=new $ce;function Eo(e,t={}){const{preventReferrer:n=!1}=t,s=n?"noopener,noreferrer":"noopener";return window.open(e,"_blank",s)}const oA="https://go.microsoft.com/fwlink/?linkid=2281226&client=cmc&ocid=cmme6wdx8nv",ox="cmme6wdx8nv",rx="cmmipliy5qj";function qce(e){const{urlParams:t}=ae.instance().config().proSubscription;if(!t)return oA;const{client:n}=t,{linkid:s,ocid:o,language:r,market:a}=e,i=new URL("https://go.microsoft.com/fwlink/");return i.searchParams.append("linkid",s),i.searchParams.append("client",n),i.searchParams.append("ocid",o),a&&i.searchParams.append("market",a),r&&i.searchParams.append("language",r),i.toString()}function Zce(e,t){var o,r;const{urlParams:n}=ae.instance().config().proSubscription;if(!n)return ox;const{ocids:s}=n;return(t?(o=s[e])==null?void 0:o.freeTrial:(r=s[e])==null?void 0:r.buy)??ox}function GIe(e,t,n,s){var d;const{urlParams:o}=ae.instance().config().proSubscription;if(!o)return oA;const{ocids:r}=o,a=Zce(e,t),i=s??((d=r[e])==null?void 0:d.market);return qce({linkid:t?"2243582":"2281226",ocid:a,language:n,market:i})}function Kce(e){const{ocid:t}=e,n=new URL("https://aka.ms/AA84f4p");return n.searchParams.append("ocid",t),n.toString()}function Yce(e){var s;const{m365UrlParams:t}=ae.instance().config().proSubscription;if(!t)return rx;const{ocids:n}=t;return((s=n[e])==null?void 0:s.buy)??rx}const Qce="https://account.microsoft.com/services/copilot/details",Jce="https://account.microsoft.com/services/microsoft365/details",WIe="https://account.microsoft.com/";function $Ie({entryPoint:e,isPro:t}){const{manageRefId:n}=ae.instance().config().proSubscription,s=`copilot.${n}.${e}`,o=new URL(t?Qce:Jce);return o.searchParams.append("ref",s),o.hash="billing",o.toString()}function Xce(e){ae.instance().config().subscribeInNewWindow?Eo(e):Qi(e)}function f3(e){const{payflowEntryPoint:t,upsellReason:n,entryStyle:s,requiresPremium:o=!1,enableDimePreload:r=!1,upsellEligibleSubscription:a}=e,i=on("kill-subs-dime"),u=on("kill-subs-user-mismatched-dialog"),d=tA(),m=!i,f=M(Rn),p=M(Yd),{i18n:{resolvedLanguage:g}}=Y(),C=M(sn),v=M(Wo),b=M(Qd),y=M(Hi),{shouldRedirectMobile:E,redirectMobileSource:x}=AY(y??null),I=se(aC),_=se(S1),T=M($d),A=l.useRef(!1),k=se(kw),R=M(Jt),P=l.useMemo(()=>{const q=TY(b,a);return q||_Y(b,o)},[a,o,b]),B=l.useMemo(()=>m?"DIME":d?"ProSubPaywall":"UniPux",[m,d]);l.useEffect(()=>{m&&r&&P&&(C==null?void 0:C.accountType)==="MSA"&&(async()=>{const Z=await nf.ensureDime({language:g??"en-US",market:f}),J={language:g,market:f,sessionId:nf.sessionId,experiences:P};if(Z){const W=performance.now();try{await Z.preload({experiences:[P]}),jo({scenario:"preloadDime",duration:performance.now()-W,customData:J})}catch(le){aa({...Hr(le),scenario:"preloadDime",customData:{...J,duration:performance.now()-W}})}}else aa({...Hr(new Error("Dime not a valid instance")),scenario:"preloadDime",customData:J})})()},[g,f,P,m,r,C==null?void 0:C.accountType]);const U=l.useMemo(()=>Yce(t),[t]),$=l.useCallback(()=>{const q=Kce({ocid:U});jo({scenario:"redirectToExternalUpsell",customData:{url:q}}),Xce(q)},[U]),Q=l.useMemo(()=>({payflowEntryPoint:t,upsellReason:n??"unknown",loginProvider:(C==null?void 0:C.accountType)??"unknown",curatedSubscription:(y==null?void 0:y.tier)??nA,campaignId:U,dimeMarket:f??"unknown",correlationId:nf.sessionId,dimeExperienceId:P??""}),[t,n,C==null?void 0:C.accountType,y==null?void 0:y.tier,U,f,P]),te=l.useCallback(async q=>{const Z={...Q,payflowInstanceId:q};jce({...Z});const J=await nf.ensureDime({language:kY(g??"en-US"),market:f});if(!P)throw new Error("No dime experience available");if(J)try{Fce({...Z,dimeExperienceId:P}),(await J.launch({experience:P,theme:v??"light",campaignId:U},()=>{Uce({...Z,dimeExperienceId:P})})).status==="Success"?Pl():Bce({...Z,dimeExperienceId:P})}catch(W){$g({...Z,dimeExperienceId:P,...Hr(W)}),$()}else $g({...Z,dimeExperienceId:P,...Hr(new Error("Dime not a valid instance"))}),$()},[g,f,v,P,U,Q,$]),X=l.useCallback(async()=>{if(!T){jo({scenario:"subscriptionUserNotFetched"}),A.current=!0;return}if(A.current=!1,f&&dv.includes(f)){jo({scenario:"subscriptionRegionRestricted",customData:{region:f}});return}if(p){jo({scenario:"subscriptionUserAgeRestricted"});return}if(E&&x!==null){I({source:x,entryStyle:s,upsellReason:n,payflowEntryPoint:t});return}if((!d||m)&&(C==null?void 0:C.provider)==="auth0"){Ws("parsedPayflowEntryPoint",t),_({source:"Composer"});return}let q=jn("payflowInstanceId");q||(q=crypto.randomUUID(),Ws("payflowInstanceId",q),aa({scenario:"missingPayflowInstanceId",errorCode:"payflowInstanceIdMissing",customData:{generatedPayflowInstanceId:q}}));const Z=jn("payflowAuthHint"),J=(R==null?void 0:R.id.toLowerCase())??"";if(typeof(R==null?void 0:R.id)=="string"&&typeof Z=="string"&&Z.length>0&&!J.endsWith(Z.toLowerCase())&&!J.startsWith(Z.toLowerCase()))if(u)sA({correlationId:jn("payflowCorrelationId")??"",payflowInstanceId:q});else{k({correlationId:jn("payflowCorrelationId")??"",payflowInstanceId:q,payflowEntryPoint:t});return}if(pi("payflowRequiresPremium"),pi("payflowCorrelationId"),pi("payflowAuthHint"),i){$();return}try{await te(q)}catch(W){$g({...Q,...Hr(W),payflowInstanceId:q,dimeExperienceId:P??""}),$()}},[f,i,E,x,d,m,C==null?void 0:C.provider,_,I,s,n,t,te,Q,$,P,T,k,R==null?void 0:R.id,p,u]);return l.useEffect(()=>{T&&A.current&&(A.current=!1,X())},[T,X]),{handleSubscription:l.useCallback(async()=>{const q=crypto.randomUUID();return Ws("payflowInstanceId",q),X()},[X]),handleResumeSubscriptionWithCurrentInstanceId:X,shouldUseDime:m,payflowType:B}}function ch(){const e=M(Jt),t=M(tQ),n=M(Hi),s=M(Qd),o=M(Yd),r=M(Rn);return l.useMemo(()=>ae.instance().config().proSubscription.enabled?e?(n==null?void 0:n.tier)==="m365-premium-admin"||t?{subscriptions:[],disabledReason:"AlreadyPurchased"}:o?{subscriptions:[],disabledReason:"RestrictedAgeGroup"}:!r||dv.includes(r)?{subscriptions:[],disabledReason:"RestrictedRegion"}:(n==null?void 0:n.tier)==="m365-family-guest"||(n==null?void 0:n.tier)==="m365-premium-guest"||(n==null?void 0:n.tier)==="m365-family-classic-guest"?{subscriptions:[],disabledReason:"Guest"}:s.length===0?{subscriptions:["m365-personal","m365-premium"]}:s.some(a=>a.tier==="pro")?{subscriptions:["m365-premium"]}:s.some(a=>Fw.includes(a.tier))?{subscriptions:[]}:s.some(a=>Uw.includes(a.tier))?{subscriptions:["m365-premium"]}:{subscriptions:["m365-personal","m365-premium"]}:{subscriptions:[],disabledReason:"UserProfileUnavailable"}:{subscriptions:[],disabledReason:"SurfaceNotSupported"},[e,t,n==null?void 0:n.tier,o,r,s])}function ele(e){const t=M(sn),n=M($d),s=M(Yd),{upsellFromAuth0:o}=ae.instance().config().proSubscription,a=an()&&(t==null?void 0:t.provider)==="microsoft",i=ch(),u=M(Qd),d=jn("shouldStartSubscription"),m=jn("parsedPayflowEntryPoint")??"Unknown",f=jn("payflowRequiresPremium")??!1,p=ut(),g=l.useRef(!1),{handleResumeSubscriptionWithCurrentInstanceId:C}=f3({payflowEntryPoint:m,upsellReason:"",entryStyle:"Redirect",requiresPremium:f});l.useEffect(()=>{if(d&&a&&!p.startsWith("/subscription/start")){pi("shouldStartSubscription"),setTimeout(()=>{C()},0);return}if(!(o!=null&&o.navigateToProSubPageAfterLogin))return;const v=sessionStorage.getItem(T2);if(!v)return;async function b(y){const[,E]=y.split("-");if(E==="link"){const x=performance.now(),{getAuth0AccessToken:I,auth0:_}=await Oo.get(),T=await I(I1());if(!T){Yt({feature:"accountLinkAuth0WithMSA",errorType:"LinkStartedWithoutAuth0Token"});return}try{await Nn({path:"/user/link",args:{body:{token:T}}})}catch(A){A instanceof Error&&Yt({feature:"accountLinkAuth0WithMSA",errorType:A.name,errorMessage:A.message,exception:A.stack})}finally{_.logout({openUrl:!1}),po({feature:"accountLinkAuth0WithMSA",duration:performance.now()-x}),(i.subscriptions.length!==0||uC(u).isEligible)&&await C()}}}if(e&&!g.current&&n){if(g.current=!0,sessionStorage.removeItem(T2),pi("parsedPayflowEntryPoint"),(t==null?void 0:t.accountType)!=="MSA"||s)return;b(v)}},[e,C,o,t,s,n,p,a,d,i,u])}function tle(e){const{isEnabled:t,onIntercept:n,clickSource:s}=e;l.useEffect(()=>{if(!t)return()=>{};const o=i=>xT(i)?(n(i.toString()),!0):!1,r=i=>{const u=i.target.closest("a");u&&u instanceof HTMLAnchorElement&&o(u.href)&&(s&&Ce({source:s}),i.preventDefault())},a=window.open;return window.open=function(...u){return u.length>0&&typeof u[0]=="string"&&!o(u[0])?a.apply(window,u):null},document.addEventListener("click",r),()=>{window.open=a,document.removeEventListener("click",r)}},[t,n,s])}function nle(){l.useEffect(()=>{const e=tn(e2),t=Date.now();e||Mn(e2,t.toString())},[])}function rA(){const[e,t]=Fe(Sa);return l.useEffect(()=>{t(n=>n||YZ())},[t]),e}function sle(){l.useEffect(()=>{},[])}const ole={headers:{"content-type":"application/json"},body:JSON.stringify({type:"private"})};function p3({arg:e}={}){const n=(e==null?void 0:e.isPrivate)??!1?ole:void 0;return St("/conversations",Eq,{options:{method:"POST",...n}}).then(s=>s.data)}function mm(){const e=M(C1),{mutateAsync:t}=Mi({mutationKey:["create-conversation"],mutationFn:async m=>p3({arg:m}),retry:!1}),n=M(xt),s=gl(xt),o=se(Gd),r=se(gw),a=se(rce),i=Yee(),[u,d]=l.useState(!1);return{startConversationDisabled:u,createConversation:l.useCallback(async m=>{const{shouldNavigateToChat:f=!0,characterId:p,isPrivate:g=!1}=m??{};if(e){const C=n.get(e);if((C==null?void 0:C.characterId)===p)return i({id:e,shouldNavigateToChat:f}),e}if(!u)try{d(!0);const{id:C}=await t({isPrivate:g}),v={id:C,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:p,continuedAt:null,group:null};return g&&r(C),s(y=>{y.set(C,v)}),i({id:C,shouldNavigateToChat:!g&&f}),o(!0),_ce(),a(),C}catch(C){console.error(C)}finally{d(!1)}},[e,u,n,i,t,s,r,o,a])}}const h3="shouldPerformUserMerge";function rle(e){la(h3,String(e))}function ale(){HB(h3)}function ile(){return ur(h3)!=="false"}function qIe(){const e=M(vr),t=an(),[n,s]=Fe(YU),o=!t&&e.length>0;return l.useEffect(()=>{rle(n)},[n]),{shouldShowMergeCheckbox:o,shouldMerge:n,setShouldMerge:s}}const aA=N([]),cle={"connector-detail":"connector-list","delete-account":"account",name:"account"};function Sr(){var u;const[e,t]=Fe(aA),n=l.useRef([]);l.useEffect(()=>{const d=n.current,m=e;if(d.length>m.length){const f=d.filter((g,C)=>C>=m.length),p=f.length;for(let g=p-1;g>=0;g-=1){const C=f[g];C!=null&&C.onPopPage&&C.onPopPage()}}n.current=e},[e]);const s=e.length>0?(u=e[e.length-1])==null?void 0:u.page:void 0,o=d=>r([d]),r=d=>{const m=d.map(f=>({page:f,onPopPage:void 0}));t(f=>[...f,...m])};return{currentPage:s,pushPage:o,pushPages:r,goBackOrClose:()=>{t(d=>d.length<=0?d:d.slice(0,-1))},closeSettings:()=>{t([])},parentPageOf:cle}}function iA(e,t){const n={page:e,onPopPage:t==null?void 0:t.onPopPageCallback};qe().set(aA,s=>[...s,n])}function jl(e){const{pages:t,className:n,children:s,disableLink:o,clickSource:r,onClick:a,pushPagesDelay:i=0}=e,{pushPages:u}=Sr(),d=()=>{setTimeout(()=>{We.emit("disclaimer:open-settings"),u(t)},i),a==null||a(),Ce({source:r??"settingsLink",destination:t[t.length-1]})};return o?c.jsx("span",{children:s}):c.jsx("button",{className:n,type:"button",title:"",onClick:d,children:s})}function lle(){const e=se(xn);return c.jsx("p",{children:c.jsx(hn,{i18nKey:"settings.copilotBeta.announcementSubtitle",components:{settingsLink:c.jsx(jl,{pages:["menu","copilot-beta"],className:"underline",clickSource:"disclaimerSettingsLink",onClick:()=>e(null)})}})})}function ule(){if(!ye("copilot-beta-automatic-opt-in"))return;const e=pe(cl);if(e===void 0)at(hg,!0),at(cl,!0),Pl();else if(e&&pe(hg)){const n={title:z("settings.copilotBeta.announcementTitle"),subtitle:c.jsx(lle,{})};at(xn,n),at(hg,void 0)}}function g3(e){const t=Id(),n=l.useRef(e);n.current=e,l.useEffect(()=>t.subscribe("onBeforeNavigate",s=>{const{pathChanged:o}=s;o&&n.current(s)}),[t])}let cA=!0,lA=!0;function dle(e){lA=e}function fm(){return cA}function mle(){g3(()=>{lA||(cA=!1)})}const fle=(e,t,n)=>{const s=e[t];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((o,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},{slice:ple,forEach:hle}=[];function gle(e){return hle.call(ple.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}function vle(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(e))}const ax=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Cle=function(e,t){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},o=encodeURIComponent(t);let r=`${e}=${o}`;if(s.maxAge>0){const a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(a)}`}if(s.domain){if(!ax.test(s.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${s.domain}`}if(s.path){if(!ax.test(s.path))throw new TypeError("option path is invalid");r+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");r+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(r+="; Partitioned"),r},ix={create(e,t,n,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+n*60*1e3)),s&&(o.domain=s),document.cookie=Cle(e,t,o)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let o=n[s];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var yle={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return ix.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:s,cookieDomain:o,cookieOptions:r}=t;n&&typeof document<"u"&&ix.create(n,e,s,o,r)}},ble={name:"querystring",lookup(e){var s;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&((s=window.location.hash)==null?void 0:s.indexOf("?"))>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const a=o.substring(1).split("&");for(let i=0;i<a.length;i++){const u=a[i].indexOf("=");u>0&&a[i].substring(0,u)===t&&(n=a[i].substring(u+1))}}return n}},xle={name:"hash",lookup(e){var o;let{lookupHash:t,lookupFromHashIndex:n}=e,s;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const a=r.substring(1);if(t){const i=a.split("&");for(let u=0;u<i.length;u++){const d=i[u].indexOf("=");d>0&&i[u].substring(0,d)===t&&(s=i[u].substring(d+1))}}if(s)return s;if(!s&&n>-1){const i=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(i)?(o=i[typeof n=="number"?n:0])==null?void 0:o.replace("/",""):void 0}}}return s}};let vc=null;const cx=()=>{if(vc!==null)return vc;try{if(vc=typeof window<"u"&&window.localStorage!==null,!vc)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{vc=!1}return vc};var Sle={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&cx())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&cx()&&window.localStorage.setItem(n,e)}};let Cc=null;const lx=()=>{if(Cc!==null)return Cc;try{if(Cc=typeof window<"u"&&window.sessionStorage!==null,!Cc)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Cc=!1}return Cc};var Ele={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&lx())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&lx()&&window.sessionStorage.setItem(n,e)}},wle={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:s,language:o}=navigator;if(n)for(let r=0;r<n.length;r++)t.push(n[r]);s&&t.push(s),o&&t.push(o)}return t.length>0?t:void 0}},Ile={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(n=s.getAttribute("lang")),n}},_le={name:"path",lookup(e){var o;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(o=n[typeof t=="number"?t:0])==null?void 0:o.replace("/",""):void 0}},Tle={name:"subdomain",lookup(e){var o,r;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,s=typeof window<"u"&&((r=(o=window.location)==null?void 0:o.hostname)==null?void 0:r.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[n]}};let uA=!1;try{document.cookie,uA=!0}catch{}const dA=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];uA||dA.splice(1,1);const Ale=()=>({order:dA,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class mA{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=gle(n,this.options||{},Ale()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(yle),this.addDetector(ble),this.addDetector(Sle),this.addDetector(Ele),this.addDetector(wle),this.addDetector(Ile),this.addDetector(_le),this.addDetector(Tle),this.addDetector(xle)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(s=>{if(this.detectors[s]){let o=this.detectors[s].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(n=n.concat(o))}}),n=n.filter(s=>s!=null&&!vle(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}mA.type="languageDetector";const fA="i18next";function kle(e){return ev(e)[0]??e}let sf=null;function pA(){return!!ae.instance().config().useI18nHttpApi}async function hA(e={}){const t=pA();return sf&&!t||(sf=(async()=>{const n=Pt.use(mA).use(cO);t&&V(()=>import("./index-CARCewIo.js"),__vite__mapDeps([4,1])).then(o=>{n.use(o.default)});const s=t?void 0:PF();return await n.init({lng:s?s.lng:void 0,resources:s?s.resources:void 0,supportedLngs:U7.map(({i18nCode:o})=>o),fallbackLng:ev,detection:s?void 0:{lookupLocalStorage:"BUST-LOCAL-STORAGE",lookupCookie:fA,caches:[],convertDetectedLanguage:kle,...e},interpolation:{escapeValue:!1}}),s||(document.documentElement.dir=Pt.dir(Pt.language.toLowerCase()),document.documentElement.lang=Pt.language.toLowerCase(),await Mle(Pt.language,!1)),Pt.on("languageChanged",o=>{typeof document<"u"&&(document.documentElement.dir=Pt.dir(o.toLowerCase()),document.documentElement.lang=o.toLowerCase())}),n.t})()),sf}async function Mle(e,t=!0){if(!e)return;await Promise.all(ev(e).map(async s=>{if(!(Pt.hasResourceBundle(s,"translation")&&!pA()))try{const o=await fle(Object.assign({"../../../config/strings/af/strings.json":()=>V(()=>import("./strings-DLiEQ-W7.js"),[]),"../../../config/strings/am/strings.json":()=>V(()=>import("./strings-PsBGo4uJ.js"),[]),"../../../config/strings/ar/strings.json":()=>V(()=>import("./strings-4ZfloEHO.js"),[]),"../../../config/strings/as/strings.json":()=>V(()=>import("./strings-D9_2PHGB.js"),[]),"../../../config/strings/az/strings.json":()=>V(()=>import("./strings-Cd1Rpnnr.js"),[]),"../../../config/strings/bg/strings.json":()=>V(()=>import("./strings-B8SG1efz.js"),[]),"../../../config/strings/bn-IN/strings.json":()=>V(()=>import("./strings-TmyBWh6Q.js"),[]),"../../../config/strings/bs/strings.json":()=>V(()=>import("./strings-DFGXCjrx.js"),[]),"../../../config/strings/ca-Es-VALENCIA/strings.json":()=>V(()=>import("./strings-BR-hNhOS.js"),[]),"../../../config/strings/ca/strings.json":()=>V(()=>import("./strings-DyEDNdj8.js"),[]),"../../../config/strings/cs/strings.json":()=>V(()=>import("./strings-BSrIU6n6.js"),[]),"../../../config/strings/cy/strings.json":()=>V(()=>import("./strings-DGFGGrh0.js"),[]),"../../../config/strings/da/strings.json":()=>V(()=>import("./strings-C2R2A84H.js"),[]),"../../../config/strings/de/strings.json":()=>V(()=>import("./strings-BbUGcS0g.js"),[]),"../../../config/strings/el/strings.json":()=>V(()=>import("./strings-D2m3xkj-.js"),[]),"../../../config/strings/en-GB/strings.json":()=>V(()=>import("./strings-BWYtSA-Y.js"),[]),"../../../config/strings/en-US/strings.json":()=>V(()=>import("./strings-BafEjO_x.js"),[]),"../../../config/strings/es-MX/strings.json":()=>V(()=>import("./strings-gTBtYj44.js"),[]),"../../../config/strings/es/strings.json":()=>V(()=>import("./strings-DuGajtu5.js"),[]),"../../../config/strings/et/strings.json":()=>V(()=>import("./strings-DauJ-B15.js"),[]),"../../../config/strings/eu/strings.json":()=>V(()=>import("./strings-DQMJvWex.js"),[]),"../../../config/strings/fa/strings.json":()=>V(()=>import("./strings-B-CxIpTc.js"),[]),"../../../config/strings/fi/strings.json":()=>V(()=>import("./strings-__6hKyOw.js"),[]),"../../../config/strings/fil/strings.json":()=>V(()=>import("./strings-iNwuIosG.js"),[]),"../../../config/strings/fr-CA/strings.json":()=>V(()=>import("./strings-_J-0GqGh.js"),[]),"../../../config/strings/fr/strings.json":()=>V(()=>import("./strings-DrtsiLKv.js"),[]),"../../../config/strings/ga/strings.json":()=>V(()=>import("./strings-M_esK9RH.js"),[]),"../../../config/strings/gd/strings.json":()=>V(()=>import("./strings-zNMp34Ql.js"),[]),"../../../config/strings/gl/strings.json":()=>V(()=>import("./strings-DaHK6cHH.js"),[]),"../../../config/strings/gu/strings.json":()=>V(()=>import("./strings-BD1OO4F4.js"),[]),"../../../config/strings/he/strings.json":()=>V(()=>import("./strings-D0M0ePRu.js"),[]),"../../../config/strings/hi/strings.json":()=>V(()=>import("./strings-Br8fd1Kt.js"),[]),"../../../config/strings/hr/strings.json":()=>V(()=>import("./strings-2DWMIOVs.js"),[]),"../../../config/strings/hu/strings.json":()=>V(()=>import("./strings-iElhTOQl.js"),[]),"../../../config/strings/hy/strings.json":()=>V(()=>import("./strings-CH5Z_8Bg.js"),[]),"../../../config/strings/id/strings.json":()=>V(()=>import("./strings-CPiT7fiv.js"),[]),"../../../config/strings/is/strings.json":()=>V(()=>import("./strings-w9lUEQhR.js"),[]),"../../../config/strings/it/strings.json":()=>V(()=>import("./strings-B7h_wOlb.js"),[]),"../../../config/strings/ja/strings.json":()=>V(()=>import("./strings-c996Q9GT.js"),[]),"../../../config/strings/ka/strings.json":()=>V(()=>import("./strings-B_0z8ZGD.js"),[]),"../../../config/strings/kk/strings.json":()=>V(()=>import("./strings-BjhF6eRd.js"),[]),"../../../config/strings/km-KH/strings.json":()=>V(()=>import("./strings-CysdZmC3.js"),[]),"../../../config/strings/kn/strings.json":()=>V(()=>import("./strings-C48Zq7Sh.js"),[]),"../../../config/strings/ko/strings.json":()=>V(()=>import("./strings-DLWNuOiB.js"),[]),"../../../config/strings/kok/strings.json":()=>V(()=>import("./strings-C1gxDpgX.js"),[]),"../../../config/strings/lb/strings.json":()=>V(()=>import("./strings-Ca9kuIS8.js"),[]),"../../../config/strings/lo/strings.json":()=>V(()=>import("./strings-CvCDuaC4.js"),[]),"../../../config/strings/lt/strings.json":()=>V(()=>import("./strings-CcQqzAmA.js"),[]),"../../../config/strings/lv/strings.json":()=>V(()=>import("./strings-B3K-690d.js"),[]),"../../../config/strings/mi/strings.json":()=>V(()=>import("./strings-BLtGltg8.js"),[]),"../../../config/strings/mk/strings.json":()=>V(()=>import("./strings-DfhDLo2k.js"),[]),"../../../config/strings/ml/strings.json":()=>V(()=>import("./strings-DG-RSORi.js"),[]),"../../../config/strings/mr/strings.json":()=>V(()=>import("./strings-EOI0_9T1.js"),[]),"../../../config/strings/ms/strings.json":()=>V(()=>import("./strings-CTFIWnCE.js"),[]),"../../../config/strings/mt/strings.json":()=>V(()=>import("./strings-B5d8N1BX.js"),[]),"../../../config/strings/nb-NO/strings.json":()=>V(()=>import("./strings-Bk9PJK4B.js"),[]),"../../../config/strings/ne/strings.json":()=>V(()=>import("./strings-BkzPIIHM.js"),[]),"../../../config/strings/nl/strings.json":()=>V(()=>import("./strings-Cjkx9r4F.js"),[]),"../../../config/strings/nn-NO/strings.json":()=>V(()=>import("./strings-ll8lTSw9.js"),[]),"../../../config/strings/or/strings.json":()=>V(()=>import("./strings-BHp7eLOY.js"),[]),"../../../config/strings/pa/strings.json":()=>V(()=>import("./strings-CuVFpVHF.js"),[]),"../../../config/strings/pl/strings.json":()=>V(()=>import("./strings-cPcAuUjb.js"),[]),"../../../config/strings/pt-BR/strings.json":()=>V(()=>import("./strings-DWzpxRgr.js"),[]),"../../../config/strings/pt-PT/strings.json":()=>V(()=>import("./strings-p7wSAHP4.js"),[]),"../../../config/strings/quz/strings.json":()=>V(()=>import("./strings-CrPZeCPU.js"),[]),"../../../config/strings/ro/strings.json":()=>V(()=>import("./strings-Bu8sDntJ.js"),[]),"../../../config/strings/ru/strings.json":()=>V(()=>import("./strings-DPYseeRj.js"),[]),"../../../config/strings/sk/strings.json":()=>V(()=>import("./strings-BJtSc0Ua.js"),[]),"../../../config/strings/sl/strings.json":()=>V(()=>import("./strings-Dcqkfy0M.js"),[]),"../../../config/strings/sq/strings.json":()=>V(()=>import("./strings-Bjb6hEFc.js"),[]),"../../../config/strings/sr-Cyrl-BA/strings.json":()=>V(()=>import("./strings-DNeD9H4L.js"),[]),"../../../config/strings/sr-Cyrl-RS/strings.json":()=>V(()=>import("./strings-D3R9773b.js"),[]),"../../../config/strings/sr-Latn-RS/strings.json":()=>V(()=>import("./strings-DUqM2Znh.js"),[]),"../../../config/strings/sv/strings.json":()=>V(()=>import("./strings-Dqbp__fQ.js"),[]),"../../../config/strings/ta/strings.json":()=>V(()=>import("./strings-B0Vus2cS.js"),[]),"../../../config/strings/te/strings.json":()=>V(()=>import("./strings-BxM8mVEO.js"),[]),"../../../config/strings/th/strings.json":()=>V(()=>import("./strings-RNDUo-dY.js"),[]),"../../../config/strings/tr/strings.json":()=>V(()=>import("./strings-B1bI0MAM.js"),[]),"../../../config/strings/tt/strings.json":()=>V(()=>import("./strings-D2rLVRJ6.js"),[]),"../../../config/strings/ug/strings.json":()=>V(()=>import("./strings-BXtuwIx_.js"),[]),"../../../config/strings/uk/strings.json":()=>V(()=>import("./strings-CdOoEGlW.js"),[]),"../../../config/strings/ur/strings.json":()=>V(()=>import("./strings-Bayi_ETp.js"),[]),"../../../config/strings/uz-Latn-UZ/strings.json":()=>V(()=>import("./strings-B-UvRaKk.js"),[]),"../../../config/strings/vi/strings.json":()=>V(()=>import("./strings-D5jB-LXx.js"),[]),"../../../config/strings/zh-Hans/strings.json":()=>V(()=>import("./strings-D_mK0-sG.js"),[]),"../../../config/strings/zh-Hant/strings.json":()=>V(()=>import("./strings-RATAnsCH.js"),[])}),`../../../config/strings/${s}/strings.json`,7);Pt.addResourceBundle(s,"translation",o,!0,!0)}catch{console.warn(`Translation file for '${s}' not found.`)}}));const n=!Pt.resolvedLanguage||Pt.resolvedLanguage!==e;(Pt.language!==e||n)&&await Pt.changeLanguage(e),t&&nl(fA,e,{expireDays:365,secure:!1})}function ZIe(){return Pt.resolvedLanguage?Pt.resolvedLanguage.split("-")[0]==="en":!1}function KIe(e){Ws("redirectPathOnNextStart",e)}function Nle(){const e=jn("redirectPathOnNextStart");return pi("redirectPathOnNextStart"),e!=null&&e.startsWith("/")?e:null}async function Rle(e){try{return(await St(`/conversations/${e}/history`,ow,{analytics:{anonymousPath:"/conversations/*/history"},query:{"api-version":"2"},parseOptions:{safe:!0}}).then(n=>n.data)).results.length>0}catch{return!1}}function Ple(){return!Rt("kill-student-offer")}function Yg(e){return!e.includes("kill-student-offer")}function v3(e){const{id:t,type:n,source:s,destination:o,scenario:r}=e;Ce({source:s,scenario:r,destination:o,customData:JSON.stringify({eventInfo_galleryArtifactId:t,eventInfo_galleryArtifactType:n})})}function YIe(e){v3({...e,scenario:"galleryHomePage"})}function QIe(e){v3({...e,scenario:"galleryDetailPage"})}function JIe(e){const{id:t,type:n}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"galleryDetailPage",eventInfo_impressionElement:"creatorGallery",eventInfo_customData:JSON.stringify({eventInfo_galleryArtifactId:t,eventInfo_galleryArtifactType:n})}})}function XIe(e){const{galleryItemId:t,url:n,thumbnailUrl:s,errorMessage:o,page:r="galleryHomePage",type:a="image"}=e;Yt({feature:"creatorGallery",scenario:"mediaLoad",errorType:"load",errorMessage:o??`Failed to load ${a}`,customData:JSON.stringify({galleryItemId:t,url:n,thumbnailUrl:s,page:r})})}const e_e=N([]),Lle=N(null),t_e=N(new Map),lh="/gallery",hd="/imagine";function Ole(e){return/\/gallery\/\w+/.test(e)}function Dle(e){return/\/imagine\/\w+/.test(e)}function C3(e){return e.startsWith(lh)||e.startsWith(hd)}async function jle(e){const{id:t,isLiked:n}=e,s=await $n(`/gallery/${t}/react/like`,{options:{method:n?"POST":"DELETE"},analytics:{anonymousPath:"/gallery/*"}});if(!s.ok)throw new Error("Failed to fetch Gallery Like data");return s}async function n_e(e){try{const{isLiked:t}=e;v3({...e,source:t?"like":"unlike"}),await jle(e)}catch{}}async function s_e(e){const{index:t,data:n,basePath:s,from:o}=e;qe().set(Lle,t);const{id:a}=n;await qs({from:o,to:`${s}/${a}`})}function o_e(){Mn(GU,"true")}function r_e(e){return{eventInfo_galleryLoadNumber:e.maxIndex+1,eventInfo_galleryArtifactTypes:Array.from(e.viewedTypes).join(",")}}function gA(){const e=ut();return vA(e)}function vA(e){return/^\/shares\/[a-zA-Z0-9_-]+$/.test(e)}async function Fle(e){const{conversationIdFromUrl:t,conversationIdFromStart:n}=e;return t&&t!=="new"&&await Rle(t)?{conversationId:t,isNew:!1}:n?{conversationId:n,isNew:!0}:{conversationId:null,isNew:!0}}async function Ule(e){const{pathname:t,conversationIdFromUrl:n,conversationFromUrlExists:s,urlPrompt:o,features:r,isBanned:a,enablePageRedirect:i,deepLinkTarget:u,search:d,redirectTargetFromStorage:m,userAccount:f}=e;if(!i||a||NC()||navigator.userAgent.toLowerCase().includes("googlebot")&&t==="/")return null;if(o||n==="new")return{to:u==="audioCall"?"/chats/$conversationId/talk":"/",from:t,needsConversationId:u==="audioCall"};if(t.startsWith("/shares"))return t.startsWith("/shares/pages")?!r.includes("kill-shared-page")?null:Zt(t):t.startsWith("/shares/podcasts")||t.startsWith("/shares/3d-generations")||t.startsWith("/shares/tasks")?null:r.includes("kill-share-conversation")||!vA(t)?Zt(t):null;if(t.startsWith("/campaigns"))if(t.startsWith("/campaigns/gallery")){if(!r.includes("share-campaign-gallery"))return Zt(t)}else if(t.startsWith("/campaigns/image-expression-tool")){if(!r.includes("gallery-expression-tool"))return Zt(t)}else return r.includes("share-campaign")?null:Zt(t);if(["/pro/subscribe","/pro/ewallet/return"].includes(t)||t==="/fang")return null;if(t.startsWith("/referrals")&&!r.includes("user-referral")||t.startsWith("/connector")&&!(r.includes("google-drive-connector")||r.includes("google-calendar-connector")||r.includes("google-mail-connector")||r.includes("google-contacts-connector")))return Zt(t);if(t.startsWith("/memory/narrative"))return r.includes("memory-narrative")?null:Zt(t);if(t.endsWith("/talk"))return t.startsWith("/labs/portrait/talk")&&r.includes("labs-portrait-enabled")?{from:t,to:"/labs/portrait",needsConversationId:!1}:Zt(t);if(t.startsWith("/chats")&&!s)return Zt(t);if(t.startsWith("/pages"))return null;if(t.startsWith("/labs")){if(t.startsWith("/labs/portrait")){const g=r.includes("labs-portrait-enabled"),C=r.includes("labs-portrait-v2");if(!g)return Zt(t);if(["/labs/portrait/gallery","/labs/portrait/future-self","/labs/portrait/future-self/create"].some(v=>t.startsWith(v))&&!C)return{from:t,to:"/labs/portrait",needsConversationId:!1}}if(t.startsWith("/labs/career-coach")&&!r.includes("labs-career-coach")||t.startsWith("/labs/audio-expression")&&!r.includes("labs-audio-expression")||!ae.instance().config().enableLabs)return Zt(t)}if(t.startsWith("/login"))return Zt(t);if(t.startsWith("/shopping"))return r.includes("shopping-homepage")?null:{to:"/",from:t};if(t.startsWith("/podcasts"))return t.startsWith("/podcasts/user")||t.startsWith("/podcasts/public")?null:Zt(t);if(["/e/so","/e/sol"].includes(t)&&!Yg(r))return Zt(t);if(t==="/e/so"&&Yg(r)&&(f==null?void 0:f.accountType)!=="MSA")return{from:t,to:"/e/sol"};if(t==="/e/sol"&&Yg(r)&&(f==null?void 0:f.accountType)==="MSA")return{from:t,to:"/e/so"};if(t.startsWith("/library")&&!r.includes("library"))return Zt(t);if(m)return{from:t,to:m,needsConversationId:!1};if(t==="/"){if(r.includes("start-in-voice"))return null;const p=d==null?void 0:d.get("back");return Ble(p)&&ae.instance().config().redirectBackEnabled?{from:"/login",to:new URL(p).pathname,needsConversationId:!1}:Zt(t)}return Ole(t)?r.includes("kill-gallery-detail")?Zt(t):null:t.startsWith(lh)?r.includes("kill-creator-gallery")?Zt(t):null:Dle(t)?r.includes("kill-imagine-detail")?Zt(t):null:t.startsWith(hd)?r.includes("creator-gallery-imagine")?null:Zt(t):null}function Ble(e){if(!e)return!1;try{if(new URL(e).origin===window.location.origin)return!0;throw new Error("Invalid redirect URL: not from same origin")}catch{throw new Error("Invalid redirect URL, malformed URL")}}function Zt(e){return{from:e,to:"/"}}function Vle(){try{const{timeZone:e}=Intl.DateTimeFormat().resolvedOptions();return e}catch{return}}const Hle=QZ(),e5=1e4;function zle(){return setTimeout(()=>{Yt({feature:"start",scenario:"callStartTimeout",errorType:"timeout",errorMessage:`Start call exceeded ${e5}ms timeout`})},e5)}async function Gle(){let e=ur("sessionId");const t=ur("referralCode");!e&&t&&(e=crypto.randomUUID(),la("sessionId",e));const n=ile(),s={timeZone:Vle(),startNewConversation:!0,teenSupportEnabled:!0,deviceFingerprint:e??void 0,referralCode:t??void 0,correctPersonalizationSetting:!0,performUserMerge:n,deferredDataUseCapable:!0},o={};Hle&&(o.overrideFeatures="1");const i=wt(s2,fe())!==!1?{maxRetries:3,initialDelayMs:100,maxDelayMs:500,backoffFactor:2,jitterFactor:.1,retryOn401:!0}:void 0,{data:u,response:d,zodError:m}=await St("/start",K$,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},parseOptions:{safe:!0},query:o,...i&&{retry:i},requestTimeoutMs:e5,onFailedRequest:f=>{throw f.status===mv?new Error(fv):new d1(`Start api failure with status ${f.status}`,{route:"/start",statusCode:f.status})}});if(td.trackClientExperimentationAssignment(d.headers),td.trackLatestApiAssignment(d.headers),m)throw m;return u}function Wle(){const{i18n:e}=Y(),{showBoundary:t}=rS(),n=se(od),s=se(PK),o=se(wS),r=se(xt),a=se(gw),i=se(yi),u=se(De),d=se(rI),m=se(v1),f=se(mC),p=xo(),[g]=th(),C=ut(),v=l.useRef(C);v.current=C;const b=$p({strict:!1}),y=l.useRef(b);y.current=b;const E=l.useRef(zZ()),x=M(tm),I=l.useRef(x);I.current=x;const _=l.useRef(!0),T=l.useRef(!1),{mutateAsync:A}=Mi({mutationKey:["start"],mutationFn:Gle,retry:!1}),k=Id();return l.useCallback(async R=>{var $;if(!e.language||T.current&&!R.eventDriven)return!1;T.current=!0;const P=RJ(),{enablePageRedirect:B,overwriteData:U}=R;s(!0);try{const Q=zle(),{isNewUser:te,banExpiresAt:X,remainingTurns:ne,features:q,currentConversationId:Z,allowBeta:J,userId:W,inDataUseWaitingPeriod:le}=await A();clearTimeout(Q),await hA(),We.emit("app:start-complete");const _e=D.getPicassoId();_e!==null&&W!==null&&_e!==W&&D.trackEvent({name:"health",data:{eventName:"userIdMismatch",eventInfo_customData:JSON.stringify({existingPicassoId:_e,newPicassoId:W??"",origin:"start"})}}),D.setFeatures(q),D.setIsNewUser(te),Y2({isNewUser:te.toString()});const Ae=DI({featureOverrides:[],localFeatureOverrides:jI(),localFeaturesToDisable:FI(),serverFeatures:q,surfaceConfig:ae.instance().config()});Ae.includes("kill-picasso-id-on-start")||D.setPicassoId(W??null),Ae.includes("msal-silent-sso")?Gn(n2,fe(),!0):Ht(n2),Ae.includes("msal-v4-upgrade")?Gn(c2,fe(),!0):Ht(c2),Ae.includes("token-retry-max-2")?Gn(a2,fe(),!0):Ht(a2),Ae.includes("token-retry-max-2-auth0")?Gn(i2,fe(),!0):Ht(i2),Ae.includes("no-start-retry")?Gn(s2,fe(),!1):Ht(s2),Ae.includes("reauth-redirect")?Gn(l2,fe(),!0):Ht(l2);const K=YC(X),be=NC(Ae),Me=await Fle({conversationIdFromUrl:be?void 0:y.current.conversationId,conversationIdFromStart:be?void 0:Z});let{conversationId:je}=Me;if(!je){const{id:ie}=await p3({arg:{isPrivate:be}});je=ie,be&&a(ie)}const oe=await Ule({pathname:v.current,conversationIdFromUrl:y.current.conversationId,conversationFromUrlExists:y.current.conversationId===je,urlPrompt:(($=I.current)==null?void 0:$.prompt)??null,features:Ae,enablePageRedirect:B,isBanned:!!K,deepLinkTarget:g,search:new URLSearchParams(window.location.search),redirectTargetFromStorage:Nle(),userAccount:pe(sn)});r(ie=>{if(!U&&ie.size>0)return ie;const ee=new Map([[je,{id:je,updatedAt:new Date().toISOString(),history:[],isNew:Me.isNew,characterId:null,continuedAt:null}]]);return!Me.isNew&&Z&&ee.set(Z,{id:Z,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:null,continuedAt:null}),ee}),u(ie=>ie&&!U?ie:je),o(ie=>ie.length>0&&!U?ie:Ae),i(ne),d(te),f(le??null),m(J??!1),J&&ule(),QC(K,"start",X),await k.invalidate(),_.current&&(_.current=!1,oe&&await p({...oe,params:oe.needsConversationId?{conversationId:je}:{},search:E.current}))}catch(Q){if(D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"StartEndpointError",eventInfo_errorMessage:Q instanceof Error?Q.message:"",eventInfo_details:Q instanceof Error?Q.stack??"":"",...Q instanceof d1&&{eventInfo_statusCode:Q.statusCode}}}),Q instanceof Error&&Q.message===fv)return n("age-verification"),performance.mark("useStart-legal-unavailable"),!0;console.error(Q),performance.mark("useStart-error"),t(Q)}finally{s(!1),dle(!1)}return!0},[A,r,u,a,n,s,o,i,d,m,f,p,e.language,t,g,k])}function $le(){const e=M(iv),[t,n]=Fe(pv),s=Wle();return l.useEffect(()=>{t||!e||s({enablePageRedirect:!0,overwriteData:!1}).then(o=>{o&&n(!0)}).catch(console.error)},[s,t,n,e]),l.useEffect(()=>{const o=()=>{s({enablePageRedirect:!1,overwriteData:!0,eventDriven:!0}).catch(console.error)};return We.on("auth:account-set-by-msal-sso",o),()=>{We.off("auth:account-set-by-msal-sso",o)}},[s]),{appInitialized:t}}let CA=-1;const pm=e=>{addEventListener("pageshow",t=>{t.persisted&&(CA=t.timeStamp,e(t))},!0)},ga=(e,t,n,s)=>{let o,r;return a=>{t.value>=0&&(a||s)&&(r=t.value-(o??0),(r||o===void 0)&&(o=t.value,t.delta=r,t.rating=((i,u)=>i>u[1]?"poor":i>u[0]?"needs-improvement":"good")(t.value,n),e(t)))}},yA=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},y3=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},uh=()=>{const e=y3();return(e==null?void 0:e.activationStart)??0},va=(e,t=-1)=>{const n=y3();let s="navigate";return CA>=0?s="back-forward-cache":n&&(document.prerendering||uh()>0?s="prerender":document.wasDiscarded?s="restore":n.type&&(s=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:s}},Qg=new WeakMap;function bA(e,t){return Qg.get(e)||Qg.set(e,new t),Qg.get(e)}const dh=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return s.observe({type:e,buffered:!0,...n}),s}}catch{}},xA=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let Pc=-1;const ux=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Tp=e=>{document.visibilityState==="hidden"&&Pc>-1&&(Pc=e.type==="visibilitychange"?e.timeStamp:0,qle())},dx=()=>{addEventListener("visibilitychange",Tp,!0),addEventListener("prerenderingchange",Tp,!0)},qle=()=>{removeEventListener("visibilitychange",Tp,!0),removeEventListener("prerenderingchange",Tp,!0)},SA=()=>{var e;return Pc<0&&(Pc=(document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden")[0])==null?void 0:e.startTime)??ux(),dx(),pm(()=>{setTimeout(()=>{Pc=ux(),dx()})})),{get firstHiddenTime(){return Pc}}},mh=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},mx=[1800,3e3],Zle=(e,t={})=>{mh(()=>{const n=SA();let s,o=va("FCP");const r=dh("paint",a=>{for(const i of a)i.name==="first-contentful-paint"&&(r.disconnect(),i.startTime<n.firstHiddenTime&&(o.value=Math.max(i.startTime-uh(),0),o.entries.push(i),s(!0)))});r&&(s=ga(e,o,mx,t.reportAllChanges),pm(a=>{o=va("FCP"),s=ga(e,o,mx,t.reportAllChanges),yA(()=>{o.value=performance.now()-a.timeStamp,s(!0)})}))})};let EA=0,Jg=1/0,of=0;const Kle=e=>{for(const t of e)t.interactionId&&(Jg=Math.min(Jg,t.interactionId),of=Math.max(of,t.interactionId),EA=of?(of-Jg)/7+1:0)};let t5;const fx=()=>t5?EA:performance.interactionCount??0,Yle=()=>{"interactionCount"in performance||t5||(t5=dh("event",Kle,{type:"event",buffered:!0,durationThreshold:0}))};let px=0;class Qle{constructor(){O(this,"u",[]);O(this,"l",new Map);O(this,"m");O(this,"p")}v(){px=fx(),this.u.length=0,this.l.clear()}P(){const t=Math.min(this.u.length-1,Math.floor((fx()-px)/50));return this.u[t]}h(t){var o,r;if((o=this.m)==null||o.call(this,t),!t.interactionId&&t.entryType!=="first-input")return;const n=this.u.at(-1);let s=this.l.get(t.interactionId);if(s||this.u.length<10||t.duration>n.T){if(s?t.duration>s.T?(s.entries=[t],s.T=t.duration):t.duration===s.T&&t.startTime===s.entries[0].startTime&&s.entries.push(t):(s={id:t.interactionId,entries:[t],T:t.duration},this.l.set(s.id,s),this.u.push(s)),this.u.sort((a,i)=>i.T-a.T),this.u.length>10){const a=this.u.splice(10);for(const i of a)this.l.delete(i.id)}(r=this.p)==null||r.call(this,s)}}}const wA=e=>{const t=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?e():(t(e=xA(e)),document.addEventListener("visibilitychange",e,{once:!0}))},hx=[200,500],Jle=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&mh(()=>{Yle();let n,s=va("INP");const o=bA(t,Qle),r=i=>{wA(()=>{for(const d of i)o.h(d);const u=o.P();u&&u.T!==s.value&&(s.value=u.T,s.entries=u.entries,n())})},a=dh("event",r,{durationThreshold:t.durationThreshold??40});n=ga(e,s,hx,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(r(a.takeRecords()),n(!0))}),pm(()=>{o.v(),s=va("INP"),n=ga(e,s,hx,t.reportAllChanges)}))})};let Xle=class{constructor(){O(this,"m")}h(t){var n;(n=this.m)==null||n.call(this,t)}};const gx=[2500,4e3],eue=(e,t={})=>{mh(()=>{const n=SA();let s,o=va("LCP");const r=bA(t,Xle),a=u=>{t.reportAllChanges||(u=u.slice(-1));for(const d of u)r.h(d),d.startTime<n.firstHiddenTime&&(o.value=Math.max(d.startTime-uh(),0),o.entries=[d],s())},i=dh("largest-contentful-paint",a);if(i){s=ga(e,o,gx,t.reportAllChanges);const u=xA(()=>{a(i.takeRecords()),i.disconnect(),s(!0)});for(const d of["keydown","click","visibilitychange"])addEventListener(d,()=>wA(u),{capture:!0,once:!0});pm(d=>{o=va("LCP"),s=ga(e,o,gx,t.reportAllChanges),yA(()=>{o.value=performance.now()-d.timeStamp,s(!0)})})}})},vx=[800,1800],n5=e=>{document.prerendering?mh(()=>n5(e)):document.readyState!=="complete"?addEventListener("load",()=>n5(e),!0):setTimeout(e)},tue=(e,t={})=>{let n=va("TTFB"),s=ga(e,n,vx,t.reportAllChanges);n5(()=>{const o=y3();o&&(n.value=Math.max(o.responseStart-uh(),0),n.entries=[o],s(!0),pm(()=>{n=va("TTFB",0),s=ga(e,n,vx,t.reportAllChanges),s(!0)}))})},nue=e=>{const n=performance.getEntriesByType("navigation")[0],s=n==null?void 0:n.type;let o;const r=navigator;r.connection&&typeof r.connection.effectiveType=="string"&&(o=r.connection.effectiveType);const a={eventName:e.name,eventInfo_duration:e.value,eventInfo_navigationType:s,eventInfo_connectionType:o};D.trackEvent({name:"system",data:a});try{const i=`web-vitals-${e.name}`;performance.mark(i),performance.measure(`web-vitals-measure-${e.name}`)}catch{}};let Cx=!1;function sue(){const e=se(Aw);if(typeof window>"u"||Cx)return;Cx=!0;let t=!1;const n=o=>{nue(o),e(r=>({...r,[o.name.toLowerCase()]:o.value}))},s=o=>{t||(t=!0,n(o))};tue(n),Zle(n),eue(s,{reportAllChanges:!0}),Jle(n)}function oue(){l.useEffect(()=>(window.addEventListener("unhandledrejection",M4),()=>{window.removeEventListener("unhandledrejection",M4)}),[])}function rue(e={}){const{isAppInitialized:t=!1}=e,n=window.appStart;return l.useEffect(()=>!t||!n?()=>{}:(window.addEventListener("beforeunload",U4),()=>{window.removeEventListener("beforeunload",U4)}),[t,n]),{startTime:n}}function aue({reason:e,onReload:t}){const{t:n}=Y();return c.jsxs(c.Fragment,{children:[c.jsx("h1",{className:"pb-3 text-xl",children:n("authentication.accountChanged")}),c.jsx("p",{className:"pb-7",children:n(e==="login"?"authentication.signedInOtherTab":"authentication.signedOutOtherTab")}),c.jsx(re,{onClick:t,title:n("authentication.reloadToContinue"),variant:"pill",size:"48-lg",className:"w-full",children:n("authentication.reloadToContinue")})]})}const b3=e=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...e},l.createElement("path",{fill:"#F25022",d:"M12.05 3H3.5v8.55h8.55V3Z"}),l.createElement("path",{fill:"#7FBA00",d:"M21.5 3h-8.55v8.55h8.55V3Z"}),l.createElement("path",{fill:"#00A4EF",d:"M12.05 12.45H3.5V21h8.55v-8.55Z"}),l.createElement("path",{fill:"#FFB900",d:"M21.5 12.45h-8.55V21h8.55v-8.55Z"})),IA=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M16.289 7.53846C17.3723 7.53846 18.7302 6.8061 19.5389 5.82962C20.2712 4.94469 20.8053 3.70884 20.8053 2.47298C20.8053 2.30515 20.79 2.13732 20.7595 2C19.5541 2.04577 18.1047 2.80865 17.235 3.8309C16.5484 4.60903 15.9229 5.82963 15.9229 7.08074C15.9229 7.26383 15.9534 7.44692 15.9686 7.50795C16.0449 7.5232 16.167 7.53846 16.289 7.53846ZM12.4747 26C13.9547 26 14.6107 25.0083 16.4569 25.0083C18.3335 25.0083 18.7455 25.9695 20.3933 25.9695C22.0106 25.9695 23.0939 24.4743 24.1161 23.0095C25.2604 21.3312 25.7334 19.6834 25.7639 19.6071C25.6571 19.5766 22.5599 18.3102 22.5599 14.7552C22.5599 11.6732 25.0011 10.2848 25.1384 10.178C23.5211 7.85887 21.0646 7.79784 20.3933 7.79784C18.5777 7.79784 17.0977 8.89638 16.167 8.89638C15.16 8.89638 13.8326 7.85887 12.2611 7.85887C9.27061 7.85887 6.23438 10.3306 6.23438 14.9994C6.23438 17.8983 7.36343 20.965 8.75186 22.9485C9.94194 24.6268 10.9794 26 12.4747 26Z"})),hm=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M29.546 13.667H16.6074V19.1073H24.0425C23.6865 20.781 22.7411 22.2039 21.3419 23.1773V26.6204H25.6809C28.2662 24.1829 29.754 20.5792 29.754 16.3183C29.754 15.4014 29.6798 14.5178 29.546 13.667Z",fill:"#4285F4"}),l.createElement("path",{d:"M25.6811 26.6202L24.1728 25.4233L21.3422 23.1771C20.0963 24.0439 18.4918 24.5553 16.6077 24.5553C13.0066 24.5553 9.94929 22.0813 8.84297 18.7412H4.37549V22.2862C6.62805 26.8602 11.2579 29.9995 16.6077 29.9995C20.3024 29.9995 23.4137 28.7583 25.6811 26.6202Z",fill:"#34A853"}),l.createElement("path",{d:"M8.84338 18.7412C8.55701 17.8759 8.39918 16.9539 8.39918 16C8.39918 15.0465 8.55701 14.1245 8.84338 13.2592V9.71387H4.37549C3.44448 11.6046 2.91699 13.7387 2.91699 16C2.91699 18.2617 3.44448 20.3958 4.37549 22.2865L8.84338 18.7412Z",fill:"#FBBC05"}),l.createElement("path",{d:"M21.9211 9.56791L25.7683 5.64882C23.3952 3.38751 20.301 2 16.6078 2C11.258 2 6.62807 5.13939 4.37549 9.71335L8.843 13.2583C9.94932 9.91789 13.0066 7.44426 16.6078 7.44426C18.6489 7.44426 20.4778 8.1629 21.9211 9.56791Z",fill:"#EA4335"}));function Fl(){return!!ae.instance().config().enableAuth0}function iue(){const e=qp();return l.useCallback(n=>{n?e.removeQueries({queryKey:n}):e.clear()},[e])}const cue=0,lue=1,uue=2,i_e=3;var yx=Object.prototype.hasOwnProperty;function s5(e,t){var n,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((s=e.length)===t.length)for(;s--&&s5(e[s],t[s]););return s===-1}if(!n||typeof e=="object"){s=0;for(n in e)if(yx.call(e,n)&&++s&&!yx.call(t,n)||!(n in t)||!s5(e[n],t[n]))return!1;return Object.keys(t).length===s}}return e!==e&&t!==t}const zr=new WeakMap,Yr=()=>{},Vs=Yr(),o5=Object,uo=e=>e===Vs,Gr=e=>typeof e=="function",_i=(e,t)=>({...e,...t}),due=e=>Gr(e.then),Xg={},rf={},x3="undefined",gm=typeof window!=x3,r5=typeof document!=x3,mue=gm&&"Deno"in window,fue=()=>gm&&typeof window.requestAnimationFrame!=x3,pue=(e,t)=>{const n=zr.get(e);return[()=>!uo(t)&&e.get(t)||Xg,s=>{if(!uo(t)){const o=e.get(t);t in rf||(rf[t]=o),n[5](t,_i(o,s),o||Xg)}},n[6],()=>!uo(t)&&t in rf?rf[t]:!uo(t)&&e.get(t)||Xg]};let a5=!0;const hue=()=>a5,[i5,c5]=gm&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Yr,Yr],gue=()=>{const e=r5&&document.visibilityState;return uo(e)||e!=="hidden"},vue=e=>(r5&&document.addEventListener("visibilitychange",e),i5("focus",e),()=>{r5&&document.removeEventListener("visibilitychange",e),c5("focus",e)}),Cue=e=>{const t=()=>{a5=!0,e()},n=()=>{a5=!1};return i5("online",t),i5("offline",n),()=>{c5("online",t),c5("offline",n)}},yue={isOnline:hue,isVisible:gue},bue={initFocus:vue,initReconnect:Cue},c_e=!gi.useId,S3=!gm||mue,l_e=e=>fue()?window.requestAnimationFrame(e):setTimeout(e,1),u_e=S3?l.useEffect:l.useLayoutEffect,e0=typeof navigator<"u"&&navigator.connection,bx=!S3&&e0&&(["slow-2g","2g"].includes(e0.effectiveType)||e0.saveData),af=new WeakMap,xue=e=>o5.prototype.toString.call(e),t0=(e,t)=>e===`[object ${t}]`;let Sue=0;const l5=e=>{const t=typeof e,n=xue(e),s=t0(n,"Date"),o=t0(n,"RegExp"),r=t0(n,"Object");let a,i;if(o5(e)===e&&!s&&!o){if(a=af.get(e),a)return a;if(a=++Sue+"~",af.set(e,a),Array.isArray(e)){for(a="@",i=0;i<e.length;i++)a+=l5(e[i])+",";af.set(e,a)}if(r){a="#";const u=o5.keys(e).sort();for(;!uo(i=u.pop());)uo(e[i])||(a+=i+":"+l5(e[i])+",");af.set(e,a)}}else a=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return a},_A=e=>{if(Gr(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?l5(e):"",[e,t]};let Eue=0;const xx=()=>++Eue;async function wue(...e){const[t,n,s,o]=e,r=_i({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let a=r.populateCache;const i=r.rollbackOnError;let u=r.optimisticData;const d=p=>typeof i=="function"?i(p):i!==!1,m=r.throwOnError;if(Gr(n)){const p=n,g=[],C=t.keys();for(const v of C)!/^\$(inf|sub)\$/.test(v)&&p(t.get(v)._k)&&g.push(v);return Promise.all(g.map(f))}return f(n);async function f(p){const[g]=_A(p);if(!g)return;const[C,v]=pue(t,g),[b,y,E,x]=zr.get(t),I=()=>{const Q=b[g];return(Gr(r.revalidate)?r.revalidate(C().data,p):r.revalidate!==!1)&&(delete E[g],delete x[g],Q&&Q[0])?Q[0](uue).then(()=>C().data):C().data};if(e.length<3)return I();let _=s,T,A=!1;const k=xx();y[g]=[k,0];const R=!uo(u),P=C(),B=P.data,U=P._c,$=uo(U)?B:U;if(R&&(u=Gr(u)?u($,B):u,v({data:u,_c:$})),Gr(_))try{_=_($)}catch(Q){T=Q,A=!0}if(_&&due(_))if(_=await _.catch(Q=>{T=Q,A=!0}),k!==y[g][0]){if(A)throw T;return _}else A&&R&&d(T)&&(a=!0,v({data:$,_c:Vs}));if(a&&!A)if(Gr(a)){const Q=a(_,$);v({data:Q,error:Vs,_c:Vs})}else v({data:_,error:Vs,_c:Vs});if(y[g][1]=xx(),Promise.resolve(I()).then(()=>{v({_c:Vs})}),A){if(m)throw T;return}return _}}const Sx=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Iue=(e,t)=>{if(!zr.has(e)){const n=_i(bue,t),s=Object.create(null),o=wue.bind(Vs,e);let r=Yr;const a=Object.create(null),i=(m,f)=>{const p=a[m]||[];return a[m]=p,p.push(f),()=>p.splice(p.indexOf(f),1)},u=(m,f,p)=>{e.set(m,f);const g=a[m];if(g)for(const C of g)C(f,p)},d=()=>{if(!zr.has(e)&&(zr.set(e,[s,Object.create(null),Object.create(null),Object.create(null),o,u,i]),!S3)){const m=n.initFocus(setTimeout.bind(Vs,Sx.bind(Vs,s,cue))),f=n.initReconnect(setTimeout.bind(Vs,Sx.bind(Vs,s,lue)));r=()=>{m&&m(),f&&f(),zr.delete(e)}}};return d(),[e,o,d,r]}return[e,zr.get(e)[4]]},_ue=(e,t,n,s,o)=>{const r=n.errorRetryCount,a=o.retryCount,i=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!uo(r)&&a>r||setTimeout(s,i,o)},Tue=s5,[TA,Aue]=Iue(new Map),kue=_i({onLoadingSlow:Yr,onSuccess:Yr,onError:Yr,onErrorRetry:_ue,onDiscarded:Yr,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:bx?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:bx?5e3:3e3,compare:Tue,isPaused:()=>!1,cache:TA,mutate:Aue,fallback:{}},yue),Mue=(e,t)=>{const n=_i(e,t);if(t){const{use:s,fallback:o}=e,{use:r,fallback:a}=t;s&&r&&(n.use=s.concat(r)),o&&a&&(n.fallback=_i(o,a))}return n},Nue=l.createContext({}),Rue="$inf$",AA=gm&&window.__SWR_DEVTOOLS_USE__,Pue=AA?window.__SWR_DEVTOOLS_USE__:[],Lue=()=>{AA&&(window.__SWR_DEVTOOLS_REACT__=gi)},kA=e=>Gr(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],MA=()=>{const e=l.useContext(Nue);return l.useMemo(()=>_i(kue,e),[e])},Oue=e=>(t,n,s)=>e(t,n&&((...r)=>{const[a]=_A(t),[,,,i]=zr.get(TA);if(a.startsWith(Rue))return n(...r);const u=i[a];return uo(u)?n(...r):(delete i[a],u)}),s),Due=Pue.concat(Oue),d_e=e=>function(...n){const s=MA(),[o,r,a]=kA(n),i=Mue(s,a);let u=e;const{use:d}=i,m=(d||[]).concat(Due);for(let f=m.length;f--;)u=m[f](u);return u(o,r||i.fetcher||null,i)},m_e=(e,t,n)=>{const s=t[e]||(t[e]=[]);return s.push(n),()=>{const o=s.indexOf(n);o>=0&&(s[o]=s[s.length-1],s.pop())}},f_e=(e,t)=>(...n)=>{const[s,o,r]=kA(n),a=(r.use||[]).concat(t);return e(s,o,{...r,use:a})};Lue();function jue(){const{cache:e,mutate:t}=MA(),n=l.useCallback(async()=>{for(const o of e.keys())await t(o,void 0,{revalidate:!1})},[e,t]),s=l.useCallback(async o=>{await t(o,void 0,{revalidate:!1})},[t]);return{clearAllSWRCache:n,clearOneSWRCache:s}}function NA(){Ht(J0),Ht(sl),Ht(n1)}function Fue(){Ht(eS),NA()}function Xi(){const{clearAllSWRCache:e}=jue(),t=iue(),n=async r=>{const{provider:a,opts:i={},onAuthComplete:u,onAuthError:d}=r;NA(),await da.instance().logIn(a,i).catch(m=>{console.error(m),d==null||d()})},s=async(r=!0)=>{await e(),t(),Fue(),ale(),await da.instance().logOut().then(async()=>{r&&KC("/")})};return{login:n,logout:s,switchMicrosoftAccount:async()=>{await s(),await n({provider:"microsoft"})}}}function Uue({accountActionRequired:e,onReload:t}){const{t:n}=Y(),s=Fl(),{login:o}=Xi(),{reason:r,provider:a,loginHint:i,correlationId:u}=e,d=async g=>{Ce({source:"sessionExpired",scenario:"continueWithMicrosoftWithLoginHint",destination:"continueWithMicrosoftRedirect"}),yg({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"});const{msal:C}=await Ss.get();await C.acquireTokenRedirect({...Wd(),loginHint:g,account:C.getAccountByUsername(g)??void 0,prompt:void 0,correlationId:u})},m=async()=>{if(r==="token-expired"&&e.provider==="microsoft"){const{msal:g}=await Ss.get();Ht(nr);const C=g.getActiveAccount();await g.clearCache({account:C})}},f=async(g,C)=>{await m();let v="";switch(g==="microsoft"?(v="MSA",yg({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"})):g==="auth0"&&(v=(C==null?void 0:C.connection)==="apple"?"Apple":"Google",yg({authWorkflowAccountType:(C==null?void 0:C.connection)??"google",apiName:ws.REAUTH_START})),Ce({source:"sessionExpired",scenario:`continueWith${v}`,destination:`continueWith${v}Redirect`}),g){case"microsoft":o({provider:g});break;case"auth0":o({provider:g,opts:C});break}},p=async()=>{$t({source:"signin",scenario:"sessionExpired"}),await m(),o({provider:"microsoft"})};return c.jsxs(c.Fragment,{children:[c.jsx("h1",{className:"pb-3 text-xl",children:n("authentication.sessionExpired")}),c.jsx("p",{className:"pb-7",children:n("authentication.sessionExpiredMessage")}),r==="token-expired"&&a==="microsoft"&&i&&c.jsx(re,{onClick:()=>d(i),title:`${n("signInPrompt.continueAs",{name:i})}`,variant:"pill",size:"48-lg",className:"w-full",children:`${n("signInPrompt.continueAs",{name:i})}`}),s?c.jsxs(c.Fragment,{children:[c.jsxs(re,{onClick:()=>f("microsoft"),title:n("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[c.jsx(b3,{className:"size-6"}),n("signInPrompt.continueWithMicrosoft")]}),c.jsxs(re,{onClick:()=>f("auth0",{connection:"apple"}),title:n("signInPrompt.continueWithApple"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[c.jsx(IA,{className:"size-6 text-black dark:text-white"}),n("signInPrompt.continueWithApple")]}),c.jsxs(re,{onClick:()=>f("auth0",{connection:"google"}),title:n("signInPrompt.continueWithGoogle"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[c.jsx(hm,{className:"size-6"}),n("signInPrompt.continueWithGoogle")]})]}):c.jsx(re,{onClick:p,title:n("common.loginText"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:n("common.loginText")}),c.jsx(re,{onClick:t,title:n("signInPrompt.continueWithoutSignIn"),variant:"pill",color:"subtle-dimmed-inverted",size:"48-lg",className:"mt-3 w-full",children:n("signInPrompt.continueWithoutSignIn")})]})}function RA(e){const{accountActionRequired:t}=e;return c.jsx(Ho,{isOpen:!0,children:c.jsx(Bue,{accountActionRequired:t})})}function Bue(e){const{accountActionRequired:t}=e,{reason:n,errorMessage:s}=t;l.useEffect(()=>{D.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"shown",eventInfo_reason:n}}),n==="token-expired"&&t.provider==="microsoft"&&SQ(s)},[n,s,t.provider]);const o=async()=>{if(D.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"reload",eventInfo_reason:n}}),n==="token-expired"&&t.provider==="microsoft"){const{msal:r}=await Ss.get(),a=r.getActiveAccount();Ht(nr),await r.clearCache({account:a})}Pl()};return n==="login"||n==="logout"?c.jsx("div",{className:"flex max-w-72 flex-col items-center p-1 text-center",children:c.jsx(aue,{reason:n,onReload:o})}):c.jsx("div",{className:"flex max-w-96 flex-col items-center p-1 text-center",children:c.jsx(Uue,{accountActionRequired:t,onReload:o})})}function Vue(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Hue(e){if(!Vue(e)&&typeof e!="number")return!1;const t=Dt(e);return!isNaN(Number(t))}function PA(e,t){const n=Dt(e);if(isNaN(t))return Y0(e,NaN);if(!t)return n;const s=n.getDate(),o=Y0(e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const r=o.getDate();return s>=r?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function zue(e,t){return PA(e,t*12)}function Gue(e,t){return zue(e,-13)}function ts(e,t,n="en-US"){var o,r;let s;if(e instanceof Date)s=e;else if(typeof e=="number")s=new Date(e<1e12?e*1e3:e);else if(typeof e=="string")s=new Date(e);else throw new Error(`Invalid date input: ${e}`);if(Number.isNaN(s.getTime()))throw new Error(`Invalid date: ${String(e)}`);switch(t){case"yyyyMMdd":{const a=s.getFullYear(),i=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0");return`${a}${i}${u}`}case"yyyyMMdd_HHmmss":{const a=s.getFullYear(),i=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0"),d=s.getHours().toString().padStart(2,"0"),m=s.getMinutes().toString().padStart(2,"0"),f=s.getSeconds().toString().padStart(2,"0");return`${a}${i}${u}_${d}${m}${f}`}case"h:mm aa":case"h:mm a":return new Intl.DateTimeFormat(n,{hour:"numeric",minute:"2-digit",hour12:!0}).format(s);case"h":return((o=new Intl.DateTimeFormat(n,{hour:"numeric",hour12:!0}).formatToParts(s).find(u=>u.type==="hour"))==null?void 0:o.value)??"";case"mm":return new Intl.DateTimeFormat(n,{minute:"2-digit"}).format(s).padStart(2,"0");case"a":return((r=new Intl.DateTimeFormat(n,{hour:"numeric",hour12:!0}).formatToParts(s).find(u=>u.type==="dayPeriod"))==null?void 0:r.value)??"";case"PP":return new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"}).format(s);case"EEEE":return new Intl.DateTimeFormat(n,{weekday:"long"}).format(s);case"eeee":return new Intl.DateTimeFormat(n,{weekday:"long"}).format(s);case"MMMM":return new Intl.DateTimeFormat(n,{month:"long"}).format(s);case"d":return s.getDate().toString();case"MM/dd":{const a=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");return`${a}/${i}`}case"MMM d":return new Intl.DateTimeFormat(n,{month:"short",day:"numeric"}).format(s);case"MMM":return new Intl.DateTimeFormat(n,{month:"short"}).format(s);case"eee, MMM d":return new Intl.DateTimeFormat(n,{weekday:"short",month:"short",day:"numeric"}).format(s);case"eee":return new Intl.DateTimeFormat(n,{weekday:"short"}).format(s);case"EE":return new Intl.DateTimeFormat(n,{weekday:"short"}).format(s);case"h:mma":return new Intl.DateTimeFormat(n,{hour:"numeric",minute:"2-digit",hour12:!0}).format(s).replace(" ","");case"haaa":return new Intl.DateTimeFormat(n,{hour:"numeric",hour12:!0}).format(s).replace(/\s+/g,"").toLowerCase();case"yyyy":return s.getFullYear().toString();case"MM":return(s.getMonth()+1).toString().padStart(2,"0");case"dd":return s.getDate().toString().padStart(2,"0");case"HH":return s.getHours().toString().padStart(2,"0");case"HH:mm":{const a=s.getHours().toString().padStart(2,"0"),i=s.getMinutes().toString().padStart(2,"0");return`${a}:${i}`}case"HH:mm:ss":{const a=s.getHours().toString().padStart(2,"0"),i=s.getMinutes().toString().padStart(2,"0"),u=s.getSeconds().toString().padStart(2,"0");return`${a}:${i}:${u}`}case"ss":return s.getSeconds().toString().padStart(2,"0");case"xD":{const i=Math.floor((new Date().getTime()-s.getTime())/(1e3*3600*24));return z("dates.time.dayAbbrCapitalized",{dayNumber:i})}case"xh":{const i=Math.floor((new Date().getTime()-s.getTime())/(1e3*3600));return z("dates.time.hourAbbr",{hourNumber:Math.max(1,i)})}case"xw":{const i=Math.floor((new Date().getTime()-s.getTime())/(1e3*3600*24*7));return z("dates.time.weekAbbr",{weekNumber:i})}case"yyyy-MM-dd":{const a=s.getFullYear(),i=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0");return`${a}-${i}-${u}`}case"yyyy-MM-dd, h:mm aa":{const a=s.getFullYear(),i=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0"),d=new Intl.DateTimeFormat(n,{hour:"numeric",minute:"2-digit",hour12:!0}).format(s);return`${a}-${i}-${u}, ${d}`}default:return s.toLocaleString(n)}}function E3(e,t){if(e){if(e.indexOf("-")!==-1)return e;if(t)return`${e}-${t}`}else if(t)return t;return"en-US"}const fh=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M4.53033 12.9697C4.23744 12.6768 3.76256 12.6768 3.46967 12.9697C3.17678 13.2626 3.17678 13.7374 3.46967 14.0303L7.96967 18.5303C8.26256 18.8232 8.73744 18.8232 9.03033 18.5303L20.0303 7.53033C20.3232 7.23744 20.3232 6.76256 20.0303 6.46967C19.7374 6.17678 19.2626 6.17678 18.9697 6.46967L8.5 16.9393L4.53033 12.9697Z"})),p_e=Object.freeze(Object.defineProperty({__proto__:null,default:fh},Symbol.toStringTag,{value:"Module"})),Wue="p-2 -m-2 bg-slate-200 rounded-xl text-stroke-350";function w3(e){const{disabled:t,checked:n,label:s,className:o,labelClassName:r,setChecked:a,"aria-label":i,"aria-expanded":u,spatialNavigationAutofocus:d=!1}=e,m=l.useId(),{focusable:f,refCallback:p}=Ta({autoRestoreFocus:!0,forceFocus:!0});return c.jsxs("label",{"aria-label":i,className:F("relative flex cursor-pointer items-center",o,f.focused&&Wue),ref:p,htmlFor:m,"data-spatial-focus-key":f.focusKey,"data-spatial-navigation-autofocus":d,children:[c.jsx("input",{checked:n,type:"checkbox",id:m,className:"peer sr-only",onChange:g=>a(g.target.checked),disabled:t,"aria-expanded":u}),c.jsx("span",{className:F("flex aspect-square size-5 items-center justify-center rounded-full border transition-colors duration-200 peer-focus:ring-1 peer-focus:ring-black peer-focus:ring-offset-2 peer-disabled:pointer-events-none peer-disabled:opacity-40 dark:peer-focus:ring-white","contrast-more:peer-focus:outline contrast-more:peer-focus:outline-2 contrast-more:peer-focus:outline-offset-2",n&&"bg-black contrast-more:bg-white dark:bg-white"),children:c.jsx(fh,{className:F("size-3 text-white transition-opacity duration-200 contrast-more:text-current dark:text-black contrast-more:dark:text-current",n?"opacity-100":"opacity-0")})}),c.jsx("span",{className:F("mt-px ps-4 peer-disabled:pointer-events-none peer-disabled:opacity-40",r),children:s})]})}const ds=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M8.46967 4.21967C8.17678 4.51256 8.17678 4.98744 8.46967 5.28033L15.1893 12L8.46967 18.7197C8.17678 19.0126 8.17678 19.4874 8.46967 19.7803C8.76256 20.0732 9.23744 20.0732 9.53033 19.7803L16.7803 12.5303C17.0732 12.2374 17.0732 11.7626 16.7803 11.4697L9.53033 4.21967C9.23744 3.92678 8.76256 3.92678 8.46967 4.21967Z"})),h_e=Object.freeze(Object.defineProperty({__proto__:null,default:ds},Symbol.toStringTag,{value:"Module"})),$ue={top:36,bottom:36,left:24,right:24};function cf(e){const{ariaLabelId:t,options:n,renderOption:s,onSelect:o,value:r,id:a,actionLabel:i,placeholder:u,className:d,menuClassName:m,expandIconClassName:f,disabled:p=!1,isValid:g=!0,supportsBrowserAutofill:C,supportsTypeahead:v=!1,autoComplete:b,boundary:y,padding:E=$ue,useFloatingContainer:x=!0,multiSelect:I=!1,multiSelectedValues:_=[],onMultiSelectionChange:T}=e,{t:A}=Y(),[k,R]=l.useState(!1),[P,B]=l.useState(null),U=n.findIndex(ee=>ee.key===r),$=l.useRef([]),Q=l.useRef([]),te=l.useCallback(ee=>{var Pe;const me=(Pe=n[ee])==null?void 0:Pe.key;me&&o(me)},[o,n]),{refs:X,floatingStyles:ne,context:q}=Rl({placement:"bottom-start",strategy:"absolute",open:k,onOpenChange:R,whileElementsMounted:_a,middleware:[kl({padding:E}),K_({boundary:y,apply({rects:ee,elements:me,availableHeight:Pe}){Object.assign(me.floating.style,{maxHeight:`${Pe}px`,minWidth:`${ee.reference.width}px`})},padding:E})]}),Z=HC(q,{event:"mousedown",enabled:!p}),J=cm(q),W=J1(q,{role:"listbox"}),le=Ere(q,{listRef:$,activeIndex:P,selectedIndex:U,onNavigate:B,loop:!0,focusItemOnHover:!1,openOnArrowKeyDown:!p}),_e=Ire(q,{enabled:v,listRef:Q,activeIndex:P,onMatch:k?B:te}),{getReferenceProps:Ae,getFloatingProps:K,getItemProps:be}=Y1([J,W,le,Z,_e]),Me=l.useCallback(ee=>{if(I){if(!T)return;const me=_.includes(ee);T(me?_.filter(Pe=>Pe!==ee):[..._,ee])}else o(ee),R(!1)},[I,o,T,_]);let je;I?_.length>0?je=c.jsx("div",{className:"truncate",children:A("dropdown.multiselect.itemsSelected",{count:_.length})}):je=c.jsx("div",{className:"truncate text-foreground-550 dark:text-foreground-600",children:u}):U>-1?je=s(n[U]):je=c.jsx("div",{className:"truncate text-foreground-550 dark:text-foreground-600",children:u});const oe=l.useCallback(ee=>{p||o(ee.currentTarget.value)},[o,p]),ie=l.useRef(null);return c.jsxs(c.Fragment,{children:[C&&c.jsx("select",{"aria-hidden":!0,className:"hidden",onChange:oe,autoComplete:b,disabled:p,children:n.map(ee=>c.jsx("option",{value:ee.key,children:ee.text},ee.key))}),c.jsxs("button",{role:"combobox",type:"button",id:a,ref:X.setReference,"aria-labelledby":t,"aria-expanded":k,"aria-haspopup":"listbox","aria-autocomplete":"none","aria-invalid":!g,"aria-disabled":p,className:de("flex w-full cursor-pointer items-center justify-between gap-2 rounded-2xl bg-black/5 px-[1.125rem] py-4 dark:bg-background-450/25",d,p&&"pointer-events-none opacity-50"),...Ae(),children:[c.jsx("div",{className:"min-w-0",children:je}),c.jsxs("div",{className:de("flex min-h-[26px] shrink-0 grow items-center justify-end gap-2",f),children:[i&&c.jsx("span",{children:i}),c.jsx(ds,{className:"size-6 rotate-90"})]})]}),x&&c.jsx("div",{ref:ie}),k&&c.jsx(Nl,{root:x?ie.current:void 0,children:c.jsx(K1,{context:q,modal:!1,children:c.jsx("div",{ref:X.setFloating,style:ne,className:de("flex overflow-hidden rounded-2xl shadow-md",m),...K(),children:c.jsx("div",{className:de("flex w-full flex-col p-2",yee),children:c.jsx("div",{className:de("vertical-scrollbar overflow-y-auto py-1 pe-1"),children:n.map((ee,me)=>c.jsx("div",{ref:Pe=>{$.current[me]=Pe,Q.current[me]=ee.text},role:"option",tabIndex:me===P?0:-1,"aria-selected":I?_.includes(ee.key):me===U&&me===P,className:"relative cursor-default rounded-xl px-3 py-2 -outline-offset-2 hover:bg-black/5 dark:hover:bg-white/8",...be({onClick(){I||Me(ee.key)},onKeyDown(Pe){Pe.key==="Enter"&&(Pe.preventDefault(),Me(ee.key))}}),children:I?c.jsx(w3,{label:ee.text,checked:_.includes(ee.key),setChecked:()=>Me(ee.key)}):s(ee)},ee.key))})})})})})]})}function Ex(e){const{htmlFor:t,content:n,required:s,className:o,afterContent:r}=e;return c.jsxs("div",{className:"flex items-center",children:[c.jsxs("label",{htmlFor:t,className:de("flex items-center gap-0.5 text-foreground-900",o),children:[n,s&&c.jsx("span",{className:"text-system-red-550 dark:text-system-red-350",children:"*"})]}),r]})}const wx="absolute size-full",que="bg-gradient-discover-light dark:bg-gradient-discover-dark",Zue="bg-gradient-authentication-light dark:bg-gradient-authentication-dark";function ec(e){const{isBottomFade:t,forceGradient:n,isFixed:s,overrideGradientType:o,customColor:r}=e,a=ut(),i=a==="/login",u=n===!0||i,m=(o??(i?"authentication":"default"))==="authentication"?Zue:que;return c.jsxs("div",{className:de(s?"fixed":"absolute",t?"-inset-x-4 bottom-0 h-dvh":"inset-0","overflow-hidden"),children:[c.jsx("div",{className:de(wx,"bg-none",r??"bg-background-150")}),c.jsx(pt,{children:u&&c.jsx(ge.div,{className:de(wx,m),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Be,animate:tt,exit:Be},transition:RC},a)})]})}const LA=N(void 0);function Kue(e){const{buttonClassName:t}=e,{t:n}=Y(),{closeSettings:s}=Sr(),o=se(LA),r=M(De);function a(){$t({source:"complianceLinks",scenario:"cookies",conversationId:r,destination:"#"}),o("more-options"),s()}return c.jsx(re,{role:"menuitem",variant:"rect",size:"28-xxs",color:"subtle-dimmed-inverted",className:t,title:n("settings.cookies"),onClick:()=>a(),testId:"cookies-compliance-button",children:c.jsx("span",{children:n("settings.cookies")})})}const dl="https://www.bing.com/new/termsofuse",es="https://go.microsoft.com/fwlink/?LinkId=521839",Ap="https://www.microsoft.com/microsoft-copilot/learn/?form=MG0AUO&OCID=MG0AUO#faqs",Lf="hover:underline focus:underline";function Ix(e){var t,n;return((n=(t=ae.instance().config()).textOverrides)==null?void 0:n.call(t,e))??e}function g_e(e){const{component:t="link",buttonClassName:n}=e,s=M(De),{pushPage:o}=Sr(),r=M(Rn),a=nh(r),i=(d,m)=>{$t({source:"complianceLinks",scenario:d,conversationId:s,destination:m})},u=H("manage-cookies");return c.jsxs("div",{className:de("flex w-full flex-wrap justify-center gap-x-3 gap-y-1 text-black/80 text-xs dark:text-white/80",t==="button"?"flex-col p-0":"px-5 py-2"),children:[t==="link"?c.jsx(Yue,{handleAnalytics:i}):c.jsx(Que,{handleAnalytics:i,className:n??"",setPage:o}),u&&a&&c.jsx(Kue,{buttonClassName:F(Lf,{"text-xs p-0 min-h-0 mx-0 min-w-0 gap-x-0 safe-hover:bg-transparent dark:safe-hover:bg-transparent dark:text-white/80":t==="link",[n??""]:t==="button"})})]})}function Yue(e){const{handleAnalytics:t}=e;return c.jsxs(c.Fragment,{children:[c.jsx(ls,{href:es,title:z(Ix("settings.privacyLink")),className:Lf,onClick:()=>t("privacy",es),children:z(Ix("settings.privacyLink"))}),c.jsx(ls,{href:dl,title:z("settings.termsOfServiceLink"),className:Lf,onClick:()=>t("terms",dl),children:z("settings.termsOfServiceLink")}),c.jsx(ls,{href:Ap,title:z("settings.faqLink"),className:Lf,onClick:()=>t("faq",Ap),children:z("settings.faqLink")})]})}function Que(e){const{handleAnalytics:t,className:n,setPage:s}=e,o=(r,a)=>{var m;t(r,a);const u=(m=ae.instance().config().settingsOverrides)==null?void 0:m.shouldShowPolicyTermsQRCodes,d={privacy:"privacyStatement",terms:"terms",faq:"faq",cookies:void 0};u&&r in d?s==null||s(d[r]):Eo(a)};return c.jsxs(c.Fragment,{children:[c.jsx(re,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:z("settings.privacyLink"),onClick:()=>o("privacy",es),children:c.jsx("span",{children:z("settings.privacyLink")})}),c.jsx(re,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:z("settings.termsOfServiceLink"),onClick:()=>o("terms",dl),children:c.jsx("span",{children:z("settings.termsOfServiceLink")})}),c.jsx(re,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:z("settings.faqLink"),onClick:()=>o("faq",Ap),children:c.jsx("span",{children:z("settings.faqLink")})})]})}const _x={...Ld,"United Kingdom":"UK"},Tx={termsLink:c.jsx(Ax,{link:dl}),privacyLink:c.jsx(Ax,{link:es})};function Ax(e){const{children:t,link:n}=e;return c.jsx(ls,{className:"underline",href:n,title:"",children:t})}function Jue(e,t,n){const s=new Date(n,t-1,e);return Hue(s)&&s.getFullYear()===n&&s.getMonth()===t-1&&s.getDate()===e}function Xue(e,t,n){const s=new Date(n,t-1,e),o=Gue(new Date);return s<=o}const n0="border-2 border-system-red-550/50 bg-system-red-550/10 text-system-red-550 dark:text-system-red-350";function ede(){const[e,t]=l.useState(!1),[n,s]=l.useState(void 0),[o,r]=l.useState(void 0);l.useEffect(()=>{async function k(){const R=await PQ();r(R)}k()},[]),l.useEffect(()=>{const k=new URLSearchParams(window.location.search);k.delete("code"),k.delete("state"),k.delete("error"),window.history.replaceState({},document.title,`${window.location.pathname}?${k}`)},[]),l.useEffect(()=>{o&&cn({page:"auth0AccountVerificationPage",scenario:"auth0Verification",customData:JSON.stringify({accountType:o})})},[o]);const[a,i]=l.useState(""),[u,d]=l.useState(""),[m,f]=l.useState(""),[p,g]=l.useState(_x["United States"]),{i18n:C}=Y(),v=E3(C.resolvedLanguage),b=new Intl.NumberFormat(v,{minimumIntegerDigits:2,useGrouping:!1}),y=new Intl.NumberFormat(v,{minimumIntegerDigits:4,useGrouping:!1});l.useEffect(()=>{t(!!!(u&&m&&a&&p))},[u,m,a,p]);const E=[{key:"01",text:z("common.date.month.january")},{key:"02",text:z("common.date.month.february")},{key:"03",text:z("common.date.month.march")},{key:"04",text:z("common.date.month.april")},{key:"05",text:z("common.date.month.may")},{key:"06",text:z("common.date.month.june")},{key:"07",text:z("common.date.month.july")},{key:"08",text:z("common.date.month.august")},{key:"09",text:z("common.date.month.september")},{key:"10",text:z("common.date.month.october")},{key:"11",text:z("common.date.month.november")},{key:"12",text:z("common.date.month.december")}],x=Object.entries(_x).sort().map(([k,R])=>({key:R,text:k})),I=Array.from({length:31},(k,R)=>{const P=R+1,B=b.format(P);return{key:P.toString(),text:B}}),_=Array.from({length:125},(k,R)=>{const P=new Date().getFullYear()-R,B=y.format(P);return{key:`${new Date().getFullYear()-R}`,text:B}}),T=k=>c.jsx("p",{children:k.text}),A=async()=>{const k=parseInt(a,10),R=parseInt(u,10),P=parseInt(m,10);if(!Jue(P,R,k)){Ce({source:"auth0AccountVerificationPage",scenario:"auth0VerificationInvalidDate",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}if(!Xue(P,R,k)){Ce({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}const $=ts(new Date(k,R-1,P),"yyyy-MM-dd");s(!0);const Q=await RQ($,p);if(!Q){Ce({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulInvalidToken",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}const{ageGroup:te}=Q,X=te===Ja.NOT_ADULT,ne=te===Ja.ADULT;if(!(X||ne)){Ce({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulNotTeenOrAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}Ce({source:"auth0AccountVerificationPage",scenario:"auth0VerificationSuccessful",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),Pl()};return c.jsxs(c.Fragment,{children:[c.jsx(ec,{forceGradient:!0,overrideGradientType:"authentication"}),c.jsxs("section",{className:"relative m-auto flex min-h-dvh max-w-[500px] flex-col items-center justify-center gap-3 overflow-y-auto px-5 py-12 text-center",children:[c.jsx("h1",{className:"mb-4 text-center font-semibold text-2xl sm:text-4xl",children:z("error.auth0VerificationTitle")}),c.jsx("p",{children:z("error.auth0VerificationDescription")}),c.jsxs("div",{className:"mt-12 w-full",children:[c.jsx(Ex,{className:"mb-2 text-base",htmlFor:"birthdate-month",content:z("error.auth0VerificationBirthdate"),required:!0}),c.jsxs("div",{id:"birthdate-group",className:"flex gap-2",children:[c.jsx("span",{id:"month-label",className:"sr-only",children:u||z("dates.month")}),c.jsx("span",{id:"day-label",className:"sr-only",children:m||z("dates.day")}),c.jsx("span",{id:"year-label",className:"sr-only",children:a||z("dates.year")}),c.jsx(cf,{renderOption:T,options:E,onSelect:k=>d(k),id:"birthdate-month",ariaLabelId:"month-label",placeholder:z("dates.month"),className:de("flex-1",Kr,n===!1&&n0),value:u,isValid:n,menuClassName:lt.dropdownMenuOverModal}),c.jsx(cf,{renderOption:T,options:I,onSelect:k=>f(k),id:"birthdate-day",ariaLabelId:"day-label",placeholder:z("dates.day"),className:de("flex-1",Kr,n===!1&&n0),value:m,menuClassName:lt.dropdownMenuOverModal}),c.jsx(cf,{renderOption:T,options:_,onSelect:k=>i(k),id:"birthdate-year",ariaLabelId:"year-label",placeholder:z("dates.year"),className:de("flex-1",Kr,n===!1&&n0),value:a,menuClassName:lt.dropdownMenuOverModal})]}),n===!1&&c.jsx("div",{className:de("mt-2 text-start text-system-red-550 text-sm dark:text-system-red-350"),children:z("error.authh0VerificationAgeError")})]}),c.jsxs("div",{className:"mt-12 w-full",children:[c.jsx(Ex,{className:"mb-2 text-base",htmlFor:"country",content:z("error.auth0VerificationCountryRegion"),required:!0}),c.jsx(cf,{renderOption:T,options:x,onSelect:k=>g(k),id:"country","aria-labelledby":"country-group",placeholder:z("error.auth0VerificationCountryRegion"),className:de("flex-1",Kr),value:p,menuClassName:lt.dropdownMenuOverModal})]}),c.jsxs("div",{className:"mt-12 w-full text-black text-xs dark:text-white/90",children:[c.jsx(hn,{i18nKey:z("error.auth0VerificationDisclaimer"),components:{termsLink:Tx.termsLink,privacyLink:Tx.privacyLink}}),c.jsx(re,{className:"mt-4 w-full",color:"strong",size:"56-xl",variant:"rect",onClick:A,title:z("common.continue"),disabled:e,children:z("common.continue")})]})]})]})}function kx(e){var t,n;return((n=(t=ae.instance().config()).textOverrides)==null?void 0:n.call(t,e))??e}const s0="w-full";function tde(){const{switchMicrosoftAccount:e,logout:t,login:n}=Xi(),{t:s}=Y(),o=Fl(),r=async()=>{await e()},a=async(d,m)=>{switch(await t(),d){case"microsoft":n({provider:d});break;case"auth0":n({provider:d,opts:m});break}},i=ae.instance().config().hideAgeVerificationButton!==!0,u=ae.instance().config().hideAgeVerificationSwitchAccountButton!==!0;return c.jsxs(c.Fragment,{children:[c.jsx(ec,{forceGradient:!0}),c.jsxs("section",{className:"relative z-10 m-auto flex h-dvh max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[c.jsx("h1",{className:"text-4xl",children:s(kx("error.ageVerificationTitle"))}),c.jsx("h2",{className:"text-foreground-600",children:s(kx("error.ageVerification"))}),i&&c.jsx(re,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",testId:"age-verification",title:s("error.ageVerificationVerifyAge"),onClick:()=>{Qi(MB)},children:s("error.ageVerificationVerifyAge")}),i&&c.jsx("div",{className:"text-balance text-foreground-600",children:s("error.ageVerificationOr")}),o?c.jsxs(c.Fragment,{children:[c.jsxs(re,{onClick:()=>a("microsoft"),color:"default",title:s("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"56-xl",className:de(s0),children:[c.jsx(b3,{className:"size-6"}),s("signInPrompt.continueWithMicrosoft")]}),c.jsxs(re,{onClick:()=>a("auth0",{connection:"apple"}),color:"default",variant:"pill",size:"56-xl",title:s("signInPrompt.continueWithApple"),className:de(s0),children:[c.jsx(IA,{className:"size-6 text-black dark:text-white"}),s("signInPrompt.continueWithApple")]}),c.jsxs(re,{onClick:()=>a("auth0",{connection:"google"}),color:"default",variant:"pill",size:"56-xl",title:s("signInPrompt.continueWithGoogle"),className:de(s0),children:[c.jsx(hm,{className:"size-6"}),s("signInPrompt.continueWithGoogle")]})]}):u&&c.jsx(re,{className:"w-full",color:"default",size:"56-xl",variant:"rect",title:s("error.ageVerificationSwitchAccount"),onClick:r,children:s("error.ageVerificationSwitchAccount")})]})]})}function nde(){const e=M(sn);return(e==null?void 0:e.provider)==="auth0"?c.jsx(ede,{}):c.jsx(tde,{})}const OA=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 11.6236 19.4723 11.2538 19.4188 10.8923C19.3515 10.4382 19.6839 10 20.1429 10C20.5138 10 20.839 10.2562 20.8953 10.6228C20.9642 11.0718 21 11.5317 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C14.3051 3 16.4077 3.86656 18 5.29168V4.25C18 3.83579 18.3358 3.5 18.75 3.5C19.1642 3.5 19.5 3.83579 19.5 4.25V7.25C19.5 7.66421 19.1642 8 18.75 8H15.75C15.3358 8 15 7.66421 15 7.25C15 6.83579 15.3358 6.5 15.75 6.5H17.0991C15.7609 5.25883 13.9691 4.5 12 4.5Z"})),v_e=Object.freeze(Object.defineProperty({__proto__:null,default:OA},Symbol.toStringTag,{value:"Module"}));function sde(e){const{t}=Y(),{btnTitle:n,onBtnClick:s=()=>{}}=e;return c.jsxs("section",{className:"relative z-10 m-auto flex h-full max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[c.jsx("h1",{className:"text-4xl","data-testid":"unhandled-error-title",children:t("error.unhandledErrorTitle")}),c.jsx("h2",{className:"text-foreground-600",children:t("error.unhandledError")}),c.jsx(re,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:t("error.unhandledErrorReload"),onClick:s,testId:"unhandled-error-reload",children:n??c.jsxs(c.Fragment,{children:[c.jsx(OA,{className:"size-6"}),t("error.unhandledErrorReload")]})})]})}function I3(){return c.jsxs("main",{className:"relative size-full overflow-hidden",children:[c.jsx(ec,{forceGradient:!0}),c.jsx(sde,{onBtnClick:()=>{Pl()}})]})}const ode=100,kp=N([]);function DA(){const e=M(kp),[t,n]=l.useState(!1),s=l.useRef(null);l.useEffect(()=>(s.current=setTimeout(()=>n(!0),ode),()=>{s.current&&clearTimeout(s.current)}),[]);const o=t?e:[];return c.jsxs("div",{className:"sr-only",children:[c.jsx(Mx,{messages:o.filter(r=>r.type==="polite"),type:"polite"}),c.jsx(Mx,{messages:o.filter(r=>r.type==="assertive"),type:"assertive"})]})}function Mx({messages:e,type:t}){return c.jsx("div",{"aria-live":t,"aria-atomic":"true",children:e.map(n=>c.jsx("div",{"aria-label":n.msg,children:n.msg},n.id))})}function u5(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(Math.random()*16);return(e==="x"?t:Math.floor(Math.random()*4+8)).toString(16)})}const jA=7e3;function Ti(e={}){return rde(e),null}function rde(e={}){const{msg:t,id:n,type:s="polite",timeout:o=jA}=e,r=se(kp),a=l.useRef(n??u5());l.useEffect(()=>{t&&r(i=>{if(i.some(d=>d.id===a.current&&d.msg===t&&d.type===s))return i;a.current=n??u5();const u={msg:t,id:a.current,type:s};return window.setTimeout(()=>{r(d=>d.filter(m=>m.id!==u.id))},o),[...i,u]})},[n,t,s,r,o])}function fr(e){const{msg:t,id:n,type:s="polite",timeout:o=jA}=e;if(!t)return;const r=qe();r.set(kp,a=>{const i={msg:t,id:n??u5(),type:s};return window.setTimeout(()=>{r.set(kp,u=>u.filter(d=>d.id!==i.id))},o),[...a,i]})}function ade(){const{t:e}=Y(),t=M(sI);let n="main";tn(X0)&&t==="permanent"&&(n="confirm-submission");const[s,o]=l.useState(n),[r,a]=l.useState(""),[i,u]=l.useState(!1),d=!r||r.trim().length===0||i,m=t==="permanent"?e("composer.userBan.permanent"):e("composer.userBan.temporary",{duration:e(t==="1-hr"?"composer.userBan.duration1Hr":"composer.userBan.duration24Hr")}),f=e(t==="permanent"?"composer.userBan.banMessagePermanent":"composer.userBan.banMessageTemporary"),p=async()=>{if(!d){$t({source:"submitBanAppeal"}),u(!0);try{await Nn({path:"/user/bans/appeal",args:{body:{appealText:`APPEAL: ${r}`}}}),o("confirm-submission"),Mn(X0,new Date().toISOString())}catch(g){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitBanAppeal",eventInfo_errorMessage:`${g}`,eventInfo_details:"Error submitting ban appeal"}})}u(!1)}};return c.jsxs("main",{className:"relative size-full",children:[c.jsx(ec,{forceGradient:!0}),c.jsxs(rn,{id:s,className:"relative z-10 m-auto flex h-dvh max-w-[540px] flex-col items-center justify-center gap-3 p-12 text-center",children:[s==="main"&&c.jsxs(c.Fragment,{children:[c.jsx("h1",{className:"text-4xl",children:m}),c.jsx("p",{children:f}),t==="permanent"&&c.jsx(re,{color:"strong",size:"56-xl",className:"mt-6 w-full",title:e("composer.userBan.submitAppeal"),onClick:()=>o("submit-appeal"),children:e("composer.userBan.submitAppeal")}),c.jsx(Ti,{msg:`${m}. ${f}`})]}),s==="submit-appeal"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex w-full items-center pb-4",children:[c.jsx(re,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:e("common.backText"),onClick:()=>o("main"),children:c.jsx(Tl,{className:"size-5 -rotate-90"})}),c.jsx("h2",{className:"grow pe-8",children:e("composer.userBan.submitAppeal")})]}),c.jsx("textarea",{className:"h-[240px] w-full resize-none rounded-xl bg-background-100 p-4 placeholder:text-foreground-650 contrast-more:border-2 dark:text-white",onChange:g=>a(g.target.value),disabled:i,placeholder:e("composer.userBan.submitAppealPlaceholder")}),c.jsx(re,{color:"strong",className:"w-full",size:"56-xl",title:e("common.submitText"),onClick:p,disabled:d,children:e("common.submitText")})]}),s==="confirm-submission"&&c.jsxs(c.Fragment,{children:[c.jsx("h1",{className:"text-4xl",children:e("composer.userBan.appealSubmitted")}),c.jsx("p",{children:e("composer.userBan.appealSubmittedDescription")}),c.jsx(Ti,{msg:`${e("composer.userBan.appealSubmitted")}, ${e("composer.userBan.appealSubmittedDescription")}`})]})]})]})}function ide(e){const{children:t}=e;mie(),nle(),th(),JJ(),bie(),mle();const{appInitialized:n}=$le();Lce(),Yie(n),rie(),oue();const s=rA(),o=se(x1);tle({isEnabled:s,onIntercept:o});const r=M(qr),a=M(iv);rue({isAppInitialized:n}),QJ(),Pie(),qJ(n),KJ({appInitialized:n}),pie(),tce();const i=M(od);return sue(),tie(),ele(n),sle(),nie(),fie(),Dce(),sie(),i==="user-banned"?c.jsx(ade,{}):i==="age-verification"?c.jsx(nde,{}):i?c.jsx(I3,{}):!n||!a?null:r?c.jsx(RA,{accountActionRequired:r}):t}function cde(){const e=M(T1),t=l.useRef(!1);l.useEffect(()=>{e&&!t.current&&(D.trackEvent({name:"system",data:{eventName:"copilotStart",eventInfo_duration:window.appEnd-window.appStart,eventInfo_landingPage:D.getLandingPage()}}),t.current=!0)},[e])}const lde=qe();function FA(e){lde.set(mi,e)}function ude(){const e=om(),t=M(Kw),[n,s]=Fe(Zd);l.useEffect(()=>{e&&!n&&s(t)},[e,t,n,s])}const dde=10*1024*1024,mde=5*1024*1024,fde=50*1024*1024,pde=3,$s={"image/png":["png"],"image/jpeg":["jpg","jpeg"],"image/webp":["webp"],"image/svg+xml":["svg"],"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/msword":["doc"],"application/vnd.ms-excel":["xls"],"application/vnd.ms-powerpoint":["ppt"],"application/json":["json"],"text/xml":["xml"],"application/x-sql":["sql"],"text/csv":["csv"],"text/markdown":["md"],"text/plain":["txt"],"text/html":["html","htm"],"text/javascript":["js"],"text/css":["css"],"application/xml":["xml"]},hde={"image/png":["png"],"image/jpeg":["jpg","jpeg"]},gde={"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/json":["json"],"text/csv":["csv"],"text/markdown":["md"],"text/plain":["txt"]},Nx=N(null),UA=N(e=>{const t=e(ba("fileasyncprocessing"));return{maxFilesPerMessage:pde,image:{maxBytes:dde,mimeTypes:hde},document:{maxBytes:t?fde:mde,mimeTypes:gde}}}),Er=N(e=>e(Nx)??e(UA),(e,t,n)=>{t(Nx,n)}),Ul=N(e=>{const t=e(Er);return{...t.image.mimeTypes,...t.document.mimeTypes}});function BA(e){if(e.length===0)throw new Error("Array must have at least one element");return Math.floor(Math.random()*e.length)}function C_e(e,t){if(e.length===1)throw new Error("Array must have at least two elements");let n;do n=BA(e);while(n===t);return n}function vde(e){if(e.length!==0)return e[BA(e)]}function Cde(e){const t=[...e];for(let n=e.length-1;n>0;n-=1){const s=Math.floor(Math.random()*(n+1)),o=t[n];o&&t[s]&&(t[n]=t[s],t[s]=o)}return t}function y_e(e,t){if(e.length!==t.length)return!1;const n=[...e].sort(),s=[...t].sort();return n.every((o,r)=>o===s[r])}const yde={refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:1/0,refetchInterval:_p};function bde(e,t){return St(e,aq,t?{query:{"api-version":"2"}}:void 0).then(n=>n.data)}function cs(e){return Array.isArray(e)?Bs(e):{positive:Bs(e.positive),negative:Bs(e.negative)}}function Bs(e){const t=e,n=t.slice(0,-1),s=t.slice(-1);return[...Cde(n),...s]}function xde(e){return{newsArticle:Bs(e.newsArticle),newsVideo:Bs(e.newsVideo),newsGem:Bs(e.newsGem),chat:Bs(e.chat),dailyBriefing:Bs(e.dailyBriefing),podcast:Bs(e.podcast),default:Bs(e.default)}}function Sde(){const e=H("adspositivefeedbacksurvey"),t=H("file-upload-config"),{data:n,refetch:s}=Rs({queryKey:["config",e?"adsV2":"adsV1"],queryFn:()=>bde("/config",e),...yde}),o=se(b1),r=se(yw),a=se(Sw),i=se(_ae),u=se(Tae),d=se(Aae),m=se(eC),f=se(tC),p=se(bw),g=se(Er),C=se(jK);eA(s),l.useEffect(()=>{if(n){if(o(n.voices),r(n.signInPrompts),a(n.maxTextMessageLength),i(n.maxPageContentLength),d(n.pageLimit),u(n.maxPageTitleLength),n.characters&&f(n.characters),n.feedbackOptions.text=Bs(n.feedbackOptions.text),n.feedbackOptions.image=Bs(n.feedbackOptions.image),n.feedbackOptions.discover&&(n.feedbackOptions.discover=xde(n.feedbackOptions.discover)),n.feedbackOptions.card.local=cs(n.feedbackOptions.card.local),n.feedbackOptions.card.ads=cs(n.feedbackOptions.card.ads),n.feedbackOptions.card.video=cs(n.feedbackOptions.card.video),n.feedbackOptions.card.image=cs(n.feedbackOptions.card.image),n.feedbackOptions.card.shopping=cs(n.feedbackOptions.card.shopping),n.feedbackOptions.card.recipe=cs(n.feedbackOptions.card.recipe),n.feedbackOptions.card.sports=cs(n.feedbackOptions.card.sports),n.feedbackOptions.card.finance=cs(n.feedbackOptions.card.finance),n.feedbackOptions.card.quiz=cs(n.feedbackOptions.card.quiz),n.feedbackOptions.card.weather=cs(n.feedbackOptions.card.weather),n.feedbackOptions.card.personalArtifacts=cs(n.feedbackOptions.card.personalArtifacts),n.feedbackOptions.card.healthcareInfo=cs(n.feedbackOptions.card.healthcareInfo),n.feedbackOptions.card.navigation=cs(n.feedbackOptions.card.navigation),n.feedbackOptions.card.healthcareEntity=cs(n.feedbackOptions.card.healthcareEntity),m(n.feedbackOptions),p(n.messagePreview),t){const v=I=>{const _={};for(const T of I)T in $s&&$s[T]&&(_[T]=$s[T]);return _},b=v(n.attachments.image.mimeTypes),y=v(n.attachments.document.mimeTypes),E=pe(UA),x=(I,_)=>({maxBytes:I.maxBytes??_.maxBytes,mimeTypes:Object.keys(I.mimeTypes??{}).length?I.mimeTypes??{}:_.mimeTypes});g({maxFilesPerMessage:n.attachments.maxFilesPerMessage||E.maxFilesPerMessage,image:x({maxBytes:n.attachments.image.maxBytes,mimeTypes:b},E.image),document:x({maxBytes:n.attachments.document.maxBytes,mimeTypes:y},E.document)})}C(n.portraits??[])}},[n,r,o,a,i,u,m,f,d,p,g,t,C])}function Ede(){const e=gl(xt);return l.useCallback(n=>{e(s=>{for(const{id:o,title:r,updatedAt:a,characterId:i,continuedAt:u,group:d}of n){const m=s.get(o);m?(m.title=r,m.updatedAt=a,m.characterId=i??null,m.continuedAt=u,m.group=d??null):s.set(o,{id:o,title:r,updatedAt:a,characterId:i??null,history:[],continuedAt:null,group:d??null})}})},[e])}function wde(){const e=Ede(),t=se(Gd),n=H("group-conversations");return l.useCallback(async({url:o,args:r,isFirstPage:a})=>{const i=await St(o,Sq,{query:{...r,...n?{types:"group,chat"}:{}}}).then(u=>u.data);if(i.results.length>0){const u=i.results.map(d=>({...d,history:[]}));e(u),t(!0)}else a&&t(!1);return i},[e,t,n])}function vm(e){const{data:t,error:n,isPending:s,isFetchingNextPage:o,hasNextPage:r,fetchNextPage:a,refetch:i}=lO({staleTime:6048e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,...e}),u=l.useCallback(async()=>{r&&await a()},[a,r]),d=t==null?void 0:t.pages,m=s||o,f=l.useCallback(async()=>{await i({cancelRefetch:!1})},[i]);return{loader:{loading:m,hasNextPage:r,error:n??void 0,onLoadMore:u,data:d},refetch:f}}function Ide(){const e=wde();return vm({queryKey:["conversations"],queryFn:({pageParam:t})=>e(t),initialPageParam:{url:"/conversations",isFirstPage:!0},getNextPageParam:t=>t.next?{url:"/conversations",args:{cursor:t.next}}:null})}const _de="aster";function Tde(){const e=se(Rn),t=se(sQ),n=!on("kill-picasso-id-on-start");return l.useCallback(async()=>{const s=await St("/user",WE,{parseOptions:{safe:!0},query:{"api-version":"4"}}).then(u=>u.data),{id:o,anid:r,isHistoryMigrationPending:a}=s;D.setAnid(r);const i=D.getPicassoId();return i!==null&&i!==o&&D.trackEvent({name:"health",data:{eventName:"userIdMismatch",eventInfo_customData:JSON.stringify({existingPicassoId:i,newPicassoId:o,origin:"user"})}}),n||D.setPicassoId(o),t(a),e(s.regionCode),s},[n,t,e])}function Ade(){const e=M(sn),t=M(Ri),{refetch:n}=Ide(),s=Tde(),o=se(Jt),r=se(LK),a=se(yi),i=se(qd),u=se(Kw),d=se(Qw),m=se(dC),f=se(A1),p=se(YY),g=se(WK),C=se(Jw),v=se(QY),b=se(JY),y=se(XY),E=se(Xw),x=se(eI),I=se(qw),_=se(k1),T=se(Kd),A=se(M1),k=se(eQ),R=se(cQ),P=om(),B=H("account-change-chat-reset"),U=th()[0]==="audioCall";l.useEffect(()=>{(async()=>{r(!0);try{const Q=Promise.all([s(),St("/user/settings",bq).then(Ue=>Ue.data),n()]),te=da.instance().getUserInfo(),[{id:X,firstName:ne,isPro:q,inEeaPlusRegion:Z,isEligibleForFreeTrial:J,phoneLink:W,ageGroup:le,allowedToggles:_e,remainingUsage:Ae,subscriptions:K,accountTier:be,requiredConsents:Me},{preferredVoice:je,preferredCharacter:oe,optOutOfTraining:ie,optInToVoiceTraining:ee,optOutOfPersonalization:me,optOutOfPhoneConnection:Pe,optInToGenerativeUI:Ve,allowBiometricDataUse:Qe,allowOneDriveAccess:st,allowOutlookAccess:ve,allowEdgePasswordsAccess:xe,allowBrowserActions:Te,allowComputerUseActions:Ze,features:Le}]=await Q;if(D.setIsAad(t),o({id:X,firstName:ne,isPro:q&&!t,inEeaPlusRegion:Z,isEligibleForFreeTrial:J,phoneLink:W,ageGroup:le,allowedToggles:_e,subscriptions:K,accountTier:be,isStudent:void 0,requiredConsents:Me}),I(ne??void 0),!B&&!U&&await XC(),i(je||_de),P&&oe){const Ue=pw(oe);u(Ue)}d(ie),m(ee),f(me),p(!!Pe),g(!!Ve),C(!!Qe),v(!!st),b(!!ve),y(!!xe),E(Te),x(Ze),k((Le==null?void 0:Le.suggestedFollowups)??!0),R(Me),Ae&&(_(Ae.podcastGenerations),T(Ae.researchCalls),A(Ae.videoGenerations)),D.setSettings({userSettingVoiceType:je??void 0,userConsentPersonalization:!me,userConsentModelTraining:!ie,userSettingBrowserActions:Te??void 0,userSettingComputerUseActions:Ze??void 0,userSubscription:q?"pro":"free",accountTier:be??"free",activeSubscriptions:(K==null?void 0:K.map(Ue=>Ue.tier).join(","))??""});const Ye=await te;if(Ye){const{mail:Ue,givenName:he,imgSrc:ze,isStudent:It}=Ye;o(kt=>kt&&{...kt,givenName:he,email:Ue,imgSrc:ze,isStudent:It}),he&&!ne&&I(he),t||a(null)}}finally{r(!1)}})().catch(console.error)},[e,B,o,r,a,n,d,i,P,p,g,m,f,C,v,E,x,s,t,u,U,I,_,T,A,k,R,b,y])}const VA=()=>{const e=H("google-drive-connector"),{isGoogleDriveEnabled:t=!1}=ae.instance().config().connectorPlatform??{};return e&&!!t},kde=()=>{const e=H("google-calendar-connector"),{isGoogleCalendarEnabled:t=!1}=ae.instance().config().connectorPlatform??{};return e&&!!t},HA=()=>{const e=M(Pd),t=H("outlook-connector"),n=H("email-assist"),{isOutlookEnabled:s=!1}=ae.instance().config().connectorPlatform??{};return e&&s&&(t||n)},zA=()=>{const e=M(Pd),t=H("onedrive-connector"),{isOneDriveEnabled:n=!1}=ae.instance().config().connectorPlatform??{};return e&&n&&t},GA=()=>{const e=H("google-mail-connector"),{isGmailEnabled:t=!1}=ae.instance().config().connectorPlatform??{};return e&&!!t},WA=()=>{const e=H("google-contacts-connector"),{isGoogleContactsEnabled:t=!1}=ae.instance().config().connectorPlatform??{};return e&&!!t},$A=()=>{const e=M(Pd),t=H("edge-browser-connector"),{isEdgeBrowserEnabled:n=!1}=ae.instance().config().connectorPlatform??{};return e&&t&&!!n},Rx="userConnectors",Mde="/connections",Nde=["one-drive","outlook","edge-browser","gmail","google-calendar","google-contacts","google-drive"];async function Rde(){const{data:e}=await St(Mde,OZ,{options:{method:"GET",headers:{"Content-Type":"application/json"}}});return e.connections}function Pde(){const e=an(),t=VA(),n=kde(),s=HA(),o=zA(),r=GA(),a=WA(),i=$A(),u=e&&(t||n||s||o||r||a||i),d=se(rd),m=Rt("kill-google-drive-connector"),f=l.useMemo(()=>{let v=[...Nde];return(m||!t)&&(v=v.filter(b=>b!=="google-drive")),s||(v=v.filter(b=>b!=="outlook")),n||(v=v.filter(b=>b!=="google-calendar")),o||(v=v.filter(b=>b!=="one-drive")),r||(v=v.filter(b=>b!=="gmail")),a||(v=v.filter(b=>b!=="google-contacts")),i||(v=v.filter(b=>b!=="edge-browser")),v},[m,s,n,o,r,a,t,i]),{data:p,error:g,isLoading:C}=Rs({queryKey:["userConnectors"],queryFn:Rde,enabled:u});return l.useEffect(()=>{if(p!==void 0){const v=f.map(b=>{const y=p.find(E=>E.type===b);return{type:b,status:(y==null?void 0:y.status)??"disconnected",id:(y==null?void 0:y.id)??`${b}-${crypto.randomUUID()}`}});d(v)}},[p,d,f]),{isLoading:C,error:!!g,data:C||!p?null:p}}const Lde=S({isMobileAppInstalled:fe()}),Ode="/user/install-status",Dde={refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:6e4};async function jde(){try{return(await St(Ode,Lde,{options:{method:"GET"}})).data.isMobileAppInstalled}catch(e){throw console.error("Failed to fetch mobile app install status:",e),e}}function Fde(){const e=se(oC),{data:t,error:n,isLoading:s,refetch:o}=Rs({queryKey:["mobileAppInstallStatus"],queryFn:jde,...Dde});return l.useEffect(()=>{t!==void 0&&e(t)},[t,e]),{isMobileAppInstalled:t,isLoading:s,error:n,refetch:o}}function Ude(){const e=H("memory-narrative"),t=an(),n=M(A1),s=M(mC);return e&&t&&!n&&!s}const qA="/user/narrative";function Px(e,t){var n;return(n=e.filter(s=>s.name===t)[0])==null?void 0:n.url}function b_e(e){const{background1:t,background2:n,background3:s}=e,r=[n,t,s].filter(i=>typeof i=="object"&&"light"in i&&"dark"in i);if(r.length===0)return[];const a=[];for(let i=0;i<r.length;i+=1){const u=r[i],d=r[(i+1)%r.length];!u||!d||(a.push({type:"gradient",from:u,to:d}),a.push({type:"solid",color:d}))}return a}function x_e(e,t,n){const s=e[t%e.length];return s?s.type==="gradient"?`linear-gradient(to bottom, ${n?`#${s.from.dark}`:`#${s.from.light}`}, ${n?`#${s.to.dark}`:`#${s.to.light}`})`:n?`#${s.color.dark}`:`#${s.color.light}`:"var(--background-color)"}function S_e(e,t){return t==="wavy-shape"?Px(e,"hero-image-wavy-tablet"):Px(e,`hero-image-${t}-tablet`)}const Bde=S({from:h()});function Vde(e){return Bde.safeParse(e).success}function E_e(e){return Vde(e)?e.from:"/"}const w_e={start:{...Be,y:300},end:{...tt,y:0}},I_e={duration:lse,ease:use},Hde={refetchOnWindowFocus:!1,retry:!1,refetchInterval:_p},zde=["memoryNarrative",qA];async function Gde(e){const{data:t,response:n}=await St(e,N$,{options:{method:"GET",headers:{"Content-Type":"application/json"}},query:{"api-version":"2"}});if(!n.ok)return null;const{id:s,sections:o,theme:r,masks:a,font:i,fontHandwriting:u}=t;return{id:s,sections:o.filter(d=>d.type!=="shareDefault"),config:{theme:r,masks:a,font:i,...u?{fontHandwriting:u}:{}}}}function Wde(){const e=an(),t=Ude(),n=e&&t,{data:s,error:o,isPending:r}=Rs({queryKey:zde,enabled:n,queryFn:()=>Gde(qA),...Hde});return{isLoading:r,error:o,data:r||!s?null:s}}const Lx="ms-copilot://chat",$de=1e3;function qde(e){if(typeof window>"u")return new URLSearchParams;const t=new URLSearchParams,n=D.getFormCode();n&&t.set("form",n);const s=WZ();return s&&t.set("ocid",s),e!=null&&e.prompt&&t.set("q",e.prompt),t}function Zde(e){return e?`${Lx}?${e.toString()}`:Lx}async function Kde(e){if(!lw())return!1;try{const t=qde(e),n=Zde(t),s=document.createElement("iframe");return s.style.display="none",s.src=n,document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},$de),!0}catch{return!1}}function Yde(){const e=on("kill-windows-protocol-launcher"),t=M(sC),n=M(hw);l.useEffect(()=>{if(e||!lw()||!n)return;(async()=>{try{await Kde({prompt:t??void 0})}catch(o){console.error(o)}})()},[n,e,t])}function Qde(){return Ade(),Pde(),Fde(),Wde(),Sde(),ude(),cde(),Yde(),null}const Jde=7*24*60*60*1e3;function Xde(){return wt(n2,fe().nullable())===!0}function eme(){return wt(Q0,fe().nullable())===!0}function tme(){return Ma().state.location.pathname==="/login"}function o0(e){return ta(e)?"AAD":"MSA"}async function nme(){const e=qe();function t(){if(!Xde()||eme())return!1;const a=wt(l4,j().nullable());return!(a&&Date.now()-a<Jde)}function n(o){var r;if(o===null){e.set(sn,null),D.setUserAccountType(void 0);return}e.set(sn,{id:((r=o.idTokenClaims)==null?void 0:r.oid)??"",tenantId:o.tenantId,provider:"microsoft",accountType:o0(o.tenantId)}),D.setUserAccountType(o0(o.tenantId))}async function s(){try{ae.instance().config().enableAuth0&&await Oo.get();const{msal:o}=await Ss.get();D.trackEvent({name:"system",data:{eventName:"copilotMsalInit",eventInfo_initTrigger:"DCL",eventInfo_timing:performance.now()-window.appStart}}),o.addEventCallback(async m=>{var f,p;uJ(m),m.eventType===((f=window.msal)==null?void 0:f.EventType.ACCOUNT_ADDED)?e.set(qr,{reason:"login"}):m.eventType===((p=window.msal)==null?void 0:p.EventType.ACCOUNT_REMOVED)&&e.set(qr,{reason:"logout"})});let r=!1;const a=da.instance();await a.initAuthAccount(),r=!!await a.getAccountFromProviders(),e.set(iv,!0);const{monitorAccountChangesAcrossTabs:u,enableAuth0:d}=ae.instance().config();if(u&&o.enableAccountStorageEvents(),!r){const m=wt(nr,h());m&&(await EQ(),await o.loginRedirect({...Wd(),prompt:"none",loginHint:m}))}if(!r&&t()){const m=performance.now();try{const f=await o.ssoSilent(cY()),p=performance.now()-m,g=o0(f.account.tenantId)==="MSA";g||Sg({message:"SSO Silent returned an AAD account",errorCode:"unexpected_account_type"}),tme()&&Sg({message:"User is on login page, skipping account update",errorCode:"sso_on_login_page"}),g?(o.setActiveAccount(f.account),n(f.account),dJ({accountUpdate:!0,accountType:"MSA",message:"Account set by MSAL silent SSO",duration:p}),We.emit("auth:account-set-by-msal-sso")):await o.logoutRedirect({account:f.account,onRedirectNavigate:()=>!1})}catch(f){Sg({message:f instanceof Error?f.message:"Unknown error",errorCode:window.msal&&f instanceof window.msal.AuthError?f.errorCode:""})}Gn(l4,j(),Date.now())}d&&u&&k2.addEventListener("message",m=>{const f=UZ.safeParse(m.data);if(!f.success)return;const{eventName:p}=f.data;p==="auth0.accountAdded"?e.set(qr,{reason:"login"}):p==="auth0.accountRemoved"&&e.set(qr,{reason:"logout"})})}catch(o){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"MsalInitError",eventInfo_details:"DCL",eventInfo_errorMessage:o instanceof Error?o.message:""}})}}return s()}function sme(){if(typeof document>"u")return;const e=()=>{setTimeout(()=>nme(),0)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}function ZA(){const e=bt({breakpoint:"sm"});return(ae.instance().config().responsiveFullWidthSidebarEnabled??!1)&&e}function ome(e){return["/login","/e/so","/e/sol","/fang","/referrals","/referrals/rules","/memory/narrative"].includes(e)}function Ps(){const e=ut();return(ae.instance().config().sidebarNavigation??!1)&&!ome(e)}function Bl(){const e=Ps(),t=H("sidebar-narrow"),n=ae.instance().config().useCompactSidebarHeader??!1;return e&&t&&!n}function Cm(){const e=Ps(),t=Bl(),n=M(Vo),s=bt({breakpoint:"md"});return e&&t&&!n&&!s}function ym({endDelay:e=200}={}){const[t,n]=l.useState(!1),s=l.useRef(null);return l.useEffect(()=>{if(typeof window>"u")return()=>{};const o=()=>{n(!0),s.current!==null&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{n(!1)},e)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o),s.current!==null&&window.clearTimeout(s.current)}},[e]),t}function Mp(e){const{className:t,text:n}=e;return c.jsx("p",{className:F("inline h-min flex-none rounded border px-0.5 uppercase text-2xs",t),children:n})}function _3({defaultValue:e,controlledValue:t,onChange:n}){const s=t!==void 0,[o,r]=l.useState(e);return l.useEffect(()=>{s&&r(t)},[t,s]),{state:s?t:o,setState:u=>{s||r(u),n==null||n(u)}}}function bm(e){var R;const{renderTrigger:t,triggerClick:n,children:s,className:o,options:r,isOpen:a,trapFocus:i,onIsOpenChange:u}=e,{state:d,setState:m}=_3({controlledValue:a,defaultValue:!1,onChange:u}),{disableFocusManager:f=!1}=r??{},p=qi(),{refs:g,x:C,y:v,strategy:b,context:y,middlewareData:E}=Rl({open:d,placement:(r==null?void 0:r.placement)??"bottom-end",onOpenChange:m,middleware:[pa((r==null?void 0:r.offset)??1),kl({fallbackAxisSideDirection:"end"}),ha(),qoe()],whileElementsMounted:_a}),x=HC(y),I=cm(y),_=J1(y,{role:(r==null?void 0:r.roleType)??"dialog"}),{getReferenceProps:T,getFloatingProps:A}=Y1([x,I,_]),k=P=>{r!=null&&r.stopReferencePropagation&&P.stopPropagation(),n==null||n(P)};return c.jsxs(c.Fragment,{children:[t==null?void 0:t({ref:g.setReference,...T({onClick:k})},d),d&&c.jsx(Nl,{root:r==null?void 0:r.rootRef,children:c.jsx(K1,{context:y,modal:i,disabled:f,returnFocus:(r==null?void 0:r.returnFocus)??!0,children:c.jsx("div",{ref:P=>{g.setFloating(P),r!=null&&r.menuRef&&(r.menuRef.current=P)},style:{position:b,top:`${v}px`,[p?"insetInlineEnd":"insetInlineStart"]:`${C}px`,visibility:(R=E.hide)!=null&&R.referenceHidden?"hidden":"visible"},...A({onClick:P=>{r!=null&&r.stopFloatingPropagation&&P.stopPropagation(),r!=null&&r.hideOnMenuClick&&m(!1)}}),className:de("flex rounded-2xl p-1.5 shadow-xl",(r==null?void 0:r.overrideZIndex)??lt.modal,o),children:s})})})]})}function rme(e={}){const{disabled:t=!1}=e,n=on("kill-shared-page"),s=l.useCallback(async o=>{const{pageParam:r}=o,{url:a,args:i}=r,u={...i,...n?{}:{"api-version":"2"}};return await St(a,V$,{query:u,analytics:{anonymousPath:"/pages"}}).then(m=>m.data)},[n]);return vm({queryKey:["pages"],queryFn:s,enabled:!t,initialPageParam:{url:"/pages",isFirstPage:!0},getNextPageParam:o=>o.next?{url:"/pages",args:{cursor:o.next}}:null})}function ame(){const e=H("pages-anonymous"),t=an();return{canCreatePageForSignedOut:e,canCreatePage:t||e}}const T3=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5.25 4H18.75C20.483 4 21.8992 5.35645 21.9949 7.06558L22 7.25V16.75C22 18.483 20.6435 19.8992 18.9344 19.9949L18.75 20H5.25C3.51697 20 2.10075 18.6435 2.00514 16.9344L2 16.75V7.25C2 5.51697 3.35645 4.10075 5.06558 4.00514L5.25 4H18.75H5.25ZM20.5 9.373L12.3493 13.6637C12.1619 13.7623 11.9431 13.7764 11.7468 13.706L11.6507 13.6637L3.5 9.374V16.75C3.5 17.6682 4.20711 18.4212 5.10647 18.4942L5.25 18.5H18.75C19.6682 18.5 20.4212 17.7929 20.4942 16.8935L20.5 16.75V9.373ZM18.75 5.5H5.25C4.33183 5.5 3.57881 6.20711 3.5058 7.10647L3.5 7.25V7.679L12 12.1525L20.5 7.678V7.25C20.5 6.33183 19.7929 5.57881 18.8935 5.5058L18.75 5.5Z"})),__e=Object.freeze(Object.defineProperty({__proto__:null,default:T3},Symbol.toStringTag,{value:"Module"})),ime=e=>l.createElement("svg",{viewBox:"0 0 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M27.9994 14.0514C27.9994 6.29111 21.7315 0 13.9997 0C6.26795 0 0 6.29111 0 14.0514C0 20.641 4.52023 26.1705 10.6179 27.6892V18.3455H7.73121V14.0514H10.6179V12.2011C10.6179 7.41859 12.7745 5.20184 17.4526 5.20184C18.3396 5.20184 19.8701 5.37664 20.4962 5.55088V9.44312C20.1658 9.40828 19.5918 9.39085 18.8789 9.39085C16.5835 9.39085 15.6965 10.2637 15.6965 12.5328V14.0514H20.2694L19.4837 18.3455H15.6965V28C22.6286 27.1597 28 21.2356 28 14.0514H27.9994Z"})),cme=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("g",{id:"Linkedin"},l.createElement("path",{id:"Shape",d:"M23.6999 2.75909C23.6999 1.39872 22.5971 0.295929 21.2368 0.295929H2.76308C1.40272 0.295929 0.299927 1.39872 0.299927 2.75909V21.2328C0.299927 22.5931 1.40272 23.6959 2.76308 23.6959H21.2368C22.5971 23.6959 23.6999 22.5931 23.6999 21.2328V2.75909ZM3.63848 9.12156H7.24935V20.6943H3.63848V9.12156ZM16.4313 8.83425C19.8921 8.83425 20.6797 10.9844 20.753 13.861L20.7589 14.3469V20.6942H17.1519L17.1517 14.9161C17.1477 13.5985 17.0603 11.9984 15.278 11.9984C13.4002 11.9984 13.1135 13.4611 13.1135 14.971V20.6942H9.51161V9.12143H12.9689V10.7028H13.0188L13.1052 10.5509C13.6314 9.68925 14.7739 8.83425 16.4313 8.83425ZM3.35125 5.45367C3.35125 4.30239 4.28565 3.36809 5.44404 3.36809C6.59732 3.36809 7.53556 4.30239 7.53556 5.45367C7.53556 6.60623 6.59732 7.54053 5.44404 7.54053C4.28565 7.54053 3.35125 6.60623 3.35125 5.45367Z",fill:"currentColor"}))),lme=e=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",...e},l.createElement("g",{clipPath:"url(#clip0_9013_4638)"},l.createElement("path",{d:"M14 0C6.26828 0 0 6.26828 0 14C0 17.8664 1.56734 21.3664 4.10047 23.8995L1.43391 26.5661C0.904531 27.0955 1.27969 28 2.02781 28H14C21.7317 28 28 21.7317 28 14C28 6.26828 21.7317 0 14 0Z",className:"fill-foreground-650"}),l.createElement("path",{d:"M16.8481 6.60187C17.091 7.63109 18.0152 8.39781 19.1188 8.39781C20.4072 8.39781 21.4517 7.35328 21.4517 6.06484C21.4517 4.7764 20.4072 3.73187 19.1188 3.73187C17.9922 3.73187 17.0527 4.53031 16.8339 5.59234C14.9472 5.79469 13.4739 7.39484 13.4739 9.33406C13.4739 9.33843 13.4739 9.34172 13.4739 9.34609C11.4221 9.4325 9.54846 10.0166 8.06096 10.9386C7.50861 10.5109 6.81518 10.2561 6.06268 10.2561C4.25689 10.2561 2.79346 11.7195 2.79346 13.5253C2.79346 14.8356 3.56346 15.9644 4.6758 16.4861C4.78408 20.2814 8.91955 23.3341 14.0066 23.3341C19.0936 23.3341 23.2346 20.2781 23.3374 16.4795C24.441 15.9545 25.2044 14.8291 25.2044 13.5264C25.2044 11.7206 23.741 10.2572 21.9352 10.2572C21.186 10.2572 20.4958 10.5098 19.9446 10.9342C18.4439 10.0056 16.5496 9.42156 14.4769 9.3439C14.4769 9.34062 14.4769 9.33844 14.4769 9.33515C14.4769 7.94609 15.5094 6.79328 16.8481 6.60406V6.60187ZM7.92971 15.6002C7.98439 14.4145 8.77189 13.5045 9.68736 13.5045C10.6028 13.5045 11.3028 14.4659 11.2481 15.6516C11.1935 16.8372 10.5099 17.2681 9.5933 17.2681C8.67674 17.2681 7.87502 16.7858 7.92971 15.6002ZM18.3269 13.5045C19.2435 13.5045 20.031 14.4145 20.0846 15.6002C20.1392 16.7858 19.3364 17.2681 18.421 17.2681C17.5055 17.2681 16.8208 16.8383 16.7661 15.6516C16.7114 14.4659 17.4103 13.5045 18.3269 13.5045ZM17.2375 18.3433C17.4092 18.3608 17.5186 18.5391 17.4519 18.6987C16.8886 20.0452 15.5586 20.9912 14.0066 20.9912C12.4546 20.9912 11.1256 20.0452 10.5613 18.6987C10.4946 18.5391 10.6039 18.3608 10.7756 18.3433C11.7819 18.2416 12.8702 18.1858 14.0066 18.1858C15.143 18.1858 16.2302 18.2416 17.2375 18.3433Z",style:{fill:"rgb(var(--color-foreground-100))"}})),l.createElement("defs",null,l.createElement("clipPath",{id:"clip0_9013_4638"},l.createElement("rect",{width:28,height:28,fill:"white"})))),ume=e=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",fill:"currentColor",...e},l.createElement("g",null,l.createElement("path",{d:"M16.6638 11.85L27.0874 0H24.6174L15.5665 10.2892L8.33765 0H0L10.9315 15.5591L0 27.9856H2.47021L12.0281 17.1199L19.6623 27.9856H28L16.6632 11.85H16.6638ZM13.2805 15.6962L12.1729 14.1468L3.36026 1.81862H7.15435L14.2663 11.7679L15.3739 13.3172L24.6185 26.2497H20.8244L13.2805 15.6967V15.6962Z",fill:"currentColor"}))),dme=e=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",fill:"currentColor",...e},l.createElement("path",{d:"M23.9202 4.06584C21.2885 1.44525 17.7882 0.00132957 14.0588 0C6.37397 0 0.119658 6.21909 0.116984 13.8635C0.115647 16.3072 0.758058 18.6925 1.97804 20.7946L0 27.9796L7.39072 26.0517C9.4269 27.1566 11.7198 27.7383 14.0528 27.739H14.0588C21.7423 27.739 27.9974 21.5192 28 13.8748C28.0013 10.17 26.5527 6.6871 23.9202 4.0665V4.06584ZM14.0588 25.3975H14.0541C11.9751 25.3969 9.93564 24.8411 8.15617 23.7914L7.73299 23.5415L3.34709 24.6856L4.5176 20.4329L4.24218 19.9968C3.08236 18.162 2.46937 16.0413 2.4707 13.8642C2.47338 7.51078 7.67149 2.34138 14.0635 2.34138C17.1586 2.34271 20.0678 3.54266 22.2557 5.72117C24.4437 7.89902 25.6476 10.7949 25.6463 13.8735C25.6436 20.2275 20.4455 25.3969 14.0588 25.3969V25.3975ZM20.4147 16.7673C20.0664 16.5938 18.3538 15.7561 18.0343 15.6405C17.7147 15.5248 17.4828 15.467 17.2508 15.814C17.0189 16.161 16.3511 16.9415 16.1478 17.1721C15.9446 17.4035 15.7414 17.4321 15.3931 17.2585C15.0449 17.085 13.9225 16.7194 12.5915 15.5394C11.5561 14.6206 10.8568 13.4866 10.6536 13.1395C10.4504 12.7925 10.6322 12.605 10.806 12.4329C10.9624 12.2773 11.1543 12.028 11.3287 11.8259C11.5033 11.6238 11.5607 11.4789 11.677 11.2482C11.7934 11.0168 11.7352 10.8148 11.6483 10.6412C11.5614 10.4677 10.8649 8.76253 10.574 8.06918C10.2912 7.39377 10.0039 7.48551 9.79059 7.47421C9.58736 7.46424 9.35542 7.46225 9.12279 7.46225C8.89016 7.46225 8.51309 7.54867 8.19358 7.89569C7.87407 8.24267 6.97426 9.08097 6.97426 10.7855C6.97426 12.49 8.22236 14.1381 8.39681 14.3694C8.57127 14.6008 10.8534 18.0995 14.3476 19.6006C15.1786 19.9576 15.8276 20.171 16.3336 20.3306C17.168 20.5945 17.9273 20.5573 18.5276 20.4682C19.1968 20.3685 20.5886 19.6299 20.8787 18.8208C21.1688 18.0117 21.1688 17.3177 21.0819 17.1734C20.995 17.0292 20.7624 16.9421 20.4141 16.7686L20.4147 16.7673Z"})),d5="../../assets/lottie";function mme(e){return e.startsWith(`${d5}/`)?e.slice(d5.length+1):e}function KA(){const e=Object.assign({"../../assets/lottie/chain-of-thought-dark.json":()=>V(()=>import("./chain-of-thought-dark-BPjK_j-x.js"),[]).then(n=>n.default),"../../assets/lottie/chain-of-thought-light.json":()=>V(()=>import("./chain-of-thought-light-D5erdeOr.js"),[]).then(n=>n.default),"../../assets/lottie/character-thinking-cloud-animation.json":()=>V(()=>import("./character-thinking-cloud-animation-Bu4j70Rh.js"),[]).then(n=>n.default),"../../assets/lottie/image-gen-dark.json":()=>V(()=>import("./image-gen-dark-DTw6tnD0.js"),[]).then(n=>n.default),"../../assets/lottie/image-gen-light.json":()=>V(()=>import("./image-gen-light-C_x12-59.js"),[]).then(n=>n.default),"../../assets/lottie/loader-gradient.json":()=>V(()=>import("./loader-gradient-7hu2fPzp.js"),[]).then(n=>n.default),"../../assets/lottie/loader-image-generating.json":()=>V(()=>import("./loader-image-generating-BZL4nXqF.js"),[]).then(n=>n.default),"../../assets/lottie/loader-reasoning-dark.json":()=>V(()=>import("./loader-reasoning-dark-Dh23ceSo.js"),[]).then(n=>n.default),"../../assets/lottie/loader-reasoning-light.json":()=>V(()=>import("./loader-reasoning-light-BmcsjTTD.js"),[]).then(n=>n.default),"../../assets/lottie/loader-spinner-dark.json":()=>V(()=>import("./loader-spinner-dark-D_zqJrW7.js"),[]).then(n=>n.default),"../../assets/lottie/loader-spinner-light.json":()=>V(()=>import("./loader-spinner-light-CUlAhBGz.js"),[]).then(n=>n.default),"../../assets/lottie/loader-spinner-white.json":()=>V(()=>import("./loader-spinner-white-B2mzTARL.js"),[]).then(n=>n.default),"../../assets/lottie/pages-welcome-dark.json":()=>V(()=>import("./pages-welcome-dark-BxeF7F8z.js"),[]).then(n=>n.default),"../../assets/lottie/pages-welcome-light.json":()=>V(()=>import("./pages-welcome-light-BFwITHsU.js"),[]).then(n=>n.default),"../../assets/lottie/voicemail-dark.json":()=>V(()=>import("./voicemail-dark-Bec3gjKS.js"),[]).then(n=>n.default),"../../assets/lottie/voicemail-light.json":()=>V(()=>import("./voicemail-light-DmBzGtqk.js"),[]).then(n=>n.default)});function t(n){return e[n]?n:`${d5}/${n}`}return{load:n=>{const s=t(n),o=e[s];return o?o():Promise.reject(new Error(`Lottie animation not found: ${n} (resolved: ${s})`))},exists:n=>{const s=t(n);return!!e[s]},getNames:()=>Object.keys(e).map(mme),getFullPath:n=>t(n)}}const fme=l.lazy(()=>V(()=>import("./index.es-DxI5XnPj.js"),__vite__mapDeps([5,1]))),pme=KA();function it(e){const{type:t,className:n,rendererSettings:s,colorTheme:o}=e,r=M(Wo),a=o??r,[i,u]=l.useState(null),d=l.useMemo(()=>{switch(t){case"gradient":return"loader-gradient.json";case"reasoning":return a==="dark"?"loader-reasoning-dark.json":"loader-reasoning-light.json";case"chainOfThought":return a==="dark"?"chain-of-thought-dark.json":"chain-of-thought-light.json";case"spinnerWhite":return"loader-spinner-white.json";case"imageGen":return a==="dark"?"image-gen-dark.json":"image-gen-light.json";case"spinnerThemed":default:return a==="dark"?"loader-spinner-dark.json":"loader-spinner-light.json"}},[t,a]);return l.useEffect(()=>{pme.load(d).then(u).catch(()=>u(null))},[d]),i?c.jsx(l.Suspense,{fallback:c.jsx("div",{}),children:c.jsx(fme,{animationData:i,loop:!0,className:n,rendererSettings:s})}):c.jsx("div",{})}const A3=Object.freeze(Object.defineProperty({__proto__:null,default:it},Symbol.toStringTag,{value:"Module"})),T_e=["facebook","twitter","whatsapp","linkedin","reddit","email"],hme={facebook:"senderToFacebook",twitter:"senderToX",linkedin:"senderToLinkedIn",whatsapp:"senderToWhatsApp",reddit:"senderToReddit",email:"senderToEmail"},YA={facebook:{displayName:"Facebook",linkGenerator:e=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,icon:c.jsx(ime,{})},twitter:{displayName:"X",linkGenerator:(e,t)=>`https://twitter.com/intent/tweet?url=${encodeURIComponent(e)}&text=${encodeURIComponent(t)}`,icon:c.jsx(ume,{})},whatsapp:{displayName:"WhatsApp",linkGenerator:(e,t)=>`https://api.whatsapp.com/send?text=${encodeURIComponent(`${t} ${e}`)}`,icon:c.jsx(dme,{})},linkedin:{displayName:"LinkedIn",linkGenerator:(e,t)=>`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(e)}&text=${encodeURIComponent(t)}`,icon:c.jsx(cme,{})},reddit:{displayName:"Reddit",linkGenerator:(e,t)=>`https://www.reddit.com/submit?url=${encodeURIComponent(e)}&title=${encodeURIComponent(t)}`,icon:c.jsx(lme,{})},email:{displayName:"Email",linkGenerator:(e,t)=>`mailto:?subject=${encodeURIComponent(t)}&body=${encodeURIComponent(e)}`,icon:c.jsx(T3,{})}};function A_e(e){const{socialMedia:t,className:n,loading:s,disabled:o,onClickSocialMedia:r,includeTitle:a,iconClassName:i="size-6"}=e,u=YA[t],d=u.displayNameKey?z(u.displayNameKey):u.displayName,m=c.jsx("div",{className:i,children:u.icon}),f="56-xl",p="subtle-dimmed-inverted",g=F("flex-1 py-2",n);return c.jsxs(re,{size:f,color:p,title:d,className:g,onClick:C=>r(t,C),disabled:o,children:[s?c.jsx(it,{className:"size-8"}):m,a&&c.jsx("span",{className:"font-medium text-foreground-650 text-2xs",children:d})]})}function k_e(e,t,n,s){if(!t)return;let o;if(e==="email"){const r=s?`${s}

${t}`:t;o=`mailto:?subject=${encodeURIComponent(n)}&body=${encodeURIComponent(r)}`}else o=YA[e].linkGenerator(t,s??n);Eo(o)}function QA(e){const{scenario:t,pageName:n,sectionName:s,customData:o}=e;Ce({source:"shareMenu",scenario:t,pageName:n,sectionName:s,customData:o})}function M_e(e){const{conversationId:t,messageId:n}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"sharePreview",eventInfo_impressionElement:"shareBlockedBanner",eventInfo_conversationId:t,eventInfo_messageId:n}})}function N_e(e){const{conversationId:t,messageId:n,uploadedFileType:s}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"sharePreview",eventInfo_conversationId:t,eventInfo_messageId:n,eventInfo_uploadFileType:s}})}function R_e(e){const{scenario:t,uploadedFileType:n,conversationId:s,customData:o,clickDestination:r="copyLink"}=e,a={eventName:"copilotClick",eventInfo_clickSource:"shareButton",eventInfo_clickScenario:t,eventInfo_uploadFileType:n,eventInfo_clickDestination:r,eventInfo_customData:o,eventInfo_conversationId:s};D.trackEvent({name:"interaction",data:a})}function P_e(e){const{scenario:t,socialMedia:n,customData:s,conversationId:o}=e,r={eventName:"copilotClick",eventInfo_clickSource:"shareButton",eventInfo_clickDestination:hme[n],eventInfo_clickScenario:t,eventInfo_customData:s,eventInfo_conversationId:o};D.trackEvent({name:"interaction",data:r})}function gme(e){const{shareId:t,sharedLevel:n,sharedDataType:s,impressionScenario:o}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"receivePreview",eventInfo_impressionScenario:o,eventInfo_customData:JSON.stringify({eventInfo_shareId:t,sharedLevel:n,sharedDataType:s})}})}function L_e(){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"talkToCopilot"}})}function O_e(e){const{cardType:t,messageId:n,conversationId:s,scenario:o}=e;$t({source:"shareMenu",scenario:o,messageId:n,conversationId:s,cardType:t})}function vme(e){const{conversationId:t,messageId:n,errorName:s,errorMessage:o,errorStack:r}=e;D.trackEvent({name:"system",data:{eventName:"shareMessagesFailed",eventInfo_conversationId:t,eventInfo_messageId:n??"",eventInfo_error:s,eventInfo_errorMessage:o,eventInfo_errorStack:r}})}function Cme(){Ce({source:"continueClicked"})}function yme(e){const{shareId:t,error:n,conversationId:s}=e;Yt({feature:"share",scenario:"continueClickFailed",errorType:n==null?void 0:n.name,errorMessage:n==null?void 0:n.message,customData:JSON.stringify({eventInfo_shareId:t,eventInfo_conversationId:s})})}function D_e(){Ce({source:"sharedLinkManagement"})}function bme(e){Ce({source:"delete",scenario:"deleteSingleSharedLink",customData:JSON.stringify({eventInfo_shareId:e})})}function xme(e){const{details:t,errorMessage:n}=e;D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:t,eventInfo_errorMessage:n}})}function j_e(){Ce({pageName:"chatPage",sectionName:"chatResponse",source:"addToPage"})}function F_e(e){Ce({pageName:"addToPage",source:e})}function Sme(){Ce({sectionName:"actionMenu",source:"createNewPage"})}function Eme(e){Ce({pageName:e,source:"openPage"})}function U_e(){Ce({pageName:"pages",sectionName:"editBar",source:"askCopilot"})}function B_e(e){const{action:t,pageId:n,conversationId:s,messageId:o,suggestionId:r}=e;Ce({pageName:"pages",sectionName:"suggestions",source:t==="accept"?"applyRevision":"reject",conversationId:s,customData:JSON.stringify({eventInfo_pageId:n,eventInfo_messageId:o,eventInfo_suggestionId:r,eventInfo_sourcesCount:pe(So)})})}function V_e(e){const{reaction:t,pageId:n,suggestionId:s,messageId:o,startIndex:r,endIndex:a,oldText:i,replacement:u,conversationId:d}=e;Ce({pageName:"pages",sectionName:"suggestions",source:"pagesFeedback",scenario:t,conversationId:d,customData:JSON.stringify({eventInfo_pageId:n,eventInfo_reaction:t,eventInfo_suggestionId:s,eventInfo_messageId:o,eventInfo_startIndex:r,eventInfo_endIndex:a,eventInfo_oldText:i,eventInfo_replacement:u})})}function wme(e){Yt({feature:"pages",...e})}const H_e=["createPage","addToExistingPage","openPageOnChat","openPageOnHistory","openPageOnLibrary","copyPage"];function z_e(e,t,n){po({feature:"pages",scenario:e,duration:Math.round(t),customData:JSON.stringify({eventInfo_pageId:n})})}function G_e(){Ce({pageName:"pages",source:"hyperlinkInPages"})}function W_e({sectionName:e,pageId:t}){Ce({sectionName:e,source:"deletePage",customData:JSON.stringify({eventInfo_pageId:t})})}function $_e({sectionName:e,pageId:t}){Ce({sectionName:e,source:"renamePage",customData:JSON.stringify({eventInfo_pageId:t})})}function q_e(e){D.trackEvent({name:"interaction",data:{eventName:"copilotPagesEdited",eventInfo_customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})}})}function Z_e(e){const{pageName:t,sectionName:n,pageId:s}=e;Ce({pageName:t,sectionName:n,source:"pagesSharing",customData:JSON.stringify({eventInfo_pageId:s})})}function K_e(e){const{pageName:t,sectionName:n,pageId:s,source:o}=e;Ce({pageName:t,sectionName:n,source:o,customData:JSON.stringify({eventInfo_pageId:s})})}function Y_e(e){const{sectionName:t,pageId:n}=e;Ce({sectionName:t,source:"removePagesSharing",customData:JSON.stringify({eventInfo_pageId:n})})}const Q_e=["pagesHistory","direct"];function J_e(e,t){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pagesSharing",eventInfo_impressionScenario:e}}),gme({shareId:t,sharedLevel:"singleAr",sharedDataType:"page",impressionScenario:"pages"})}const X_e=["responsePreviewedPage","chatCreateNewPage","chatAddToExistingPage","chatDirectToNewPage","pagesHistory","actionMenuCreateNewPage","libraryMenuCreateNewPage","makeACopyViewerPage","makeACopyOwnerPage","makeACopyViewOnly","makeACopyPagesHistory","libraryPageItem"];function eTe(e,t){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pages",eventInfo_impressionScenario:t,eventInfo_customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})}})}function tTe(e){const{pageName:t,sectionName:n,pageId:s}=e;Ce({pageName:t,sectionName:n,source:"makePagesCopy",customData:JSON.stringify({eventInfo_pageId:s})})}function nTe(){Ce({pageName:"pages",source:"printPage"})}function Ime(e){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"threePages",eventInfo_impressionScenario:e}})}function sTe(e,t){Ce({pageName:"pages",sectionName:"titleBar",source:t,customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function oTe(e){cn({page:"sourcesManagement",scenario:"showSources",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function rTe(e,t){Ce({pageName:"pages",sectionName:"sourcesManagement",source:t,customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function JA({pageId:e,uploadStatus:t,format:n}){cn({scenario:"uploadPageSourceFile",page:"sourcesManagement",element:"sourcesFileItem",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So),eventInfo_sourcesFileFormat:n,eventInfo_uploadStatus:t})})}function aTe(e,t){po({feature:"pages",scenario:"uploadSourceFile",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})}),JA({pageId:e,uploadStatus:"Success",format:t})}function iTe(e){Ce({pageName:"pages",sectionName:"sourcesManagement",source:"deleteFile",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function cTe(e){Ce({pageName:"pages",sectionName:"sourcesFileDeleteModal",source:"confirmDeleteFile",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function lTe({pageId:e,isSaving:t,errorMessage:n,exception:s,fileExtension:o}){wme({scenario:"uploadSourceFile",errorType:t?"SavePageMappingFailed":"UploadSourceFileFailed",errorMessage:n,exception:s,customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})}),JA({pageId:e,uploadStatus:t?"SavePageMappingFailed":"UploadSourceFileFailed",format:o})}function _me(){const e=xo(),t=Id(),n=se(Vo);return l.useCallback(async({pageId:s,pageType:o,closeSidebar:r,sourcePage:a,impressionScenario:i,featureLatencyInfo:u})=>{if(Eme(a),r&&n(!1),o==="sharedPage"){await e({to:"/shares/pages/$shareId",params:{shareId:s},from:t.state.location.pathname,state:{...u,impressionScenario:i}});return}await e({to:"/pages/$pageId",params:{pageId:s},from:t.state.location.pathname,state:{...u,impressionScenario:i}})},[e,t.state.location.pathname,n])}const Tme=qe();function Br(e){e&&Tme.set(xn,{title:e.title,subtitle:e.message,dismissable:!0,dismissAfter:10*1e3})}const Ox="/pages";async function Ame(e,t){const n=await Nn({path:"/pages",args:{body:{title:e,content:t},analytics:{anonymousPath:Ox}}}),s=await n.json(),o=z$.safeParse(s);if(!n.ok&&o.success)throw new Error(o.data.errorCode);try{return jE.parse(s)}catch(r){throw r instanceof zf&&sd(r,Ox,!1),r}}function kme(){const{canCreatePage:e,canCreatePageForSignedOut:t}=ame(),{t:n}=Y(),[s,o]=l.useState(!1),r=Fl(),a=se(bo),i=se(wa),u=_me();return{creatingPage:s,createPage:e?async({content:m,sourcePage:f,impressionScenario:p,featureLatencyInfo:g})=>{o(!0);try{const{id:C}=await Ame("",m);await u({pageId:C,closeSidebar:!0,sourcePage:f,impressionScenario:p,featureLatencyInfo:g})}catch(C){C instanceof Error&&C.message==="page-count-exceeded"&&t?(Ime(f),a(r?"prompt-3p-sign-in":"prompt-sign-in"),i({isOpen:!0,scenario:"sidebarActionCreatePage",reason:"pageLimitReached"})):Br({title:n("common.somethingWrong"),message:n("pages.errorCreatingMessage")})}finally{o(!1)}}:null}}function XA(e){const{callback:t,signInScenario:n,onShowSignIn:s,signInReason:o}=e,r=an(),a=se(wa);return(...i)=>{if(!r){a({isOpen:!0,scenario:n,reason:o}),s&&typeof s=="function"&&s();return}t(...i)}}function Mme(){return qs({to:"/",from:Ma().state.location.pathname})}const r0=N(!1),ek=N(!1),m5=N(null),Dx=N(null),Nme=N(null),Rme=N(!0),Pme=N(-1),uTe=N(!1),dTe=tv("muteCoachmarkVisible",!0),Lme=tv("studyVoiceCoachmarkNumberOfTimesShown",0);function Aa(){const{createConversation:e}=mm();return l.useCallback(async()=>{tk(),await e({shouldNavigateToChat:!1}),await Mme()},[e])}function tk(){at(bo,null),at(tm,null),at(m5,null)}function Ome(){const{t:e}=Y(),t=Aa(),{createPage:n}=kme(),s=an(),o=H("pages-anonymous"),{refetch:r}=rme({disabled:!s&&!o}),a=async()=>{Sme(),await(n==null?void 0:n({content:"",sourcePage:"createNewPage",impressionScenario:"actionMenuCreateNewPage",featureLatencyInfo:{scenario:"createPage",startTimestamp:Date.now()}})),await r()},i=XA({callback:a,signInScenario:"sidebarActionCreatePage",signInReason:"createPage"}),u=async()=>{!s&&o?a():i()},d=()=>{setTimeout(()=>{u()},0)};return c.jsxs("div",{className:"flex flex-col",children:[c.jsx(re,{color:"subtle-dimmed-inverted",size:"40-base",variant:"rect",alignment:"start",title:e("sidebar.actions.newChat"),onClick:()=>{t()},children:e("sidebar.actions.newChat")}),c.jsx(re,{color:"subtle-dimmed-inverted",size:"40-base",alignment:"start",variant:"rect",title:e("sidebar.actions.newPage"),testId:"create-new-page-button",onClick:d,children:e("sidebar.actions.newPage")})]})}function nk(e){const{buttonSize:t}=e,{t:n}=Y(),s=Dd();return c.jsx(bm,{options:{placement:"bottom-end",hideOnMenuClick:!0,roleType:"menu"},className:Ys,renderTrigger:({onClick:o,...r},a)=>c.jsx(re,{...r,testId:"sidebar-action-menu-button",title:n("sidebar.actions.menuTitle"),tooltip:{placement:"bottom",disabled:a},color:"subtle-dimmed-inverted",variant:"rect",size:t,className:"min-w-6 rounded-sm rounded-e-xl px-0",onClick:i=>{s&&(Ce({source:"sidebarActionsMenu",customData:JSON.stringify({buttonSize:t})}),o(i))},id:"sidebar-new-action-menu-button",children:c.jsx(ds,{className:"size-3.5 rotate-90"})}),children:c.jsx(Ome,{})})}const sk=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M10.7327 19.7905C11.0326 20.0762 11.5074 20.0646 11.7931 19.7647C12.0788 19.4648 12.0672 18.99 11.7673 18.7043L5.51587 12.7497L20.25 12.7497C20.6642 12.7497 21 12.4139 21 11.9997C21 11.5855 20.6642 11.2497 20.25 11.2497L5.51577 11.2497L11.7673 5.29502C12.0672 5.00933 12.0787 4.5346 11.7931 4.23467C11.5074 3.93475 11.0326 3.9232 10.7327 4.20889L3.31379 11.2756C3.14486 11.4365 3.04491 11.6417 3.01393 11.8551C3.00479 11.9019 3 11.9503 3 11.9997C3 12.0493 3.00481 12.0977 3.01398 12.1446C3.04502 12.3579 3.14496 12.563 3.31379 12.7238L10.7327 19.7905Z"})),mTe=Object.freeze(Object.defineProperty({__proto__:null,default:sk},Symbol.toStringTag,{value:"Module"})),xm=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M21.7803 3.28033C22.0732 2.98744 22.0732 2.51256 21.7803 2.21967C21.4874 1.92678 21.0125 1.92678 20.7196 2.21967L10.7197 12.2197L10.25 13.75L11.7803 13.2803L21.7803 3.28033ZM6.25 3C4.45507 3 3 4.45508 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C19.5449 21 21 19.5449 21 17.75V9.75C21 9.33579 20.6642 9 20.25 9C19.8358 9 19.5 9.33579 19.5 9.75V17.75C19.5 18.7165 18.7165 19.5 17.75 19.5H6.25C5.2835 19.5 4.5 18.7165 4.5 17.75V6.25C4.5 5.2835 5.2835 4.5 6.25 4.5H14.25C14.6642 4.5 15 4.16421 15 3.75C15 3.33579 14.6642 3 14.25 3H6.25Z"})),fTe=Object.freeze(Object.defineProperty({__proto__:null,default:xm},Symbol.toStringTag,{value:"Module"})),ph=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M3.75 8.5C3.75 8.08579 4.08579 7.75 4.5 7.75H5.75C6.16421 7.75 6.5 8.08579 6.5 8.5C6.5 8.91421 6.16421 9.25 5.75 9.25H4.5C4.08579 9.25 3.75 8.91421 3.75 8.5ZM3.75 12C3.75 11.5858 4.08579 11.25 4.5 11.25H5.75C6.16421 11.25 6.5 11.5858 6.5 12C6.5 12.4142 6.16421 12.75 5.75 12.75H4.5C4.08579 12.75 3.75 12.4142 3.75 12ZM3.75 15.5C3.75 15.0858 4.08579 14.75 4.5 14.75H5.75C6.16421 14.75 6.5 15.0858 6.5 15.5C6.5 15.9142 6.16421 16.25 5.75 16.25H4.5C4.08579 16.25 3.75 15.9142 3.75 15.5ZM4.25 3C2.45507 3 1 4.45507 1 6.25V17.75C1 19.5449 2.45508 21 4.25 21H19.75C21.5449 21 23 19.5449 23 17.75V6.25C23 4.45507 21.5449 3 19.75 3H4.25ZM19.75 19.5H9V4.5H19.75C20.7165 4.5 21.5 5.2835 21.5 6.25V17.75C21.5 18.7165 20.7165 19.5 19.75 19.5ZM4.25 4.5H7.5V19.5H4.25C3.2835 19.5 2.5 18.7165 2.5 17.75V6.25C2.5 5.2835 3.2835 4.5 4.25 4.5Z"})),pTe=Object.freeze(Object.defineProperty({__proto__:null,default:ph},Symbol.toStringTag,{value:"Module"})),Dme=N(!0),jme=N(!0),Fme=N(!1),Ume=N(!1),ok=N(!1);function k3(){const e=M(v1),t=M(cl);return e&&!!t}function hh(){const e=ut();return e.startsWith("/podcasts")||e.startsWith("/shares/podcasts")}function wr(e,t={},n){const{initialize:s=!1}=t,o=l.useRef(null);return l.useEffect(()=>{const r=n??o.current,a=new ResizeObserver(([i])=>{i&&e(i.contentRect)});return r&&(a.observe(r),s&&e(r.getBoundingClientRect())),()=>a.disconnect()},[e,s,n]),o}function Bme(e,t){const n=ae.instance().config().sidebarOverrides;return(n==null?void 0:n[e])??t}const Vme=l.lazy(()=>V(()=>import("./llm-selector-DpqJKxHh.js"),__vite__mapDeps([6,1])));function Hme(e){const{isSidebarOpen:t,toggle:n}=e,s=Aa(),[o]=Fe(Wn),r=M(As),{t:a}=Y(),i=ut(),u=hh(),d=o==="chat-only"||t,m=k3(),f=M(ok),p=ym(),g=!t&&(i.startsWith("/daily")||i.endsWith("/talk")||u||i.startsWith("/labs/experiments/3d-generations")||i.startsWith("/shares/3d-generations")||C3(i)),C=l.useRef(null),v=wr(()=>{const b=document.getElementById("app");if(b){const y=!t&&C.current?C.current.clientWidth:0;b.style.setProperty("--header-controls-inline-start-width",`${y}px`)}});return c.jsx("div",{className:de("pointer-events-none absolute start-0 top-0 w-full p-1 pe-3.5",lt.sidebar),ref:v,children:c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"absolute flex min-w-full items-center justify-between gap-1 p-1",children:[c.jsx(pt,{children:g&&c.jsx(ge.div,{className:de("pointer-events-auto absolute inset-0 rounded-2xl border border-stroke-100 shadow-md dark:border-stroke-300",Ys),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Be,animate:tt,exit:Be},transition:p?{duration:0}:mn})}),c.jsxs("div",{className:"pointer-events-auto flex shrink-0 items-center gap-1","data-theme":r&&!t?r.theme:void 0,ref:C,children:[(f||d&&t)&&c.jsxs(c.Fragment,{children:[c.jsx(re,{title:a(t?"sidebar.close":"sidebar.open"),className:"after:absolute after:inset-0 after:rounded-lg hover:after:bg-black/3 dark:hover:after:bg-white/5",color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:()=>{Ce({source:"sidebarToggle",pageName:i,customData:JSON.stringify({isOpen:t})}),n()},testId:"sidebar-toggle-button",children:t?c.jsx(sk,{className:"size-4"}):c.jsx(ph,{className:"size-5"})}),m&&!f&&c.jsx(Mp,{text:a("settings.copilotBeta.beta"),className:"relative me-2 ms-1 uppercase"})]}),d&&(f||!t)&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center rounded-lg hover:bg-black/3 dark:hover:bg-white/5",children:[c.jsx(re,{title:a("composer.startNewChat"),color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:async()=>{Ce({source:"sidebarNewConversation",destination:"/chat",pageName:i,customData:JSON.stringify({isOpen:t})}),await s()},children:c.jsx(xm,{className:"size-5"})}),c.jsx(nk,{buttonSize:"28-xxs"})]}),Bme("showLLMSelector",!1)&&c.jsx(Vme,{}),m&&c.jsx(Mp,{text:a("settings.copilotBeta.beta"),className:"relative me-2 ms-1 uppercase"})]})]})]})})})}const zme="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/meshopt_decoder-3Kt66jYv.js",Cn=class Cn{static async loadLibraries(){const[t,,n]=await Promise.all([V(()=>import("./index-BIm7PB5Z.js").then(s=>s.c),__vite__mapDeps([7,8,9,1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251])),V(()=>import("./index-CXK_O86P.js").then(s=>s.b),__vite__mapDeps([252,253,1,8,9,23,11,12,29,254,255,124,20,30,47,256,149,257,196,69,26,21,22,258,150,259,208,260,261,262,263,207,28,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,14,15,16,286,287,288,289,71,72,290,291,292,293,294])),V(()=>import("./math.scalar.functions-B0475LkX.js").then(s=>s.m),[])]);t.MeshoptCompression.Configuration={decoder:{url:zme}},t.Logger.LogLevels=t.Logger.NoneLogLevel,Cn.Core=t,Cn.Math=n,Cn.isInitialized=!0}static async loadViewerLibraries(){const t=await V(()=>import("./index-DQy82BnJ.js"),__vite__mapDeps([295,1,19,8,9,13,67,296,254]));Cn.Viewer=t}static async loadDebugLibraries(){await Cn.loadLibraries(),await V(()=>import("./babylon.inspector.bundle-DHNd3Zau.js").then(t=>t.b),__vite__mapDeps([297,1,298,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,299,296,253,254,255,252,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,300,301,302]))}static isLoaded(){return Cn.isInitialized}static getCore(){return Cn.throwIfNotInitialized("Core"),Cn.Core}static getMath(){return Cn.throwIfNotInitialized("Core"),Cn.Math}static getViewer(){return Cn.throwIfNotInitialized("Viewer"),Cn.Viewer}static throwIfNotInitialized(t){if(!Cn.isInitialized)throw new Error(`Libraries ${t} are not loaded yet. Call loadLibraries first.`)}};O(Cn,"Core"),O(Cn,"Math"),O(Cn,"Viewer"),O(Cn,"isInitialized",!1);let Zs=Cn;function hTe(e){const t=e.split(/[\\/]/),n=t.pop();return{basePath:`${t.join("/")}/`,fileName:n??""}}function gTe(e,t){D.trackEvent({name:"interaction",data:{eventName:"characterAnimation",eventInfo_characterAnimationState:e,eventInfo_characterId:t}})}function vTe(e,t){const{Texture:n}=Zs.getCore();return new Promise((s,o)=>{const r=new n(e,t,!1,!1,1,()=>{s(r)},o)})}function CTe(e){const{Vector3:t}=Zs.getCore();return new t(e[0],e[1]??0,e[2]??0)}function yTe(e){return Math.max(...e)-Math.min(...e)}function bTe(e){return e*Math.PI/180}function jx(e){const{Clamp:t}=Zs.getMath();return t(e,0,1)}function Gme(e,t,n){return Math.abs(e-t)>n?t:e}function xTe(e,t,n=.01,s=.2){const{MoveTowards:o}=Zs.getMath();return o(e,Gme(e,t,n),s)}let Fx;function du(...e){Fx===void 0&&(Fx=ye("babylon-debug"))}class Wme{constructor(){O(this,"resourceObserver");O(this,"entries",[]);O(this,"keyword",null);this.resourceObserver=new PerformanceObserver(t=>{this.handleResources(t)})}trackStart(t){this.keyword=t,this.resourceObserver.observe({type:"resource",buffered:!1})}trackEnd(){const{entries:t}=this,n=t[t.length-1];return this.resourceObserver.disconnect(),this.entries=[],this.keyword=null,n?{name:n.name,duration:Math.round(n.duration)}:null}handleResources(t){if(this.keyword)for(const n of t.getEntries())n.name.includes(this.keyword)&&this.entries.push(n)}}class $me{constructor(t=!0){O(this,"interactTime",0);O(this,"voiceChatToggledTime",0);O(this,"speechEndDetectedTime",0);O(this,"startMessageTime",0);O(this,"mountedTime",0);O(this,"libsLoadedTime",0);O(this,"sceneInitializedTime",0);O(this,"interactSource","");O(this,"currentConversationId","");O(this,"currentMessageId","");O(this,"serverTurnCounter");O(this,"visualizerEnabled",!1);O(this,"loadedEnd",!1);O(this,"voiceChatToggledOn",!1);O(this,"resourceMonitor",new Wme);O(this,"isFirstTime",!1);O(this,"isVoiceCall");O(this,"resetLoading",()=>{du("%c[] -> resetAppearanceEvent"),this.interactTime=0,this.visualizerEnabled=!1,this.loadedEnd=!1});O(this,"isAvailable",()=>this.isVoiceCall?Us()&&this.voiceChatToggledOn&&this.interactTime>0:Us()&&this.mountedTime>0);O(this,"trackLoadingEvent",t=>{if(!this.isAvailable())return;const{eventName:n,duration:s,characterId:o,networkDuration:r}=t;if(o&&!tf(o))return;const i=["voiceChatToggled","appearanceVisible","appearanceLoadingComplete"].includes(n);D.trackEvent({name:"system",data:{eventName:n,eventInfo_duration:Math.round(s),eventInfo_conversationId:this.currentConversationId,eventInfo_firstTime:this.isFirstTime,eventInfo_characterId:o,eventInfo_trigger:i?this.interactSource:void 0,eventInfo_networkDuration:r,eventInfo_customData:JSON.stringify({isVoiceCall:this.isVoiceCall})}}),du(`%c[] -> ${n} : `,"color: #691dc6",Math.round(s),this.isFirstTime?"firstTime":"",o?`characterId: ${o}`:"",`isVoiceCall: ${this.isVoiceCall===!0}`)});O(this,"onUserInteract",t=>{this.resetLoading(),this.interactTime=performance.now(),this.interactSource=t,du("%c[] -> onUserInteract","color: #222222")});O(this,"onVoiceChatToggled",(t,n)=>{if(t==="end")this.voiceChatToggledOn=!1,this.speechEndDetectedTime=0,this.resourceMonitor.trackEnd();else{this.voiceChatToggledOn=!0,this.voiceChatToggledTime=performance.now(),this.currentConversationId=n??"";const s=this.voiceChatToggledTime-this.interactTime;this.trackLoadingEvent({eventName:"voiceChatToggled",duration:s})}});O(this,"onMounted",()=>{this.mountedTime=performance.now();let t;this.isVoiceCall?t=this.mountedTime-this.voiceChatToggledTime:(this.interactTime=this.mountedTime,t=0),this.trackLoadingEvent({eventName:"appearanceMounted",duration:t})});O(this,"onUnmounted",()=>{this.resourceMonitor.trackEnd()});O(this,"onBabylonLibrariesLoaded",t=>{if(!tf(t))return;this.libsLoadedTime=performance.now();const n=this.libsLoadedTime-this.mountedTime;this.trackLoadingEvent({eventName:"appearanceBabylonLoaded",duration:n,characterId:t})});O(this,"onSceneInitializationStart",t=>{tf(t)&&this.resourceMonitor.trackStart(".glb")});O(this,"onSceneInitialized",t=>{if(!tf(t))return;this.sceneInitializedTime=performance.now();const n=this.sceneInitializedTime-this.libsLoadedTime,s=this.resourceMonitor.trackEnd();du("%c[] -> monitorResult : ","color: #5bb173",s),this.trackLoadingEvent({eventName:"appearanceSceneInitialized",duration:n,characterId:t,networkDuration:s?s.duration:void 0}),this.trackLoadingEvent({eventName:"appearanceLoadingComplete",duration:this.sceneInitializedTime-this.interactTime,characterId:t}),this.loadedEnd=!0,this.checkEnd()});O(this,"onVisualizerEnabled",()=>{if(this.visualizerEnabled)return;this.visualizerEnabled=!0,this.isVoiceCall&&!this.voiceChatToggledOn&&(this.voiceChatToggledOn=!0);const t=Math.round(performance.now()-this.interactTime);this.trackLoadingEvent({eventName:"appearanceVisible",duration:t}),this.checkEnd()});O(this,"checkEnd",()=>{this.visualizerEnabled&&this.loadedEnd&&this.resetLoading()});O(this,"onStartMessage",(t,n,s)=>{this.currentMessageId=t,this.startMessageTime=n,this.serverTurnCounter=s});O(this,"onSpeechEndDetected",t=>{this.speechEndDetectedTime=t});O(this,"onAnimationStart",()=>{const t=Math.round(performance.now()-(this.speechEndDetectedTime||this.startMessageTime));D.trackEvent({name:"system",data:{eventName:"copilotAnimationStart",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:t,eventInfo_serverTurnCounter:this.serverTurnCounter}}),du("%c[] -> onAnimationStart : ","color: #691dc6",Math.round(t))});O(this,"onColorUpdate",t=>{D.trackEvent({name:"system",data:{eventName:"appearanceColorUpdate",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:0,eventInfo_firstTime:this.isFirstTime,eventInfo_customData:JSON.stringify(t)}})});this.isVoiceCall=t,this.isFirstTime=!tn(J7)}}const a0=new Map,qme=(e=!0)=>(a0.has(e)||a0.set(e,new $me(e)),a0.get(e)),ml=qme(!0),Zme="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/lumi-square-B1_IY09F.webm",Kme="data:image/webp;base64,UklGRuAGAABXRUJQVlA4WAoAAAAQAAAAPwAAPwAAQUxQSPABAAABkCQAkCFJMZ61bdu2rZNt27Zt27Zt27ZttOKSiogPRMQEAMeQRGlTRAOxUSuMP3jryYOzi+onFJG059UAau/2S8YuRq+HaH6tdgivmlfR+t/EBIxSrPChy43JuATXf4GOdyflEWe2B52vic4h3wWkHBtCV+c9knoaU4UO9SDxqzw0cVcj/b5oFGlPIsd+BDluIcsP2Z0VeoZMVwY7yvMMuf4v5ybdXeS7PchF/FPI+H9FB+FrkfXGYLuByPtXEasKf5nhNJtkd5H7y2QWy5B/c7OGKHBrsEny+xJeZjCZjiIbGuT6IWO2wVyUeS5ck/qxkI9pNPVQqKeMZoYUbKwKPi2mryrBGzHjVTn+iJmtKucVM09V3S9mlqqqT8xoVcn/YrqoMv0QU1sV9Z6Un1lUsFHKzQhNOymTQZv9swxPSV3QNhm7w3RQOyDBUwEMo1yWMAWMGwnYGcMs6lF2OxKCZcX/vLyTY4D1VFbnq4LD+Ff53GkfHZwW+8HkXsc44LoNiw+D4gLhWAa7cwNp6EqqT4PjAHGsvTR36kYB8oRHKQ6ViQIMEx9y5t9QJAawjLvW0Z/puaMB09B+f1y86ZkpOvAtccIqcKh8vHDgHL3jPbMXfVKEBgHzWC32fVZ57w7PBCLDc7SYvnn/2lG1EgM1VlA4IMoEAABQGgCdASpAAEAAPikQhkIhoQoFA34MAUJZgCdMoSEH61+MfsY1T+2fibjkTK9nX6/7jO2B5gHPi3GW8wehn0qflVZgB1gOXQ9ZuWgsxxM66H5AZL7/C/Y7rEv91/J3ZEP63/s/yA9bTzW/RP+9/Kr6Av4l/Kv8H+Zn+F///gl9DX9TlBP4/u5lnqSxFS9F7sD8mqxrREFHwUlkm6bkl3BUp3dXytXljlJLfMn5z+FZCS6lMviAWjwKqkiqz1Xy8kharhmOS1MgUfy/eOZ6gelEO6hsGqJ/gw7RVAAA/v7spf/3Z7/+7Cv//doYIoq5IRecW9KGbtgXQyQn2TgjuovYXnDnncdyY+R9kyVdkZLpdIz8SW7VHDyHDrT7sLm4ac30adnLLsaftHJ7xezOXxRNY0RXMcoxMovA3zTPvq8t7hjxYhHzldhhfTW+U4cThCjbGtlp/vhz0WSNOYdokdPZ//jr2OlfB0IO72/kswbAJqjS147MZJXRDeFIC1s20oYpIN9HA/shgxPJmyMHn6y6ihngKA9SaJ9dHhtR2EY3i4elMvo3L6wE7s4XcZupxF3wYCQz+rRBRiyPGdQTyfLwuMl9pxl1As6e/eu3IyaTd2Ie9VCXVls4d//hcC94pvnml5SxycJDnsm7kQj1PqWDh/pQ+yc3ACFGZ3V516Hv47tbeurTRCIo1VcrqQHxDkCrkiabw95wHTHsHYxGkEi/53r/ixamTbiESmHIGgiAj94RAibdzh+F0Jg56aKeFljUEAipxLxmmIe11/iNGSRN/ZPenrUPpU8L0v/wj/xqbFGAVHORQDAfQ6DAJUj52PpsOijf+kE6B0YO8jciXXEbdil5WzM+qBwQpwAMb/RuUC4qBfZOroG+VfspPagyx/aB7eh/4yaN4/8JSZbiI6sonTdgC9289rk8UTWj8hMT/UPleL4+TSMv2K7N/z5GOTXVjPpagklsdgGkxOfrn5oW+NWIh5M/6XQjizzjny4MB9pfn6r/WAjuTK/xGT+aNC2FD3YujomeqgoF73qZq1EUnj8qtwwUBpGa0KHdVchC0/J78/izwEmlT0MNlf8kFYLT4LglZ3bN+z2qQSB5Cv1/5ia33+vXWV3OWt9ac5JKI8PPFu41gTV7v/mkSDYyC5DP7dTjn9GqvfCiFR5HrdTNnhClUjcLaDRHY0gwJGXkchezt1K5SJhzt6zDpcvo0yXRtf/Yka3U34ixGZa91McoxzIB9/0MeQR0FinLFZvKu3++KgeBu0H/nTpChOyl7Ee4UVHZa4TyiLGtSlkQb2IQePPro155VZ/5LZM9eid/j/njBTn8BxE8femtFkMnZ0IKd2Z+nz2pGCmGzlBGwtHasVAO7OAFNGGe6nta6AWBBAnbQT/rQSDgfZZ3F4sNxVvIPSEL+dz/sZurs65Zx9IWPS0Lyr5bzE70w0zGU5pFcuMlm6OUJw6aQxFoaSxnlgFlJmR472YOJapiJyJl3wEbdOpaigaGhUCf/4zZ7P1hJrqHbTqDLQsvaKER8OYwrOtEOLCRtjeRErWX42YASvAfWt2+8IA4m4bVvKD+Xew0gtkJb96JneNR0gIfszUod84oXj/wGBnf9mP+f8IEzVwQet5ZacFvQTgAAA==";function Yme(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function rk(e){const{className:t}=e,{t:n}=Y();return Yme()?c.jsx("img",{src:Kme,alt:n("settings.appearanceIconAlt"),className:F("size-6")}):c.jsx("video",{src:Zme,title:n("settings.appearanceIconAlt"),className:F("size-8 rounded-xl",t),autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}const Ux="Sidebar";function Qme(){const{t:e}=Y(),t=se(vo),n=l.useRef(!1);l.useEffect(()=>{n.current||(n.current=!0,cn({page:Ux,scenario:"Displayed",element:"appearanceCtaSidebarBanner"}))},[]);const s=async()=>{t(Ea),ml.onUserInteract("appearanceCtaSidebarBanner"),await Qs({talk:!0}),Ce({pageName:Ux,source:"appearanceCtaSidebarBanner",scenario:"open",destination:"AudioCallWithAppearance"})};return c.jsxs(re,{title:e("settings.appearanceSidebarBannerAltText"),"aria-label":e("settings.appearanceSidebarBannerAltText"),className:"my-4 flex w-full gap-2 p-2",onClick:s,color:"subtle-dimmed-inverted",alignment:"start",children:[c.jsx(rk,{}),c.jsx("div",{className:"text-start text-sm",children:e("settings.appearanceSidebarStartVoiceBannerText")})]})}const Jme=N(!1),Xme=N(!1),ak=fs({key:a4,schema:S4,initialValue:wt(a4,S4)??void 0}),STe=fs({key:J7,schema:fe(),initialValue:!1}),ik=fs({key:X7,schema:fe(),initialValue:!1}),efe=N(!1),tfe=N(!1),ck=fs({key:DU,schema:fe(),initialValue:!1}),nfe=N(!1),sfe=fs({key:jU,schema:fe(),initialValue:!1}),ofe=N(!1),lk=fs({key:FU,schema:fe(),initialValue:!1}),rfe=N(!1),i0="Sidebar";function afe(e){const{onDismiss:t}=e,{t:n}=Y(),s=se(vo),o=se(ak),r=l.useRef(!1),a=se(efe);l.useEffect(()=>{r.current||(r.current=!0,cn({page:i0,scenario:"Displayed",element:"appearanceCtaDiscoverySidebarBanner"}))},[]);const i=async()=>{o(OE),a(!0),s(Ea),ml.onUserInteract("appearanceCtaDiscoverySidebarBanner"),await Qs({talk:!0}),t(),Ce({pageName:i0,source:"appearanceCtaDiscoverySidebarBanner",scenario:"open",destination:"AudioCallWithAppearance"})},u=d=>{d.stopPropagation(),o(Ov),t(),Ce({pageName:i0,source:"appearanceCtaDiscoverySidebarBanner",scenario:"dismiss"})};return c.jsx("div",{className:"my-2 flex w-full px-1",children:c.jsxs("div",{className:"flex cursor-pointer flex-row items-center justify-center gap-1 rounded-2xl bg-foreground-100 p-3 dark:bg-background-650/10",role:"button",tabIndex:0,title:n("settings.appearanceSidebarBannerText"),"aria-label":n("settings.appearanceSidebarBannerText"),onClick:i,onKeyDown:async d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),await i())},children:[c.jsx(rk,{}),c.jsxs("div",{className:"mx-1 flex flex-1 flex-col gap-2",children:[c.jsx("div",{className:"text-start text-xs",children:n("settings.appearanceSidebarBannerText")}),c.jsxs("div",{className:"flex flex-row items-center gap-1 text-accent-550",children:[c.jsx("div",{className:"text-start text-xs",children:n("settings.appearanceSidebarBannerTryItText")}),c.jsx(ds,{className:"size-3"})]})]}),c.jsx("div",{className:"flex h-full flex-col justify-start self-stretch",children:c.jsx(re,{title:n("product.dismiss"),"aria-label":n("product.dismiss"),variant:"rect",color:"subtle-dimmed-inverted",size:"28-xxs",onClick:u,children:c.jsx(nn,{className:"size-3"})})})]})})}function Bu(e){const{children:t,color:n="neutral",className:s}=e;return c.jsx("div",{className:F("flex h-4 shrink-0 items-center rounded px-1.5 text-2xs",n==="neutral"?"bg-black/8 text-foreground-550 dark:bg-white/8 dark:text-foreground-650":"bg-accent-350/30 text-accent-650 dark:bg-accent-450/30",s),children:t})}const ife="relative flex shrink-0 items-center justify-center";function Ba(e){const{titleString:t,descriptionString:n,badgeString:s,iconBgColor:o,iconFgColor:r,isSelected:a,isIconOnly:i,children:u,testId:d,buttonClassName:m,onClick:f}=e,p=Cm(),g=ye("sidebar-compact-nav-items")&&!Rt("kill-sidebar-compact-nav-items");return c.jsx(ge.div,{className:"relative w-full",layout:"position",transition:mn,children:c.jsx(re,{className:F("pointer-events-auto w-full flex-col px-2",g||i?"py-1.5":"py-2",i&&"h-9 w-10",a&&"bg-black/5 before:contrast-more:border-[4px] dark:bg-white/8",m),title:t,tooltip:{placement:"right",gap:12,disabled:!p},size:g||i?"36-sm":"40-base",color:"subtle-dimmed-inverted",onClick:f,testId:d,"aria-selected":a,children:c.jsx("span",{className:"flex w-full items-center justify-between",children:c.jsxs("span",{className:F("flex min-w-0",g?"gap-2.5":"gap-3"),children:[c.jsx("span",{className:F(ife,g||i?"size-6":"size-10 squircle-16",!g&&!i&&o,!g&&!i&&r),children:u}),c.jsx(pt,{mode:"popLayout",children:!i&&c.jsxs(ge.span,{className:"flex min-w-0 flex-1 flex-col",animate:"animate",exit:"exit",variants:{animate:tt,exit:Be},transition:mn,children:[c.jsxs("span",{className:"flex min-h-6 w-full items-center gap-1.5 text-start text-base-dense-medium",children:[t,s!==void 0&&s!==""&&c.jsx(Bu,{color:"accent",children:s})]}),!g&&n&&c.jsx("span",{className:"w-full text-start text-foreground-550 text-xs",children:n})]})})]})})})})}const Bx=65,cfe=100;function Vx({count:e=1}){const t=IF(),n=l.useMemo(()=>{let s=t??Math.floor(Math.random()*4294967295);const o=4294967296,r=1664525,a=1013904223;function i(){return s=(r*s+a)%o,s/o}return Array.from({length:e},()=>{const u=i();return`${Math.floor(u*(cfe-Bx+1))+Bx}%`})},[e,t]);return c.jsx("div",{className:"flex flex-col gap-5 px-3 py-1",children:n.map((s,o)=>c.jsx("div",{style:{width:s},className:de("relative h-5 overflow-hidden rounded-lg bg-background-300 opacity-30 dark:bg-background-250 dark:opacity-40","border border-background-300 dark:border-background-250","after:absolute after:inset-0 after:h-full","after:opacity-50 dark:after:opacity-5","after:bg-gradient-to-r after:from-transparent after:via-white after:to-transparent","after:bg-[length:80%_100%] after:bg-no-repeat","after:animate-[shimmer-translate-x_2s_infinite]","rtl:after:animate-[shimmer-translate-x-reverse_2s_infinite]")},o))})}const uk=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M8 4.5H8.99998V10.7382C8.99998 11.1132 8.90628 11.4822 8.72739 11.8117L5.14269 18.415C4.50968 19.5811 5.35388 20.9999 6.68068 20.9999H17.3193C18.6461 20.9999 19.4903 19.5811 18.8573 18.415L15.2726 11.8117C15.0937 11.4822 15 11.1132 15 10.7382V4.5H16C16.4142 4.5 16.75 4.16421 16.75 3.75C16.75 3.33579 16.4142 3 16 3H8C7.58579 3 7.25 3.33579 7.25 3.75C7.25 4.16421 7.58579 4.5 8 4.5ZM10.5 10.7382V4.5H13.5V10.7382C13.5 11.3631 13.6561 11.9781 13.9543 12.5273L14.7537 14H9.24621L10.0457 12.5273C10.3438 11.9781 10.5 11.3631 10.5 10.7382ZM8.43192 15.5H15.568L17.539 19.1307C17.6294 19.2973 17.5088 19.4999 17.3193 19.4999H6.68068C6.49114 19.4999 6.37054 19.2973 6.46097 19.1307L8.43192 15.5Z"})),ETe=Object.freeze(Object.defineProperty({__proto__:null,default:uk},Symbol.toStringTag,{value:"Module"})),dk=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M11.0656 8.00389L11.25 7.99875H18.75C20.483 7.99875 21.8992 9.3552 21.9949 11.0643L22 11.2487V18.7487C22 20.4818 20.6435 21.898 18.9344 21.9936L18.75 21.9987H11.25C9.51697 21.9987 8.10075 20.6423 8.00515 18.9332L8 18.7487V11.2487C8 9.51571 9.35646 8.0995 11.0656 8.00389ZM18.75 9.49875H11.25C10.3318 9.49875 9.57881 10.2059 9.5058 11.1052L9.5 11.2487V18.7487C9.5 19.6669 10.2071 20.4199 11.1065 20.4929L11.25 20.4987H18.75C19.6682 20.4987 20.4212 19.7916 20.4942 18.8923L20.5 18.7487V11.2487C20.5 10.2822 19.7165 9.49875 18.75 9.49875ZM15.5818 4.23284L15.6345 4.40964L16.327 6.998H14.774L14.1856 4.79787C13.9355 3.86431 12.9759 3.31029 12.0423 3.56044L4.79787 5.50158C3.91344 5.73856 3.36966 6.61227 3.52756 7.49737L3.56044 7.64488L5.50158 14.8893C5.69372 15.6064 6.30445 16.0996 7.00045 16.1764L7.00056 17.6816C5.69932 17.6051 4.52962 16.7445 4.10539 15.4544L4.05269 15.2776L2.11155 8.03311C1.66301 6.35913 2.6067 4.6401 4.23284 4.10539L4.40964 4.05269L11.6541 2.11155C13.3281 1.66301 15.0471 2.6067 15.5818 4.23284Z"})),wTe=Object.freeze(Object.defineProperty({__proto__:null,default:dk},Symbol.toStringTag,{value:"Module"})),mk=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M3.5 12C3.5 7.30558 7.30558 3.5 12 3.5C16.6944 3.5 20.5 7.30558 20.5 12C20.5 16.6944 16.6944 20.5 12 20.5C7.30558 20.5 3.5 16.6944 3.5 12ZM12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM7.08349 8.70767C6.67722 7.6882 7.68791 6.67747 8.7074 7.08372L12.7356 8.68888C13.9078 9.15602 14.8461 10.0704 15.3431 11.2303L17.1969 15.5557C17.6414 16.5929 16.5927 17.6415 15.5555 17.197L11.2301 15.3433C10.0703 14.8462 9.15587 13.908 8.68872 12.7358L7.08349 8.70767ZM8.69209 8.69233L10.0822 12.1805C10.4018 12.9825 11.0274 13.6245 11.821 13.9646L15.572 15.5721L13.9644 11.8212C13.6243 11.0276 12.9824 10.4019 12.1803 10.0823L8.69209 8.69233Z"})),ITe=Object.freeze(Object.defineProperty({__proto__:null,default:mk},Symbol.toStringTag,{value:"Module"})),fk=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 5.25C2 3.45507 3.45507 2 5.25 2H14.75C16.5449 2 18 3.45507 18 5.25V8H16.5V5.25C16.5 4.2835 15.7165 3.5 14.75 3.5H5.25C4.2835 3.5 3.5 4.2835 3.5 5.25V12.75C3.5 13.7165 4.2835 14.5 5.25 14.5H8V16H5.25C3.45507 16 2 14.5449 2 12.75V5.25ZM19 13.25C19 13.9404 18.4404 14.5 17.75 14.5C17.0596 14.5 16.5 13.9404 16.5 13.25C16.5 12.5596 17.0596 12 17.75 12C18.4404 12 19 12.5596 19 13.25ZM9 12.25C9 10.4551 10.4551 9 12.25 9H18.75C20.5449 9 22 10.4551 22 12.25V18.75C22 20.5449 20.5449 22 18.75 22H12.25C10.4551 22 9 20.5449 9 18.75V12.25ZM12.25 10.5C11.2835 10.5 10.5 11.2835 10.5 12.25V18.75C10.5 18.9393 10.5301 19.1216 10.5856 19.2923L13.98 16.1069C14.845 15.2977 16.1892 15.2977 17.0542 16.1069L20.4246 19.2598C20.4736 19.0985 20.5 18.9273 20.5 18.75V12.25C20.5 11.2835 19.7165 10.5 18.75 10.5H12.25ZM12.25 20.5H18.75C18.9854 20.5 19.2099 20.4535 19.4149 20.3693L16.0295 17.2023C15.7411 16.9326 15.2931 16.9326 15.0047 17.2023L11.6167 20.3819C11.8131 20.4582 12.0267 20.5 12.25 20.5ZM5.75 5C6.16421 5 6.5 5.33579 6.5 5.75V6.25C6.5 6.66421 6.16421 7 5.75 7C5.33579 7 5 6.66421 5 6.25V5.75C5 5.33579 5.33579 5 5.75 5ZM6.5 8.75C6.5 8.33579 6.16421 8 5.75 8C5.33579 8 5 8.33579 5 8.75V9.25C5 9.66421 5.33579 10 5.75 10C6.16421 10 6.5 9.66421 6.5 9.25V8.75ZM14.25 5C14.6642 5 15 5.33579 15 5.75V6.25C15 6.66421 14.6642 7 14.25 7C13.8358 7 13.5 6.66421 13.5 6.25V5.75C13.5 5.33579 13.8358 5 14.25 5ZM6.5 11.75C6.5 11.3358 6.16421 11 5.75 11C5.33579 11 5 11.3358 5 11.75V12.25C5 12.6642 5.33579 13 5.75 13C6.16421 13 6.5 12.6642 6.5 12.25V11.75Z"})),_Te=Object.freeze(Object.defineProperty({__proto__:null,default:fk},Symbol.toStringTag,{value:"Module"})),pk=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M7 7V5a3 3 0 0 1 5-2.236A3 3 0 0 1 17 5v2h1.5A1.5 1.5 0 0 1 20 8.5v10.005A3.495 3.495 0 0 1 16.505 22H8a4 4 0 0 1-4-4V8.5A1.5 1.5 0 0 1 5.5 7H7Zm6.635 13.5a3.479 3.479 0 0 1-.625-1.995V8.5H5.5V18A2.5 2.5 0 0 0 8 20.5h5.635ZM11.5 7V5a1.5 1.5 0 0 0-3 0v2h3ZM13 7h2.5V5a1.5 1.5 0 0 0-2.656-.956c.101.3.156.622.156.956v2Zm1.51 11.505a1.995 1.995 0 0 0 3.99 0V8.5h-3.99v10.005Z"})),TTe=Object.freeze(Object.defineProperty({__proto__:null,default:pk},Symbol.toStringTag,{value:"Module"})),lfe="discover",ufe="chat",dfe={CHAT:"chat"},ATe={BIG:"big",SMALL:"small"},M3={COMPOSER:"composer",ADDRESS_BAR_SEARCH:"addressBarSearch",DRAWER:"drawer"};function kTe(e){return e===dfe.CHAT?ufe:lfe}const hk=N(M3.ADDRESS_BAR_SEARCH);function mfe(){const e=H("creator-gallery-rename-to-imagine"),t=H("creator-gallery-imagine");return e&&t}function MTe(){return ut().startsWith(hd)?hd:lh}function ffe(){return mfe()?hd:lh}const pfe="/discover";function hfe(e){return e.startsWith(pfe)}function gk(){const e=ut();return hfe(e)}function Hx(e){return e?{x:e.scrollLeft,y:e.scrollTop}:{x:0,y:0}}function gfe(e,t={}){const{checkIsScrolling:n=!0,scrollEndDelay:s=150}=t,[o,r]=l.useState(Hx(e.current)),[a,i]=l.useState(!1),u=l.useRef(void 0);return l.useEffect(()=>{const d=e.current;let m=null;if(d===null)return()=>{};function f(){m===null&&(m=window.requestAnimationFrame(()=>{r(Hx(d)),n&&(i(!0),u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{i(!1)},s)),m=null}))}return d.addEventListener("scroll",f),()=>{d.removeEventListener("scroll",f),u.current&&clearTimeout(u.current)}},[n,e,s]),t.checkIsScrolling?{...o,isScrolling:a}:o}function vfe(e,t,n={}){const{leading:s=!0,trailing:o=!1}=n;let r=!1,a=null;const i=u=>{e(...u)};return!s&&!o?()=>{}:(...u)=>{r?a=u:(s?i(u):o&&(a=u),r=!0,setTimeout(()=>{r=!1,o&&a&&(i(a),a=null,r=!0,setTimeout(()=>{r=!1},t))},t))}}function f5(e,t=1e3){const n=l.useRef(null);return l.useEffect(()=>{n.current=e},[e]),l.useMemo(()=>vfe((...r)=>{var a;(a=n.current)==null||a.call(n,...r)},t),[t])}function vk({onScrollStart:e,onScrollEnd:t,scrollRefs:n}){const s=l.useRef({}),o=f5(a=>{const{target:i}=a;i instanceof Window?s.current={scrollSource:"window",scrollStartTime:Date.now(),scrollStartX:i.scrollX,scrollStartY:i.scrollY,scrollWidth:document.documentElement.scrollWidth,scrollHeight:document.documentElement.scrollHeight}:i instanceof HTMLElement&&(s.current={scrollSource:i.id,scrollStartTime:Date.now(),scrollStartX:i.scrollLeft,scrollStartY:i.scrollTop,scrollWidth:i.scrollWidth,scrollHeight:i.scrollHeight}),e==null||e(s.current)}),r=f5(a=>{const{target:i}=a;i instanceof Window?(s.current={...s.current,scrollEndX:i.scrollX,scrollEndY:i.scrollY,scrollDuration:Date.now()-(s.current.scrollStartTime??0)},t==null||t(s.current)):i instanceof HTMLElement?(s.current={...s.current,scrollEndX:i.scrollLeft,scrollEndY:i.scrollTop,scrollDuration:Date.now()-(s.current.scrollStartTime??0)},t==null||t(s.current)):s.current={}});l.useEffect(()=>{var i,u;const a={passive:!0};for(const d of n)(i=d.current)==null||i.addEventListener("scroll",o,a),(u=d.current)==null||u.addEventListener("scrollend",r,a);return()=>{var d,m;for(const f of n)(d=f.current)==null||d.removeEventListener("scroll",o),(m=f.current)==null||m.removeEventListener("scrollend",r)}},[n,o,r])}function N3(e){const{scrollableRef:t,customData:n,customTrackCallback:s}=e,o=l.useCallback(r=>{window.requestAnimationFrame(()=>{if(s)s(r);else{const a=JSON.stringify(typeof n=="object"||n===void 0?{scrollWidth:r.scrollWidth,scrollHeight:r.scrollHeight,...n??{}}:n);vQ({...r,scrollSource:e.source??r.scrollSource,customData:a})}})},[n,s,e.source]);vk({onScrollEnd:o,scrollRefs:t?[t]:[]})}const Cfe=/(['"])((\w+:(\/?\/?))?[^\s,]+)\1/,yfe={maxRetries:2,initialDelayMs:200,backoffFactor:2,jitterFactor:.1};function bfe(e){const n=String(e).match(Cfe);if(n)return n[2]}function xfe(e,t){const n=s=>import(s);return async s=>{try{return await s()}catch(o){if(!ye("lazy-with-retry"))throw o;const r=bfe(s);if(!r)throw Yt({feature:"lazyWithRetry",scenario:e,errorType:"lazyLoadModulePathParsingFailure",errorMessage:"Could not resolve path from importer function",customData:String(s)}),o;const a=async()=>{const m=`${r}?t=${Number(new Date)}`;return n(m)},d={...t,onSuccess:m=>{po({feature:"lazyWithRetry",scenario:e,customData:JSON.stringify({attempts:m.attemptCount})})},onFailure:m=>{Yt({feature:"lazyWithRetry",scenario:e,errorType:"lazyLoadRetryFailure",errorMessage:`Lazy import failed after ${m.attemptCount} attempt(s). Reason: ${m.exitReason??"unknown"}`,customData:JSON.stringify(m.errors)})}};return em(a,d)}}}function Ck(e,t,n=yfe){return l.lazy(()=>xfe(t,n)(e))}function Sfe(){Ce({pageName:"october-moment",sectionName:"mico",source:"octoberMomentTryNow",scenario:"actions",destination:"mico"})}function Efe(){Ce({pageName:"october-moment",sectionName:"learn-live",source:"octoberMomentTryNow",scenario:"actions",destination:"learn-live"})}function wfe(){Ce({pageName:"october-moment",sectionName:"groups",source:"octoberMomentTryNow",scenario:"actions",destination:"groups"})}function Ife(){Ce({pageName:"october-moment",sectionName:"memory",source:"octoberMomentTryNow",scenario:"actions",destination:"memory"})}function _fe(){Ce({pageName:"october-moment",sectionName:"connectors",source:"octoberMomentTryNow",scenario:"actions",destination:"connectors"})}function Tfe(){Ce({pageName:"october-moment",sectionName:"imagine",source:"octoberMomentTryNow",scenario:"actions",destination:"imagine"})}function Afe(){Ce({pageName:"october-moment",sectionName:"real-talk",source:"octoberMomentTryNow",scenario:"actions",destination:"real-talk"})}function kfe(){Ce({pageName:"october-moment",sectionName:"search-mode",source:"octoberMomentTryNow",scenario:"actions",destination:"search-mode"})}function Mfe(){Ce({pageName:"october-moment",sectionName:"sources-pages",source:"octoberMomentTryNow",scenario:"actions",destination:"sources-pages"})}function Nfe(){Ce({pageName:"october-moment",sectionName:"care-navigator",source:"octoberMomentTryNow",scenario:"actions",destination:"care-navigator"})}function Rfe(){Ce({pageName:"sidebar",sectionName:"october-moment-card",source:"octoberMomentCard",scenario:"actions",destination:"october-moment"})}function Pfe(){Ce({pageName:"landingPage",sectionName:"october-moment-card",source:"octoberMomentCard",scenario:"actions",destination:"october-moment"})}function Lfe(){Ce({pageName:"landingPage",sectionName:"october-moment-card",source:"octoberMomentCard",scenario:"dismiss"})}async function tc(){const e=await p3(),t={id:e.id,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:void 0,continuedAt:null,group:null};return at(xt,n=>{const s=new Map(n);return s.set(e.id,t),s}),at(Gd,!0),sm({id:e.id,shouldNavigateToChat:!1}),e.id}async function NTe(){Sfe(),zt("chat");const e=await tc();at(vo,Ea),await Qs({conversationId:e,talk:!0})}async function RTe(){Efe(),zt("study");const e=await tc();at(vo,Ea),await Qs({conversationId:e,talk:!0})}async function PTe(){wfe(),zt("chat");const e=await tc();await Qs({conversationId:e}),await Fn.submitMessage({text:z("octoberMoment.landingPage.features.groupConversation.featurePromptText"),inputMethod:"text"})}async function LTe(){Ife(),at(cC,!0)}async function OTe(){_fe(),zt("chat");const e=await tc();await Qs({conversationId:e}),await Fn.submitMessage({text:z("octoberMoment.landingPage.features.thirdPartyApp.featurePromptText"),inputMethod:"text"})}async function DTe(){Tfe(),zt("chat"),await qs({from:"/",to:ye("creator-gallery-imagine")?"/imagine":"/gallery"})}async function jTe(){Afe(),zt("coco");const e=await tc();await Qs({conversationId:e})}async function FTe(){kfe(),zt("search");const e=await tc();await Qs({conversationId:e}),await Fn.submitMessage({text:z("octoberMoment.landingPage.features.copilotSearch.featurePromptText"),inputMethod:"text"})}async function UTe(){Mfe(),zt("chat");const e=await Nn({path:"/pages",args:{body:{title:"",content:""},analytics:{anonymousPath:"/pages"}}});if(!e.ok)throw new Error(`Failed to create page: ${e.status}`);const t=await e.json(),n=jE.parse(t);await qs({from:"/",to:`/pages/${n.id}`})}async function BTe(){Nfe(),zt("chat");const e=await tc();await Qs({conversationId:e}),await Fn.submitMessage({text:z("octoberMoment.landingPage.features.copilotMap.featurePromptText"),inputMethod:"text"})}function yk(){return ye("october-moment-2025")}function VTe(e,t){return(e.assets.layouts.order??1/0)-(t.assets.layouts.order??1/0)}function Np(e){var t;return((t=ae.instance().config().settingsOverrides)==null?void 0:t[e.key])??e.default}const wo={image:"ImagesTab",page:"PagesTab",research:"ResearchTab",podcast:"PodcastsTab",video:"VideosTab"},Ofe={image:"ImagesList",page:"PagesList",research:"ResearchList",podcast:"PodcastsList",video:"VideosList"},Dfe={image:"ImageItem",page:"PageItem",research:"ResearchItem",podcast:"PodcastItem",video:"VideoItem"};function jfe(e){Ce({pageName:e,source:"LibraryNavItem",destination:"library"})}function HTe(e){const t=wo[e];Ce({pageName:"library",source:t})}function zTe(e){cn({page:"library",scenario:wo[e],element:Ofe[e]})}function GTe(e){const{type:t,index:n}=e;Ce({pageName:"library",source:Dfe[t],scenario:wo[t],customData:JSON.stringify({itemIndex:n})})}function WTe(e){const{type:t,index:n}=e;Ce({pageName:"library",source:"Share",scenario:wo[t],customData:JSON.stringify({itemIndex:n})})}function $Te(e){const{type:t,index:n}=e;Ce({pageName:"library",source:"Delete",scenario:wo[t],customData:JSON.stringify({itemIndex:n})})}function qTe(e){const{type:t,index:n,format:s}=e;let o="Download";s==="pdf"?o="ExportAsPdf":o="ExportAsDocx",Ce({pageName:"library",source:o,scenario:wo[t],customData:JSON.stringify({itemIndex:n})})}function ZTe(e){const{type:t,isEmpty:n}=e;Ce({pageName:"library",source:"CreateButton",scenario:wo[t],customData:JSON.stringify({isEmpty:n})})}function KTe(e){Ce({pageName:"library",source:"SignInButton",scenario:wo[e]})}function YTe(){cn({page:"library",element:"LibrarySignInPromotion"})}function QTe(){cn({page:"library"})}function JTe(e){cn({page:"library",scenario:wo[e],element:"EmptyState"})}function XTe(e){cn({page:"library",scenario:wo[e],element:"ErrorPage"})}function eAe(e){Ce({pageName:"library",source:"retryButton",scenario:wo[e]})}const Ffe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/october-moment-icon-CapwGCOT.webp";function R3(){const e=bt({breakpoint:"md"}),t=Ps(),n=M(Vo);return t&&n&&!e}function bk(e){const{isNotification:t}=e,{t:n}=Y();return c.jsx("div",{className:F("overflow-hidden rounded-xl",!t&&"w-2/5"),children:c.jsx("div",{className:"relative size-full",children:c.jsx("img",{src:Ffe,alt:n("octoberMoment.landingPage.header"),className:"block size-full object-cover"})})})}function Ufe(){const e=R3(),t=ut(),n=xo(),{t:s}=Y();return c.jsx(pt,{mode:"popLayout",children:c.jsx(ge.button,{className:"flex min-w-0 flex-1 flex-col",initial:"initial",animate:"animate",exit:"exit",variants:{initial:Be,animate:tt,exit:Be},onClick:async()=>{Rfe(),await n({to:"/fallrelease",from:t})},transition:mn,children:e&&c.jsxs("div",{className:"relative isolate flex h-full cursor-pointer flex-row gap-3 rounded-3xl bg-white/45 p-2 text-foreground-800 transition-shadow duration-200 ease-entrance will-change-transform hover:shadow-lg focus-visible:shadow-lg dark:bg-background-650/10",children:[c.jsx(bk,{isNotification:!1}),c.jsxs("div",{className:"size-full text-left",children:[c.jsx("div",{className:"text-sm-strong",children:s("octoberMoment.awarenessCard.cardHeader")}),c.jsx("div",{className:"text-xs",children:s("octoberMoment.awarenessCard.cardDescription")})]})]})})})}function c0(e){const{fallback:t,children:n}=e;return c.jsx(q7,{serverFallback:t,children:c.jsx(l.Suspense,{fallback:t,children:n})})}const Bfe=Ck(()=>V(()=>import("./sidebar-settings-D5MbrWfv.js"),__vite__mapDeps([303,1,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345])),"sidebar-settings"),l0="bg-sidebar-light dark:bg-sidebar-dark",zx="before:pointer-events-none before:absolute before:h-10 before:w-full before:from-sidebar-light before:to-transparent dark:before:from-sidebar-dark",Vfe=l.lazy(()=>V(()=>import("./sidebar-pages-BKZq3krK.js"),__vite__mapDeps([346,1])).then(e=>({default:e.SidebarPages}))),Hfe=l.lazy(()=>V(()=>import("./conversations-BEje2hIU.js"),__vite__mapDeps([347,1,348,349,350,351,352,353,354])));function zfe(e){const{toggle:t}=e,{t:n}=Y(),s=ut(),o=xo(),r=Aa(),a=M(Vo),i=ym(),u=se(hk),d=l.useRef(!0);l.useEffect(()=>{d.current=!1},[]);const m=an(),f=Dd(),p=H("pages-sidebar-empty-cta"),g=H("pages-anonymous"),C=H("library"),v=!C&&(m||p||g)&&f,b=dm(),y=H("appearance-discoverability-sidebar-banner"),E=M(ak),x=M(vo),I=M(ik),_=M(tfe),T=ae.instance().config().enableLabs,A=!on("kill-creator-gallery"),k=H("creator-gallery-rename-to-imagine"),R=H("shopping-homepage"),P=s==="/shopping",B=gk(),U=B||s==="/daily",{modalType:$}=$p({strict:!1}),Q=s.startsWith("/library"),te=s.startsWith("/labs"),X=C3(s),ne=ffe(),[q,Z]=l.useState(b&&y&&!I&&!E);l.useEffect(()=>{(E||_)&&Z(!1)},[E,_]);const J=l.useMemo(()=>b&&y&&x&&I&&E!==Ov&&!_,[b,E,y,x,I,_]),W=M($d),le=l.useRef(null),{y:_e}=gfe(le),Ae=_e>0,K=ZA(),be=se(Vo);N3({scrollableRef:le,source:"sidebar"});const Me=Np({key:"shouldUseFlyoutSettings",default:!1}),je=H("sidebar-settings"),oe=je&&!Me&&f,ie=Bl(),ee=Cm(),me=ie&&!K&&!a;return c.jsx("div",{className:F("h-dvh px-0.5 pb-0.5 pt-1",K?"w-full":"w-sidebar"),children:c.jsx("div",{className:F("t-custom-scrollbar h-full overflow-x-hidden",a?"overflow-y-auto":"overflow-y-hidden"),ref:le,children:c.jsxs("div",{className:F("flex min-h-full w-full flex-col px-1",{"justify-between":oe}),children:[c.jsx(ge.div,{className:F(l0,zx,"pointer-events-none sticky top-0 z-10 pb-3 pt-[52px]",Ae&&"before:bottom-0 before:top-full before:bg-gradient-to-b before:opacity-90",Ae&&"after:absolute after:bottom-0 after:mx-1 after:w-[calc(100%-8px)] after:border-b after:border-black/8 dark:after:border-white/10",K&&"whitespace-nowrap"),layout:!0,transition:mn,children:c.jsxs("div",{className:F(l0,"pointer-events-auto relative flex flex-col items-start gap-0.5",ee?"pt-0":"pt-4"),children:[c.jsx(pt,{mode:"popLayout",children:ee&&c.jsxs(ge.div,{className:"flex flex-col gap-0.5",animate:"animate",exit:"exit",variants:{animate:{scale:1,...tt},exit:{scale:.6,...Be}},transition:i||d.current?{duration:0}:mn,children:[c.jsx(Ba,{buttonClassName:"cursor-e-resize",titleString:n("sidebar.open"),isIconOnly:!0,onClick:()=>{Ce({source:"sidebarToggle",pageName:s,customData:JSON.stringify({isOpen:a})}),t()},testId:"sidebar-toggle-button",children:c.jsx(ph,{className:"size-6"})}),c.jsx(Ba,{titleString:n("composer.startNewChat"),isIconOnly:!0,onClick:async()=>{f&&(Ce({source:"sidebarNewConversation",destination:"/",pageName:s,customData:JSON.stringify({isOpen:a})}),await r())},children:c.jsx(xm,{className:"size-6"})})]})}),c.jsx(Ba,{titleString:n("sidebar.discover"),descriptionString:n("sidebar.discoverDescription"),isSelected:U,isIconOnly:me,iconBgColor:"bg-caramel-350/40 dark:bg-slate-650/60",iconFgColor:"text-caramel-600 dark:text-slate-250",testId:"sidebar-discover-button",onClick:async()=>{if(!f)return;!B||B&&!!$?(u(M3.DRAWER),Ce({source:"sidebarDiscoverButton",destination:"/discover",pageName:s}),await o({to:"/discover",from:s,search:{modalUrl:void 0}})):K&&be(!1)},children:c.jsx(mk,{className:"size-6"})}),R&&c.jsx(Ba,{titleString:n("sidebar.shopping.title"),descriptionString:n("sidebar.shopping.description"),isSelected:P,isIconOnly:me,iconBgColor:"bg-shopping-purple-350 dark:bg-slate-650/60",iconFgColor:"text-shopping-purple-550 dark:text-slate-250",testId:"sidebar-shopping-button",onClick:async()=>{f&&(await o({to:"/shopping",from:s}),K&&P&&be(!1))},children:c.jsx(pk,{className:"size-6"})}),A&&c.jsx(Ba,{titleString:n(k?"sidebar.gallery.titleV2":"sidebar.gallery.title"),descriptionString:n("sidebar.gallery.description"),badgeString:n("sidebar.gallery.badge"),iconBgColor:"bg-midnight-350/50 dark:bg-midnight-600/50",iconFgColor:"text-midnight-600 dark:text-midnight-350",isSelected:X,isIconOnly:me,onClick:async()=>{f&&(Ce({source:"sidebarGalleryButton",destination:ne,pageName:s}),await o({to:ne,from:s}),K&&X&&be(!1))},children:c.jsx(fk,{className:"size-6"})}),C&&c.jsx(Ba,{titleString:n("sidebar.library"),descriptionString:n("sidebar.libraryDescription"),iconBgColor:"bg-spot-green-300/40 dark:bg-spot-green-600/60",iconFgColor:"text-spot-green-600 dark:text-slate-250",isSelected:Q,isIconOnly:me,onClick:()=>{f&&(o({to:"/library",from:s}),jfe(s))},children:c.jsx(dk,{className:"size-6"})}),T&&c.jsx(Ba,{titleString:n("sidebar.labs"),descriptionString:n("sidebar.labsDescription"),iconBgColor:"bg-labs-light dark:bg-labs-dark",iconFgColor:"text-labs-dark dark:text-labs-light",isSelected:te,isIconOnly:me,onClick:async()=>{f&&(Ce({source:"sidebarLabsButton",destination:"/labs",pageName:s}),await o({to:"/labs",from:s}),K&&te&&be(!1))},children:c.jsx(uk,{className:"size-6"})}),yk()&&f&&c.jsx("div",{className:"mt-3 px-1",children:c.jsx(Ufe,{})})]})}),c.jsx(pt,{children:a&&c.jsxs(ge.div,{className:"grow",animate:"animate",exit:"exit",variants:{animate:tt,exit:Be},layout:"position",transition:mn,children:[J&&f&&c.jsx(Qme,{}),q&&!J&&f&&c.jsx(afe,{onDismiss:()=>Z(!1)}),c.jsxs("div",{className:F("relative flex grow flex-col py-5"),children:[v&&c.jsx(c0,{fallback:null,children:c.jsx(Vfe,{isCompact:!K})}),c.jsx("h2",{className:"mb-6 flex gap-2 px-2.5 align-middle text-base-dense-medium","data-testid":"sidebar-conversations-header",children:n("sidebar.conversations")}),W&&f?c.jsx(c0,{fallback:c.jsx(Vx,{count:16}),children:c.jsx(Hfe,{isCompact:!K})}):c.jsx(Vx,{count:16})]})]})}),!je&&c.jsx("div",{className:F(l0,zx,"sticky bottom-0 py-1 before:bottom-full before:bg-gradient-to-t")}),c.jsx(c0,{fallback:null,children:oe&&c.jsx(Bfe,{})})]})})})}const Gfe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-wordmark-DvWA6bVb.svg",Sm=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M22.9253 4.97196C22.5214 3.79244 21.4126 3 20.1658 3L18.774 3C17.3622 3 16.1532 4.01106 15.9033 5.40051L14.4509 13.4782L15.0163 11.5829C15.3849 10.347 16.5215 9.5 17.8112 9.5L23.0593 9.5L25.3054 10.809L27.4705 9.5H26.5598C25.313 9.5 24.2042 8.70756 23.8003 7.52804L22.9253 4.97196Z",fill:"url(#paint0_radial_262034_2117)"}),l.createElement("path",{d:"M9.39637 27.0147C9.79613 28.2011 10.9084 29 12.1604 29H14.5727C16.1772 29 17.4805 27.704 17.4893 26.0995L17.5315 18.4862L16.9699 20.4033C16.6058 21.6461 15.4659 22.5 14.1708 22.5H8.88959L6.96437 21.0214L4.88007 22.5H5.78013C7.03206 22.5 8.14435 23.299 8.54411 24.4853L9.39637 27.0147Z",fill:"url(#paint1_radial_262034_2117)"}),l.createElement("path",{d:"M19.7501 3H8.81266C5.68767 3 3.81268 7.08916 2.56269 11.1783C1.08177 16.0229 -0.856044 22.5021 4.75017 22.5021H9.66051C10.9615 22.5021 12.105 21.6415 12.4657 20.3915C13.2784 17.5759 14.7501 12.4993 15.9014 8.65192C16.4758 6.73249 16.9543 5.08404 17.6886 4.05749C18.1003 3.48196 18.7864 3 19.7501 3Z",fill:"url(#paint2_radial_262034_2117)"}),l.createElement("path",{d:"M19.7501 3H8.81266C5.68767 3 3.81268 7.08916 2.56269 11.1783C1.08177 16.0229 -0.856044 22.5021 4.75017 22.5021H9.66051C10.9615 22.5021 12.105 21.6415 12.4657 20.3915C13.2784 17.5759 14.7501 12.4993 15.9014 8.65192C16.4758 6.73249 16.9543 5.08404 17.6886 4.05749C18.1003 3.48196 18.7864 3 19.7501 3Z",fill:"url(#paint3_linear_262034_2117)"}),l.createElement("path",{d:"M12.2478 29H23.1852C26.3102 29 28.1852 24.9103 29.4352 20.8207C30.9161 15.9755 32.854 9.49548 27.2477 9.49548H22.3375C21.0364 9.49548 19.893 10.3562 19.5322 11.6062C18.7196 14.4221 17.2479 19.4994 16.0965 23.3474C15.5221 25.2671 15.0436 26.9157 14.3093 27.9424C13.8976 28.518 13.2115 29 12.2478 29Z",fill:"url(#paint4_radial_262034_2117)"}),l.createElement("path",{d:"M12.2478 29H23.1852C26.3102 29 28.1852 24.9103 29.4352 20.8207C30.9161 15.9755 32.854 9.49548 27.2477 9.49548H22.3375C21.0364 9.49548 19.893 10.3562 19.5322 11.6062C18.7196 14.4221 17.2479 19.4994 16.0965 23.3474C15.5221 25.2671 15.0436 26.9157 14.3093 27.9424C13.8976 28.518 13.2115 29 12.2478 29Z",fill:"url(#paint5_linear_262034_2117)"}),l.createElement("defs",null,l.createElement("radialGradient",{id:"paint0_radial_262034_2117",cx:0,cy:0,r:1,gradientTransform:"matrix(-7.37821 -8.55084 -7.96607 7.17216 25.5747 13.5466)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.0955758,stopColor:"#00AEFF"}),l.createElement("stop",{offset:.773185,stopColor:"#2253CE"}),l.createElement("stop",{offset:1,stopColor:"#0736C4"})),l.createElement("radialGradient",{id:"paint1_radial_262034_2117",cx:0,cy:0,r:1,gradientTransform:"matrix(6.61516 7.92888 7.80904 -6.47171 7.1753 21.9482)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#FFB657"}),l.createElement("stop",{offset:.633728,stopColor:"#FF5F3D"}),l.createElement("stop",{offset:.923392,stopColor:"#C02B3C"})),l.createElement("radialGradient",{id:"paint2_radial_262034_2117",cx:0,cy:0,r:1,gradientTransform:"matrix(-0.990905 -17.2799 98.0282 -5.51056 8.54161 22.4952)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.03,stopColor:"#FFC800"}),l.createElement("stop",{offset:.31,stopColor:"#98BD42"}),l.createElement("stop",{offset:.49,stopColor:"#52B471"}),l.createElement("stop",{offset:.843838,stopColor:"#0D91E1"})),l.createElement("linearGradient",{id:"paint3_linear_262034_2117",x1:9.52186,y1:3,x2:10.3572,y2:22.5029,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#3DCBFF"}),l.createElement("stop",{offset:.246674,stopColor:"#0588F7",stopOpacity:0})),l.createElement("radialGradient",{id:"paint4_radial_262034_2117",cx:0,cy:0,r:1,gradientTransform:"matrix(-8.64067 24.4636 -29.4075 -10.797 27.8096 7.58585)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.0661714,stopColor:"#8C48FF"}),l.createElement("stop",{offset:.5,stopColor:"#F2598A"}),l.createElement("stop",{offset:.895833,stopColor:"#FFB152"})),l.createElement("linearGradient",{id:"paint5_linear_262034_2117",x1:28.6736,y1:8.30469,x2:28.6627,y2:13.617,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.0581535,stopColor:"#F8ADFA"}),l.createElement("stop",{offset:.708063,stopColor:"#A86EDD",stopOpacity:0}))));function yt(e){const{url:t,className:n}=e;return c.jsx("div",{className:F("bg-current forced-color-adjust-none",n),style:{WebkitMaskImage:`url(${t})`,maskImage:`url(${t})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain"}})}const Gx={placement:"bottom"};function Wfe(e){const{isSidebarOpen:t,toggle:n,isSidebarAtomSynced:s}=e,o=Aa(),[r]=Fe(Wn),a=l.useRef(!0);l.useEffect(()=>{a.current=!1},[]);const i=M(As),{t:u}=Y(),d=ym(),m=ut(),f=xr(),p=hh(),g=bt({breakpoint:"md"}),C=k3(),v=Bl(),b=Cm(),y=Dd(),E=!t&&(m.startsWith("/daily")||m.endsWith("/talk")||p||m.startsWith("/labs/experiments/3d-generations")||m.startsWith("/shares/3d-generations")),x=r==="chat-only"||t,I=l.useRef(null),_=wr(()=>{const T=document.getElementById("app");if(T){const A=g&&I.current?I.current.clientWidth:0;T.style.setProperty("--sidebar-header-secondary-buttons-collapsed-width",`${A}px`),T.style.setProperty("--header-controls-inline-start-width",`${A}px`)}});return c.jsx("div",{className:F("pointer-events-none absolute start-0 top-0 w-full py-1.5 pe-2.5 md:py-3",!v&&(!t||!s)?"ps-2":"ps-0.5",lt.sidebar),children:c.jsx("div",{className:"relative",children:c.jsxs("div",{className:F("absolute flex min-w-full items-end justify-between p-1",b?"gap-3":"gap-0.5"),ref:_,children:[(t||v)&&c.jsx("div",{className:F("flex w-0 items-center",(!s||v&&!t)&&"max-md:hidden"),children:c.jsxs(re,{role:"link",title:u("sidebar.homepageLink"),className:F("pointer-events-auto absolute start-1 top-1 flex items-center gap-2.5 pe-2.5 ps-2",b&&"gap-0 px-2"),size:"36-sm",color:"subtle-dimmed-inverted",testId:"sidebar-copilot-brand-button",onClick:async()=>{!f&&y&&(Ce({source:"sidebarBrandButton",destination:"/chat",pageName:m}),await o())},children:[c.jsx(Sm,{className:"size-6"}),c.jsx(rn,{className:"flex items-center",mode:"popLayout",initial:a.current?!1:"initial",delay:d?0:ns.default,duration:d?0:ns.slow,children:c.jsxs("span",{className:F("flex items-center text-lg-strong",!s&&v&&"max-md:hidden",!t&&v&&"hidden"),children:[c.jsx(yt,{url:Gfe,className:"h-[18px] w-[58px]"}),C&&c.jsx(Mp,{text:"BETA",className:"ms-2 uppercase"})]})})]})}),c.jsxs("div",{className:F("pointer-events-auto relative mx-1 flex shrink-0 items-center gap-0.5",b&&"md:hidden"),"data-theme":i&&!t?i.theme:void 0,ref:I,children:[c.jsx(pt,{children:E&&c.jsx(ge.div,{className:F("pointer-events-auto absolute border border-stroke-100 shadow-md dark:border-stroke-300",x?"-inset-1 rounded-2xl":"inset-0 rounded-xl",Ys),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Be,animate:tt,exit:Be},transition:d?{duration:0}:mn})}),c.jsx(re,{title:u(t?"sidebar.close":"sidebar.open"),tooltip:Gx,className:F("after:absolute after:inset-0 after:rounded-xl max-md:hover:after:bg-black/3 max-md:dark:after:hover:bg-white/5",!v&&"hover:after:bg-black/3 dark:after:hover:bg-white/5",v&&t&&"md:cursor-w-resize",v&&!t&&"md:cursor-e-resize"),color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",onClick:()=>{Ce({source:"sidebarToggle",pageName:m,customData:JSON.stringify({isOpen:t})}),n()},testId:"sidebar-toggle-button",children:c.jsx(ph,{className:"size-6"})}),x&&c.jsxs("div",{className:F("flex rounded-xl max-md:hover:bg-black/3 max-md:dark:hover:bg-white/5",b?"md:gap-1":"hover:bg-black/3 dark:hover:bg-white/5",!s&&r!=="chat-only"&&"max-md:hidden"),children:[c.jsx(re,{title:u("composer.startNewChat"),tooltip:Gx,color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",className:F("rounded-sm rounded-s-xl max-md:w-[34px]",b?"md:w-10":"w-[34px]"),onClick:async()=>{y&&(Ce({source:"sidebarNewConversation",destination:"/chat",pageName:m,customData:JSON.stringify({isOpen:t})}),await o())},testId:"sidebar-new-conversation-button",children:c.jsx(xm,{className:"size-6"})}),c.jsx(nk,{buttonSize:"36-sm"})]}),C&&c.jsx(Mp,{text:u("settings.copilotBeta.beta"),className:F("relative m-2 uppercase",t&&s&&"max-md:hidden",(t||v)&&"md:hidden")})]})]})})})}function ho({onOutsideEvent:e,elements:t,shouldAttachListeners:n=!0,includeScroll:s=!0,invokeOnce:o=!0,includeFocus:r=!0,includeClick:a=!1}){l.useEffect(()=>{const i=u=>{const d=u.target,m=t.some(p=>{var g;return(g=p.current)==null?void 0:g.contains(d)}),f=d instanceof Element&&d.closest("[data-outside-events-ignore]")!==null;!m&&!f&&e()};return n&&(document.addEventListener("mousedown",i,{once:o}),a&&document.addEventListener("click",i,{once:o}),s&&document.addEventListener("scroll",i,!0),r&&document.addEventListener("focusin",i,!0)),()=>{document.removeEventListener("mousedown",i),a&&document.removeEventListener("click",i),s&&document.removeEventListener("scroll",i,!0),r&&document.removeEventListener("focusin",i,!0)}},[n,s,t,o,r,e,a])}function $fe(e){const{isSidebarAtomSynced:t=!0}=e,{t:n}=Y(),[s,o]=Fe(Vo),r=ym(),a=bt({breakpoint:"md"}),[i,u]=l.useState(a),d=l.useRef(a),m=l.useRef(null),f=ae.instance().config().useCompactSidebarHeader??!1,p=ae.instance().config().isSidebarSmokeLayerVisible??!0;g3(()=>{a&&o(!1)});const g=Cm();l.useEffect(()=>{d.current===!1&&a&&o(!1),d.current===!0&&!a&&o(nS()==="open"),d.current=a,u(a)},[a,o]),ho({onOutsideEvent:()=>o(!1),elements:[m],shouldAttachListeners:s&&!p&&a,includeScroll:!1,invokeOnce:!1,includeFocus:!1});const C=()=>{o(!s),a||WU(s?"close":"open")};return c.jsxs(c.Fragment,{children:[c.jsx(pt,{children:i&&s&&p&&c.jsx(ge.div,{className:F("fixed inset-0 bg-black/30",!t&&"hidden"),onClick:()=>o(!1),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Be,animate:tt,exit:Be},transition:mn})}),c.jsxs(ge.div,{ref:m,className:de("relative w-full bg-sidebar-light dark:bg-sidebar-dark",!p&&"shadow-lg"),layout:"position",role:"navigation",children:[!s&&c.jsx("button",{onClick:C,type:"button",className:"absolute size-full cursor-e-resize outline-none max-md:hidden","aria-label":n("sidebar.open")}),f?c.jsx(Hme,{isSidebarOpen:s,toggle:C}):c.jsx(Wfe,{isSidebarOpen:s,toggle:C,isSidebarAtomSynced:t}),c.jsx(pt,{children:c.jsx(ge.div,{className:F("overflow-hidden",!s&&!g&&"hidden",s&&!t&&"max-md:hidden"),animate:"animate",exit:"exit",variants:{animate:tt,exit:Be},transition:r?{duration:0}:mn,children:c.jsx(zfe,{toggle:C})})})]})]})}const qfe=290,Zfe=52,Kfe=()=>{const e=Bl(),t=bt({breakpoint:"md"});return e&&!t?Zfe:0},Yfe="bg-sidebar-light dark:bg-sidebar-dark";function Qfe(e){const{children:t}=e,n=bt({breakpoint:"md"}),s=Ps(),r=M(Vo)&&s,[a,i]=l.useState(!1),u=M(Wn),d=M(fi),m=M(x1),f=ZA(),p=Bl(),g=ym(),C=Xp(),v=se(Vo),[b,y]=l.useState(!1);l.useEffect(()=>{C&&!b&&(n&&v(!1),y(!0))},[C,n,v,b]);const E=s&&(r||p),x=E&&!n;l.useEffect(()=>{const P=document.getElementById("app");P&&P.style.setProperty("--layout-offset-y",x?`${gS}px`:"0px")},[x]);const I=Cm(),_=u==="side-by-side",T=f?"100%":qfe,A=Kfe(),k=d||!!m,R=b?{width:r?T:A}:{};return c.jsxs("div",{className:de("flex h-full overflow-hidden",Yfe),inert:k?!0:void 0,children:[s&&c.jsx(ge.div,{className:de("absolute h-full w-0 will-change-auto max-md:bg-sidebar-light max-md:dark:bg-sidebar-dark md:relative",r?"md:w-[290px]":"md:w-[52px]",lt.sidebarSmallScreen),animate:R,transition:g?{duration:0}:mn,onAnimationStart:()=>i(!0),onAnimationComplete:()=>i(!1),children:c.jsx($fe,{isSidebarAtomSynced:b})}),c.jsx("main",{className:de("relative flex w-full min-w-0 will-change-auto","after:pointer-events-none after:fixed after:inset-2 after:z-30 after:rounded-container after:border after:border-transparent after:opacity-0 after:transition-opacity after:duration-0 dark:after:border-white/12 dark:after:border-s-white/8",E&&!a&&"md:after:opacity-100 md:after:duration-1000",I?"after:start-[52px]":"after:start-[290px]",E&&"md:pt-1.5",_&&"pt-1.5",E&&!_&&"md:pb-1.5",E&&"md:pe-1.5",!E&&_&&"pe-1.5 ps-1.5",_&&"max-md:pe-1.5 max-md:ps-1.5"),children:t})]})}function gd(e){const{children:t,className:n,backgroundColor:s}=e,o=Ps(),r=Bl(),i=ut().endsWith("/talk");return c.jsxs("div",{className:F("relative h-full overflow-hidden",n),children:[c.jsx("div",{className:de("absolute size-full",o&&"md:t-main-clip-path"),children:c.jsx(ec,{customColor:s,isFixed:!0})}),c.jsx("div",{className:de("relative size-full",!i&&"overflow-hidden",o&&r&&"md:rounded-container"),children:t})]})}const tAe="https://picassostaticassetsstg.azureedge.net/character/try-now/lumi_intro_394_222";function Jfe(e,t){if(!e)return!1;const n=wt(X7,fe())??wt(UU,fe());return!t&&!n}function Xfe(){const e=Us(),t=ye("appearance-first-run-experience"),n=pe(ck);return e&&t&&!n}function epe(e,t,n,s){return(!e||!t)&&!s?!1:!n&&!wt(OU,fe())}function xk(){const e=M($K),t=M(Jme),n=dm(),s=sh(),o=H("appearance-discoverability"),r=M(Xme),a=H("appearance-try-now-modal"),i=M(vo),u=epe(n,o,r,s),d=Jfe(a,i);return{noModalToShow:!u&&!d&&!e&&!t,shouldShowEducationModal:u,shouldShowTryNowModal:d,isAppearanceTryNowModalDisplayed:e,isAppearanceEducationModalDisplayed:t,isAppearanceEducationModalClicked:r}}const Rp={CLOSE_BUTTON:"closeButton",ONE_LINE_COMPOSER:"oneLineComposer",IMAGE_VIEWER:"imageViewer"},Vl=N(),tpe=N(e=>{const t=e(Vl);if(!(!t||!Array.isArray(t.media)||typeof t.currentMediaIndex!="number"))return t.media[t.currentMediaIndex]});function npe(){return M(tpe)}function spe(e){const t=pe(De);$t({source:e.source??"defaultMediaViewerSource",scenario:"mediaViewerOpen",messageId:e.messageId,conversationId:t})}function ope(){const e=pe(Vl),t=pe(De);e&&$t({source:"mediaViewer",scenario:"mediaViewerNext",messageId:e.messageId,conversationId:t})}function rpe(){const e=pe(Vl),t=pe(De);e&&$t({source:"mediaViewer",scenario:"mediaViewerPrevious",messageId:e.messageId,conversationId:t})}function Wx(){const e=pe(Vl),t=pe(De);e&&$t({source:"mediaViewer",scenario:"mediaViewerClose",messageId:e.messageId,conversationId:t})}function Sk(){return`Copilot_${ts(new Date,"yyyyMMdd_HHmmss")}`}function ape(e){e.target instanceof HTMLImageElement&&URL.revokeObjectURL(e.target.src)}async function ipe(e,t=!1){try{const n=await $n(e,{analytics:{anonymousPath:"/attachments/*.png"}});return t&&n.status!==200?null:await n.blob()}catch{return null}}async function cpe(e,t=!1){try{const n=await ipe(e,t);return n?URL.createObjectURL(n):null}catch{return null}}const Ek={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp"},u0="image";function lpe(e){const{pathname:t}=new URL(e,"https://example.com");return t.split("/").pop()??"image.jpg"}function upe(e){var o;const{pathname:t}=new URL(e,"https://example.com"),n=t.split("."),s=n.length>1?((o=n.pop())==null?void 0:o.toLowerCase())??"":"";return Object.keys(Ek).includes(s)?s:""}function dpe(e){const t=upe(e);return Ek[t]??"image/jpeg"}const mpe=async(e,t="image.jpg")=>{const s=await(await $n(e)).blob(),o=s.type||dpe(e);return{file:new File([s],t,{type:o}),type:o}};function nAe(e){const t=e.naturalWidth/e.naturalHeight;return t>1.1?"landscape":t<.9?"portrait":"square"}async function fpe(e,t){const n=t??Sk(),o=await(await fetch(e)).blob(),r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}const ppe=N();function wk(){const[e,t]=Fe(ppe);return{isPictureInPictureOpen:e!==void 0,openPictureInPicture:o=>{t(o),Ce({source:"mediaViewer",scenario:"PictureInPictureOpen"})},closePictureInPicture:()=>t(void 0)}}function hpe(e){const t=ts(new Date,"yyyyMMdd_HHmmss");return{filename:`${e}_${t}.mp4`}}function ka(){const[e,t]=Fe(Vl),n=se(Rd),{openPictureInPicture:s}=wk(),{t:o}=Y(),r=l.useCallback(()=>{const{onClose:y}=e??{};Wx(),n(!1),t(void 0),y==null||y()},[t,e,n]),a=l.useCallback(()=>{ope(),t(y=>{if(!y)return y;if(y.currentMediaIndex<y.media.length-1){const E=y.currentMediaIndex+1;return{...y,currentMediaIndex:E,isCurrentMediaLoading:d0(y.media[E])}}return y})},[t]),i=l.useCallback(()=>{rpe(),t(y=>{if(!y)return y;if(y.currentMediaIndex>0){const E=y.currentMediaIndex-1;return{...y,currentMediaIndex:E,isCurrentMediaLoading:d0(y.media[E])}}return y})},[t]),u=l.useCallback(y=>{spe(y),n(!1),t({...y,isCurrentMediaLoading:d0(y.media[y.currentMediaIndex])})},[t,n]),d=e==null?void 0:e.media[e.currentMediaIndex],m=(d==null?void 0:d.type)==="video",f=(e==null?void 0:e.source)==="videoActionCard"||(e==null?void 0:e.source)==="library",p=m&&f,g=m&&!p,C=l.useCallback(()=>{var y;if(d&&d.type==="video"){const{player:E}=d;s({url:d.url,title:((y=d.source)==null?void 0:y.title)??"",startTime:(E==null?void 0:E.getCurrentTime())??0}),Wx(),t(void 0)}},[s,t,d]),v=l.useCallback(()=>{if(!p)return;const{filename:y}=hpe(o("video.downloadFileName"));fpe(d.url,y)},[p,d,o]),b=(e==null?void 0:e.contentComposerType)??Rp.CLOSE_BUTTON;return l.useMemo(()=>({openMediaViewer:u,closeMediaViewer:r,isMediaViewerOpen:e!==void 0,next:a,previous:i,isPictureInPictureSupported:g,triggerPictureInPicture:C,contentComposerType:b,showOneLineComposerWhenMediaViewerOpen:b===Rp.ONE_LINE_COMPOSER,contentPageType:e==null?void 0:e.contentPageType,triggerVideoDownload:p?v:void 0}),[u,r,e,a,i,g,C,b,p,v])}function d0(e){if(e&&"initLoading"in e)return e.initLoading}function gpe(){var m,f;const e=ut(),t=M(Wn),{isAppearanceEducationModalDisplayed:n,isAppearanceTryNowModalDisplayed:s}=xk(),{isMediaViewerOpen:o}=ka(),{disableMultiturn:r}=ae.instance().config(),a=((m=ae.instance().config().composer)==null?void 0:m.largeScreen)===!0&&((f=ae.instance().config().composer)==null?void 0:f.voiceOnly)===!0,i=["/pro/subscribe","/pro/ewallet/return","/referrals","/referrals/rules","/subscription/manage","/subscription/start","/connector/callback"],u=WT(),d=!e.startsWith("/labs")||e==="/labs/portrait/talk";return!i.includes(e)&&!e.startsWith("/topic-selection")&&(!e.startsWith("/fang")||o)&&!e.startsWith("/login")&&e!=="/e/so"&&e!=="/e/sol"&&!e.startsWith("/pro/redeem")&&!e.startsWith("/gaming")&&(!e.startsWith("/library")||o)&&!e.startsWith("/memory/narrative")&&!e.startsWith("/conversations")&&!e.startsWith("/campaigns")&&!e.startsWith("/pages")&&!e.startsWith("/shares/pages")&&!e.startsWith("/shares/3d-generations")&&!C3(e)&&(!e.startsWith("/shopping")||o)&&d&&t!=="detail-only"&&!s&&!n&&!a&&!r&&!u&&!e.startsWith("/shares/tasks")&&!e.startsWith("/fallrelease")}function vpe(){var o,r;const e=ut(),n=xr()&&ye("use-tv-talk")||e.endsWith("/talk");return((o=ae.instance().config().composer)==null?void 0:o.largeScreen)===!0&&((r=ae.instance().config().composer)==null?void 0:r.voiceOnly)===!0&&n}function Cpe(e){const{showSettings:t,showSettingsRelyOnChatDetailLayout:n}=e,s=M(Wn);return l.useMemo(()=>n?t&&s!=="side-by-side"&&s!=="detail-only":t,[n,t,s])}function ype(){const[e,t]=Fe(Ume);return l.useEffect(()=>{async function n(){const o=await(ae.instance().config().isCommandHeaderSupported??(()=>Promise.resolve(!1)))();t(o)}n().catch(()=>{})},[t]),e}function Ik(){return uO().map(t=>t.context)}function gh(){const e=Ik(),t=e[e.length-1];return!!(t!=null&&t.customLayout)}function bpe(){const e=Ik(),t=e[e.length-1];return!!(t!=null&&t.standalonePage)}const xpe=16/9,Spe=48,_k=296,Epe=_k/xpe,wpe=Epe+Spe;function Ipe(){return c.jsx("div",{className:"pointer-events-none absolute inset-0 mb-[calc(var(--composer-container-height)+20px)] me-4 ms-2 mt-[72px]",children:c.jsx("div",{className:"absolute bottom-0 end-4",style:{width:`${_k}px`,height:`${wpe}px`},children:c.jsx("div",{className:de("relative flex h-full flex-col overflow-hidden rounded-4xl","bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]"),style:{boxShadow:"0px 16px 24px -2px rgba(0, 0, 0, 0.12)"},children:c.jsx("div",{className:"flex h-full items-center justify-center",children:c.jsx(it,{className:"size-12"})})})})})}function p5(e){Yt({feature:"fileDownload",errorType:"DownloadFileError",errorMessage:e})}const vd=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M18.2498 20.5009C18.664 20.5008 19 20.8365 19 21.2507C19 21.6649 18.6644 22.0008 18.2502 22.0009L5.25022 22.0047C4.836 22.0048 4.5 21.6691 4.5 21.2549C4.5 20.8407 4.83557 20.5048 5.24978 20.5047L18.2498 20.5009ZM11.6482 2.01271L11.75 2.00586C12.1297 2.00586 12.4435 2.28801 12.4932 2.65409L12.5 2.75586L12.499 16.4409L16.2208 12.7205C16.4871 12.4543 16.9038 12.4301 17.1974 12.648L17.2815 12.7206C17.5477 12.9869 17.5719 13.4036 17.354 13.6972L17.2814 13.7813L12.2837 18.7779C12.0176 19.044 11.6012 19.0683 11.3076 18.8507L11.2235 18.7782L6.22003 13.7816C5.92694 13.4889 5.92661 13.014 6.21931 12.7209C6.48539 12.4545 6.90204 12.43 7.1958 12.6477L7.27997 12.7202L10.999 16.4339L11 2.75586C11 2.37616 11.2822 2.06237 11.6482 2.01271L11.75 2.00586L11.6482 2.01271Z",fill:"currentColor"})),sAe=Object.freeze(Object.defineProperty({__proto__:null,default:vd},Symbol.toStringTag,{value:"Module"}));function Hl(e){const t=pe(Er).document.mimeTypes;return e in t}function P3(e,t){const n=pe(Ul),{supportedMimeTypes:s=n}=t??{};if(!e)return!1;const o=pr(e);return o===""?!1:o in s}function oAe(){const e=pe(Ul);return Object.keys(e).map(t=>t in $s&&$s[t]?[t,...$s[t].map(n=>`.${n}`)]:[]).flat()}function rAe(){const e=pe(Er).document.mimeTypes;return Object.keys(e).map(t=>t in $s&&$s[t]?[t,...$s[t].map(n=>`.${n}`)]:[]).flat()}function aAe(){const e=pe(Er).image.mimeTypes;return Object.keys(e).map(t=>t in $s&&$s[t]?[t,...$s[t].map(n=>`.${n}`)]:[]).flat()}function Tk(e){return Object.values(e).flat().map(t=>`.${t}`)}function _pe(){const e=pe(Er).document.mimeTypes;return Tk(e)}function Ak(){const e=pe(Er);return{documentMaxSize:e.document.maxBytes,imageMaxSize:e.image.maxBytes}}function L3(e){const t=Bpe(e),n=pe(Ul),s=Object.entries(n).find(([,o])=>o.includes(t??""));return s?s[0]:""}function pr(e){return e?e.type!==""?e.type:L3(e.name):""}function kk(e,t){const n=pe(Ul),{supportedMimeTypes:s=n,scenario:o}=t??{};let r,a=null;const i=ye("multi-file-upload"),u=Ak();if(!P3(e,{supportedMimeTypes:s}))r={title:z("composer.errors.unsupportedAttachmentTypeV2.title"),message:z("composer.errors.unsupportedAttachmentTypeV2.message")},a="fileType";else if(!Mk(e)){const d=pr(e);r=i?{title:z("composer.errors.multi.attachmentTooLarge.title"),message:z("composer.errors.multi.attachmentTooLarge.message",{limit:Hl(d)?u.documentMaxSize/1024/1024:u.imageMaxSize/1024/1024})}:{title:z("composer.errors.attachmentTooLargeV2.title"),message:z("composer.errors.attachmentTooLargeV2.message")},a="fileSize"}return D.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:a,eventInfo_fileType:pr(e),eventInfo_fileSize:e.size,eventInfo_customData:o?JSON.stringify({uploadFileScenario:o}):void 0}}),r}function Tpe(e){return e.type==="text/x-markdown"?new File([e],e.name,{type:"text/markdown"}):e}function Mk(e){const t=Ak(),n=pr(e),s=Hl(n)?t.documentMaxSize:t.imageMaxSize;return e.size<=s}function Ape(e){var n;const t=(n=e.clipboardData)==null?void 0:n.items;if(t)for(let s=0;s<t.length;s+=1){const o=t[s];if((o==null?void 0:o.kind)==="file"){const r=o.getAsFile();if(!P3(r))continue;const a=pr(r);if(r!==null)return Mk(r)?{file:r,error:void 0}:(D.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:"fileType",eventInfo_fileSize:r.size,eventInfo_fileType:a,eventInfo_errorMessage:"File size too large in paste"}}),{file:void 0,error:{title:z("composer.errors.attachmentTooLargeV2.title"),message:z("composer.errors.attachmentTooLargeV2.message")}})}}return{file:void 0,error:void 0}}function Nk(e){switch(e){case"unsupported-content-type":return{title:z("composer.errors.unsupportedAttachmentTypeV2.title"),message:z("composer.errors.unsupportedAttachmentTypeV2.message")};case"attachment-too-large":return{title:z("composer.errors.attachmentTooLargeV2.title"),message:z("composer.errors.attachmentTooLargeV2.message")};case"empty-attachment":return{title:z("composer.errors.emptyAttachmentV2.title"),message:z("composer.errors.emptyAttachmentV2.message")};case"content-blocked":return{title:z("composer.errors.attachmentContentBlockedV2.title"),message:z("composer.errors.attachmentContentBlockedV2.message")};case"rate-limit-exceeded":return{title:z("composer.errors.attachmentRateLimitExceededV2.title"),message:z("composer.errors.attachmentRateLimitExceededV2.message")};default:return{title:z("composer.errors.attachmentDefault.title"),message:z("composer.errors.attachmentDefault.message")}}}function Rk(e,t){const n=window.URL.createObjectURL(e),s=document.createElement("a");s.style.display="none",s.href=n,s.download=t,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(n),s.remove()}function iAe(e,t,n){const s=new Blob([n],{type:t});Rk(s,e)}function kpe(e){const t=e.headers.get("Content-Disposition");if(!t)return;const n=t.match(/filename\*=UTF-8''([^;]+)/);if(n&&n[1])return decodeURIComponent(n[1]);const s=t.match(/filename=([^;]+)/);if(s&&s[1])return s[1].replace(/^"(.*)"$/,"$1")}async function Pk(e){const{url:t,fileName:n,preferResponseFileName:s,args:o}=e,r=B1(t)?await fetch(t,o==null?void 0:o.options):await $n(t,o);if(!r.ok)throw new Error(`Failed to fetch file: ${n} from ${t} (status: ${r.status})`);const a=await r.blob();let i=n;if(s){const u=kpe(r);u&&(i=u)}Rk(a,i)}function Mpe({name:e,size:t,message:n,kind:s}){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:n,eventInfo_details:`Error uploading ${s} attachment`,eventInfo_uploadFileSize:t,eventInfo_uploadFileType:e,eventInfo_numDocumentsUploaded:1}})}function Lk(){return`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function cAe(e,t){for(const n of e){const s=kk(n,{supportedMimeTypes:t});if(s)return s}return null}function Npe(e){const t=Lpe(e);return new File([e],t,{type:"text/plain"})}function Rpe(e){return e.replace(/[\\/:*?"<>|]/g,"_").trim()}function Ppe(e){return e.length>0&&!/^[_\s]+$/.test(e)}function Lpe(e){const n=`${z("fileUpload.pastedTextDefaultFilename")}.txt`;if(!e||e.trim().length===0)return n;const o=e.split(`
`).find(a=>a.trim().length>0);if(!o)return n;let r=o.trim().slice(0,50);return r=Rpe(r),Ppe(r)?`${r}.txt`:n}const Ope=2e3,Dpe=500*1024,jpe=1*1024*1024,Fpe=.05,Upe=.15;function lAe(e){const{fileSizeBytes:t,minUploadFileTimeMs:n=Ope,minUploadSpeedBytesPerSec:s=Dpe,maxUploadSpeedBytesPerSec:o=jpe,minBufferRatio:r=Fpe,maxBufferRatio:a=Upe}=e,i=s+Math.random()*(o-s),u=t/i*1e3,d=n+u,m=r+Math.random()*(a-r),f=d*m;return d+f}function Bpe(e){var t;return(t=e==null?void 0:e.split(".").pop())==null?void 0:t.toLowerCase()}const Vpe=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 8V2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V10H14C12.8954 10 12 9.10457 12 8ZM8.25 11.5H15.75C16.1642 11.5 16.5 11.8358 16.5 12.25C16.5 12.6642 16.1642 13 15.75 13H8.25C7.83579 13 7.5 12.6642 7.5 12.25C7.5 11.8358 7.83579 11.5 8.25 11.5ZM8.25 14.25H15.75C16.1642 14.25 16.5 14.5858 16.5 15C16.5 15.4142 16.1642 15.75 15.75 15.75H8.25C7.83579 15.75 7.5 15.4142 7.5 15C7.5 14.5858 7.83579 14.25 8.25 14.25ZM8.25 17H15.75C16.1642 17 16.5 17.3358 16.5 17.75C16.5 18.1642 16.1642 18.5 15.75 18.5H8.25C7.83579 18.5 7.5 18.1642 7.5 17.75C7.5 17.3358 7.83579 17 8.25 17ZM13.5 8V2.5L19.5 8.5H14C13.7239 8.5 13.5 8.27614 13.5 8Z"})),Hpe=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 2V8C12 9.10457 12.8954 10 14 10H20V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4C4 2.89543 4.89543 2 6 2H12ZM13.5 2.5V8C13.5 8.27614 13.7239 8.5 14 8.5H19.5L13.5 2.5Z"})),zpe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/pdf-CBlMXyWV.svg",Gpe=e=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",...e},l.createElement("path",{d:"M3 2.5C3 2.22386 3.22386 2 3.5 2H11.5C11.7761 2 12 2.22386 12 2.5V4.5C12 4.77614 11.7761 5 11.5 5C11.2238 5 11 4.77614 11 4.5V3H7.99997L7.99998 13H9C9.27614 13 9.5 13.2239 9.5 13.5C9.5 13.7761 9.27614 14 9 14H6C5.72386 14 5.5 13.7761 5.5 13.5C5.5 13.2239 5.72386 13 6 13H6.99998L6.99997 3H4V4.5C4 4.77614 3.77614 5 3.5 5C3.22386 5 3 4.77614 3 4.5V2.5Z",fill:"currentColor"}));function Wpe(e){const{fileType:t,className:n}=e;switch(t){case"application/pdf":return c.jsx(yt,{url:zpe,className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return c.jsx(Vpe,{className:n});case"text/plain":return c.jsx(Gpe,{className:n});case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return c.jsx(Hpe,{className:n})}}const $pe=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 2C24.3137 2 27 4.68628 27 8V26.5C27 28.433 25.433 30 23.5 30H6.5C4.567 30 3 28.433 3 26.5C3 25.1038 3.81753 23.8986 5 23.3368V5C5 3.34314 6.34315 2 8 2H21Z",fill:"url(#paint0_linear_103584_157300)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 29H21.0505C20.4022 28.3647 20 27.4793 20 26.5C20 25.5207 20.4022 24.6353 21.0505 24H6.5C5.11929 24 4 25.1193 4 26.5C4 27.8807 5.11929 29 6.5 29ZM6.5 23H23.5C23.7761 23 24 23.2238 24 23.5C24 23.7762 23.7761 24 23.5 24C22.1193 24 21 25.1193 21 26.5C21 27.8807 22.1193 29 23.5 29C24.8807 29 26 27.8807 26 26.5V8C26 5.23859 23.7614 3 21 3H8C6.89543 3 6 3.89542 6 5V23.0354C6.1633 23.0121 6.33024 23 6.5 23Z",fill:"url(#paint1_linear_103584_157300)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 29H21.0505C20.4022 28.3647 20 27.4793 20 26.5C20 25.5207 20.4022 24.6353 21.0505 24H6.5C5.11929 24 4 25.1193 4 26.5C4 27.8807 5.11929 29 6.5 29ZM6.5 23H23.5C23.7761 23 24 23.2238 24 23.5C24 23.7762 23.7761 24 23.5 24C22.1193 24 21 25.1193 21 26.5C21 27.8807 22.1193 29 23.5 29C24.8807 29 26 27.8807 26 26.5V8C26 5.23859 23.7614 3 21 3H8C6.89543 3 6 3.89542 6 5V23.0354C6.1633 23.0121 6.33024 23 6.5 23Z",fill:"url(#paint2_radial_103584_157300)"}),l.createElement("path",{d:"M18.1709 7.03024C18.4304 7.12461 18.5643 7.41149 18.4699 7.67101L14.4699 18.671C14.3755 18.9305 14.0886 19.0644 13.8291 18.97C13.5696 18.8757 13.4357 18.5888 13.5301 18.3293L17.5301 7.32926C17.6245 7.06975 17.9114 6.93587 18.1709 7.03024Z",fill:"url(#paint3_linear_103584_157300)"}),l.createElement("path",{d:"M11.3536 10.1466C11.5488 10.3418 11.5488 10.6584 11.3536 10.8537L9.20711 13.0001L11.3536 15.1466C11.5488 15.3418 11.5488 15.6584 11.3536 15.8537C11.1583 16.049 10.8417 16.049 10.6464 15.8537L8.14645 13.3537C7.95118 13.1584 7.95118 12.8418 8.14645 12.6466L10.6464 10.1466C10.8417 9.95132 11.1583 9.95132 11.3536 10.1466Z",fill:"url(#paint4_linear_103584_157300)"}),l.createElement("path",{d:"M20.6464 10.1466C20.8417 9.95132 21.1583 9.95132 21.3536 10.1466L23.8536 12.6466C24.0488 12.8418 24.0488 13.1584 23.8536 13.3537L21.3536 15.8537C21.1583 16.049 20.8417 16.049 20.6464 15.8537C20.4512 15.6584 20.4512 15.3418 20.6464 15.1466L22.7929 13.0001L20.6464 10.8537C20.4512 10.6584 20.4512 10.3418 20.6464 10.1466Z",fill:"url(#paint5_linear_103584_157300)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_157300",x1:10.75,y1:2,x2:15.1208,y2:30.0979,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_157300",x1:10.1111,y1:3,x2:13.9744,y2:29.1515,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_157300",cx:0,cy:0,r:1,gradientTransform:"matrix(11.6111 20.5833 -17.4167 7.71875 11.0278 9.77083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_157300",x1:11.5,y1:5,x2:16.9412,y2:19.0003,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint4_linear_103584_157300",x1:11.5,y1:5,x2:16.9412,y2:19.0003,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint5_linear_103584_157300",x1:11.5,y1:5,x2:16.9412,y2:19.0003,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),qpe=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_148917)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_148917)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_148917)"}),l.createElement("path",{d:"M24.25 19.25C24.6642 19.2501 25 19.5858 25 20C25 20.6115 24.9926 21.2789 24.7871 21.9033C24.5674 22.5709 24.1422 23.1399 23.416 23.624C23.0714 23.8538 22.6057 23.7607 22.376 23.416C22.1462 23.0714 22.2393 22.6057 22.584 22.376C23.0575 22.0603 23.257 21.7543 23.3623 21.4346C23.4818 21.0715 23.5 20.6385 23.5 20C23.5 19.5858 23.8358 19.25 24.25 19.25Z",fill:"url(#paint3_linear_103584_148917)"}),l.createElement("path",{d:"M16.5 10C17.8468 10 19.0267 10.3456 19.8516 11.2598C20.6609 12.1569 21 13.4626 21 15.0938V21.25C21 21.6642 20.6642 22 20.25 22C19.8358 22 19.5 21.6642 19.5 21.25V20.959C18.6998 21.5588 17.5578 22 16 22C15.6534 22 15.3187 21.9661 15 21.8994V21C15 20.7706 14.9795 20.546 14.9424 20.3272C15.2405 20.4375 15.5913 20.5 16 20.5C17.4573 20.5 18.3334 20.0319 18.8389 19.5615C19.0975 19.3208 19.2693 19.0702 19.374 18.8604C19.4264 18.7553 19.46 18.664 19.4795 18.5947C19.5002 18.521 19.5 18.4902 19.5 18.5V16.0684C19.3218 16.0283 19.1621 15.9603 19.0361 15.8984C18.8982 15.8307 18.7425 15.7426 18.6094 15.6699C18.0734 15.3773 17.3257 15 16 15C15.0161 15 14.4247 15.4254 14.0527 15.96C13.6566 16.5297 13.5 17.2473 13.5 17.75C13.5 17.7946 13.5028 17.8385 13.5039 17.8818C13.0796 17.5407 12.5847 17.2845 12.0439 17.1387C12.1342 16.4934 12.3706 15.7518 12.8223 15.1025C13.4504 14.2 14.4843 13.5 16 13.5C17.6741 13.5 18.6766 13.9977 19.3281 14.3535C19.3828 14.3834 19.4319 14.4086 19.4756 14.4326C19.3955 13.3619 19.1177 12.6842 18.7383 12.2637C18.3014 11.7796 17.6061 11.5 16.5 11.5C15.5111 11.5 14.797 11.5134 14.0303 12.2803C13.7374 12.5731 13.2626 12.5731 12.9697 12.2803C12.6769 11.9874 12.6769 11.5126 12.9697 11.2197C14.2029 9.98642 15.489 10 16.5 10Z",fill:"url(#paint4_linear_103584_148917)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint5_radial_103584_148917)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint6_radial_103584_148917)",fillOpacity:.3}),l.createElement("path",{d:"M10.7227 28H8.83301L7.64648 25.7692C7.60417 25.6911 7.57161 25.6292 7.54883 25.5837C7.5293 25.5349 7.50814 25.4795 7.48535 25.4177H7.46582C7.43652 25.4958 7.40885 25.5593 7.38281 25.6081C7.35677 25.6569 7.32585 25.7171 7.29004 25.7887L6.05957 28H4.27734L6.41602 24.4951L4.42383 21H6.28906L7.34375 22.9916C7.38607 23.073 7.42188 23.1446 7.45117 23.2064C7.48372 23.265 7.51628 23.335 7.54883 23.4163H7.56836C7.61393 23.3219 7.64974 23.2471 7.67578 23.1918C7.70508 23.1364 7.74414 23.0632 7.79297 22.9721L8.88672 21H10.6641L8.64258 24.4414L10.7227 28Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_148917",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_148917",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_148917",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_148917",x1:29.7922,y1:30.5,x2:12.5927,y2:6.95085,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.16806,stopColor:"#15561C"}),l.createElement("stop",{offset:.541154,stopColor:"#15561C"}),l.createElement("stop",{offset:1,stopColor:"#297C2D"})),l.createElement("linearGradient",{id:"paint4_linear_103584_148917",x1:29.7922,y1:30.5,x2:12.5927,y2:6.95085,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.16806,stopColor:"#15561C"}),l.createElement("stop",{offset:.541154,stopColor:"#15561C"}),l.createElement("stop",{offset:1,stopColor:"#297C2D"})),l.createElement("radialGradient",{id:"paint5_radial_103584_148917",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848 52.3364)"},l.createElement("stop",{stopColor:"#20A85E"}),l.createElement("stop",{offset:.94375,stopColor:"#09442A"})),l.createElement("radialGradient",{id:"paint6_radial_103584_148917",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},l.createElement("stop",{offset:.580357,stopColor:"#33A662",stopOpacity:0}),l.createElement("stop",{offset:.973806,stopColor:"#98F0B0"})))),Zpe=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_148416)"}),l.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint1_radial_103584_148416)"}),l.createElement("path",{d:"M5.5 5C5.5 3.61929 6.61929 2.5 8 2.5H21C24.0376 2.5 26.5 4.96243 26.5 8V27C26.5 28.3807 25.3807 29.5 24 29.5H11C7.96243 29.5 5.5 27.0376 5.5 24V5Z",stroke:"url(#paint2_linear_103584_148416)",strokeLinecap:"round",strokeDasharray:"4 3"}),l.createElement("path",{d:"M22 17V22.5312C21.9998 23.3423 21.3423 23.9998 20.5312 24H15V21C15 19.1461 13.7386 17.5873 12.0273 17.1338L15.5713 13L22 17Z",fill:"url(#paint3_radial_103584_148416)"}),l.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint4_linear_103584_148416)"}),l.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint5_radial_103584_148416)",fillOpacity:.6}),l.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint6_radial_103584_148416)",fillOpacity:.1}),l.createElement("path",{d:"M20.5312 8C21.3423 8.00021 21.9998 8.65767 22 9.46875V12.0312C21.9998 12.8423 21.3423 13.4998 20.5312 13.5H12.4551C11.0993 13.5 10 14.5993 10 15.9551V10.5186C10 9.12762 11.1276 8 12.5186 8H20.5312Z",fill:"url(#paint7_linear_103584_148416)"}),l.createElement("path",{d:"M20.5312 8C21.3423 8.00021 21.9998 8.65767 22 9.46875V12.0312C21.9998 12.8423 21.3423 13.4998 20.5312 13.5H12.4551C11.0993 13.5 10 14.5993 10 15.9551V10.5186C10 9.12762 11.1276 8 12.5186 8H20.5312Z",fill:"url(#paint8_radial_103584_148416)",fillOpacity:.8}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint9_radial_103584_148416)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint10_radial_103584_148416)",fillOpacity:.65}),l.createElement("path",{d:"M11.6998 21L10.1921 27.9992L8.38988 28L7.4998 23.8L6.56805 28H4.74863L3.2998 21.0008H4.78584L5.6798 25.62L6.56805 21.0008H8.38988L9.3198 25.62L10.1921 21.0008L11.6998 21Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_148416",x1:11.1111,y1:2,x2:15.5764,y2:30.0674,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint1_radial_103584_148416",cx:0,cy:0,r:1,gradientTransform:"matrix(11.6111 22.1667 -17.4167 8.3125 12.0278 9.29167)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint2_linear_103584_148416",x1:12.2813,y1:2.5,x2:16.9026,y2:29.4578,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("radialGradient",{id:"paint3_radial_103584_148416",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(21.4159 23.9997) scale(27.5042 8.52474)"},l.createElement("stop",{offset:.180414,stopColor:"#1657F4"}),l.createElement("stop",{offset:.574542,stopColor:"#0036C4"})),l.createElement("linearGradient",{id:"paint4_linear_103584_148416",x1:10.1071,y1:21.0936,x2:19.1739,y2:21.0936,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#66C0FF"}),l.createElement("stop",{offset:.25606,stopColor:"#0094F0"})),l.createElement("radialGradient",{id:"paint5_radial_103584_148416",cx:0,cy:0,r:1,gradientTransform:"matrix(-7.98381 15.2097 -17.5489 -41.5814 21.9464 13.7445)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.140259,stopColor:"#D471FF"}),l.createElement("stop",{offset:.830508,stopColor:"#509DF5",stopOpacity:0})),l.createElement("radialGradient",{id:"paint6_radial_103584_148416",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(20.2144 24.1169) rotate(90) scale(13.3025 40.1142)"},l.createElement("stop",{offset:.283333,stopColor:"#4F006F",stopOpacity:0}),l.createElement("stop",{offset:1,stopColor:"#4F006F"})),l.createElement("linearGradient",{id:"paint7_linear_103584_148416",x1:10.1071,y1:12.852,x2:21.9438,y2:13.0288,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#9DEAFF"}),l.createElement("stop",{offset:.201276,stopColor:"#3BD5FF"})),l.createElement("radialGradient",{id:"paint8_radial_103584_148416",cx:0,cy:0,r:1,gradientTransform:"matrix(-11.335 2.92732 -7.10275 -29.8256 21.9464 9.17977)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.0606583,stopColor:"#E4A7FE"}),l.createElement("stop",{offset:.538869,stopColor:"#E4A7FE",stopOpacity:0})),l.createElement("radialGradient",{id:"paint9_radial_103584_148416",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848)"},l.createElement("stop",{offset:.0811439,stopColor:"#367AF2"}),l.createElement("stop",{offset:.871875,stopColor:"#001A8F"})),l.createElement("radialGradient",{id:"paint10_radial_103584_148416",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.3715)"},l.createElement("stop",{offset:.586954,stopColor:"#2763E5",stopOpacity:0}),l.createElement("stop",{offset:.973806,stopColor:"#58AAFE"})))),Kpe=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_148987)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_148987)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_148987)"}),l.createElement("path",{d:"M22 22.75C22 23.4404 21.4404 24 20.75 24H15V21C15 18.7909 13.2091 17 11 17H10V13.875C10 12.8395 10.8395 12 11.875 12H22V22.75Z",fill:"url(#paint3_radial_103584_148987)"}),l.createElement("path",{d:"M22 22.75C22 23.4404 21.4404 24 20.75 24H15V21C15 18.7909 13.2091 17 11 17H10V13.875C10 12.8395 10.8395 12 11.875 12H22V22.75Z",fill:"url(#paint4_radial_103584_148987)",fillOpacity:.7}),l.createElement("path",{d:"M17.248 14C16.5589 14 16 14.5589 16 15.248V17.2471C16 17.9385 15.4385 18.4986 14.7471 18.4971L14.1172 18.4951C13.384 17.5839 12.2606 17 11 17H10V15.875C10 14.8395 10.8395 14 11.875 14H17.248Z",fill:"url(#paint5_linear_103584_148987)"}),l.createElement("path",{d:"M17.248 14C16.5589 14 16 14.5589 16 15.248V17.2471C16 17.9385 15.4385 18.4986 14.7471 18.4971L14.1172 18.4951C13.384 17.5839 12.2606 17 11 17H10V15.875C10 14.8395 10.8395 14 11.875 14H17.248Z",fill:"url(#paint6_linear_103584_148987)",fillOpacity:.3}),l.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint7_linear_103584_148987)"}),l.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint8_radial_103584_148987)"}),l.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint9_linear_103584_148987)"}),l.createElement("path",{d:"M22 10.25C22 9.55964 21.4404 9 20.75 9H17.25C16.5596 9 16 9.55964 16 10.25V12.75C16 13.4404 16.5596 14 17.25 14H20.75C21.4404 14 22 13.4404 22 12.75V10.25Z",fill:"url(#paint10_radial_103584_148987)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint11_radial_103584_148987)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint12_radial_103584_148987)",fillOpacity:.3}),l.createElement("path",{d:"M10.7227 28H8.83301L7.64648 25.7692C7.60417 25.6911 7.57161 25.6292 7.54883 25.5837C7.5293 25.5349 7.50814 25.4795 7.48535 25.4177H7.46582C7.43652 25.4958 7.40885 25.5593 7.38281 25.6081C7.35677 25.6569 7.32585 25.7171 7.29004 25.7887L6.05957 28H4.27734L6.41602 24.4951L4.42383 21H6.28906L7.34375 22.9916C7.38607 23.073 7.42188 23.1446 7.45117 23.2064C7.48372 23.265 7.51628 23.335 7.54883 23.4163H7.56836C7.61393 23.3219 7.64974 23.2471 7.67578 23.1918C7.70508 23.1364 7.74414 23.0632 7.79297 22.9721L8.88672 21H10.6641L8.64258 24.4414L10.7227 28Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_148987",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_148987",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_148987",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("radialGradient",{id:"paint3_radial_103584_148987",cx:0,cy:0,r:1,gradientTransform:"matrix(-11.3333 -12.3333 9.54948 -8.77158 22 25)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.0647233,stopColor:"#379539"}),l.createElement("stop",{offset:.422149,stopColor:"#297C2D"}),l.createElement("stop",{offset:.703448,stopColor:"#15561C"})),l.createElement("radialGradient",{id:"paint4_radial_103584_148987",cx:0,cy:0,r:1,gradientTransform:"matrix(-4.79167 -4.79167 3.71016 -3.70864 13.6667 16.3333)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#073B10"}),l.createElement("stop",{offset:.992234,stopColor:"#084A13",stopOpacity:0})),l.createElement("linearGradient",{id:"paint5_linear_103584_148987",x1:8.0774,y1:19.6792,x2:15.7988,y2:19.6792,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#52D17C"}),l.createElement("stop",{offset:.328512,stopColor:"#4AA647"})),l.createElement("linearGradient",{id:"paint6_linear_103584_148987",x1:15.6393,y1:14,x2:15.6393,y2:21.8896,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#29852F"}),l.createElement("stop",{offset:.499968,stopColor:"#4AA647",stopOpacity:0})),l.createElement("linearGradient",{id:"paint7_linear_103584_148987",x1:10.2763,y1:17.7979,x2:19.2103,y2:12.4439,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#66D052"}),l.createElement("stop",{offset:1,stopColor:"#85E972"})),l.createElement("radialGradient",{id:"paint8_radial_103584_148987",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.23 13.6212) rotate(-180) scale(3.75784 11.5142)"},l.createElement("stop",{offset:.292495,stopColor:"#4EB43B"}),l.createElement("stop",{offset:1,stopColor:"#72CC61",stopOpacity:0})),l.createElement("linearGradient",{id:"paint9_linear_103584_148987",x1:13.3811,y1:14.0608,x2:10,y2:14.0608,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.183694,stopColor:"#C0E075",stopOpacity:0}),l.createElement("stop",{offset:1,stopColor:"#D1EB95"})),l.createElement("radialGradient",{id:"paint10_radial_103584_148987",cx:0,cy:0,r:1,gradientTransform:"matrix(-5.96857 -5.69975 4.89508 -6.9497 21.9686 14.6997)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.439983,stopColor:"#79E96D"}),l.createElement("stop",{offset:1,stopColor:"#D0EB76"})),l.createElement("radialGradient",{id:"paint11_radial_103584_148987",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848 52.3364)"},l.createElement("stop",{stopColor:"#20A85E"}),l.createElement("stop",{offset:.94375,stopColor:"#09442A"})),l.createElement("radialGradient",{id:"paint12_radial_103584_148987",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},l.createElement("stop",{offset:.580357,stopColor:"#33A662",stopOpacity:0}),l.createElement("stop",{offset:.973806,stopColor:"#98F0B0"})))),Ype=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_156665)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_156665)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_156665)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_156665",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_156665",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_156665",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})))),Qpe=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_157892)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_157892)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_157892)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C19.866 9 23 12.134 23 16C23 19.866 19.866 23 16 23C12.134 23 9 19.866 9 16C9 12.134 12.134 9 16 9ZM17.7096 10.2471C19.1936 10.6874 20.4373 11.6863 21.1973 13H18.7113C18.4854 11.8906 18.1382 10.9418 17.7096 10.2471ZM17.7096 21.7529C19.1936 21.3126 20.4373 20.3137 21.1973 19H18.7113C18.4854 20.1094 18.1382 21.0582 17.7096 21.7529ZM17.6889 19C17.5588 19.586 17.3931 20.1104 17.2022 20.5558C16.9625 21.1151 16.7028 21.5038 16.4653 21.7382C16.2321 21.9683 16.076 22 16 22C15.924 22 15.7679 21.9683 15.5347 21.7382C15.2972 21.5038 15.0375 21.1151 14.7978 20.5558C14.6069 20.1104 14.4412 19.586 14.3111 19H17.6889ZM18.8758 18H21.6586C21.8797 17.3744 22 16.7013 22 16C22 15.2987 21.8797 14.6256 21.6586 14H18.8758C18.9566 14.6337 19 15.305 19 16C19 16.695 18.9566 17.3663 18.8758 18ZM17.8671 14C17.9526 14.6235 18 15.2954 18 16C18 16.7046 17.9526 17.3765 17.8671 18H14.1329C14.0474 17.3765 14 16.7046 14 16C14 15.2954 14.0474 14.6235 14.1329 14H17.8671ZM17.6889 13C17.5588 12.414 17.3931 11.8896 17.2022 11.4442C16.9625 10.8849 16.7028 10.4962 16.4653 10.2618C16.2321 10.0317 16.076 10 16 10C15.924 10 15.7679 10.0317 15.5347 10.2618C15.2972 10.4962 15.0375 10.8849 14.7978 11.4442C14.6069 11.8896 14.4412 12.414 14.3111 13H17.6889ZM13.2887 13C13.5146 11.8906 13.8618 10.9418 14.2904 10.2471C12.8064 10.6874 11.5627 11.6863 10.8027 13H13.2887ZM13.1242 14H10.3414C10.1203 14.6256 10 15.2987 10 16C10 16.7013 10.1203 17.3744 10.3414 18H13.1242C13.0434 17.3663 13 16.695 13 16C13 15.305 13.0434 14.6337 13.1242 14ZM13.2887 19H10.8027C11.5627 20.3137 12.8064 21.3126 14.2904 21.7529C13.8618 21.0582 13.5146 20.1094 13.2887 19Z",fill:"url(#paint3_linear_103584_157892)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_157892",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_157892",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_157892",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_157892",x1:13.2955,y1:10.75,x2:17.3252,y2:22.8327,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),Jpe=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M11 2C9.34315 2 8 3.34315 8 5C6.34315 5 5 6.34315 5 8V21C5 25.9706 9.02944 30 14 30H21C22.6569 30 24 28.6569 24 27C25.6569 27 27 25.6569 27 24V8C27 4.68629 24.3137 2 21 2H11Z",fill:"url(#paint0_linear_103584_152224)"}),l.createElement("path",{d:"M8 21C8 24.3137 10.6863 27 14 27H23C23 28.1046 22.1046 29 21 29H14C9.58172 29 6 25.4183 6 21V8C6 6.89543 6.89543 6 8 6V21ZM21 3C23.7614 3 26 5.23858 26 8V24C26 25.1046 25.1046 26 24 26H14C11.2386 26 9 23.7614 9 21V5C9 3.89543 9.89543 3 11 3H21Z",fill:"url(#paint1_linear_103584_152224)"}),l.createElement("path",{d:"M8 21C8 24.3137 10.6863 27 14 27H23C23 28.1046 22.1046 29 21 29H14C9.58172 29 6 25.4183 6 21V8C6 6.89543 6.89543 6 8 6V21ZM21 3C23.7614 3 26 5.23858 26 8V24C26 25.1046 25.1046 26 24 26H14C11.2386 26 9 23.7614 9 21V5C9 3.89543 9.89543 3 11 3H21Z",fill:"url(#paint2_radial_103584_152224)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint3_radial_103584_152224)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint4_radial_103584_152224)",fillOpacity:.8}),l.createElement("path",{d:"M10.6494 28H9.05762L6.17188 23.6799C6.09049 23.5497 6.02214 23.4375 5.9668 23.3431C5.91146 23.2455 5.86914 23.1641 5.83984 23.099H5.82031C5.82682 23.2227 5.83171 23.3789 5.83496 23.5676C5.83822 23.7564 5.83984 23.9777 5.83984 24.2315V28H4.35059V21H6.0498L8.82812 25.1834C8.88672 25.2778 8.94369 25.3738 8.99902 25.4714C9.05762 25.5658 9.11133 25.6602 9.16016 25.7545H9.17969C9.17318 25.6732 9.16829 25.5528 9.16504 25.3933C9.16178 25.2306 9.16016 25.0305 9.16016 24.7929V21H10.6494V28Z",fill:"white"}),l.createElement("path",{d:"M23 20.5449C23 21.3484 22.3484 22.0002 21.5449 22L15 21.998V21C15 19.173 13.7749 17.6327 12.1016 17.1543C12.4342 15.9139 13.5638 15 14.9092 15H23V20.5449Z",fill:"url(#paint5_radial_103584_152224)"}),l.createElement("path",{d:"M17 10.7188L23 10.5V15.0455C23 15.8488 22.3488 16.5 21.5455 16.5H17V10.7188Z",fill:"url(#paint6_linear_103584_152224)"}),l.createElement("path",{d:"M21.4443 7C22.3034 7.00009 23 7.69661 23 8.55566V10.9443C23 11.8034 22.3034 12.5 21.4443 12.5H20.5557C19.6966 12.5 19 13.1966 19 14.0557V14.9443C19 15.8034 18.3034 16.5 17.4443 16.5H14.7471C13.9465 16.5 13.2272 16.8435 12.7246 17.3896C12.4935 17.2791 12.2501 17.1899 11.9971 17.125L11.999 9.74902C11.9996 8.23067 13.2316 7.00004 14.75 7H21.4443Z",fill:"url(#paint7_linear_103584_152224)"}),l.createElement("path",{d:"M21.4443 7C22.3034 7.00009 23 7.69661 23 8.55566V10.9443C23 11.8034 22.3034 12.5 21.4443 12.5H20.5557C19.6966 12.5 19 13.1966 19 14.0557V14.9443C19 15.8034 18.3034 16.5 17.4443 16.5H14.7471C13.9465 16.5 13.2272 16.8435 12.7246 17.3896C12.4935 17.2791 12.2501 17.1899 11.9971 17.125L11.999 9.74902C11.9996 8.23067 13.2316 7.00004 14.75 7H21.4443Z",fill:"url(#paint8_radial_103584_152224)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_152224",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_152224",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_152224",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("radialGradient",{id:"paint3_radial_103584_152224",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848)"},l.createElement("stop",{offset:.071875,stopColor:"#AC13EB"}),l.createElement("stop",{offset:.878742,stopColor:"#580087"})),l.createElement("radialGradient",{id:"paint4_radial_103584_152224",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},l.createElement("stop",{offset:.584821,stopColor:"#841FB0",stopOpacity:0}),l.createElement("stop",{offset:.968712,stopColor:"#D373FC"})),l.createElement("radialGradient",{id:"paint5_radial_103584_152224",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(23.621 23) scale(20.6151 9.35577)"},l.createElement("stop",{offset:.158518,stopColor:"#A931D8"}),l.createElement("stop",{offset:.565784,stopColor:"#6E1996"})),l.createElement("linearGradient",{id:"paint6_linear_103584_152224",x1:25.6934,y1:14.3288,x2:18.23,y2:10.6334,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.216532,stopColor:"#CA59F7"}),l.createElement("stop",{offset:.888362,stopColor:"#691A90"})),l.createElement("linearGradient",{id:"paint7_linear_103584_152224",x1:24.5748,y1:10.4292,x2:11.0028,y2:10.4292,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.807408,stopColor:"#DE66FF"}),l.createElement("stop",{offset:1,stopColor:"#FCB1FF"})),l.createElement("radialGradient",{id:"paint8_radial_103584_152224",cx:0,cy:0,r:1,gradientTransform:"matrix(-6.53498 10.8766 -19.1742 -11.0291 24.9349 6.20395)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#FFC7A3"}),l.createElement("stop",{offset:.830508,stopColor:"#DE67FD",stopOpacity:0})))),Xpe=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_151909)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_151909)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_151909)"}),l.createElement("path",{d:"M21.5 23C21.7761 23 22 23.2239 22 23.5C22 23.7761 21.7761 24 21.5 24H10.5C10.2239 24 10 23.7761 10 23.5C10 23.2239 10.2239 23 10.5 23H21.5Z",fill:"url(#paint3_linear_103584_151909)"}),l.createElement("path",{d:"M21.5 20C21.7761 20 22 20.2239 22 20.5C22 20.7761 21.7761 21 21.5 21H10.5C10.2239 21 10 20.7761 10 20.5C10 20.2239 10.2239 20 10.5 20H21.5Z",fill:"url(#paint4_linear_103584_151909)"}),l.createElement("path",{d:"M21.5 17C21.7761 17 22 17.2239 22 17.5C22 17.7761 21.7761 18 21.5 18H10.5C10.2239 18 10 17.7761 10 17.5C10 17.2239 10.2239 17 10.5 17H21.5Z",fill:"url(#paint5_linear_103584_151909)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.5 8C11.7466 8 12.1055 8.06974 12.417 8.29395C12.7541 8.53664 13 8.93704 13 9.5C13 10.063 12.7541 10.4634 12.417 10.7061C12.1055 10.9303 11.7466 11 11.5 11H11V12.5C11 12.7761 10.7761 13 10.5 13C10.2239 13 10 12.7761 10 12.5V8.5L10.0098 8.39941C10.0563 8.17145 10.2583 8 10.5 8H11.5ZM11 10H11.5C11.5866 10 11.7279 9.97017 11.833 9.89453C11.9126 9.83723 12 9.73704 12 9.5C12 9.26296 11.9126 9.16277 11.833 9.10547C11.7279 9.02983 11.5866 9 11.5 9H11V10Z",fill:"#D20112"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 8C16.0928 8 16.7176 8.17579 17.2021 8.59473C17.6985 9.02399 18 9.66792 18 10.5C18 11.3321 17.6985 11.976 17.2021 12.4053C16.7176 12.8242 16.0928 13 15.5 13H14.5C14.2239 13 14 12.7761 14 12.5V8.5L14.0098 8.39941C14.0563 8.17145 14.2583 8 14.5 8H15.5ZM15 12H15.5C15.9071 12 16.2824 11.8788 16.5479 11.6494C16.8014 11.4302 17 11.074 17 10.5C17 9.92596 16.8014 9.56976 16.5479 9.35059C16.2824 9.12122 15.9071 9 15.5 9H15V12Z",fill:"#D20112"}),l.createElement("path",{d:"M21.5 8C21.7761 8 22 8.22386 22 8.5C22 8.77614 21.7761 9 21.5 9H20V10H21C21.2761 10 21.5 10.2239 21.5 10.5C21.5 10.7761 21.2761 11 21 11H20V12.5C20 12.7761 19.7761 13 19.5 13C19.2239 13 19 12.7761 19 12.5V8.5L19.0098 8.39941C19.0563 8.17145 19.2583 8 19.5 8H21.5Z",fill:"#D20112"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_151909",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_151909",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_151909",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_151909",x1:13.875,y1:17,x2:14.4312,y2:24.1512,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#898989"}),l.createElement("stop",{offset:1,stopColor:"#636262"})),l.createElement("linearGradient",{id:"paint4_linear_103584_151909",x1:13.875,y1:17,x2:14.4312,y2:24.1512,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#898989"}),l.createElement("stop",{offset:1,stopColor:"#636262"})),l.createElement("linearGradient",{id:"paint5_linear_103584_151909",x1:13.875,y1:17,x2:14.4312,y2:24.1512,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#898989"}),l.createElement("stop",{offset:1,stopColor:"#636262"})))),e1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M3 6C3 4.34315 4.34315 3 6 3H23C26.3137 3 29 5.68629 29 9V26C29 27.6569 27.6569 29 26 29H9C5.68629 29 3 26.3137 3 23V6Z",fill:"url(#paint0_linear_103584_156952)"}),l.createElement("path",{d:"M4 6C4 4.89543 4.89543 4 6 4H23C25.7614 4 28 6.23858 28 9V26C28 27.1046 27.1046 28 26 28H9C6.23858 28 4 25.7614 4 23V6Z",fill:"url(#paint1_linear_103584_156952)"}),l.createElement("path",{d:"M4 6C4 4.89543 4.89543 4 6 4H23C25.7614 4 28 6.23858 28 9V26C28 27.1046 27.1046 28 26 28H9C6.23858 28 4 25.7614 4 23V6Z",fill:"url(#paint2_radial_103584_156952)"}),l.createElement("path",{d:"M14.9394 15.0605L9.56142 20.4392C8.61656 21.3842 9.28583 22.9998 10.6221 22.9998H21.3795C22.7159 22.9998 23.3851 21.384 22.4401 20.439L17.0608 15.0604C16.4749 14.4746 15.5252 14.4747 14.9394 15.0605Z",fill:"url(#paint3_linear_103584_156952)"}),l.createElement("circle",{cx:21,cy:11,r:2,fill:"url(#paint4_linear_103584_156952)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_156952",x1:11.3958,y1:3,x2:14.8966,y2:29.2555,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_156952",x1:10.6667,y1:4,x2:13.7026,y2:28.2872,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_156952",cx:0,cy:0,r:1,gradientTransform:"matrix(12.6667 19 -19 7.125 11.6667 10.25)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_156952",x1:9,y1:11.4998,x2:15.5376,y2:29.6106,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint4_linear_103584_156952",x1:19,y1:6.5,x2:23.3454,y2:14.8196,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),t1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_150141)"}),l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint1_radial_103584_150141)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6C3.89543 6 3 6.89543 3 8V9.85714C3 10.1333 2.77614 10.3571 2.5 10.3571C2.22386 10.3571 2 10.1333 2 9.85714V8C2 6.34315 3.34315 5 5 5H6.80952C7.08567 5 7.30952 5.22386 7.30952 5.5C7.30952 5.77614 7.08567 6 6.80952 6H5ZM9.02381 5.5C9.02381 5.22386 9.24767 5 9.52381 5H13.1429C13.419 5 13.6429 5.22386 13.6429 5.5C13.6429 5.77614 13.419 6 13.1429 6H9.52381C9.24767 6 9.02381 5.77614 9.02381 5.5ZM15.3571 5.5C15.3571 5.22386 15.581 5 15.8571 5H19.4762C19.7523 5 19.9762 5.22386 19.9762 5.5C19.9762 5.77614 19.7523 6 19.4762 6H15.8571C15.581 6 15.3571 5.77614 15.3571 5.5ZM21.6905 5.5C21.6905 5.22386 21.9143 5 22.1905 5H24C24.9321 5 25.8159 5.21289 26.6041 5.59317C26.8528 5.71316 26.9572 6.01205 26.8372 6.26076C26.7172 6.50947 26.4183 6.61382 26.1696 6.49383C25.5139 6.17753 24.7784 6 24 6H22.1905C21.9143 6 21.6905 5.77614 21.6905 5.5ZM28.7392 8.16283C28.988 8.04284 29.2868 8.14719 29.4068 8.3959C29.7871 9.18414 30 10.0679 30 11V12.8571C30 13.1333 29.7761 13.3571 29.5 13.3571C29.2239 13.3571 29 13.1333 29 12.8571V11C29 10.2216 28.8225 9.48606 28.5062 8.83042C28.3862 8.58171 28.4905 8.28282 28.7392 8.16283ZM2.5 12.1429C2.77614 12.1429 3 12.3667 3 12.6429V16.3571C3 16.6333 2.77614 16.8571 2.5 16.8571C2.22386 16.8571 2 16.6333 2 16.3571V12.6429C2 12.3667 2.22386 12.1429 2.5 12.1429ZM29.5 15.1429C29.7761 15.1429 30 15.3667 30 15.6429V19.3571C30 19.6333 29.7761 19.8571 29.5 19.8571C29.2239 19.8571 29 19.6333 29 19.3571V15.6429C29 15.3667 29.2239 15.1429 29.5 15.1429ZM2.5 18.6429C2.77614 18.6429 3 18.8667 3 19.1429V21C3 21.7784 3.17753 22.5139 3.49383 23.1696C3.61382 23.4183 3.50947 23.7172 3.26076 23.8372C3.01205 23.9572 2.71316 23.8528 2.59317 23.6041C2.21289 22.8159 2 21.9321 2 21V19.1429C2 18.8667 2.22386 18.6429 2.5 18.6429ZM29.5 21.6429C29.7761 21.6429 30 21.8667 30 22.1429V24C30 25.6569 28.6569 27 27 27H25.1905C24.9143 27 24.6905 26.7761 24.6905 26.5C24.6905 26.2239 24.9143 26 25.1905 26H27C28.1046 26 29 25.1046 29 24V22.1429C29 21.8667 29.2239 21.6429 29.5 21.6429ZM5.16283 25.7392C5.28282 25.4905 5.58171 25.3862 5.83042 25.5062C6.48606 25.8225 7.22159 26 8 26H9.80952C10.0857 26 10.3095 26.2239 10.3095 26.5C10.3095 26.7761 10.0857 27 9.80952 27H8C7.06791 27 6.18414 26.7871 5.3959 26.4068C5.14719 26.2868 5.04284 25.988 5.16283 25.7392ZM12.0238 26.5C12.0238 26.2239 12.2477 26 12.5238 26H16.1429C16.419 26 16.6429 26.2239 16.6429 26.5C16.6429 26.7761 16.419 27 16.1429 27H12.5238C12.2477 27 12.0238 26.7761 12.0238 26.5ZM18.3571 26.5C18.3571 26.2239 18.581 26 18.8571 26H22.4762C22.7523 26 22.9762 26.2239 22.9762 26.5C22.9762 26.7761 22.7523 27 22.4762 27H18.8571C18.581 27 18.3571 26.7761 18.3571 26.5Z",fill:"url(#paint2_linear_103584_150141)"}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint3_linear_103584_150141)"}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint4_radial_103584_150141)"}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint5_radial_103584_150141)",fillOpacity:.5}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9999 17.2831 22.6525 18.4831 22.0508 19.5166L22.1621 19.2725C22.8546 17.7349 21.7302 15.9952 20.0439 15.9951H17.248C16.5554 15.995 15.9945 15.4329 15.9951 14.7402L15.9971 11.958C15.9983 10.2697 14.2553 9.14358 12.7168 9.83887L12.5098 9.93262C13.5373 9.34019 14.7287 9.00001 16 9Z",fill:"url(#paint6_radial_103584_150141)"}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9999 17.2831 22.6525 18.4831 22.0508 19.5166L22.1621 19.2725C22.8546 17.7349 21.7302 15.9952 20.0439 15.9951H17.248C16.5554 15.995 15.9945 15.4329 15.9951 14.7402L15.9971 11.958C15.9983 10.2697 14.2553 9.14358 12.7168 9.83887L12.5098 9.93262C13.5373 9.34019 14.7287 9.00001 16 9Z",fill:"url(#paint7_radial_103584_150141)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint8_radial_103584_150141)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint9_radial_103584_150141)",fillOpacity:.3}),l.createElement("path",{d:"M7.01855 25.7204V28H5.44141V21H7.87793C8.75033 21 9.41439 21.1904 9.87012 21.5711C10.3291 21.9519 10.5586 22.5165 10.5586 23.265C10.5586 24.0363 10.3014 24.6383 9.78711 25.0711C9.27604 25.504 8.58919 25.7204 7.72656 25.7204H7.01855ZM7.01855 22.2106V24.5098H7.67773C8.06836 24.5098 8.36947 24.4073 8.58105 24.2022C8.79264 23.9972 8.89844 23.7027 8.89844 23.3187C8.89844 22.964 8.79427 22.6906 8.58594 22.4986C8.38086 22.3066 8.08626 22.2106 7.70215 22.2106H7.01855Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_150141",x1:9.77778,y1:5,x2:11.9773,y2:27.3951,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint1_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(14.7778 17.4167 -22.1667 6.53125 10.9444 10.7292)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint2_linear_103584_150141",x1:11.2188,y1:5.5,x2:13.4332,y2:26.8537,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint3_linear_103584_150141",x1:15.1255,y1:8.5543,x2:6.54225,y2:16.9404,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.0582736,stopColor:"#FF7F48"}),l.createElement("stop",{offset:1,stopColor:"#E5495B"})),l.createElement("radialGradient",{id:"paint4_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(-10.1505 9.93875 -17.0846 -16.7282 18.6769 13.0625)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.151523,stopColor:"#AA1D2D"}),l.createElement("stop",{offset:.380855,stopColor:"#D12B18",stopOpacity:.44}),l.createElement("stop",{offset:.601996,stopColor:"#FF3C00",stopOpacity:0})),l.createElement("radialGradient",{id:"paint5_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(12.3042 -5.69055 10.5289 21.826 6.20639 21.6912)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.4067,stopColor:"#FF66FB"}),l.createElement("stop",{offset:1,stopColor:"#EA3D01",stopOpacity:0})),l.createElement("radialGradient",{id:"paint6_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(6.39204 -7.32044 6.82218 5.68073 15.2277 16.9563)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#FD6EF9"}),l.createElement("stop",{offset:.637205,stopColor:"#FF9944"}),l.createElement("stop",{offset:.85186,stopColor:"#FCC479"})),l.createElement("radialGradient",{id:"paint7_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(-0.722024 4.89412 -11.0683 -1.55717 14.5918 9.92427)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.144283,stopColor:"#FF8D13"}),l.createElement("stop",{offset:.537266,stopColor:"#FF7F29",stopOpacity:0})),l.createElement("radialGradient",{id:"paint8_radial_103584_150141",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(0.998413 18) rotate(45) scale(18.3848)"},l.createElement("stop",{stopColor:"#F8193E"}),l.createElement("stop",{offset:.939062,stopColor:"#920616"})),l.createElement("radialGradient",{id:"paint9_radial_103584_150141",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.49841 25.8) rotate(90) scale(9.1 10.3594)"},l.createElement("stop",{offset:.575893,stopColor:"#FFB055",stopOpacity:0}),l.createElement("stop",{offset:.973806,stopColor:"#FFF2BE"})))),n1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_150063)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_150063)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_150063)"}),l.createElement("path",{d:"M16 18C16.276 18.0002 16.5 18.224 16.5 18.5V22H18.5C18.776 22.0002 19 22.224 19 22.5C19 22.776 18.776 22.9998 18.5 23H15V22H15.5V18.5C15.5 18.2239 15.7239 18 16 18Z",fill:"url(#paint3_linear_103584_150063)"}),l.createElement("path",{d:"M22 17C22 18.1046 21.1046 19 20 19H14.4639C13.7722 17.8046 12.4804 17 11 17H10V10H22V17Z",fill:"url(#paint4_linear_103584_150063)"}),l.createElement("rect",{x:9,y:9,width:14,height:2,rx:1,fill:"url(#paint5_linear_103584_150063)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint6_radial_103584_150063)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint7_radial_103584_150063)",fillOpacity:.3}),l.createElement("path",{d:"M7.01855 25.7204V28H5.44141V21H7.87793C8.75033 21 9.41439 21.1904 9.87012 21.5711C10.3291 21.9519 10.5586 22.5165 10.5586 23.265C10.5586 24.0363 10.3014 24.6383 9.78711 25.0711C9.27604 25.504 8.58919 25.7204 7.72656 25.7204H7.01855ZM7.01855 22.2106V24.5098H7.67773C8.06836 24.5098 8.36947 24.4073 8.58105 24.2022C8.79264 23.9972 8.89844 23.7027 8.89844 23.3187C8.89844 22.964 8.79427 22.6906 8.58594 22.4986C8.38086 22.3066 8.08626 22.2106 7.70215 22.2106H7.01855Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_150063",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_150063",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_150063",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_150063",x1:6.50581,y1:9.0599,x2:8.82172,y2:27.9804,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.508018,stopColor:"#FA734C"}),l.createElement("stop",{offset:.725475,stopColor:"#E5495B"}),l.createElement("stop",{offset:.872732,stopColor:"#AA1D2D"})),l.createElement("linearGradient",{id:"paint4_linear_103584_150063",x1:20,y1:10,x2:16,y2:22.5,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.103189,stopColor:"#FFA05C"}),l.createElement("stop",{offset:.76658,stopColor:"#FDB567"})),l.createElement("linearGradient",{id:"paint5_linear_103584_150063",x1:14,y1:5,x2:16,y2:14,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.297917,stopColor:"#FF7F48"}),l.createElement("stop",{offset:.579167,stopColor:"#E5495B"}),l.createElement("stop",{offset:.889583,stopColor:"#AA1D2D"})),l.createElement("radialGradient",{id:"paint6_radial_103584_150063",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(0.998413 18) rotate(45) scale(18.3848)"},l.createElement("stop",{stopColor:"#F8193E"}),l.createElement("stop",{offset:.939062,stopColor:"#920616"})),l.createElement("radialGradient",{id:"paint7_radial_103584_150063",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.49841 25.8) rotate(90) scale(9.1 10.3594)"},l.createElement("stop",{offset:.575893,stopColor:"#FFB055",stopOpacity:0}),l.createElement("stop",{offset:.973806,stopColor:"#FFF2BE"})))),s1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_150212)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_150212)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_150212)"}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint3_linear_103584_150212)"}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint4_radial_103584_150212)"}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint5_radial_103584_150212)",fillOpacity:.5}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9999 17.2831 22.6525 18.4831 22.0508 19.5166L22.1621 19.2725C22.8546 17.7349 21.7302 15.9952 20.0439 15.9951H17.248C16.5554 15.995 15.9945 15.4329 15.9951 14.7402L15.9971 11.958C15.9983 10.2697 14.2553 9.14358 12.7168 9.83887L12.5098 9.93262C13.5373 9.34019 14.7287 9.00001 16 9Z",fill:"url(#paint6_radial_103584_150212)"}),l.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9999 17.2831 22.6525 18.4831 22.0508 19.5166L22.1621 19.2725C22.8546 17.7349 21.7302 15.9952 20.0439 15.9951H17.248C16.5554 15.995 15.9945 15.4329 15.9951 14.7402L15.9971 11.958C15.9983 10.2697 14.2553 9.14358 12.7168 9.83887L12.5098 9.93262C13.5373 9.34019 14.7287 9.00001 16 9Z",fill:"url(#paint7_radial_103584_150212)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint8_radial_103584_150212)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint9_radial_103584_150212)",fillOpacity:.3}),l.createElement("path",{d:"M7.01855 25.7204V28H5.44141V21H7.87793C8.75033 21 9.41439 21.1904 9.87012 21.5711C10.3291 21.9519 10.5586 22.5165 10.5586 23.265C10.5586 24.0363 10.3014 24.6383 9.78711 25.0711C9.27604 25.504 8.58919 25.7204 7.72656 25.7204H7.01855ZM7.01855 22.2106V24.5098H7.67773C8.06836 24.5098 8.36947 24.4073 8.58105 24.2022C8.79264 23.9972 8.89844 23.7027 8.89844 23.3187C8.89844 22.964 8.79427 22.6906 8.58594 22.4986C8.38086 22.3066 8.08626 22.2106 7.70215 22.2106H7.01855Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_150212",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_150212",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_150212",x1:15.1255,y1:8.5543,x2:6.54225,y2:16.9404,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.0582736,stopColor:"#FF7F48"}),l.createElement("stop",{offset:1,stopColor:"#E5495B"})),l.createElement("radialGradient",{id:"paint4_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(-10.1505 9.93875 -17.0846 -16.7282 18.6769 13.0625)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.151523,stopColor:"#AA1D2D"}),l.createElement("stop",{offset:.380855,stopColor:"#D12B18",stopOpacity:.44}),l.createElement("stop",{offset:.601996,stopColor:"#FF3C00",stopOpacity:0})),l.createElement("radialGradient",{id:"paint5_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(12.3042 -5.69055 10.5289 21.826 6.20639 21.6912)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.4067,stopColor:"#FF66FB"}),l.createElement("stop",{offset:1,stopColor:"#EA3D01",stopOpacity:0})),l.createElement("radialGradient",{id:"paint6_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(6.39204 -7.32044 6.82218 5.68073 15.2277 16.9563)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#FD6EF9"}),l.createElement("stop",{offset:.637205,stopColor:"#FF9944"}),l.createElement("stop",{offset:.85186,stopColor:"#FCC479"})),l.createElement("radialGradient",{id:"paint7_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(-0.722024 4.89412 -11.0683 -1.55717 14.5918 9.92427)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.144283,stopColor:"#FF8D13"}),l.createElement("stop",{offset:.537266,stopColor:"#FF7F29",stopOpacity:0})),l.createElement("radialGradient",{id:"paint8_radial_103584_150212",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(0.998413 18) rotate(45) scale(18.3848)"},l.createElement("stop",{stopColor:"#F8193E"}),l.createElement("stop",{offset:.939062,stopColor:"#920616"})),l.createElement("radialGradient",{id:"paint9_radial_103584_150212",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.49841 25.8) rotate(90) scale(9.1 10.3594)"},l.createElement("stop",{offset:.575893,stopColor:"#FFB055",stopOpacity:0}),l.createElement("stop",{offset:.973806,stopColor:"#FFF2BE"})))),o1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_149982)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_149982)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_149982)"}),l.createElement("path",{d:"M17 9C17.5523 9 18 9.44772 18 10V14L13.7168 14.9521C13.574 14.9838 13.426 14.9838 13.2832 14.9521L9 14V10C9 9.44772 9.44772 9 10 9H17Z",fill:"#33C481"}),l.createElement("path",{d:"M20 14C20.5523 14 21 14.4477 21 15V18L17 19L13.8721 18.2178C13.145 17.4673 12.1274 17 11 17H9V14H20Z",fill:"#21A366"}),l.createElement("path",{d:"M22 18C22.5523 18 23 18.4477 23 19V22C23 22.5523 22.5523 23 22 23H15V21C15 19.805 14.4754 18.733 13.6445 18H22Z",fill:"#185C37"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"#107C41"}),l.createElement("path",{d:"M7.01855 25.7204V28H5.44141V21H7.87793C8.75033 21 9.41439 21.1904 9.87012 21.5711C10.3291 21.9519 10.5586 22.5165 10.5586 23.265C10.5586 24.0363 10.3014 24.6383 9.78711 25.0711C9.27604 25.504 8.58919 25.7204 7.72656 25.7204H7.01855ZM7.01855 22.2106V24.5098H7.67773C8.06836 24.5098 8.36947 24.4073 8.58105 24.2022C8.79264 23.9972 8.89844 23.7027 8.89844 23.3187C8.89844 22.964 8.79427 22.6906 8.58594 22.4986C8.38086 22.3066 8.08626 22.2106 7.70215 22.2106H7.01855Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_149982",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_149982",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_149982",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})))),r1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_157128)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_157128)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_157128)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.4617 8.30769C13.384 8.12137 13.202 8 13.0001 8C12.7983 8 12.6162 8.12137 12.5386 8.30769L10.0386 14.3077C9.93238 14.5626 10.0529 14.8553 10.3078 14.9615C10.5627 15.0677 10.8555 14.9472 10.9617 14.6923L11.6668 13H14.3335L15.0386 14.6923C15.1448 14.9472 15.4375 15.0677 15.6924 14.9615C15.9473 14.8553 16.0679 14.5626 15.9617 14.3077L13.4617 8.30769ZM13.0001 9.8L13.9168 12H12.0835L13.0001 9.8Z",fill:"url(#paint3_linear_103584_157128)"}),l.createElement("path",{d:"M17.5001 11C17.224 11 17.0001 11.2239 17.0001 11.5C17.0001 11.7761 17.224 12 17.5001 12H21.5001C21.7763 12 22.0001 11.7761 22.0001 11.5C22.0001 11.2239 21.7763 11 21.5001 11H17.5001Z",fill:"url(#paint4_linear_103584_157128)"}),l.createElement("path",{d:"M17.5001 14C17.224 14 17.0001 14.2239 17.0001 14.5C17.0001 14.7761 17.224 15 17.5001 15H21.5001C21.7763 15 22.0001 14.7761 22.0001 14.5C22.0001 14.2239 21.7763 14 21.5001 14H17.5001Z",fill:"url(#paint5_linear_103584_157128)"}),l.createElement("path",{d:"M10.5001 17C10.224 17 10.0001 17.2239 10.0001 17.5C10.0001 17.7761 10.224 18 10.5001 18H21.5001C21.7763 18 22.0001 17.7761 22.0001 17.5C22.0001 17.2239 21.7763 17 21.5001 17H10.5001Z",fill:"url(#paint6_linear_103584_157128)"}),l.createElement("path",{d:"M10.5001 20C10.224 20 10.0001 20.2239 10.0001 20.5C10.0001 20.7761 10.224 21 10.5001 21H14.5001C14.7763 21 15.0001 20.7761 15.0001 20.5C15.0001 20.2239 14.7763 20 14.5001 20H10.5001Z",fill:"url(#paint7_linear_103584_157128)"}),l.createElement("path",{d:"M10.5001 23C10.224 23 10.0001 23.2239 10.0001 23.5C10.0001 23.7761 10.224 24 10.5001 24H14.5001C14.7763 24 15.0001 23.7761 15.0001 23.5C15.0001 23.2239 14.7763 23 14.5001 23H10.5001Z",fill:"url(#paint8_linear_103584_157128)"}),l.createElement("path",{d:"M17.0001 20C16.4478 20 16.0001 20.4477 16.0001 21V23C16.0001 23.5523 16.4478 24 17.0001 24H21.0001C21.5524 24 22.0001 23.5523 22.0001 23V21C22.0001 20.4477 21.5524 20 21.0001 20H17.0001Z",fill:"url(#paint9_linear_103584_157128)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_157128",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_157128",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_157128",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint4_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint5_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint6_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint7_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint8_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint9_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),a1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H8.5C6.567 30 5 28.433 5 26.5V5Z",fill:"url(#paint0_linear_103584_148750)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3H21C23.7614 3 26 5.23859 26 8V21C26 22.1046 25.1046 23 24 23H8.5C7.52066 23 6.63525 23.4022 6 24.0505V5C6 3.89542 6.89543 3 8 3ZM6 26.5C6 27.8807 7.11929 29 8.5 29H24C25.1046 29 26 28.1046 26 27V26.2361C25.4692 26.7112 24.7684 27 24 27H8.5C8.22386 27 8 26.7762 8 26.5C8 26.2238 8.22386 26 8.5 26H24C25.1046 26 26 25.1046 26 24V23.2361C25.4692 23.7112 24.7684 24 24 24H8.5C7.11929 24 6 25.1193 6 26.5Z",fill:"url(#paint1_linear_103584_148750)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3H21C23.7614 3 26 5.23859 26 8V21C26 22.1046 25.1046 23 24 23H8.5C7.52066 23 6.63525 23.4022 6 24.0505V5C6 3.89542 6.89543 3 8 3ZM6 26.5C6 27.8807 7.11929 29 8.5 29H24C25.1046 29 26 28.1046 26 27V26.2361C25.4692 26.7112 24.7684 27 24 27H8.5C8.22386 27 8 26.7762 8 26.5C8 26.2238 8.22386 26 8.5 26H24C25.1046 26 26 25.1046 26 24V23.2361C25.4692 23.7112 24.7684 24 24 24H8.5C7.11929 24 6 25.1193 6 26.5Z",fill:"url(#paint2_radial_103584_148750)"}),l.createElement("path",{d:"M21 18.5449C21 19.3484 20.3484 20.0002 19.5449 20L14.873 19.998C14.4283 18.2739 12.8631 17 11 17H10V16.7842C10 15.1775 11.3025 13.875 12.9092 13.875H21V18.5449Z",fill:"url(#paint3_radial_103584_148750)"}),l.createElement("path",{d:"M15.9231 9.25391L21 9.0625V14.0455C21 14.8488 20.3488 15.5 19.5455 15.5H15.9231V9.25391Z",fill:"url(#paint4_linear_103584_148750)"}),l.createElement("path",{d:"M19.4443 6C20.3034 6.00003 21 6.69658 21 7.55566V9.44434C21 10.3035 20.3034 11 19.4443 11H19.1377C18.272 11.0002 17.5733 11.7075 17.583 12.5732L17.5977 13.9268C17.6073 14.7926 16.9079 15.5 16.042 15.5H12.25C11.2708 15.5 10.4401 16.1266 10.1309 17H10L10.002 8.74902C10.0025 7.23065 11.2335 6 12.752 6H19.4443Z",fill:"url(#paint5_linear_103584_148750)"}),l.createElement("path",{d:"M19.4443 6C20.3034 6.00003 21 6.69658 21 7.55566V9.44434C21 10.3035 20.3034 11 19.4443 11H19.1377C18.272 11.0002 17.5733 11.7075 17.583 12.5732L17.5977 13.9268C17.6073 14.7926 16.9079 15.5 16.042 15.5H12.25C11.2708 15.5 10.4401 16.1266 10.1309 17H10L10.002 8.74902C10.0025 7.23065 11.2335 6 12.752 6H19.4443Z",fill:"url(#paint6_radial_103584_148750)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint7_radial_103584_148750)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint8_radial_103584_148750)",fillOpacity:.8}),l.createElement("path",{d:"M10.6494 28H9.05762L6.17188 23.6799C6.09049 23.5497 6.02214 23.4375 5.9668 23.3431C5.91146 23.2455 5.86914 23.1641 5.83984 23.099H5.82031C5.82682 23.2227 5.83171 23.3789 5.83496 23.5676C5.83822 23.7564 5.83984 23.9777 5.83984 24.2315V28H4.35059V21H6.0498L8.82812 25.1834C8.88672 25.2778 8.94369 25.3738 8.99902 25.4714C9.05762 25.5658 9.11133 25.6602 9.16016 25.7545H9.17969C9.17318 25.6732 9.16829 25.5528 9.16504 25.3933C9.16178 25.2306 9.16016 25.0305 9.16016 24.7929V21H10.6494V28Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_148750",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_148750",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_148750",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("radialGradient",{id:"paint3_radial_103584_148750",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(20.6793 20) scale(17.4436 8.1863)"},l.createElement("stop",{offset:.158518,stopColor:"#A931D8"}),l.createElement("stop",{offset:.565784,stopColor:"#6E1996"})),l.createElement("linearGradient",{id:"paint4_linear_103584_148750",x1:23.2791,y1:12.4127,x2:16.8822,y2:9.34981,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.216532,stopColor:"#CA59F7"}),l.createElement("stop",{offset:.888362,stopColor:"#691A90"})),l.createElement("linearGradient",{id:"paint5_linear_103584_148750",x1:21.4864,y1:9.20518,x2:10.0024,y2:9.20518,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.807408,stopColor:"#DE66FF"}),l.createElement("stop",{offset:1,stopColor:"#FCB1FF"})),l.createElement("radialGradient",{id:"paint6_radial_103584_148750",cx:0,cy:0,r:1,gradientTransform:"matrix(-5.5296 10.1659 -16.2243 -10.3085 21.7912 5.25597)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#FFC7A3"}),l.createElement("stop",{offset:.830508,stopColor:"#DE67FD",stopOpacity:0})),l.createElement("radialGradient",{id:"paint7_radial_103584_148750",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848)"},l.createElement("stop",{offset:.071875,stopColor:"#AC13EB"}),l.createElement("stop",{offset:.878742,stopColor:"#580087"})),l.createElement("radialGradient",{id:"paint8_radial_103584_148750",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},l.createElement("stop",{offset:.584821,stopColor:"#841FB0",stopOpacity:0}),l.createElement("stop",{offset:.968712,stopColor:"#D373FC"})))),i1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_157341)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_157341)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_157341)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 8.5C10 8.22386 10.2239 8 10.5 8H21.5C21.7761 8 22 8.22386 22 8.5C22 8.77614 21.7761 9 21.5 9H10.5C10.2239 9 10 8.77614 10 8.5ZM10 11.5C10 11.2239 10.2239 11 10.5 11H21.5C21.7761 11 22 11.2239 22 11.5C22 11.7761 21.7761 12 21.5 12H10.5C10.2239 12 10 11.7761 10 11.5ZM10 14.5C10 14.2239 10.2239 14 10.5 14H21.5C21.7761 14 22 14.2239 22 14.5C22 14.7761 21.7761 15 21.5 15H10.5C10.2239 15 10 14.7761 10 14.5ZM10 17.5C10 17.2239 10.2239 17 10.5 17H21.5C21.7761 17 22 17.2239 22 17.5C22 17.7761 21.7761 18 21.5 18H10.5C10.2239 18 10 17.7761 10 17.5ZM10 20.5C10 20.2239 10.2239 20 10.5 20H21.5C21.7761 20 22 20.2239 22 20.5C22 20.7761 21.7761 21 21.5 21H10.5C10.2239 21 10 20.7761 10 20.5ZM10 23.5C10 23.2239 10.2239 23 10.5 23H21.5C21.7761 23 22 23.2239 22 23.5C22 23.7761 21.7761 24 21.5 24H10.5C10.2239 24 10 23.7761 10 23.5Z",fill:"url(#paint3_linear_103584_157341)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_157341",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_157341",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_157341",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_157341",x1:13.6818,y1:10,x2:19.3789,y2:22.8113,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),c1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_148497)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_148497)"}),l.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_148497)"}),l.createElement("path",{d:"M22 17V22.5312C21.9998 23.3423 21.3423 23.9998 20.5312 24H15V21C15 19.1461 13.7386 17.5873 12.0273 17.1338L15.5713 13L22 17Z",fill:"url(#paint3_radial_103584_148497)"}),l.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint4_linear_103584_148497)"}),l.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint5_radial_103584_148497)",fillOpacity:.6}),l.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint6_radial_103584_148497)",fillOpacity:.1}),l.createElement("path",{d:"M20.5312 8C21.3423 8.00021 21.9998 8.65767 22 9.46875V12.0312C21.9998 12.8423 21.3423 13.4998 20.5312 13.5H12.4551C11.0993 13.5 10 14.5993 10 15.9551V10.5186C10 9.12762 11.1276 8 12.5186 8H20.5312Z",fill:"url(#paint7_linear_103584_148497)"}),l.createElement("path",{d:"M20.5312 8C21.3423 8.00021 21.9998 8.65767 22 9.46875V12.0312C21.9998 12.8423 21.3423 13.4998 20.5312 13.5H12.4551C11.0993 13.5 10 14.5993 10 15.9551V10.5186C10 9.12762 11.1276 8 12.5186 8H20.5312Z",fill:"url(#paint8_radial_103584_148497)",fillOpacity:.8}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint9_radial_103584_148497)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint10_radial_103584_148497)",fillOpacity:.65}),l.createElement("path",{d:"M11.6998 21L10.1921 27.9992L8.38988 28L7.4998 23.8L6.56805 28H4.74863L3.2998 21.0008H4.78584L5.6798 25.62L6.56805 21.0008H8.38988L9.3198 25.62L10.1921 21.0008L11.6998 21Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_148497",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_148497",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_148497",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("radialGradient",{id:"paint3_radial_103584_148497",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(21.4159 23.9997) scale(27.5042 8.52474)"},l.createElement("stop",{offset:.180414,stopColor:"#1657F4"}),l.createElement("stop",{offset:.574542,stopColor:"#0036C4"})),l.createElement("linearGradient",{id:"paint4_linear_103584_148497",x1:10.1071,y1:21.0936,x2:19.1739,y2:21.0936,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#66C0FF"}),l.createElement("stop",{offset:.25606,stopColor:"#0094F0"})),l.createElement("radialGradient",{id:"paint5_radial_103584_148497",cx:0,cy:0,r:1,gradientTransform:"matrix(-7.98381 15.2097 -17.5489 -41.5814 21.9464 13.7445)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.140259,stopColor:"#D471FF"}),l.createElement("stop",{offset:.830508,stopColor:"#509DF5",stopOpacity:0})),l.createElement("radialGradient",{id:"paint6_radial_103584_148497",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(20.2144 24.1169) rotate(90) scale(13.3025 40.1142)"},l.createElement("stop",{offset:.283333,stopColor:"#4F006F",stopOpacity:0}),l.createElement("stop",{offset:1,stopColor:"#4F006F"})),l.createElement("linearGradient",{id:"paint7_linear_103584_148497",x1:10.1071,y1:12.852,x2:21.9438,y2:13.0288,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#9DEAFF"}),l.createElement("stop",{offset:.201276,stopColor:"#3BD5FF"})),l.createElement("radialGradient",{id:"paint8_radial_103584_148497",cx:0,cy:0,r:1,gradientTransform:"matrix(-11.335 2.92732 -7.10275 -29.8256 21.9464 9.17977)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.0606583,stopColor:"#E4A7FE"}),l.createElement("stop",{offset:.538869,stopColor:"#E4A7FE",stopOpacity:0})),l.createElement("radialGradient",{id:"paint9_radial_103584_148497",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848)"},l.createElement("stop",{offset:.0811439,stopColor:"#367AF2"}),l.createElement("stop",{offset:.871875,stopColor:"#001A8F"})),l.createElement("radialGradient",{id:"paint10_radial_103584_148497",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.3715)"},l.createElement("stop",{offset:.586954,stopColor:"#2763E5",stopOpacity:0}),l.createElement("stop",{offset:.973806,stopColor:"#58AAFE"})))),l1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_148835)"}),l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint1_radial_103584_148835)"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6C3.89543 6 3 6.89543 3 8V9.85714C3 10.1333 2.77614 10.3571 2.5 10.3571C2.22386 10.3571 2 10.1333 2 9.85714V8C2 6.34315 3.34315 5 5 5H6.80952C7.08567 5 7.30952 5.22386 7.30952 5.5C7.30952 5.77614 7.08567 6 6.80952 6H5ZM9.02381 5.5C9.02381 5.22386 9.24767 5 9.52381 5H13.1429C13.419 5 13.6429 5.22386 13.6429 5.5C13.6429 5.77614 13.419 6 13.1429 6H9.52381C9.24767 6 9.02381 5.77614 9.02381 5.5ZM15.3571 5.5C15.3571 5.22386 15.581 5 15.8571 5H19.4762C19.7523 5 19.9762 5.22386 19.9762 5.5C19.9762 5.77614 19.7523 6 19.4762 6H15.8571C15.581 6 15.3571 5.77614 15.3571 5.5ZM21.6905 5.5C21.6905 5.22386 21.9143 5 22.1905 5H24C24.9321 5 25.8159 5.21289 26.6041 5.59317C26.8528 5.71316 26.9572 6.01205 26.8372 6.26076C26.7172 6.50947 26.4183 6.61382 26.1696 6.49383C25.5139 6.17753 24.7784 6 24 6H22.1905C21.9143 6 21.6905 5.77614 21.6905 5.5ZM28.7392 8.16283C28.988 8.04284 29.2868 8.14719 29.4068 8.3959C29.7871 9.18414 30 10.0679 30 11V12.8571C30 13.1333 29.7761 13.3571 29.5 13.3571C29.2239 13.3571 29 13.1333 29 12.8571V11C29 10.2216 28.8225 9.48606 28.5062 8.83042C28.3862 8.58171 28.4905 8.28282 28.7392 8.16283ZM2.5 12.1429C2.77614 12.1429 3 12.3667 3 12.6429V16.3571C3 16.6333 2.77614 16.8571 2.5 16.8571C2.22386 16.8571 2 16.6333 2 16.3571V12.6429C2 12.3667 2.22386 12.1429 2.5 12.1429ZM29.5 15.1429C29.7761 15.1429 30 15.3667 30 15.6429V19.3571C30 19.6333 29.7761 19.8571 29.5 19.8571C29.2239 19.8571 29 19.6333 29 19.3571V15.6429C29 15.3667 29.2239 15.1429 29.5 15.1429ZM2.5 18.6429C2.77614 18.6429 3 18.8667 3 19.1429V21C3 21.7784 3.17753 22.5139 3.49383 23.1696C3.61382 23.4183 3.50947 23.7172 3.26076 23.8372C3.01205 23.9572 2.71316 23.8528 2.59317 23.6041C2.21289 22.8159 2 21.9321 2 21V19.1429C2 18.8667 2.22386 18.6429 2.5 18.6429ZM29.5 21.6429C29.7761 21.6429 30 21.8667 30 22.1429V24C30 25.6569 28.6569 27 27 27H25.1905C24.9143 27 24.6905 26.7761 24.6905 26.5C24.6905 26.2239 24.9143 26 25.1905 26H27C28.1046 26 29 25.1046 29 24V22.1429C29 21.8667 29.2239 21.6429 29.5 21.6429ZM5.16283 25.7392C5.28282 25.4905 5.58171 25.3862 5.83042 25.5062C6.48606 25.8225 7.22159 26 8 26H9.80952C10.0857 26 10.3095 26.2239 10.3095 26.5C10.3095 26.7761 10.0857 27 9.80952 27H8C7.06791 27 6.18414 26.7871 5.3959 26.4068C5.14719 26.2868 5.04284 25.988 5.16283 25.7392ZM12.0238 26.5C12.0238 26.2239 12.2477 26 12.5238 26H16.1429C16.419 26 16.6429 26.2239 16.6429 26.5C16.6429 26.7761 16.419 27 16.1429 27H12.5238C12.2477 27 12.0238 26.7761 12.0238 26.5ZM18.3571 26.5C18.3571 26.2239 18.581 26 18.8571 26H22.4762C22.7523 26 22.9762 26.2239 22.9762 26.5C22.9762 26.7761 22.7523 27 22.4762 27H18.8571C18.581 27 18.3571 26.7761 18.3571 26.5Z",fill:"url(#paint2_linear_103584_148835)"}),l.createElement("path",{d:"M22 22.75C22 23.4404 21.4404 24 20.75 24H15V21C15 18.7909 13.2091 17 11 17H10V13.875C10 12.8395 10.8395 12 11.875 12H22V22.75Z",fill:"url(#paint3_radial_103584_148835)"}),l.createElement("path",{d:"M22 22.75C22 23.4404 21.4404 24 20.75 24H15V21C15 18.7909 13.2091 17 11 17H10V13.875C10 12.8395 10.8395 12 11.875 12H22V22.75Z",fill:"url(#paint4_radial_103584_148835)",fillOpacity:.7}),l.createElement("path",{d:"M17.248 14C16.5589 14 16 14.5589 16 15.248V17.2471C16 17.9385 15.4385 18.4986 14.7471 18.4971L14.1172 18.4951C13.384 17.5839 12.2606 17 11 17H10V15.875C10 14.8395 10.8395 14 11.875 14H17.248Z",fill:"url(#paint5_linear_103584_148835)"}),l.createElement("path",{d:"M17.248 14C16.5589 14 16 14.5589 16 15.248V17.2471C16 17.9385 15.4385 18.4986 14.7471 18.4971L14.1172 18.4951C13.384 17.5839 12.2606 17 11 17H10V15.875C10 14.8395 10.8395 14 11.875 14H17.248Z",fill:"url(#paint6_linear_103584_148835)",fillOpacity:.3}),l.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint7_linear_103584_148835)"}),l.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint8_radial_103584_148835)"}),l.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint9_linear_103584_148835)"}),l.createElement("path",{d:"M22 10.25C22 9.55964 21.4404 9 20.75 9H17.25C16.5596 9 16 9.55964 16 10.25V12.75C16 13.4404 16.5596 14 17.25 14H20.75C21.4404 14 22 13.4404 22 12.75V10.25Z",fill:"url(#paint10_radial_103584_148835)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint11_radial_103584_148835)"}),l.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint12_radial_103584_148835)",fillOpacity:.3}),l.createElement("path",{d:"M10.7227 28H8.83301L7.64648 25.7692C7.60417 25.6911 7.57161 25.6292 7.54883 25.5837C7.5293 25.5349 7.50814 25.4795 7.48535 25.4177H7.46582C7.43652 25.4958 7.40885 25.5593 7.38281 25.6081C7.35677 25.6569 7.32585 25.7171 7.29004 25.7887L6.05957 28H4.27734L6.41602 24.4951L4.42383 21H6.28906L7.34375 22.9916C7.38607 23.073 7.42188 23.1446 7.45117 23.2064C7.48372 23.265 7.51628 23.335 7.54883 23.4163H7.56836C7.61393 23.3219 7.64974 23.2471 7.67578 23.1918C7.70508 23.1364 7.74414 23.0632 7.79297 22.9721L8.88672 21H10.6641L8.64258 24.4414L10.7227 28Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_148835",x1:9.77778,y1:5,x2:11.9773,y2:27.3951,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint1_radial_103584_148835",cx:0,cy:0,r:1,gradientTransform:"matrix(14.7778 17.4167 -22.1667 6.53125 10.9444 10.7292)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint2_linear_103584_148835",x1:11.2188,y1:5.5,x2:13.4332,y2:26.8537,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("radialGradient",{id:"paint3_radial_103584_148835",cx:0,cy:0,r:1,gradientTransform:"matrix(-11.3333 -12.3333 9.54948 -8.77158 22 25)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.0647233,stopColor:"#379539"}),l.createElement("stop",{offset:.422149,stopColor:"#297C2D"}),l.createElement("stop",{offset:.703448,stopColor:"#15561C"})),l.createElement("radialGradient",{id:"paint4_radial_103584_148835",cx:0,cy:0,r:1,gradientTransform:"matrix(-4.79167 -4.79167 3.71016 -3.70864 13.6667 16.3333)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#073B10"}),l.createElement("stop",{offset:.992234,stopColor:"#084A13",stopOpacity:0})),l.createElement("linearGradient",{id:"paint5_linear_103584_148835",x1:8.0774,y1:19.6792,x2:15.7988,y2:19.6792,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#52D17C"}),l.createElement("stop",{offset:.328512,stopColor:"#4AA647"})),l.createElement("linearGradient",{id:"paint6_linear_103584_148835",x1:15.6393,y1:14,x2:15.6393,y2:21.8896,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#29852F"}),l.createElement("stop",{offset:.499968,stopColor:"#4AA647",stopOpacity:0})),l.createElement("linearGradient",{id:"paint7_linear_103584_148835",x1:10.2763,y1:17.7979,x2:19.2103,y2:12.4439,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#66D052"}),l.createElement("stop",{offset:1,stopColor:"#85E972"})),l.createElement("radialGradient",{id:"paint8_radial_103584_148835",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.23 13.6212) rotate(-180) scale(3.75784 11.5142)"},l.createElement("stop",{offset:.292495,stopColor:"#4EB43B"}),l.createElement("stop",{offset:1,stopColor:"#72CC61",stopOpacity:0})),l.createElement("linearGradient",{id:"paint9_linear_103584_148835",x1:13.3811,y1:14.0608,x2:10,y2:14.0608,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.183694,stopColor:"#C0E075",stopOpacity:0}),l.createElement("stop",{offset:1,stopColor:"#D1EB95"})),l.createElement("radialGradient",{id:"paint10_radial_103584_148835",cx:0,cy:0,r:1,gradientTransform:"matrix(-5.96857 -5.69975 4.89508 -6.9497 21.9686 14.6997)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.439983,stopColor:"#79E96D"}),l.createElement("stop",{offset:1,stopColor:"#D0EB76"})),l.createElement("radialGradient",{id:"paint11_radial_103584_148835",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848 52.3364)"},l.createElement("stop",{stopColor:"#20A85E"}),l.createElement("stop",{offset:.94375,stopColor:"#09442A"})),l.createElement("radialGradient",{id:"paint12_radial_103584_148835",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},l.createElement("stop",{offset:.580357,stopColor:"#33A662",stopOpacity:0}),l.createElement("stop",{offset:.973806,stopColor:"#98F0B0"})))),u1e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_157556)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_157556)"}),l.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_157556)"}),l.createElement("path",{d:"M14.9 10.2C14.7709 10.0279 14.5461 9.95763 14.3419 10.0257C14.1377 10.0937 14 10.2848 14 10.5V14.5C14 14.7762 14.2239 15 14.5 15C14.7761 15 15 14.7762 15 14.5V12L15.6 12.8C15.6944 12.9259 15.8426 13 16 13C16.1574 13 16.3056 12.9259 16.4 12.8L17 12V14.5C17 14.7762 17.2239 15 17.5 15C17.7761 15 18 14.7762 18 14.5V10.5C18 10.2848 17.8623 10.0937 17.6581 10.0257C17.4539 9.95763 17.2291 10.0279 17.1 10.2L16 11.6667L14.9 10.2Z",fill:"url(#paint3_linear_103584_157556)"}),l.createElement("path",{d:"M8.5 18.0001C8.22386 18.0001 8 18.2239 8 18.5001C8 18.7762 8.22386 19.0001 8.5 19.0001H23.5C23.7761 19.0001 24 18.7762 24 18.5001C24 18.2239 23.7761 18.0001 23.5 18.0001H8.5Z",fill:"url(#paint4_linear_103584_157556)"}),l.createElement("path",{d:"M8.5 21.0001C8.22386 21.0001 8 21.2239 8 21.5001C8 21.7762 8.22386 22.0001 8.5 22.0001H23.5C23.7761 22.0001 24 21.7762 24 21.5001C24 21.2239 23.7761 21.0001 23.5 21.0001H8.5Z",fill:"url(#paint5_linear_103584_157556)"}),l.createElement("path",{d:"M19.5 10C19.7761 10 20 10.2239 20 10.5V14H21.5C21.7761 14 22 14.2239 22 14.5C22 14.7762 21.7761 15 21.5 15H19.5C19.2239 15 19 14.7762 19 14.5V10.5C19 10.2239 19.2239 10 19.5 10Z",fill:"url(#paint6_linear_103584_157556)"}),l.createElement("path",{d:"M10.9472 10.2765C10.8237 10.0296 10.5234 9.92945 10.2764 10.0529C10.0294 10.1764 9.92929 10.4768 10.0528 10.7238L10.941 12.5002L10.0528 14.2765C9.92929 14.5235 10.0294 14.8239 10.2764 14.9474C10.5234 15.0709 10.8237 14.9708 10.9472 14.7238L11.5 13.6182L12.0528 14.7238C12.1763 14.9708 12.4766 15.0709 12.7236 14.9474C12.9706 14.8239 13.0707 14.5235 12.9472 14.2765L12.059 12.5002L12.9472 10.7238C13.0707 10.4768 12.9706 10.1764 12.7236 10.0529C12.4766 9.92945 12.1763 10.0296 12.0528 10.2765L11.5 11.3821L10.9472 10.2765Z",fill:"url(#paint7_linear_103584_157556)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_103584_157556",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_103584_157556",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_103584_157556",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint4_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint5_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint6_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint7_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"}))));function Ok(e){const{fileType:t,className:n}=e;switch(t){case"application/pdf":return c.jsx(Xpe,{className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":case"application/vnd.ms-word.document.macroEnabled.12":return c.jsx(c1e,{className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":case"application/vnd.ms-word.template.macroEnabled.12":return c.jsx(Zpe,{className:n});case"text/plain":return c.jsx(i1e,{className:n});case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":case"application/vnd.ms-excel.sheet.macroEnabled.12":return c.jsx(Kpe,{className:n});case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":case"application/vnd.ms-excel.template.macroEnabled.12":return c.jsx(l1e,{className:n});case"text/csv":return c.jsx(qpe,{className:n});case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":return c.jsx(s1e,{className:n});case"application/vnd.openxmlformats-officedocument.presentationml.template":case"application/vnd.ms-powerpoint.template.macroEnabled.12":return c.jsx(t1e,{className:n});case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":return c.jsx(n1e,{className:n});case"application/json":case"text/markdown":case"image/svg+xml":case"application/xml":case"application/x-sql":case"text/javascript":case"text/css":return c.jsx($pe,{className:n});case"application/onenote":return c.jsx(Jpe,{className:n});case"application/rtf":return c.jsx(r1e,{className:n});case"application/msonenote":return c.jsx(a1e,{className:n});case"text/html":return c.jsx(Qpe,{className:n});case"text/xml":return c.jsx(u1e,{className:n});case"application/vnd.ms-project":return c.jsx(o1e,{className:n});case"image/png":case"image/jpeg":return c.jsx(e1e,{className:n});default:return c.jsx(Ype,{className:n})}}function d1e(e){switch(e){case"application/pdf":return"bg-system-red-350";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return"bg-midnight-300";case"text/plain":return"bg-spot-blue-300";case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return"bg-neutral-300"}}function m1e(e){const{t}=Y();switch(e){case"application/pdf":return t("fileUpload.fileTypeDisplayPdf");case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return t("fileUpload.fileTypeDisplayDoc");case"text/plain":return t("fileUpload.fileTypeDisplayTxt");case"application/json":return t("fileUpload.fileTypeDisplayJson");case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":return t("fileUpload.fileTypeDisplayXlsx");case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":return t("fileUpload.fileTypeDisplayPptx");case"text/csv":return t("fileUpload.fileTypeDisplayCsv");case"text/markdown":return t("fileUpload.fileTypeDisplayMarkdown");default:return t("fileUpload.fileTypeDisplayDefault")}}const f1e=l.lazy(()=>V(()=>Promise.resolve().then(()=>A3),void 0));function O3(e){var b;const{onRemove:t,fileName:n,fileType:s,isUploading:o,role:r,ariaLabel:a,layout:i="grid"}=e,{t:u}=Y(),d=d1e(s),m=m1e(s),f=i==="list",p=l.useCallback(()=>{t==null||t(),fr({msg:u("fileUpload.fileRemoved")})},[t,u]),g=H("file-upload-card-v2"),C=!!((b=ae.instance().config().composer)!=null&&b.smallAttachmentCard)||g,v=c.jsx(rn,{className:F("absolute inset-0 grid place-items-center ",{"bg-white/80 dark:bg-white/45":!f,"bg-transparent":f}),children:o?c.jsxs(c.Fragment,{children:[c.jsx(l.Suspense,{fallback:c.jsx("div",{"aria-hidden":!0}),children:c.jsx(f1e,{type:"spinnerThemed",className:f?"size-8":"size-11"})}),c.jsx(Ti,{msg:u("fileUpload.uploadingFile"),type:"polite"})]}):null});return c.jsxs(ge.div,{className:de("relative flex justify-center gap-2 overflow-hidden rounded-xl",{"mt-1 h-[58px] w-auto flex-row items-center pe-8":C,"h-32 w-44 flex-col":!C,"w-full bg-transparent !pe-0":f,"border border-black/8 bg-acrylic-thin-fallback-light/60 p-3 dark:border-white/8 dark:bg-midnight-800/80 sm:w-56":!f}),layout:"position",initial:Be,animate:tt,exit:Be,role:r,"aria-label":a,children:[g?c.jsx("div",{className:F("relative",{"h-8 w-8":C&&f}),children:f&&o?v:c.jsx(Ok,{fileType:s,className:"size-8"})}):c.jsx("div",{className:de("grid aspect-square size-8 place-items-center self-start rounded-full text-black",d),children:c.jsx(Wpe,{fileType:s,className:"size-5"})}),c.jsxs("div",{className:de({"min-w-0 flex-1":C}),children:[c.jsx("p",{className:de("font-ligatures-none truncate text-sm",{"overflow-hidden whitespace-nowrap":C}),children:n}),c.jsx("p",{className:"line-clamp-1 text-foreground-600 text-xs",children:m})]}),t&&!o&&c.jsx("button",{type:"button",title:u("fileUpload.removeFileWithName",{name:n}),"aria-label":u("fileUpload.removeFileWithName",{name:n}),onClick:p,className:F("rounded-full  p-1 ",{"border border-black/20 text-foreground-850 dark:border-white/20":!g,"bg-transparent text-foreground-450":g,"absolute end-0.5 top-0.5 m-1":!f}),children:c.jsx(nn,{className:"size-3"})}),f?null:v]})}function p1e(e){const{contentType:t,name:n,url:s}=e,{t:o}=Y(),r=se(xn),a=M(De),i=l.useRef(!1);l.useEffect(()=>{if(i.current)return;i.current=!0;const d=t.startsWith("image/")?"image":"file";D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:d,eventInfo_conversationId:a,eventInfo_impressionScenario:"renderArtifact",eventInfo_customData:JSON.stringify({url:s}),eventInfo_fileType:t}})},[s,n,a,t]);const u=l.useCallback(()=>{const d={url:s,fileName:n};D.trackEvent({name:"system",data:{eventName:"copilotClick",eventInfo_clickScenario:"downloadArtifact",eventInfo_clickSource:"fileDownloadButton",eventInfo_conversationId:a,eventInfo_customData:JSON.stringify({url:s}),eventInfo_fileType:t}}),Pk(d).catch(m=>{const f=m instanceof Error?m.message:"unknown file card error";p5(f),f.includes("status: 404")?r({title:o("common.fileUnavailable"),subtitle:o("common.fileUnavailableDetails"),dismissAfter:3e3}):r({title:o("common.downloadFailed"),subtitle:o("common.downloadFailedDetails",{fileName:n}),dismissAfter:3e3})})},[s,n,o,r,a,t]);return s?c.jsxs("div",{className:"flex w-fit max-w-full items-center gap-4 md:max-w-96",children:[c.jsx(O3,{fileName:n,fileType:t}),c.jsx(re,{title:o("common.download"),size:"36-sm",variant:"circle",color:"subtle-dimmed-inverted",onClick:u,"aria-label":o("common.download"),className:"shrink-0 border border-stroke-350",children:c.jsx(vd,{className:"size-5"})})]}):(p5("No URL provided"),null)}const Dk=.6,h1e=new Set(["html"]);function Ir(e={},t={}){return{start:{...e,opacity:0},end:n=>({...t,opacity:1,transition:{delay:n,ease:"easeInOut",duration:Dk}})}}function uAe(e,t){if(!h1e.has(e))return!1;const n=t.trim();return!!(e==="html"&&/(<\/html>)(\n?```)?$/.test(n)&&n.match(/^(<!DOCTYPE html>|<html>|<!doctype html>)/))}const g1e=Ir();function v1e(e){const{items:t,shouldAnimate:n,BlockRenderer:s,delay:o}=e;return c.jsx(ge.blockquote,{className:"flex flex-col gap-3 border-s-2 border-foreground-300 ps-3",variants:g1e,initial:n?"start":"end",animate:"end",custom:o,children:c.jsx(s,{blocks:t,shouldAnimate:n})})}const Em=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12.0001 1.99805C17.5238 1.99805 22.0016 6.47589 22.0016 11.9996C22.0016 17.5233 17.5238 22.0011 12.0001 22.0011C6.47638 22.0011 1.99854 17.5233 1.99854 11.9996C1.99854 6.47589 6.47638 1.99805 12.0001 1.99805ZM14.939 16.4993H9.06118C9.71322 18.9135 10.8466 20.5011 12.0001 20.5011C13.1536 20.5011 14.2869 18.9135 14.939 16.4993ZM7.5084 16.4999L4.78591 16.4998C5.74425 18.0328 7.1777 19.2384 8.88008 19.9104C8.3578 19.0906 7.92681 18.0643 7.60981 16.8949L7.5084 16.4999ZM19.2143 16.4998L16.4918 16.4999C16.168 17.8337 15.7004 18.9995 15.119 19.9104C16.716 19.2804 18.0757 18.1814 19.0291 16.7833L19.2143 16.4998ZM7.09351 9.99895H3.7359L3.73115 10.0162C3.57906 10.6525 3.49854 11.3166 3.49854 11.9996C3.49854 13.0558 3.69112 14.0669 4.0431 14.9999L7.21626 14.9995C7.07396 14.0504 6.99854 13.0422 6.99854 11.9996C6.99854 11.3156 7.031 10.6464 7.09351 9.99895ZM15.397 9.99901H8.60316C8.53514 10.6393 8.49853 11.309 8.49853 11.9996C8.49853 13.0591 8.58468 14.0694 8.73827 14.9997H15.2619C15.4155 14.0694 15.5016 13.0591 15.5016 11.9996C15.5016 11.309 15.465 10.6393 15.397 9.99901ZM20.2647 9.99811L16.9067 9.99897C16.9692 10.6464 17.0016 11.3156 17.0016 11.9996C17.0016 13.0422 16.9262 14.0504 16.7839 14.9995L19.9571 14.9999C20.309 14.0669 20.5016 13.0558 20.5016 11.9996C20.5016 11.3102 20.4196 10.64 20.2647 9.99811ZM8.88114 4.08875L8.85823 4.09747C6.81092 4.91218 5.1549 6.49949 4.25023 8.49935L7.29835 8.49972C7.61171 6.74693 8.15855 5.221 8.88114 4.08875ZM12.0001 3.49805L11.8844 3.50335C10.619 3.6191 9.39651 5.62107 8.8288 8.4993H15.1714C14.6052 5.62914 13.388 3.63033 12.1264 3.50436L12.0001 3.49805ZM15.1201 4.08881L15.2269 4.2629C15.8961 5.37537 16.4043 6.83525 16.7018 8.49972L19.7499 8.49935C18.8853 6.58795 17.3343 5.05341 15.4113 4.21008L15.1201 4.08881Z"})),dAe=Object.freeze(Object.defineProperty({__proto__:null,default:Em},Symbol.toStringTag,{value:"Module"}));function hs(e){l.useEffect(()=>(window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}),[e])}const jk=l.createContext(null);function C1e(e){const{children:t,enabled:n}=e;return c.jsx(jk.Provider,{value:n,children:t})}function y1e(){return l.useContext(jk)===!0}function b1e(){const e=on("kill-rich-citations"),t=y1e();return!!(!e&&t)}const wm=l.createContext(void 0);function Fk(e,t,n){cI({source:e==="row"?"citationCardRowButton":"citationReferencePanelCard",scenario:"openLink",conversationId:t,destination:n})}function mAe(e){Ce({source:"citationCardShowAllButton",scenario:"openPanel",conversationId:e})}function $x(e,t,n){cI({source:e==="inline"?"inlineCitationLink":"hoverCitationLink",scenario:"openLink",conversationId:t,destination:n})}function x1e(e,t){let n;e==="card"?n="citationCardRowButton":e==="inline"?n="inlineCitationButton":n="citations",cn({page:"chat",element:n,scenario:"shown",customData:t})}const S1e=Ir(),E1e=150;function w1e(e){const{url:t,title:n,index:s,shouldAnimate:o,delay:r,onCitationClick:a,onCitationHover:i,onCitationHoverEnd:u,subCitations:d}=e,m=l.useContext(wm),f=l.useId(),p=l.useId(),g=PC(),C=M(De),v=b1e(),b=iT(),y=H("passage-highlight")&&v,[E,x]=l.useState(!1),[I,_]=l.useState(!1),[T,A]=l.useState(!1),[k,R]=l.useState(0),P=l.useRef(null),B=l.useRef(null),U=l.useRef(null),$=l.useRef(null),Q=l.useRef(null),te=l.useRef(null),X=E||I||T,ne=l.useRef(!1),q=Ue=>{U.current&&(clearTimeout(U.current),U.current=null),Ue?_(!0):U.current=setTimeout(()=>{_(!1)},150)},{refs:Z,floatingStyles:J}=BC({placement:"bottom",elements:{reference:P.current},middleware:v?[pa(6),ha()]:[pa(6),kl(),ha()],strategy:v?"fixed":"absolute",whileElementsMounted:v?_a:void 0});ho({onOutsideEvent:()=>x(!1),elements:[Z.floating,P],includeScroll:!1,invokeOnce:!0}),hs(Ue=>{(Ue.key==="Escape"||Ue.key==="Control")&&x(he=>(he&&P.current&&P.current.focus(),!1))}),l.useEffect(()=>{v&&x1e("inline")},[v]),l.useEffect(()=>()=>{U.current&&clearTimeout(U.current),te.current&&clearTimeout(te.current)},[]);const W=()=>{if(v){if(d&&d.length>0){if(!d[0])return;if(b||d.length===1){const Ue=co(t);$x("inline",C,Ue),Eo(d[0].url),ne.current=!0,A(!1),_(!1)}if(!b){if(!m||!C)return;const Ue=d.map(he=>he.url);if(Ue.length<=1)return;Il({type:"citations",data:{conversationId:C,messageId:m,targetCitationIds:Ue}})}}}else x(!0)},le=()=>{$t({source:"citationLink",conversationId:C,messageId:m,destination:co(t)}),x(!1),a&&a()},_e=()=>{const Ue=co(t);$x("hover",C,Ue),a&&a()},Ae=l.useCallback(()=>{v&&b&&(_(!0),y&&(i==null||i()))},[_,v,b,y,i]),K=l.useCallback(()=>{v&&b&&(_(!1),y&&(u==null||u()))},[_,v,b,y,u]),be=()=>{if(v){K();return}q(!1)},Me=()=>{if(v){Ae();return}q(!0)},je=()=>{v&&b&&(ne.current?ne.current=!1:(A(!0),setTimeout(()=>{B.current&&P.current&&I1e(B.current,P.current)},E1e),y&&(i==null||i())))},oe=Ue=>{if(v){const he=Ue.relatedTarget,ze=B.current;ze!=null&&ze.contains(he)||(A(!1),y&&(u==null||u()))}},ie=Ue=>{if(v&&X&&Ue.key==="Tab"&&!Ue.shiftKey){const he=B.current;if(he){const ze=qx(he);ze[0]&&(Ue.preventDefault(),ze[0].focus())}}},ee=Ue=>{var he,ze,It,kt;if(Ue.key==="Escape")T&&(A(!1),ne.current=!0,(he=P.current)==null||he.focus(),Ue.preventDefault());else if(Ue.key==="Tab"){const we=B.current;if(we){const Ee=Array.from(qx(we)).filter(dt=>!dt.hasAttribute("data-tabster-dummy")&&!dt.hasAttribute("disabled")),Ke=Array.from(Ee).indexOf(Ue.target);Ke===-1||Ue.shiftKey&&Ke===0||!Ue.shiftKey&&Ke===Ee.length-1?(A(!1),ne.current=!0,(ze=P.current)==null||ze.focus(),Ue.preventDefault()):Ue.shiftKey?((It=Ee[Ke-1])==null||It.focus(),Ue.preventDefault()):((kt=Ee[Ke+1])==null||kt.focus(),Ue.preventDefault())}}},me=Ue=>he=>{if(he.preventDefault(),!(d!=null&&d.length))return;const ze=Ue==="previous",It=ze?$:Q,kt=ze?Q:$,we=document.activeElement===It.current,Ee=ze?k===1:k===d.length-2;R(Ke=>{let dt;return ze?Ke>0?dt=Ke-1:dt=d.length-1:Ke<d.length-1?dt=Ke+1:dt=0,we&&Ee&&kt.current&&(te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{var Re;(Re=kt.current)==null||Re.focus(),te.current=null},0)),dt})},Pe=me("previous"),Ve=me("next"),Qe=Ts(t),st=d&&d[0],ve=l.useMemo(()=>(st==null?void 0:st.publisher)??B2(t),[st==null?void 0:st.publisher,t]),xe=d&&d[k],Te=l.useMemo(()=>(xe==null?void 0:xe.publisher)??B2((xe==null?void 0:xe.url)??t),[xe==null?void 0:xe.publisher,xe==null?void 0:xe.url,t]),Ze=d&&d.length>=2,Le=v?`${ve} ${Ze?z("chat.groupedCitationButtonLabel",{subCitationCount:d.length-1}):""}`:s,Ye=z("chat.citationPopoverButtonLabel",{citationNumber:Le});return c.jsxs(ge.span,{initial:o?"start":"end",animate:"end",variants:S1e,custom:r,className:F("group relative inline-block pb-1 align-middle",v?"mx-1 h-6":"mx-0.5 h-5 w-4"),"data-copy":"false","data-tabster":'{"uncontrolled": {}}',children:[c.jsx("button",{id:p,"aria-expanded":E||I||T,"aria-controls":f,"aria-label":Ye,ref:P,type:"button",className:F("flex size-full items-center justify-center rounded-md pt-px text-2xs [font-variation-settings:'opsz'_40,_'wght'_450] hover:bg-accent-250 focus:bg-accent-250 contrast-more:border",E&&"pointer-events-none",v?"px-1":"mx-px",v?"bg-black/5 text-foreground-750 dark:bg-white/5 hover:dark:bg-accent-250 focus:dark:bg-accent-250":"bg-accent-200 text-foreground-800 dark:bg-muted-300 hover:dark:bg-background-400 focus:dark:bg-background-400"),onClick:W,onPointerEnter:Me,onPointerLeave:be,onFocus:je,onBlur:oe,onKeyDownCapture:ie,children:v?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:F(Ze&&"me-1","max-w-24 truncate"),children:ve}),Ze&&c.jsxs("span",{children:["+",d.length-1]})]}):s}),!v&&X&&c.jsx("span",{id:f,role:"dialog","aria-labelledby":p,className:F("absolute w-screen px-4 max-sm:mb-2 sm:w-[350px] sm:px-0",lt.citations),style:J,ref:Z.setFloating,onPointerEnter:()=>q(!0),onPointerLeave:()=>q(!1),children:c.jsx(ge.span,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{scale:{duration:.2},opacity:{duration:.15}},className:"origin-top-left",style:uv,children:c.jsx("a",{tabIndex:0,onClick:le,className:"flex w-full rounded-2xl border border-stroke-100 bg-background-100 p-3 shadow-lg dark:bg-background-250",href:co(t),target:"_blank",rel:g,children:c.jsxs("span",{className:"w-full flex-1 space-y-0.5",children:[c.jsx("span",{className:"line-clamp-1 text-sm-strong",children:n}),c.jsx("span",{className:"line-clamp-1 flex items-center gap-1.5 text-foreground-600 text-xs",children:Qe})]})})})}),v&&c.jsx(pt,{children:X&&c.jsx(Nl,{children:c.jsx("span",{id:f,role:"dialog","aria-labelledby":p,className:F("absolute w-screen max-w-[350px] px-4 max-sm:mb-2 sm:px-0",lt.citationHoverCard),style:J,ref:Ue=>{Z.setFloating(Ue),B.current=Ue},"data-tabster":'{"uncontrolled": {}}',onPointerEnter:()=>_(!0),onPointerLeave:()=>_(!1),onKeyDownCapture:ee,children:c.jsx(ge.span,{className:"block origin-top",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15,delay:.15},children:c.jsx("span",{className:"flex w-full rounded-2xl border border-stroke-100 bg-background-100 p-3 shadow-lg dark:bg-background-250",children:c.jsxs("span",{className:"w-full flex-1 flex-col",children:[c.jsxs("a",{href:co((xe==null?void 0:xe.url)??t),target:"_blank",rel:g,onClick:_e,className:"block",children:[c.jsxs("h2",{className:"flex w-full items-center gap-1.5",children:[c.jsx("span",{className:"inline-block size-3.5 rounded",children:xe!=null&&xe.iconUrl?c.jsx("img",{src:xe.iconUrl,alt:z("citationCards.citationIcon"),className:"size-full rounded bg-white object-cover"}):c.jsx(Em,{className:"size-3.5 text-foreground-700 dark:text-foreground-800"})}),c.jsx("span",{className:"line-clamp-1 text-sm",children:Te})]}),c.jsx("span",{className:"mt-1 line-clamp-1 text-sm-medium",children:xe==null?void 0:xe.title}),c.jsx("span",{className:"mt-1 line-clamp-2 text-foreground-700 text-sm",children:xe==null?void 0:xe.snippet}),c.jsx("span",{className:"mt-1 line-clamp-1 truncate text-foreground-600 text-xs",children:xe==null?void 0:xe.url})]}),d&&d.length>1&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"my-2 h-px bg-stroke-700/12"}),c.jsxs("span",{className:"mt-2 flex justify-between",children:[c.jsxs("div",{className:"flex gap-1",children:[c.jsx(h5,{ref:$,onClick:Pe,disabled:k===0,title:z("citationCards.previousCitation"),children:c.jsx(ds,{className:"size-4 text-foreground-800 ltr:rotate-180"})}),c.jsx(h5,{ref:Q,onClick:Ve,disabled:k===d.length-1,title:z("citationCards.nextCitation"),children:c.jsx(ds,{className:"size-4 text-foreground-800 rtl:rotate-180"})})]}),c.jsxs("span",{className:"text-foreground-600 text-sm",children:[k+1," / ",d.length]})]})]})]})})})})})})]},"citation")}const I1e=(e,t)=>{const n=e.getBoundingClientRect(),s=2,o=[[n.left+s,n.top+s],[n.right-s,n.top+s],[n.left+s,n.bottom-s],[n.right-s,n.bottom-s],[n.left+n.width/2,n.top+n.height/2]];let r=!1;for(const[a,i]of o){if(a===void 0||i===void 0)continue;const u=document.elementFromPoint(a,i);if(u&&u!==e&&!e.contains(u)&&!u.contains(e)){r=!0;break}}r&&t.scrollIntoView({behavior:"smooth",block:"center"})};function qx(e,t={}){const{includeDisabled:n}=t,s=n?'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])':'button:not([disabled]), [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';return e.querySelectorAll(s)}const h5=l.forwardRef((e,t)=>{const{title:n,onClick:s,disabled:o,children:r}=e;return c.jsx("button",{ref:t,type:"button",title:n,disabled:o,onClick:s,"aria-label":n,className:F("relative flex",o&&"opacity-20",!o&&"hover:opacity-90",lm),children:r})});h5.displayName="NavigationButton";const _1e=w1e,Uk=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.3817 22 8.81782 21.6146 7.41286 20.888L3.58704 21.9553C2.92212 22.141 2.23258 21.7525 2.04691 21.0876C1.98546 20.8676 1.98549 20.6349 2.04695 20.4151L3.11461 16.5922C2.38637 15.186 2 13.6203 2 12C2 6.47715 6.47715 2 12 2ZM12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 13.4696 3.87277 14.8834 4.57303 16.1375L4.72368 16.4072L3.61096 20.3914L7.59755 19.2792L7.86709 19.4295C9.12006 20.1281 10.5322 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM8.75 13H13.2483C13.6625 13 13.9983 13.3358 13.9983 13.75C13.9983 14.1297 13.7161 14.4435 13.35 14.4932L13.2483 14.5H8.75C8.33579 14.5 8 14.1642 8 13.75C8 13.3703 8.28215 13.0565 8.64823 13.0068L8.75 13H13.2483H8.75ZM8.75 9.5H15.2545C15.6687 9.5 16.0045 9.83579 16.0045 10.25C16.0045 10.6297 15.7223 10.9435 15.3563 10.9932L15.2545 11H8.75C8.33579 11 8 10.6642 8 10.25C8 9.8703 8.28215 9.55651 8.64823 9.50685L8.75 9.5H15.2545H8.75Z"})),fAe=Object.freeze(Object.defineProperty({__proto__:null,default:Uk},Symbol.toStringTag,{value:"Module"})),T1e=100,A1e=70,k1e=4,Ai=qe(),g5=N(null),Bk=N("");let m0=null;function M1e(e){Ai.set(Bk,e)}function Zx(){return Ai.get(Bk)}function Lc(e){Ai.set(wC,e)}function Vk(){const e=Ai.get(g5);e&&(e.abort(),Ai.set(g5,null))}function N1e(){Vk();const e=new AbortController;return Ai.set(g5,e),e}function R1e(e,t){const n=new URL("https://www.bing.com/AS/Suggestions/V2?pt=page.chat"),s=Pt.resolvedLanguage,o=pe(Rn);return n.searchParams.set("setlang",(s==null?void 0:s.toLowerCase())??"en"),n.searchParams.set("cc",(o==null?void 0:o.toLowerCase())??"us"),n.searchParams.set("qry",e.toLowerCase()),n.searchParams.set("cvid",t),ye("encacsc")&&n.searchParams.set("ascopilot1","1"),ye("enblsuggrndmzn")&&n.searchParams.set("ascopilot2","1"),ye("encpsrchdata")&&n.searchParams.set("ascopilot3","1"),ye("zi-autosuggest")&&n.searchParams.set("ascopilot4","1"),n.toString()}async function P1e(e){const{query:t,conversationId:n,abortController:s}=e,o={query:t.toLowerCase()};return(await St(`/conversations/${n}/autosuggest`,_Z,{query:o,options:{method:"GET",signal:s.signal}})).data}async function L1e(e){const{query:t,conversationId:n,abortController:s}=e,o=R1e(t,n);return fetch(o,{signal:s.signal}).then(r=>r.json())}async function O1e(e){return ye("autosuggest-picasso")?P1e(e):L1e(e)}function D1e(e,t){const n=t.text??t.st??"",s=e.toLowerCase().split(/\s+/),o=n.toLowerCase().split(/\s+/);let r=0;for(let d=0;d<Math.min(s.length,o.length)&&s[d]===o[d];d+=1)r+=1;const a=n.split(/\s+/),i=a.slice(0,r).join(" "),u=a.slice(r).join(" ");return{original:n,sliced:u,prefill:i+(i?" ":"")}}async function j1e(e){var n;const t=pe(De);if(t)try{const s=N1e(),o=performance.now(),r=await O1e({query:e,conversationId:t,abortController:s});if(e===Zx()){const a="suggestions"in r?r.suggestions:r.s;let i=e;if("qc"in r&&typeof r.qc.q=="string"&&(i=r.qc.q),!a.length){Lc(null),Yt({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:t})});return}const u=a.filter(d=>"text"in d&&"source"in d?typeof d.text=="string"&&typeof d.source=="string":"st"in d&&"t"in d?typeof d.st=="string"&&typeof d.t=="string":!1).map(d=>D1e(i,d));if(!u.length){Lc(null),Yt({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:t})});return}Lc({prefill:((n=u[0])==null?void 0:n.prefill)??e,conversationId:t,type:"BCT",suggestions:u.slice(0,k1e)}),po({feature:"fetchChatAutoComplete",duration:performance.now()-o})}}catch(s){s instanceof DOMException&&s.name==="AbortError"||D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"autosuggest",eventInfo_errorMessage:`${s}`,eventInfo_details:"Autosuggest API error"}}),e===Zx()&&Lc(null)}}function F1e(e){m0&&clearTimeout(m0),m0=setTimeout(()=>{j1e(e)},T1e)}function Hk(e){var r;let t=(r=ae.instance().config().landingPage)==null?void 0:r.regexForAutoSuggest;ye("zi-autosuggest")&&(t=/\S*/);const n=ye("autosuggest")||ye("edge-autosuggest"),s=pe(De);if(!n||!t||!t.test(e)||e.length>=A1e){Lc(null);return}M1e(e);const o=ye("zi-autosuggest");!s||e===""&&!o?Lc(null):F1e(e)}function _u(){Vk(),Ai.set(wC,null)}const zk=qe(),D3=N(null),j3=N(null);function Gk(e){zk.set(D3,e)}function Wk(e){zk.set(j3,e)}function U1e(e,t){var a;const n={eventInfo_inputLength:e.length};let s=n;const o=pe(D3);if(o){const{source:i,type:u,prompt:d}=o;i==="widgets"?s={...n,widget:u,widgetPromptLength:d.length}:i==="guideLink"?s={...n,guideLinkLength:d.length,guideLinkText:d}:s={...n,pill:u,pillPromptLength:d.length}}const r=pe(j3);return r&&(s={...s,autoCompleteLength:r.prompt.length}),(t==null?void 0:t.length)!==0&&((a=t==null?void 0:t[0])!=null&&a.scenario)&&(s={...s,uploadFileScenario:t[0].scenario}),JSON.stringify(s)}function B1e(e){const t=pe(D3),n=pe(j3),s=t==null?void 0:t.prompt.trim(),o=e.trim(),r=n==null?void 0:n.prompt.trim(),a=n==null?void 0:n.prefix.trim(),i=o.toLowerCase()===(r==null?void 0:r.toLowerCase());return!i&&!t?null:i?!s||!o.toLowerCase().includes(s.toLowerCase())?"autoComplete":a&&a.length>s.length?(t==null?void 0:t.source)==="widgets"?"widgetWithTextAndAutoComplete":"pillWithTextAndAutoComplete":(a==null?void 0:a.length)===s.length?(t==null?void 0:t.source)==="widgets"?"widgetWithAutoComplete":"pillWithAutoComplete":"autoComplete":!s||!o.toLowerCase().includes(s.toLowerCase())?null:o.length>s.length?(t==null?void 0:t.source)==="widgets"?"widgetWithText":(t==null?void 0:t.source)==="guideLink"?"guideLinkWithText":"pillWithText":(t==null?void 0:t.source)==="widgets"?"widget":(t==null?void 0:t.source)==="guideLink"?"guideLink":"pill"}function V1e(){Gk(null),Wk(null)}const H1e=qe();function $k(e){const{text:t,attachments:n,inputMethod:s}=e,o=fX(),r=F2(),a=e1({breakpoint:"sm"}),i=yo(),u=pe(bo),d=!Rt("kill-chat-message-preview"),m=i==="computerUse",f=ye("long-term-memory"),p=ye("conversation-drift-detection"),g=d&&(yie()&&i==="smart"||f||p)&&ES(),v=XT()&&!u&&!m;if(t||wu("starter-prompts"),qa(o.length<=0||t.length===0),KI(!1),H1e.set(L1,void 0),CX(s??"user"),r&&FA("typing"),a&&Ice(),v&&Hk(t),g)try{Fn.sendMessagePreview({text:t,inputMethod:"text",filesWithAttachment:n??[]})}catch{}}function Cd(e){const{prompt:t,prefillSource:n}=e;document.querySelector(`#${u1}`)&&(_u(),R2(t),$k({text:t,inputMethod:n}),v5("end"))}function v5(e=null){const t=document.querySelector(`#${u1}`);if(!t)return;requestAnimationFrame(()=>{if(t.focus(),e===null)return;const s=t.value.length;if(e==="selectAll"){t.setSelectionRange(0,s);return}let o;e==="start"?o=0:o=s,t.setSelectionRange(o,o)})}async function F3(e){const{actionType:t,id:n,prompt:s,source:o}=e;switch(t){case"prefillComposer":{if(s){n&&Gk({prompt:s,type:n,source:o});let r="starterPill";o==="widgets"?r="widget":o==="guideLink"&&(r="guideLink"),Cd({prompt:s,prefillSource:r})}break}case"sendMessage":{if(s)try{fp(!0),await Qs(),await Fn.submitMessage({text:s,inputMethod:"text"})}finally{fp(!1)}break}}}const z1e=Ir(),G1e="text-start text-base-medium underline-offset-4 underline decoration-dotted hover:decoration-solid hover:cursor-pointer";function W1e(e){const{url:t,text:n,shouldAnimate:s,delay:o}=e,{t:r}=Y(),a=H("guided-conversations-cocoa"),i=H("guided-conversations-caramel"),u=async()=>{const f=mae(t)??r("guidedConversation.prefix",{topic:n});Ce({source:"guidedConversationLink",scenario:"prefill",destination:"composer"}),await F3({actionType:"prefillComposer",source:"guideLink",prompt:f,id:`guide-${n.toLowerCase().replace(/\s+/g,"-")}`})},d=()=>F(G1e,{"decoration-cocoa-350":a,"decoration-caramel-350":i});return c.jsxs(uT,{placement:"top",children:[c.jsx(zC,{asChild:!0,children:s?c.jsx(ge.button,{className:d(),onClick:u,"data-url":t,initial:"start",animate:"end",variants:z1e,custom:o,children:n}):c.jsx("button",{type:"button",className:d(),onClick:u,"data-url":t,children:n})}),c.jsx(GC,{children:c.jsxs("div",{className:"flex items-center gap-1 p-0.5",children:[c.jsx(Uk,{className:"size-4"}),c.jsx("span",{className:"pt-px",children:r("guidedConversation.hoverTooltip")})]})})]})}const $1e="https://#timestamp-",q1e="https://#settings:privacy";function qk(e){return e?e.startsWith($1e)?"VideoCitation":e.startsWith(q1e)?"PrivacySettings":"Unknown":"Unknown"}function Z1e(e){return qk(e)!=="Unknown"}function K1e(e){if(!/^\d{2}:\d{2}:\d{2}$/.test(e))return e;const[n,s,o]=e.split(":");return n==="00"?(s==null?void 0:s.charAt(0))==="0"?`${s.substring(1)}:${o}`:`${s}:${o}`:(n==null?void 0:n.charAt(0))==="0"?`${n.substring(1)}:${s}:${o}`:e}const Y1e=Ir(),Kx="font-bold text-accent-550 dark:text-accent-600 hover:underline text-start align-top";function Q1e(e){const{url:t,text:n,shouldAnimate:s,shouldHighlight:o,delay:r}=e,a=l.useContext(wm),i=M(De),u=qk(t),d=async()=>{switch(u){case"VideoCitation":await vJ.run({url:t});break;case"PrivacySettings":await SJ.run({url:t});break}D.trackEvent({name:"interaction",data:{eventName:"localCitationClick",eventInfo_messageId:a??"",eventInfo_conversationId:i??"",eventInfo_citationType:u}})};l.useEffect(()=>{D.trackEvent({name:"interaction",data:{eventName:"localCitationImpression",eventInfo_messageId:a??"",eventInfo_conversationId:i??"",eventInfo_citationType:u}})},[a,i,u]);const m=K1e(n);return s?c.jsx(ge.button,{className:F(Kx,o&&J2),onClick:d,"data-url":t,initial:"start",animate:"end",variants:Y1e,custom:r,children:m}):c.jsx("button",{type:"button",className:F(Kx,o&&J2),onClick:d,"data-url":t,children:m})}function J1e(e){const[t,n]=l.useState(null),[s,o]=l.useState(null),r=(d,m)=>{if(!m)return;const f=d===t,p=s!==null&&d===s-1;return F(J2,f&&"rounded-s-md ps-0.5 -ms-0.5",p&&"rounded-e-md pe-0.5 -me-0.5")},a=l.useCallback(d=>{const m=xae(e,d);o(d),n(m)},[e]),i=l.useCallback(()=>{n(null),o(null)},[]),u=l.useCallback(d=>Sae(d,t,s),[t,s]);return{handleCitationHover:a,handleCitationHoverEnd:i,isItemHighlighted:u,getHighlightClass:r}}const Yx=Ir(),Qx="font-bold text-accent-550 dark:text-accent-600 underline text-start align-top";function qo(e){const{items:t,shouldAnimate:n,shouldHighlight:s,dangerouslyUseHtml:o,shouldTestForUrl:r=!0}=e,a=l.useContext(wm),i=pe(De),u=se(QI),d=se(bo),m=H("suppress-inline-link-nav-dialog")||(ae.instance().config().suppressInlineLinkNavConfirmationPopups??!1),{handleCitationHover:f,handleCitationHoverEnd:p,isItemHighlighted:g,getHighlightClass:C}=J1e(t);return c.jsx(c.Fragment,{children:t.map((v,b)=>{var P;const y=!!s||g(b),E=C(b,y);if(v.type==="citation"){const{title:B,url:U,index:$,delay:Q,subCitations:te}=v;return c.jsx(_1e,{title:B,url:U,index:$,shouldAnimate:n,delay:Q,subCitations:te,onCitationHover:()=>f(b),onCitationHoverEnd:p},b)}if(v.type==="italic"||v.type==="bold"||v.type==="strikethrough"||v.type==="sup"||v.type==="sub"||v.type==="code"){const B=c.jsx(qo,{items:v.items,shouldAnimate:n,dangerouslyUseHtml:o});return v.type==="italic"?c.jsx("em",{className:E,children:B},b):v.type==="bold"?c.jsx("strong",{className:E,children:B},b):v.type==="strikethrough"?c.jsx("del",{className:E,children:B},b):v.type==="sup"?c.jsx("sup",{className:E,children:B},b):v.type==="sub"?c.jsx("sub",{className:E,children:B},b):c.jsx(ge.code,{className:"font-ligatures-none mx-0.5 rounded-[4px] border border-stroke-300 bg-accent-200/60 px-1 py-px font-mono text-foreground-800 text-sm dark:bg-accent-200",initial:n?"start":"end",animate:"end",variants:Yx,custom:v.delay,children:B},b)}if(v.type!=="word")return null;const{word:x,url:I,delay:_,format:T}=v,k=X1e({word:x,url:I,testForUrl:!T&&r}),R={initial:"start",animate:"end",variants:Yx,custom:_,...o===!0||T==="latexAsHtml"?{dangerouslySetInnerHTML:{__html:((P=window.copilotTrustedTypesPolicy)==null?void 0:P.createHTML(x))??""}}:{children:x}};if(k.url){if(dae(k.url))return c.jsx(W1e,{url:k.url,text:k.word,shouldAnimate:n,delay:_},b);if(Z1e(k.url))return c.jsx(Q1e,{url:k.url,text:k.word,shouldAnimate:n,shouldHighlight:y,delay:_},b);const B=()=>{if(m&&k.url){Eo(k.url);return}u({url:k.url,messageId:a,conversationId:i}),d("confirm-link-navigation")};return c.jsxs(l.Fragment,{children:[n?c.jsx(ge.button,{className:F(Qx,E),onClick:B,"data-url":k.url,...R}):c.jsx("button",{type:"button",className:F(Qx,E),onClick:B,"data-url":k.url,...R}),k.suffix&&k.suffix]},b)}return n?c.jsx(ge.span,{className:E,...R},b):o===!0||T==="latexAsHtml"?c.jsx("span",{className:E,...R},b):y?c.jsx("span",{className:E,children:x},b):c.jsx(l.Fragment,{children:x},b)})})}function X1e({word:e,url:t,testForUrl:n}){return t?{url:t,word:e}:n?yse(e):{word:e}}function Go(e){var t,n;return(n=(t=ae.instance().config().styleOverrides)==null?void 0:t.typography)==null?void 0:n[e]}function yd(e){var t,n;return(n=(t=ae.instance().config().styleOverrides)==null?void 0:t.padding)==null?void 0:n[e]}function ehe(e){const{shouldAnimate:t,items:n,textSize:s}=e;return c.jsx("h1",{className:F(s??Go("h1")??"text-2xl-medium","[&:not(:first-child)]:pt-6"),children:c.jsx(qo,{shouldAnimate:t,items:n})})}function the(e){const{shouldAnimate:t,items:n,textSize:s}=e;return c.jsx("h2",{className:F(s??Go("h2")??"text-xl-medium","[&:not(:first-child)]:pt-3.5","pb-1"),children:c.jsx(qo,{shouldAnimate:t,items:n})})}function nhe(e){const{shouldAnimate:t,items:n,textSize:s}=e;return c.jsx("h3",{className:F(s??Go("h3")??"text-lg-strong","pb-1","[&:not(:first-child)]:pt-3.5"),children:c.jsx(qo,{shouldAnimate:t,items:n})})}function she(e){const{shouldAnimate:t,items:n,textSize:s}=e;return c.jsx("h4",{className:F(s??Go("h4")??"text-md-strong"),children:c.jsx(qo,{shouldAnimate:t,items:n})})}function ohe(e){const{shouldAnimate:t,items:n,textSize:s}=e;return c.jsx("h5",{className:F(s??Go("h5")??"text-base-strong"),children:c.jsx(qo,{shouldAnimate:t,items:n})})}function rhe(e){const{shouldAnimate:t,items:n,textSize:s}=e;return c.jsx("h6",{className:F(s??Go("h6")??"text-base-medium"),children:c.jsx(qo,{shouldAnimate:t,items:n})})}const ahe=[ehe,the,nhe,she,ohe,rhe];function ihe(e){const{shouldAnimate:t,items:n,level:s,textSize:o}=e,r=ahe[s-1];return r?c.jsx(r,{shouldAnimate:t,items:n,textSize:o}):null}const che=Ir(),Jx="relative pb-6 w-full after:border-b after:border-stroke-300 after:w-full after:absolute after:mt-3";function lhe(e){const{delay:t,shouldAnimate:n}=e;return n?c.jsx(ge.div,{className:Jx,initial:"start",animate:"end",variants:che,custom:t}):c.jsx("div",{className:Jx})}const uhe=Ir();function dhe(e){const{content:t,shouldAnimate:n,delay:s,dangerouslyUseHtml:o}=e;return c.jsx(ge.div,{initial:n?"start":"end",animate:"end",custom:s,variants:uhe,children:c.jsx("div",{className:"horizontal-scrollbar overflow-x-auto whitespace-pre pb-3 pt-4 text-center",children:c.jsx(qo,{items:t,shouldAnimate:n,dangerouslyUseHtml:o})})})}const Xx="relative list-outside marker:text-foreground-750 dark:marker:text-foreground-600 flex flex-col",mhe=Ir();function fhe(e){const{items:t,ordered:n,start:s,shouldAnimate:o,BlockRenderer:r}=e,a=t.map(({items:i,delay:u},d)=>c.jsx(ge.li,{initial:o?"start":"end",animate:"end",variants:mhe,custom:u,className:"ps-2",children:c.jsx(r,{blocks:i,shouldAnimate:o})},d));return n?c.jsx("ol",{start:s,className:de(Xx,"ms-5 marker:normal-nums marker:text-sm-strong"),children:a}):c.jsx("ul",{className:de(Xx,"ms-4 px-1"),children:a})}const Zk={shouldCollapseCode:!1},Kk=l.createContext(Zk);function phe(e){const{children:t,config:n={}}=e,s=l.useMemo(()=>({...Zk,...n}),[n]);return c.jsx(Kk.Provider,{value:s,children:t})}function hhe(){return l.useContext(Kk)}function ghe(e){const{items:t,shouldAnimate:n}=e;return c.jsx("p",{children:c.jsx("span",{className:de("font-ligatures-none","whitespace-pre-wrap",Go("aiMessageDefault")),children:c.jsx(qo,{items:t,shouldAnimate:n})})})}const vhe=Ir();function Che(e){const{columns:t,data:n,shouldAnimate:s}=e;return c.jsxs("div",{className:"relative max-w-full",children:[c.jsx("div",{className:"my-6 max-w-full overflow-x-auto rounded-lg bg-white/25 dark:bg-black/25",children:c.jsxs("table",{className:"t-table",style:{borderSpacing:0},children:[c.jsx("thead",{children:c.jsx("tr",{children:t.map((o,r)=>c.jsx(e8,{type:"head",items:o,shouldAnimate:s},r))})}),c.jsx("tbody",{children:n.map((o,r)=>c.jsx("tr",{children:o.map((a,i)=>c.jsx(e8,{type:"data",items:a,shouldAnimate:s},i))},r))})]})}),c.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-lg border border-stroke-300 dark:border-stroke-450"})]})}function e8(e){var r;const{type:t,items:n,shouldAnimate:s}=e,o=t==="head"?ge.th:ge.td;return c.jsx(o,{variants:vhe,initial:s?"start":"end",animate:"end",custom:((r=n[0])==null?void 0:r.delay)??0,children:c.jsx(qo,{shouldAnimate:s,items:n})})}const yhe=l.lazy(()=>V(()=>import("./code-BcT_a_lQ.js"),__vite__mapDeps([355,1,356,357])));function bd(e){const{blocks:t,shouldAnimate:n,codeAnalytics:s,headingTextSize:o}=e,{shouldCollapseCode:r}=hhe();return c.jsx(c.Fragment,{children:t.map((a,i)=>{const u=`${a.type}-${i}`;switch(a.type){case"paragraph":return c.jsx(ghe,{items:a.items,shouldAnimate:n},u);case"list":return c.jsx(fhe,{ordered:a.ordered,start:a.start,items:a.items,BlockRenderer:bd,shouldAnimate:n},u);case"heading":return c.jsx(ihe,{items:a.items,level:a.level,shouldAnimate:n,textSize:o},u);case"code":return c.jsx(yhe,{content:a.content,original:a.original,delay:a.delay,shouldAnimate:n,language:a.language,dangerouslyUseHtml:a.dangerouslyUseHtml,shouldCollapse:r,analytics:s},u);case"latex":return c.jsx(dhe,{content:a.content,delay:a.delay,shouldAnimate:n,dangerouslyUseHtml:a.dangerouslyUseHtml},u);case"table":return c.jsx(Che,{columns:a.columns,data:a.data,shouldAnimate:n},u);case"blockquote":return c.jsx(v1e,{items:a.items,delay:a.delay,shouldAnimate:n,BlockRenderer:bd},u);case"hr":return c.jsx(lhe,{delay:a.delay,shouldAnimate:n},u);default:return null}})})}let Pp=null,lf=null;async function bhe(e){Pp||(lf||(lf=V(()=>import("./katex-CfZphoad.js"),[]).then(t=>{Pp=t.default,lf=null})),await lf,e==null||e())}function Yk(e,t,n){return Pp?Pp.renderToString(e,{output:"mathml",displayMode:t,throwOnError:!1}):(bhe(n),e)}var Va={},mu={},Ha={},t8;function Qk(){if(t8)return Ha;t8=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.Node=Ha.NodeType=void 0;var e;(function(r){r[r.element=1]="element",r[r.text=3]="text"})(e||(Ha.NodeType=e={}));class t{constructor({nodeType:a,namespace:i,selfCloseTag:u,text:d,nodeName:m,childNodes:f,parentNode:p,attributes:g}){this.namespace=i||null,this.nodeType=a,this.isSelfCloseTag=!!u,this.text=d||null,this.nodeName=a===e.element?m:"#text",this.childNodes=f||[],this.parentNode=p,this.attributes=g||[]}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get innerHTML(){return this.childNodes.reduce((a,i)=>a+(i.nodeType===e.text?i.text:i.outerHTML),"")}get outerHTML(){if(this.nodeType===e.text)return this.textContent;const a=o(this.attributes),i=`<${this.nodeName}${a.length?" ":""}${a}${this.isSelfCloseTag?"/":""}>`;if(this.isSelfCloseTag)return i;const u=this.childNodes.map(m=>m.outerHTML).join(""),d=`</${this.nodeName}>`;return[i,u,d].join("")}get textContent(){return this.nodeType===e.text?this.text:this.childNodes.map(a=>a.textContent).join("").replace(/\x20+/g," ")}getAttribute(a){const i=this.attributes.find(u=>u.name===a);return i?i.value:null}getElementsByTagName(a){return n(this,i=>i.nodeName.toUpperCase()===a.toUpperCase())}getElementsByClassName(a){const i=new RegExp(`^(.*?\\s)?${a}(\\s.*?)?$`);return n(this,u=>!!(u.attributes.length&&i.test(u.getAttribute("class")||"")))}getElementsByName(a){return n(this,i=>!!(i.attributes.length&&i.getAttribute("name")===a))}getElementById(a){return s(this,i=>!!(i.attributes.length&&i.getAttribute("id")===a))}}Ha.Node=t,t.ELEMENT_NODE=e.element,t.TEXT_NODE=e.text;function n(r,a){return r.nodeType===e.text?[]:r.childNodes.reduce((i,u)=>u.nodeType!==e.text&&a(u)?[...i,u,...n(u,a)]:[...i,...n(u,a)],[])}function s(r,a){for(let i=0,u=r.childNodes.length;i<u;i++){const d=r.childNodes[i];if(a(d))return d;const m=s(d,a);if(m)return m}return null}function o(r){return r.map(a=>a.name+(a.value?`="${a.value}"`:"")).join(" ")}return Ha}var fu={},n8;function xhe(){if(n8)return fu;n8=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.NodeAttribute=void 0;let e=class{constructor({name:n,value:s}){this.name=n,this.value=s}};return fu.NodeAttribute=e,fu}var s8;function o8(){if(s8)return mu;s8=1,Object.defineProperty(mu,"__esModule",{value:!0}),mu.Dom=void 0;const e=Qk(),t=xhe(),n=/(<\/?(?:[a-z][a-z0-9]*:)?[a-z][a-z0-9-_.]*?[a-z0-9]*\s*(?:\s+[a-z0-9-_:]+(?:=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))?)*\s*\/?>)|([^<]|<(?![a-z/]))*/gi,s=/\s[a-z0-9-_:]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,o=/(\s[a-z0-9-_:]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,r=/^<[a-z]/,a=/\/>$/,i=/^<\//,u=/^[^<]/,d=/<\/?((?:([a-z][a-z0-9]*):)?(?:[a-z](?:[a-z0-9-_.]*[a-z0-9])?))/i,m=/^('|")|('|")$/g,f=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;let p=class{constructor(T){this.rawHTML=T}find(T,A){const k=g(this.rawHTML,T,A);return A?k[0]||null:k}getElementsByClassName(T){const A=new RegExp(`^(.*?\\s)?${T}(\\s.*?)?$`);return this.find(k=>!!(k.attributes.length&&A.test(k.getAttribute("class")||"")))}getElementsByTagName(T){return this.find(A=>A.nodeName.toUpperCase()===T.toUpperCase())}getElementById(T){return this.find(A=>A.getAttribute("id")===T,!0)}getElementsByName(T){return this.find(A=>A.getAttribute("name")===T)}getElementsByAttribute(T,A){return this.find(k=>k.getAttribute(T)===A)}};mu.Dom=p;function g(_,T,A=!1){const k=C(_),R=[];for(const P of k)if(P&&T(P)&&(R.push(P),A))return R;return R}function*C(_){const T=b(_);let A=null;for(let k=0,R=T.length;k<R;k++){const P=T[k];A=y(P,A)||A,v(A,P)&&(yield A,A=A.parentNode)}for(;A;)yield A,A=A.parentNode}function v(_,T){if(!T)return!1;const A=i.test(T),[,k]=T.match(d)||[];return A&&_.nodeName===k||_.isSelfCloseTag||_.nodeType===e.NodeType.text}function b(_){return _.match(n)||[]}function y(_,T){const A=u.test(_),k=r.test(_);return A?I(_,T):k?E(_,T):null}function E(_,T){var A;const[,k,R]=_.match(d)||[],P=a.test(_)||f.test(k),B=x(_),U=new e.Node({nodeType:e.NodeType.element,nodeName:k,namespace:R,attributes:B,childNodes:[],parentNode:T,selfCloseTag:P});return(A=T==null?void 0:T.childNodes)===null||A===void 0||A.push(U),U}function x(_){return(_.match(s)||[]).map(T=>{o.lastIndex=0;const A=o.exec(T)||[],[,k="",R=""]=A;return new t.NodeAttribute({name:k.trim(),value:R.trim().replace(m,"")})})}function I(_,T){var A;const k=new e.Node({nodeType:e.NodeType.text,nodeName:"#text",text:_,parentNode:T});return(A=T==null?void 0:T.childNodes)===null||A===void 0||A.push(k),k}return mu}var r8;function She(){return r8||(r8=1,function(e){var t=Va&&Va.__createBinding||(Object.create?function(r,a,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(a,i);(!d||("get"in d?!a.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(r,u,d)}:function(r,a,i,u){u===void 0&&(u=i),r[u]=a[i]}),n=Va&&Va.__exportStar||function(r,a){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(a,i)&&t(a,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseFromString=void 0;const s=o8();function o(r){return new s.Dom(r)}e.parseFromString=o,n(o8(),e),n(Qk(),e)}(Va)),Va}var a8=She();function U3(e){const t=[];let n="",s=!1;for(const o of e)o===" "||o===`
`?s=!0:s&&(t.push(n),n="",s=!1),n+=o;return n.length>0&&t.push(n),t}function Ehe(e){const n=a8.parseFromString(`<html>${e}</html>`).getElementsByTagName("html")[0];let s=[];for(const o of n.childNodes)o.nodeType===a8.NodeType.text?o.textContent&&(s=s.concat(U3(o.textContent))):s.push(o.outerHTML);return s}function whe(e){return e===" "||e===`
`||e==="	"}function Jk(e,t,n={}){if(e.length<=t)return e;function s(i){const u=i.trim();return n.ellipsis?`${u}...`:u}const o=e.indexOf(`
`,0);if(o>=0&&o<t){const i=e.slice(0,o);return s(i)}let r=t;for(;r>0;){const i=e[r];if(i&&!whe(i))r-=1;else break}let a=e.slice(0,t);return r>0&&(a=e.slice(0,r)),s(a)}function Ihe(e){return!!(e&&e.trim().length>0)}function gAe(e){return!Ihe(e)}let Fo=null;function Xk(e){return Fo||(V(()=>import("./core-DcX8QUKm.js"),__vite__mapDeps([358,1])).then(t=>t.default).then(t=>{Fo=t,e==null||e()}),null)}async function _he(e){const[{ALIAS_TO_SUPPORTED_LANGUAGE:t},{loadLanguageModule:n}]=await Promise.all([V(()=>import("./language-constants-b8iPQnVN.js"),[]),V(()=>import("./language-loader-ChtJbygM.js"),__vite__mapDeps([359,1]))]),s=t.get(e);if(!s)return!1;const o=await n(s);return o?Fo?(Fo.registerLanguage(e,o),!0):(Xk(()=>{Fo==null||Fo.registerLanguage(e,o)}),!1):!1}const The={jsx:["xml"],tsx:["xml"]};async function Ahe(e){const t=e.map(async s=>Fo?Fo.getLanguage(s)?!1:_he(s):!1);return(await Promise.allSettled(t)).some(s=>s.status==="fulfilled"&&s.value)}async function khe(e){const t=The[e]??[];return Ahe([...t,e])}const _c=.006;function i8(e){return{title:e.props.title,index:e.props.index,url:e.props.url,publisher:e.props.publisher,snippet:e.props.snippet,iconUrl:e.props.iconUrl}}function yc({items:e,delay:t,isHtml:n,forceRender:s,richCitationsEnabled:o}){var a,i,u;const r=[];for(const d of e){if(d.type==="citation"){if(o&&r.length>0&&((a=r[r.length-1])==null?void 0:a.type)==="citation"){(i=r[r.length-1].subCitations)==null||i.push(i8(d));continue}const v=t.getValue();t.queueUpdate(_c),r.push({type:"citation",delay:v,...d.props,subCitations:o?[i8(d)]:[]});continue}if(d.type==="latex"){const v=Yk(d.props.content,!1,s),b=t.getValue();t.queueUpdate(_c),r.push({type:"word",word:v,delay:b,format:"latexAsHtml"});continue}if(d.props.link){const v=d.props.text,{url:b}=d.props.link,y=t.getValue();t.queueUpdate(_c),r.push({type:"word",word:v,delay:y,url:b});continue}let m=null,f=null;if(d.props.annotations){for(const v of["italic","bold","strikethrough","code","sub","sup"])if(d.props.annotations[v]){const y={type:v,items:[]};(v==="code"||v==="sup"||v==="sub")&&(y.delay=t.getValue(),t.queueUpdate(_c)),f?(f.items.push(y),f=y):(m=y,f=y)}}const p=[],g=(u=d.props.annotations)==null?void 0:u.code;let C;n?C=Ehe(d.props.text):C=U3(d.props.text);for(let v=0;v<C.length;v+=1)p.push({type:"word",word:C[v],delay:t.getValue(),format:g?"code":void 0}),t.queueUpdate(_c);f&&m?(f.items.push(...p),r.push(m)):r.push(...p)}return r}function xd({contentBlocks:e,delay:t,forceRender:n,richCitationsEnabled:s}){const o=[];for(const r of e)switch(r.type){case"paragraph":{o.push({type:"paragraph",items:yc({items:r.props.items,delay:t,forceRender:n,richCitationsEnabled:s})});continue}case"list":{o.push({type:"list",ordered:r.props.ordered,start:r.props.start,items:r.props.items.map(a=>({delay:t.getValue(),items:xd({contentBlocks:a,delay:t,forceRender:n,richCitationsEnabled:s})}))});continue}case"heading":{o.push({type:"heading",level:r.props.level,items:yc({items:r.props.items,delay:t,richCitationsEnabled:s})});continue}case"hr":{o.push({type:"hr",delay:t.getValue()}),t.queueUpdate(_c);continue}case"code":{const{language:a,content:i}=r.props;if(i.type!=="text")continue;let u=i.props.text,d=!1;if(a){const f=Xk(n);if(khe(a).then(p=>{p&&n()}),f!=null&&f.getLanguage(a)){const{value:p}=f.highlight(i.props.text,{language:a});p&&(u=p,d=!0)}}const m={...i,props:{...i.props,text:u}};o.push({type:"code",content:yc({items:[m],delay:t,isHtml:d,richCitationsEnabled:s}),original:i.props.text,language:a,delay:t.getValue(),dangerouslyUseHtml:d});continue}case"latex":{const{content:a}=r.props;if(a.type!=="text")continue;a.props.text=Yk(a.props.text,!0,n),o.push({type:"latex",content:yc({items:[a],isHtml:!0,delay:t,richCitationsEnabled:s}),delay:t.getValue(),dangerouslyUseHtml:!0});continue}case"table":{o.push({type:"table",columns:r.props.columns.map(a=>yc({items:a,delay:t,richCitationsEnabled:s})),data:r.props.data.map(a=>a.map(i=>yc({items:i,delay:t,richCitationsEnabled:s})))});continue}case"blockquote":{o.push({type:"blockquote",delay:t.getValue(),items:xd({contentBlocks:r.props.items,delay:t,forceRender:n,richCitationsEnabled:s})});continue}default:{console.log(`Unhandled block type: ${r.type}`);continue}}return o}const Pn={SingleDollar:"SingleDollar",DoubleDollar:"DoubleDollar",Bracket:"Bracket",Inline:"Inline"},Ds={[Pn.SingleDollar]:{start:"$",end:"$"},[Pn.DoubleDollar]:{start:"$$",end:"$$"},[Pn.Bracket]:{start:"\\[",end:"\\]"},[Pn.Inline]:{start:"\\(",end:"\\)"}};function Mhe(e){function t(s,o){const r=s.pos,a=s.posMax;let i=r,u=null;if(s.src.charAt(i)===Ds[Pn.SingleDollar].start&&!/[0-9a-zA-Z\\]/.test(s.src.charAt(i-1))&&!/[ \n$]/.test(s.src.charAt(i+1)))u=Pn.SingleDollar;else if(s.src.charAt(i)===Ds[Pn.Inline].start[0]&&s.src.charAt(i+1)===Ds[Pn.Inline].start[1])u=Pn.Inline;else return!1;i+=Ds[u].start.length;const d=s.src.slice(r,i);if(d.length>2)return!1;const m=i;let f=0;for(;i<a;){const p=s.src.charAt(i);let g=!1;if(u===Pn.SingleDollar?g=p===Ds[Pn.SingleDollar].end&&s.src.charAt(i-1)!==" "&&s.src.charAt(i-1)!=="\\"&&!/[0-9a-zA-Z]/.test(s.src.charAt(i+1)):g=p===Ds[Pn.Inline].end[0]&&s.src.charAt(i+1)===Ds[Pn.Inline].end[1],p==="{"&&(i===0||s.src.charAt(i-1)!=="\\"))f+=1;else if(p==="}"&&(i===0||s.src.charAt(i-1)!=="\\")){if(f-=1,f<0)return!1}else if(g&&f===0){const C=i,v=i+Ds[u].end.length;if(v-C===d.length){if(!o){const b=s.src.slice(m,C).replace(/[ \n]+/g," ").trim();s.push({type:"latex",content:b,block:!1,level:s.level})}return s.pos=v,!0}}i+=1}return o||(s.pending+=d),s.pos+=d.length,!0}function n(s,o,r,a){const i=s.tShift[o],u=s.bMarks[o]+i;let d=s.src.slice(u,s.eMarks[o]),m=null;if(d.startsWith(Ds[Pn.DoubleDollar].start)?m=Ds[Pn.DoubleDollar]:d.startsWith(Ds[Pn.Bracket].start)&&(m=Ds[Pn.Bracket]),!m)return!1;let f=o,p=!1;for(;f<=r;){const C=s.tShift[f],v=s.bMarks[f]+C;if(d=s.src.slice(v,s.eMarks[f]),d.endsWith(m.end)&&(f>o||d!==m.end)){p=!0;break}f+=1}if(!p)return!1;if(a)return!0;const g=s.src.slice(u+m.start.length,s.eMarks[f]-m.end.length);return s.tokens.push({type:"latex_block",content:g.trim(),lines:[o,f],level:s.level}),s.line=f+1,!0}e.inline.ruler.push("latex",t,{}),e.block.ruler.after("fences","latex_block",n,{})}function Nhe(e){return e.replaceAll(/(\n\n\$\$.*?\$\$) *(\n\n)/g,"$1$2")}function Rhe(e){return[Phe,Rt("kill-post-process-latex-double-dollar")?null:Nhe].filter(n=>n!==null).reduce((n,s)=>s(n),e)}const f0="\\[",c8="\\]";function Phe(e){return e.includes(f0)?e.replaceAll(f0,`

${f0}`).replaceAll(c8,`${c8}

`):e}const Im=new dO({breaks:!0});Im.use(Mhe);Im.inline.ruler.enable(["text","newline","emphasis","links","backticks","sup","sub","latex","del"],!0);Im.block.ruler.enable(["list","paragraph","heading","hr","fences","table","blockquote","latex_block"],!0);Im.core.ruler.enable(["block","inline","references"],!0);function Lhe(e){const[t="",...n]=e.replace(um,"").split(fd);return{index:t,title:n.join(fd)}}function eM(e,t={}){const n=[];let s=null,o=!1,r=!1,a=!1;for(const i of e)switch(i.type){case"text":case"sup":case"sub":if("content"in i&&i.content){const u={},d=i.content.startsWith(um)?{type:"citation",props:{index:"",title:"",url:"",iconUrl:null,publisher:null,snippet:null}}:{type:"text",props:{text:i.content}};if(d.type==="text"&&(s&&(d.props.link=s),o&&(u.bold=!0),r&&(u.italic=!0),a&&(u.strikethrough=!0),i.type==="text"&&(d.props.text=d.props.text.replaceAll("\\$","$")),i.type==="sup"&&(u.sup=!0),i.type==="sub"&&(u.sub=!0),Object.keys(u).length>0&&(d.props.annotations=u)),d.type==="citation"&&s){const{citations:m}=t,{index:f,title:p}=Lhe(i.content),g=m==null?void 0:m.find(C=>C.index===f);d.props={index:f,title:(g==null?void 0:g.title)??p,url:s.url,iconUrl:(g==null?void 0:g.iconUrl)??null,publisher:(g==null?void 0:g.publisher)??null,snippet:(g==null?void 0:g.snippet)??null}}n.push(d)}break;case"softbreak":case"hardbreak":n.push({type:"text",props:{text:`
`}});break;case"code":"content"in i&&n.push({type:"text",props:{text:i.content,annotations:{code:!0}}});break;case"latex":"content"in i&&n.push({type:"latex",props:{content:i.content}});break;case"strong_open":o=!0;break;case"strong_close":o=!1;break;case"em_open":r=!0;break;case"em_close":r=!1;break;case"del_open":a=!0;break;case"del_close":a=!1;break;case"link_open":s="href"in i?{url:Jr(i.href)}:null;break;case"link_close":s=null;break}return n}function uf(e,t){return e!==void 0&&e.type==="inline"&&"children"in e?eM(Array.isArray(e.children)?e.children:[],t):null}function Ohe(e,t){let n=0;function s(){var a;let r=e[n];if(!r)return null;if(r.type==="hr")return n+=1,r=e[n],{type:"hr"};if(r.type==="latex_block")return n+=1,"content"in r?{type:"latex",props:{content:{type:"text",props:{text:r.content}}}}:null;if(r.type==="paragraph_open"){n+=1,r=e[n],n+=1;const i=uf(r,t);return i?{type:"paragraph",props:{items:i}}:null}if(r.type==="blockquote_open"){const i={type:"blockquote",props:{items:[]}};for(n+=1,r=e[n];(r==null?void 0:r.type)!=="blockquote_close";){const u=s();u&&"type"in u&&i.props.items.push(u),r=e[n]}return n+=1,i}if(r.type==="ordered_list_open"||r.type==="bullet_list_open"){const i={type:"list",props:{items:[],ordered:r.type==="ordered_list_open"}};"order"in r&&(i.props.start=r.order);const u=r.type==="ordered_list_open"?"ordered_list_close":"bullet_list_close";for(n+=1,r=e[n];(r==null?void 0:r.type)!==u;){const d=s(),m=[];if(d&&Array.isArray(d)){for(const f of d)(f.type==="paragraph"||f.type==="list"||f.type==="code"||f.type==="heading"||f.type==="blockquote")&&m.push(f);i.props.items.push(m)}r=e[n]}return n+=1,i}if(r.type==="list_item_open"){const i=[];for(n+=1,r=e[n];(r==null?void 0:r.type)!=="list_item_close";){const u=s();if(u)for(const d of[u].flat())(d.type==="paragraph"||d.type==="list"||d.type==="code"||d.type==="heading"||d.type==="blockquote")&&i.push(d);r=e[n]}return n+=1,i}if(r.type==="heading_open"){const i="hLevel"in r?r.hLevel:1;n+=1,r=e[n],n+=1;const u=uf(r,t);return u?{type:"heading",props:{level:i,items:u}}:null}if(r.type==="fence"&&"content"in r){const i={type:"code",props:{content:{type:"text",props:{text:vae(r.content)}},language:"params"in r?r.params:void 0}};return n+=1,i}if(r.type==="table_open"){const i=[],u=[];for(;(r==null?void 0:r.type)!=="table_close";){if((r==null?void 0:r.type)==="th_open"){n+=1,r=e[n];const d=uf(r,t);d&&i.push(d)}if((r==null?void 0:r.type)==="tr_open"&&!r.lines&&u.push([]),(r==null?void 0:r.type)==="td_open"){n+=1,r=e[n];const d=uf(r,t);d&&((a=u[u.length-1])==null||a.push(d))}n+=1,r=e[n]}return{type:"table",props:{columns:i,data:u}}}return r.type==="inline"&&"children"in r?(n+=1,eM(r.children??[])):(n+=1,null)}const o=[];for(;n<e.length;){const r=s();r&&!Array.isArray(r)&&o.push(r)}return o}function B3(e,t={}){const n=Im.parse(Rhe(e),{});return Ohe(n,t)}const Dhe={getValue:()=>0,queueUpdate:()=>{}};function jhe(){}function Fhe(e){const{text:t,codeAnalytics:n,excludeBlockTypes:s,headingTextSize:o}=e,r=B3(t).filter(i=>!(s!=null&&s.includes(i.type))),a=xd({contentBlocks:r,delay:Dhe,forceRender:jhe});return c.jsx(bd,{blocks:a,shouldAnimate:!1,codeAnalytics:n,headingTextSize:o})}function tM(e){const{artifact:t}=e;switch(t.type){case"code":{const{language:n,content:s}=t,o=`\`\`\`${n}
${s}
\`\`\``,r={click:{source:"copyCodeButton",scenario:"copyCode"},impression:{element:"code",scenario:"renderArtifact"}};return c.jsx(Fhe,{text:o,codeAnalytics:r})}case"file":{const{contentType:n,name:s,url:o}=t;return c.jsx(p1e,{name:s,contentType:n,url:o})}default:return null}}function Uhe(e){const{activities:t}=e;return c.jsx("div",{className:"t-custom-scrollbar flex flex-col gap-4 overflow-y-auto",children:t.map((n,s)=>c.jsxs("div",{className:"flex flex-col gap-4 pt-3",children:[c.jsx("h3",{children:n.title}),n.artifacts.map((o,r)=>c.jsx(tM,{artifact:o},r))]},s))})}const Bhe=N(void 0);function Vhe(){const[e,t]=Fe(Bhe),n=!!e,s=()=>{t(void 0)};return!e||e.length===0?null:c.jsx(Ho,{className:"w-full max-w-[606px] p-4 pb-6",headerText:z("research.stepsDrawer.title"),isOpen:n,variant:"drawer",trapFocus:!0,onClose:s,children:c.jsx(Uhe,{activities:e})})}function nM(e){const{onClose:t,children:n,className:s}=e,{t:o}=Y(),r=l.useRef(null);return ho({onOutsideEvent:()=>{t(r)},elements:[r],invokeOnce:!1,includeScroll:!1,includeFocus:!1}),pl.createPortal(c.jsx(rn,{mode:"sync",className:F("relative",lt.modal),children:c.jsx("div",{className:"fixed inset-0 flex items-end justify-center bg-black/20",children:c.jsxs("div",{className:"flex max-h-[90%] w-full shrink-0 flex-col rounded-t-4xl border border-white/100 bg-stone-150 backdrop-blur-xl dark:border-white/5 dark:bg-midnight-800","aria-label":o("common.bottomSheetDialog"),children:[c.jsx("div",{className:"relative flex w-full items-center justify-center py-3",children:c.jsx("div",{className:"h-[6px] w-12 rounded-full bg-black/25 dark:bg-white/25"})}),c.jsx("div",{className:F("no-scrollbar w-full overflow-y-auto px-4 pb-4",s),ref:r,children:n})]})})}),document.body)}function fn(e){const t=l.useRef(null),{isOpen:n,dialogName:s,headerText:o,headerIcon:r,headerTextClassName:a,fullBleed:i,children:u,onClose:d,className:m,bottomSheetClassName:f,closeButtonTestId:p,backdropOpacity:g="default",fadeInDuration:C=ns.default,bottomSheetOnSmall:v,customScrollBar:b,"aria-labeledby":y,hideDismissButton:E=!1}=e,x=l.useRef(null),{t:I}=Y(),_=bt({breakpoint:"sm"}),T=l.useId(),A=v&&_,k=g==="none"?"backdrop:bg-transparent":"backdrop:bg-background-850/30 dark:backdrop:bg-background-150/70",R=n&&!A&&d!==void 0;ho({onOutsideEvent:R?d:()=>{},elements:R?[x]:[],includeScroll:!1,includeFocus:!1});const{modalAttributes:P}=U1({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});if(l.useEffect(()=>{var B,U;n?(B=t.current)==null||B.showModal():(U=t.current)==null||U.close()},[n]),l.useEffect(()=>{const B=t.current;if(!B)return()=>{};const U=()=>{d==null||d()};return B.addEventListener("cancel",U),()=>{B.removeEventListener("cancel",U)}},[d]),A&&n){const B=!i&&o;return c.jsxs(nM,{onClose:d,className:f,children:[B&&c.jsx("h2",{id:T,className:"py-6 text-center text-foreground-850 text-2xl",children:o}),u]})}return c.jsx(ge.dialog,{className:F("fixed inset-0 m-auto rounded-4xl border border-white/10 bg-background-150 text-foreground-800 shadow-xl dark:bg-background-250",k,b&&"t-custom-scrollbar"),animate:n?"animate":"initial",initial:"initial",exit:"exit",variants:{initial:Be,animate:tt},transition:{duration:C,ease:"easeInOut"},ref:t,role:"dialog","aria-modal":"true","aria-labelledby":o?T:y,"aria-label":o?void 0:s,...n?P:{},children:n&&c.jsxs("div",{"data-modal-overlay":"true",className:F("flex min-h-[150px] flex-col gap-3",!i&&"p-6",m),ref:x,children:[c.jsx(DA,{}),!i&&c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o&&c.jsxs("div",{children:[r,c.jsx("h2",{id:T,className:F("text-foreground-800 text-lg-strong",a),children:o})]}),d&&!E&&c.jsx(re,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:I("common.closeText"),"aria-label":I("common.closeText"),onClick:d,testId:p,children:c.jsx(nn,{className:"size-5"})})]}),u]})})}const Hhe="XF86Back",zhe=461;function V3(e){return e.key===Hhe||e.keyCode===zhe}function Ghe(e){const{className:t,children:n}=e;return c.jsx("span",{className:de("inline-block h-4 min-w-4 rounded-md bg-accent-200 px-1 pt-px text-center leading-4 text-foreground-800 text-2xs dark:bg-accent-200",t),children:n})}const Whe={default:"border-black/10 dark:border-white/10",weak:"border-black/5 dark:border-white/5",accent:"border-stroke-300"};function ms(e){const{horizontalMargin:t=!0,verticalMargin:n=!0,color:s="default",className:o}=e;return c.jsx("div",{className:F("border-t-[1px]",t&&"mx-2",n&&"my-2",Whe[s],o)})}const $he=l.lazy(()=>V(()=>import("./index-CNYqgb-b.js").then(e=>e.i),__vite__mapDeps([360,1,318]))),qhe="focus-within:bg-neutral-50/5 before:pointer-events-none before:absolute before:inset-0 before:rounded-3xl before:border before:border-transparent focus-within:before:border-[1px] focus-within:before:border-[rgba(255,255,255,0.1)]";function Zhe(){var f,p;const e=M(HK),[t,n]=Fe(Ew),s=l.useContext(wm),o=M(De),r=PC(),a=((f=ae.instance().config().composer)==null?void 0:f.largeScreen)===!0&&((p=ae.instance().config().composer)==null?void 0:p.voiceOnly)===!0,i=ae.instance().config().canHandleBackButtonEvents===!0,u=()=>{n(null),Ce({source:"citationOverflowModal",scenario:"close"})},{focusable:d}=Ta({isFocusBoundary:!0});hs(g=>{V3(g)&&(g.stopPropagation(),u())});const m=l.useMemo(()=>new Map((t??[]).map((g,C)=>[C,l.createRef()])),[t]);return c.jsx(fn,{isOpen:e,onClose:i?void 0:u,headerText:`${t==null?void 0:t.length} ${z("chat.references")}`,className:de(a?"max-h-[40vh]":"max-h-[80vh]",a?"w-[480px]":"w-[440px] max-w-[80vw]","mx-4 px-2"),children:c.jsx(X1.Provider,{value:d.focusKey??"",children:c.jsx("div",{className:de("flex flex-col gap-2 overflow-y-auto overflow-x-hidden pe-1.5",a?"no-scrollbar":"t-custom-scrollbar"),children:t==null?void 0:t.map((g,C)=>c.jsx(sM,{ref:m.get(C),index:C,citation:g,currentConversationId:o,messageId:s,isLargeScreenVoiceComposer:a,citationsModalData:t,rel:r,onClick:g.onClick},C))})})})}const sM=l.forwardRef(({index:e,citation:t,currentConversationId:n,messageId:s,citationsModalData:o,isLargeScreenVoiceComposer:r=!1,rel:a,onClick:i},u)=>{const{title:d,url:m,publisher:f,shouldTruncate:p}=t,{refCallback:g,focusable:C}=Ta({autoRestoreFocus:!0,forceFocus:!0,scrollIntoViewOnFocus:!0},u);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:de(r&&qhe,"group relative flex flex-row items-center gap-2 rounded-3xl p-2"),children:[c.jsxs("a",{rel:a,ref:g,className:de("flex flex-1 flex-col items-start gap-2 py-1",p&&"max-w-full"),"data-spatial-navigation-autofocus":!0,href:m,"data-spatial-focus-key":C.focusKey,target:"_blank",onClick:v=>{if(i){v.preventDefault(),i();return}if(r){v.preventDefault();return}Ce({source:"citationModalLink",customData:JSON.stringify({destination:co(m),conversationId:n,messageId:s})})},children:[c.jsxs("div",{className:de("flex items-center gap-1",p&&"max-w-full"),children:[c.jsx(Ghe,{children:t.index}),c.jsx("div",{className:de("text-foreground-550 text-sm",p&&"max-w-full truncate"),title:f??Ts(m),children:f??Ts(m)})]}),c.jsx("div",{className:de(p&&"max-w-full truncate"),title:d,children:d}),c.jsx("div",{className:de("text-foreground-550 text-sm",p&&"max-w-full truncate"),title:Ts(m),children:Ts(m)})]}),r&&c.jsx(l.Suspense,{fallback:c.jsx("span",{}),children:c.jsx("div",{className:"flex size-28 items-center justify-center rounded-2xl bg-white opacity-0 group-focus-within:opacity-100",children:c.jsx($he,{value:m,size:86})})})]}),e<o.length-1&&c.jsx(ms,{horizontalMargin:!1,verticalMargin:!1,className:"my-4"})]})});sM.displayName="CitationItem";const Khe=l.lazy(()=>V(()=>Promise.resolve().then(()=>A3),void 0));async function Yhe(){if(!(await $n("/conversations/history",{options:{method:"DELETE"}})).ok)throw new Error("Failed to delete conversation history")}function Qhe(){const{t:e}=Y(),t=se(ww),n=gl(xt),s=Aa(),o=se(xn),a=ut().startsWith("/chats"),i=xr(),{mutate:u,isPending:d}=Mi({mutationFn:Yhe,onSuccess:async()=>{t(null),n(p=>{p.clear()}),(a||i)&&await s()},onError:()=>{o({title:e("common.somethingWrong"),dismissable:!1,dismissAfter:2e3})}}),m=()=>{u()},f=()=>{t(null)};return c.jsxs(fn,{isOpen:!0,onClose:f,headerText:e("settings.clearHistory.header"),className:"min-h-[328px] w-full max-w-[400px]",children:[c.jsx("p",{className:"text-start",children:e("settings.clearHistory.description")}),c.jsx(re,{title:e("settings.clearHistory.confirm"),color:"default",size:"56-xl",variant:"rect",className:"mt-3 w-full text-system-red-550 dark:text-system-red-350",onClick:m,disabled:d,children:d?c.jsx(Khe,{type:"spinnerThemed",className:"size-6"}):e("settings.clearHistory.confirm")}),c.jsx(re,{title:e("common.cancel"),color:"strong",size:"56-xl",variant:"rect",className:"mt-3 w-full",onClick:f,children:e("common.cancel")})]})}function p0({Icon:e,title:t,description:n}){return c.jsxs("div",{className:"flex items-start gap-3 rounded-lg px-4 py-2",children:[c.jsx("div",{className:"shrink-0",children:c.jsx(e,{className:"size-5"})}),c.jsxs("div",{className:"flex flex-col ps-1",children:[c.jsx("h3",{className:"text-foreground-800 text-sm-strong",children:t}),c.jsx("p",{className:"pt-1 text-foreground-600 text-sm",children:n})]})]})}const oM=(e,t,n)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionManagementImpression",eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectionStatus:t,eventInfo_connectorPlatformConnectionStartSource:n}})},Vu=(e,t,n,s)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionManagementAction",eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectionStatus:t,eventInfo_connectorPlatformConnectionStartSource:n,eventInfo_connectorPlatformConnectionActionType:s}})},Jhe=(e,t)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionStartPageImpression",eventInfo_connectorPlatformConnectionStartSource:t,eventInfo_connectorPlatformConnectorType:e}})},Lp=(e,t,n)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionStartPageAction",eventInfo_connectorPlatformConnectionStartSource:t,eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectionActionType:n}})},Xhe=(e,t)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionSetupFailureEvent",eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectorErrorType:t??"",eventInfo_source:"Component"}})},ege=e=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionSetupSuccessEvent",eventInfo_connectorPlatformConnectorType:e,eventInfo_source:"Component"}})},H3=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M23.3686 8.63379H8.63184V23.3704H23.3686V8.63379Z",fill:"white"}),l.createElement("path",{d:"M23.3688 30.0008L30.0004 23.3695L26.6846 22.8037L23.3688 23.3695L22.7637 26.4023L23.3688 30.0008Z",fill:"#EA4335"}),l.createElement("path",{d:"M2 23.3695V27.7904C2 29.0117 2.9892 30.0008 4.2105 30.0008H8.63152L9.31239 26.6851L8.63152 23.3695L5.01863 22.8037L2 23.3695Z",fill:"#188038"}),l.createElement("path",{d:"M30.0004 8.63147V4.21049C30.0004 2.98919 29.0112 2 27.7898 2H23.3688C22.9653 3.64452 22.7637 4.85476 22.7637 5.63073C22.7637 6.40668 22.9653 7.40691 23.3688 8.63147C24.8355 9.05145 25.9407 9.26145 26.6846 9.26145C27.4284 9.26145 28.5336 9.05145 30.0004 8.63147Z",fill:"#1967D2"}),l.createElement("path",{d:"M30.0007 8.63379H23.3691V23.3704H30.0007V8.63379Z",fill:"#FBBC04"}),l.createElement("path",{d:"M23.3686 23.3662H8.63184V29.9977H23.3686V23.3662Z",fill:"#34A853"}),l.createElement("path",{d:"M23.3681 2H4.2105C2.9892 2 2 2.98919 2 4.21049V23.3681H8.63152V8.63147H23.3681V2Z",fill:"#4285F4"}),l.createElement("path",{d:"M11.6544 20.0633C11.1036 19.6912 10.7223 19.1478 10.5142 18.4293L11.7926 17.9025C11.9086 18.3446 12.1112 18.6872 12.4005 18.9304C12.6878 19.1735 13.0378 19.2933 13.4468 19.2933C13.8649 19.2933 14.2241 19.1662 14.5244 18.912C14.8247 18.6578 14.9757 18.3335 14.9757 17.9412C14.9757 17.5396 14.8173 17.2117 14.5005 16.9575C14.1836 16.7033 13.7857 16.5762 13.3105 16.5762H12.5718V15.3107H13.2349C13.6438 15.3107 13.9884 15.2002 14.2684 14.9792C14.5484 14.7581 14.6884 14.456 14.6884 14.0711C14.6884 13.7284 14.563 13.4557 14.3126 13.2513C14.062 13.0467 13.7451 12.9436 13.3601 12.9436C12.9845 12.9436 12.686 13.0432 12.4649 13.244C12.244 13.4453 12.0779 13.6994 11.9823 13.9825L10.7168 13.4557C10.8844 12.9805 11.1921 12.5605 11.6434 12.1976C12.0947 11.8347 12.6712 11.6523 13.3713 11.6523C13.8888 11.6523 14.3549 11.7518 14.7676 11.9526C15.1801 12.1534 15.5044 12.4315 15.7384 12.7852C15.9723 13.1407 16.0884 13.5386 16.0884 13.9807C16.0884 14.4321 15.9796 14.8134 15.7623 15.1265C15.5449 15.4396 15.2778 15.6792 14.9609 15.8467V15.9223C15.37 16.0909 15.7255 16.3679 15.9888 16.7235C16.2559 17.0829 16.3905 17.512 16.3905 18.0131C16.3905 18.5141 16.2634 18.9616 16.009 19.3541C15.7549 19.7464 15.403 20.056 14.9573 20.2806C14.5097 20.5053 14.0068 20.6195 13.4486 20.6195C12.802 20.6214 12.2052 20.4353 11.6544 20.0633ZM19.5073 13.7192L18.1036 14.7342L17.4017 13.6694L19.9198 11.8531H20.885V20.4206H19.5073V13.7192Z",fill:"#4285F4"})),z3=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M16.0038 11.0319L11.0706 2.48113C11.2344 2.31734 11.4229 2.20991 11.6113 2.1377C10.1566 2.60794 9.48907 4.21242 9.48907 4.21242L0.476883 19.8292C0.350075 20.3188 0.314848 20.7609 0.330699 21.1501H10.1671L16.0038 11.0319Z",fill:"#34A853"}),l.createElement("path",{d:"M16.0034 11.0319L21.8401 21.1501H31.6766C31.6924 20.7609 31.6572 20.3188 31.5304 19.8292L22.5182 4.21242C22.5182 4.21242 21.8489 2.60794 20.3959 2.1377C20.5826 2.20991 20.7728 2.31734 20.9366 2.48113L16.0034 11.0319Z",fill:"#FBBC05"}),l.createElement("path",{d:"M16.0035 11.0308L20.9367 2.48001C20.7729 2.31622 20.5827 2.20878 20.396 2.13657C20.1811 2.06789 19.9504 2.02209 19.7003 2.00977H19.4396H12.5674H12.3067C12.0584 2.02033 11.8259 2.06612 11.611 2.13657C11.4243 2.20878 11.2341 2.31622 11.0703 2.48001L16.0035 11.0308Z",fill:"#188038"}),l.createElement("path",{d:"M10.1687 21.1494L5.29186 29.6033C5.29186 29.6033 5.12982 29.5258 4.90967 29.3655C5.60183 29.8886 6.27462 29.9996 6.27462 29.9996H25.4279C26.4847 29.9996 26.7048 29.6033 26.7048 29.6033C26.7083 29.6015 26.7101 29.5998 26.7136 29.598L21.8403 21.1494H10.1687Z",fill:"#4285F4"}),l.createElement("path",{d:"M10.169 21.1494H0.33252C0.381834 22.2977 0.889067 22.9688 0.889067 22.9688L1.25893 23.5993C1.28534 23.6363 1.30119 23.6574 1.30119 23.6574L2.10607 25.0452L3.91309 28.1344C3.96592 28.2595 4.02757 28.374 4.09273 28.4832C4.11739 28.5201 4.14028 28.5606 4.1667 28.5959C4.17375 28.6064 4.18079 28.617 4.18784 28.6276C4.41151 28.9375 4.66161 29.1771 4.9117 29.3655C5.13186 29.5276 5.29389 29.6033 5.29389 29.6033L10.169 21.1494Z",fill:"#1967D2"}),l.createElement("path",{d:"M21.8403 21.1494H31.6768C31.6275 22.2977 31.1202 22.9688 31.1202 22.9688L30.7504 23.5993C30.7239 23.6363 30.7081 23.6574 30.7081 23.6574L29.9032 25.0452L28.0962 28.1344C28.0434 28.2595 27.9817 28.374 27.9166 28.4832C27.8919 28.5201 27.869 28.5606 27.8426 28.5959C27.8355 28.6064 27.8285 28.617 27.8214 28.6276C27.5978 28.9375 27.3477 29.1771 27.0976 29.3655C26.8774 29.5276 26.7154 29.6033 26.7154 29.6033L21.8403 21.1494Z",fill:"#EA4335"})),G3=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M24.251 6.70996L16.087 12.9318L7.73633 6.70996V6.71164L7.74642 6.72005V15.4322L15.9928 21.7886L24.251 15.6778V6.70996Z",fill:"#EA4335"}),l.createElement("path",{d:"M26.3955 5.19615L24.2515 6.70956V15.6774L30.9979 10.6192V7.5722C30.9979 7.5722 30.179 3.22031 26.3955 5.19615Z",fill:"#FBBC05"}),l.createElement("path",{d:"M24.2515 15.6783V27.3097H29.4223C29.4223 27.3097 30.8936 27.1617 30.9996 25.5238V10.6201L24.2515 15.6783Z",fill:"#34A853"}),l.createElement("path",{d:"M7.74642 27.3192V15.4322L7.73633 15.4238L7.74642 27.3192Z",fill:"#C5221F"}),l.createElement("path",{d:"M7.73635 6.71107L5.60413 5.20607C1.8206 3.23023 1 7.58044 1 7.58044V10.6274L7.73635 15.4233V6.71107Z",fill:"#C5221F"}),l.createElement("path",{d:"M7.73633 6.71191V15.4241L7.74642 15.4325V6.72032L7.73633 6.71191Z",fill:"#C5221F"}),l.createElement("path",{d:"M1 10.6289V25.5326C1.10426 27.1721 2.57731 27.3184 2.57731 27.3184H7.74812L7.73635 15.423L1 10.6289Z",fill:"#4285F4"})),W3=N(null);function vAe(e){return pS.includes(e)}const tge=e=>{switch(e){case"google-drive":return{title:z("connector.googleDrive.title"),icon:z3};case"google-calendar":return{title:z("connector.googleCalendar.title"),icon:H3};case"gmail":return{title:z("connector.googleMail.title"),icon:G3};case"google-contacts":return{title:z("connector.googleContacts.title"),icon:hm};default:return{title:"",icon:null}}},CAe=async({connectorType:e,error:t})=>{const n=qe(),s=!t;if(s?ege(e??"unknown"):Xhe(e??"unknown",t),t==="insufficient_scopes"&&e){n.set(W3,{type:e});return}const o=jn("connectorConsentFlowStartUrl"),{title:r,icon:a}=tge(e);if(!a||!r){await qs({to:"/",from:window.location.href});return}n.set(xn,{Icon:a,iconClassName:"size-10 shrink-0",intent:s?"info":"error",title:s?z("connector.connectSuccessTitle"):z("connector.connectUnsuccessfulTitle"),subtitle:s?z("connector.connectSuccessSubtitle",{title:r}):z("connector.connectUnsuccessfulSubtitle",{title:r}),dismissAfter:3e3}),window.setTimeout(async()=>qs({to:o??"/",from:window.location.href}),0)},rM=async e=>(await St("/connections",DZ,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({redirectUrl:`${window.location.origin}/connector/callback?connectorType=${e}`,type:e})}})).data.loginUrl,$3=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M6.24992 4.5C5.28344 4.5 4.49996 5.2835 4.49996 6.25V17.75C4.49996 18.7165 5.28344 19.5 6.24992 19.5H17.7496C18.7161 19.5 19.4996 18.7165 19.4996 17.75V13.75C19.4996 13.3358 19.8354 13 20.2496 13C20.6638 13 20.9995 13.3358 20.9995 13.75V17.75C20.9995 19.5449 19.5445 21 17.7496 21H6.24992C4.45504 21 3 19.5449 3 17.75V6.25C3 4.45507 4.45504 3 6.24992 3H10.2498C10.664 3 10.9998 3.33579 10.9998 3.75C10.9998 4.16421 10.664 4.5 10.2498 4.5H6.24992ZM12.9997 3.75C12.9997 3.33579 13.3355 3 13.7497 3H20.25C20.6642 3 21 3.33579 21 3.75V10.25C21 10.6642 20.6642 11 20.25 11C19.8358 11 19.5 10.6642 19.5 10.25V5.56074L14.28 10.7804C13.9871 11.0732 13.5123 11.0732 13.2194 10.7803C12.9265 10.4874 12.9265 10.0125 13.2194 9.71964L18.4395 4.5H13.7497C13.3355 4.5 12.9997 4.16421 12.9997 3.75Z"})),yAe=Object.freeze(Object.defineProperty({__proto__:null,default:$3},Symbol.toStringTag,{value:"Module"})),aM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M9 7C9.55228 7 10 7.44772 10 8C10 8.51284 9.61396 8.93551 9.11662 8.99327L9 9H7C5.34315 9 4 10.3431 4 12C4 13.5977 5.24892 14.9037 6.82373 14.9949L7 15H9C9.55228 15 10 15.4477 10 16C10 16.5128 9.61396 16.9355 9.11662 16.9933L9 17H7C4.23858 17 2 14.7614 2 12C2 9.31125 4.12231 7.11818 6.78311 7.00462L7 7H9ZM17 7C19.7614 7 22 9.23858 22 12C22 14.6888 19.8777 16.8818 17.2169 16.9954L17 17H15C14.4477 17 14 16.5523 14 16C14 15.4872 14.386 15.0645 14.8834 15.0067L15 15H17C18.6569 15 20 13.6569 20 12C20 10.4023 18.7511 9.09634 17.1763 9.00509L17 9H15C14.4477 9 14 8.55228 14 8C14 7.48716 14.386 7.06449 14.8834 7.00673L15 7H17ZM7 11H17C17.5523 11 18 11.4477 18 12C18 12.5128 17.614 12.9355 17.1166 12.9933L17 13H7C6.44772 13 6 12.5523 6 12C6 11.4872 6.38604 11.0645 6.88338 11.0067L7 11H17H7Z"})),bAe=Object.freeze(Object.defineProperty({__proto__:null,default:aM},Symbol.toStringTag,{value:"Module"})),q3=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 15.5C12.8284 15.5 13.5 14.8284 13.5 14C13.5 13.1716 12.8284 12.5 12 12.5C11.1716 12.5 10.5 13.1716 10.5 14C10.5 14.8284 11.1716 15.5 12 15.5ZM8 6C8 3.79086 9.79086 2 12 2C14.2091 2 16 3.79086 16 6V7H16.75C18.5449 7 20 8.45507 20 10.25V17.75C20 19.5449 18.5449 21 16.75 21H7.25C5.45507 21 4 19.5449 4 17.75V10.25C4 8.45507 5.45507 7 7.25 7H8V6ZM12 3.5C10.6193 3.5 9.5 4.61929 9.5 6V7H14.5V6C14.5 4.61929 13.3807 3.5 12 3.5ZM7.25 8.5C6.2835 8.5 5.5 9.2835 5.5 10.25V17.75C5.5 18.7165 6.2835 19.5 7.25 19.5H16.75C17.7165 19.5 18.5 18.7165 18.5 17.75V10.25C18.5 9.2835 17.7165 8.5 16.75 8.5H7.25Z"})),xAe=Object.freeze(Object.defineProperty({__proto__:null,default:q3},Symbol.toStringTag,{value:"Module"})),vh=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M17.7545 14.0002C18.9966 14.0002 20.0034 15.007 20.0034 16.2491V16.8245C20.0034 17.7188 19.6838 18.5836 19.1023 19.263C17.5329 21.0965 15.1457 22.0013 12.0004 22.0013C8.8545 22.0013 6.46849 21.0962 4.90219 19.2619C4.32242 18.583 4.00391 17.7195 4.00391 16.8267V16.2491C4.00391 15.007 5.01076 14.0002 6.25278 14.0002H17.7545ZM17.7545 15.5002H6.25278C5.83919 15.5002 5.50391 15.8355 5.50391 16.2491V16.8267C5.50391 17.3624 5.69502 17.8805 6.04287 18.2878C7.29618 19.7555 9.26206 20.5013 12.0004 20.5013C14.7387 20.5013 16.7063 19.7555 17.9627 18.2876C18.3117 17.8799 18.5034 17.361 18.5034 16.8245V16.2491C18.5034 15.8355 18.1681 15.5002 17.7545 15.5002ZM12.0004 2.00488C14.7618 2.00488 17.0004 4.24346 17.0004 7.00488C17.0004 9.76631 14.7618 12.0049 12.0004 12.0049C9.23894 12.0049 7.00036 9.76631 7.00036 7.00488C7.00036 4.24346 9.23894 2.00488 12.0004 2.00488ZM12.0004 3.50488C10.0674 3.50488 8.50036 5.07189 8.50036 7.00488C8.50036 8.93788 10.0674 10.5049 12.0004 10.5049C13.9334 10.5049 15.5004 8.93788 15.5004 7.00488C15.5004 5.07189 13.9334 3.50488 12.0004 3.50488Z"})),SAe=Object.freeze(Object.defineProperty({__proto__:null,default:vh},Symbol.toStringTag,{value:"Module"})),Z3=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M16.7568 9.30287C17.0621 9.02298 17.0828 8.54855 16.8029 8.24321C16.523 7.93787 16.0485 7.91725 15.7432 8.19714L10.2726 13.2119L8.28033 11.2197C7.98744 10.9268 7.51256 10.9268 7.21967 11.2197C6.92678 11.5126 6.92678 11.9874 7.21967 12.2803L9.71967 14.7803C10.0036 15.0643 10.4608 15.0742 10.7568 14.8029L16.7568 9.30287ZM20.25 5C17.5866 5 14.992 4.05652 12.45 2.15C12.1833 1.95 11.8167 1.95 11.55 2.15C9.00797 4.05652 6.41341 5 3.75 5C3.33579 5 3 5.33579 3 5.75V11C3 16.0012 5.95756 19.6757 11.7251 21.9478C11.9018 22.0174 12.0982 22.0174 12.2749 21.9478C18.0424 19.6757 21 16.0012 21 11V5.75C21 5.33579 20.6642 5 20.25 5ZM4.5 6.47793C7.07735 6.32585 9.58084 5.38829 12 3.67782C14.4192 5.38829 16.9227 6.32585 19.5 6.47793V11C19.5 15.2556 17.0466 18.3789 12 20.4419C6.95337 18.3789 4.5 15.2556 4.5 11V6.47793Z"})),EAe=Object.freeze(Object.defineProperty({__proto__:null,default:Z3},Symbol.toStringTag,{value:"Module"})),nge="https://policies.google.com/privacy";function sge(){const{t:e}=Y(),[t,n]=Fe(iC),[s,o]=l.useState(null),r=ut(),{type:a,title:i,IconComponent:u,visible:d,startSource:m}=t??{},f=()=>{n({visible:!1})};return l.useEffect(()=>(t!=null&&t.visible&&a&&m&&(Jhe(a,m),rM(a).then(p=>o(p))),()=>{o(null)}),[t==null?void 0:t.visible,a,m,r]),!a||!i||!u||!d||!m?null:c.jsx(fn,{isOpen:d,className:"w-full max-w-[448px]",onClose:f,customScrollBar:!0,hideDismissButton:!0,children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"flex flex-col items-center justify-center gap-2.5 rounded-2xl border border-black/12 p-1 dark:border-white/12",children:c.jsx(u,{className:"size-12 p-1"})}),c.jsx("div",{className:"absolute -end-2 -top-1.5 flex size-5 items-center justify-center rounded-full bg-neutral-900 contrast-more:bg-neutral-100 contrast-more:outline",children:c.jsx(aM,{className:"size-4 text-foreground-100 contrast-more:text-foreground-600 dark:text-foreground-900"})})]}),c.jsx("h3",{className:"pt-4 text-center text-foreground-800 text-lg sm:text-2xl",children:e("connector.confirmModal.title",{title:i})}),c.jsxs("div",{className:"mt-6 flex flex-col rounded-3xl bg-black/5 py-3 dark:bg-black/20",children:[c.jsx(p0,{Icon:vh,title:e("connector.confirmModal.personalizedTitle"),description:e("connector.confirmModal.personalizedDescription",{title:i})}),c.jsx(ms,{color:"accent",horizontalMargin:!1}),c.jsx(p0,{Icon:q3,title:e("connector.confirmModal.anyAccountTitle"),description:e("connector.confirmModal.anyAccountDescription")}),c.jsx(ms,{color:"accent",horizontalMargin:!1}),c.jsx(p0,{Icon:Z3,title:e("connector.confirmModal.control"),description:e("connector.confirmModal.controlDescription",{title:i})})]}),c.jsxs("div",{className:"mt-6 flex flex-col gap-2",children:[c.jsx(re,{className:"h-14 w-full sm:w-96",color:"strong",size:"56-xl",title:e("connector.confirmModal.continue",{title:i}),disabled:!s,onClick:()=>{Lp(a,m,"continue"),s&&(Ws("connectorConsentFlowStartUrl",r),Qi(s))},children:s?c.jsxs("div",{className:"flex items-center gap-2",children:[e("connector.confirmModal.continue",{title:i}),c.jsx($3,{className:"size-5"})]}):c.jsx(it,{className:"size-7"})}),c.jsx(re,{className:"w-full sm:w-96",color:"subtle-dimmed-inverted",size:"56-xl",title:e("common.cancel"),onClick:()=>{f(),Lp(a,m,"cancel")},children:e("common.cancel")}),c.jsxs("div",{className:"my-3 flex flex-col items-center gap-3 text-center sm:w-96",children:[c.jsx("p",{className:"px-3 text-foreground-600 text-xs",children:c.jsx(hn,{i18nKey:"connector.confirmModal.disclaimer",components:{Terms:c.jsx(ls,{href:dl,title:e("connector.confirmModal.terms"),className:"underline text-xs",children:e("connector.confirmModal.terms")})},values:{title:i}})}),c.jsx("p",{className:"text-foreground-600 text-xs",children:c.jsx(hn,{i18nKey:"connector.confirmModal.policyLinks",components:{MicrosoftPrivacyStatement:c.jsx(ls,{href:es,title:e("connector.confirmModal.privacyStatement",{title:e("connector.developerMicrosoft")}),className:"underline",children:e("connector.confirmModal.privacyStatement",{title:e("connector.developerMicrosoft")})}),ConnectorPrivacyStatement:c.jsx(ls,{href:nge,title:e("connector.confirmModal.privacyStatement",{title:i}),className:"underline",children:e("connector.confirmModal.privacyStatement",{title:i})})}})})]})]})]})})}const iM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M20.051 16.8869C19.7881 17.0247 19.5135 17.148 19.2281 17.2552C18.3702 17.5775 17.4227 17.7602 16.4233 17.7602C12.7264 17.7602 9.50588 15.2171 9.50588 11.9537C9.50588 11.0361 10.0368 10.2407 10.7892 9.82178C7.44572 9.96193 6.58623 13.4468 6.58623 15.4882C6.58623 21.2596 11.9057 21.8453 13.052 21.8453C13.6696 21.8453 14.602 21.6654 15.1637 21.4892C15.198 21.4778 15.2321 21.4663 15.2661 21.4545C17.4348 20.7066 19.2653 19.2352 20.4685 17.328C20.641 17.0544 20.3375 16.7367 20.051 16.8869Z",fill:"url(#paint0_linear_11766_2366)"}),l.createElement("path",{d:"M10.2588 20.8619C9.56389 20.4312 8.96067 19.8633 8.48255 19.192C7.7427 18.1532 7.30039 16.8755 7.30039 15.4882C7.30039 13.4468 8.25099 11.6386 9.71629 10.4929C10.0491 10.2328 10.4752 9.97036 10.7892 9.82176C11.0329 9.70633 11.4499 9.49851 12.0036 9.50636C12.9218 9.51937 13.6154 9.98746 14.0103 10.519C14.3137 10.9275 14.5008 11.4307 14.507 11.9769C14.5072 11.9605 16.4183 5.75781 8.25313 5.75781C4.82396 5.75781 2 9.01327 2 11.8684C2 13.6795 2.42026 15.1255 2.94646 16.246C4.1184 18.7422 6.29164 20.6741 8.95009 21.5252C9.91281 21.8335 10.9384 22.0015 12.0036 22.0015C13.1084 22.0015 14.1701 21.8198 15.1637 21.4892C14.602 21.6654 14.0064 21.7619 13.3888 21.7619C12.2426 21.7619 11.1742 21.4295 10.2588 20.8619Z",fill:"url(#paint1_linear_11766_2366)"}),l.createElement("path",{d:"M13.9001 13.6309C13.8369 13.7129 13.6421 13.8261 13.6421 14.0734C13.6421 14.2769 13.7749 14.4732 14.0109 14.638C15.1345 15.422 17.2521 15.3164 17.2578 15.3164C18.132 15.3134 18.9184 15.073 19.6229 14.6611C19.9433 14.4737 20.24 14.2512 20.5074 13.997C21.4251 13.1249 21.9847 11.8959 22.0002 10.5303C22.0201 8.77913 21.3783 7.61489 21.1145 7.09937C19.4589 3.86354 15.8849 2.00134 11.9989 2.00134C6.52112 2.00134 2.07446 6.40343 2.00096 11.8608C2.03809 9.0059 4.87549 6.7005 8.24835 6.7005C8.52183 6.7005 10.0814 6.72717 11.53 7.4875C12.8061 8.15725 13.4752 8.96655 13.9402 9.76937C14.4231 10.603 14.509 11.6558 14.509 12.0756C14.509 12.4954 14.2973 13.1168 13.9001 13.6309Z",fill:"url(#paint2_linear_11766_2366)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_11766_2366",x1:6.58623,y1:15.8336,x2:20.5188,y2:15.8336,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#094987"}),l.createElement("stop",{offset:.245021,stopColor:"#0C59A4"}),l.createElement("stop",{offset:1,stopColor:"#114A8B"})),l.createElement("linearGradient",{id:"paint1_linear_11766_2366",x1:8,y1:5.99998,x2:5.22878,y2:19.2687,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#117FBA"}),l.createElement("stop",{offset:.223416,stopColor:"#1797E0"}),l.createElement("stop",{offset:.947917,stopColor:"#0078D4"})),l.createElement("linearGradient",{id:"paint2_linear_11766_2366",x1:22,y1:10,x2:8,y2:5.50003,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#48D566"}),l.createElement("stop",{offset:1,stopColor:"#35C1F1"})))),Ch=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M9.29079 9.1001C4.70421 9.1002 1.2758 12.8547 1.0177 17.0373C1.17748 17.9385 1.70262 19.7181 2.52502 19.6268C3.553 19.5125 6.14201 19.6268 8.35029 15.6289C9.96344 12.7085 13.2818 9.10001 9.29079 9.1001Z",fill:"url(#paint0_radial_105551_302)"}),l.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint1_radial_105551_302)"}),l.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint2_radial_105551_302)",fillOpacity:.4}),l.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint3_radial_105551_302)"}),l.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint4_radial_105551_302)",fillOpacity:.6}),l.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint5_radial_105551_302)",fillOpacity:.9}),l.createElement("path",{d:"M9.31824 25.9703C9.31824 25.9703 21.986 25.9952 24.1347 25.9952C28.0342 25.9952 30.999 22.8115 30.9991 19.0966C30.9991 15.3817 27.9747 12.2173 24.1348 12.2173C20.2949 12.2173 18.0836 15.0901 16.4227 18.2259C14.4764 21.9005 11.9937 25.9262 9.31824 25.9703Z",fill:"url(#paint6_linear_105551_302)"}),l.createElement("path",{d:"M9.31824 25.9703C9.31824 25.9703 21.986 25.9952 24.1347 25.9952C28.0342 25.9952 30.999 22.8115 30.9991 19.0966C30.9991 15.3817 27.9747 12.2173 24.1348 12.2173C20.2949 12.2173 18.0836 15.0901 16.4227 18.2259C14.4764 21.9005 11.9937 25.9262 9.31824 25.9703Z",fill:"url(#paint7_radial_105551_302)",fillOpacity:.4}),l.createElement("path",{d:"M9.31824 25.9703C9.31824 25.9703 21.986 25.9952 24.1347 25.9952C28.0342 25.9952 30.999 22.8115 30.9991 19.0966C30.9991 15.3817 27.9747 12.2173 24.1348 12.2173C20.2949 12.2173 18.0836 15.0901 16.4227 18.2259C14.4764 21.9005 11.9937 25.9262 9.31824 25.9703Z",fill:"url(#paint8_radial_105551_302)",fillOpacity:.9}),l.createElement("defs",null,l.createElement("radialGradient",{id:"paint0_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(6.05863 7.25975 -10.1194 12.3526 1.58653 10.1963)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#4894FE"}),l.createElement("stop",{offset:.695072,stopColor:"#0934B3"})),l.createElement("radialGradient",{id:"paint1_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-26.6342 30.7229 -23.4745 -18.9187 26.9705 -0.690804)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.165327,stopColor:"#23C0FE"}),l.createElement("stop",{offset:.534,stopColor:"#1C91FF"})),l.createElement("radialGradient",{id:"paint2_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-6.33129 -5.31528 -11.8431 14.7663 7.72211 10.7344)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:.660528,stopColor:"#ADC0FF",stopOpacity:0})),l.createElement("radialGradient",{id:"paint3_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-7.11293 -6.01877 9.14061 -10.8028 16.711 20.5051)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#033ACC"}),l.createElement("stop",{offset:1,stopColor:"#368EFF",stopOpacity:0})),l.createElement("radialGradient",{id:"paint4_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(8.12906 18.7598 -20.2526 8.77435 7.17496 5.4191)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.592618,stopColor:"#3464E3",stopOpacity:0}),l.createElement("stop",{offset:1,stopColor:"#033ACC"})),l.createElement("radialGradient",{id:"paint5_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-21.2655 21.266 33.3159 33.3166 26.6427 1.43264)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#4BFDE8"}),l.createElement("stop",{offset:.543937,stopColor:"#4BFDE8",stopOpacity:0})),l.createElement("linearGradient",{id:"paint6_linear_105551_302",x1:20.1654,y1:25.9812,x2:20.1654,y2:12.3807,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#0086FF"}),l.createElement("stop",{offset:.49,stopColor:"#00BBFF"})),l.createElement("radialGradient",{id:"paint7_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(12.6678 5.02394 -16.0514 21.3963 13.0585 13.8376)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:.785262,stopColor:"white",stopOpacity:0})),l.createElement("radialGradient",{id:"paint8_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-14.1522 12.1976 -16.7761 -10.2898 30.5753 11.1494)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#4BFDE8"}),l.createElement("stop",{offset:.584724,stopColor:"#4BFDE8",stopOpacity:0})))),cM=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M21.0063 5.41416L4.42759 15.9228L3.00183 13.6735V11.7353C3.00183 11.0297 3.35909 10.372 3.95105 9.98784L13.5882 3.73443C15.0565 2.78169 16.9478 2.78155 18.4162 3.73406L21.0063 5.41416Z",fill:"url(#paint0_linear_105551_397)"}),l.createElement("path",{d:"M18.2683 3.64233C18.3181 3.67198 18.3676 3.70268 18.4165 3.73444L25.9378 8.61321L7.28914 20.4339L4.42749 15.9193L18.1138 7.22729C19.4101 6.40398 19.4669 4.55187 18.2683 3.64233Z",fill:"url(#paint1_linear_105551_397)"}),l.createElement("path",{d:"M18.2683 3.64233C18.3181 3.67198 18.3676 3.70268 18.4165 3.73444L25.9378 8.61321L7.28914 20.4339L4.42749 15.9193L18.1138 7.22729C19.4101 6.40398 19.4669 4.55187 18.2683 3.64233Z",fill:"url(#paint2_linear_105551_397)",fillOpacity:.2}),l.createElement("path",{d:"M14.7293 22.6909L7.28894 20.4338L23.1079 10.4064C24.4401 9.5619 24.4367 7.61694 23.1014 6.77722L23.0302 6.73242L23.2353 6.86006L28.0498 9.98306C28.6419 10.3672 28.9993 11.0249 28.9993 11.7307V13.6066L14.7293 22.6909Z",fill:"url(#paint3_linear_105551_397)"}),l.createElement("path",{d:"M14.7293 22.6909L7.28894 20.4338L23.1079 10.4064C24.4401 9.5619 24.4367 7.61694 23.1014 6.77722L23.0302 6.73242L23.2353 6.86006L28.0498 9.98306C28.6419 10.3672 28.9993 11.0249 28.9993 11.7307V13.6066L14.7293 22.6909Z",fill:"url(#paint4_linear_105551_397)",fillOpacity:.2}),l.createElement("path",{d:"M18.4162 3.73406C16.9478 2.78155 15.0565 2.78169 13.5882 3.73443L3.95105 9.98784C3.35909 10.372 3.00183 11.0297 3.00183 11.7353V11.8301C3.02507 12.5385 3.39786 13.1914 3.99995 13.571L15.9829 21.1256L27.996 13.5825C28.6198 13.1907 28.9985 12.5058 28.9985 11.7691V13.6068L28.9988 11.7307C28.9988 11.025 28.6414 10.3672 28.0493 9.98309L18.4162 3.73406Z",fill:"url(#paint5_radial_105551_397)"}),l.createElement("path",{d:"M13.8709 29.0012H24.4983C26.9836 29.0012 28.9983 26.9865 28.9983 24.5012L28.9983 11.6782C28.9983 12.4715 28.5905 13.2092 27.9186 13.631L12.2086 23.4955C11.357 24.0302 10.8401 24.9652 10.8402 25.9707C10.8404 27.6444 12.1972 29.0012 13.8709 29.0012Z",fill:"url(#paint6_linear_105551_397)"}),l.createElement("path",{d:"M13.8709 29.0012H24.4983C26.9836 29.0012 28.9983 26.9865 28.9983 24.5012L28.9983 11.6782C28.9983 12.4715 28.5905 13.2092 27.9186 13.631L12.2086 23.4955C11.357 24.0302 10.8401 24.9652 10.8402 25.9707C10.8404 27.6444 12.1972 29.0012 13.8709 29.0012Z",fill:"url(#paint7_radial_105551_397)",fillOpacity:.4}),l.createElement("path",{d:"M13.8709 29.0012H24.4983C26.9836 29.0012 28.9983 26.9865 28.9983 24.5012L28.9983 11.6782C28.9983 12.4715 28.5905 13.2092 27.9186 13.631L12.2086 23.4955C11.357 24.0302 10.8401 24.9652 10.8402 25.9707C10.8404 27.6444 12.1972 29.0012 13.8709 29.0012Z",fill:"url(#paint8_radial_105551_397)",fillOpacity:.5}),l.createElement("path",{d:"M18.1862 29.0003H7.5004C5.01512 29.0003 3.0004 26.9856 3.0004 24.5003V11.7129C3.0004 12.4774 3.3927 13.1885 4.03946 13.5963L19.7712 23.5142C20.6346 24.0586 21.1583 25.0079 21.1582 26.0286C21.158 27.6699 19.8274 29.0003 18.1862 29.0003Z",fill:"url(#paint9_radial_105551_397)"}),l.createElement("path",{d:"M18.1862 29.0003H7.5004C5.01512 29.0003 3.0004 26.9856 3.0004 24.5003V11.7129C3.0004 12.4774 3.3927 13.1885 4.03946 13.5963L19.7712 23.5142C20.6346 24.0586 21.1583 25.0079 21.1582 26.0286C21.158 27.6699 19.8274 29.0003 18.1862 29.0003Z",fill:"url(#paint10_linear_105551_397)"}),l.createElement("rect",{x:2,y:14,width:12,height:12,rx:2.75,fill:"url(#paint11_radial_105551_397)"}),l.createElement("rect",{x:2,y:14,width:12,height:12,rx:2.75,fill:"url(#paint12_radial_105551_397)",fillOpacity:.5}),l.createElement("path",{d:"M7.96826 23.3589C7.0318 23.3589 6.263 23.0568 5.66185 22.4526C5.0607 21.8485 4.76013 21.06 4.76013 20.0873C4.76013 19.0602 5.06524 18.2295 5.67544 17.5951C6.28565 16.9607 7.08466 16.6436 8.07248 16.6436C9.00591 16.6436 9.76565 16.9471 10.3517 17.5543C10.9408 18.1615 11.2353 18.962 11.2353 19.9559C11.2353 20.9769 10.9302 21.8001 10.32 22.4254C9.71279 23.0477 8.92888 23.3589 7.96826 23.3589ZM7.99544 22.0765C8.50597 22.0765 8.9168 21.8968 9.22794 21.5373C9.53909 21.1778 9.69466 20.6779 9.69466 20.0375C9.69466 19.3699 9.54362 18.8503 9.24154 18.4787C8.93945 18.1071 8.53617 17.9214 8.03169 17.9214C7.51211 17.9214 7.09373 18.1132 6.77654 18.4968C6.45935 18.8775 6.30076 19.3819 6.30076 20.0103C6.30076 20.6477 6.45935 21.1521 6.77654 21.5237C7.09373 21.8923 7.50003 22.0765 7.99544 22.0765Z",fill:"white"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_105551_397",x1:5.88149,y1:14.8183,x2:21.0063,y2:5.43718,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#20A7FA"}),l.createElement("stop",{offset:.4,stopColor:"#3BD5FF"}),l.createElement("stop",{offset:1,stopColor:"#C4B0FF"})),l.createElement("linearGradient",{id:"paint1_linear_105551_397",x1:11.0876,y1:18.0175,x2:19.5075,y2:4.53529,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#165AD9"}),l.createElement("stop",{offset:.5008,stopColor:"#1880E5"}),l.createElement("stop",{offset:1,stopColor:"#8587FF"})),l.createElement("linearGradient",{id:"paint2_linear_105551_397",x1:17.2286,y1:18.2009,x2:7.88049,y2:10.584,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.236946,stopColor:"#448AFF",stopOpacity:0}),l.createElement("stop",{offset:.792113,stopColor:"#0032B1"})),l.createElement("linearGradient",{id:"paint3_linear_105551_397",x1:16.0387,y1:21.1339,x2:30.8121,y2:11.6789,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#1A43A6"}),l.createElement("stop",{offset:.492267,stopColor:"#2052CB"}),l.createElement("stop",{offset:1,stopColor:"#5F20CB"})),l.createElement("linearGradient",{id:"paint4_linear_105551_397",x1:20.2091,y1:20.5687,x2:11.2319,y2:12.8005,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#0045B9",stopOpacity:0}),l.createElement("stop",{offset:.669859,stopColor:"#0D1F69"})),l.createElement("radialGradient",{id:"paint5_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(16.0012 3.59051) rotate(-90) scale(19.5009 21.1067)"},l.createElement("stop",{offset:.568182,stopColor:"#275FF0",stopOpacity:0}),l.createElement("stop",{offset:.992424,stopColor:"#002177"})),l.createElement("linearGradient",{id:"paint6_linear_105551_397",x1:28.9983,y1:20.2914,x2:15.8933,y2:20.2914,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#4DC4FF"}),l.createElement("stop",{offset:.196145,stopColor:"#0FAFFF"})),l.createElement("radialGradient",{id:"paint7_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.9562 26.0462) rotate(-45) scale(8.35708)"},l.createElement("stop",{offset:.259477,stopColor:"#0060D1"}),l.createElement("stop",{offset:.908166,stopColor:"#0383F1",stopOpacity:0})),l.createElement("radialGradient",{id:"paint8_radial_105551_397",cx:0,cy:0,r:1,gradientTransform:"matrix(17.2076 -22.5536 15.8577 21.5059 6.34585 32.2282)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.732317,stopColor:"#F4A7F7",stopOpacity:0}),l.createElement("stop",{offset:1,stopColor:"#F4A7F7"})),l.createElement("radialGradient",{id:"paint9_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(12.0794 18.5501) rotate(123.339) scale(14.9678 38.8433)"},l.createElement("stop",{stopColor:"#49DEFF"}),l.createElement("stop",{offset:.724349,stopColor:"#29C3FF"})),l.createElement("linearGradient",{id:"paint10_linear_105551_397",x1:1.16485,y1:26.0177,x2:13.7825,y2:26.0086,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.205882,stopColor:"#6CE0FF"}),l.createElement("stop",{offset:.535,stopColor:"#50D5FF",stopOpacity:0})),l.createElement("radialGradient",{id:"paint11_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1.95718 14.4615) rotate(46.9242) scale(15.7964)"},l.createElement("stop",{offset:.038877,stopColor:"#0091FF"}),l.createElement("stop",{offset:.919119,stopColor:"#183DAD"})),l.createElement("radialGradient",{id:"paint12_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(8 21.3079) rotate(90) scale(8.4 9.68913)"},l.createElement("stop",{offset:.557796,stopColor:"#0FA5F7",stopOpacity:0}),l.createElement("stop",{offset:1,stopColor:"#74C6FF"})))),lM=()=>{const e=M(rd);return an()&&e.length>0};function zl(){const e=M(rd),t=se(rd),n=se(iC),{t:s}=Y(),o=qp(),r=lM(),a=l.useCallback(v=>{switch(v){case"google-drive":return{type:"google-drive",title:s("connector.googleDrive.title"),description:s("connector.googleDrive.description"),details:s("connector.googleDrive.details"),websiteLink:"https://drive.google.com",privacyLink:es,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:z3};case"one-drive":return{type:"one-drive",title:s("connector.oneDrive.title"),description:s("connector.oneDrive.description"),details:s("connector.oneDrive.details"),websiteLink:"https://onedrive.com",privacyLink:es,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:Ch};case"outlook":return{type:"outlook",title:s("outlook.title"),description:s("outlook.description"),details:s("connector.outlook.details"),websiteLink:"https://outlook.com",privacyLink:es,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:cM};case"google-calendar":return{type:"google-calendar",title:s("connector.googleCalendar.title"),description:s("connector.googleCalendar.description"),details:s("connector.googleCalendar.details"),websiteLink:"https://calendar.google.com",privacyLink:es,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:H3};case"gmail":return{type:"gmail",title:s("connector.googleMail.title"),description:s("connector.googleMail.description"),details:s("connector.googleMail.details"),websiteLink:"https://mail.google.com",privacyLink:es,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:G3};case"google-contacts":return{type:"google-contacts",title:s("connector.googleContacts.title"),description:s("connector.googleContacts.description"),details:s("connector.googleContacts.details"),websiteLink:"https://contacts.google.com",privacyLink:es,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:hm};case"edge-browser":return{type:"edge-browser",title:s("connector.edgeBrowser.title"),description:s("connector.edgeBrowser.description"),details:s("connector.edgeBrowser.details"),websiteLink:"https://microsoft.com/edge",privacyLink:es,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:iM};default:return null}},[s]),i=l.useCallback(v=>{if(!v)return null;const b=e.find(E=>E.type===v);if(!b)return null;const y=a(v);return y?{id:b.id,status:b.status,...y}:null},[e,a]),u=(v,b)=>{const y=a(v);n({type:v,title:y==null?void 0:y.title,IconComponent:y==null?void 0:y.IconComponent,visible:!0,startSource:b})},d=async v=>{if(!v)return;const b=await Nn({path:`/connections/${v}`,args:{options:{method:"DELETE"},body:{}}});b.ok&&b.status===204&&(t(e.map(y=>y.id===v?{...y,status:"disconnected"}:y)),await o.invalidateQueries({queryKey:[Rx]}))},m=async(v,b)=>{const y=e.find(I=>I.id===v);if(!v||!y)return;const E=I=>{t(_=>_.map(T=>T.id===v?{...T,status:I}:T))};E(b),(await Nn({path:`/connections/${v}/${b==="ready"?"enable":"disable"}`,args:{options:{method:"POST"},body:{connectionStatus:b}}})).ok?await o.invalidateQueries({queryKey:[Rx]}):E(y.status)},f=l.useCallback(()=>e.filter(b=>b.status==="ready").length,[e]),p=l.useCallback(v=>v==="one-drive"||v==="outlook"||v==="edge-browser",[]),g=(v,b)=>{const y=v.status==="ready"||v.status==="disabled",E=b.status==="ready"||b.status==="disabled";return y&&!E?-1:!y&&E?1:0},C=l.useCallback(()=>{const v=[],b=[];for(const x of e)p(x.type)?v.push(x):b.push(x);b.sort(g);const y=b.filter(x=>x.status==="ready"||x.status==="disabled");y.unshift(...v);const E=b.filter(x=>x.status==="disconnected"||x.status==="sign-in-required");return[y,E]},[e,p]);return{isConnectorsAvailable:r,getConnectorAppInfo:i,getSortedConnectors:C,isFirstParty:p,handleConnect:u,handleDisconnect:d,handleToggle:m,getAvailableConnectorsCount:f}}function oge({data:e}){const{t}=Y(),n=se(W3),s=ut(),{getConnectorAppInfo:o}=zl(),{type:r}=e,{IconComponent:a}=o(r)??{},i=async()=>{Lp(r,"insufficient_scope_modal","cancel"),n(null);const u=jn("connectorConsentFlowStartUrl");await qs({to:u??"/",from:s})};return c.jsx(fn,{isOpen:!0,className:"w-full max-w-[448px]",onClose:i,customScrollBar:!0,hideDismissButton:!0,children:c.jsxs("div",{className:"flex w-full flex-col items-center gap-2 p-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"flex flex-col items-center justify-center gap-2.5 rounded-2xl border border-black/12 p-1 dark:border-white/12",children:a&&c.jsx(a,{className:"size-12 p-1"})}),c.jsx("div",{className:"absolute -end-2 -top-1.5 flex size-5 items-center justify-center rounded-full bg-system-red-550 contrast-more:bg-neutral-100 contrast-more:outline",children:c.jsx(nn,{className:"size-4 text-foreground-100 contrast-more:text-foreground-600 dark:text-foreground-900"})})]}),c.jsx("h3",{className:"pt-4 text-center text-foreground-800 text-lg sm:text-2xl",children:t("connector.connectUnsuccessfulTitle")}),c.jsx("p",{className:"mt-4",children:t("connector.insufficientScopeErrorDescription")}),c.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[c.jsx(re,{className:"w-full sm:w-96",color:"strong",size:"56-xl",title:t("common.retry"),onClick:async()=>{n(null),Lp(r,"insufficient_scope_modal","retry");const u=await rM(r);u&&(Ws("connectorConsentFlowStartUrl",s),Qi(u))},children:t("common.retry")}),c.jsx(re,{className:"w-full sm:w-96",color:"subtle-dimmed-inverted",size:"56-xl",title:t("common.cancel"),onClick:i,children:t("common.cancel")})]})]})})}const h0="relative size-full rounded-full aspect-square",l8="flex items-center justify-center uppercase",g0="after:absolute after:-inset-px after:rounded-full after:border-[0.5px] after:border-black/10 dark:after:border-white/20";function K3(e){const{firstName:t,imgSrc:n,nameSizeClass:s,altText:o,style:r,showTwoCharacters:a=!1,showBorder:i=!0}=e;if(n)return c.jsx("img",{className:F("overflow-hidden object-cover",h0,i&&g0),src:n,alt:o??z("common.profileImage")});if(t){let u=t[0];if(a){const d=t.trim().split(/\s+/).filter(Boolean);d.length>=2&&(u=d.slice(0,2).map(m=>m[0]).join(""))}return c.jsx("div",{className:F(h0,l8,i&&g0,s??"text-lg"),style:r??{},children:c.jsx("div",{children:u})})}return c.jsx("div",{className:F(h0,l8,i&&g0),style:r??{},children:c.jsx(vh,{className:F("size-6 fill-foreground-800",Zre),"alt-text":o??z("common.profileImage")})})}const u8=5e3;function rge(){const e=H("aad-student"),t=M(nQ),{t:n}=Y(),[s,o]=l.useState(!1),r=e&&t&&!s,a=M(aS),i=M(Ri),u=ut(),d=e&&t===void 0&&a&&i,m=d&&!s;l.useEffect(()=>{if(d&&!s){const I=setTimeout(()=>{o(!0),yQ(new Error(`Student status check timed out after ${u8}ms`))},u8);return()=>clearTimeout(I)}},[d,s]);const f=n(r?"entraRedirect.guestTitle":"entraRedirect.workTitle"),p=n(r?"entraRedirect.guestDescription":"entraRedirect.workDescription"),g=()=>n(r?"aadStudent.title":"entraRedirect.pageTitle"),C=I=>r?n("aadStudent.subtitle",{email:I}):void 0,v=I=>r?n("aadStudent.continueAsGuestButtonText"):n("entraRedirect.goToWorkButton",{redirectUrl:I}),b=r?"mb-6 sm:mb-10":"mb-8 sm:mb-14",y=r?"Student":"Enterprise",E=Ple()&&["/e/so","/e/sol"].includes(u),x=n(E?"entraRedirect.studentOffer.personalDescription":"entraRedirect.personalDescription");return{isStudentEnabled:r,isLoadingEnabled:m,isStudentOffer:E,workTitle:f,workDescription:p,titleGapClass:b,eventInfoScenario:y,personalDescription:x,getPageTitle:g,getPageSubTitle:C,getWorkButtonText:v}}function age(){var _e;const e=M(aS),t=M(Ri),n=M(Jt),[s,o]=l.useState(void 0),r=H("aad-login-removal"),a=Fl(),i=xo(),{isStudentEnabled:u,isLoadingEnabled:d,isStudentOffer:m,workTitle:f,workDescription:p,titleGapClass:g,eventInfoScenario:C,personalDescription:v,getPageTitle:b,getPageSubTitle:y,getWorkButtonText:E}=rge(),x=l.useId(),I=!u&&(n==null?void 0:n.email);l.useEffect(()=>{e&&Mn(Q0,JSON.stringify(e))},[e]);let _=!1;try{_=JSON.parse(tn(Q0)??"false")}catch(Ae){console.error("Failed to parse authentication status:",Ae),_=!1}const T=e?t:!_&&!!((_e=window.cwcRedirect)!=null&&_e.cwcRedirectUrl),[A,k]=l.useState(T),[R,P]=l.useState(),{t:B}=Y(),{login:U,logout:$}=Xi();l.useEffect(()=>{async function Ae(){const K=await W4();o(K),r&&(n!=null&&n.email)&&MJ()}Ae()},[n,r]);const Q=(Ae,K,be)=>Jr(`${Ae}?fromCode=cmcv2&redirectId=${K}${be?`&login_hint=${be}`:""}`),te=async()=>{let Ae=crypto.randomUUID().replace(/-/g,"").toUpperCase(),K=dg,be="AadUnknown";t&&s?K=Q(dg,Ae,s.username):window.cwcRedirect&&(K=window.cwcRedirect.cwcRedirectUrl,Ae=window.cwcRedirect.redirectId,be=window.cwcRedirect.chatEligibility),ae.instance().config().entraRedirectModalBehaviour==="new-tab"?Eo(Jr(K)):Qi(Jr(K)),D.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirect",...R,eventInfo_traceId:Ae,eventInfo_redirectUrl:K,eventInfo_chatEligibility:be}})},X=async()=>{D.trackEvent({name:"interaction",data:{eventName:"copilotStudentRedirectSignOut",...R}}),await $()},ne=async()=>{D.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirectSwitchAccount",eventInfo_scenario:C,...R}}),k(!1),a?(await $(!1),await i({from:"/",to:m?"/e/sol":"/login"})):await U({provider:"microsoft"})},q=async()=>{D.trackEvent({name:"interaction",data:{eventName:e?"copilotEnterpriseRedirectSignOut":"copilotEnterpriseRedirectContinueSignedOut",...R}}),e?await $():k(!1)},Z=async()=>{KC("/")};if(l.useEffect(()=>{k(T),T&&(async()=>{var be;let K={};if(t){const Me=await W4();K={userAadId:(be=Me==null?void 0:Me.idTokenClaims)==null?void 0:be.oid,userAadTenantId:Me==null?void 0:Me.tenantId}}else window.cwcRedirect&&(K={userAadId:window.cwcRedirect.userId,userAadTenantId:window.cwcRedirect.tenantId});D.trackEvent({name:"system",data:{eventName:"copilotEnterpriseRedirectImpression",eventInfo_redirectReason:t?"AAD":"CWC",eventInfo_scenario:C,...K}}),P(K)})().catch(console.error)},[t,T,C]),!A)return null;const J=!_&&window.cwcRedirect?new URL(window.cwcRedirect.cwcRedirectUrl).hostname:dg,W=y(n==null?void 0:n.email),le=()=>u?null:r?c.jsx("div",{className:"mt-8 sm:mt-12",children:c.jsx(hn,{i18nKey:"entraRedirect.playAroundFirst",components:{entraContinue:c.jsx("button",{role:"link",type:"button",className:"underline",onClick:Z,children:B("entraRedirect.playAroundFirst")})}})}):c.jsx("div",{className:"mt-8 sm:mt-12",children:c.jsx(hn,{i18nKey:e?"entraRedirect.signOut":"entraRedirect.continueSignedOut",components:{[e?"entraSignOut":"entraContinue"]:c.jsx("button",{type:"button",className:"underline",onClick:q,children:B(e?"entraRedirect.signOut":"entraRedirect.continueSignedOut")})}})});return c.jsxs(fn,{fadeInDuration:0,className:de("fixed inset-0",lt.modal),isOpen:!0,headerText:x,children:[c.jsx(ec,{forceGradient:!0}),c.jsx("main",{className:"relative m-auto flex size-full max-w-chat flex-col items-center justify-center overflow-y-auto p-4 pb-8 pt-20 sm:py-4",children:d?c.jsx(it,{className:"size-8"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-9",children:c.jsx(Sm,{className:"size-12"})}),c.jsx("h1",{id:x,className:de("mb-8 w-full whitespace-pre-wrap break-words px-4 text-center text-4xl sm:mb-14",g),children:b()}),u&&W&&c.jsx("p",{className:"mb-10 w-full whitespace-pre-wrap break-words px-4 text-center text-base sm:mb-16",children:W}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 md:gap-16",children:[c.jsx(d8,{title:f,description:p,onClick:u?X:te,children:c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{children:E(J)}),I&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"relative size-5",children:c.jsx(K3,{firstName:n.firstName??n.givenName??void 0,imgSrc:n.imgSrc,nameSizeClass:"text-sm"})}),c.jsx("p",{className:"text-sm",children:n.email})]})]})}),c.jsx(d8,{title:B("entraRedirect.personalTitle"),description:v,onClick:ne,children:c.jsx("p",{className:"text-sm",children:B("entraRedirect.switchToPersonalButton")})})]}),le()]})})]})}function d8({title:e,onClick:t,description:n,children:s}){return c.jsxs("div",{className:"flex flex-col justify-between rounded-4xl bg-white/70 p-4 dark:bg-background-300/70 md:p-6 md:pb-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"mb-2.5 text-xl",children:e}),c.jsx("p",{className:"mb-6 text-sm",children:n})]}),c.jsx(re,{color:"default",variant:"rect",title:e,onClick:t,children:s})]})}const ige=l.lazy(()=>V(()=>import("./index-CNYqgb-b.js").then(e=>e.i),__vite__mapDeps([360,1,318])));function cge(e){const{onClose:t,interceptedLink:n}=e,{t:s}=Y(),o=l.useRef(null);return $i(o),hs(r=>{(r.key==="Escape"||r.key==="Control")&&t()}),c.jsxs("div",{className:"flex w-[400px] max-w-[80vw] flex-col items-center p-4 text-center",children:[c.jsx("div",{className:"bg-white p-2",children:c.jsx(l.Suspense,{fallback:c.jsx("span",{}),children:c.jsx(ige,{value:n,size:96,"aria-label":s("composer.interceptedLink.qrcode_alt_text")})})}),c.jsx("h1",{className:"py-3 text-xl",children:s("composer.interceptedLink.title")}),c.jsx("p",{className:"w-full pb-7",children:c.jsx(hn,{i18nKey:"composer.interceptedLink.description",components:{span:c.jsx("span",{className:"break-words underline"})},values:{link:n}})}),c.jsx(re,{ref:o,onClick:t,title:"close",variant:"pill",size:"48-lg",className:"w-full",children:s("common.closeText")})]})}const uM=N(null);function lge(e){const{t}=Y(),{options:n,onClose:s}=e,o=M(sn),r=se(S1),a=se(aC),i=M(Hi),u=M(iQ),{allowUpsell:d,payflowEntryPoint:m,upsellReason:f}=n,p=n.allowUpsell?"":n.disabledReason,g=n.dismissButton??t("common.dismiss"),{handleSubscription:C,payflowType:v}=f3({payflowEntryPoint:n.payflowEntryPoint,upsellReason:n.upsellReason,entryStyle:"Button",upsellEligibleSubscription:n.subscriptions,enableDimePreload:d}),b=(o==null?void 0:o.accountType)??"None";l.useEffect(()=>{d?Hce({upsellEntryStyle:"Button",actionButton:"Upgrade",payflowEntryPoint:m,upsellReason:f,loginProvider:b,payflowType:v,curatedSubscription:u}):Vce({payflowEntryPoint:m,upsellReason:f,loginProvider:b,disabledReason:p,curatedSubscription:u})},[p,d,m,f,b,u,v,o==null?void 0:o.accountType]);const y=l.useCallback(()=>{(o==null?void 0:o.provider)==="auth0"?(s(),r({source:"Composer"})):(i==null?void 0:i.channel)==="google"||(i==null?void 0:i.channel)==="apple"?(s(),a({source:i.channel,entryStyle:"Button",upsellReason:"DailyLimit",payflowEntryPoint:n.payflowEntryPoint})):(s(),C())},[o==null?void 0:o.provider,i==null?void 0:i.channel,s,r,a,n.payflowEntryPoint,C]);return c.jsx(fn,{isOpen:!0,className:"h-auto max-w-md !gap-0 !p-0",onClose:s,fullBleed:!0,children:c.jsxs("div",{className:"flex w-full flex-col p-8",children:[c.jsx("h1",{className:"mt-4 w-full items-center text-center text-2xl",children:n.title}),c.jsx("p",{className:"mt-6 w-full",children:n.subtitle}),c.jsxs("div",{className:"mt-8 flex flex-col gap-3",children:[n.allowUpsell&&c.jsx(re,{className:"w-full rounded-4xl",color:"strong",title:n.confirmButton,onClick:y,children:n.confirmButton}),c.jsx(re,{className:"w-full rounded-4xl",color:n.allowUpsell?"default":"strong",title:g,onClick:s,children:g})]})]})})}function uge(e){const{t}=Y(),{config:n,onClose:s}=e,o=M(Hi),r=M(sn),a=tA(),i=n.source==="apple"?SY:EY,u=t("subscriptionManage.redirectMobileStoreTitle",{store:i}),d=t("subscriptionManage.redirectMobileStoreContent",{store:i});return l.useEffect(()=>{D.trackEvent({name:"interaction",data:{eventName:"payflowBlockDialogShown",eventInfo_upsellEntryStyle:n.entryStyle,eventInfo_payflowEntryPoint:n.payflowEntryPoint,eventInfo_upsellReason:n.upsellReason,eventInfo_loginProvider:(r==null?void 0:r.accountType)??"None",eventInfo_payflowType:"DIME",eventInfo_curatedSubscription:(o==null?void 0:o.tier)??nA,eventInfo_disabledReason:"3pPurchase"}})},[n,o==null?void 0:o.tier,a,r==null?void 0:r.accountType]),c.jsx("div",{className:F("fixed inset-0 h-screen w-screen",lt.modal),"data-outside-events-ignore":!0,onClick:s,children:c.jsx(fn,{isOpen:!0,className:"h-auto max-w-md gap-0 p-0",children:c.jsxs("div",{className:"flex w-full flex-col p-8",children:[c.jsx("h1",{className:"mt-4 w-full items-center text-center text-2xl",children:u}),c.jsx("p",{className:"mt-6 w-full",children:d}),c.jsx(re,{className:"mt-6 w-full rounded-4xl",color:"strong",title:t("subscriptionManage.upgradeButton"),onClick:s,children:t("subscriptionManage.redirectMobileStoreDismiss")})]})})})}function dge(e){const{t}=Y(),{config:n,onClose:s}=e,o=M(Jt),{logout:r,login:a}=Xi(),i=l.useRef((o==null?void 0:o.email)??"");l.useEffect(()=>{(async()=>{if(o!=null&&o.email)o.email!==i.current&&(i.current=o.email);else{const p=await UI();p!=null&&p.username&&p.username!==i.current?i.current=p.username:p!=null&&p.username||aa({scenario:"missingUsernameForUserMismatched",...Hr(new Error("Missing username for user mismatched"))})}})()},[o==null?void 0:o.email]),l.useEffect(()=>{sA({correlationId:n.correlationId,payflowInstanceId:n.payflowInstanceId})},[n.correlationId,n.payflowInstanceId]);const u=l.useCallback(async()=>{await r(),Ws("shouldStartSubscription",!0),a({provider:"microsoft"})},[r,a]),{handleSubscription:d}=f3({payflowEntryPoint:n.payflowEntryPoint,upsellReason:void 0,entryStyle:"Button",enableDimePreload:!0}),m=l.useCallback(()=>{pi("payflowAuthHint"),s(),d()},[s,d]);return c.jsx(fn,{isOpen:!0,className:"h-auto max-w-md",fullBleed:!0,onClose:s,children:c.jsxs("div",{className:"flex w-full flex-col p-8",children:[c.jsx("h1",{className:"mt-4 w-full items-center text-center text-2xl",children:t("proSubscription.modal.userMismatched.title")}),c.jsx("p",{className:"mt-6 w-full",children:t("proSubscription.modal.userMismatched.content",{userName:i.current})}),c.jsx(re,{className:"mt-8 min-h-12 w-full rounded-4xl",color:"strong",title:t("proSubscription.modal.userMismatched.actionButtonText"),onClick:u,children:t("proSubscription.modal.userMismatched.actionButtonText")}),c.jsx(re,{className:"mt-6 min-h-12 w-full rounded-4xl",color:"default",title:t("proSubscription.modal.userMismatched.cancelButtonText",{userName:i.current}),onClick:m,children:t("proSubscription.modal.userMismatched.cancelButtonText",{userName:i.current})})]})})}function mge(){const{t:e}=Y(),t=M(bn),n=M(d_),s=M(Kd),[o,r]=Fe(Oee),[a,i]=l.useState(!1),u=l.useCallback(()=>{r(!1)},[r]),d=l.useCallback(async()=>{!n||!t||(i(!0),pp.includes(n.status)||(await Ns()).stop({conversationId:t.id,taskId:n.id}))},[t,n]);l.useEffect(()=>{n!=null&&n.status&&pp.includes(n.status)&&(r(!1),i(!1))},[n==null?void 0:n.status,r]);const m=s!==null?e("research.cancel.limitAnnouncement",{limit:s+1}):"";return c.jsxs(Ho,{isOpen:o,headerText:e("research.cancel.title"),className:"max-w-96 gap-4",trapFocus:!0,children:[`${e("research.cancel.description")}${` ${m}`}`,c.jsx(re,{title:e("research.cancel.cancelButton"),onClick:d,className:"mt-auto text-system-red-550 dark:text-system-red-350",color:"default",size:"56-xl",disabled:a,children:a?c.jsx(it,{className:"size-8"}):e("research.cancel.cancelButton")}),c.jsx(re,{title:e("common.keep"),color:"strong",size:"56-xl",onClick:u,children:e("common.keep")})]})}const dM=70;function fge(e){var t;return(t=e.contents)!=null&&t.length?e.status==="completed"?"done":e.partialOutput&&e.partialOutput.length>0?"writing":"browsing":"planning"}const Y3=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M15.1017 16.1624C13.717 17.3101 11.9391 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 11.9391 17.3101 13.717 16.1624 15.1018L20.7803 19.7197C21.0732 20.0126 21.0732 20.4874 20.7803 20.7803C20.4874 21.0732 20.0125 21.0732 19.7196 20.7803L15.1017 16.1624ZM16.5 10C16.5 6.41015 13.5899 3.5 10 3.5C6.41015 3.5 3.5 6.41015 3.5 10C3.5 13.5899 6.41015 16.5 10 16.5C13.5899 16.5 16.5 13.5899 16.5 10Z"})),wAe=Object.freeze(Object.defineProperty({__proto__:null,default:Y3},Symbol.toStringTag,{value:"Module"}));function pge(e){const{text:t,isInDrawer:n=!1,isPreview:s}=e,{t:o}=Y(),r=s?Jk(t,dM,{ellipsis:!0}):t;return n?c.jsxs("div",{children:[c.jsx("strong",{className:"me-2",children:o("research.searched")}),c.jsx("span",{className:"text-foreground-800",children:r})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-foreground-700",children:o("research.searched")}),c.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-black/[0.06] px-2 py-1 text-foreground-450",children:[c.jsx(Y3,{className:"size-4"}),c.jsx("span",{className:"text-foreground-800 text-sm",children:t})]})]})}function hge(e){let{url:t}=e;t=co(t);const{title:n,decoration:s,source:o,iconUrl:r,mode:a,onClick:i}=e,u=l.useContext(wm),d=M(De),m=()=>{i&&i(e),$t({source:o,conversationId:d,messageId:u,destination:t})};return c.jsxs(re,{onClick:m,color:"default",variant:"pill",size:"28-xxs",title:n,href:t,children:[s,r&&c.jsx("img",{src:r,alt:n,className:"size-4 rounded-md border-[0.5px] border-neutral-300 bg-white/90 dark:border-neutral-600"}),c.jsx("span",{className:"me-0.5",children:a==="research"?Ts(t):n})]})}function gge(e){const{url:t,isInDrawer:n=!1,isPreview:s=!1}=e,{t:o}=Y();return c.jsxs("div",{className:"flex items-center gap-2",children:[n?c.jsx("strong",{children:o("research.read")}):c.jsx("span",{className:"text-foreground-700",children:o("research.read")}),s?c.jsx("span",{className:"text-foreground-800",children:Ts(t)}):c.jsx(hge,{title:Ts(t),url:t,source:"researchCitationLink"})]})}function m8(e){let t=0;for(const n of e)t+=n;return t}function vge(e,t,n){let s=0,o=null,r=[],a=0;return{getValue:()=>{if(!n)return 0;if(!o){o=Math.floor(performance.now());const u=e[e.length-1];if(!u)a=0;else{const d=u+m8(r)*1e3;d>o?(a=(d-o)/1e3,r=[]):(a=0,r=[])}}const i=e[s];return i?(s+=1,r=[],Math.max((i-o)/1e3,0)):(a=Number((a+m8(r)).toFixed(3)),r=[],t(s,o,a),s+=1,a)},queueUpdate:i=>{r.push(i)}}}function mM(e){const t=l.useRef([]);return l.useCallback(()=>vge(t.current,(n,s,o)=>{t.current[n]=s+o*1e3},e),[e])}function Cge(e){const{text:t,shouldAnimate:n,isPreview:s}=e,o=mM(!1),[r,a]=l.useState(0),i=l.useMemo(()=>{const u=o(),d=s?Jk(t,dM,{ellipsis:!0}):t,m=B3(d);return xd({contentBlocks:m,delay:u,forceRender:()=>{a(r+1)}})},[o,r,s,t]);return c.jsx("div",{className:F("flex gap-2 text-foreground-700",s?"items-center":"flex-col items-start"),children:c.jsx(bd,{blocks:i,shouldAnimate:n})})}function yge(e){const{item:t,shouldAnimate:n=!1,isPreview:s=!1,isInDrawer:o=!1}=e;switch(t.type){case"citation":return c.jsx(gge,{url:t.url,isInDrawer:o,isPreview:s});case"chainOfThought":return c.jsx(Cge,{text:t.text,shouldAnimate:n,isPreview:s});case"query":return c.jsx(pge,{text:t.text,isInDrawer:o,isPreview:s});default:return null}}function bge(e){const{progress:t}=e,{t:n}=Y(),s=(()=>{switch(t){case"planning":return n("research.steps.browse.future");case"writing":return n("research.steps.write.present");case"done":return n("research.stepsDrawer.reportReady");default:return""}})();return c.jsx("div",{children:c.jsx("strong",{children:s})})}function df(e){const{progress:t,contentItem:n,shouldAnimate:s,isPreview:o=!1}=e;return t!=="browsing"?c.jsx(bge,{progress:t}):n?c.jsx(yge,{item:n,shouldAnimate:s,isPreview:o,isInDrawer:!0}):null}const _m=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM15.2197 8.96967L10.75 13.4393L8.78033 11.4697C8.48744 11.1768 8.01256 11.1768 7.71967 11.4697C7.42678 11.7626 7.42678 12.2374 7.71967 12.5303L10.2197 15.0303C10.5126 15.3232 10.9874 15.3232 11.2803 15.0303L16.2803 10.0303C16.5732 9.73744 16.5732 9.26256 16.2803 8.96967C15.9874 8.67678 15.5126 8.67678 15.2197 8.96967Z"})),IAe=Object.freeze(Object.defineProperty({__proto__:null,default:_m},Symbol.toStringTag,{value:"Module"}));function mf(e){const{isFinal:t=!1,isLast:n=!1,shouldAnimate:s=!1,children:o}=e;let r=null;return t?r=c.jsx(_m,{className:"relative bottom-1.5 size-4 text-background-900"}):n?r=c.jsx(it,{className:"relative bottom-2.5 size-6"}):r=c.jsx("div",{className:"relative bottom-0.5 size-[9px] rounded-full bg-foreground-800"}),c.jsxs(ge.div,{className:"relative grid grid-cols-[auto,1fr] items-start gap-4",initial:s?"start":"end",animate:"end",variants:{start:Be,end:a=>({...tt,transition:{delay:a,ease:"easeInOut",duration:1.2}})},children:[c.jsxs("div",{className:"relative mt-2 flex h-full w-2 flex-col items-center",children:[r,!t&&!n&&c.jsx("div",{className:"absolute bottom-0 top-4 w-px bg-neutral-300 contrast-more:bg-foreground-900"})]}),o]})}function xge(e){var m,f;const{task:t,onGoToReport:n}=e,{t:s}=Y(),o=l.useRef(null),[r,a]=l.useState(!1);vk({onScrollEnd:()=>{if(!o.current)return;const{scrollTop:p,scrollHeight:g,clientHeight:C}=o.current,v=p+C>=g-50;a(!v)},scrollRefs:[o]}),l.useEffect(()=>{o.current&&!r&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})},[t,r]);const u=fge(t),d=((m=t.contents)==null?void 0:m.length)??0;return c.jsxs("div",{className:"flex h-full flex-col overflow-y-auto",children:[c.jsxs("div",{ref:o,className:"vertical-scrollbar scroll-fade relative space-y-4 overflow-y-auto scroll-smooth px-2 pb-2 text-sm [scrollbar-gutter:stable_both-edges;]",children:[c.jsx(mf,{isLast:u==="planning",shouldAnimate:u==="planning",children:c.jsx(df,{progress:"planning"})}),(f=t.contents)==null?void 0:f.map((p,g)=>{const C=u==="browsing"&&g===d-1;return c.jsx(mf,{isLast:C,shouldAnimate:u!=="done"&&C,children:c.jsx(df,{progress:"browsing",contentItem:p})},g)}),(u==="writing"||u==="done")&&c.jsx(mf,{isLast:u==="writing",shouldAnimate:u==="writing",children:c.jsx(df,{progress:"writing"})}),u==="done"&&c.jsx(mf,{isFinal:!0,shouldAnimate:!0,children:c.jsx(df,{progress:"done"})})]}),u==="done"&&c.jsx(re,{title:s("research.stepsDrawer.goToReport"),onClick:n,color:"strong",variant:"pill",size:"40-base",className:"mx-4 mt-8",children:s("research.stepsDrawer.goToReport")})]})}function Sge(){const{t:e}=Y(),t=M(d_),[n,s]=Fe(Lee),o=()=>{s(!1)},r=()=>{o()};return hs(a=>{a.key==="Escape"&&o()}),c.jsx(Ho,{isOpen:n,onClose:o,headerText:e("research.stepsDrawer.title"),className:"max-w-full p-4 sm:w-2/3 sm:min-w-96 sm:max-w-[600px]",headerClassName:"pb-12",headerTextClassName:"relative top-12 start-4",variant:"drawer",children:t&&c.jsx(xge,{task:t,onGoToReport:r})})}function Ege(){const e=new Map;function t({root:n,rootMargin:s,threshold:o}){let r=e.get(n);r||(r=new Map,e.set(n,r));const a=JSON.stringify({rootMargin:s,threshold:o});let i=r.get(a);if(!i){const u=new Map;i={observer:new IntersectionObserver(m=>{m.forEach(f=>{const p=u.get(f.target);p==null||p(f)})},{root:n,rootMargin:s,threshold:o}),entryCallbacks:u},r.set(a,i)}return{observe:(u,d)=>{i.entryCallbacks.set(u,d),i.observer.observe(u)},unobserve:u=>{i.entryCallbacks.delete(u),i.observer.unobserve(u)}}}return{getObserver:t}}var wge="0px",Ige=[0],_ge=Ege();function Tge(e){const t=(e==null?void 0:e.rootMargin)??wge,n=(e==null?void 0:e.threshold)??Ige,s=l.useRef(null),o=l.useRef(null),r=l.useRef(null),[a,i]=l.useState(),u=l.useCallback(()=>{function f(){const g=r.current,C=s.current;C&&(g==null||g.unobserve(C),i(void 0)),r.current=null}function p(){const g=s.current;if(!g)return;const C=_ge.getObserver({root:o.current,rootMargin:t,threshold:n});C.observe(g,v=>{i(v)}),r.current=C}f(),p()},[t,n]),d=l.useCallback(f=>(s.current=f,u(),()=>{s.current=null,u()}),[u]),m=l.useCallback(f=>(o.current=f,u(),()=>{o.current=null,u()}),[u]);return[d,{entry:a,rootRef:m}]}var Age=Tge;function kge(e){var u;const{once:t,...n}=e??{},[s,o]=Age(n),r=!!((u=o.entry)!=null&&u.isIntersecting),[a,i]=l.useState(r);return t&&r&&!a&&i(!0),[s,{...o,isVisible:t?a:r}]}var Mge=kge,Nge=100;function Rge({loading:e,hasNextPage:t,onLoadMore:n,rootMargin:s,disabled:o,delayInMs:r=Nge}){const a=l.useRef(n),[i,{rootRef:u,isVisible:d}]=Mge({rootMargin:s});l.useEffect(()=>{a.current=n},[n]);const m=!o&&!e&&d&&t;return l.useEffect(()=>{if(m){const f=setTimeout(()=>{a.current()},r);return()=>{clearTimeout(f)}}},[m,r]),[i,{rootRef:u}]}var Q3=Rge;const J3="mt-1 rounded-2xl border border-black/5 bg-white/25 p-4 dark:border-white/5 dark:bg-black/25",fM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M10 5H14C14 3.89543 13.1046 3 12 3C10.8954 3 10 3.89543 10 5ZM8.5 5C8.5 3.067 10.067 1.5 12 1.5C13.933 1.5 15.5 3.067 15.5 5H21.25C21.6642 5 22 5.33579 22 5.75C22 6.16421 21.6642 6.5 21.25 6.5H19.9309L18.7589 18.6112C18.5729 20.5334 16.9575 22 15.0263 22H8.97369C7.04254 22 5.42715 20.5334 5.24113 18.6112L4.06908 6.5H2.75C2.33579 6.5 2 6.16421 2 5.75C2 5.33579 2.33579 5 2.75 5H8.5ZM10.5 9.75C10.5 9.33579 10.1642 9 9.75 9C9.33579 9 9 9.33579 9 9.75V17.25C9 17.6642 9.33579 18 9.75 18C10.1642 18 10.5 17.6642 10.5 17.25V9.75ZM14.25 9C14.6642 9 15 9.33579 15 9.75V17.25C15 17.6642 14.6642 18 14.25 18C13.8358 18 13.5 17.6642 13.5 17.25V9.75C13.5 9.33579 13.8358 9 14.25 9ZM6.73416 18.4667C6.84577 19.62 7.815 20.5 8.97369 20.5H15.0263C16.185 20.5 17.1542 19.62 17.2658 18.4667L18.4239 6.5H5.57608L6.73416 18.4667Z"})),_Ae=Object.freeze(Object.defineProperty({__proto__:null,default:fM},Symbol.toStringTag,{value:"Module"}));function yh(e){const{source:t,pageName:n,customData:s}=e;D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:t,eventInfo_pageName:n,eventInfo_customData:s?JSON.stringify(s):void 0}})}function Pge(e){const{impressionElement:t,entryPoint:n,customData:s}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:t,eventInfo_entryPoint:n,eventInfo_customData:s?JSON.stringify(s):void 0}})}function f8(e){const{scenario:t,source:n,pageName:s,customData:o}=e;D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickScenario:t,eventInfo_clickSource:n,eventInfo_pageName:s,eventInfo_customData:o?JSON.stringify(o):void 0}})}function p8(e){const{scenario:t,errorType:n,errorMessage:s,customData:o}=e;Yt({feature:"memory-management",errorType:n,scenario:t,errorMessage:s,customData:o?JSON.stringify(o):void 0})}function Lge(e){const{onDelete:t,isDeleting:n,ariaLabel:s,setButtonRef:o}=e,{t:r}=Y(),[a,i]=l.useState(!1),u=l.useRef(null),d=mT(u,o);ho({onOutsideEvent:()=>{i(!1),f8({scenario:"deleteSingleMemory",source:"cancel",pageName:"singleDurableFact"})},elements:[u],shouldAttachListeners:a});const m=()=>{a?(t(),i(!1),f8({scenario:"deleteSingleMemory",source:"deleteSingleDurableFact",pageName:"singleDurableFact"})):(i(!0),yh({source:"durableFactDeleteButton",pageName:"memoryManagementPage"}))};return n?c.jsx("div",{className:"flex size-9 items-center justify-center",children:c.jsx(it,{className:"size-5"})}):c.jsx(ge.div,{layout:!0,children:c.jsxs(re,{ref:d,variant:a?"rect":"square",size:"36-sm",color:a?"default":"subtle-dimmed-inverted",title:r(a?"settings.memory.management.confirmDelete":"settings.memory.delete"),"aria-label":s,"aria-expanded":a,onClick:m,children:[c.jsx(ge.div,{layout:"preserve-aspect",children:c.jsx(fM,{className:F("size-4 fill-foreground-800",a&&"fill-system-red-550 dark:fill-system-red-350"),"aria-hidden":!0})}),a&&c.jsx(ge.span,{className:"text-system-red-550 dark:text-system-red-350","aria-hidden":!0,initial:Be,animate:tt,children:r("common.delete")})]})})}function Oge(e){const{fact:t,isLast:n,onDelete:s,isDeleting:o,ariaLabel:r,setButtonRef:a}=e;return c.jsxs(ge.li,{className:"list-none",layout:!0,initial:tt,animate:tt,exit:Be,transition:{duration:ns.default},children:[c.jsxs("div",{className:F("flex items-center gap-1.5 p-2 sm:gap-6",n&&"mb-2"),children:[c.jsx("p",{className:"flex-1 text-foreground-800 text-sm",children:t.text}),c.jsx(Lge,{onDelete:s,isDeleting:o,ariaLabel:r,setButtonRef:a})]}),!n&&c.jsx(ms,{})]})}function Dge(e){const{durableFacts:t,hasNextPage:n,showInitialLoadingState:s,infiniteRef:o,onDeleteFact:r,isDeletingFact:a,hasError:i,setButtonRef:u}=e,{t:d}=Y();return c.jsxs("div",{className:F(J3,"t-custom-scrollbar flex size-full min-h-0 flex-col gap-0 overflow-y-auto",s&&"justify-center"),children:[s&&c.jsx("div",{className:"flex justify-center py-8",children:c.jsx(it,{className:"size-12"})}),c.jsx("ul",{className:"m-0 flex w-full flex-col gap-0",role:"list",children:c.jsx(pt,{children:t.map((m,f)=>c.jsx(Oge,{fact:m,isLast:f===t.length-1,onDelete:()=>r(m.id,f),isDeleting:a(m.id),ariaLabel:d("settings.memory.management.memoryItemLabel",{text:m.text,index:f+1,total:t.length}),setButtonRef:p=>u(f,p)},m.id))})}),n&&!s&&!i&&c.jsx("div",{className:"flex justify-center py-8",ref:o,children:c.jsx(it,{className:"size-12"})})]})}const jge="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/durable-facts-empty-dark-DDJyBbNr.png",Fge="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/durable-facts-empty-light-XQy6HH2o.png";function pM(e){const{closeModal:t=!0}={},{t:n}=Y(),s=se(cC),o=Aa();return async()=>{t&&s(!1),await o(),Cd({prompt:n("settings.memory.management.rememberPrompt")})}}function Uge(e){const{buttonRef:t}=e,{t:n}=Y(),s=M(Wo)==="dark",o=pM(),r=()=>{o(),yh({source:"memoryManagementZeroStateButton",pageName:"memoryManagementPage"})};return c.jsx("div",{className:F(J3,"t-custom-scrollbar flex size-full flex-col items-center justify-around overflow-y-auto"),children:c.jsxs("div",{className:"flex max-w-96 flex-col items-center gap-8",children:[c.jsx("img",{src:s?jge:Fge,alt:"","aria-hidden":"true",loading:"lazy",className:"w-full select-none"}),c.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[c.jsx("h3",{className:"text-center text-foreground-800 text-lg",children:n("settings.memory.management.emptyMemoryStateTitle")}),c.jsx("p",{className:"text-center text-foreground-550 text-sm",children:n("settings.memory.management.emptyMemoryStateSubtitle")})]}),c.jsx(re,{color:"strong",variant:"rect",size:"36-sm",title:n("settings.memory.createAction"),className:"w-fit",onClick:r,ref:t,children:n("settings.memory.createAction")})]})})}function Bge(){const{t:e}=Y();return c.jsxs("div",{className:F(J3,"flex size-full min-h-fit flex-col items-center justify-center gap-8 text-center text-foreground-800"),children:[c.jsx("h3",{className:"max-w-96 text-lg",children:e("common.somethingWrong")}),c.jsx("p",{className:"max-w-96 text-sm",children:e("common.somethingWrongDescription")})]})}const v0="/memory/durable-facts",h8=["memory","durable-facts"];function Vge(e){const{onDeleteSuccess:t,onDeleteError:n}=e??{},s=qp(),[o,r]=l.useState(new Set),a=l.useCallback(async f=>{const{pageParam:p}=f,{url:g,args:C}=p;return await St(g,L$,{query:C}).then(b=>b.data)},[]),i=l.useCallback(f=>f.next?{url:v0,args:{cursor:f.next}}:null,[]),{mutate:u}=Mi({mutationFn:async({factId:f})=>{if(!(await $n(`${v0}/${f}`,{options:{method:"DELETE"}})).ok)throw new Error(`Failed to delete durable fact: ${f}`)},onMutate:({factId:f})=>{r(p=>new Set([...p,f]))},onSuccess:(f,{factId:p,index:g})=>{s.setQueryData(h8,C=>C&&{...C,pages:C.pages.map(v=>({...v,results:v.results.filter(b=>b.id!==p)}))}),t==null||t(g)},onError:(f,{factId:p,index:g})=>{n==null||n(f,p,g)},onSettled:(f,p,{factId:g})=>{r(C=>{const v=new Set(C);return v.delete(g),v})}}),d=l.useCallback(f=>o.has(f),[o]);return{...vm({queryKey:h8,queryFn:a,initialPageParam:{url:v0},getNextPageParam:i,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),deletion:{deleteDurableFact:u,isDeletingFact:d}}}function Hge(){var E;const{t:e}=Y(),t=se(xn),n=l.useRef(!1),{loader:s,deletion:o}=Vge({onDeleteSuccess:x=>{t({title:e("settings.memory.management.deleted"),dismissable:!1,dismissAfter:3e3}),p(x<v.length-1?x:x-1)},onDeleteError:(x,I,_)=>{t({title:e("common.somethingWrong"),subtitle:e("common.somethingWrongDescription"),dismissable:!1,dismissAfter:3e3}),p8({scenario:"deleteDurableFact",errorType:"requestFailure",errorMessage:x.message}),p(_)}}),{deleteDurableFact:r,isDeletingFact:a}=o,[i]=Q3({...s,disabled:!!s.error}),u=pM(),d=l.useRef(!1),m=l.useRef(null),f=l.useRef(new Map),p=x=>{x<0?requestAnimationFrame(()=>{var I;(I=m.current)==null||I.focus()}):requestAnimationFrame(()=>{var I;(I=f.current.get(x))==null||I.focus()})},g=(x,I)=>{f.current.set(x,I)},C=()=>{u(),yh({source:"memoryManagementAddButton",pageName:"memoryManagementPage"})},v=((E=s.data)==null?void 0:E.flatMap(x=>x.results))??[],b=v.length===0&&!s.loading&&!s.error,y=s.loading&&v.length===0;return l.useEffect(()=>{!y&&!d.current&&(Pge({impressionElement:"memoryManagementPage",customData:{state:b?"zeroState":"available"}}),d.current=!0)},[y,b]),l.useEffect(()=>{s.error&&!n.current&&(n.current=!0,t({title:e("common.somethingWrong"),subtitle:e("common.somethingWrongDescription"),dismissable:!1,dismissAfter:3e3}),p8({scenario:`loadDurableFacts${s.hasNextPage?"NextPage":""}`,errorType:"requestFailure",errorMessage:s.error.message}))},[s.hasNextPage,s.error,t,e]),s.error&&!s.loading&&v.length===0?c.jsx(Bge,{}):b?c.jsx(Uge,{buttonRef:m}):c.jsxs(c.Fragment,{children:[c.jsx(Dge,{durableFacts:v,showInitialLoadingState:y,hasNextPage:s.hasNextPage,infiniteRef:i,onDeleteFact:(x,I)=>{r({factId:x,index:I})},isDeletingFact:a,hasError:!!s.error,setButtonRef:g}),c.jsx(re,{variant:"rect",size:"36-sm",title:e("settings.memory.management.add"),className:"mt-3 w-fit shrink-0",onClick:C,children:e("settings.memory.management.add")})]})}function zge(){const[e,t]=Fe(cC),{t:n}=Y(),s=()=>{t(!1),yh({source:"memoryManagementDismissButton",pageName:"memoryManagementPage"})};return c.jsx(fn,{isOpen:e,onClose:s,headerText:n("settings.memory.management.title"),className:"h-[70vh] max-h-[780px] w-[88vw] max-w-[760px] bg-background-200",children:c.jsx(Hge,{})})}const hM=e=>l.createElement("svg",{viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2.21967 4.46967C2.51256 4.17678 2.98744 4.17678 3.28033 4.46967L6 7.18934L8.71967 4.46967C9.01256 4.17678 9.48744 4.17678 9.78033 4.46967C10.0732 4.76256 10.0732 5.23744 9.78033 5.53033L6.53033 8.78033C6.23744 9.07322 5.76256 9.07322 5.46967 8.78033L2.21967 5.53033C1.92678 5.23744 1.92678 4.76256 2.21967 4.46967Z"})),TAe=Object.freeze(Object.defineProperty({__proto__:null,default:hM},Symbol.toStringTag,{value:"Module"})),pu={conversation:"share.shareManagement.conversation",imagePart:"share.shareManagement.imagePart",page:"share.shareManagement.page",podcast:"share.shareManagement.podcast","3dGeneration":"share.shareManagement.3dGeneration",task:"share.shareManagement.task"};function Gge(e){const{category:t,onCategoryChange:n,containerRef:s}=e,{t:o}=Y(),r=H("share-image-gen");return c.jsx("div",{className:"flex min-h-14 w-full flex-row pe-3",children:c.jsx("div",{className:"flex items-center",children:c.jsx(bm,{className:"bg-acrylic-default-tint-light p-2 bg-blend-saturation shadow-md backdrop-blur-[60px] dark:bg-acrylic-default-tint-dark",options:{placement:"bottom-start",hideOnMenuClick:!0,roleType:"menu",rootRef:s,offset:{crossAxis:-8}},renderTrigger:a=>{const{onClick:i,ref:u}=a;return c.jsx(re,{color:"subtle-dimmed-inverted",onClick:i,ref:u,title:o(pu[t]),children:c.jsxs("div",{className:"flex flex-row items-center gap-4.5",children:[c.jsx("div",{className:"truncate text-sm",children:o(pu[t])}),c.jsx(hM,{className:"size-3"})]})})},children:c.jsx("div",{className:"flex flex-col gap-1.5",children:Object.keys(pu).map(a=>a!=="imagePart"||r?c.jsx(re,{alignment:"start",color:"subtle-dimmed-inverted",onClick:()=>n(a),title:o(pu[a]),className:"shrink-0",children:o(pu[a])},a):null)})})})})}const gM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5.5028 4.62704L5.5 6.75V17.2542C5.5 19.0491 6.95507 20.5042 8.75 20.5042L17.3663 20.5045C17.0573 21.3782 16.224 22.0042 15.2444 22.0042H8.75C6.12665 22.0042 4 19.8776 4 17.2542V6.75C4 5.76929 4.62745 4.93512 5.5028 4.62704ZM17.75 2C18.9926 2 20 3.00736 20 4.25V17.25C20 18.4926 18.9926 19.5 17.75 19.5H8.75C7.50736 19.5 6.5 18.4926 6.5 17.25V4.25C6.5 3.00736 7.50736 2 8.75 2H17.75Z"})),AAe=Object.freeze(Object.defineProperty({__proto__:null,default:gM},Symbol.toStringTag,{value:"Module"})),X3=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M5.5028 4.62704L5.5 6.75V17.2542C5.5 19.0491 6.95507 20.5042 8.75 20.5042L17.3663 20.5045C17.0573 21.3782 16.224 22.0042 15.2444 22.0042H8.75C6.12665 22.0042 4 19.8776 4 17.2542V6.75C4 5.76929 4.62745 4.93512 5.5028 4.62704ZM17.75 2C18.9926 2 20 3.00736 20 4.25V17.25C20 18.4926 18.9926 19.5 17.75 19.5H8.75C7.50736 19.5 6.5 18.4926 6.5 17.25V4.25C6.5 3.00736 7.50736 2 8.75 2H17.75ZM17.75 3.5H8.75C8.33579 3.5 8 3.83579 8 4.25V17.25C8 17.6642 8.33579 18 8.75 18H17.75C18.1642 18 18.5 17.6642 18.5 17.25V4.25C18.5 3.83579 18.1642 3.5 17.75 3.5Z"})),kAe=Object.freeze(Object.defineProperty({__proto__:null,default:X3},Symbol.toStringTag,{value:"Module"}));function vM(){const e=pe(Rn);return E3(Pt.resolvedLanguage,e)}function CM(){const{i18n:e}=Y(),t=M(Rn);return E3(e.resolvedLanguage,t)}const Wge={year:"numeric",month:"long",day:"numeric"};function $ge(e){const{item:t,isSmallScreen:n,onRevokeItem:s}=e,{sharedAt:o}=t,r="shareLink"in t?t.shareLink:t.url,a="title"in t&&t.title?t.title:"",i="thumbnailUrl"in t?t.thumbnailUrl:void 0,{t:u}=Y(),[d,m]=l.useState(!1),f=l.useRef(null),[p,g]=l.useState(!1),C=CM(),v=a===""?r:a,b=async()=>{try{await navigator.clipboard.writeText(r),g(!0),setTimeout(()=>g(!1),vS)}catch(E){xme({details:"Error copying shared conversation url.",errorMessage:E instanceof Error?E.message:""})}};ho({onOutsideEvent:()=>m(!1),elements:[f],includeScroll:!0,invokeOnce:!0});const y=async()=>{d?(bme(t.shareId),await s(t),m(!1)):m(!0)};return c.jsxs("div",{className:"flex h-10 w-full flex-row items-center",children:[i&&c.jsx(ju,{src:i,alt:u("share.shareManagement.thumbnailAlt"),className:"me-3 size-10 min-h-10 min-w-10 rounded-xl object-cover object-center backdrop-blur",draggable:"false",loading:"lazy"}),c.jsx("div",{className:"w-full truncate pe-6",children:c.jsx(ls,{href:r,title:v,className:"text-foreground-800 underline sm:text-foreground-900 sm:text-sm",children:v})}),!n&&c.jsx("div",{className:"shrink-0 whitespace-nowrap text-foreground-550 text-xs",children:new Date(o).toLocaleDateString(C,Wge)}),c.jsxs("div",{className:"flex min-w-[104px] shrink-0 flex-row justify-end",children:[!d&&c.jsx(re,{size:"32-xs",color:"subtle-dimmed-inverted",onClick:b,title:u("share.copy"),children:p?c.jsx(gM,{className:"absolute size-6 sm:size-5"}):c.jsx(X3,{className:"absolute size-6 sm:size-5"})}),c.jsx(re,{size:"32-xs",color:d?"default":"subtle-dimmed-inverted",onClick:y,title:u(d?"share.shareManagement.confirmRevoke":"share.shareManagement.revoke"),ref:f,children:c.jsxs("div",{className:F("flex flex-row",!d&&"absolute"),children:[c.jsx(nn,{className:F("size-6 sm:size-5",d&&"text-system-red-450")}),d&&c.jsx("div",{className:"px-1 text-system-red-450 sm:text-sm",children:u("share.shareManagement.revokeButton")})]})})]})]})}function qge(e){const{items:t,onRevokeItem:n,loading:s}=e,{t:o}=Y(),r=bt({breakpoint:"sm"}),a=t.length>0;return s?c.jsx("div",{className:"flex size-full items-center justify-center",children:c.jsx(it,{className:"size-10"})}):a?c.jsx("div",{className:"w-full sm:px-3 sm:pt-2",children:c.jsx(pt,{initial:!1,children:t.map(i=>c.jsx(ge.div,{animate:tt,exit:Be,children:c.jsx($ge,{item:i,isSmallScreen:r,onRevokeItem:n},i.shareId)},i.shareId))})}):c.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-6 px-2 pb-6 pt-0.5 text-center text-foreground-550 sm:px-7 sm:py-0",children:[c.jsx("h3",{className:"text-xl-medium",children:o("share.shareManagement.emptySharedLinksTitle")}),c.jsx("p",{className:"text-base",children:o("share.shareManagement.emptySharedLinksSubtitle")})]})}const Zge=ke(["3dGeneration","podcast","pages","task"]),MAe=S({id:h(),url:h()});S({type:Zge,id:h().min(1)});const yM=S({shareId:h(),url:At(),title:h(),sharedAt:h()}),Kge=S({cursor:h().optional()});S({results:L(yM),next:h().nullable()});const Tm=ke(["page","podcast","3dGeneration","imagePart","task"]),Am=S({shareId:h(),shareLink:At(),sharedAt:h()}),Yge=Am.extend({type:w(Tm.enum.page),title:h().nullable()}),Qge=Am.extend({type:w(Tm.enum.podcast),title:h().nullable()}),Jge=Am.extend({type:w(Tm.enum["3dGeneration"])}),Xge=Am.extend({type:w(Tm.enum.imagePart),thumbnailUrl:At(),prompt:h()}),e0e=Am.extend({type:w(Tm.enum.task),title:h().nullable()}),t0e=Ne([Yge,Qge,Jge,Xge,e0e,yM]);Kge.extend({types:h().optional()});const n0e=S({results:L(t0e),next:h().nullable()});S({conversationTitle:h()});const s0e="/conversations/shares",o0e="/sharing",r0e="sharedLinks";function a0e({type:e}){const t=e==="conversation",n=t?s0e:o0e,s=[r0e,e],o=l.useCallback(async u=>{const{pageParam:d}=u,{url:m,args:f}=d;return await St(m,n0e,{query:f,analytics:{anonymousPath:n},parseOptions:{safe:!0}}).then(g=>g.data)},[n]),r=l.useCallback(u=>u.next?{url:n,args:t?{cursor:u.next}:{cursor:u.next,types:e}}:null,[t,n,e]),a=vm({queryKey:s,queryFn:o,initialPageParam:{url:n,args:t?void 0:{types:e}},getNextPageParam:r,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),i=i0e({path:n,queryKey:s});return{...a,deleteSharedLink:i}}function i0e({path:e,queryKey:t}){const n=qp();return Mi({mutationFn:async o=>{await $n(`${e}/${o}`,{options:{method:"DELETE"},analytics:{anonymousPath:`${e}/*`}})},onMutate:async o=>{await n.cancelQueries({queryKey:t}),n.setQueryData(t,r=>r&&{...r,pages:r.pages.map(a=>({...a,results:a.results.filter(i=>i.shareId!==o)}))})}}).mutateAsync}function c0e(e){var m;const{showCategoryHeader:t,containerRef:n}=e,[s,o]=l.useState("conversation"),{loader:r,deleteSharedLink:a}=a0e({type:s}),[i]=Q3({...r,disabled:!!r.error}),u=((m=r.data)==null?void 0:m.flatMap(f=>f.results))??[],d=async f=>{await a(f.shareId)};return c.jsxs("div",{className:"flex size-full flex-col overflow-y-auto sm:p-2",children:[t&&c.jsxs("div",{children:[c.jsx(Gge,{category:s,onCategoryChange:f=>{o(f)},containerRef:n}),c.jsx(ms,{color:"accent",horizontalMargin:!1,className:"mx-2"})]}),c.jsxs("div",{className:"t-custom-scrollbar flex size-full flex-col overflow-y-auto",children:[c.jsx(qge,{items:u,onRevokeItem:d,loading:r.loading&&u.length===0}),r.hasNextPage&&c.jsx("div",{ref:i})]})]})}const l0e=N(!1);function u0e(){const{t:e}=Y(),[t,n]=Fe(l0e),s=bt({breakpoint:"sm"}),o=H("artifact-sharemanagement"),r=o?"h-[584px]":"h-[512px]",a=l.useRef(null),i=()=>{n(!1)};return c.jsxs(fn,{isOpen:t,headerText:e("share.shareManagement.sharedLinksTitle"),className:F(r,"w-[640px]"),bottomSheetOnSmall:!0,bottomSheetClassName:"w-full rounded-t-4xl rounded-b-6xl",onClose:i,children:[c.jsx("div",{className:"size-full overflow-y-auto",ref:a,children:c.jsx(c0e,{showCategoryHeader:o,containerRef:a})}),!s&&c.jsx("div",{className:"mt-2 flex h-14 flex-col items-center pe-3.5 ps-3.5",children:c.jsx(re,{color:"subtle-dimmed-inverted",title:e("common.cancel"),onClick:i,className:"size-full text-base",children:e("common.cancel")})})]})}function d0e(){const e=H("share-to-social-media-v1"),t=H("social-media-with-copy");return e||t}function NAe(){return H("social-media-with-copy")}const g8={translateY:"100%"},m0e={translateY:0};function f0e(e){const{children:t,id:n,onClose:s,className:o}=e,r=l.useRef(null);hs(i=>{const{current:u}=r;!u||!u.contains(document.activeElement)||i.key==="Escape"&&s()});const{modalAttributes:a}=U1({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});return c.jsxs(c.Fragment,{children:[c.jsx(ge.div,{initial:Be,animate:tt,exit:Be,transition:U2,className:"fixed inset-0 bg-black/50",...a}),c.jsx(ge.div,{id:n,initial:g8,animate:m0e,exit:g8,transition:U2,className:de("absolute bottom-0 max-h-expanded-section w-full overflow-y-hidden rounded-4xl",lt.modal,o),ref:r,children:c.jsx("div",{className:"flex h-full flex-col items-start gap-4 overflow-y-auto bg-background-100 p-6",children:t})})]})}function p0e(e){var u;const{children:t,id:n,onClose:s,className:o}=e,r=Ps(),a=(u=ae.instance().config().uiOverrides)==null?void 0:u.disableConversationsModalWrapper,{modalAttributes:i}=U1({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});return r||a?c.jsx("div",{className:"flex max-w-96 flex-col items-start gap-4 p-2",...i,children:t}):c.jsx(f0e,{id:n,onClose:s,className:o,children:t})}function h0e(){const[e,t]=l.useState(!1),n=gl(xt),s=Aa(),o=l.useCallback(async r=>{if(!r)return;const a=rte(r);$t({source:"deleteConversation",conversationId:r,scenario:a?"actions":void 0}),t(!0),a?await $n(`/tasks/${a}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/tasks/*"}}):await $n(`/conversations/${r}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/conversations/*"}}),pe(De)===r&&await s(),t(!1),n(i=>{i.delete(r)})},[n,s]);return{loading:e,deleteConversation:o}}function g0e(e){var v;const{conversationId:t,onClose:n}=e,s=l.useId(),{t:o}=Y(),[r,a]=l.useState(!1),i=l.useRef(null),{loading:u,deleteConversation:d}=h0e();l.useEffect(()=>{requestAnimationFrame(()=>{var b;(b=i.current)==null||b.focus()})},[]);const m=()=>{r&&Mn(NU,"true"),n()},f=async()=>{await d(t),m(),We.emit("composer:focus-input")},p=Ps(),C=!((v=ae.instance().config().uiOverrides)==null?void 0:v.disableDeleteConfirmationCheckbox)&&!p;return c.jsxs(p0e,{id:s,onClose:n,className:"h-96",children:[c.jsx("h2",{className:"text-xl",children:o("composer.deleteConversation.header")}),c.jsx("p",{children:o("composer.deleteConversation.description")}),C&&c.jsx(w3,{disabled:u,checked:r,label:o("composer.deleteConversation.dontRemindMeCheck"),setChecked:a,className:"flex-1"}),c.jsx(re,{ref:i,title:o("common.delete"),color:"default",size:"56-xl",variant:"rect",className:"mt-auto w-full text-system-red-550 dark:text-system-red-350",disabled:u,onClick:f,children:u?c.jsx(it,{className:"size-8"}):o("common.delete")}),c.jsx(re,{title:o("common.keep"),color:"strong",size:"56-xl",variant:"rect",className:"w-full",disabled:u,onClick:m,children:o("common.keep")})]})}const bM=N(void 0),xM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M14.7227 16.2211C14.43 16.5142 14.4303 16.9891 14.7234 17.2818C15.0165 17.5745 15.4914 17.5742 15.7841 17.2811L20.7807 12.2776C21.0732 11.9847 21.0731 11.5101 20.7804 11.2174L15.7838 6.21972C15.4909 5.9268 15.016 5.92675 14.7231 6.21962C14.4302 6.51248 14.4301 6.98735 14.723 7.28028L18.443 11H10.6012C9.00642 11 7.79015 11.242 6.71218 11.7645L6.46576 11.89C5.35728 12.4829 4.48286 13.3573 3.89004 14.4658C3.28062 15.6053 3 16.8837 3 18.6012C3 19.0154 3.33579 19.3512 3.75 19.3512C4.16421 19.3512 4.5 19.0154 4.5 18.6012C4.5 17.1174 4.72765 16.0802 5.21276 15.1732C5.66578 14.3261 6.32609 13.6658 7.17316 13.2128C8.01046 12.765 8.95858 12.5365 10.2666 12.5041L10.6012 12.5H18.438L14.7227 16.2211Z"})),RAe=Object.freeze(Object.defineProperty({__proto__:null,default:xM},Symbol.toStringTag,{value:"Module"})),SM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12.5303 2.21967C12.2374 1.92678 11.7626 1.92678 11.4697 2.21967L6.21967 7.46967C5.92678 7.76256 5.92678 8.23744 6.21967 8.53033C6.51256 8.82322 6.98744 8.82322 7.28033 8.53033L11.25 4.56066V15.25C11.25 15.6642 11.5858 16 12 16C12.4142 16 12.75 15.6642 12.75 15.25V4.56066L16.7197 8.53033C17.0126 8.82322 17.4874 8.82322 17.7803 8.53033C18.0732 8.23744 18.0732 7.76256 17.7803 7.46967L12.5303 2.21967ZM3.75 11C4.16421 11 4.5 11.3358 4.5 11.75V17.75C4.5 18.7165 5.2835 19.5 6.25 19.5H17.75C18.7165 19.5 19.5 18.7165 19.5 17.75V11.75C19.5 11.3358 19.8358 11 20.25 11C20.6642 11 21 11.3358 21 11.75V17.75C21 19.5449 19.5449 21 17.75 21H6.25C4.45507 21 3 19.5449 3 17.75V11.75C3 11.3358 3.33579 11 3.75 11Z"})),PAe=Object.freeze(Object.defineProperty({__proto__:null,default:SM},Symbol.toStringTag,{value:"Module"}));function v0e(e){const t=M(Jt),n=M(xt),s=e?n.get(e):void 0,o=!!(s!=null&&s.group),r=l.useMemo(()=>{var f;if(!((f=s==null?void 0:s.group)!=null&&f.participants)||!t)return[];const{owner:i,participants:u}=s.group;return(i?u.filter(p=>p.userId!==i.userId):u).concat(i?[i]:[]).map(({userId:p,userDisplayName:g})=>({userId:p,userDisplayName:g??p,isYou:p===t.id,isOwner:(i==null?void 0:i.userId)===p})).sort((p,g)=>Number(g.isYou)-Number(p.isYou))},[s,t]),a=l.useMemo(()=>r.find(i=>i.isYou&&i.isOwner)!==void 0,[r]);return{members:r,isGroupOwner:a,isGroupConversation:o}}function C0e(e){const{conversationId:t,onShare:n,onInvite:s,onRemove:o,isCreating:r,inviteLink:a}=e,{t:i}=Y(),{isGroupConversation:u,isGroupOwner:d}=v0e(t),m=(f,p)=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),p.stopPropagation(),f==="invite"?s():n())};return c.jsxs("div",{className:"flex flex-col justify-center gap-3",role:"region","aria-label":i("share.invite.title"),children:[c.jsxs("div",{className:"flex w-full cursor-pointer flex-row items-center justify-start gap-3 rounded-2xl bg-background-800 px-2 py-2.5 text-foreground-200 shadow-sm hover:bg-background-700 focus:bg-background-700 focus:outline-none focus:ring-2 focus:ring-foreground-600 dark:bg-background-800",role:"button",tabIndex:0,"aria-label":i("share.invite.subtitle"),"aria-expanded":"false",onClick:s,onKeyDown:f=>m("invite",f),children:[c.jsx("div",{className:"ms-3 flex size-10 items-center justify-center rounded-xl bg-foreground-100 fill-foreground-250 dark:bg-muted-550","aria-hidden":"true",tabIndex:-1,title:i("share.invite.subtitle"),children:c.jsx(SM,{className:"size-6 text-foreground-800","aria-hidden":"true"})}),c.jsx("div",{className:"m-auto ms-0 flex flex-col truncate text-start text-base",children:c.jsx("span",{className:"truncate",children:i(r?"common.loading":"share.invite.subtitle")})}),c.jsx(ds,{className:"me-2 size-5 transition-transform","aria-hidden":"true"})]}),a?c.jsxs("div",{className:"flex w-full flex-row items-center justify-center gap-1",children:[c.jsx("span",{className:"text-foreground-550 text-sm dark:text-foreground-800",children:i("share.invite.permission")}),d&&c.jsx("button",{type:"button",className:"text-foreground-550 underline text-sm hover:text-foreground-800 focus:outline-none focus:ring-2 focus:ring-foreground-600 dark:text-foreground-800 dark:hover:text-foreground-600",onClick:o,title:i("share.invite.remove"),children:i("share.invite.remove")})]}):c.jsx("div",{className:"px-3 text-center text-foreground-550 text-sm dark:text-foreground-800",children:i("share.invite.inviteLinkDescription")}),c.jsx(ms,{}),(!u||d)&&c.jsxs("div",{className:"flex w-full cursor-pointer flex-row items-center justify-start gap-3 rounded-2xl px-2 py-2.5 hover:bg-background-200 focus:bg-background-200 focus:outline-none focus:ring-2 focus:ring-foreground-600 dark:hover:bg-muted-400 dark:focus:bg-muted-400",role:"button",tabIndex:0,"aria-label":i("share.invite.subtitle"),"aria-expanded":"false",onClick:n,onKeyDown:f=>m("share",f),children:[c.jsx("div",{className:"ms-3 flex size-10 items-center justify-center rounded-xl bg-foreground-100 fill-foreground-250 shadow-sm dark:bg-muted-550","aria-hidden":"true",tabIndex:-1,title:i("share.invite.subtitle"),children:c.jsx(xM,{className:"size-6 text-foreground-800","aria-hidden":"true"})}),c.jsx("div",{className:"m-auto ms-0 flex flex-col truncate text-start text-base",children:c.jsx("span",{className:"truncate",children:i("share.invite.copy")})}),c.jsx(ds,{className:"me-2 size-5 transition-transform","aria-hidden":"true"})]}),c.jsx("p",{className:"px-3 text-foreground-550 text-xs dark:text-foreground-800",role:"note",children:i("share.invite.disclaimer")})]})}function y0e(e){const{conversationId:t,inviteLink:n,isCreating:s,onShare:o,onInvite:r,onRemove:a}=e;return c.jsx(C0e,{conversationId:t,inviteLink:n,isCreating:s,onShare:o,onInvite:r,onRemove:a})}function b0e(e){const{successMessage:t,errorMessage:n,analyticsDetails:s="Clipboard copy failed",announcePoliteness:o="polite",enableToast:r=!0,enableAnnounce:a=!0,trackError:i=!0,trackCopyClick:u}=e,d=se(xn),[m,f]=l.useState(!1);return{copy:l.useCallback(async g=>{if(!g)return!1;f(!0);try{return u==null||u(),await navigator.clipboard.writeText(g),a&&fr({msg:t,type:o}),r&&d({title:t,dismissAfter:3e3}),!0}catch(C){return i&&D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:s,eventInfo_errorMessage:C instanceof Error?C.message:""}}),r&&d({title:n,dismissAfter:3e3,intent:"error"}),!1}finally{f(!1)}},[t,n,s,o,r,a,i,d,u]),isCopying:m}}async function x0e(e){return(await St(e,v$,{options:{method:"POST"},parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/*/join-link"}})).data}function S0e(e){const t=Mi({mutationKey:["createInviteLink",e],mutationFn:async()=>{const s=`/conversations/${e}/join-link`;return x0e(s)},onSuccess:()=>{x_(e)}}),n=async()=>{try{return{success:!0,url:(await t.mutateAsync()).url}}catch{return{success:!1}}};return{isCreating:t.isPending,error:t.error,create:n}}async function E0e(e){const t=`/conversations/${e}/join-link`;try{return(await $n(t,{options:{method:"DELETE"},analytics:{anonymousPath:"/conversations/*/join-link"}})).ok}catch{return!1}}function w0e(e){const t=Mi({mutationKey:["deleteInviteLink",e],mutationFn:()=>E0e(e)}),n=async()=>{try{return await t.mutateAsync()}catch{return!1}};return{isDeleting:t.isPending,error:t.error,remove:n}}async function I0e(e){return(await St(e,C$,{options:{method:"GET"},parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/*/join-link"}})).data}function _0e({conversationId:e,enabled:t=!1}){const{data:n,error:s,refetch:o,isPending:r}=Rs({queryKey:["getInviteLink",e],queryFn:async()=>I0e(`/conversations/${e}/join-link`),enabled:t});return{isPending:r,error:s,link:(n==null?void 0:n.url)??void 0,getLink:o}}function T0e(){return H("allowanonymoususershare")}function ey({conversationId:e,messageId:t,scenario:n,trackShareClick:s=()=>{}}){const o=M(De),r=e??o,a=T0e(),i=se(bM),u=l.useRef(null),d=l.useCallback(()=>{if(!r){vme({conversationId:"",messageId:t,errorName:"conversationNotFound",errorMessage:"Conversation ID is missing"});return}i({conversationId:r,action:"share",messageId:t,scenario:n,onClose:()=>{setTimeout(()=>{var p;(p=u.current)==null||p.focus()},0)}}),s()},[r,t,n,i,s]),m=XA({callback:d,onShowSignIn:s,signInScenario:"loggedOutSharing",signInReason:"shareMessage"});return{shareClickHandler:l.useMemo(()=>a?d:m,[a,d,m]),shareRef:u}}function A0e(e){const{conversationId:t,close:n}=e,{t:s}=Y(),{isCreating:o,create:r}=S0e(t),{link:a,getLink:i}=_0e({conversationId:t,enabled:!0}),{remove:u}=w0e(t),d=se(xn),{shareClickHandler:m}=ey({scenario:"chatPage",trackShareClick:()=>Ce({scenario:"inviteModal",source:"copy"})}),{copy:f}=b0e({successMessage:s("share.copied"),errorMessage:s("share.copiedFailed"),analyticsDetails:"Error copying group chat invite link."}),p=()=>{m(),Ce({scenario:"inviteModal",source:"copy"})},g=async()=>{if(Ce({scenario:"inviteModal",source:"inviteByLink"}),a){f(a);return}const{success:v,url:b}=await r();v&&b?(await i(),f(b)):d({title:s("share.invite.createFail"),dismissAfter:3e3}),Ce({scenario:"inviteModal",source:"create"})},C=async()=>{await u()?await i():d({title:s("share.invite.removeFail"),dismissAfter:3e3}),Ce({scenario:"inviteModal",source:"remove"})};return c.jsx(fn,{isOpen:!0,onClose:n,headerText:s("share.invite.title"),headerTextClassName:"m-auto",className:"w-full max-w-[516px]",children:c.jsx(y0e,{conversationId:t,inviteLink:a,isCreating:o,onShare:p,onInvite:g,onRemove:C})})}const EM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M9.25 7C9.66421 7 10 7.33579 10 7.75C10 8.12656 9.72249 8.4383 9.36083 8.49187L9.25 8.5H7C5.067 8.5 3.5 10.067 3.5 12C3.5 13.864 4.95707 15.3876 6.79435 15.4941L7 15.5H9.25C9.66421 15.5 10 15.8358 10 16.25C10 16.6266 9.72249 16.9383 9.36083 16.9919L9.25 17H7C4.23858 17 2 14.7614 2 12C2 9.32226 4.10496 7.13615 6.75045 7.00612L7 7H9.25ZM17 7C19.7614 7 22 9.23858 22 12C22 14.6777 19.895 16.8638 17.2495 16.9939L17 17H14.75C14.3358 17 14 16.6642 14 16.25C14 15.8734 14.2775 15.5617 14.6392 15.5081L14.75 15.5H17C18.933 15.5 20.5 13.933 20.5 12C20.5 10.136 19.0429 8.6124 17.2057 8.50594L17 8.5H14.75C14.3358 8.5 14 8.16421 14 7.75C14 7.37344 14.2775 7.0617 14.6392 7.00813L14.75 7H17ZM7 11.25H17C17.4142 11.25 17.75 11.5858 17.75 12C17.75 12.3797 17.4678 12.6935 17.1018 12.7432L17 12.75H7C6.58579 12.75 6.25 12.4142 6.25 12C6.25 11.6203 6.53215 11.3065 6.89823 11.2568L7 11.25H17H7Z"})),LAe=Object.freeze(Object.defineProperty({__proto__:null,default:EM},Symbol.toStringTag,{value:"Module"}));async function Op(e){const{url:t,scenario:n="conversation"}=e;try{return await navigator.clipboard.writeText(t),!0}catch(s){return D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:`Error copying shared ${n} url.`,eventInfo_errorMessage:s instanceof Error?s.message:""}}),!1}}function k0e({url:e,disableAutoCopy:t=!1,buttonColor:n="strong",onCopyClick:s}){const{t:o}=Y(),r=o("share.copied"),a=o("share.copy"),i=o("share.copying"),[u,d]=l.useState(""),[m,f]=l.useState(!1),p=l.useRef(null),g=l.useRef(null),C=l.useCallback(()=>{p.current=window.setTimeout(()=>{d(a)},vS)},[a]),v=l.useCallback(()=>{p.current&&clearTimeout(p.current)},[]);l.useEffect(()=>t?(d(a),v):(f(!0),d(i),p.current=window.setTimeout(()=>{Op({url:e}).then(y=>{var E;f(!1),d(y?r:a),(E=g.current)==null||E.focus(),s==null||s(),y&&C()})},xB),v),[C,v,e,r,a,i,t,s]);const b=async()=>{await Op({url:e}),d(r),v(),C(),s==null||s()};return c.jsx(re,{ref:g,title:u,color:n,size:"56-xl",className:"w-full",onClick:b,disabled:m,"aria-live":"polite","aria-label":u,children:m?c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(it,{type:"spinnerThemed",className:"size-6"}),u]}):u})}function OAe({url:e,urlGenerator:t,className:n,disabled:s,isLoading:o=!1,onClick:r,buttonRef:a}){const{t:i}=Y(),u=se(xn),[d,m]=l.useState(!1),f=i("chat.copy"),p=l.useCallback(async()=>{if(!e&&!t){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:"No URL or URL generator provided for copy button.",eventInfo_errorMessage:"Missing url and onGenerateShareUrl props"}});return}try{m(!0);const C=e??await t(),v=await Op({url:C});r(C),u(v?{title:i("podcasts.shareToastMessage"),dismissable:!1,dismissAfter:6e3}:{title:i("share.unhandledErrorTitle"),dismissable:!1,dismissAfter:6e3})}catch(C){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:"Error copying shared url from social media copy button.",eventInfo_errorMessage:C instanceof Error?C.message:""}}),u({title:i("share.unhandledErrorTitle"),dismissable:!1,dismissAfter:6e3})}finally{m(!1)}},[e,t,r,i,u]),g=c.jsx("div",{className:"size-8 p-0.5",children:o&&d?c.jsx(it,{className:"size-8"}):c.jsx(EM,{})});return c.jsxs(re,{ref:a,size:"56-xl",color:"subtle-dimmed-inverted",title:f,className:F("flex flex-1 flex-col gap-1 py-2",n),onClick:p,"aria-label":f,disabled:s,children:[g,c.jsx("span",{className:"font-medium text-foreground-650 text-2xs",children:f})]})}function M0e(e){const{onClose:t,shareUrl:n,imagePath:s,title:o}=e,[r,a]=l.useState(!0),{t:i}=Y(),u=()=>{t(!1)};return c.jsxs(fn,{isOpen:!0,onClose:u,headerText:i("podcasts.share"),className:"w-full max-w-[640px]",children:[c.jsxs("div",{className:"mt-3 flex flex-col gap-6",children:[c.jsxs("div",{className:"mx-2 flex flex-col items-center gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(u_,{alt:"",path:s,onLoad:()=>a(!1),className:"rounded-2xl"}),c.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-podcast-share-modal-light dark:bg-gradient-podcast-share-modal-dark"}),!r&&c.jsx("h1",{className:"absolute bottom-8 mx-8 inline text-foreground-800 text-2xl",role:"presentation",children:o})]}),r&&c.jsx("div",{className:"flex h-[328px] items-center justify-center",children:c.jsx(it,{type:"spinnerThemed",className:"size-6"})})]}),c.jsx("div",{className:"py-4",children:c.jsx(k0e,{url:n,disableAutoCopy:!0})})]}),c.jsx("div",{className:"m-auto mb-3 max-w-[484px] text-center text-foreground-600 text-xs",children:i("podcasts.sharePodcastsDisclaimer")})]})}const N0e=l.lazy(()=>V(()=>import("./sender-share-conversation-modal-B_GKVcoU.js"),__vite__mapDeps([361,1,336,337,362])).then(e=>({default:e.ShareConversationModal})));function R0e(){const[e,t]=Fe(bM),{t:n}=Y(),s=d0e(),o=H("share-image-continue"),r=l.useMemo(()=>e?document.activeElement:null,[e]),a=()=>{var i;r instanceof HTMLElement&&setTimeout(()=>{r.focus()},0),t(void 0),(e==null?void 0:e.action)==="share"&&((i=e.onClose)==null||i.call(e))};switch(e==null?void 0:e.action){case"delete":return c.jsx(Ho,{isOpen:!0,className:"w-3/4 max-w-fit",trapFocus:!0,disableCloseOutside:!0,children:c.jsx(g0e,{onClose:a,conversationId:e.conversationId})});case"share":{let i;return s||o?i=n("common.share"):e.messageId?i=n("share.shareModalHeaderOneTurn"):i=n("share.shareModalHeader"),c.jsx(Ho,{trapFocus:!0,isOpen:!!e.conversationId,disableCloseOutside:!0,onClose:a,headerText:i,headerTextClassName:F("text-xl",s&&"text-2xl"),className:F("relative max-h-full w-3/4 max-w-[640px] gap-3 overflow-y-auto",s&&"gap-4 p-8"),children:c.jsx(l.Suspense,{fallback:c.jsx(re,{color:"strong",size:"56-xl",className:"w-full",title:n("common.loading"),disabled:!0,children:c.jsx(it,{className:"size-8"})}),children:c.jsx(N0e,{conversationId:e.conversationId,scenario:e.scenario,messageId:e.messageId})})})}case"share-podcast":return c.jsx(M0e,{onClose:a,shareUrl:e.shareUrl,imagePath:e.imagePath,title:e.title});case"share-invite":return c.jsx(A0e,{close:a,conversationId:e.conversationId});default:return null}}const P0e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/turn-limit-dark-CEuF11Ih.jpg",L0e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/turn-limit-light-BSlP2HSn.jpg";function O0e(){const[e,t]=Fe(S1),{dismiss:n,source:s,beforeContinue:o}=e,{t:r}=Y(),{login:a}=Xi(),i=r("common.notNow"),u=r("signInPrompt.continueWithMicrosoft"),d=M(Wo),m=ut();l.useEffect(()=>{cn({page:m,scenario:`UpsellProForAuth0AccountFrom${s}`})},[m,s]);const f=()=>{Ce({source:`UpsellProForAuth0AccountFrom${s}`,scenario:"ProUpsellForAuth0AccountLinkWithMSA",destination:"MicrosoftLoginPage"}),o==null||o(),sessionStorage.setItem(T2,`${new Date().getTime().toString()}-link`),a({provider:"microsoft"})},p=async()=>{Ce({source:`UpsellProForAuth0AccountFrom${s}`,scenario:"dismissProUpsellForAuth0Account",destination:m}),await(n==null?void 0:n()),t(null)};return c.jsx(fn,{isOpen:!0,className:"max-w-md gap-0 py-6",children:c.jsxs("div",{className:"flex flex-col items-center p-2 text-center",children:[c.jsx("img",{src:d==="dark"?P0e:L0e,alt:r("images.birds"),className:"h-52 w-full rounded-3xl object-cover"}),c.jsx("h1",{className:"pb-5 pt-8 text-center text-2xl",children:r("logIn.m365UpsellHeader")}),c.jsx("p",{className:"max-w-[95%] break-words pb-8 text-left",children:r("logIn.m365UpsellDescription")}),c.jsxs(re,{onClick:f,title:u,variant:"pill",size:"56-xl",className:"w-full",color:"strong",testId:"prompt-sign-in-msft-composer-action",children:[c.jsx(b3,{className:"size-6"}),u]}),c.jsx(re,{onClick:p,title:i,variant:"pill",size:"56-xl",color:"overlay-bright",className:"mt-3 w-full",testId:"not-now-button-composer-action",children:i})]})})}function D0e(){const e=H("ceo-thinkdeeper"),t=H("ceo-smart-mode"),n=H("ceo"),s=H("webretrieval"),o=H("webcontent"),r=H("browser-actions");return e||t||n||s||o||r}function j0e(){const e=H("memory-management-v2"),t=an(),n=M(A1),s=M(mC);return e&&t&&!n&&!s}function F0e(){const e=H("sharemanagement"),t=an();return e&&t}const wM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M3 5.75C3 4.23122 4.23122 3 5.75 3H15.7145C16.5764 3 17.4031 3.34241 18.0126 3.9519L20.0481 5.98744C20.6576 6.59693 21 7.42358 21 8.28553V18.25C21 19.7688 19.7688 21 18.25 21H5.75C4.23122 21 3 19.7688 3 18.25V5.75ZM5.75 4.5C5.05964 4.5 4.5 5.05964 4.5 5.75V18.25C4.5 18.9404 5.05964 19.5 5.75 19.5H6V14.25C6 13.0074 7.00736 12 8.25 12H15.75C16.9926 12 18 13.0074 18 14.25V19.5H18.25C18.9404 19.5 19.5 18.9404 19.5 18.25V8.28553C19.5 7.8214 19.3156 7.37629 18.9874 7.0481L16.9519 5.01256C16.6918 4.75246 16.3582 4.58269 16 4.52344V7.25C16 8.49264 14.9926 9.5 13.75 9.5H9.25C8.00736 9.5 7 8.49264 7 7.25V4.5H5.75ZM16.5 19.5V14.25C16.5 13.8358 16.1642 13.5 15.75 13.5H8.25C7.83579 13.5 7.5 13.8358 7.5 14.25V19.5H16.5ZM8.5 4.5V7.25C8.5 7.66421 8.83579 8 9.25 8H13.75C14.1642 8 14.5 7.66421 14.5 7.25V4.5H8.5Z"})),DAe=Object.freeze(Object.defineProperty({__proto__:null,default:wM},Symbol.toStringTag,{value:"Module"})),IM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM8 9.5C8 8.67157 8.67157 8 9.5 8H14.5C15.3284 8 16 8.67157 16 9.5V14.5C16 15.3284 15.3284 16 14.5 16H9.5C8.67157 16 8 15.3284 8 14.5V9.5Z"})),jAe=Object.freeze(Object.defineProperty({__proto__:null,default:IM},Symbol.toStringTag,{value:"Module"})),U0e=N(void 0),B0e=N(null);function V0e(){const{t:e}=Y(),[t,n]=Fe(U0e),s=M(Jt),o=se(Xw),r=()=>{o(!1),n(void 0)},a=async i=>{await JC({allowBrowserActions:i}),Fn.regenerateMessage({messageId:t??"",mode:"retry"}),o(i),n(void 0)};return c.jsx(fn,{isOpen:t!==void 0,headerIcon:c.jsxs("div",{className:"flex justify-center pb-7",children:[c.jsx("div",{className:"size-11 shrink-0 translate-x-1.5 rounded-full border-2 border-black/12 dark:border-white/15",children:c.jsx(K3,{imgSrc:s==null?void 0:s.imgSrc})}),c.jsx("div",{className:"flex size-11 -translate-x-1.5 items-center justify-center rounded-full border-2 border-black/12 bg-white dark:border-white/15",children:c.jsx(Sm,{className:"size-7"})})]}),headerText:e("browserActions.consent.title"),className:"w-[360px] max-w-[95vw] gap-4 p-8",headerTextClassName:"text-xl text-center",children:c.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[c.jsx("p",{className:"mt-1 text-base",children:e("browserActions.consent.description")}),c.jsx(C0,{icon:c.jsx(IM,{className:"size-6"}),title:e("browserActions.consent.inControlSectionTitle"),description:c.jsx("span",{children:c.jsx(hn,{i18nKey:"browserActions.consent.inControlSectionDescription",components:{settingsLink:c.jsx(jl,{pages:["menu","account","privacy"],className:"text-accent-450",clickSource:"browserActionsConsentSettingsLink",onClick:r,pushPagesDelay:100})}})})}),c.jsx(C0,{icon:c.jsx(wM,{className:"size-6"}),title:e("browserActions.consent.yourPrivacySectionTitle"),description:c.jsx("span",{children:e("browserActions.consent.yourPrivacySectionDescription")})}),c.jsx(C0,{icon:c.jsx(vh,{className:"size-6"}),title:e("browserActions.consent.yourEdgeProfileSectionTitle"),description:c.jsx("span",{children:e("browserActions.consent.yourEdgeProfileSectionDescription")})}),c.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[c.jsx(re,{title:e("browserActions.consent.confirmButton"),color:"default",size:"56-xl",variant:"rect",className:"w-full",onClick:()=>a(!0),children:e("browserActions.consent.confirmButton")}),c.jsx(re,{title:e("browserActions.consent.cancelButton"),color:"default",size:"56-xl",variant:"rect",className:"mt-auto w-full text-system-red-550 dark:text-system-red-350",onClick:()=>a(!1),children:e("browserActions.consent.cancelButton")})]})]})})}function C0(e){const{icon:t,title:n,description:s}=e;return c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{children:t}),c.jsxs("div",{className:"flex flex-col text-sm",children:[c.jsx("span",{className:"text-sm-strong",children:n}),s]})]})}const _M=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M18.2493 6.99982C18.2493 7.69017 17.6896 8.24982 16.9993 8.24982C16.3089 8.24982 15.7493 7.69017 15.7493 6.99982C15.7493 6.30946 16.3089 5.74982 16.9993 5.74982C17.6896 5.74982 18.2493 6.30946 18.2493 6.99982ZM15.4992 2.0498C11.885 2.0498 8.94922 4.98559 8.94922 8.5998C8.94922 8.98701 8.99939 9.36017 9.05968 9.70382C9.07749 9.80529 9.04493 9.89344 8.99046 9.94791L2.75467 16.1837C2.23895 16.6994 1.94922 17.3989 1.94922 18.1282V20.2998C1.94922 21.2663 2.73272 22.0498 3.69922 22.0498H6.19922C7.16572 22.0498 7.94922 21.2663 7.94922 20.2998V19.0498H9.69922C10.3896 19.0498 10.9492 18.4902 10.9492 17.7998V16.0498H12.6992C13.3741 16.0498 13.9241 15.515 13.9484 14.846C14.4451 14.9738 14.9689 15.0498 15.4992 15.0498C19.1134 15.0498 22.0492 12.114 22.0492 8.4998C22.0492 4.86866 19.0963 2.0498 15.4992 2.0498ZM10.4492 8.5998C10.4492 5.81402 12.7134 3.5498 15.4992 3.5498C18.3021 3.5498 20.5492 5.73095 20.5492 8.4998C20.5492 11.2856 18.285 13.5498 15.4992 13.5498C14.8199 13.5498 14.1206 13.3787 13.4947 13.1104C13.2629 13.0111 12.9968 13.0349 12.7864 13.1737C12.5759 13.3125 12.4492 13.5477 12.4492 13.7998V14.5498H10.6992C10.0089 14.5498 9.44922 15.1094 9.44922 15.7998V17.5498H7.69922C7.00886 17.5498 6.44922 18.1094 6.44922 18.7998V20.2998C6.44922 20.4379 6.33729 20.5498 6.19922 20.5498H3.69922C3.56115 20.5498 3.44922 20.4379 3.44922 20.2998V18.1282C3.44922 17.7967 3.58091 17.4788 3.81534 17.2443L10.0511 11.0086C10.4695 10.5902 10.6349 10.0018 10.5371 9.44461C10.4834 9.13865 10.4492 8.8622 10.4492 8.5998Z"})),FAe=Object.freeze(Object.defineProperty({__proto__:null,default:_M},Symbol.toStringTag,{value:"Module"})),y0="size-5";function b0(e){const{icon:t,title:n,description:s}=e;return c.jsxs("div",{className:"flex gap-4 px-4 py-3",children:[c.jsx("div",{children:t}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("h3",{className:"text-sm-strong",children:n}),c.jsx("span",{className:"text-foreground-600 text-sm",children:s})]})]})}function H0e(){const{t:e}=Y();return c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsx("p",{className:"mt-1 text-base",children:e("actions.consent.step1.description")}),c.jsxs("div",{className:"rounded-3xl bg-black/5 py-2",children:[c.jsx(b0,{icon:c.jsx(_M,{className:y0}),title:e("actions.consent.step1.inControlSectionTitle"),description:e("actions.consent.step1.inControlSectionDescription")}),c.jsx(ms,{color:"accent",horizontalMargin:!1,verticalMargin:!1}),c.jsx(b0,{icon:c.jsx(q3,{className:y0}),title:e("actions.consent.step1.alertsSectionTitle"),description:e("actions.consent.step1.alertsSectionDescription")}),c.jsx(ms,{color:"accent",horizontalMargin:!1,verticalMargin:!1}),c.jsx(b0,{icon:c.jsx(Z3,{className:y0}),title:e("actions.consent.step1.yourPrivacySectionTitle"),description:e("actions.consent.step1.yourPrivacySectionDescription")})]})]})}function z0e(){const e=an(),t=M(Qw),n=M(dC),s=M(A1),o=M(Sa),r=M(oQ),a=!!M(rQ),i=!!M(aQ),u=!!(Np({key:"shouldShowTextModelTrainingSettings",default:!0})&&a),d=!!(Np({key:"shouldShowVoiceModelTrainingSettings",default:!0})&&i),m=H("view-settings-disclaimer"),f=u||d,p=!f||t&&!n,g=wT(),[C,v]=Fe(oI),[b,y]=l.useState(!1);l.useEffect(()=>{if((f||r)&&e&&!o){if(C){y(!0),v(!1);return}if(g<h2){y(!0);return}let I;try{I=iie()}catch{I=new Date}const _=PA(I,6),T=new Date;T>_&&(y(!0),Mn(sl,T.toISOString()))}},[e,f,o,g,r,C,v]);const E=()=>p===void 0||s===void 0||r===void 0?null:o||!e?"chat.unauthenticatedDisclaimer":!r||!b?"chat.firstTurnDisclaimerBase":!p&&!s?m?"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":"chat.firstTurnDisclaimerPersonalizationTraining":p&&!s?m?"chat.firstTurnPersonalizationDisclaimerViewSettings":"chat.firstTurnPersonalizationDisclaimer":s&&!p?m?"chat.firstTurnTrainingDisclaimerViewSettings":"chat.firstTurnTrainingDisclaimer":"chat.firstTurnDisclaimerBase";return(()=>{var _,T,A;let I=E();return I?(_=ae.instance().config().uiOverrides)!=null&&_.hideTrainingDisclaimer?"chat.firstTurnDisclaimerBase":(I=((A=(T=ae.instance().config()).textOverrides)==null?void 0:A.call(T,I))??I,I):null})()}const ty="text-foreground-450 text-sm dark:text-foreground-600",G0e="underline",v8={settingsLink:c.jsx(jl,{pages:["menu","account","privacy"],className:F(ty,G0e),clickSource:"disclaimerSettingsLink"}),learnMoreLink:c.jsx(fl,{link:Ap})},ff={termsLink:c.jsx(fl,{link:dl}),privacyLink:c.jsx(fl,{link:es})},W0e={settingsLink:c.jsx(jl,{pages:["menu","account","privacy"],className:ty,disableLink:!0})};function C5(e){const{forceVisible:t,disableDisclaimerSettingsLink:n,className:s,testId:o,shouldUpdateNewConversationCount:r}=e,a=z0e(),i=M(bn),u=i==null?void 0:i.id,m=((i==null?void 0:i.isNew)??t)&&a;if(l.useEffect(()=>{!r||!m||!u||uie(u)},[r,m,u]),!m)return null;const f=p=>{switch(p){case"chat.unauthenticatedDisclaimer":return c.jsxs(c.Fragment,{children:[c.jsx(hn,{i18nKey:"chat.firstTurnDisclaimerBase"})," ",c.jsx(hn,{i18nKey:p,components:{termsLink:ff.termsLink,privacyLink:ff.privacyLink}})]});case"chat.firstTurnTrainingDisclaimer":case"chat.firstTurnPersonalizationDisclaimer":case"chat.firstTurnDisclaimerPersonalizationTraining":case"chat.firstTurnTrainingDisclaimerViewSettings":case"chat.firstTurnPersonalizationDisclaimerViewSettings":case"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":return c.jsxs(c.Fragment,{children:[c.jsx(hn,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",c.jsx(hn,{i18nKey:p,components:{settingsLink:n?W0e.settingsLink:v8.settingsLink}})]});case"chat.edge.firstTurnPersonalizationDisclaimer":case"chat.edge.firstTurnPersonalizationSettingsDisclaimer":return c.jsxs(c.Fragment,{children:[c.jsx(hn,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",c.jsx(hn,{i18nKey:p,components:{learnMoreLink:v8.learnMoreLink,bold:c.jsx("strong",{})}})]});case"chat.firstTurnDisclaimerBase":case"chat.firstTurnPersonalizationDisclaimerBase":case"chat.tv.firstTurnDisclaimer":return c.jsx(hn,{i18nKey:p});case"chat.livingPortraitDisclaimer":return c.jsx(hn,{i18nKey:p,components:{termsLink:ff.termsLink,privacyLink:ff.privacyLink}});default:return null}};return c.jsx(rn,{id:a,mode:"wait",className:F("space-y-8 pb-8",ty,s),"data-testid":o,children:f(a)})}function fl(e){const{children:t,link:n,className:s}=e;return c.jsx(ls,{className:F("underline",s),href:n,title:"",children:t})}const x0="underline text-accent-450";function $0e(e){const{onDismiss:t}=e,{t:n}=Y();return c.jsxs("div",{className:"flex flex-col gap-5 text-foreground-700 text-base",children:[c.jsx("p",{children:n("actions.consent.step2.description1")}),c.jsx("p",{children:n("actions.consent.step2.description2")}),c.jsx("p",{children:c.jsx(hn,{i18nKey:"actions.consent.step2.description3",components:{SettingsLink:c.jsx(jl,{pages:["menu","account","privacy"],className:x0,clickSource:"browserActionsConsentSettingsLink",onClick:t,pushPagesDelay:100}),FAQLink:c.jsx(fl,{className:x0,link:Jee}),PrivacyLink:c.jsx(fl,{className:x0,link:es})}})})]})}function q0e(e){const{stepIndex:t,stepIndexText:n,stepHeaderText:s}=e;return c.jsxs("div",{className:"mb-5 flex flex-col",children:[c.jsxs("div",{className:"flex gap-1 px-4",children:[c.jsx("div",{className:"h-1 flex-1 rounded-sm bg-foreground-800"}),c.jsx("div",{className:F("h-1 flex-1 rounded-sm",t===2?"bg-foreground-800":"bg-black/15")})]}),c.jsx("div",{className:"pb-5 pt-2 text-center text-foreground-450 text-base",children:n}),c.jsx("h2",{className:"text-center text-foreground-850 text-2xl",children:s})]})}const Z0e=2;function K0e(){const{t:e}=Y(),[t,n]=Fe(B0e),s=se(eI),o=M(De),[r,a]=l.useState(1),i=l.useCallback(()=>{if(t){const{messageId:p,partId:g}=t;Fn.updateCardMessageCommand({messageId:p,partId:g}),o&&Vee(o,p,g,C=>{C.type==="card"&&C.card.type==="consent"&&(C.card.status="rejected")})}a(1),n(null)},[t,o,n]);hs(p=>{p.key==="Escape"&&(p.stopPropagation(),i())});const u=l.useCallback(async p=>{await JC({allowComputerUseActions:p}),Fn.regenerateMessage({messageId:(t==null?void 0:t.messageId)??"",mode:"retry",allowedConsents:[vs.ComputerUseActions]}),s(p),n(null)},[t==null?void 0:t.messageId,s,n]),d={1:{title:e("actions.consent.step1.title"),content:c.jsx(H0e,{}),primaryButton:{text:e("common.nextText"),color:"strong",action:()=>a(2)},secondaryButton:{text:e("common.cancel"),color:"subtle-dimmed",action:()=>u(!1)}},2:{title:e("actions.consent.step2.title"),content:c.jsx($0e,{onDismiss:i}),primaryButton:{text:e("actions.consent.agreeButton"),color:"default",action:()=>u(!0)},secondaryButton:{text:e("actions.consent.disagreeButton"),color:"default",action:()=>u(!1)}}},m=e("actions.consent.stepIndexHeader",{index:r,total:Z0e}),f=d[r];return c.jsxs(fn,{isOpen:t!==null,className:"max-h-[80vh] max-w-[448px] overflow-y-auto",dialogName:e("actions.consent.step1.title"),customScrollBar:!0,children:[c.jsx(q0e,{stepIndex:r,stepIndexText:m,stepHeaderText:f.title}),f.content,c.jsxs("div",{className:"mt-5 flex flex-col gap-2",children:[c.jsx(re,{title:f.primaryButton.text,color:f.primaryButton.color,size:"56-xl",variant:"rect",className:"w-full",onClick:f.primaryButton.action,children:f.primaryButton.text}),c.jsx(re,{title:f.secondaryButton.text,color:f.secondaryButton.color,size:"56-xl",variant:"rect",className:"w-full",onClick:f.secondaryButton.action,children:f.secondaryButton.text})]})]})}const bh=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M10.25 3.00011C10.6642 3.00011 10.9999 3.33596 11 3.75011C11 4.16432 10.6642 4.50011 10.25 4.50011H6.75C5.50741 4.50011 4.50008 5.50753 4.5 6.75011V17.2501L4.51172 17.4806C4.62714 18.6149 5.58517 19.5001 6.75 19.5001H17.25C18.4926 19.5001 19.5 18.4927 19.5 17.2501V15.2501C19.5001 14.836 19.8358 14.5001 20.25 14.5001C20.6642 14.5001 20.9999 14.836 21 15.2501V17.2501C21 19.3212 19.3211 21.0001 17.25 21.0001H6.75C4.74378 21.0001 3.10551 19.4247 3.00488 17.4435L3 17.2501V6.75011C3.00008 4.6791 4.67898 3.00011 6.75 3.00011H10.25ZM14.9365 2.06847C15.2026 1.94614 15.5159 1.99023 15.7383 2.18077L22.7383 8.18077C22.8986 8.31823 22.9938 8.51756 23 8.72862C23.006 8.9396 22.9224 9.14361 22.7705 9.29015L15.7705 16.0401C15.554 16.2488 15.2338 16.308 14.957 16.1905C14.6802 16.0729 14.5 15.801 14.5 15.5001V12.5245C13.4857 12.5881 12.5295 12.7973 11.5605 13.2931C10.4241 13.8745 9.21642 14.8746 7.87109 16.5958L7.59961 16.9503C7.40588 17.2083 7.06883 17.3141 6.7627 17.212C6.45646 17.1099 6.25 16.8229 6.25 16.5001C6.25002 13.6428 6.93659 10.911 8.41797 8.87218C9.7938 6.97888 11.8288 5.72554 14.5 5.52843V2.75011L14.5078 2.64171C14.5441 2.39296 14.7037 2.17553 14.9365 2.06847ZM16 6.25011C16 6.66432 15.6642 7.00011 15.25 7.00011C12.6933 7.00011 10.855 8.07008 9.63184 9.75304C8.75387 10.9612 8.17794 12.5102 7.91504 14.2462C8.91534 13.1988 9.89198 12.4611 10.877 11.9571C12.3601 11.1983 13.801 11.0001 15.25 11.0001C15.4489 11.0001 15.6396 11.0792 15.7803 11.2198C15.9209 11.3605 16 11.5512 16 11.7501V13.7345L21.1348 8.78233L16 4.37999V6.25011Z"})),UAe=Object.freeze(Object.defineProperty({__proto__:null,default:bh},Symbol.toStringTag,{value:"Module"})),ny=N(null),TM=N(e=>!!e(ny));function Ca(e){const t=Dt(e);return t.setHours(0,0,0,0),t}function C8(e){const t=Dt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Gc(e,t){const n=Ca(e),s=Ca(t),o=+n-C8(n),r=+s-C8(s);return Math.round((o-r)/Bae)}function xh(e,t){const n=Ca(e),s=Ca(t);return+n==+s}function BAe(e){const t={"one-drive":[],"google-drive":[],"outlook-calendar":[],"google-calendar":[],"google-contacts":[],gmail:[],outlook:[],"edge-browser":[],windows:[]};for(const n of e)n.source==="outlook-calendar"?t.outlook.push(n):t[n.source].push(n);return Object.entries(t).filter(([,n])=>n.length>0)}function Y0e(e,t){if(e.length===0)return[];const n=e.map(()=>[]);let s=0;for(;s<t;){let o=0;for(let r=0;r<e.length&&s<t;r+=1){const a=e[r],i=n[r];if(a&&i){const u=i.length;if(u<a.length){const d=a[u];d!==void 0&&(i.push(d),s+=1,o+=1)}}}if(o===0)break}return n}function VAe(e,t){if(e.length===0)return[];const n=e.map(([,o])=>o),s=Y0e(n,t);return e.map(([o],r)=>[o,s[r]??[]])}function AM(e,t){const n=`/attachments/onedrive/${e}/thumbnail`;return t?`${n}?type=large`:n}function Q0e(e,t){const n=vM();if(!xh(new Date(e),new Date(t)))return`${ts(e,"yyyy-MM-dd, h:mm aa",n)} - ${ts(t,"yyyy-MM-dd, h:mm aa",n)}`;const o=Ca(new Date(e)),r=Ca(new Date),a=Gc(o,r);let i="";a===-1?i=z("dates.yesterday"):a===0?i=z("dates.today"):a===1?i=z("dates.tomorrow"):i=ts(o,"EEEE",n);const u=ts(e,"h:mm a",n),d=ts(t,"h:mm a",n);return`${i}, ${u} - ${d}`}function S0(e){const t=vM(),n=Ca(new Date(e)),s=Ca(new Date),o=Gc(n,s),r=ts(e,"h:mm aa",t);return o===-1?`${z("dates.yesterdayInLowercase")}, ${r}`:o===0?`${z("dates.todayInLowercase")}, ${r}`:ts(e,"yyyy-MM-dd, h:mm aa",t)}function kM(){const e=l.useId(),{t}=Y(),n=se(xn),{openMediaViewer:s}=ka(),o=M(TM),r=se(ny);return(a,i)=>{const u=a.type==="image"&&a.source==="one-drive";switch(i){case"open":return{id:`${e}-open`,type:"open",label:t("common.open"),icon:$3,deferUntilAfterClose:u,source:a.source,artifactType:a.type,hidden:(a.type==="document"||a.type==="image"||a.type==="event"||a.type==="contact"||a.type==="webPage")&&!a.url,sectionName:"body",onClick:()=>{u?(o&&r(null),s({currentMediaIndex:0,media:[{type:"image",url:AM(a.id,!0),altText:a.fileName}]})):a.url&&(a.type==="document"||a.type==="image"||a.type==="event"||a.type==="email"||a.type==="webPage")&&Eo(a.url)}};case"download":return{id:`${e}-download`,type:"download",label:t("common.download"),icon:vd,source:a.source,artifactType:a.type,sectionName:"body",onClick:()=>{}};case"share":return{id:`${e}-share`,type:"share",label:t("common.share"),icon:bh,source:a.source,artifactType:a.type,sectionName:"body",onClick:()=>{}};case"copy":return{id:`${e}-copy`,type:"copy",label:t("connector.search.copyLinkButton"),icon:X3,hidden:!a.url,source:a.source,artifactType:a.type,sectionName:"copy",onClick:async()=>{a.url&&(a.type==="image"||a.type==="document"||a.type==="event"||a.type==="email"||a.type==="webPage")&&(await Op({url:a.url}),n({title:t("connector.search.copyFileLinkSuccessToast"),dismissAfter:3e3}))}};default:throw new Error(`Unhandled action type: ${i}`)}}}const J0e=["open","download","share","copy"];function X0e(e){const{artifact:t,enabledActions:n=J0e}=e,s=kM();return n.map(o=>s(t,o))}function sy(e){const t=pe(De);D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_cardType:e.CardType,eventInfo_sectionName:e.sectionName,eventInfo_clickSource:e.source??"",eventInfo_clickScenario:e.scenario??"",eventInfo_conversationId:t,eventInfo_customData:e.customData,eventInfo_messageId:e.messageId??""}})}function HAe(e){const t=pe(De);D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:e.page,eventInfo_impressionElement:e.element,eventInfo_impressionScenario:e.scenario??"",eventInfo_cardType:e.cardType,eventInfo_conversationId:t,eventInfo_customData:e.customData}})}const Sh=e=>l.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M6.25 10C6.25 10.6904 5.69036 11.25 5 11.25C4.30964 11.25 3.75 10.6904 3.75 10C3.75 9.30964 4.30964 8.75 5 8.75C5.69036 8.75 6.25 9.30964 6.25 10ZM11.25 10C11.25 10.6904 10.6904 11.25 10 11.25C9.30964 11.25 8.75 10.6904 8.75 10C8.75 9.30964 9.30964 8.75 10 8.75C10.6904 8.75 11.25 9.30964 11.25 10ZM15 11.25C15.6904 11.25 16.25 10.6904 16.25 10C16.25 9.30964 15.6904 8.75 15 8.75C14.3096 8.75 13.75 9.30964 13.75 10C13.75 10.6904 14.3096 11.25 15 11.25Z"})),zAe=Object.freeze(Object.defineProperty({__proto__:null,default:Sh},Symbol.toStringTag,{value:"Module"}));function e2e(e){const{portalContainerRef:t,selector:n,children:s}=e,o=l.useRef(null),[r,a]=l.useState(!1);l.useEffect(()=>{n&&(o.current=document.querySelector(n)??document.body),a(!0)},[n]);const i=(t==null?void 0:t.current)??o.current;return r&&i?pl.createPortal(s,i):null}function t2e(e){const{renderTrigger:t,renderSurface:n,containerClassNames:s,color:o="default",onOutsideEvent:r,placement:a="bottom",floatingOffset:i=10,portalContainerRef:u,role:d="dialog"}=e,m=ore(),[f,p]=l.useState(!1),g=l.useRef(null),C=l.useRef(null),v=l.useCallback(I=>{I.stopPropagation(),I.preventDefault(),p(_=>!_)},[]),b=l.useCallback(()=>{p(!1),r==null||r()},[r]),{refs:y,floatingStyles:E,context:x}=Rl({nodeId:m,placement:a,strategy:"fixed",middleware:[pa(i),kl(),ha()],whileElementsMounted:_a,open:f,onOpenChange:(I,_,T)=>{I?p(!0):T!=="ancestor-scroll"&&b()}});return cm(x,{outsidePressEvent:"pointerdown",ancestorScroll:!0,outsidePress:I=>{if(I.target instanceof Element){const _=I.target;if(_ instanceof Element&&_.closest("[data-outside-events-ignore]")!==null)return!1}return!0}}),hs(I=>{I.key==="Escape"&&f&&b()}),c.jsxs("div",{ref:y.setReference,className:F("relative",s==null?void 0:s.trigger),children:[t({openPopover:v,isOpen:f,ref:g}),c.jsx(rre,{id:m,children:c.jsx(e2e,{...u?{portalContainerRef:u}:{selector:"#popoverPortal"},children:c.jsx(pt,{children:f&&c.jsx(K1,{context:x,modal:d==="dialog",returnFocus:!0,initialFocus:C,children:c.jsx(ge.div,{ref:y.setFloating,className:F("rounded-2xl p-3 shadow-lg",o==="thin"?Kr:Ys,s==null?void 0:s.surface,lt.modal),style:{...E,...uv},role:d,tabIndex:-1,initial:"initial",animate:"animate",exit:"exit",variants:{initial:Be,animate:tt,exit:{...Be,transition:{duration:ns.default}}},transition:{duration:ns.default,ease:"easeInOut"},children:c.jsx("div",{className:F("pointer-events-auto relative max-h-expanded-section overflow-visible",lt.modal),children:n({closePopover:b,isOpen:f,focusRef:C})})})})})})})]})}function Eh(e){const{renderTrigger:t,renderSurface:n,containerClassNames:s,color:o,onOutsideEvent:r,placement:a,floatingOffset:i,portalContainerRef:u,role:d}=e,m=Ki(),f=c.jsx(t2e,{renderTrigger:t,renderSurface:n,containerClassNames:s,color:o,onOutsideEvent:r,placement:a,floatingOffset:i,portalContainerRef:u,role:d});return m===null?c.jsx(are,{children:f}):f}function n2e(e){const{artifact:t,portalContainerRef:n,messageId:s}=e,{t:o}=Y(),a=X0e({artifact:t,enabledActions:["open","copy"]}).filter(i=>!i.hidden);return a.length===0?null:c.jsx(Eh,{portalContainerRef:n,renderTrigger:({openPopover:i,isOpen:u})=>{const d=o("connector.search.seeMoreDropdownState",{state:o(u?"actions.screenReaderFriendlyStatus.expanded":"actions.screenReaderFriendlyStatus.collapsed")});return c.jsx(re,{variant:"square",color:u?"overlay-dimmed":"subtle-dimmed",size:"36-sm",title:d,onClick:i,"aria-label":d,children:c.jsx(Sh,{className:"size-5"})})},renderSurface:({closePopover:i})=>c.jsx("div",{className:"flex flex-col",children:a.map(u=>c.jsxs(re,{title:u.label,variant:"rect",color:"subtle-dimmed-inverted",onClick:d=>{i(d),sy({CardType:"personalArtifactsCard",sectionName:u.sectionName,source:u.source,scenario:u.artifactType,messageId:s}),setTimeout(()=>{u.onClick()},0)},size:"36-sm",alignment:"start",className:"min-w-36 gap-2",role:"menuitem",children:[c.jsx(u.icon,{className:"size-4"}),c.jsx("span",{className:"truncate",children:u.label})]},u.id))}),containerClassNames:{surface:"p-1.5",trigger:"py-0.5"},placement:"bottom-start",floatingOffset:{mainAxis:2}})}const MM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M17.75 3C19.5449 3 21 4.45507 21 6.25V17.75C21 19.5449 19.5449 21 17.75 21H6.25C4.45507 21 3 19.5449 3 17.75V6.25C3 4.45507 4.45507 3 6.25 3H17.75ZM19.5 8.5H4.5V17.75C4.5 18.7165 5.2835 19.5 6.25 19.5H17.75C18.7165 19.5 19.5 18.7165 19.5 17.75V8.5ZM7.75 14.5C8.44036 14.5 9 15.0596 9 15.75C9 16.4404 8.44036 17 7.75 17C7.05964 17 6.5 16.4404 6.5 15.75C6.5 15.0596 7.05964 14.5 7.75 14.5ZM12 14.5C12.6904 14.5 13.25 15.0596 13.25 15.75C13.25 16.4404 12.6904 17 12 17C11.3096 17 10.75 16.4404 10.75 15.75C10.75 15.0596 11.3096 14.5 12 14.5ZM7.75 10.5C8.44036 10.5 9 11.0596 9 11.75C9 12.4404 8.44036 13 7.75 13C7.05964 13 6.5 12.4404 6.5 11.75C6.5 11.0596 7.05964 10.5 7.75 10.5ZM12 10.5C12.6904 10.5 13.25 11.0596 13.25 11.75C13.25 12.4404 12.6904 13 12 13C11.3096 13 10.75 12.4404 10.75 11.75C10.75 11.0596 11.3096 10.5 12 10.5ZM16.25 10.5C16.9404 10.5 17.5 11.0596 17.5 11.75C17.5 12.4404 16.9404 13 16.25 13C15.5596 13 15 12.4404 15 11.75C15 11.0596 15.5596 10.5 16.25 10.5ZM17.75 4.5H6.25C5.2835 4.5 4.5 5.2835 4.5 6.25V7H19.5V6.25C19.5 5.2835 18.7165 4.5 17.75 4.5Z"})),GAe=Object.freeze(Object.defineProperty({__proto__:null,default:MM},Symbol.toStringTag,{value:"Module"})),wh=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M17.75 3C19.5449 3 21 4.45507 21 6.25V17.75C21 19.5449 19.5449 21 17.75 21H6.25C4.45507 21 3 19.5449 3 17.75V6.25C3 4.45507 4.45507 3 6.25 3H17.75ZM18.3305 19.4014L12.5247 13.7148C12.2596 13.4553 11.8501 13.4316 11.5588 13.644L11.4752 13.7148L5.66845 19.4011C5.8504 19.4651 6.04613 19.5 6.25 19.5H17.75C17.9535 19.5 18.1489 19.4653 18.3305 19.4014L12.5247 13.7148L18.3305 19.4014ZM17.75 4.5H6.25C5.2835 4.5 4.5 5.2835 4.5 6.25V17.75C4.5 17.9584 4.53643 18.1583 4.60326 18.3437L10.4258 12.643C11.2589 11.8273 12.5675 11.7885 13.4458 12.5266L13.5742 12.6431L19.3964 18.3447C19.4634 18.159 19.5 17.9588 19.5 17.75V6.25C19.5 5.2835 18.7165 4.5 17.75 4.5ZM15.2521 6.5C16.4959 6.5 17.5042 7.50831 17.5042 8.75212C17.5042 9.99592 16.4959 11.0042 15.2521 11.0042C14.0083 11.0042 13 9.99592 13 8.75212C13 7.50831 14.0083 6.5 15.2521 6.5ZM15.2521 8C14.8367 8 14.5 8.33673 14.5 8.75212C14.5 9.1675 14.8367 9.50423 15.2521 9.50423C15.6675 9.50423 16.0042 9.1675 16.0042 8.75212C16.0042 8.33673 15.6675 8 15.2521 8Z"})),WAe=Object.freeze(Object.defineProperty({__proto__:null,default:wh},Symbol.toStringTag,{value:"Module"}));function s2e(){return c.jsx(j1,{size:"md",className:"h-[176px] max-w-[360px]",children:c.jsx(l_,{})})}function NM(e){const t=pe(De);D.trackEvent({name:"system",data:{eventName:"clientImageError",eventInfo_url:e,eventInfo_conversationId:t}})}const y5=N({}),b5=qe();async function o2e(e){const t=b5.get(y5),n=t[e];if(n)return n;try{let s;if(e.includes("?")){const[r=e,a=""]=e.split("?",2),i=new URLSearchParams(a),u={};for(const[d,m]of i.entries())u[d]=m;s=await $n(r,{query:u})}else s=await $n(e);const o=URL.createObjectURL(await s.blob());return b5.set(y5,{...t,[e]:o}),o}catch{NM(e);return}}function r2e(e){const{originalUrl:t,children:n}=e,[s,o]=l.useState(void 0),[r,a]=l.useState(void 0),[i,u]=l.useState(!1);if(l.useEffect(()=>{let C=!1;return u(!1),o(void 0),a(void 0),o2e(t).then(v=>{C||(o(v),a(t))}).catch(()=>{C||u(!0),NM(t)}),()=>{C=!0}},[t]),i)return c.jsx(s2e,{});const m=r!==t?void 0:s,f=t.startsWith("blob:"),p=f?Object.values(b5.get(y5)).includes(t):!1;return!!m&&!(f&&!p)?c.jsx(c.Fragment,{children:n(m)}):null}const pf="flex size-8 items-center justify-center rounded-lg border",hf="size-6 text-foreground-700";function a2e(e){const{artifact:t}=e,{source:n,type:s}=t;switch(s){case"contact":return c.jsx("div",{className:F("size-8 rounded-full",!t.thumbnailUrl&&"bg-caramel-250 text-stone-800"),children:c.jsx(K3,{firstName:t.displayName.trim(),imgSrc:t.thumbnailUrl??void 0,showTwoCharacters:!1})});case"email":return c.jsx("div",{className:F(pf,Ua,Nc),children:c.jsx(T3,{className:hf})});case"event":return c.jsx("div",{className:F(pf,Ua,Nc),children:c.jsx(MM,{className:hf})});case"document":return c.jsx(Ok,{fileType:t.contentType,className:"size-8"});case"image":{const o=t.fileName,r="size-9 rounded-sm",a="size-8 rounded-lg border text-foreground-700";return t.thumbnailUrl?c.jsx(ju,{className:r,errorClass:F(a,Ua),src:t.thumbnailUrl,alt:o,loading:"lazy"}):n==="one-drive"&&t.id?c.jsx(r2e,{originalUrl:AM(t.id),children:i=>c.jsx(ju,{className:r,errorClass:F(a,Ua),src:i,alt:o,loading:"lazy"})}):c.jsx("div",{className:F(pf,Ua,Nc),children:c.jsx(wh,{className:hf})})}case"webPage":return t.iconUrl?c.jsx(ju,{errorClass:F("size-8 rounded-lg border text-foreground-700",Ua),src:t.iconUrl,alt:t.title,loading:"lazy"}):c.jsx("div",{className:F(pf,Ua,Nc),children:c.jsx(Em,{className:hf})});default:return null}}function i2e(e,t,n={}){const s=new Date(e);return new Intl.DateTimeFormat(t,n).format(s)}const c2e="flex h-full w-[80px] flex-col items-center justify-center rounded-[16px] bg-background-200",l2e="font-semibold text-2xl",u2e="text-[17px] font-medium uppercase";function d2e(e){const{startsAt:t,containerClassName:n,dayClassName:s,monthClassName:o}=e,r=CM(),a=i2e(t,r,{month:"short"}),i=new Date(t).getDate().toString().padStart(2,"0");return c.jsxs("div",{className:n??c2e,children:[c.jsx("span",{className:s??l2e,children:i}),c.jsx("span",{className:o??u2e,children:a})]})}function RM(e){const{artifact:t,showActions:n,portalContainerRef:s,className:o,messageId:r}=e,{t:a}=Y(),i=kM(),{hidden:u,onClick:d,sectionName:m,source:f,artifactType:p}=i(t,"open"),g=l.useMemo(()=>{switch(t.type){case"image":case"document":return t.fileName;case"event":case"email":return t.subject??a("connector.eventWithoutSubjectTitle");case"contact":return t.displayName;case"webPage":return t.title;default:return""}},[t,a]),C=l.useMemo(()=>{var v;switch(t.type){case"image":case"document":return t.modifiedAt?a("connector.lastModifiedAt",{datetime:S0(t.modifiedAt)}):"";case"event":return Q0e(t.startsAt,t.endsAt);case"email":return t.receivedAt?a("connector.receivedAt",{datetime:S0(t.receivedAt)}):"";case"contact":return((v=t.emailAddresses)==null?void 0:v.map(b=>b.trim()).filter(b=>b.length>0).join("  "))??"";case"webPage":return t.visitedAt?`${Ts(t.url)}  ${S0(t.visitedAt)}`:"";default:return""}},[t,a]);return c.jsxs("div",{className:F("flex gap-1 py-1.5 pe-2 ps-2.5",o),children:[c.jsxs("button",{type:"button",className:"flex min-w-0 flex-1 items-center gap-2",onClick:()=>{u||(sy({CardType:"personalArtifactsCard",sectionName:m,source:f,scenario:p,messageId:r}),d())},children:[t.type==="event"?c.jsx(d2e,{startsAt:t.startsAt,containerClassName:"flex w-[32px] h-[38px] flex-col items-center justify-around rounded-[8px] py-[4px] bg-background-200",dayClassName:"font-medium text-[14px] leading-none",monthClassName:"text-[9px] font-[450] uppercase leading-none"}):c.jsx("div",{className:"flex size-9 items-center justify-center",children:c.jsx(a2e,{artifact:t})}),c.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-0 px-0.5",children:[c.jsx("p",{className:"truncate text-start text-foreground-900 text-sm",children:g}),C&&c.jsx("p",{className:"truncate py-0.5 text-start text-foreground-600 text-xs",children:C})]})]}),n&&c.jsx(n2e,{artifact:t,portalContainerRef:s,messageId:r})]})}function m2e(e){const{t}=Y();switch(e){case"one-drive":return{source:e,title:t("oneDrive.title"),websiteLink:"https://onedrive.com",IconComponent:Ch};case"google-drive":return{source:e,title:t("connector.googleDrive.title"),websiteLink:"https://drive.google.com",IconComponent:z3};case"outlook-calendar":case"outlook":return{source:e,title:t("outlook.title"),websiteLink:"https://outlook.com",IconComponent:cM};case"google-calendar":return{source:e,title:t("connector.googleCalendar.title"),websiteLink:"https://calendar.google.com",IconComponent:H3};case"gmail":return{source:e,title:t("connector.googleMail.title"),websiteLink:"https://mail.google.com",IconComponent:G3};case"google-contacts":return{source:e,title:t("connector.googleContacts.title"),websiteLink:"https://contacts.google.com",IconComponent:hm};case"edge-browser":return{source:e,title:t("connector.edgeBrowser.title"),websiteLink:null,IconComponent:iM};default:return null}}const PM=e=>l.createElement("svg",{viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2.49999 1C1.67157 1 0.999995 1.67157 0.999995 2.5V9.5C0.999995 10.3284 1.67157 11 2.49999 11H9.49996C10.3284 11 10.9999 10.3284 10.9999 9.5V7.26923C10.9999 6.99309 11.2238 6.76923 11.4999 6.76923C11.7761 6.76923 11.9999 6.99309 11.9999 7.26923V9.5C11.9999 10.8807 10.8807 12 9.49996 12H2.49999C1.11928 12 0 10.8807 0 9.5V2.5C0 1.11929 1.11928 0 2.49999 0H4.73075C5.00689 0 5.23074 0.223858 5.23074 0.5C5.23074 0.776142 5.00689 1 4.73075 1H2.49999ZM6.76926 0.5C6.76926 0.223858 6.99311 0 7.26925 0H11.5C11.7761 0 12 0.223858 12 0.5V4.73077C12 5.00691 11.7761 5.23077 11.5 5.23077C11.2239 5.23077 11 5.00691 11 4.73077V1.70711L7.6228 5.08433C7.42754 5.27959 7.11096 5.27959 6.9157 5.08433C6.72044 4.88906 6.72044 4.57248 6.9157 4.37722L10.2929 1H7.26925C6.99311 1 6.76926 0.776142 6.76926 0.5Z"})),$Ae=Object.freeze(Object.defineProperty({__proto__:null,default:PM},Symbol.toStringTag,{value:"Module"})),f2e="flex items-center gap-2 text-foreground-750 text-xs-medium",p2e="size-4";function LM(e){const{source:t,messageId:n,iconClass:s,sourceTitle:o,wrapperClass:r}=e,a=m2e(t);if(!a)return null;const{websiteLink:i,title:u,IconComponent:d}=a;return c.jsxs("div",{className:F(r,"flex w-full items-center justify-between"),children:[c.jsxs("div",{className:f2e,children:[c.jsx(d,{className:s??p2e}),o??u]}),i&&c.jsx(ls,{href:i,title:z("common.open"),className:"text-[12px] font-normal",onClick:()=>{sy({CardType:"personalArtifactsCard",sectionName:"header",source:t,messageId:n})},children:c.jsxs("div",{className:"flex flex-row items-center gap-1",children:[c.jsx("span",{children:z("common.open")}),c.jsx(PM,{className:"size-3"})]})})]})}function h2e({messageId:e}){var f,p;const t=M(TM),n=l.useId(),[s,o]=Fe(ny),r=l.useRef(null),{t:a}=Y(),i=((f=ae.instance().config().composer)==null?void 0:f.largeScreen)===!0&&((p=ae.instance().config().composer)==null?void 0:p.voiceOnly)===!0,u=()=>{o(null)},{focusable:d}=Ta({isFocusBoundary:!0});if(hs(g=>{V3(g)&&(g.stopPropagation(),u())}),!s)return null;const m=s;return c.jsx(fn,{isOpen:t,onClose:i?void 0:u,headerText:a("connector.search.title",{resultsCount:m.reduce((g,[,C])=>g+C.length,0)}),headerTextClassName:"ps-4",className:F(i?"max-h-[40vh]":"max-h-[80vh]",i?"w-[480px]":"w-[440px]","mx-4 px-0"),children:c.jsx(X1.Provider,{value:d.focusKey??"",children:c.jsx("div",{className:F("flex flex-col gap-2 overflow-y-auto px-4",i?"no-scrollbar":"t-custom-scrollbar"),ref:r,children:m.map(([g,C],v)=>{const b=`${n}-source-${v}`;return c.jsxs("section",{className:"mb-4","aria-labelledby":b,children:[c.jsx("div",{id:b,className:"mb-4 font-semibold text-foreground-600 text-sm",children:c.jsx(LM,{source:g,messageId:e})}),c.jsx("ul",{"aria-labelledby":b,role:"list",className:"m-0 flex list-none flex-col gap-3 p-0",children:C.map(y=>c.jsx("li",{children:c.jsx(RM,{artifact:y,portalContainerRef:r,showActions:!0,className:"rounded-xl border border-black/10 dark:border-white/10",messageId:e})},y.id))})]},`${g}-${v}`)})})})})}const g2e=l.lazy(()=>V(()=>import("./subscription-promo-strategy-modal-CMrDmx8h.js"),__vite__mapDeps([363,1,316,317,318,307,364,365,366,367,368,369,353])).then(e=>({default:e.SubscriptionPromoStrategyModal})));function v2e(e){const{config:{upgradeToPremium:t}}=e;return c.jsx(l.Suspense,{fallback:null,children:c.jsx(g2e,{upgradeToPremium:t})})}function C2e(){const e=rA(),t=D0e(),n=M(qr),s=M(ww),[o,r]=Fe(x1),a=M(S1),i=ae.instance().config().entraRedirectModalBehaviour!=="skip",u=H("ds-new-progress"),[d,m]=Fe(aC),f=M(ZK),[p,g]=Fe(kw),[C,v]=Fe(uM),b=j0e(),y=F0e(),E=M(iC),x=M(W3),I=H("search-personal-data");return c.jsxs(c.Fragment,{children:[n&&c.jsx(RA,{accountActionRequired:n}),e&&o&&c.jsx(Ho,{isOpen:!0,trapFocus:!0,children:c.jsx(cge,{interceptedLink:o,onClose:()=>{r(void 0)}})}),c.jsx(R0e,{}),s&&c.jsx(Qhe,{}),a&&c.jsx(O0e,{}),c.jsxs(q7,{children:[i&&c.jsx(age,{}),c.jsx(Zhe,{}),c.jsx(V0e,{})]}),c.jsx(Yre,{}),c.jsx(K0e,{}),t&&c.jsx(Vhe,{}),u&&c.jsxs(c.Fragment,{children:[c.jsx(Sge,{}),c.jsx(mge,{})]}),d&&c.jsx(uge,{config:d,onClose:()=>m(null)}),f&&c.jsx(v2e,{config:f}),p&&c.jsx(dge,{config:p,onClose:()=>g(null)}),C!==null&&c.jsx(lge,{options:C,onClose:()=>v(null)}),b&&c.jsx(zge,{}),y&&c.jsx(u0e,{}),E&&E.visible&&c.jsx(sge,{}),x&&c.jsx(oge,{data:x}),I&&c.jsx(h2e,{})]})}const y2e=e=>l.createElement("svg",{width:96,height:93,viewBox:"0 0 96 93",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("mask",{id:"mask0_140_39981",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93},l.createElement("mask",{id:"path-1-outside-1_140_39981",maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93,fill:"black"},l.createElement("rect",{fill:"white",width:96,height:93}),l.createElement("path",{d:"M4 46.5C4 23.0279 23.0279 4 46.5 4H49.5C72.9721 4 92 23.0279 92 46.5V46.5C92 69.9721 72.9721 89 49.5 89H46.5C23.0279 89 4 69.9721 4 46.5V46.5Z"})),l.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",fill:"url(#paint0_linear_140_39981)",fillOpacity:.8,mask:"url(#path-1-outside-1_140_39981)"}),l.createElement("g",{clipPath:"url(#paint1_angular_140_39981_clip_path)","data-figma-skip-parse":"true",mask:"url(#path-1-outside-1_140_39981)"},l.createElement("g",{transform:"matrix(0 -0.0425 0.0556447 0 48 46.5)"},l.createElement("foreignObject",{x:-1094.12,y:-1094.12,width:2188.24,height:2188.24},l.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(214, 147, 237, 1) 0deg,rgba(250, 176, 198, 1) 60.2401deg,rgba(244, 185, 234, 1) 85.1532deg,rgba(141, 152, 255, 1) 126.663deg,rgba(170, 110, 238, 1) 209.329deg,rgba(255, 103, 119, 1) 250.911deg,rgba(255, 186, 113, 1) 291.415deg,rgba(198, 134, 255, 1) 332.659deg,rgba(214, 147, 237, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),l.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),l.createElement("g",{mask:"url(#mask0_140_39981)"},l.createElement("g",{clipPath:"url(#paint2_angular_140_39981_clip_path)","data-figma-skip-parse":"true"},l.createElement("g",{transform:"matrix(0 -0.071 0.0897903 0 48 47.0001)"},l.createElement("foreignObject",{x:-1014.09,y:-1014.09,width:2028.17,height:2028.17},l.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(0, 0, 0, 1) 0deg,rgba(255, 255, 255, 1) 52.2deg,rgba(197, 197, 197, 1) 122.4deg,rgba(0, 0, 0, 1) 147.6deg,rgba(255, 255, 255, 1) 171deg,rgba(174, 174, 174, 1) 235.8deg,rgba(0, 0, 0, 1) 250.911deg,rgba(217, 238, 247, 1) 266.4deg,rgba(255, 255, 255, 1) 332.659deg,rgba(0, 0, 0, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),l.createElement("rect",{x:-23,y:-24,width:142,height:142})),l.createElement("defs",null,l.createElement("clipPath",{id:"paint1_angular_140_39981_clip_path"},l.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),l.createElement("clipPath",{id:"paint2_angular_140_39981_clip_path"},l.createElement("rect",{x:-23,y:-24,width:142,height:142})),l.createElement("linearGradient",{id:"paint0_linear_140_39981",x1:4,y1:89,x2:101.93,y2:75.3765,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#FFAB4E"}),l.createElement("stop",{offset:1,stopColor:"#FF7791"})))),OM=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M20.2899 16.4358C20.6074 15.5282 20.78 14.5526 20.78 13.5366V9.5241C20.78 9.10859 20.4432 8.77175 20.0277 8.77175C19.6122 8.77175 19.2753 9.10859 19.2753 9.5241V13.5366C19.2753 14.1176 19.2072 14.6827 19.0785 15.2244L20.2899 16.4358Z",fill:"currentColor"}),l.createElement("path",{d:"M15.263 11.1575V6.51431C15.263 4.71377 13.8034 3.25414 12.0028 3.25414C10.7464 3.25414 9.65599 3.96485 9.11167 5.00618L8.01336 3.90787C8.86428 2.60809 10.3333 1.74944 12.0028 1.74944C14.6344 1.74944 16.7677 3.88274 16.7677 6.51431V12.6622L15.263 11.1575Z",fill:"currentColor"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0026 20.8093C7.986 20.8093 4.7299 17.5532 4.7299 13.5366L4.7299 9.5241C4.7299 9.10859 4.39306 8.77175 3.97755 8.77175C3.56204 8.77175 3.2252 9.10859 3.2252 9.5241L3.2252 13.5366C3.2252 18.3843 7.15498 22.314 12.0026 22.314C14.6664 22.314 17.053 21.1274 18.6628 19.2539L21.0006 21.5917C21.2944 21.8855 21.7707 21.8855 22.0645 21.5917C22.3584 21.2979 22.3584 20.8215 22.0645 20.5277L3.00504 1.46823C2.71123 1.17442 2.23487 1.17442 1.94106 1.46823C1.64725 1.76204 1.64725 2.2384 1.94106 2.53221L7.23793 7.82908V13.5362C7.23793 16.1678 9.37124 18.3011 12.0028 18.3011C13.5589 18.3011 14.9407 17.5552 15.8103 16.4015L17.5951 18.1862C16.261 19.7891 14.251 20.8093 12.0026 20.8093ZM8.74263 13.5362C8.74263 15.3368 10.2023 16.7964 12.0028 16.7964C13.1441 16.7964 14.1484 16.21 14.7308 15.322L8.74263 9.33378L8.74263 13.5362Z",fill:"currentColor"})),qAe=Object.freeze(Object.defineProperty({__proto__:null,default:OM},Symbol.toStringTag,{value:"Module"})),Dp=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7673 6.54284C16.7673 3.91128 14.634 1.77799 12.0024 1.77799C9.37089 1.77799 7.2376 3.91129 7.2376 6.54284L7.2376 13.5647C7.2376 16.1963 9.37089 18.3296 12.0024 18.3296C14.634 18.3296 16.7673 16.1963 16.7673 13.5647L16.7673 6.54284ZM12.0024 3.28268C13.803 3.28268 15.2626 4.7423 15.2626 6.54284L15.2626 13.5647C15.2626 15.3652 13.803 16.8249 12.0024 16.8249C10.2019 16.8249 8.74229 15.3652 8.74229 13.5647L8.74229 6.54284C8.74229 4.7423 10.2019 3.28268 12.0024 3.28268Z",fill:"currentColor"}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.0274 8.79987C19.6119 8.79987 19.2751 9.1367 19.2751 9.55221V13.5647C19.2751 17.5813 16.019 20.8374 12.0024 20.8374C7.98587 20.8374 4.72979 17.5813 4.72979 13.5647L4.72979 9.55221C4.72979 9.1367 4.39295 8.79987 3.97744 8.79987C3.56193 8.79987 3.2251 9.1367 3.2251 9.55221L3.2251 13.5647C3.2251 18.4123 7.15485 22.3421 12.0024 22.3421C16.85 22.3421 20.7798 18.4123 20.7798 13.5647V9.55221C20.7798 9.1367 20.443 8.79987 20.0274 8.79987Z",fill:"currentColor"})),ZAe=Object.freeze(Object.defineProperty({__proto__:null,default:Dp},Symbol.toStringTag,{value:"Module"})),DM=e=>l.createElement("svg",{width:63,height:73,viewBox:"0 0 63 73",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("g",{filter:"url(#filter0_d_3118_29179)"},l.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",fill:"white",fillOpacity:.8,shapeRendering:"crispEdges"}),l.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",stroke:"white",strokeWidth:1.5,shapeRendering:"crispEdges"})),l.createElement("path",{d:"M43.06 50.7014C44.3479 49.7757 44.5485 48.2871 44.5004 46.9375L44.469 46.4069C44.397 45.4896 44.2259 44.4068 44.0083 43.1722L43.7279 41.6191L43.7271 41.6113L43.7263 41.6119L41.2578 28.06L40.7794 25.455C40.3207 22.9993 39.9105 20.9984 39.4527 19.5092L39.3346 19.1407C39.0928 18.4125 38.8119 17.7441 38.4599 17.1874L38.2786 16.9184C37.7807 16.2335 37.0781 15.6722 36.1346 15.5382L35.9428 15.5173C35.0273 15.4462 34.264 15.7987 33.6613 16.3187L33.4134 16.551C32.8862 17.0835 32.4355 17.7951 32.024 18.597L31.8493 18.9462C31.1633 20.3587 30.4435 22.2885 29.6039 24.6656L28.7214 27.1892L28.7014 27.2468C28.4821 27.8767 28.3253 28.323 28.1864 28.662L28.0522 28.9689C27.8919 29.3038 27.7981 29.3776 27.7565 29.4075C27.7254 29.4298 27.6614 29.4719 27.4758 29.5106L27.2465 29.5479C27.0436 29.5728 26.806 29.587 26.5081 29.5964L25.4073 29.6142L25.3455 29.6153C22.0505 29.6503 19.3668 29.6775 17.3562 29.8624L16.5355 29.9519C15.6246 30.0688 14.7765 30.2424 14.0635 30.5367L13.7674 30.6702C13.0061 31.0434 12.328 31.6403 12.0348 32.5515L11.9812 32.738C11.7577 33.624 11.971 34.4332 12.3786 35.1149L12.5645 35.3986C13.059 36.0947 13.7998 36.7301 14.6458 37.3375L15.3198 37.8019C16.9879 38.9103 19.3175 40.1961 22.1748 41.7746L34.238 48.4394L35.6206 49.2003C36.9417 49.9202 38.0776 50.5066 39.0333 50.8666L39.516 51.0344C40.6626 51.3952 41.933 51.5114 43.06 50.7014Z",stroke:"black",strokeWidth:1.5}),l.createElement("defs",null,l.createElement("filter",{id:"filter0_d_3118_29179",x:2.64307,y:6.25732,width:51.1152,height:66.3022,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},l.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),l.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),l.createElement("feMorphology",{radius:2,operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_3118_29179"}),l.createElement("feOffset",{dy:16}),l.createElement("feGaussianBlur",{stdDeviation:4}),l.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),l.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"}),l.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3118_29179"}),l.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3118_29179",result:"shape"})))),KAe=Object.freeze(Object.defineProperty({__proto__:null,default:DM},Symbol.toStringTag,{value:"Module"}));function b2e(e){const{renderFocusedElement:t,children:n,className:s,options:o={},isOpen:r}=e,{offset:a=1,placement:i="bottom-end",adjustArrowPosition:u=E=>E}=o,d=l.useRef(null),{state:m,setState:f}=_3({controlledValue:r,defaultValue:!1}),{y:p=0}=u({x:0,y:0})??{},{refs:g,context:C,floatingStyles:v,middlewareData:b}=Rl({open:m,placement:i,onOpenChange:f,middleware:[pa(a),ha(),Y_({element:d,padding:{right:-38,bottom:p}})],whileElementsMounted:_a}),y=u(b.arrow);return c.jsxs(c.Fragment,{children:[t==null?void 0:t({ref:g.setReference},m),m&&c.jsx(Nl,{children:c.jsx(K1,{context:C,modal:!1,children:c.jsxs("div",{ref:g.setFloating,style:v,className:F("flex outline-none",lt.coachmark),children:[c.jsx("div",{className:F("start-0 flex rounded-ee-md rounded-es-3xl rounded-se-3xl rounded-ss-3xl border border-background-200 border-white shadow-sm",s),children:n}),c.jsx("div",{ref:d,style:{position:"absolute",left:y==null?void 0:y.x,top:(y==null?void 0:y.y)??p},className:"pointer-events-none",children:c.jsx(DM,{className:"my-5 size-14"})})]})})})]})}const gf="absolute inset-0 rounded-full",y8="relative size-6 transition-colors",b8=2,x2e=50,S2e=20,jM=.6,E2e=3,w2e=.55,I2e=1,_2e={opacity:0,scale:jM},T2e={opacity:1,scale:1,transition:{...w_,delay:__}};function A2e(e){const{t}=Y(),{status:n,inputVolume:s,isOutputPlaying:o,enableSpinAnimation:r=!0,className:a,coachUserUnmute:i=!1,onClick:u}=e,d=n==="muted",m=n==="disabled",f=n==="active",p=!o&&f,[g,C]=l.useState(!1),v=bt({breakpoint:"sm"});l.useEffect(()=>{let _;return i&&(_=setTimeout(()=>C(!0),600)),()=>clearTimeout(_)},[i]);const b=j7(s,E_),y=tl(b,[b8,x2e],[jM,E2e]),E=tl(b,[b8,S2e],[w2e,I2e]),{focusable:x,refCallback:I}=Ta({autoRestoreFocus:!0,forceFocus:!0});return c.jsx(b2e,{className:"max-w-72 border-white bg-black/90 p-2 dark:bg-white",isOpen:g,options:{placement:"top-end",offset:v?{mainAxis:27,crossAxis:10}:{mainAxis:15,crossAxis:-55},adjustArrowPosition:_=>v?{x:_!=null&&_.x?_.x-20:void 0,y:12}:_},renderFocusedElement:_=>c.jsxs(c.Fragment,{children:[g?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:c.jsx(rn,{duration:.6,exitDelay:4.5,exitDuration:.5,children:c.jsx(ge.div,{animate:{rotate:360},transition:{duration:2.5,repeat:1,ease:"linear"},children:c.jsx(y2e,{className:"size-20"})})})}),c.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:c.jsx(ge.div,{className:"size-[80px] rounded-full border-4 border-solid border-black/80 shadow-sm dark:border-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:4.5,ease:"linear"}})})]}):null,c.jsx(ge.button,{..._,title:t(m?"composer.microphoneDisabled":d?"composer.unmuteMicrophone":"composer.muteMicrophone"),className:de("size-12 rounded-full",dd,lm,a),layout:!i,initial:"initial",animate:"enter",variants:{initial:_2e,enter:T2e},onClick:u,ref:T=>{_.ref(T),I(T)},"data-spatial-focus-key":x.focusKey,disabled:m,children:c.jsxs(ge.span,{className:de("flex items-center justify-center overflow-hidden border",f?"border-white bg-white/50 hover:bg-white/80 dark:border-white/12 dark:bg-black/40":"border-transparent bg-black/8 dark:bg-white/5",p&&"text-spot-blue-450 dark:text-midnight-300",gf),layout:!i,children:[c.jsx(pt,{children:p&&c.jsx(ge.div,{className:de("flex items-center justify-center overflow-hidden rounded-full blur-[6px]",gf),layout:!0,initial:Be,animate:tt,exit:Be,style:{scale:y},children:c.jsx(ge.div,{className:de(gf),layout:!0,style:{opacity:E},children:c.jsx(ge.div,{className:de(r&&"animate-spin-slow","bg-gradient-audio-input-light dark:bg-gradient-audio-input-dark",gf)})})})}),f?c.jsx(Dp,{className:y8,"aria-hidden":!0}):c.jsx(OM,{className:y8,"aria-hidden":!0})]})})]}),children:c.jsx("div",{className:"flex p-0 px-3 text-white text-sm dark:text-foreground-300",children:t("voice.v2.waitingInteractionUnmuteSubheader")})})}function k2e(e,t){const{children:n,className:s,margins:o,data:r,size:a="regular",onButtonRef:i}=e,u=r.isDisabled?"":r.title,d=a==="small";return c.jsx(ge.div,{className:F("relative shrink-0",o??"my-1",d?"h-9":"h-10",r.isVisible&&!d&&"size-10",r.isVisible&&d&&"size-9",!r.isVisible&&"overflow-hidden"),layout:!0,initial:!1,ref:t,children:c.jsx(ge.button,{type:"button",className:F("absolute flex items-center justify-center rounded-xl fill-foreground-750",d?"size-9 p-1":"size-10 p-2",Ii["subtle-dimmed"],"disabled:active:bg-transparent disabled:active:bg-none",s),layout:"position",disabled:!r.isVisible||r.isDisabled,"aria-hidden":!r.isVisible,"aria-label":u,title:u,onClick:r.onClick,"data-testid":r.testId,"aria-expanded":typeof r.ariaExpanded=="boolean"?r.ariaExpanded:void 0,ref:i,children:n})})}const Hs=l.forwardRef(k2e);function Of(e){const{children:t,className:n}=e;return c.jsx(ge.div,{className:n,initial:Be,animate:tt,exit:Be,transition:{delay:I_},children:t})}function FM(){const e=a3(),t=H("appearance-first-run-experience"),[n,s]=Fe(ck),[o,r]=Fe(nfe),a=e&&t&&!n;return{hasNeverSeenAppearanceFirstRunAnimation:a,setHasSeenFirstRunExperienceAnimation:s,isAppearanceFirstRunExperienceAnimationPlaying:o,setIsAppearanceFirstRunExperienceAnimationPlaying:r,isAppearanceFirstRunExperienceComplete:!a&&!o}}function M2e(e){const{isInputMuted:t}=e,{isAppearanceFirstRunExperienceAnimationPlaying:n}=FM();return n?"disabled":t?"muted":"active"}function UM(){const e=dm(),t=H("appearance-discoverability"),n=M(vo),s=M(ik);return e&&t&&!n&&s}function Tu(e){const t=qe(),s={...t.get(_2),[e]:new Date().toISOString()};t.set(_2,s)}function Zo(e){const n=!!M(_2)[e],s=l.useCallback(()=>{Tu(e)},[e]);return{alreadyShown:n,dismissCoachmark:s}}const BM="appearanceColorShuffler",VM="appearanceSetting",N2e="appearanceVoiceCustomization",km="smartmode",YAe="pagesEditThisResponse",QAe="pageSourcesFirstRun",JAe="pageSourcesFirstAdd",XAe="galleryDetailPrompt",eke="GalleryComposerFileUpload",HM="vision",tke="audioExpressionModeSelector",R2e="studyLive",P2e="inlineBrowsingPreviousConversations",nke="inviteTooltip";function L2e(){const e=a3(),t=H("appearance-customization-function-call"),n=sh(),{isAppearanceFirstRunExperienceComplete:s}=FM(),o=M(sfe),{alreadyShown:r}=Zo(BM),a=o||r,i=M(lk);return e&&t&&a&&s&&!i&&!n}function Mm(e){const{renderReferenceElement:t,children:n,className:s,placement:o,offset:r,isOpen:a=!0,portalId:i,withArrow:u=!1,arrowClassName:d="dark:fill-black fill-white",animation:m="none",onOutsideEvent:f,onInsideEvent:p,invokeOnce:g=!0}=e,C=l.useRef(null),{refs:v,x:b,y,strategy:E,context:x,placement:I}=Rl({open:a,placement:o??"right",middleware:[pa(r??1),kl({fallbackAxisSideDirection:"end"}),ha(),Y_({element:C})],whileElementsMounted:_a});ho({onOutsideEvent:()=>{f==null||f()},invokeOnce:g,elements:[v.floating]});const _=HC(x),T=cm(x),A=J1(x),k=qi(),{getReferenceProps:R,getFloatingProps:P}=Y1([_,T,A]),B=M(Wo),U=O2e(m,I);return c.jsxs(c.Fragment,{children:[t==null?void 0:t({ref:v.setReference,...R()},a),a&&c.jsx(Nl,{id:i,children:c.jsxs(ge.div,{ref:v.setFloating,style:{position:E,top:`${y}px`,[k?"insetInlineEnd":"insetInlineStart"]:`${b}px`,boxShadow:B==="dark"?"0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset":void 0},...U,...P({}),className:de("flex rounded-2xl p-4 shadow-xl",lt.coachmark,Cee,u&&"!overflow-visible",s),onClick:p,children:[n,u?c.jsx(sre,{ref:C,context:x,tipRadius:3,strokeWidth:2,className:d}):null]})})]})}function O2e(e,t){switch(e){case"bounce":return D2e(t);case"none":return{};default:return{}}}function D2e(e){const n=e.startsWith("top")||e.startsWith("bottom"),s=e.startsWith("top")||e.startsWith("left")?-1:1;return n?{animate:{y:`${s*10}px`,transition:h6}}:{animate:{x:`${s*10}px`,transition:h6}}}const j2e=10;function F2e(e){const{triggerComponent:t,offset:n=j2e,onInsideEvent:s}=e,{t:o}=Y(),{alreadyShown:r,dismissCoachmark:a}=Zo(VM);return hs(i=>{(i.key==="Escape"||i.key==="Control")&&(i.stopPropagation(),a())}),c.jsx(Mm,{className:"max-w-48 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:!r,placement:"top",offset:n,withArrow:!0,renderReferenceElement:i=>c.jsx(ge.div,{ref:i.ref,className:"relative",children:t}),portalId:"composer-container",onInsideEvent:()=>{s==null||s(),a()},children:c.jsx("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:c.jsx("div",{className:"text-xs",children:o("settings.appearanceSettingCoachmarkText")})})})}const U2e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/settings-cwFubbTV.svg",B2e=10;function V2e(e){const{triggerComponent:t,offset:n=B2e,onInsideEvent:s,placement:o}=e,{t:r}=Y(),{alreadyShown:a,dismissCoachmark:i}=Zo(N2e),u=se(rfe);return l.useEffect(()=>(u(!0),()=>{u(!1)}),[u]),hs(d=>{(d.key==="Escape"||d.key==="Control")&&(d.stopPropagation(),i())}),c.jsx(Mm,{className:"max-w-52 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:!a,placement:o,offset:n,withArrow:!0,renderReferenceElement:d=>c.jsx(ge.div,{ref:d.ref,className:"relative",children:t}),portalId:"appearance-voice-customization",onInsideEvent:()=>{s==null||s(),i()},children:c.jsxs("div",{className:"flex max-w-52 flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:[c.jsx("span",{className:"text-center text-xs",children:r("settings.appearanceVoiceCustomizationCoachmarkTitle")}),c.jsx("span",{className:"text-center text-xs",children:r("settings.appearanceVoiceCustomizationCoachmarkText")})]})})}const x8=3e3,H2e=4,z2e=28;function G2e(e){const{expandedSection:t,settingsIconClassName:n,dismissCallButton:s,onAudioSettingsClick:o,DismissAudioSettings:r,audioInputProps:a}=e,{t:i}=Y(),[u,d]=l.useState(!1),m=M2e({isInputMuted:a.isInputMuted}),f=UM();l.useEffect(()=>{const y=setTimeout(()=>{d(f)},x8);return()=>clearTimeout(y)},[f]);const p=L2e(),[g,C]=l.useState(!1);l.useEffect(()=>{const y=setTimeout(()=>{C(p)},x8);return()=>clearTimeout(y)},[p]);const v=c.jsx(Hs,{className:"start-0",data:{title:i("composer.voiceSettings"),isVisible:!0,onClick:o},children:c.jsx(yt,{url:U2e,className:n,"aria-hidden":!0})}),b=c.jsx(A2e,{className:a.className,inputVolume:a.inputVolume,status:m,isOutputPlaying:a.isOutputPlaying,coachUserUnmute:a.coachUserUnmute,onClick:a.onInputClick});return c.jsx(ge.div,{className:F(t!=="audioSettings"&&"flex"),children:t==="audioSettings"?c.jsx(Hs,{className:"end-0",data:r,children:r.icon}):c.jsxs(c.Fragment,{children:[s,g?c.jsx(V2e,{triggerComponent:b,offset:z2e,placement:"top"}):b,c.jsx(Of,{children:u?c.jsx(F2e,{"aria-label":i("settings.appearanceSettingCoachmarkText"),triggerComponent:v,offset:H2e}):v})]})})}class zM{constructor(){O(this,"audioContext");O(this,"audioAnalyser")}get isInitialized(){return this.audioContext!==void 0&&this.audioContext.state!=="closed"}async initialize({sampleRate:t}){this.audioContext&&await this.cleanup();try{this.audioContext=new AudioContext({sampleRate:t}),this.audioAnalyser=this.audioContext.createAnalyser()}catch(n){const s=n instanceof Error?n.message:String(n);throw new Error(`Failed to initialize audio context: ${s}`)}}async cleanup(){if(this.audioContext&&this.audioContext.state!=="closed")try{await this.audioContext.close()}catch(t){t instanceof DOMException&&t.name==="InvalidStateError"||Yt({feature:"AudioContextManager",scenario:"cleanup",errorType:"AudioContextCloseError",errorMessage:t instanceof Error?t.message:String(t)})}this.audioContext=void 0,this.audioAnalyser=void 0}}function ske(e){}class W2e{constructor(){O(this,"ENERGY_THRESHOLD_MULTIPLIER",3);O(this,"SILENCE_DURATION",500);O(this,"MIN_SPEECH_DURATION",300);O(this,"ZERO_CROSSING_MIN",.01);O(this,"ZERO_CROSSING_MAX",.5);O(this,"MAX_VALID_LATENCY_MS",2e3);O(this,"AUDIO_SAMPLE_OFFSET",128);O(this,"audioAnalyser");O(this,"voiceDetectionRaf",-1);O(this,"voiceDetectionActive",!1);O(this,"energyHistory",[]);O(this,"noiseFloor",.01);O(this,"isSpeaking",!1);O(this,"silenceStartTime",0);O(this,"lastVoiceDetectionTime",0);O(this,"lastClientSideVoiceEndTime",null);O(this,"serverVADLatencyMeasurements",[]);O(this,"onClientSideVoiceStartDetected");O(this,"onClientSideVoiceEndDetected")}startVoiceDetection(t){this.voiceDetectionActive&&this.stopVoiceDetection(),!(typeof window>"u")&&(this.audioAnalyser=t,this.voiceDetectionActive=!0,this.energyHistory=[],this.noiseFloor=.01,this.isSpeaking=!1,this.silenceStartTime=0,this.lastVoiceDetectionTime=Date.now(),this.lastClientSideVoiceEndTime=null,this.serverVADLatencyMeasurements=[],this.performVoiceDetection())}stopVoiceDetection(){this.voiceDetectionRaf!==-1&&(cancelAnimationFrame(this.voiceDetectionRaf),this.voiceDetectionRaf=-1),this.voiceDetectionActive=!1,this.audioAnalyser=void 0,this.displayServerVADLatencyStatistics()}setOnClientSideVoiceStartDetected(t){this.onClientSideVoiceStartDetected=t}setOnClientSideVoiceEndDetected(t){this.onClientSideVoiceEndDetected=t}getLastClientVoiceEndTime(){return this.lastClientSideVoiceEndTime?this.lastClientSideVoiceEndTime-this.SILENCE_DURATION:null}onServerSpeechEndDetected(){if(`${this.lastClientSideVoiceEndTime}`,`${this.voiceDetectionActive}${this.isSpeaking}`,!this.lastClientSideVoiceEndTime)return null;const t=Date.now(),n=this.lastClientSideVoiceEndTime-this.SILENCE_DURATION,s=t-n;return`${t}${this.lastClientSideVoiceEndTime}${n}${s}`,s>=0&&s<=this.MAX_VALID_LATENCY_MS?(this.serverVADLatencyMeasurements.push(s),s):null}getLastServerVADLatency(){return this.serverVADLatencyMeasurements[this.serverVADLatencyMeasurements.length-1]??null}performVoiceDetection(){var t,n;if(!this.voiceDetectionActive||!this.audioAnalyser){`${this.voiceDetectionActive}`,this.audioAnalyser;return}try{const s=this.audioAnalyser.frequencyBinCount,o=new Uint8Array(s);this.audioAnalyser.getByteTimeDomainData(o);const r=new Float32Array(s);for(let u=0;u<s;u+=1){const d=o[u];d!==void 0&&(r[u]=(d-this.AUDIO_SAMPLE_OFFSET)/this.AUDIO_SAMPLE_OFFSET)}const a=this.advancedVoiceDetection(r),i=Date.now();a?(this.isSpeaking||i-this.lastVoiceDetectionTime>this.MIN_SPEECH_DURATION&&(this.isSpeaking=!0,(t=this.onClientSideVoiceStartDetected)==null||t.call(this)),this.silenceStartTime=0,this.lastVoiceDetectionTime=i):this.isSpeaking&&(this.silenceStartTime===0?this.silenceStartTime=i:i-this.silenceStartTime>this.SILENCE_DURATION&&(this.isSpeaking=!1,this.lastClientSideVoiceEndTime=i,(n=this.onClientSideVoiceEndDetected)==null||n.call(this)))}catch{}this.voiceDetectionRaf=requestAnimationFrame(()=>{this.performVoiceDetection()})}advancedVoiceDetection(t){let n=0,s=0;for(let m=0;m<t.length;m+=1){const f=t[m];if(f!==void 0&&(n+=f*f,m>0)){const p=t[m-1];p!==void 0&&p>=0!=f>=0&&(s+=1)}}n=Math.sqrt(n/t.length);const o=s/t.length;if(this.energyHistory.push(n),this.energyHistory.length>100){this.energyHistory.shift();const m=[...this.energyHistory].sort((p,g)=>p-g),f=m[Math.floor(m.length*.1)];f!==void 0&&(this.noiseFloor=f)}const r=this.noiseFloor*this.ENERGY_THRESHOLD_MULTIPLIER,i=n-this.noiseFloor>r,u=o>this.ZERO_CROSSING_MIN&&o<this.ZERO_CROSSING_MAX;return i&&u}displayServerVADLatencyStatistics(){if(this.serverVADLatencyMeasurements.length===0)return;const t=this.serverVADLatencyMeasurements,n=t.length,s=t.reduce((o,r)=>o+r,0)/n;[...t].sort((o,r)=>o-r),Math.min(...t),Math.max(...t),`${s.toFixed(1)}`,`${t.join(", ")}`}}const x5=24e3,jp=24e3,$2e=1;function q2e(e){const t=atob(e),n=t.length,s=new Uint8Array(n);for(let o=0;o<n;o+=1)s[o]=t.charCodeAt(o);return s.buffer}function Z2e(e){let t="";const n=new Uint8Array(e),s=n.byteLength;for(let o=0;o<s;o+=1){const r=n[o];typeof r=="number"&&(t+=String.fromCharCode(r))}return btoa(t)}function GM(e){const t=q2e(e),n=new Int16Array(t),s=new Float32Array(n.length);for(let o=0;o<n.length;o+=1)s[o]=n[o]/32768;return s}function K2e(e){const t=e<0?e*32768:e*32767;return Math.max(-32768,Math.min(32767,t))}function Y2e(e){let t=0;for(const n of e){const s=n-128;t+=s*s}return Math.sqrt(t/e.length)}function WM(e){return e/Od}function oke(e){return`${WM(e)}x`}function rke(e,t){const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function ake(e){const t=Math.floor(e/60),n=e%60;return`${t}:${n.toString().padStart(2,"0")}`}function S8(e,t){We.emit(`voice:audio-${t}-volume-changed`,e)}function Q2e(e,t,n){if(t===n)return e;const s=e.length,o=t/n,r=Math.ceil(s/o),a=new Float32Array(r);for(let i=0;i<r;i+=1){const u=i*o,d=Math.floor(u),m=d+1,f=e[d]??0,p=e[m]??0,g=u-d;a[i]=f*(1-g)+p*g}return a}class $M{constructor(t){O(this,"mode");O(this,"volumeUpdateRaf",-1);O(this,"audioAnalyser");O(this,"volume",Ac(0));this.mode=t}startTracking(t){this.audioAnalyser&&this.stopTracking(),this.audioAnalyser=t,this.trackVolume()}trackVolume(){if(!this.audioAnalyser){this.stopTracking();return}const t=new Uint8Array(this.audioAnalyser.frequencyBinCount);this.audioAnalyser.getByteTimeDomainData(t);const n=Y2e(t);Math.abs(n-this.volume.get())>$2e&&(this.volume.set(n),S8(n,this.mode)),this.volumeUpdateRaf=requestAnimationFrame(()=>{this.trackVolume()})}stopTracking(){this.volumeUpdateRaf!==-1&&(cancelAnimationFrame(this.volumeUpdateRaf),this.volumeUpdateRaf=-1),this.audioAnalyser=void 0,this.volume.set(0),S8(0,this.mode)}}const J2e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/call_ending-BxIIadI4.mp3",X2e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/call_opening-CKuCznU5.mp3";function e5e(){const e=Co(),t=H("use-appearance-component-package"),n=ZC(["study-mode-lumi","study-mode-summary"],"any"),s=H("tv-new-lumi");return t||e==="study"&&n||s}function t5e(){return md(["use-appearance-component-package","tv-new-lumi"],"any")||yo()==="study"&&md(["study-mode-lumi","study-mode-summary"],"any")}class n5e{constructor(t={}){O(this,"options");O(this,"antiAliasFilter");this.options={windowSize:t.windowSize??1024,overlap:t.overlap??.7,tolerance:t.tolerance??200,useAntiAlias:t.useAntiAlias??!0,correlationWindowMultiplier:t.correlationWindowMultiplier??1.5,useSampleRateAwareScaling:t.useSampleRateAwareScaling??!1,useFirstFrameCompensation:t.useFirstFrameCompensation??!0},this.options.useAntiAlias&&this.initAntiAliasFilter()}initAntiAliasFilter(){this.antiAliasFilter=new Float32Array([.03,.09,.2,.36,.2,.09,.03])}getSampleRateScaling(t){if(!this.options.useSampleRateAwareScaling||!t)return 1;const s=t/24e3;return Math.max(.5,Math.min(2,s))}process(t,n=1,s){const o=this.getSampleRateScaling(s),{tolerance:r}=this.options;let{windowSize:a}=this.options;const{overlap:i}=this.options,{useAntiAlias:u}=this.options;if(this.options.useSampleRateAwareScaling&&o!==1&&(a=Math.round(a*o),a=Math.max(256,Math.min(4096,a))),Math.abs(n-1)<.001)return t;const d=u?this.applyAntiAliasFilter(t):t,m=Math.round(a*(1-i)),f=Math.round(m*n),p=Math.ceil(d.length/n),g=new Float32Array(p),C=this.createImprovedWindow(a),v=Math.min(a,d.length,p);this.overlapAddFrameEnhanced(d,0,g,0,C,v);let b=0,y=0;for(;b<p-a&&!(y>=d.length-a-r);){const E=this.findBestMatchEnhanced(d,y,g,b,a,r);this.overlapAddFrameEnhanced(d,E,g,b,C,a),b+=m,y+=f}return g}applyAntiAliasFilter(t){if(!this.antiAliasFilter||this.antiAliasFilter.length===0)return t;const n=new Float32Array(t.length),s=this.antiAliasFilter.length,o=Math.floor(s/2);for(let r=0;r<t.length;r+=1){let a=0;for(let i=0;i<s;i+=1){const u=r-o+i;u>=0&&u<t.length&&(a+=(t[u]??0)*(this.antiAliasFilter[i]??0))}n[r]=a}return n}createImprovedWindow(t){const n=new Float32Array(t);for(let s=0;s<t;s+=1){const o=2*Math.PI*s/(t-1),r=.5*(1-Math.cos(o)),a=.04*Math.cos(2*o);n[s]=r-a}return n}setOptions(t){this.options={...this.options,...t}}overlapAddFrameEnhanced(t,n,s,o,r,a){const i=Math.min(o+a,s.length),u=Math.min(a,t.length-n,i-o),d=o===0,m=this.options.useFirstFrameCompensation??!0;let f=1;if(d&&m){const{windowSize:p,overlap:g}=this.options;p>=1700&&g>=.8?f=1.5:p>=1400&&g>=.75?f=1.15:p>=1200&&g>=.7?f=1.25:f=1.2}for(let p=0;p<u;p+=1){const g=t[n+p]??0,C=r[p]??0,v=o+p;let b=1;o>0&&p<a*.1&&(b=p/(a*.1));let y=1;if(d&&m){const E=Math.max(.1,1-p/a*.9);y=1+(f-1)*E}typeof s[v]=="number"&&(s[v]+=g*C*b*y)}}findOptimalStartPosition(t,n,s,o){const r=Math.min(o,s/4),a=Math.max(0,n-r),i=Math.min(t.length-s,n+r);let u=n,d=-1/0;for(let m=a;m<=i;m+=1){let f=0,p=0,g=0,C=0;const v=Math.min(s,512);for(let A=0;A<v;A+=1)if(m+A<t.length){const k=t[m+A]??0;f+=k*k,p+=Math.abs(k),A>0&&C*k<0&&(g+=1),C=k}const b=Math.sqrt(f/v),y=p/v,E=y>0?b/y:0,x=b*.6,I=E*.3,_=g>0?Math.min(1,10/g)*.1:0,T=x+I+_;T>d&&(d=T,u=m)}return u}findBestMatchEnhanced(t,n,s,o,r,a){if(o===0)return this.findOptimalStartPosition(t,n,r,a);const i=Math.max(0,n-a),u=Math.min(t.length-r,n+a),d=Math.floor(r*(this.options.correlationWindowMultiplier??1.5)),m=Math.min(d,r),f=new Float32Array(m),p=Math.max(0,o-m);let g=0,C=0,v=0;for(let E=0;E<m;E+=1){const x=p+E;if(x<s.length){f[E]=s[x]??0;const I=f[E]??0;g+=I*I,E>0&&v*I<0&&(C+=1),v=I}}let b=n,y=-1/0;for(let E=i;E<=u;E+=1){let x=0,I=0,_=0,T=0;for(let U=0;U<m;U+=1)if(E+U<t.length&&p+U<s.length){const $=t[E+U]??0;x+=(f[U]??0)*$,I+=$*$,U>0&&T*$<0&&(_+=1),T=$}const A=g>0&&I>0?x/Math.sqrt(g*I):0,k=Math.abs(_-C),R=Math.max(_,C),P=R>0?1-k/R:1,B=A*.8+P*.2;B>y&&(y=B,b=E)}return b}}const s5e={windowSize:2048,overlap:.5,tolerance:128,useAntiAlias:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0},o5e={windowSize:1792,overlap:.5,tolerance:300,useAntiAlias:!0,correlationWindowMultiplier:1.8,useFirstFrameCompensation:!0},r5e={windowSize:1280,overlap:.65,tolerance:280,useAntiAlias:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0},a5e={windowSize:1536,overlap:.75,tolerance:300,useAntiAlias:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0};function i5e(e){switch(e){case 1.5:return a5e;case 1.25:return r5e;case 1.1:return o5e;case .8:return s5e;case 1:default:return}}const E8=new n5e;function c5e(e,t,n){const s=i5e(t);return s?(E8.setOptions(s),E8.process(e,t,n)):e}function S5(){return/firefox/i.test(navigator.userAgent)}function qM(e,t,n=1){const s=typeof e=="string"?GM(e):e;let o=s;n!==1&&(o=c5e(s,n,jp));const r=t.createBuffer(1,o.length,jp);r.getChannelData(0).set(o);const a=t.createBufferSource();return a.buffer=r,a}async function l5e(e,t,n,s,o){const r=s&&await s();let a=8192;ye("audio-buffer-size-4096")?a=4096:ye("audio-buffer-size-2048")&&(a=2048);const i=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0,autoGainControl:!0,sampleRate:S5()?void 0:x5,...r}}),u=i.getAudioTracks()[0];u&&(u.onended=f=>{o==null||o(f)});const d=t.createMediaStreamSource(i),m=t.createScriptProcessor(a,1,1);return d.connect(n),n.connect(m),m.connect(t.destination),m.onaudioprocess=f=>{let p=f.inputBuffer.getChannelData(0);S5()&&(p=Q2e(p,t.sampleRate,x5));const g=new Int16Array(p.length);for(let v=0;v<p.length;v+=1){const b=p[v];typeof b=="number"&&(g[v]=K2e(b))}const C=Z2e(g.buffer);e(C)},i}async function w8(e,t){const n=await Promise.race([Jd(t),new Promise(s=>{try{const o=new Audio(e);o.addEventListener("ended",()=>s(o),{once:!0}),o.play()}catch{}})]);n==null||n.remove()}function u5e(e,t){switch(t){case"time-expired":return{title:e("voice.v2.timeExpiredProHeading"),subtitle:e("voice.v2.timeExpiredProSubheading")};case"throttled":return{title:e("voice.v2.throttledHeadingV2"),subtitle:e("voice.v2.throttledSubheadingV2")};case"error":default:return{title:e("voice.v2.errorHeading"),subtitle:e("voice.v2.errorSubheading")}}}function d5e(e){if(!e)return!0;switch(e.type){case"server-terminated":return!["time-expired","throttled","inactivity"].includes(e.reason);default:return!0}}const m5e=jp*2;class f5e{constructor(){O(this,"audioBuffer",[]);O(this,"totalBufferSize",0);O(this,"lastProcessOptions",null)}addAudioData(t){if(!t)return!1;const n=GM(t),s=n.length;return s===0?!1:(this.audioBuffer.push({audioData:n,bufferSize:s}),this.totalBufferSize+=s,this.totalBufferSize>=m5e)}getLastProcessOptions(){return this.lastProcessOptions}setLastProcessOptions(t){this.lastProcessOptions=t}mergeAudioChunks(){const t=new Float32Array(this.totalBufferSize);let n=0;for(const s of this.audioBuffer){const{audioData:o}=s;t.set(o,n),n+=o.length}return t}getAudioData(){if(this.audioBuffer.length===0)return null;if(this.audioBuffer.length===1){const t=this.audioBuffer[0];return t?t.audioData:null}return this.mergeAudioChunks()}clearBuffer(){this.audioBuffer=[],this.totalBufferSize=0}}function p5e(e,t,n){t.setLastProcessOptions(e),t.addAudioData(e.data)&&ZM(t,n)}function h5e(e,t){ZM(e,t)}function ZM(e,t){const n=e.getAudioData(),s=e.getLastProcessOptions();!n||!s||(t(qM(n,s.audioContext,s.playbackRate)),e.clearBuffer())}const ike={lmks_rest:"lmksRest",frames:"frames",expr:"expr",neck_pose:"neckPose",jaw_pose:"jawPose",eyes_pose:"eyesPose",eyes_open_ratio:"eyesOpenRatio",rotation:"rotation",translation:"translation",lmks:"lmks"};class g5e{constructor(t,n){O(this,"lmksRest");O(this,"frames");this.lmksRest=t,this.frames=n}}class v5e{constructor(t,n){O(this,"exp");O(this,"pose");this.exp=t,this.pose=n}isValid(){return this.exp.dtype!==""&&this.exp.data.length>0||this.pose.dtype!==""&&this.pose.data.length>0}}const{EPSILON:E5}=Number,C5e=["Viseme_Neutral","Viseme_AI","Viseme_E","Viseme_U","Viseme_CDG","Viseme_WQ","Viseme_O","Viseme_L","Viseme_ShCh","Viseme_FV","Viseme_MBP"],y5e=[0,1,1,6,2,3,4,5,6,1,6,1,2,5,7,4,8,7,9,4,4,10],Qr={enablePose:!1,enableNeck:!1,enableEye:!1,enableEyebrow:!1};function cke(e){Qr.enablePose=e,Qr.enableNeck=e,Qr.enableEye=e,Qr.enableEyebrow=e}function b5e(e,t=null){const{Quaternion:n,Vector3:s}=Zs.getCore(),o=.3,r=.5,a=30/360*Math.PI,i=1,u=.01,d=["eye_BlinkUp","eye_Squint","eye_RSquare"],m=[.5,.2,.2],f=.5,p=.3,g=n.RotationAxis(s.Right(),Math.PI/4),C=g.conjugate(),v=new s(i,i,i),b=new s(-1,-1,-1),y={pose:{translation:new s(0,0,0),rotation:n.Identity()},expression:{eyes_open_ratio:0,eye_BlinkUp:0,eye_Squint:0,eye_RSquare:0,eyebrow_value:0,eyebrow_height:0,eyebrow_bend:0,viseme:new Array(11).fill(0),viseme22_idx:0,viseme11_idx:0},offset:e.offset??null};if(Qr.enablePose){let x=I8(e.rotation);if(Qr.enableNeck){const A=I8(e.neckPose);x.multiplyInPlace(A)}x=g.multiplyToRef(x,x).multiplyToRef(C,x);let[I,_]=S5e(x);_>a&&(_=a),y.pose.rotation=n.RotationAxis(I,_);const T=s.FromArray(e.translation);s.ClampToRef(T,b,v,T),y.pose.translation=T}const E=e.eyesOpenRatio[0]??0;if(y.expression.eyes_open_ratio=E,Qr.enableEye&&t!==null){let x=0,I=0,_=0;if(t.expression.eye_BlinkUp>0)E<.9&&(x=1,I=0,_=0);else if(t.expression.eye_Squint>0)E<.9&&(x=0,I=f,_=0);else if(t.expression.eye_RSquare>0)E>1.1&&(x=0,I=0,_=p);else{const T=t.expression.eyes_open_ratio;E<.75&&T<.8?(x=1,I=0,_=0):E<.8&&T<.85?(x=0,I=f,_=0):E>1.1&&(x=0,I=0,_=p)}y.expression.eye_BlinkUp=x,y.expression.eye_Squint=I,y.expression.eye_RSquare=_}if(Qr.enableEyebrow){const x=e.viseme.slice(1,4);y.expression.eyebrow_value=e.viseme[2]??0,y.expression.eyebrow_height=jx(((x[1]??0)-0)*2)*u,y.expression.eyebrow_bend=jx((0-(x[1]??0))*3)}{const x=Math.round(e.viseme[0]??0),I=y5e[x]??0;y.expression.viseme[I]=1,t!==null&&t.expression.viseme22_idx!==x&&(y.expression.viseme[I]=.9),y.expression.viseme22_idx=x,y.expression.viseme11_idx=I}if(t!==null){for(const[k,R]of d.entries()){const P=m[k]??0;y.expression[R]=_8(t.expression[R],y.expression[R],0,P)}const x=y.expression.viseme,I=t.expression.viseme;if((x[10]??0)<1e-6)for(let k=0;k<C5e.length;k+=1)x[k]=_8(I[k]??0,x[k]??0,0,o);const T=y.pose.translation,A=t.pose.translation;y.pose.translation=new s(T.x*r+A.x*(1-r),T.y*r+A.y*(1-r),T.z*r+A.z*(1-r))}return y}function x5e(e){const{TmpVectors:t,Vector3:n}=Zs.getCore(),s=t.Vector3[0];s.fromArray(e);const o=s.length();return o<E5?[n.Up(),0]:[s.scale(1/o),o]}function I8(e){const{Quaternion:t}=Zs.getCore(),[n,s]=x5e(e);return t.RotationAxis(n,s)}function S5e(e){const{Vector3:t}=Zs.getCore(),n=e.lengthSquared();Math.abs(n-1)>E5&&e.normalize();const s=Math.acos(e.w),o=s*2,r=Math.sin(s),a=Math.abs(r)<5e-4?1:r,i=new t(e.x/a,e.y/a,e.z/a);return i.lengthSquared()<E5&&(i.y=1),[i,o]}function _8(e,t,n,s){return Math.abs(t-e)<n?e:e<t?Math.min(e+s,t):Math.max(e-s,t)}function E5e(e,t,n){const{Vector3:s,Quaternion:o}=Zs.getCore(),{Lerp:r}=Zs.getMath();return{pose:{translation:s.Lerp(e.pose.translation,t.pose.translation,n),rotation:o.Slerp(e.pose.rotation,t.pose.rotation,n)},expression:{eyes_open_ratio:0,eye_BlinkUp:r(e.expression.eye_BlinkUp,t.expression.eye_BlinkUp,n),eye_Squint:r(e.expression.eye_Squint,t.expression.eye_Squint,n),eye_RSquare:r(e.expression.eye_RSquare,t.expression.eye_RSquare,n),eyebrow_value:0,eyebrow_height:r(e.expression.eyebrow_height,t.expression.eyebrow_height,n),eyebrow_bend:r(e.expression.eyebrow_bend,t.expression.eyebrow_bend,n),viseme:new Array(11).fill(0).map((i,u)=>r(e.expression.viseme[u]??0,t.expression.viseme[u]??0,n)),viseme22_idx:0,viseme11_idx:0}}}const w5e=3.141592653589793,T8="System.Single, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089";function I5e(e){const t=[],n=[],s=(i,u)=>{if(u>=i.length)throw new Error("index out of range");return i[u]===void 0?0:i[u]};for(const{frame:i,offset:u}of e){if(i.length<97)return console.log("Invalid frame length"),null;const d=new Array(28).fill(0);d[12]=s(i,78),d[16]=s(i,43),d[17]=s(i,43),d[21]=s(i,72),d[23]=.5*s(i,52)+.5*s(i,53),d[24]=.75*s(i,76),d[26]=.75*s(i,76),t.push({exp:d,offset:u});const m=[[-1*s(i,88)+w5e,-1*s(i,89),s(i,90)],[0,s(i,92),-1*s(i,91)],[0,s(i,95),-1*s(i,94)]];n.push(m)}const o={dtype:T8,shape:[t.length,16],data:t,isColumnMajor:!1},r={dtype:T8,shape:[n.length,3,3],data:n,isColumnMajor:!1};return new v5e(o,r)}class _5e{constructor(t){O(this,"activeModel",null);O(this,"a2eAnimationData",null);O(this,"vasaAnimationData",null);O(this,"vasaExpFrames",[]);O(this,"frameOffsetTimeAvailable",!1);O(this,"currentFrameIndex",0);this.getPlayTime=t}get fps(){return this.activeModel==="spda2e"?IK:this.activeModel==="vasa"?_K:25}get frameCount(){return this.activeModel==="spda2e"&&this.a2eAnimationData?this.a2eAnimationData.exp.data.length:this.activeModel==="vasa"&&this.vasaAnimationData?this.vasaAnimationData.frames.length:0}get playbackTime(){return this.getPlayTime()}reset(){this.activeModel=null,this.a2eAnimationData=null,this.vasaAnimationData=null,this.vasaExpFrames=[],this.frameOffsetTimeAvailable=!1,this.currentFrameIndex=0}setFrameData({frame:t,offsetInMilliseconds:n}){t&&(this.activeModel=t.model,t.model==="spda2e"&&this.setA2EFrame(t.poseDiffusion,n),t.model==="vasa"&&this.setVasaFrameData(t,n))}setA2EFrame(t,n){if(!(t!=null&&t.length))return;const s=I5e([{frame:t,offset:n}]);if(s){if(!this.a2eAnimationData){this.a2eAnimationData=s;return}this.a2eAnimationData.exp.data.push(...s.exp.data),this.a2eAnimationData.pose.data.push(...s.pose.data),this.frameOffsetTimeAvailable=this.a2eAnimationData.exp.data.every(({offset:o})=>!Number.isNaN(o))}}setVasaFrameData(t,n){if(!t)return;const s={...t,offset:n};if(!this.vasaAnimationData){this.vasaAnimationData=new g5e([],[s]);return}this.vasaExpFrames.push(b5e(s,this.vasaExpFrames.at(-1))),this.vasaAnimationData.frames.push(s),this.frameOffsetTimeAvailable=this.vasaAnimationData.frames.every(({offset:o})=>!Number.isNaN(o))}getCurrentFrameIndex(t){if(this.frameOffsetTimeAvailable){let n=this.currentFrameIndex;for(;n<t.length;n+=1){this.currentFrameIndex=n;const s=t[n];if((s==null?void 0:s.offset)!==void 0&&s.offset!==null&&s.offset/1e3>=this.playbackTime)break}return n}return Math.round(this.playbackTime/(1/this.fps))}getCurrentA2EFrame(){if(!this.a2eAnimationData)return null;const t=this.a2eAnimationData.exp.data;return this.currentFrameIndex=this.getCurrentFrameIndex(t),t[this.currentFrameIndex]??null}getCurrentVasaFrame(){if(!this.vasaAnimationData)return null;const{frames:t,lmksRest:n}=this.vasaAnimationData;this.currentFrameIndex=this.getCurrentFrameIndex(t);const s=t[this.currentFrameIndex];return s?{frame:s,lmksRest:n}:null}getCurrentVasaExpFrame(){if(!this.vasaAnimationData)return null;this.currentFrameIndex=this.getCurrentFrameIndex(this.vasaExpFrames);const t=this.vasaExpFrames[this.currentFrameIndex-1],n=this.vasaExpFrames[this.currentFrameIndex];if(t&&n&&this.playbackTime<(n.offset??1/0)/1e3){const s=this.playbackTime-(t.offset??0)/1e3;return E5e(t,n,s)}return n??null}}const A8={SUMMARY:"summary",ADAPTIVE_UI:"adaptiveUI"};var ii;let KM=(ii=class{constructor(){O(this,"readyTime",0);O(this,"startCallTime",0);O(this,"startMessageTime",0);O(this,"firstTokenTime",0);O(this,"mostRecentTokenTime",0);O(this,"interruptAudioTime",0);O(this,"speechEndTime",0);O(this,"currentConversationId","");O(this,"currentCallId","");O(this,"currentMessageId","");O(this,"serverTurnCounter",1);O(this,"latestTurnDetails",null);O(this,"messagesTurnDetails",{});O(this,"introComplete",!1);O(this,"isTurnRunning",!1);O(this,"receivedTranscript",!1);O(this,"receivedText",!1);O(this,"receivedAudio",!1);O(this,"receivedFirstToken",!1);O(this,"receivedLastToken",!1);O(this,"receivedFirstAnimation",!1);O(this,"hasAnimationTimeout",!1);O(this,"hasAnimationMissedInCache",!1);O(this,"hasAudioStarted",!1);O(this,"hasAudioMissedInCache",!1);O(this,"hasAudioPlaybackError",!1);O(this,"scenario");O(this,"messageStatus","idle");O(this,"audioTranscriptLength",0);O(this,"isFirstStartVoiceCallLogged",!1)}static getInstance(){return this.instance||(this.instance=new ii),this.instance}onBeforeStartCall(t,n){this.readyTime=performance.now(),n?this.scenario="portrait":t?this.scenario="appearance":this.scenario=void 0}onStartCall(t,n){this.interruptAudioTime=0,this.speechEndTime=0,this.introComplete=!1,this.serverTurnCounter=1,this.startCallTime=performance.now(),this.currentConversationId=t,this.currentCallId=crypto.randomUUID(),this.messageStatus="idle",this.latestTurnDetails=null,this.messagesTurnDetails={},this.audioTranscriptLength=0,D.trackEvent({name:"interaction",data:{eventName:"copilotCompose",eventInfo_conversationId:this.currentConversationId,eventInfo_inputMethod:"voice",eventInfo_landingPage:D.getLandingPage(),eventInfo_scenario:this.scenario,eventInfo_mode:n}}),D.trackEvent({name:"interaction",data:{eventName:"audioStartSent",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:this.startCallTime-this.readyTime,eventInfo_scenario:this.scenario,eventInfo_mode:n}})}onStartMessage(t){var n,s;this.receivedTranscript=!1,this.receivedText=!1,this.receivedAudio=!1,this.receivedFirstToken=!1,this.receivedLastToken=!1,this.receivedFirstAnimation=!1,this.hasAnimationTimeout=!1,this.hasAnimationMissedInCache=!1,this.isTurnRunning=!0,this.hasAudioStarted=!1,this.hasAudioMissedInCache=!1,this.hasAudioPlaybackError=!1,this.currentMessageId=t,this.messagesTurnDetails[t]=this.latestTurnDetails,this.latestTurnDetails=null,this.startMessageTime=performance.now(),this.messageStatus="streaming",ml.onStartMessage(t,this.startMessageTime,this.serverTurnCounter),this.speechEndTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioReqtoResp",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.startMessageTime-this.speechEndTime,eventInfo_scenario:this.scenario,eventInfo_customData:JSON.stringify({turnId:(n=this.messagesTurnDetails[t])==null?void 0:n.turnId})}}),D.trackEvent({name:"system",data:{eventName:"copilotAudioStartMessage",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_scenario:this.scenario,eventInfo_firstTurn:!this.introComplete,eventInfo_customData:JSON.stringify({turnId:(s=this.messagesTurnDetails[t])==null?void 0:s.turnId})}})}onTranscriptReceived(t){this.receivedTranscript=!0,this.audioTranscriptLength=t}onTextReceived(t){t===this.currentMessageId&&(this.receivedText=!0)}onAudioInterrupt(t){this.interruptAudioTime=performance.now(),this.messageStatus==="streaming"&&(this.messageStatus="interrupted"),this.mostRecentTokenTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioInterrupt",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.interruptAudioTime-this.mostRecentTokenTime,eventInfo_scenario:this.scenario,eventInfo_mode:t}}),this.latestTurnDetails||(this.latestTurnDetails={turnId:crypto.randomUUID(),detectedBy:"server"}),this.latestTurnDetails.speechStartTime=this.interruptAudioTime,this.onTurnEnd()}onAudioReceived(t){if(this.receivedAudio=!0,!this.introComplete||!this.currentMessageId)return;this.mostRecentTokenTime=performance.now();const n=this.messagesTurnDetails[this.currentMessageId];this.receivedFirstToken||(this.receivedFirstToken=!0,this.firstTokenTime=this.mostRecentTokenTime,this.startMessageTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioResptoReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.mostRecentTokenTime-this.startMessageTime,eventInfo_scenario:this.scenario,eventInfo_mode:t,eventInfo_customData:JSON.stringify({turnId:n==null?void 0:n.turnId})}}),this.speechEndTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioFirstTokenReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.mostRecentTokenTime-this.speechEndTime,eventInfo_scenario:this.scenario,eventInfo_serverTurnCounter:this.serverTurnCounter,eventInfo_mode:t,eventInfo_customData:JSON.stringify({turnId:n==null?void 0:n.turnId})}}))}onClientSpeechStartDetected(){this.latestTurnDetails||(this.latestTurnDetails={turnId:crypto.randomUUID(),detectedBy:"client"});const{clientSpeechStartTime:t,clientTurnCounter:n,speechStartTime:s}=this.latestTurnDetails;this.latestTurnDetails.clientTurnCounter=t&&!s&&n?n+1:1,this.latestTurnDetails.clientSpeechStartTime=performance.now()}onClientSpeechEndDetected(t){if(this.latestTurnDetails&&this.latestTurnDetails.clientSpeechStartTime){const n=t-performance.timeOrigin;this.latestTurnDetails.clientSpeechEndTime=n,D.trackEvent({name:"system",data:{eventName:"copilotAudioClientInput",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:n-this.latestTurnDetails.clientSpeechStartTime,eventInfo_scenario:this.scenario,eventInfo_customData:JSON.stringify({turnId:this.latestTurnDetails.turnId,isServerVADStarted:!!this.latestTurnDetails.speechStartTime,clientTurnCounter:this.latestTurnDetails.clientTurnCounter})}})}}onSpeechEndDetected(t){var n;this.speechEndTime=performance.now(),this.serverTurnCounter+=1,this.latestTurnDetails&&(this.latestTurnDetails.speechEndTime=this.speechEndTime),ml.onSpeechEndDetected(this.speechEndTime),this.interruptAudioTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioInput",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:this.speechEndTime-this.interruptAudioTime,eventInfo_scenario:this.scenario,eventInfo_mode:t,eventInfo_customData:JSON.stringify({turnId:(n=this.latestTurnDetails)==null?void 0:n.turnId})}})}onServerVADLatencyMeasured(t){var n;D.trackEvent({name:"system",data:{eventName:"copilotAudioSpeechEndDetected",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:t,eventInfo_scenario:this.scenario,eventInfo_serverTurnCounter:this.serverTurnCounter,eventInfo_customData:JSON.stringify({turnId:(n=this.latestTurnDetails)==null?void 0:n.turnId})}})}onCallUIEventReceived(t){const n=performance.now(),s=this.speechEndTime?n-this.speechEndTime:void 0,o=t==="study"?A8.SUMMARY:A8.ADAPTIVE_UI;D.trackEvent({name:"system",data:{eventName:"callUIEventReceived",eventInfo_scenario:o,eventInfo_conversationId:this.currentConversationId,eventInfo_duration:s,eventInfo_mode:t}})}onCharacterAnimationReceived(){this.receivedFirstAnimation||(this.receivedFirstAnimation=!0,D.trackEvent({name:"system",data:{eventName:"copilotAudioCharacterAnimationReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_messageId:this.currentMessageId,eventInfo_callId:this.currentCallId,eventInfo_scenario:this.scenario,eventInfo_serverTurnCounter:this.serverTurnCounter}}))}onCharacterAnimationEnd(){D.trackEvent({name:"system",data:{eventName:"copilotAudioCharacterAnimationEnd",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_messageId:this.currentMessageId,eventInfo_callId:this.currentCallId,eventInfo_scenario:this.scenario}})}onCharacterAnimationTimeout(){this.hasAnimationTimeout=!0}onCharacterAnimationMissedInCache(){this.hasAnimationMissedInCache=!0}onCharacterEmotionReceived(t,n){D.trackEvent({name:"system",data:{eventName:"copilotCharacterEmotionReaction",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_emotion:t,eventInfo_bodyReaction:n}})}onCharacterAppearanceReceived(t){D.trackEvent({name:"system",data:{eventName:"copilotCharacterAppearanceEvent",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_customData:JSON.stringify(t)}})}onMessageDone(t){const{messageId:n,voiceType:s,audioChatMode:o}=t;let r={transcriptLength:this.audioTranscriptLength};this.messageStatus==="interrupted"&&(r.interruptedAtMs=this.interruptAudioTime-this.startMessageTime);const a=this.messagesTurnDetails[n];if(a){const{turnId:i,detectedBy:u,clientSpeechStartTime:d=0,clientSpeechEndTime:m=0,speechStartTime:f=0,speechEndTime:p=0}=a;r={...r,turnId:i,turnDetectedBy:u,clientSpeechDuration:m-d,clientSpeechStartAt:d-f,clientSpeechEndAt:m-f,timeToSpeechEnd:p-f,timeToStartMessage:this.startMessageTime-f,timeToFirstAudio:this.firstTokenTime-f,timeToLastAudio:this.mostRecentTokenTime-f,timeToDone:performance.now()-f}}if(D.trackEvent({name:"system",data:{eventName:"copilotAudioMessageDone",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:n,eventInfo_scenario:this.scenario,eventInfo_firstTurn:!this.introComplete,eventInfo_transcriptReceived:this.receivedTranscript,eventInfo_textReceived:this.receivedText,eventInfo_audioReceived:this.receivedAudio,eventInfo_customData:JSON.stringify(r)}}),this.messageStatus="idle",delete this.messagesTurnDetails[n],!this.introComplete){this.introComplete=!0,D.trackEvent({name:"system",data:{eventName:"copilotAudioCallSetUp",eventInfo_duration:performance.now()-this.readyTime,eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_responseVoiceType:s,eventInfo_scenario:this.scenario,eventInfo_mode:o}});return}!this.receivedLastToken&&n===this.currentMessageId&&(this.receivedLastToken=!0,this.speechEndTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioLastTokenReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:n,eventInfo_callId:this.currentCallId,eventInfo_duration:this.mostRecentTokenTime-this.speechEndTime,eventInfo_scenario:this.scenario,eventInfo_mode:o}}),D.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_inputMethod:"voice",eventInfo_responseMethod:"voice",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_responseVoiceType:s,eventInfo_landingPage:D.getLandingPage(),eventInfo_scenario:this.scenario,eventInfo_mode:o}}))}onEndCall(t,n){const s=performance.now()-this.startCallTime;this.onTurnEnd(),D.trackEvent({name:"system",data:{eventName:"copilotAudioCallEnd",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:s,eventInfo_numMessages:t,eventInfo_scenario:this.scenario,eventInfo_mode:n}}),this.currentCallId=""}onAudioStartFailed(t,n){D.trackEvent({name:"system",data:{eventName:"copilotAudioStartFailed",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:performance.now()-this.startCallTime,eventInfo_reason:t,reason:t,eventInfo_scenario:this.scenario,eventInfo_mode:n}})}onAudioStartTimeout(t){D.trackEvent({name:"system",data:{eventName:"copilotAudioStartTimeout",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:t,eventInfo_scenario:this.scenario}})}onTerminated(t,n){D.trackEvent({name:"system",data:{eventName:"copilotAudioTerminated",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:performance.now()-this.startCallTime,eventInfo_reason:t,reason:t,eventInfo_scenario:this.scenario,eventInfo_mode:n}})}onError(t,n){D.trackEvent({name:"system",data:{eventName:"copilotAudioError",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:performance.now()-this.startCallTime,eventInfo_errorCode:t,eventInfo_scenario:this.scenario,eventInfo_mode:n}})}onAudioStart(){if(!this.hasAudioStarted){this.hasAudioStarted=!0;const t=Math.round(performance.now()-(this.speechEndTime||this.startMessageTime));D.trackEvent({name:"system",data:{eventName:"copilotAudioStart",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:t,eventInfo_scenario:this.scenario,eventInfo_serverTurnCounter:this.serverTurnCounter}})}}onAudioEnd(){this.onTurnEnd()}onAudioSuspend(){this.hasAudioMissedInCache=!0}onAudioError(){this.hasAudioPlaybackError=!0}onTurnEnd(){this.isTurnRunning&&(this.isTurnRunning=!1,this.scenario==="appearance"&&D.trackEvent({name:"system",data:{eventName:"copilotAnimationSummary",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_scenario:this.scenario,eventInfo_audioReceived:this.receivedAudio,eventInfo_animationReceived:this.receivedFirstAnimation,eventInfo_timeout:this.hasAnimationTimeout,eventInfo_audioPlayed:this.hasAudioStarted,eventInfo_audioPlayError:this.hasAudioPlaybackError,eventInfo_animationMissedInCache:this.hasAnimationMissedInCache,eventInfo_audioMissedInCache:this.hasAudioMissedInCache}}))}trackStartVoiceCall(t,n,s){switch(t){case"start":this.isFirstStartVoiceCallLogged=!0,this.trackStartVoiceCallEvent(t);break;case"success":case"failed":this.isFirstStartVoiceCallLogged&&(this.trackStartVoiceCallEvent(t,n,s),this.isFirstStartVoiceCallLogged=!1);break;case"end":this.isFirstStartVoiceCallLogged=!1;break}}trackStartVoiceCallEvent(t,n,s){D.trackEvent({name:"system",data:{eventName:"copilotStartVoiceCall",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_scenario:this.scenario,eventInfo_errorCode:n,eventInfo_errorDescription:s,eventInfo_customData:JSON.stringify({isFirst:!0,isConnected:navigator.onLine,node:t})}})}},O(ii,"instance"),ii);const Hu=KM.getInstance();class T5e extends EventTarget{constructor(){super(...arguments);O(this,"audioContextManager",new zM);O(this,"volumeTracker",new $M("input"));O(this,"clientVADTracker",new W2e);O(this,"audioStream",null);O(this,"isMuted",!1)}get volume(){return this.volumeTracker.volume}get audioContext(){return this.audioContextManager.audioContext}startVoiceDetection(){if(!ye("enable-vad-latency-measure"))return;const n=this.audioContextManager.audioAnalyser;n&&this.clientVADTracker.startVoiceDetection(n)}stopVoiceDetection(){ye("enable-vad-latency-measure")&&this.clientVADTracker.stopVoiceDetection()}setOnClientSideVoiceStartDetected(n){ye("enable-vad-latency-measure")&&this.clientVADTracker.setOnClientSideVoiceStartDetected(n)}setOnClientSideVoiceEndDetected(n){ye("enable-vad-latency-measure")&&this.clientVADTracker.setOnClientSideVoiceEndDetected(n)}onServerSpeechEndDetected(){return ye("enable-vad-latency-measure")?this.clientVADTracker.onServerSpeechEndDetected():null}getLastClientVoiceEndTime(){return ye("enable-vad-latency-measure")?this.clientVADTracker.getLastClientVoiceEndTime():null}getLastServerVADLatency(){return ye("enable-vad-latency-measure")?this.clientVADTracker.getLastServerVADLatency():null}get isInputMuted(){return this.isMuted}set isInputMuted(n){this.toggleMute(n)}async startAudioCapture(n){this.audioContextManager.isInitialized&&this.stopAudioCapture();try{await this.audioContextManager.initialize({sampleRate:S5()?void 0:x5})}catch(i){throw this.dispatchEvent(new CustomEvent("error",{detail:i})),i}const s=()=>{this.stopAudioCapture(),this.dispatchEvent(new CustomEvent("audioTrackEnded"))},o=i=>{this.dispatchEvent(new CustomEvent("audioData",{detail:i}))},{audioContext:r,audioAnalyser:a}=this.audioContextManager;r&&a&&(this.audioStream=await l5e(o,r,a,n,s),this.isInputMuted&&this.toggleMute(!0),this.volumeTracker.startTracking(a),this.startVoiceDetection())}stopAudioCapture(){if(this.audioStream){for(const n of this.audioStream.getTracks())n.stop();this.audioStream=null}this.volumeTracker.stopTracking(),this.stopVoiceDetection(),this.audioContextManager.cleanup()}toggleMute(n=!this.isMuted){if(this.audioStream)for(const s of this.audioStream.getTracks())s.enabled=!n;this.isMuted!==n&&(this.isMuted=n,this.dispatchEvent(new CustomEvent("muteStateChanged",{detail:n})))}}class A5e extends EventTarget{constructor(){super(...arguments);O(this,"audioContextManager",new zM);O(this,"volumeTracker",new $M("output"));O(this,"outputGainNode",null);O(this,"outputSourceNodes",new Set);O(this,"audioDuration",0);O(this,"nextBufferTime",0);O(this,"audioOffset",0);O(this,"currentPlaybackRate",1);O(this,"bufferManager",new f5e);O(this,"startJinglePromise");O(this,"animationSyncPromise");O(this,"audioDelayPromise");O(this,"audioStarted",!1);O(this,"audioChunksLoadDone",!1)}get audioContext(){return this.audioContextManager.audioContext}get audioPlaying(){var n;return((n=this.audioContext)==null?void 0:n.state)==="running"}get audioEnded(){return this.audioChunksLoadDone&&this.outputSourceNodes.size===0}get playbackTime(){if(!this.audioContext||this.audioContext.state==="closed")return 1/0;const{currentTime:n,outputLatency:s}=this.audioContext;return(n-(s||0)-this.audioOffset)*this.currentPlaybackRate}get volume(){return this.volumeTracker.volume}async initialize(n=Od){var s;this.audioContextManager.isInitialized&&this.stopAudioPlayback(),this.currentPlaybackRate=WM(n);try{await this.audioContextManager.initialize({sampleRate:jp}),(s=this.audioContext)==null||s.suspend()}catch(o){throw this.dispatchEvent(new CustomEvent("error",{detail:o})),Hu.onAudioError(),o}this.audioDuration=0,this.nextBufferTime=0,this.audioOffset=0,this.audioStarted=!1,this.audioChunksLoadDone=!1,this.animationSyncPromise=void 0,this.setUpOutputVolumeTracking()}setUpOutputVolumeTracking(){const{audioContext:n,audioAnalyser:s}=this.audioContextManager;!n||!s||(this.outputGainNode=n.createGain(),this.outputGainNode.connect(s),s.connect(n.destination),this.volumeTracker.startTracking(s))}appendAudioData(n){if(!this.audioContext||!this.outputGainNode)return;const s={data:n,audioContext:this.audioContext,playbackRate:this.currentPlaybackRate};if(this.currentPlaybackRate!==1)p5e(s,this.bufferManager,this.appendAudioSource.bind(this));else{const o=qM(n,this.audioContext);this.appendAudioSource(o)}}appendAudioSource(n){var r;if(!this.audioContext||!this.outputGainNode||!n.buffer)return;this.outputSourceNodes.add(n),n.connect(this.outputGainNode),n.addEventListener("ended",()=>{var a;this.outputSourceNodes.delete(n),this.outputSourceNodes.size===0&&(this.audioChunksLoadDone?this.stopAudioPlayback():((a=this.audioContext)==null||a.suspend(),Hu.onAudioSuspend()))}),this.nextBufferTime<this.audioContext.currentTime&&(this.audioOffset+=this.audioContext.currentTime-this.nextBufferTime,this.nextBufferTime=this.audioContext.currentTime),n.start(this.nextBufferTime);const s=n.buffer.length/n.buffer.sampleRate;this.nextBufferTime+=s,this.audioDuration+=s;const{Animation:o}=gt;!this.audioStarted&&!this.animationSyncPromise&&(this.animationSyncPromise=(r=o.getAnimationSyncPromise())==null?void 0:r.finally(()=>{this.animationSyncPromise=void 0})),this.startPlayback()}async startPlayback(){if(this.startJinglePromise??this.animationSyncPromise??this.audioDelayPromise){const n=gt.currentTurnIndex,s=Promise.all([this.startJinglePromise,this.animationSyncPromise,this.audioDelayPromise]);try{await s}catch(o){o instanceof Error&&(`${o.message}`,void 0)}if(n!==gt.currentTurnIndex)return}if(this.audioContext&&this.audioContext.state!=="closed")try{await this.audioContext.resume(),this.audioStarted||(this.audioStarted=!0,this.dispatchEvent(new CustomEvent("audioStart")),void 0)}catch(n){this.dispatchEvent(new CustomEvent("error",{detail:n})),Hu.onAudioError()}}setAudioDone(){this.audioChunksLoadDone=!0,h5e(this.bufferManager,this.appendAudioSource.bind(this))}stopAudioPlayback(){for(const n of this.outputSourceNodes)n.stop();this.bufferManager.clearBuffer(),this.outputSourceNodes.clear(),this.setAudioDone(),this.volumeTracker.stopTracking(),this.audioContextManager.cleanup(),this.audioStarted&&(this.audioStarted=!1,this.dispatchEvent(new CustomEvent("audioEnd")))}async playCallStartJingle(){this.startJinglePromise||(this.startJinglePromise=w8(X2e,3e3).finally(()=>{this.startJinglePromise=void 0})),await this.startJinglePromise}async playCallEndJingle(){await w8(J2e,3e3)}setAudioDelayPromise(n){this.audioDelayPromise=Jd(n).finally(()=>{this.audioDelayPromise=void 0})}}class k5e extends EventTarget{constructor(){super(...arguments);O(this,"isAnimationEnabled",!1);O(this,"frameManager",new _5e(()=>gt.AudioOut.playbackTime));O(this,"syncHandler");O(this,"isUseAppearanceComponent",!1);O(this,"animationSyncDeferred");O(this,"appearanceReady",!1);O(this,"emotionData",null);O(this,"characterAppearance",null)}get currentA2EFrame(){return this.shouldAnimationPlay?this.frameManager.getCurrentA2EFrame():null}get currentVasaFrame(){return this.shouldAnimationPlay?this.frameManager.getCurrentVasaFrame():null}get currentVasaExpFrame(){return this.shouldAnimationPlay?this.frameManager.getCurrentVasaExpFrame():null}get animationEnded(){return gt.AudioOut.audioEnded}get shouldAnimationPlay(){return this.isAnimationEnabled&&!this.animationEnded&&gt.AudioOut.audioStarted}async initSyncHandler(){if(this.isUseAppearanceComponent=t5e(),!!this.isUseAppearanceComponent&&!this.syncHandler){const{AudioAnimationSyncHandler:n}=await V(async()=>{const{AudioAnimationSyncHandler:s}=await import("./index-Dw3fydpB.js");return{AudioAnimationSyncHandler:s}},__vite__mapDeps([370,371,1,8,9,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,19,13,30,20,49,17,18,21,22,23,24,10,11,12,25,26,27,28,29,31,16,47,48,187,208,65,66,152,151,178,186,140,137,138,146,144,159,161,164,166,195,68,183,259,253,254,255,124,280]));this.syncHandler=new n("spda2e","volume-based"),this.syncHandler.setAudioInfoProvider({getCurrentTime:()=>gt.AudioOut.playbackTime,getOutputVolume:()=>gt.AudioOut.volume.get()}),this.syncHandler.onFrameMissedInCache(()=>{Hu.onCharacterAnimationMissedInCache()})}}async initialize(n=!1){var s;this.stopAnimation(),this.isAnimationEnabled=n,this.isUseAppearanceComponent&&((s=this.syncHandler)==null||s.startTurn())}stopAnimation(){var n;if(this.isUseAppearanceComponent){(n=this.syncHandler)==null||n.interruptTurn();return}this.frameManager.reset(),this.emotionData=null,this.isAnimationEnabled=!1,this.animationSyncDeferred&&this.animationSyncDeferred.reject()}getAnimationSyncPromise(){var n,s;if(this.isAnimationEnabled)return this.isUseAppearanceComponent?(n=this.syncHandler)==null?void 0:n.getAnimationPreparedPromise().then(o=>{o==="timeout"&&Hu.onCharacterAnimationTimeout()}):(this.animationSyncDeferred||(this.initializeAnimationSync(),this.checkAnimationSyncPromise()),(s=this.animationSyncDeferred)==null?void 0:s.promise)}initializeAnimationSync(){let n,s;const o=new Promise((i,u)=>{n=i,s=u}),r=Jd(TK),a=Promise.race([o,r]).finally(()=>{this.animationSyncDeferred=void 0});this.animationSyncDeferred={promise:a,resolve:n,reject:s}}checkAnimationSyncPromise(){var n;this.appearanceReady&&this.frameManager.frameCount>AK&&((n=this.animationSyncDeferred)==null||n.resolve())}setAnimationDone(){var n,s;this.isUseAppearanceComponent?(n=this.syncHandler)==null||n.finishTurn():this.appearanceReady&&((s=this.animationSyncDeferred)==null||s.resolve())}setAppearanceReady(){this.appearanceReady=!0,this.checkAnimationSyncPromise()}setFrameData(n){var s;!this.isAnimationEnabled||!n.frame||(this.isUseAppearanceComponent?(s=this.syncHandler)==null||s.addFrame(n):(this.frameManager.setFrameData(n),this.checkAnimationSyncPromise()))}setEmotionData(n){this.isUseAppearanceComponent?this.dispatchEvent(new CustomEvent("set-emotion",{detail:n})):this.emotionData=n}setCharacterAppearance(n){this.characterAppearance=n,this.dispatchEvent(new CustomEvent("set-character-appearance"))}}const oi=class oi{constructor(){O(this,"AudioIn",new T5e);O(this,"AudioOut",new A5e);O(this,"Animation",new k5e);O(this,"currentTurnIndex",0)}static getInstance(){return oi.instance||(oi.instance=new oi),oi.instance}};O(oi,"instance",null);let w5=oi;const gt=w5.getInstance(),k8=48,M8=50;function N8(e){const{isNested:t}=e,[n,s]=l.useState(1),[o,r]=l.useState(1),a=l.useRef(void 0),i=l.useRef(void 0),u=wr(g=>{a.current=g.width,i.current=g.height,s((a.current+k8)/a.current),r((i.current+k8)/i.current)},{initialize:!0}),{volume:d}=gt.AudioOut,m=j7(d,E_),f=tl(m,[0,M8],[1,n]),p=tl(m,[0,M8],[1,o]);return c.jsx(ge.div,{className:"absolute inset-0",ref:u,initial:Be,animate:{...tt,transition:{delay:__}},exit:Be,children:c.jsx(ge.div,{className:de("absolute inset-0 flex items-center justify-center overflow-hidden rounded-6xl",t?"-scale-x-100 rounded-5xl blur-lg":"bg-background-100/30 bg-blend-luminosity backdrop-blur-xl after:absolute after:inset-px after:rounded-6xl after:border after:border-transparent dark:bg-background-200/30"),layout:!0,style:{scaleX:f,scaleY:p},children:c.jsx(ge.div,{className:de("absolute -inset-16 aspect-square bg-gradient-audio-output-light bg-blend-saturation saturate-150 dark:bg-gradient-audio-output-dark dark:saturate-100",t?"animate-spin-slower opacity-20 dark:opacity-30":"animate-spin-slow opacity-40 dark:opacity-50")})})})}function M5e(e){const{dynamicHeight:t}=e;return c.jsx(ge.div,{className:de("t-bottom-fade absolute bottom-0 mx-4 box-content w-bottom-fade rounded-lg pt-bottom-fade",t?"h-bottom-fade":"h-composer"),initial:Be,animate:tt,exit:Be,transition:RC,children:c.jsx(ec,{isBottomFade:!0})})}function N5e(){return M(tC).map(t=>t.id)}const R5e=l.lazy(()=>V(()=>import("./character-BmSd48ML.js"),__vite__mapDeps([372,1,373])).then(e=>({default:e.Character})));function P5e(){const[e,t]=Fe(Zd),{createConversation:n}=mm(),[s,o]=l.useState(!1),r=se(Cw),a=se(mi),i=N5e(),u=l.useRef(null),d=M(vr);l.useEffect(()=>{if(u.current===null){const v=vde(i);v&&(u.current=v)}},[i]);const{t:m}=Y();l.useEffect(()=>{s&&u.current&&D.trackEvent({name:"system",data:{eventName:"characterPromotionShown",eventInfo_characterId:u.current}})},[s]),l.useEffect(()=>{const v=localStorage.getItem(PU);o(!v&&d.length>=10&&d.length<14)},[e,d.length]);function f(v){switch(v){case"mica":return"mica-head";case"aqua":return"aqua-head";case"erin":return"erin-head";default:return"mica-head"}}async function p(){u.current&&(a("clicking"),D.trackEvent({name:"interaction",data:{eventName:"characterPromotionClicked",eventInfo_characterId:u.current}}),r(!0),hQ({settingName:"characterId",oldValue:"",newValue:u.current}),D.setSettings({userSettingCharacterId:u.current}),await Promise.all([Nn({path:"/user/settings",args:{options:{method:"PATCH"},body:{preferredCharacter:u.current}}})]))}const g=l.useCallback(async()=>{o(!1)},[]),C=l.useCallback(async()=>{u.current&&(o(!1),r(!0),t(u.current),await n())},[r,t,n]);return s?c.jsx("div",{className:"pointer-events-auto absolute -top-40 end-4 size-56 pb-2",onClick:p,onKeyDown:async v=>{v.key==="Enter"&&await p()},role:"button",tabIndex:0,"aria-label":m("characterAnimation.characterOptInAriaLabelText"),children:c.jsx(R5e,{className:"outline-none",characterId:f(u.current),onCharacterDismissed:g,onCharacterClicked:C})}):null}const YM="0px 0px 0px 1px rgb(255, 255, 255) inset",QM="0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset",L5e="0px 10px 24px 0px rgba(0, 0, 0, 0.18)",O5e="0px 42px 30px 0px rgba(0, 0, 0, 0.06)",D5e="0px 16px 48px -2px rgba(244, 190, 146, 0.18)",j5e="0px 16px 48px -2px rgba(0, 0, 0, 0.25)",F5e="0px 16px 24px -2px rgba(0, 0, 0, 0.1)",U5e="0px 16px 24px -2px rgba(0, 0, 0, 0.25)",B5e=28,V5e=32,H5e=24,z5e=26,G5e="relative flex grow flex-col overflow-hidden before:absolute before:inset-0 before:rounded-3xl before:border-2 before:border-stroke-350",lke="bg-white/90 dark:bg-background-100/80",W5e="w-auto rounded-3xl contrast-more:border-2",$5e="bg-gradient-to-b from-white/90 to-white/0 dark:from-black/30 dark:to-background-200/10",q5e="bg-white/90 dark:bg-background-100/45";function JM(e){const{title:t,onClick:n,appearDelay:s=SB,appearDuration:o=ns.audio.unavailable,className:r}=e;return c.jsx(ge.div,{layout:"position",initial:"initial",animate:"animate",className:"relative flex h-12 shrink-0 items-center",variants:{initial:{...Be,scale:.9},animate:{...tt,scale:1,transition:{...w_,delay:s,duration:o}}},children:c.jsx("button",{type:"button",onClick:n,title:t,className:de("min-w-44",dd,Ii.strong,WC["40-base"],$C["40-base"],lm,"rounded-2xl before:rounded-2xl",r),children:t})})}const Z5e={initial:Be,animate:tt};function K5e(e){const{titleKey:t,textKey:n,buttonTextKey:s,button:o,cancelButton:r,onClick:a,closeDialogCallback:i}=e,{t:u}=Y(),d=u(t),m=u(o.textKey),f=l.useRef(null);return $i(f),c.jsxs(c.Fragment,{children:[c.jsx(ge.div,{ref:f,layout:!0,variants:Z5e,initial:"initial",animate:"animate",role:"dialog","aria-label":d,tabIndex:-1,children:c.jsxs("div",{className:"m-3 text-center text-foreground-800",children:[c.jsx("h2",{className:"py-3",children:d}),c.jsx("p",{className:"text-sm",children:u(n)}),s&&c.jsx("div",{className:"mx-auto flex w-full max-w-xs justify-around px-5 py-3 text-accent-600",children:c.jsx("button",{onClick:a,type:"button",className:"text-sm",children:u(s)})})]})}),c.jsxs(ge.div,{className:"relative mx-0.5 my-1 flex w-full items-center justify-center gap-2 px-2 align-middle",children:[r&&c.jsx(re,{variant:"rect",title:u(r.textKey),className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:()=>{i(),r.onClick()},children:u(r.textKey)}),c.jsx(re,{variant:"rect",title:m,className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:()=>{i(),o.onClick()},children:m})]})]})}const Y5e=1e3,R8=2;function Q5e(){const e=sh(),{alreadyShown:t,dismissCoachmark:n}=Zo(R2e),[s,o]=Fe(Lme),[r,a]=l.useState(!1),i=l.useRef(null),u=e&&!t&&s<R8,d=l.useCallback(()=>{s>=R8&&n(),i.current=setTimeout(()=>{a(!1),i.current=null},Y5e)},[n,s]);return l.useEffect(()=>()=>{i.current&&(clearTimeout(i.current),i.current=null)},[]),l.useEffect(()=>{u&&(o(m=>m+1),setTimeout(()=>{a(!0)},1e3))},[u,o]),{showStudyLiveCoachmark:r,dismissStudyLiveCoachmark:d}}function J5e(){const e=Ll(),{alreadyShown:t}=Zo(km),n=H("smart-mode-default"),s=H("smart-mode-coachmark");return{isSmartModeCoachmarkVisible:e&&s&&!t&&!n}}function X5e(){const e=H("vision-coachmark"),{alreadyShown:t,dismissCoachmark:n}=Zo(HM),{isSmartModeCoachmarkVisible:s}=J5e();if(!e)return{shouldShowVisionCoachmark:!1,dismissVisionCoachmark:()=>{}};const o=wt(zU,j()),r=24*60*60*1e3*60,a=!o||Date.now()-o>r;return{shouldShowVisionCoachmark:!t&&a&&!s,dismissVisionCoachmark:n}}function eve({triggerComponent:e}){const{t}=Y(),{isOpen:n,title:s,description:o,dismiss:r}=tve(),a=i=>{i.stopPropagation(),r()};return c.jsx(Mm,{className:"max-w-48 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:n,placement:"top-end",withArrow:!0,renderReferenceElement:i=>c.jsx("div",{ref:i.ref,className:"relative",children:e}),portalId:"composer-container",onInsideEvent:()=>{r()},onOutsideEvent:r,children:c.jsxs("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-xs-strong",children:s}),c.jsx("button",{onClick:a,type:"button","aria-label":t("common.dismiss"),children:c.jsx(nn,{className:"size-4"})})]}),c.jsx("div",{className:"text-xs",children:o})]})})}function tve(){const{t:e}=Y(),{shouldShowVisionCoachmark:t,dismissVisionCoachmark:n}=X5e(),{showStudyLiveCoachmark:s,dismissStudyLiveCoachmark:o}=Q5e();return t?{isOpen:!0,title:e("composer.chatModes.vision.coachmarkTitle"),description:e("composer.chatModes.vision.description"),dismiss:n}:s?{isOpen:!0,title:e("composer.chatModes.study.live.coachmarkTitle"),description:e("composer.chatModes.study.live.coachmarkDescription"),dismiss:o}:{isOpen:!1,title:"",description:"",dismiss:()=>{}}}function Ih(){const e=H("composer-v4");return!on("kill-composer-v4")&&e}function nve(e){const{onClick:t}=e;if(!_l())return c.jsx(eve,{triggerComponent:c.jsx(sve,{onClick:t})})}function sve(e){const{onClick:t}=e,{t:n}=Y();return Ih()?c.jsx(re,{title:n("composer.startAudioCall"),"aria-label":n("composer.startAudioCall"),variant:"rect",size:"36-sm",color:"subtle-dimmed",className:F("h-9 select-none gap-1 rounded-2xl p-0"),onClick:t,testId:"audio-call-button",children:c.jsx(Dp,{className:"size-6","aria-hidden":!0})}):c.jsx(Hs,{data:{title:n("composer.startAudioCall"),testId:"audio-call-button",onClick:t,isVisible:!0},className:Ii["subtle-dimmed-inverted"],size:"regular",margins:"my-1",children:c.jsx(Dp,{className:"size-6","aria-hidden":!0})})}function P8({config:e}){const{t}=Y(),n=Ih();if(e)switch(e.mode){case"stop":return c.jsx(re,{testId:"stop-button",color:"accent",variant:"circle",size:n?"36-sm":"40-base",className:n?"":"my-1","aria-label":t("composer.stopButton"),title:t("composer.stopButton"),onClick:e.onClick,children:c.jsx("div",{className:"size-3.5 rounded bg-accent-550 contrast-more:border-2 dark:bg-accent-150"})});case"submit":return c.jsx(re,{testId:"submit-button",color:"strong",variant:"square",size:n?"36-sm":"40-base",className:F(n?"rounded-2xl":"my-1 rounded-submitButton"),"aria-label":t("userInput.submitButtonText"),title:t("userInput.submitButtonText"),onClick:e.onClick,disabled:e.disabled,children:c.jsx(Tl,{className:"size-6"})});case"microphone":return c.jsx(nve,{onClick:e.onClick});default:return}}const XM="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/checklist-CMKFk-Bk.svg",eN="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/coco-BiXU4q_c.svg",tN="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/quick-DbAdyS8q.svg",nN="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/research-DLTQx7hg.svg",sN="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/smart-nS7kuhS0.svg",oN="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/study-BpnC_q84.svg",rN="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/think-wWCa40yF.svg",aN="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/search-BjOz_Dmt.svg",ove=["chat","reasoning","research"],uke=["copy","regenerate"];function iN(){const e=H("deep-research"),t=H("deep-research-nano"),n=an(),s=M(N1);return e&&(s||!1||!s&&n&&t)&&!ae.instance().config().disableDeepResearch}function cN(){const e=M(N1),t=ye("kill-composer-reasoning-button");return!e&&t}function rve({containerRef:e,items:t,itemRefs:n,initialFocusedId:s,onEscape:o,onEnter:r}){const[a,i]=l.useState(s);return hs(u=>{var p,g;const{current:d}=e;if(!d||!d.contains(document.activeElement))return;const m=t.findIndex(({id:C})=>C===a);let f=m;switch(u.key){case"Escape":o==null||o(),u.preventDefault();break;case"ArrowDown":f=Math.min(m+1,t.length-1),u.preventDefault();break;case"ArrowUp":f=Math.max(m-1,0),u.preventDefault();break;case"Enter":a&&(r==null||r(a));break}if(f!==m){const C=(p=t[f])==null?void 0:p.id;C&&(i(C),(g=n.current[C])==null||g.focus())}}),{focusedItemId:a,setFocusedItemId:i}}const ave=[];function ive(){const e=Co(),t=t3(),{t:n}=Y(),{dismissCoachmark:s}=Zo(km),o=H("smart-mode-default"),r=x=>{Ce({source:"composerChatModeMenu",customData:JSON.stringify({currentMode:e,newMode:x})}),zt(x),fr({msg:n("actions.screenReaderSwitchPrefix",{chatMode:pd(x)})}),x==="smart"&&s()},a=iN(),i=Ll(),u=H("study-mode"),d=H("coco-mode"),m=_l(),f=cN(),p=n3();let g=ave.concat(i&&o?["smart"]:[],["chat"],d?["coco"]:[],f?[]:["reasoning"],i&&!o?["smart"]:[],u?["study"]:[],a?["research"]:[],t?["computerUse"]:[],p?["search"]:[]);m&&(g=g.filter(x=>ove.includes(x)));const C=l.useRef(null),v=l.useRef({}),b=g.map(x=>({id:x})),{focusedItemId:y,setFocusedItemId:E}=rve({containerRef:C,items:b,itemRefs:v,initialFocusedId:e,onEnter:x=>r(x)});return c.jsx("div",{className:"pointer-events-auto relative flex flex-col gap-1 rounded-2xl text-sm contrast-more:border-2","data-testid":"composer-mode-menu",role:"radiogroup",ref:C,tabIndex:-1,children:g.map(x=>c.jsx(dve,{chatMode:x,isSelected:e===x,onSelect:r,focusedItemId:y,setFocusedItemId:E,itemRefs:v},x))})}const cve={chat:c.jsx(yt,{url:tN,className:"size-5"}),reasoning:c.jsx(yt,{url:rN,className:"size-5"}),research:c.jsx(yt,{url:nN,className:"size-5"}),computerUse:c.jsx(yt,{url:XM,className:"size-5"}),smart:c.jsx(yt,{url:sN,className:"size-5"}),study:c.jsx(yt,{url:oN,className:"size-5"}),search:c.jsx(yt,{url:aN,className:"size-5"}),coco:c.jsx(yt,{url:eN,className:"size-5"})},lve=["coco"],uve=["chat","reasoning","research","computerUse"];function dve(e){const{chatMode:t,isSelected:n,onSelect:s,focusedItemId:o,setFocusedItemId:r,itemRefs:a}=e,{t:i}=Y(),u=l.useRef(null);l.useEffect(()=>{a.current[t]=u.current},[t,a]);const d=lve.includes(t),m=uve.includes(t);return c.jsxs("button",{type:"button",ref:u,title:pd(t),onClick:()=>s(t),className:de("flex items-center justify-between gap-4 rounded-xl py-2 pe-4 ps-3.5",Ii["subtle-dimmed"]),"data-testid":`${t}-mode-option`,role:"radio","aria-checked":n,tabIndex:t===o?0:-1,onFocus:()=>r(t),children:[c.jsxs("div",{className:"flex items-center gap-3.5",children:[c.jsx("div",{className:"flex size-6 items-center justify-around",children:cve[t]}),c.jsxs("div",{className:"pe-4 text-left",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsxs("div",{children:[" ",pd(t)," "]}),d&&c.jsx(Bu,{color:"accent",children:c.jsx("span",{children:i("common.new")})}),t==="computerUse"&&c.jsx(Bu,{color:"accent",children:c.jsx("span",{children:i("settings.labs.title")})}),m&&c.jsx(Bu,{children:c.jsx("span",{children:i(`composer.chatModes.${t}.latency`)})})]}),c.jsx("div",{className:"text-foreground-600 text-xs dark:text-foreground-700",children:Oie(t)})]})]}),c.jsx(mve,{isSelected:n})]})}function mve(e){const{isSelected:t}=e;return c.jsx("div",{className:de("flex size-5 items-center justify-center rounded-full border-2",t?"border-foreground-800":"border-foreground-450"),children:t&&c.jsx("div",{className:"size-2.5 rounded-full bg-foreground-800 contrast-more:border-2"})})}function fve(e){const{isChatModeMenuOpen:t,onRef:n,onClick:s,disableChatModeSwitcher:o}=e,{t:r}=Y(),a=Co(),i=u=>{Ce({source:"composerChatModeSwitcher",customData:JSON.stringify({currentMode:a,isOpen:t})}),s(u)};return c.jsx(ge.div,{layout:"position",initial:!1,children:c.jsxs(re,{testId:"chat-mode-switcher",title:r(t?"composer.chatModes.closeModeMenu":"composer.chatModes.openModeMenu"),onClick:i,color:"subtle-dimmed",ref:n,className:"my-1 border border-black/8",disabled:!o,"aria-haspopup":"menu","aria-expanded":t,children:[c.jsx("span",{className:"text-sm",children:pd(a)}),c.jsx(ds,{className:de("size-4",t?"-rotate-90":"rotate-90")})]})})}function lN({triggerComponent:e,offset:t=10,onInsideEvent:n}){const{t:s}=Y(),o=qi(),{alreadyShown:r,dismissCoachmark:a}=Zo(km),i=PT(),u=d=>{d.stopPropagation(),a()};return c.jsx(Mm,{className:"max-w-48 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:!r,placement:o?"left":"right",offset:t,withArrow:!0,renderReferenceElement:d=>c.jsx(ge.div,{ref:d.ref,className:"relative",children:e}),portalId:"composer-container",onInsideEvent:()=>{n==null||n(),a()},children:c.jsxs("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-xs-strong",children:s("composer.chatModes.smart.coachmarkTitle")}),c.jsx("button",{onClick:u,type:"button",children:c.jsx(nn,{className:"size-4"})})]}),c.jsx("div",{className:"text-xs",children:i.coachmarkDescription})]})})}function pve({disableChatModeSwitcher:e}){const[t,n]=Fe(D1),s=Ll(),o=H("smart-mode-default"),r=H("smart-mode-coachmark"),{captureFocus:a,restoreFocus:i}=T_(),u=l.useCallback(d=>{n(m=>d?(a(),"chatMode"):m==="chatMode"?(setTimeout(()=>{i()},0),null):m)},[n,a,i]);return c.jsx(bm,{isOpen:t==="chatMode",onIsOpenChange:u,renderTrigger:(d,m)=>{const f=c.jsx(fve,{isChatModeMenuOpen:m,onRef:d.ref,onClick:d.onClick,disableChatModeSwitcher:e});return s&&r&&!o?c.jsx(lN,{triggerComponent:f,offset:10,onInsideEvent:()=>{u(!0)}}):f},options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0,roleType:"menu"},className:F(Ys,"p-2"),children:c.jsx(ive,{})})}function hve({state:e}){const{t}=Y(),n=ut(),s=xo(),o=se(bo),r=se(Sl),a=se(L1),i=se(hk),u=Ih();return c.jsx(Hs,{data:{title:t("composer.goToHome"),testId:"home-button",onClick:async()=>{o(null),r(!1),a(void 0),i(M3.COMPOSER),$t({source:"homeButton"}),await s({to:"/discover",from:n})},isVisible:e!=="hidden",isDisabled:e==="disabled"},size:u?"small":"regular",children:c.jsx(Sm,{className:"size-6","aria-hidden":!0})})}const uN=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM12 7C12.4142 7 12.75 7.33579 12.75 7.75V11.25H16.25C16.6642 11.25 17 11.5858 17 12C17 12.4142 16.6642 12.75 16.25 12.75H12.75V16.25C12.75 16.6642 12.4142 17 12 17C11.5858 17 11.25 16.6642 11.25 16.25V12.75H7.75C7.33579 12.75 7 12.4142 7 12C7 11.5858 7.33579 11.25 7.75 11.25H11.25V7.75C11.25 7.33579 11.5858 7 12 7Z"})),dke=Object.freeze(Object.defineProperty({__proto__:null,default:uN},Symbol.toStringTag,{value:"Module"}));function dN(e){return l.useCallback(t=>{if(t.key==="Enter"&&!t.shiftKey||t.key===" "){t.preventDefault();try{const n=e(t);n instanceof Promise&&n.catch(console.error)}catch(n){console.error("Error in useEnterOrSpaceKeyDown:",n)}}},[e])}const mN=(e={})=>{const{circular:t,axis:n,memorizeCurrent:s=!0,tabbable:o,ignoreDefaultKeydown:r,unstable_hasDefault:a}=e;return F1(mO),hp({mover:{cyclic:!!t,direction:gve(n??"vertical"),memorizeCurrent:s,tabbable:o,hasDefault:a},...r&&{focusable:{ignoreKeydown:r}}})};function gve(e){switch(e){case"horizontal":return ou.Horizontal;case"grid":return ou.Grid;case"grid-linear":return ou.GridLinear;case"both":return ou.Both;case"vertical":default:return ou.Vertical}}function vve(e){const t=e.children[0];return t instanceof HTMLElement?t:null}function Cve(e,t=!0){l.useEffect(()=>{if(t&&e.current){const n=vve(e.current);n&&n.focus()}},[e,t])}const _r=e=>c.jsx(bve,{...e});_r.Motion=l.forwardRef(yve);function yve(e,t){const{children:n,axis:s="vertical",circular:o=!0,tabbable:r,autoFocus:a=!1,...i}=e,u=mN({axis:s,circular:o,tabbable:r}),d=l.useRef(null);return l.useImperativeHandle(t,()=>d.current,[]),$i(d,a),H("a11y-keyboard-navigation")?c.jsx(ge.div,{ref:d,...u,...i,children:n}):c.jsx(ge.div,{ref:d,...i,children:n})}function bve(e){const{children:t,axis:n="vertical",circular:s,tabbable:o,autoFocus:r=!1,...a}=e,i=mN({axis:n,circular:s,tabbable:o}),u=l.useRef(null);return Cve(u,r),H("a11y-keyboard-navigation")?c.jsx("div",{ref:u,...i,...a,children:t}):c.jsx("div",{ref:u,...a,children:t})}const L8="ms-auto me-[2px] size-6 flex-none";function xve(e,t){const{tab:n,onClick:s,showHighlight:o,showActionIcon:r=!0,onFocus:a,className:i,fallbackIcon:u,titleExtra:d,testId:m}=e,[f,p]=l.useState(!1),{t:g}=Y(),C=l.useCallback(()=>{s==null||s({...n,addedToTabSelection:!n.addedToTabSelection})},[s,n]),v=dN(C),b=f||!n.favIconUrl,y=u??wh;return c.jsxs(_r.Motion,{className:F(" box-border flex w-full cursor-pointer flex-row items-center rounded-lg p-1.5 active:bg-black/3 safe-hover:bg-black/5 dark:active:bg-white/5 dark:safe-hover:bg-black/30",o&&"bg-black/5 dark:bg-white/8","forced-colors:focus:outline forced-colors:focus:outline-2 forced-colors:focus:outline-black dark:forced-colors:focus:outline-white","contrast-more:focus:outline contrast-more:focus:outline-2 contrast-more:focus:outline-black dark:contrast-more:focus:outline-white",i),onClick:C,tabIndex:0,onKeyDown:v,ref:t,onFocus:a,role:"checkbox","aria-checked":n.addedToTabSelection?"true":"false",tabbable:!0,"aria-label":n.title,"data-testid":m,children:[c.jsx("div",{className:"relative flex size-4 flex-none flex-row items-center rounded-lg bg-black/5",children:b?c.jsx(y,{className:"size-full"}):c.jsx("img",{src:n.favIconUrl,alt:g("composer.multiTabs.tabFavIconAltText"),className:"size-full rounded-[1px] object-cover",onError:()=>{p(!0)}})}),c.jsxs("span",{className:"font-ligatures-none me-7 ms-2 max-h-full truncate text-foreground-850 text-sm",children:[d??n.title,c.jsx("span",{})]}),r&&(n.addedToTabSelection?c.jsx(_m,{className:L8}):c.jsx(uN,{className:L8}))]})}const Sve=l.forwardRef(xve);function Eve(e,t){const{groupTitle:n,tab:s,onClick:o,showHighlight:r,showActionIcon:a,onFocus:i,className:u,fallbackIcon:d,titleExtra:m,testId:f}=e;return c.jsxs(c.Fragment,{children:[n?c.jsx("span",{className:"font-semibold text-foreground-850 text-sm",children:n}):null,c.jsx(Sve,{ref:t,tab:s,onClick:o,showHighlight:r,showActionIcon:a,onFocus:i,className:u,fallbackIcon:d,titleExtra:m,testId:f})]})}const wve=l.forwardRef(Eve),fN=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 9.25C2 5.24594 5.24594 2 9.25 2H12.75C14.102 2 15.2611 2.82552 15.7509 4L13.9747 4C13.6591 3.6907 13.2268 3.5 12.75 3.5H9.25C6.07436 3.5 3.5 6.07436 3.5 9.25V12.75C3.5 13.2268 3.6907 13.6591 4 13.9747V15.75C2.82552 15.2602 2 14.102 2 12.75V9.25ZM5 10.25C5 7.35051 7.35051 5 10.25 5H15.75C17.102 5 18.2611 5.82552 18.7509 7L16.9747 7C16.6591 6.6907 16.2268 6.5 15.75 6.5H10.25C8.17893 6.5 6.5 8.17893 6.5 10.25V15.75C6.5 16.2268 6.6907 16.6591 7 16.9747V18.75C5.82552 18.2602 5 17.102 5 15.75V10.25ZM11.25 8C9.45507 8 8 9.45507 8 11.25V18.75C8 20.5449 9.45507 22 11.25 22H18.75C20.5449 22 22 20.5449 22 18.75V11.25C22 9.45507 20.5449 8 18.75 8H11.25ZM9.5 11.25C9.5 10.2835 10.2835 9.5 11.25 9.5H18.75C19.7165 9.5 20.5 10.2835 20.5 11.25V18.75C20.5 19.7165 19.7165 20.5 18.75 20.5H11.25C10.2835 20.5 9.5 19.7165 9.5 18.75V11.25Z"})),mke=Object.freeze(Object.defineProperty({__proto__:null,default:fN},Symbol.toStringTag,{value:"Module"})),pN=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 4.5C16.1421 4.5 19.5 7.85786 19.5 12C19.5 16.1421 16.1421 19.5 12 19.5C7.85786 19.5 4.5 16.1421 4.5 12C4.5 11.6236 4.52772 11.2538 4.58123 10.8923C4.64845 10.4382 4.31609 10 3.85708 10C3.48623 10 3.161 10.2562 3.10471 10.6228C3.03576 11.0718 3 11.5317 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C9.69494 3 7.59227 3.86656 6 5.29168V4.25C6 3.83579 5.66421 3.5 5.25 3.5C4.83579 3.5 4.5 3.83579 4.5 4.25V7.25C4.5 7.66421 4.83579 8 5.25 8H8.25C8.66421 8 9 7.66421 9 7.25C9 6.83579 8.66421 6.5 8.25 6.5H6.90093C8.23907 5.25883 10.0309 4.5 12 4.5ZM12.5 7.75C12.5 7.33579 12.1642 7 11.75 7C11.3358 7 11 7.33579 11 7.75V12.25C11 12.6642 11.3358 13 11.75 13H14.75C15.1642 13 15.5 12.6642 15.5 12.25C15.5 11.8358 15.1642 11.5 14.75 11.5H12.5V7.75Z"})),fke=Object.freeze(Object.defineProperty({__proto__:null,default:pN},Symbol.toStringTag,{value:"Module"}));function Nm(){const e=M(OX),t=H("edge-multi-tabs-history");return e&&t}const Ive=4,_ve=10,Tve=20,Sd={ADD:"add"};function oy(e){return e.sourceType==="history"}function ry(e){return e.sourceType==="opened"}function go(e){return ry(e)?(e.id??0).toString():e.url??""}function ay(e){return e.sourceType===void 0||e.sourceType===null}function hN(e,t){const n=new Set(e.map(o=>o.id)),s=new Set(t.map(o=>o.id));if(n.size!==s.size)return!0;for(const o of n)if(!s.has(o))return!0;return!1}function gN(e,t=""){const n=t.trim().toLocaleLowerCase();return n===""||!e.title||e.title.toLocaleLowerCase().includes(n)}function vN(e,t=new Map){return t.has(go(e))}function CN(e,t){const{selectedTabsSnapshot:n,keyword:s=""}=t??{};return{...e,isInSearchResult:gN(e,s),addedToTabSelection:vN(e,n)}}async function yN(e){const{tabs:t}=await _J.run(e);return(t==null?void 0:t.map(n=>({...n,sourceType:"history",isInSearchResult:!0})))??[]}async function bN(){const e={maxResults:_ve,states:[Zr.RECENT],queries:[]};return(await yN(e)).slice(0,Ive)}async function Ave(){const{tabs:e}=await PI.run({});return(e==null?void 0:e.map(t=>({...t,sourceType:"opened",isInSearchResult:!0})))??[]}async function kve({isEdgeHistoryEnabled:e=!1,triggeredByMention:t=!1,setUserOpenedTabs:n,setUserHistoryTabs:s,initialSelectedTabsSnapshot:o=new Map}){const[r,a]=await Promise.all([Ave(),e?bN():Promise.resolve([])]);n==null||n(r.map(d=>CN(d,{selectedTabsSnapshot:o})));const i=r.length===0,u=i?a:[];return s==null||s(u),t&&i}function Mve(e){return new Map(e.map(n=>[go(n),{...n,addedToTabSelection:!0}]))}function xN(e,t){const n=Mve(e);return Array.from(t.values()).reduce((s,o)=>{const r=go(o);return s.set(r,{...s.get(r),...o}),s},new Map(n))}async function Nve(e,t){let n=[];return e===""?n=t?await bN():[]:n=await yN({queries:[e],states:[Zr.RECENT,Zr.HISTORY],maxResults:Tve}),n}async function Rve(e,t){let n=[];const s=e.trim(),o=s==="";t.historyTabs&&t.historyTabs.length>0&&(n=t.historyTabs.map(i=>({...i,isInSearchResult:!0,addedToTabSelection:vN(i,t.userAddedTabs)})));const r=new Map([...t.userAddedTabs.values()].map(i=>[go(i),{...i,isInSearchResult:gN(i,s)}])),a=t.userOpenedTabs.map(i=>CN(i,{selectedTabsSnapshot:t.userAddedTabs,keyword:s}));return{userAddedTabsFiltered:r,userOpenedTabsFiltered:a,historyTabsFiltered:n,isEmptyKeyword:o}}function Pve(e,t){switch(t.type){case"SET_DRAFT_SELECTED_TABS":return{...e,userDraftSelectedTabs:t.payload};case"SET_TABS_INITIALIZED":return{...e,isTabsInitialized:t.payload};case"SET_USE_RECENT_HISTORY":return{...e,isUseRecentHistoryEnabled:t.payload};case"MERGE_DRAFT_SELECTION":return{...e,userDraftSelectedTabs:xN(t.payload,e.userDraftSelectedTabs)};default:return e}}function Lve(e){const{text:t}=e;return t?c.jsx("span",{className:"-ms-0.5 h-8 leading-8 text-foreground-850 text-sm",role:"status",children:t}):null}function Ove(e){if(ay(e))return fN;if(oy(e))return pN}function O8(e,t=!1){const n=z("composer.multiTabs.openTabs");if(oy(e)){const s=z("composer.multiTabs.recentlyClosedTabs"),o=z("composer.multiTabs.historyTabs");return t?s:o}return ry(e)?n:""}function Dve(e,t){let n=!1,s=!1;return o=>{if(e){if(oy(o)&&!n)return n=!0,O8(o,t);if(ry(o)&&!s)return s=!0,O8(o,t)}}}function jve(e){const{tabs:t,onItemClick:n,highlightedIndex:s,activeMenuItemRef:o,onItemFocus:r,emptyStateText:a,isUseRecentHistoryEnabled:i=!1}=e,u=Nm(),d=M(Gi);if(t.length===0)return c.jsx(Lve,{text:a});const m=Dve(u,i);return c.jsx(c.Fragment,{children:t.map((f,p)=>c.jsx(wve,{tab:f,onClick:n,showHighlight:s===p,onFocus:()=>r==null?void 0:r(p),showActionIcon:!d,className:F(!d&&"py-2"),ref:p===s?o:null,groupTitle:m(f),fallbackIcon:Ove(f),testId:`multi-tabs-menu-item-${p}`},go(f)))})}function SN(e){const{highlightedIndex:t,activeMenuItemRef:n,onMenuItemClick:s,onFocus:o,tabs:r,emptyStateText:a,isUseRecentHistoryEnabled:i=!1}=e,u=M(Gi);return c.jsxs("div",{className:F("relative flex w-full overflow-hidden",u?"mb-0 mt-3":"my-3"),children:[c.jsx("div",{className:F("t-custom-scrollbar flex w-full flex-col gap-y-1 overflow-y-auto overflow-x-hidden p-1"),"data-testid":"multi-tabs-menu-items-container",children:c.jsx(jve,{tabs:r,onItemClick:s,highlightedIndex:t,activeMenuItemRef:n,onItemFocus:o,emptyStateText:a,isUseRecentHistoryEnabled:i})}),r.length>=4&&u&&c.jsx("div",{className:F("pointer-events-none absolute inset-x-0 bottom-0 h-8 rounded-b-lg px-4","bg-gradient-composer-tabs-menu-mask-light dark:bg-gradient-composer-tabs-menu-mask-dark")})]})}function EN(e){const{mode:t,disabled:n,onClick:s}=e,{t:o}=Y(),r=o("composer.multiTabs.browserTabMenuShareButton"),a=o("composer.multiTabs.browserTabMenuShareButtonForUpdate"),i=t===Sd.ADD?r:a;return c.jsx(re,{title:i,className:"mx-auto mt-auto w-full flex-none",disabled:n,testId:"multi-tabs-share-button",onClick:s,color:"strong",size:"48-lg","aria-label":i,children:i})}function wN(e){const{mode:t,onClose:n}=e,s=M(Gi),{t:o}=Y(),r=Nm(),a=o("common.closeText"),i=l.useMemo(()=>r?t===Sd.ADD?o("composer.multiTabs.browserTabMenuTitleWithHistory"):o("composer.multiTabs.browserTabMenuTitleForUpdateWithHistory"):t===Sd.ADD?o("composer.multiTabs.browserTabMenuTitle"):o("composer.multiTabs.browserTabMenuTitleForUpdate"),[r,t,o]);return c.jsxs("div",{className:"flex w-full items-center justify-between pt-2",children:[c.jsx("span",{className:"text-foreground-900 text-sm",children:i}),!s&&c.jsx(re,{color:"subtle-dimmed",title:a,size:"32-xs",onClick:n,"aria-label":a,children:c.jsx(nn,{className:"size-5 cursor-pointer"})})]})}const D8="";function IN(e){const{onChange:t,defaultValue:n}=e,{t:s}=Y(),[o,r]=l.useState(n??D8),a=l.useRef(null),i=Nm(),u=()=>{var g;(g=a.current)==null||g.focus(),r(D8)},d=dN(u),m=l.useCallback(g=>{r(g.target.value)},[]);l.useEffect(()=>{t==null||t(o)},[t,o]),l.useEffect(()=>{a.current&&requestAnimationFrame(()=>{var g;(g=a.current)==null||g.focus()})},[a]);const f=s(i?"composer.multiTabs.browserTabMenuSearchPlaceholderWithHistory":"composer.multiTabs.browserTabMenuSearchPlaceholder"),p=s("composer.multiTabs.browserTabMenuSearchClear");return c.jsxs("div",{className:"mt-3 flex h-8 w-full flex-row items-center rounded-3xl bg-white/60 dark:bg-black/60",children:[c.jsx(Y3,{className:"mx-2 size-4"}),c.jsx("input",{type:"text",id:"browser-tab-search",autoComplete:"off",spellCheck:!1,autoCorrect:"off",className:"w-full flex-1 rounded-lg bg-transparent py-2 text-sm focus:outline-none",placeholder:f,"aria-label":f,onChange:m,value:o,maxLength:100,ref:a}),o&&c.jsx("div",{role:"button",tabIndex:0,className:"me-1 ms-auto h-6 cursor-pointer rounded-xl border border-midnight-250 bg-midnight-200 px-3 py-1 text-foreground-800 text-xs dark:border-white/50 dark:bg-white/5",onKeyDown:d,onClick:u,"aria-label":p,children:p})]})}function _N(e,t=1e3){const n=l.useRef(null);return n.current=e,l.useMemo(()=>yC((...r)=>{var a;(a=n.current)==null||a.call(n,...r)},t),[t])}const Fve={id:-1,title:"",addedToTabSelection:!1,isInSearchResult:!0,sourceType:null,active:!1,highlighted:!1,pinned:!1,selected:!1,incognito:!1,autoDiscardable:!0,discarded:!1,index:-1,windowId:-1,groupId:-1};function TN(e={}){return{...Fve,...e}}const Df=20,Uve=TN({sourceType:null});function Bve(e,t){const{t:n}=Y(),s=l.useMemo(()=>e.filter(u=>u.isInSearchResult),[e]),o=l.useMemo(()=>{const i=Math.min(s.length,Df);return t&&i>1&&i<Df?{...Uve,title:n("composer.multiTabs.allTabs",{count:i}),isInSearchResult:!0}:null},[s.length,n,t]),r=l.useCallback(()=>e.map(i=>({...i,addedToTabSelection:s.slice(0,Df).some(u=>u.id===i.id)})),[s,e]),a=l.useMemo(()=>o?[o,...s]:s,[s,o]);return{appearedTabs:s,getUpdatedTabsBySpecialTab:r,specialTab:o,appearedTabsWithSpecialTab:a}}function AN(e){const t=l.useRef(0),n=l.useCallback(async()=>{const s=window.innerHeight;s!==t.current&&(t.current=s,await e(s))},[e]);wr(n,{initialize:!0},document.documentElement)}const Vve=.2,Hve=.2,zve=50,Gve=594,Wve=46,$ve=360,qve=240;function Zve(){We.emit("edge:try-grow-content-height",Gve)}function Kve(e){const t=new Map;for(const n of e)n.id&&n.addedToTabSelection&&t.set(n.id.toString(),n);return t}function Yve(e){const{styles:t,onRef:n,onSave:s,onClose:o=()=>{},outsideClickElements:r=[],originElement:a,mode:i=Sd.ADD}=e,[u,d]=Fe(zo),m=l.useRef(new Map(u)),f=l.useRef(null),[p,g]=l.useState([]),[C,v]=l.useState(0),b=l.useRef(null),{t:y}=Y(),E=l.useDeferredValue([...p]),x=M(Gi),{appearedTabsWithSpecialTab:I,getUpdatedTabsBySpecialTab:_}=Bve(E,x),T=m.current,[A,k]=l.useState(0),[R,P]=l.useState(!1),B=l.useCallback(()=>{if(f.current&&a&&a.current){const K=a.current.getBoundingClientRect();k(K.top-Wve)}},[k,a]);AN(()=>{Zve(),B()}),l.useEffect(()=>{P(!1);async function K(){const{tabs:be}=await PI.run({});if(be&&be.length>0){const Me=[];for(const je of be)je.id&&Me.push({...je,addedToTabSelection:T.has(je.id.toString()),isInSearchResult:!0,sourceType:"opened"});g(Me)}}K().catch(console.error).finally(()=>{P(!0)})},[T]),l.useLayoutEffect(()=>{f.current&&R&&B()},[B,R]);const U=l.useMemo(()=>p.filter(K=>K.addedToTabSelection),[p]),$=l.useMemo(()=>U.length>Df,[U]),Q=l.useCallback(K=>{n==null||n(K),f.current=K},[n]),te=l.useCallback(K=>{const be=Kve(K);d(be);const Me=Array.from(be.values()),je=hN(Me,[...T.values()]);s==null||s(Me,je)},[T,s,d]),X=l.useCallback(()=>{$||te(p)},[$,te,p]),ne=l.useCallback(K=>{g(be=>be.map(je=>je.id===K.id?K:je))},[]),q=_N(l.useCallback(K=>{g(be=>be.map(Me=>({...Me,isInSearchResult:Me.title?Me.title.toLowerCase().includes(K.toLowerCase().trim()):!0})))},[]),WI),Z=l.useCallback(K=>{v(be=>K==="up"?be>0?be-1:I.length-1:be<I.length-1?be+1:0)},[v,I]);l.useEffect(()=>{b.current&&C>=0&&(b.current.scrollIntoView({block:"nearest"}),x||b.current.focus())},[C,b,x]);const J=l.useCallback(K=>{let be=[];ay(K)?be=_():be=p.map(Me=>Me.id===K.id?{...K,addedToTabSelection:!0}:Me),g(be),te(be)},[_,te,p]),W=l.useCallback(K=>{var be;if(["ArrowUp","ArrowDown"].includes(K.code))K.preventDefault(),Z(K.code==="ArrowUp"?"up":"down");else if(K.code==="Enter"){K.preventDefault();const Me=I[C];Me&&J({...Me,addedToTabSelection:!0})}else K.code==="Tab"&&((be=f.current)==null||be.focus())},[Z,C,I,J]),le=l.useMemo(()=>yC(W,zve),[W]);l.useEffect(()=>(We.on("multi-tabs:search",q),We.on("multi-tabs:key-down",le),()=>{We.off("multi-tabs:search",q),We.off("multi-tabs:key-down",le)}),[le,q]),ho({onOutsideEvent:o,elements:[f,...r],invokeOnce:!1,shouldAttachListeners:!0,includeFocus:x});const _e=l.useMemo(()=>x?qve:$ve,[x]),Ae=l.useMemo(()=>({maxHeight:`${A>_e?_e:A}px`,...t}),[A,_e,t]);return hs(K=>{K.key==="Escape"&&(K.stopPropagation(),K.preventDefault(),o())}),c.jsxs(_r.Motion,{className:F(lt.modal,"pointer-events-auto relative z-40 box-border flex max-h-[400px] w-full flex-col rounded-b-6xl rounded-t-4xl border border-white p-4 shadow-lg backdrop-blur-2xl backdrop-saturate-150 contrast-more:border-2 dark:border-white/10","bg-gradient-composer-tabs-menu-light dark:bg-gradient-composer-tabs-menu-dark","bg-blend-normal","forced-colors:bg-stroke-150 dark:forced-colors:bg-background-150","contrast-more:bg-stroke-150 dark:contrast-more:bg-background-150",x?"px-4 pb-1.5 pt-4":"p-4"),style:Ae,tabbable:!0,tabIndex:0,ref:Q,"data-testid":"composer-multi-tabs-menu",initial:"start",animate:"end",variants:{start:Be,end:{...tt,transition:{duration:Vve,delay:Hve}}},onKeyDown:x?void 0:W,"data-outside-events-ignore":x?"":void 0,children:[c.jsx(wN,{mode:i,onClose:o}),!x&&c.jsx(IN,{onChange:q}),c.jsx(SN,{highlightedIndex:C,onFocus:v,activeMenuItemRef:b,onMenuItemClick:x?J:ne,tabs:I,emptyStateText:p.length===0?y("composer.multiTabs.noTabsOpen"):y("composer.multiTabs.noTabsFound")}),!x&&c.jsx(EN,{mode:i,disabled:$,onClick:X})]})}const kN=N([]),MN=N([]),Qve=N(e=>{const t=e(kN),n=e(MN),s=new Map;for(const o of t)o.id&&s.set(go(o),o);for(const o of n)o.url&&!t.some(r=>r.url===o.url)&&s.set(go(o),o);return[...s.values()]}),Jve=N(e=>{const t=e(Qve),n=e(zo),s=e(Gi),o=new Map;for(const r of t)r.isInSearchResult&&o.set(go(r),r);if(!s)for(const[r,a]of n)a.isInSearchResult&&o.set(r,a);return[...o.values()]}),I5=20,j8={opened:0,history:1},Xve=TN({sourceType:null});function eCe(){const{t:e}=Y(),t=M(Gi),n=Nm(),[s,o]=Fe(kN),r=se(MN),[a,i]=Fe(zo),u=l.useRef(new Map(a)),d=M(Jve),[m,f]=l.useReducer(Pve,{isTabsInitialized:!1,isUseRecentHistoryEnabled:!1,userDraftSelectedTabs:u.current}),p=e("composer.multiTabs.noTabsOpen"),g=e("composer.multiTabs.noTabsFound"),C=l.useMemo(()=>d.map(_=>({..._,addedToTabSelection:m.userDraftSelectedTabs.has(go(_))})),[d,m.userDraftSelectedTabs]),v=l.useMemo(()=>{const I=Math.min(C.length,I5);return t&&I>1&&I<I5?{...Xve,title:e("composer.multiTabs.allTabs",{count:I}),isInSearchResult:!0}:null},[C.length,e,t]),b=l.useMemo(()=>{const I=[...C].sort((_,T)=>(_.lastAccessed??0)-(T.lastAccessed??0)).sort((_,T)=>(j8[_.sourceType]??0)-(j8[T.sourceType]??0));return!v||n?I:[v,...I]},[C,v,n]),y=l.useMemo(()=>n?g:d.length===0?p:g,[n,g,p,d.length]),E=l.useCallback(I=>hN(I,[...u.current.values()]),[]),x=l.useCallback(async I=>{const _=n?await Nve(I.trim(),s.length===0):[],{userAddedTabsFiltered:T,userOpenedTabsFiltered:A,historyTabsFiltered:k,isEmptyKeyword:R}=await Rve(I,{userAddedTabs:a,userOpenedTabs:s,historyTabs:_});n&&(f({type:"SET_USE_RECENT_HISTORY",payload:R&&t}),r(k)),i(T),o(A)},[n,i,r,o,t,a,s]);return l.useEffect(()=>{f({type:"SET_USE_RECENT_HISTORY",payload:!1}),kve({isEdgeHistoryEnabled:n,triggeredByMention:t,setUserOpenedTabs:o,setUserHistoryTabs:r,initialSelectedTabsSnapshot:u.current}).then(I=>{f({type:"SET_USE_RECENT_HISTORY",payload:I})}).catch(I=>{}).finally(()=>{f({type:"SET_TABS_INITIALIZED",payload:!0})})},[n,r,o,t]),l.useEffect(()=>()=>{r([]),o([])},[r,o]),{triggeredByMention:t,isEdgeHistoryEnabled:n,checkSelectedTabsHaveChanged:E,appearedTabsWithSpecialTab:b,userOpenedTabs:s,menuContentEmptyStateText:y,setUserAddedTabs:i,searchTabs:x,appearedTabs:C,specialTab:v,isUseRecentHistoryEnabled:m.isUseRecentHistoryEnabled,isTabsInitialized:m.isTabsInitialized,userDraftSelectedTabs:m.userDraftSelectedTabs,setUserDraftSelectedTabs:I=>{f({type:"SET_DRAFT_SELECTED_TABS",payload:I})}}}const tCe=.2,nCe=.2;function sCe(e){return Array.from(e.values()).map(t=>({...t,addedToTabSelection:!0,isInSearchResult:!0}))}const oCe=594,rCe=46,aCe=360,iCe=240;function cCe(){We.emit("edge:try-grow-content-height",oCe)}function lCe(e){const{styles:t,onRef:n,onSave:s,onClose:o=()=>{},originElement:r,mode:a=Sd.ADD,outsideClickElements:i=[]}=e,u=l.useRef(null),[d,m]=l.useState(0),f=l.useRef(null),[p,g]=l.useState(0),{appearedTabsWithSpecialTab:C,isUseRecentHistoryEnabled:v,triggeredByMention:b,menuContentEmptyStateText:y,searchTabs:E,setUserAddedTabs:x,checkSelectedTabsHaveChanged:I,userDraftSelectedTabs:_,isTabsInitialized:T,setUserDraftSelectedTabs:A,appearedTabs:k}=eCe(),R=_.size>I5,P=l.useCallback(W=>{n==null||n(W),u.current=W},[n]),B=l.useCallback(W=>{const le=sCe(W);x(new Map(le.map(Ae=>[go(Ae),Ae])));const _e=I(le);s==null||s(le,_e)},[I,s,x]),U=l.useCallback(()=>{R||B(_)},[R,B,_]),$=_N(E,WI),Q=l.useCallback(()=>{if(u.current&&r&&r.current){const W=r.current.getBoundingClientRect();g(W.top-rCe)}},[g,r]);AN(()=>{cCe(),Q()}),l.useLayoutEffect(()=>{u.current&&T&&Q()},[Q,T]),l.useEffect(()=>{f.current&&d>=0&&f.current.scrollIntoView({block:"nearest"})},[d,f]);const te=l.useCallback(W=>{m(le=>W==="up"?le>0?le-1:C.length-1:le<C.length-1?le+1:0)},[m,C]),X=l.useCallback(W=>{const le=go(W),_e=_.has(le),Ae=W.addedToTabSelection;if(_e!==Ae){const K=new Map(_);Ae?K.set(le,W):K.delete(le),A(K)}},[A,_]),ne=l.useCallback(W=>{const le=ay(W)?k:[W],_e=xN(le,_);A(_e),B(_e)},[k,A,B,_]),q=l.useCallback(W=>{var le;if(["ArrowUp","ArrowDown"].includes(W.code))W.preventDefault(),te(W.code==="ArrowUp"?"up":"down");else if(W.code==="Enter"){W.preventDefault();const _e=C[d];_e&&ne({..._e,addedToTabSelection:!0})}else W.code==="Tab"&&((le=u.current)==null||le.focus())},[te,d,C,ne]);l.useEffect(()=>(We.on("multi-tabs:search",$),We.on("multi-tabs:key-down",q),()=>{We.off("multi-tabs:search",$),We.off("multi-tabs:key-down",q)}),[q,$]);const Z=l.useMemo(()=>b?iCe:aCe,[b]),J=l.useMemo(()=>({maxHeight:`${p>Z?Z:p}px`,...t}),[p,Z,t]);return ho({onOutsideEvent:o,elements:[u,...i],invokeOnce:!1,shouldAttachListeners:!0,includeFocus:b}),c.jsxs(_r.Motion,{className:F(lt.modal,"pointer-events-auto relative z-40 box-border flex max-h-[400px] w-full flex-col rounded-b-6xl rounded-t-4xl border border-white bg-gradient-composer-tabs-menu-light p-4 bg-blend-normal shadow-lg backdrop-blur-2xl backdrop-saturate-150 contrast-more:border-2 contrast-more:bg-stroke-150 dark:border-white/10 dark:bg-gradient-composer-tabs-menu-dark dark:contrast-more:bg-background-150 forced-colors:bg-stroke-150 dark:forced-colors:bg-background-150",b?"px-4 pb-1.5 pt-4":"p-4"),style:J,tabbable:!0,tabIndex:0,"data-testid":"composer-multi-tabs-menu",initial:"start",animate:"end",ref:P,variants:{start:Be,end:{...tt,transition:{duration:tCe,delay:nCe}}},onKeyDown:b?void 0:q,children:[c.jsx(wN,{mode:a,onClose:o}),!b&&c.jsx(IN,{onChange:$}),c.jsx(SN,{highlightedIndex:d,onFocus:m,activeMenuItemRef:f,onMenuItemClick:b?ne:X,tabs:C,emptyStateText:y,isUseRecentHistoryEnabled:v}),!b&&c.jsx(EN,{mode:a,disabled:R,onClick:U})]})}function uCe(e){return Nm()?c.jsx(lCe,{...e}):c.jsx(Yve,{...e})}const NN=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M2 6.25C2 4.45507 3.45507 3 5.25 3H18.75C20.5449 3 22 4.45507 22 6.25V12H20.5V6.25C20.5 5.2835 19.7165 4.5 18.75 4.5H5.25C4.2835 4.5 3.5 5.2835 3.5 6.25V15.75C3.5 16.7165 4.2835 17.5 5.25 17.5H11V19H5.25C3.45507 19 2 17.5449 2 15.75V6.25ZM14 13C12.8954 13 12 13.8954 12 15V20C12 21.1046 12.8954 22 14 22H21C22.1046 22 23 21.1046 23 20V15C23 13.8954 22.1046 13 21 13H14Z"})),pke=Object.freeze(Object.defineProperty({__proto__:null,default:NN},Symbol.toStringTag,{value:"Module"}));function dCe(e){const{onClick:t}=e,{t:n}=Y();return c.jsx(Hs,{data:{title:n("videoCard.pictureInPicture.miniPlayer"),testId:"trigger-picture-in-picture",isVisible:!0,onClick:t},children:c.jsx(NN,{className:"size-6","aria-hidden":!0})})}function RN(e){const{provider:t="microsoft",scenario:n,from:s}=e,o=Fl(),r=xo(),{login:a}=Xi();return l.useCallback(async()=>{if(n&&$t({source:"signin",scenario:n}),o){await r({from:s,to:"/login"});return}await a({provider:t})},[s,r,o,a,t,n])}function mCe(){const{t:e}=Y(),t=an(),n=RN({scenario:"voice",from:"/"});if(!t)return c.jsx(JM,{className:"mx-2",title:e("voice.signUpOrLogin"),onClick:n})}function iy(){const e=M(LX),t=H("edge-multi-tabs-reverse");return e&&!t}const fCe=qe();function pCe(){const e=iy(),[t,n]=l.useState("add"),[s,o]=l.useState(!1),[r,a]=Fe(DX),[i,u]=l.useState(!1),[d,m]=Fe(Gi),f=se(zo),{refs:p,floatingStyles:g}=BC({placement:"top-start",strategy:"absolute",whileElementsMounted:_a,middleware:[pa(()=>({mainAxis:6,crossAxis:0})),ha({padding:12}),K_({apply({rects:x,elements:I}){Object.assign(I.floating.style,{width:`${x.reference.width}px`})}})]}),C=l.useCallback(async x=>{const{isTrigger:I,keyword:_}=x;m(I),I&&(We.emit("multi-tabs:search",_),n("add")),a(I)},[m,a]),v=l.useCallback(()=>{d&&(m(!1),We.emit("mention:cancel","ignore")),a(!1)},[d,m,a]),b=l.useCallback(()=>{d&&(We.emit("mention:cancel","remove"),m(!1)),a(!1),u(!0),o(!0),We.emit("edge:maybe-fetch-page-context","onSaveMultiTabs")},[d,m,a]),y=l.useCallback(x=>e&&r&&d?(We.emit("multi-tabs:key-down",x),!0):!1,[d,e,r]),E=()=>d&&r&&e;return l.useEffect(()=>{const x=fCe.sub(De,()=>{a(!1),u(!1),m(!1),f(new Map)});return()=>{x()}},[f,m,a]),l.useEffect(()=>{const x=()=>{o(!1)};return We.on("edge:multi-tabs-context-fetched-complete",x),()=>{We.off("edge:multi-tabs-context-fetched-complete",x)}},[]),{isMultiTabsMenuExpanded:r,floatingStyles:g,edgeTabMenuRefs:p,setIsMultiTabsMenuExpanded:a,isShowMultiTabsPreviewCard:i,setIsShowMultiTabsPreviewCard:u,handleMentionEvent:C,isMentionTriggered:d,handleMultiTabsMenuSaveBtnEvent:b,handleMultiTabsMenuCloseBtnEvent:v,handleUserInputEnterEvent:E,handleUserInputKeydownEvent:y,multiTabsMenuMode:t,setMultiTabsMenuMode:n,isFetchingTabsPageContext:s}}function hCe(){const e=H("pay-shopify-checkout"),t=H("pay-native-checkout"),n=H("pay-webview-checkout"),s=H("pay-marketplace"),o=H("pay-buy-for-me"),r=H("pay-paypal-integration");return e||t||n||s||o||r}const gCe=(e,t=0)=>{const n=se(kX);return wr(o=>{const r=e==="app"?document.getElementById("app"):e.current;r&&(n(o.height),r.style.setProperty("--composer-container-height",`${o.height+t}px`))})};function vCe(){const{contentPageType:e}=ka(),t=M(Rd),n=l.useCallback(()=>{Ce({pageName:e,source:"streamlinedComposer",scenario:"clickComposer",customData:JSON.stringify({isChatSidePaneOpened:t})})},[e,t]),s=l.useCallback(()=>{Ce({pageName:e,source:"newsComposerInput",scenario:"newsClickNavigateToChat",customData:JSON.stringify({isChatSidePaneOpened:t})})},[e,t]);return{trackConsumptionPageComposerClick:n,trackConsumptionPageComposerSubmit:s}}const PN=N(0),LN=N(),ON=N(),hke=N({}),gke=N({lastPosition:0,wasPlaying:!1}),Gl="daily";function vke(){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"personalizeButton",eventInfo_clickScenario:"",eventInfo_pageName:Gl}})}function Cke(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Select",eventInfo_clickScenario:e,eventInfo_pageName:Gl}})}function yke(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_UnSelect",eventInfo_clickScenario:e,eventInfo_pageName:Gl}})}function bke(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Save",eventInfo_clickScenario:e.join(","),eventInfo_pageName:Gl}})}function xke(){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Later",eventInfo_clickScenario:"",eventInfo_pageName:Gl}})}const _5={Podcast:"podcastPlayer",DailyBriefing:"dailyBriefingPlayer"},zu={Daily:Gl,Podcast:"podcast"},Or={Skip:"skip",Rewind:"rewind",Play:"play",Pause:"pause",Next:"next",Previous:"previous",Playback:"playback",Mute:"mute",Unmute:"unmute",Expand:"expand",Collapse:"collapse"};function za(e,t,n){Ce({source:e,pageName:e===_5.Podcast?zu.Podcast:zu.Daily,scenario:t,customData:n})}function DN(e){const{url:t,podcastId:n,schema:s,includeTranscripts:o=!1}=e,r={...n&&{podcastId:n},includeTranscripts:String(!!o)};return St(t,s,{query:r}).then(a=>a.data)}function CCe(e,t,n,s,o){return s&&n?{url:`/sharing/podcasts/${n}`,schema:ip}:!e&&!o?null:t?{url:`/podcasts/${t}/${e}`,schema:ip}:{url:"/daily-briefing",podcastId:e,includeTranscripts:!s,schema:zE}}function yCe(){const{podcastId:e,podcastType:t,shareId:n}=$p({strict:!1}),s=M(LN),o=e??s,r=hh(),a=!!e||r,i=H("1s-dbrief-fetchall"),u=se(ON),d=CCe(o,t,n,a,i),m=l.useCallback(()=>{if(!d)throw new Error("Media key is not defined");return DN(d)},[d]),{data:f,isLoading:p,error:g}=Rs({queryKey:["dailyBriefingMedia",o,a,n,t,i],enabled:!!d,queryFn:m,staleTime:4e3});l.useEffect(()=>{if(f&&a){const b=ip.parse(f);u(b.podcastId)}},[f,a,u]);const C=()=>a?t?`${zu.Podcast}.${t}`:zu.Podcast:zu.Daily;if(f&&a){const b=ip.parse(f),{isAvailable:y,podcastId:E,chapters:x,playback:{positionInSeconds:I,chapterId:_}}=b,T=n?`/sharing/podcasts/${n}/Files`:`/podcasts/${t}/${E}/Files`,A=x.map(({id:P,title:B,image:U,audio:$})=>({id:P,title:B,image:{landscape:{...U.landscape,url:`${T}/${U.landscape.name}`},portrait:{...U.portrait,url:`${T}/${U.portrait.name}`}},audio:$})),k={isAvailable:y,podcastId:E,chapters:A.map(P=>({...P,audio:{default:{url:`${T}/${P.audio.name}`,duration:P.audio.duration,transcript:null}},transitionMusic:null,sources:[]})),playback:{position:I,chapterId:_}},R={...b,chapters:A};return{data:k,podcastData:R,isPodcast:a,isLoading:p,error:g,pageImpressionKey:C()}}return{data:!a&&f?zE.parse(f):void 0,isPodcast:a,isLoading:p,error:g,pageImpressionKey:C()}}function Ske(){const{data:e}=Rs({queryKey:["dailyBriefingTopics"],queryFn:()=>DN({url:"/daily-briefing/topics",schema:HE})});return{data:e}}async function Eke(e,t){await Nn({path:"/daily-briefing/topics/unfollow",args:{body:{ids:t}}}),await Nn({path:"/daily-briefing/topics/follow",args:{body:{ids:e}}})}const bCe=1;function xCe(){const e=xo(),t=se(bo),n=se(LN),[s,o]=Fe(PN),r=H("1s-dbrief-fetchall"),{firstStoryId:a,formCode:i}=fO({strict:!1}),u=l.useCallback(async()=>{await e({from:"/daily",to:"/discover"}),n(void 0),t(null)},[n,t,e]),d=l.useCallback(async p=>{if(i&&D.setFormCode(i),a){const g=p.split(",");if(g.length>=2){g[bCe]=a;const C=g.join(",");n(C)}else n(p)}else n(p);o(0),t("daily-briefing-player"),await e({from:"/",to:"/daily",search:{firstStoryId:a,...r&&p&&{chapterIds:p}}})},[i,a,o,t,e,r,n]),m=l.useCallback(async()=>{o(s),await e({from:"/daily",to:"/topic-selection"}),t(null)},[t,o,s,e]),f=l.useCallback(async()=>{o(s),t("daily-briefing-player"),await e({from:"/topic-selection",to:"/daily"})},[s,o,t,e]);return{navigateToDailyBriefing:d,navigateToTopicSelection:m,exitDailyBriefing:u,returnToDailyBriefing:f,currentChapterIndex:s}}function SCe({media:e,thresholds:t,key:n}){const s=l.useRef(0),o=l.useRef([]),r=l.useRef(new Set);return l.useEffect(()=>{o.current=(t==null?void 0:t.sort((a,i)=>a.seconds-i.seconds))??[]},[t]),l.useEffect(()=>{s.current=0,r.current=new Set;let a=null;if(!e)return()=>{};function i(){a=performance.now()}function u(p){if(a!==null){const g=(performance.now()-a)/1e3;s.current+=g,a=p?performance.now():null,f()}}function d(){u(!1)}function m(){u(!0)}const f=()=>{for(let p=0;p<o.current.length;p+=1){const g=o.current[p];g&&s.current>=g.seconds&&!r.current.has(p)&&(r.current.add(p),g.callback())}};return e.addEventListener("playing",i),e.addEventListener("pause",d),e.addEventListener("ended",d),e.addEventListener("timeupdate",m),()=>{e.removeEventListener("playing",i),e.removeEventListener("pause",d),e.removeEventListener("ended",d),e.removeEventListener("timeupdate",m)}},[e,n]),{totalTimePlayedRef:s}}function Gu(e){if(!e)return NaN;const t=e.split(":");if(t.length!==2)return NaN;const[n,s]=t,o=Number(n),r=Number(s);return o<0||r<0||r>=60?NaN:o*60+r}function ECe(e,t,n,s){var o,r;return e===n.length-1&&t===s.length-1?1/0:t===s.length-1?Gu((o=n[e+1])==null?void 0:o.startTime):Gu((r=s[t+1])==null?void 0:r.startTime)}function wCe(e){let t=-1;return e.map((s,o,r)=>{var a;return{...s,startTime:Gu(s.startTime),endTime:o<r.length-1?Gu((a=r[o+1])==null?void 0:a.startTime):1/0,words:s.words.map((i,u,d)=>(t+=1,{...i,startTime:Gu(i.startTime),endTime:ECe(o,u,r,d),index:t}))}})}function jN(e,t,n){return{DailyBriefing:`${t}|${n}`,Podcast:t}[e]}function F8(e,t,n){const s=jN(e,t,n);s&&Nn({path:`/media/${e}/${s}/playback/completed`,args:{}}).catch(o=>{fw(o)})}function ICe(e,t,n,s){const o=jN(e,n,s);o&&Nn({path:`/media/${e}/${o}/playback`,args:{options:{method:"PATCH"},body:{positionInSeconds:t}}}).catch(r=>{fw(r)})}function E0(e,t){const n=Object.keys(t);if(n.length!==0)return typeof e<"u"&&n.includes(e)?t[e]:Object.values(t)[0]}const _Ce=5,TCe=5e3;function FN(){var Qe,st;const{exitDailyBriefing:e}=xCe(),{data:t,isPodcast:n,pageImpressionKey:s}=yCe(),o=n?_5.Podcast:_5.DailyBriefing,r=M(ON),a=M(qd),i=l.useMemo(()=>t?n?t.chapters.map(ve=>{var Te;return[((Te=ve.audio.default)==null?void 0:Te.duration)??0]}):t.chapters.map(ve=>{var Te;const xe=[((Te=E0(a,ve.audio))==null?void 0:Te.duration)??0];return ve.transitionMusic&&xe.push(ve.transitionMusic.duration),xe}):[],[t,n,a]),[u,d]=Fe(PN),m=l.useRef(null),[f,p]=l.useState(!1),g=u<i.length-1,C=u>0,v=l.useRef(performance.now()),b=l.useRef(performance.now()),y=l.useMemo(()=>{var ve;return(ve=t==null?void 0:t.chapters[u])!=null&&ve.id?t.chapters[u].id:r&&r.split(",")[u]},[t==null?void 0:t.chapters,u,r]),E=l.useMemo(()=>t?n?t.chapters.map(ve=>{var xe;return[((xe=ve.audio.default)==null?void 0:xe.url)??""]}):t.chapters.map(ve=>{var Te;const xe=[((Te=E0(a,ve.audio))==null?void 0:Te.url)??""];return ve.transitionMusic&&xe.push(ve.transitionMusic.url),xe}):[],[t,a,n]),[x,I]=l.useState(0),[_,T]=l.useState([]),[A,k]=l.useState(null),R=JSON.stringify({podcastId:r,eventInfo_chapterId:(Qe=t==null?void 0:t.chapters[u])==null?void 0:Qe.id,eventInfo_chapterPlayDuration:performance.now()-v.current}),[P,B]=Fe(Rme),U=l.useCallback(()=>{B(ve=>{const xe=!ve,Te=xe?Or.Mute:Or.Unmute;return za(o,Te,R),xe})},[R,o,B]);SCe({media:A,key:y,thresholds:[{seconds:_Ce,callback:()=>{if(y&&!_.includes(y)){try{Nn({path:`/daily-briefing/${y}/viewed`,args:{analytics:{anonymousPath:"/daily-briefing/*/viewed"}}})}catch{}T([..._,y])}}}]}),l.useEffect(()=>{if(!A||!f)return;const ve=setInterval(()=>{const xe=A.currentTime;ICe("DailyBriefing",xe,r,y)},TCe);return()=>{clearInterval(ve)}},[A,f,y,r]);function $(){var ve;p(!0),(ve=m.current)==null||ve.playAnimation(),A==null||A.play(),za(o,Or.Play,R)}function Q(){var ve;p(!1),(ve=m.current)==null||ve.pauseAnimation(),A==null||A.pause(),za(o,Or.Pause,R)}function te(ve){if(A){const xe=Math.min(A.currentTime+ve,A.duration);A.currentTime=xe,za(o,Or.Skip,JSON.stringify({seconds:ve}))}}function X(ve){if(A){const xe=Math.max(A.currentTime-ve,0);A.currentTime=xe,za(o,Or.Rewind,JSON.stringify({seconds:ve}))}}function ne(){var ve,xe,Te;F8("DailyBriefing",r,y),t!=null&&t.chapters&&D.trackEvent({name:"system",data:{eventName:"chapterPlayDuration",eventInfo_podcastId:r,eventInfo_chapterIndex:u,eventInfo_isCompleted:u===t.chapters.length-1,eventInfo_publisherName:(xe=(ve=t.chapters[u])==null?void 0:ve.sources)==null?void 0:xe.map(Ze=>Ze.publisherName).join(","),eventInfo_impressionElement:s,eventInfo_customData:JSON.stringify({eventInfo_chapterId:(Te=t.chapters[u])==null?void 0:Te.id,eventInfo_chapterPlayDuration:performance.now()-v.current})}})}function q(){F8("Podcast",r),D.trackEvent({name:"system",data:{eventName:"podcastPlayDuration",eventInfo_isCompleted:!0,eventInfo_podcastId:r,eventInfo_podcastPlayDuration:performance.now()-b.current,eventInfo_impressionElement:s}})}function Z(){A&&(A.currentTime=0)}function J(ve){ne(),v.current=performance.now(),Z(),me(-1),I(0),d(ve)}function W(){g&&(J(u+1),za(o,Or.Next,R))}function le(){C&&(J(u-1),za(o,Or.Previous,R))}function _e(ve){A&&(A.playbackRate=ve/100)}function Ae(ve){const Te=(mg.indexOf(ve)+1)%mg.length;return mg[Te]??Od}function K(){p(!0);const ve=E[u]??[];x<ve.length-1?I(xe=>xe+1):ve.length-1===x&&g?W():(Me(),e())}function be(){v.current=performance.now(),b.current=performance.now()}function Me(){n?q():ne()}const je=!n,oe=l.useMemo(()=>{if(!je)return[];const ve=t==null?void 0:t.chapters[u];if(!ve)return[];const xe=E0(a,ve.audio);return wCe((xe==null?void 0:xe.transcript)??[])},[je,a,t==null?void 0:t.chapters,u]),ie=l.useMemo(()=>oe.flatMap(ve=>ve.words),[oe]),ee=l.useMemo(()=>i[u]??[],[i,u]),me=se(Pme),Pe=l.useCallback(ve=>{const xe=ie.find(Te=>ve>=Te.startTime&&ve<Te.endTime);return(xe==null?void 0:xe.index)??-1},[ie]),Ve=l.useCallback(ve=>{const xe=ve.currentTarget;let{currentTime:Te}=xe;for(let Le=0;Le<x;Le+=1){const Ye=ee[Le];Ye&&(Te+=Ye)}if(Te===0)return;const Ze=Pe(Te);me(Ze)},[ee,x,Pe,me]);return l.useEffect(()=>{if(!(!je||!A))return A.addEventListener("timeupdate",Ve),()=>{A.removeEventListener("timeupdate",Ve)}},[A,Ve,je]),{isPlaying:f,currentChapterId:y,currentChapterIndex:u,chapterDurations:i,currentChapterPartIndex:x,audioElement:A,setAudioElement:k,audioChaptersProgressBarRef:m,currentChapterAudioSrc:((st=E[u])==null?void 0:st[x])??"",isPlayerMuted:P,currentChapterTranscript:oe,play:t?$:void 0,pause:t?Q:void 0,skipForward:t?ve=>te(ve):()=>{},skipBack:t?ve=>X(ve):()=>{},goToNextChapter:g?W:void 0,goToPreviousChapter:C?le:void 0,getNextPlaybackSpeed:t?ve=>Ae(ve):void 0,applyPlaybackRate:t?ve=>_e(ve):()=>{},onChapterEnded:K,resetAllTimers:be,trackPlayerEndEvents:Me,togglePlayerMuted:U}}function ACe(){const{currentChapterId:e}=FN();return l.useMemo(()=>{if(e)return{type:"dailyBriefing",chapterId:e}},[e])}function kCe(e,t){const[n,s]=l.useState(0);return l.useEffect(()=>{if(!e)return()=>{};const o=d=>{d.preventDefault(),s(m=>m+1)},r=d=>{d.preventDefault(),s(m=>Math.max(0,m-1))},a=d=>{d.preventDefault(),s(0),t==null||t(d)},i=()=>{document.hidden&&s(0)},u=d=>{d.preventDefault()};return window.addEventListener("dragenter",o,!0),window.addEventListener("dragleave",r,!0),window.addEventListener("drop",a,!0),document.addEventListener("visibilitychange",i),t&&window.addEventListener("dragover",u),()=>{window.removeEventListener("dragenter",o,!0),window.removeEventListener("dragleave",r,!0),window.removeEventListener("drop",a,!0),document.removeEventListener("visibilitychange",i),t&&window.removeEventListener("dragover",u)}},[e,t]),n>0}async function MCe(e,t){try{const n=await e.arrayBuffer(),s=new Uint8Array(n),o=await St("/attachments",xq,{options:{method:"POST",headers:{"Content-Type":pr(e)},body:new Blob([s]),signal:t}}).then(r=>r.data);if("errorCode"in o)throw new Error(o.errorCode);return o.url}catch(n){throw console.error("Error uploading image",n),n}}async function NCe(e,t){try{const n=new FormData;e.type!==""?n.append("file",e):n.append("file",new File([e],e.name,{type:pr(e)}),e.name);const s=await St("/attachments",qE,{options:{method:"POST",body:n,signal:t}}).then(o=>o.data);if("errorCode"in s)throw new Error(s.errorCode);return s.id}catch(n){throw console.error("Error uploading document",n),n}}async function RCe(e,t){try{const n=await St("/attachments/onedrive",qE,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e}),signal:t}}).then(s=>s.data);if("errorCode"in n)throw new Error(n.errorCode);return n.id}catch(n){throw console.error("Error uploading OneDrive file",n),n}}async function PCe(e,t){switch(e.kind){case"local-file":return NCe(e.file,t);case"onedrive":return RCe(e.item.id,t);default:{const n=e;throw new Error(`Unhandled upload kind: ${n}`)}}}async function UN(e){const{uploadTasks:t,signal:n,onSuccess:s,onError:o,onFinish:r}=e,a=t.map(async i=>{const u=i.upload;try{if(i.type==="document"){const m={content:{type:"document",attachmentId:await PCe(i.upload,n)},item:{type:"document",partId:i.partId,fileName:i.metadata.name,contentType:i.metadata.contentType},size:i.metadata.size,type:i.metadata.contentType},f={id:i.id,file:i.upload.file,scenario:i.scenario,processing:!1,attachment:m,type:"file"};s(f)}else{const d=await MCe(u.file,n),m={content:{type:"image",url:d},item:{type:"image",url:d},size:i.metadata.size,type:i.metadata.contentType},f={id:i.id,file:u.file,scenario:i.scenario,processing:!1,attachment:m,type:"image"};s(f)}}catch(d){o&&o(d,i)}finally{r()}return null});return Promise.all(a)}function wke(e,t){const n=t.split(".").pop()??"";return`/attachments/${e}.${n}`}async function Ike(e){const{file:t,type:n}=await mpe(e,lpe(e));return{id:`file-${Date.now()}-${crypto.randomUUID()}`,file:t,processing:!1,attachment:{content:{type:u0,url:e},item:{type:u0,url:e},size:t.size,type:n},type:u0}}function jf(e){switch(e.kind){case"local-file":{const{file:t}=e;return{name:t.name,contentType:pr(t),size:t.size}}case"onedrive":{const{item:t}=e;return{name:t.name,contentType:L3(t.name),size:t.size}}default:{const t=e;throw new Error(`Unhandled upload kind: ${t}`)}}}const BN=qe();let T5=0;const Fp=new Set;function Wu(e){BN.set(s3,e)}function LCe(){BN.set(wa,{isOpen:!0,scenario:null,reason:"fileUpload"})}async function OCe(e){const{uploads:t,scenario:n,onError:s,onSuccess:o,replaceExisting:r=!1,shouldUploadImageAsDocument:a}=e;r&&A5();const i=[],u=[];for(const m of t){const f=jf(m),p=Hl(f.contentType),g=Lk();if(p||a){const C=String(T5);T5+=1,i.push({id:g,upload:m,partId:C,metadata:f,type:"document"}),u.push({id:g,file:m.file,scenario:n,processing:!0,type:"file"})}else i.push({id:g,upload:m,metadata:f,type:"image"}),u.push({id:g,file:m.file,scenario:n,processing:!0,type:"image"})}Wu(m=>[...m,...u]);const d=new AbortController;Fp.add(d),await UN({signal:d.signal,uploadTasks:i,onSuccess:m=>{Wu(f=>f.map(p=>p.id===m.id?m:p)),o==null||o(m)},onError:(m,f)=>{if(m instanceof Error&&m.message==="not-signed-in")throw A5(),LCe(),m;const p={id:f.id,file:f.upload.file,scenario:n,processing:!1,error:m};Wu(g=>g.map(C=>C.id===f.id?p:C)),s&&s(m,f.upload)},onFinish:()=>{Fp.delete(d)}}),cn({scenario:n??"fileUpload",page:"uploadAttachmentVanilla"})}function A5(){Wu([]),VN(),T5=0}function DCe(e){Wu(t=>{const n=[...t];return n.splice(e,1),n})}function VN(){for(const e of Fp)e.abort();Fp.clear()}function jCe(){const e=ye("use-new-attachment"),[t,n]=Fe(s3),{t:s}=Y(),o=l.useRef(new Set),r=l.useRef(0),a=se(wa),i=l.useCallback(()=>{for(const g of o.current)g.abort();o.current.clear()},[]),u=l.useCallback((g,C)=>{a({isOpen:!0,scenario:C??null,reason:g})},[a]),d=l.useCallback(()=>{u("fileUpload")},[u]),m=l.useCallback(()=>{n([]),r.current=0,i()},[i,n]),f=l.useCallback(async g=>{const{uploads:C,scenario:v,onError:b,replaceExisting:y=!1,shouldUploadImageAsDocument:E}=g;y&&m();const x=[],I=[];for(const T of C){const A=jf(T),k=Hl(A.contentType),R=Lk();if(k||E){const P=String(r.current);r.current+=1,x.push({id:R,upload:T,partId:P,metadata:A,type:"document",scenario:v}),I.push({id:R,file:T.file,scenario:v,processing:!0,type:"file"})}else x.push({id:R,upload:T,metadata:A,type:"image",scenario:v}),I.push({id:R,file:T.file,scenario:v,processing:!0,type:"image"})}n(T=>[...T,...I]);const _=new AbortController;o.current.add(_),await UN({signal:_.signal,uploadTasks:x,onSuccess:T=>{var A;if(n(k=>k.map(R=>R.id===T.id?T:R)),(A=T.attachment)!=null&&A.item){const{type:k}=T.attachment.item;fr({msg:s(k==="image"?"fileUpload.uploadedImage":"fileUpload.uploadedFile")})}},onError:(T,A)=>{if(T instanceof Error&&T.message==="not-signed-in")throw m(),d(),T;const k={id:A.id,file:A.upload.file,scenario:v,processing:!1,error:T};n(R=>R.map(P=>P.id===A.id?k:P)),b&&b(T,A.upload)},onFinish:()=>{o.current.delete(_)}}),cn({scenario:v??"fileUpload",page:"uploadAttachmentReact"})},[m,d,n,s]),p=l.useCallback(g=>{n(C=>{const v=[...C];return v.splice(g,1),v})},[n]);return l.useEffect(()=>()=>{e?VN():i()},[e,i]),e?{uploadedAttachments:t,isUploadingAttachments:t.some(g=>g.processing===!0),getUploadMetadata:jf,setUploadedAttachments:n,removeAttachmentByIndex:DCe,clearAttachments:A5,uploadAttachments:async({uploads:g,scenario:C,onError:v,replaceExisting:b,shouldUploadImageAsDocument:y})=>OCe({uploads:g,scenario:C,onError:v,replaceExisting:b,shouldUploadImageAsDocument:y,onSuccess:E=>{var x;if((x=E.attachment)!=null&&x.item){const{type:I}=E.attachment.item;fr({msg:s(I==="image"?"fileUpload.uploadedImage":"fileUpload.uploadedFile")})}}})}:{uploadedAttachments:t,isUploadingAttachments:t.some(g=>g.processing===!0),clearAttachments:m,uploadAttachments:f,getUploadMetadata:jf,removeAttachmentByIndex:p,setUploadedAttachments:n}}function FCe(e,t,n,s){const{t:o}=Y(),{clearAttachments:r,uploadAttachments:a,getUploadMetadata:i,isUploadingAttachments:u,uploadedAttachments:d,removeAttachmentByIndex:m}=jCe(),f=M(Er),{maxFilesPerMessage:p}=f,g=M(Ul),C=l.useMemo(()=>d.filter(({error:_})=>!_),[d]),v=C.length,b=l.useMemo(()=>new Set(C.filter(({file:_})=>!!_).map(({file:_})=>`${_==null?void 0:_.name}-${_==null?void 0:_.size}-${_==null?void 0:_.type}-${_==null?void 0:_.lastModified}`)),[C]),y=l.useCallback(async _=>{const{uploads:T,scenario:A,replaceExisting:k=!0,supportedMimeTypes:R=g}=_,P=T.filter(({file:B})=>!b.has(`${B.name}-${B.size}-${B.type}-${B.lastModified}`));if(P.length===0){n();return}if(!k&&v+P.length>p){t({title:o("composer.errors.multi.tooManyFiles.title",{maxFiles:p}),message:o("composer.errors.multi.tooManyFiles.message")});return}for(const B of P){const U=kk(B.file,{supportedMimeTypes:R,scenario:A});if(U){t(U),n();return}}e();try{await a({uploads:P,scenario:A,replaceExisting:k,onError:(B,U)=>{if(B instanceof Error){t(Nk(B.message));const{name:$,size:Q}=i(U);Mpe({name:$,size:Q,message:B.message,kind:U.kind})}else t({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}})}catch(B){B instanceof Error&&B.message==="not-signed-in"?s():t({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}},[g,e,b,n,v,p,t,o,a,i,s]),E=l.useCallback(async _=>{const{rawFiles:T,scenario:A,replaceExisting:k=!0,supportedMimeTypes:R=g}=_;if(T.length===0)return;const P=[];for(const B of T)P.push({file:Tpe(B),kind:"local-file"});await y({uploads:P,scenario:A,replaceExisting:k,supportedMimeTypes:R})},[y,g]),x=l.useCallback(()=>{r(),n()},[r,n]),I=l.useCallback(_=>{d.length===1?x():m(_)},[m,d,x]);return{processUploadedFiles:y,processUploadedLocalFiles:E,isUploadingAttachments:u,uploadedAttachments:d,resetFileUpload:x,removeAttachment:I}}function _h(){var s;const e=M(Wn)==="side-by-side",t=bt({breakpoint:"sm"}),n=!!((s=ae.instance().config().actions)!=null&&s.alwaysLayoutChatDetailsOverChat);return e&&(t||n)}function HN(e){function t(n,s){return!n||s.length===0?null:UCe(n.text,s.sort((o,r)=>o.position-r.position))}return e.map(n=>{if(n.author!=="ai"||!n.content.find(i=>i.type==="citation"))return n;let o=null,r=[];for(const i of n.content)if(i.type==="text"){const u=t(o,r);u&&o&&(o.text=u.text,o.citations=u.citationMetadata),r=[],o=i}else i.type==="citation"&&r.push(i);const a=t(o,r);return a&&o&&(o.text=a.text,o.citations=a.citationMetadata),n})}function UCe(e,t){if(!t)return{text:e,citationMetadata:[]};let n=e;const s=[];let o=0;const r=new Map;for(const i of t){const u=i.url;if(!r.has(u)){o+=1;const d=`${o}`;r.set(u,d),s.push({index:d,title:i.title,url:i.url,iconUrl:i.iconUrl??null,publisher:i.publisher??null,snippet:i.snippet??null})}}const a=t.map((i,u)=>({citation:i,originalIndex:u})).sort((i,u)=>{const d=u.citation.position-i.citation.position;return d!==0?d:u.originalIndex-i.originalIndex}).map(i=>i.citation);for(const i of a){const u=i.url,d=r.get(u);d!==void 0&&(n=hse(n,yT(d,i.url),i.position))}return{text:n,citationMetadata:s}}function BCe(){const e=gA(),{conversationId:t}=$p({strict:!1}),{data:n,error:s,isLoading:o}=Rs({queryKey:["sharePage",t],queryFn:()=>VCe(`/conversations/shares/${t}`),staleTime:1/0,enabled:e&&!!t});return{data:n,error:s,isLoading:o}}async function VCe(e){const{data:t,response:n}=await St(e,VZ,{parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/shares/*"}});if(n.status>=400&&n.status<500)throw new HCe(n.status.toString());return{...t,messages:HN(t.messages.reverse())}}class HCe extends Error{}function zCe(){const e=gA(),{isMediaViewerOpen:t}=ka(),n=M(bo),s=H("share-continue-v2"),{error:o}=BCe();return e?o?!1:s||t||!!n:!0}function cy(){return nv("(hover: hover) and (pointer: fine)")}function ly(){const e=M(bn);return!!(e!=null&&e.group)}function Xa(e){const t=ly(),n=t3(),s=H("podcast-in-create-drawer"),o=iN(),r=H("quiz-in-create-drawer");if(!t)switch(e){case"podcast":return s;case"researchReport":return o;case"quiz":return r;case"actions":return n;case"image":case"voice":case"uploadFile":default:return!0}switch(e){case"image":return!0;case"podcast":case"researchReport":case"quiz":case"actions":case"voice":case"uploadFile":default:return!1}}const GCe={h550:"550",h600:"600",h760:"760"};function Up(e){const{breakpoint:t}=e,n=GCe[t];return!nv(`(min-height: ${n}px)`)}const zN=N(),_ke=N(!1),Tke=N(!1),WCe=/\/(?:.*\/)?(ar|vi|gm)-([a-zA-Z0-9]{6,10})/,$Ce="gemSnapshotKey";function qCe(){const e=M(zN),{contentPageType:t}=ka();return l.useMemo(()=>{if(!(!e||!t))try{const n=e.pathname.match(WCe),s=(n==null?void 0:n[2])??null;if(!s)return;switch(t){case"newsGem":{const o=e.searchParams.get($Ce);return o?{type:"newsGem",gemId:s,snapshotKey:o}:void 0}case"newsArticle":return{type:"news",articleId:s};default:return}}catch{return}},[e,t])}function ZCe(){const e=xo(),t=Id();return l.useCallback(async()=>{await e({to:"/agents",params:{},from:t.state.location.pathname})},[e,t.state.location.pathname])}function KCe(){const e=on("kill-domain-referrer");return l.useCallback(t=>Eo(t,{preventReferrer:e}),[e])}function YCe(){var m,f,p;const e=H("cross-promo-popup"),t=(p=(f=(m=ae.instance().config().crossPromotion)==null?void 0:m.aggressive)==null?void 0:f.popup)==null?void 0:p.secondDay,n=tn(e2),s=!wp(n,sp),o=tn(rv),r=!wp(o,2*sp),a=tn(Qf),i=qC(a,2),u=M(oC);return l.useMemo(()=>!!(s&&e&&r&&i&&t&&(u===!0?!1:u!==void 0)),[t,e,r,i,s,u])}function QCe(e){const{status:t,eventName:n,source:s,isMobile:o}=e;switch(n){case"crossPromotionStripCard":return{eventName:n,eventInfo_source:s,eventInfo_status:t};case"crossPromotionTopBanner":return{eventName:n,eventInfo_isMobilePlatform:o,eventInfo_status:t};case"copilotMobileCrossSelling":case"crossPromotionProfileBanner":case"crossPromotionProfileMenuItem":return{eventName:n,eventInfo_status:t};default:return{eventName:n,eventInfo_status:t}}}function Oc(e){const{name:t}=e;D.trackEvent({name:t,data:QCe(e)})}function GN(){const[e,t]=Fe(sr),n=H("cross-promo-popup"),s=H("top-banner-cross-promo-desktop");let o="setting";(n||(e==null?void 0:e.type)==="popup")&&(o="popup"),s&&(o="topBanner"),(e==null?void 0:e.type)==="card"&&(o="bottomRightCard");const r=se(bo);return l.useCallback(()=>{const a=Date.now().toString();Mn(rv,a);const i=tn(Qf);Mn(Qf,(parseInt(i??"0",10)+1).toString()),Oc({name:"interaction",status:"Dismissed",eventName:"crossPromotionStripCard",source:o}),r(null),t(null)},[o,r,t])}const U8=new Map;function JCe(){const{createConversation:e}=mm(),t=M(C1),[n,s]=Fe(De),o=M(zN);return{switchMsnConversation:l.useCallback(async()=>{if(!o||!n)return;const a=o.toString();let i=U8.get(a);if(!i){i=t,n!==t&&(i=await e({shouldNavigateToChat:!1})),i&&(s(i),U8.set(a,i));return}i!==n&&sm({id:i,shouldNavigateToChat:!1})},[o,n,t,e,s])}}const XCe=(e,t)=>{var n,s,o,r;if(e==="light"){const a=(s=(n=ae.instance().config().composer)==null?void 0:n.shadowBoxStyleOverride)==null?void 0:s.outerLargeBoxShadowLight;if(a)return a;if(t)return D5e}else if(e==="dark"){const a=(r=(o=ae.instance().config().composer)==null?void 0:o.shadowBoxStyleOverride)==null?void 0:r.outerLargeBoxShadowDark;if(a)return a;if(t)return j5e}return L5e},e3e=(e,t)=>{var n,s,o,r;if(e==="light"){const a=(s=(n=ae.instance().config().composer)==null?void 0:n.shadowBoxStyleOverride)==null?void 0:s.outerSmallBoxShadowLight;if(a)return a;if(t)return F5e}else if(e==="dark"){const a=(r=(o=ae.instance().config().composer)==null?void 0:o.shadowBoxStyleOverride)==null?void 0:r.outerSmallBoxShadowDark;if(a)return a;if(t)return U5e}return O5e},t3e=e=>e==="dark"?QM:YM;function vf(e){return e?V5e:B5e}function n3e(e){return e?z5e:H5e}function WN(e,t,n){const s=qe();return new Promise((o,r)=>{let a=null;t(s.get(e))&&o(s.get(e));const i=s.sub(e,()=>{const d=s.get(e);t(d)&&(i(),o(d))}),u=()=>{i(),a&&clearTimeout(a)};n&&(a=setTimeout(()=>{u(),r(new Error("Timeout waiting for atom to be ready"))},n))})}function s3e(e){return e.some(t=>t.author==="human"&&t.content.some(n=>n.type==="image"||n.type==="document"))}function Ake(e){var n,s;const t=e.filter(o=>o.author==="human");if(t.length===1){const o=(s=(n=t[0])==null?void 0:n.content.find(r=>r.type==="image"||r.type==="document"))==null?void 0:s.type;return o==="image"?"image":o==="document"?"file":void 0}return s3e(e)?"image|file":void 0}function o3e(e){const n=new URL(e).pathname.split("/").filter(Boolean);return n[n.length-1]??null}async function B8(){Cme();const e=qe(),t=o3e(window.location.href);let n;e.set(L2,!0);try{const s=await r3e(`/conversations/shares/${t}/continue`),{id:o,title:r}=s.conversation;n=o;const a=new Date().toISOString(),i={id:o,updatedAt:a,isNew:!1,title:r,history:[],continuedAt:a,group:null};e.set(xt,u=>{const d=new Map(u);return d.set(o,i),d}),e.set(De,o),await i3e(o)}catch(s){throw Br({title:Pt.t("composer.errors.continue.title"),message:Pt.t("composer.errors.continue.message")}),yme({shareId:t??"",conversationId:n,error:s instanceof Error?s:new Error(String(s))}),s}finally{e.set(L2,!1)}}async function r3e(e){return(await St(e,IZ,{options:{method:"POST"}})).data}const a3e=1e4;async function i3e(e){await WN(xt,t=>{const n=t.get(e);return((n==null?void 0:n.history)??[]).length>0},a3e)}function c3e(e,t,n){if(!e||!t)return!1;const s=e.getTime(),o=t.getTime(),r=n?n.getTime():null;return o<=s||r===null?!1:r<=s}function k5(e,t){const n=Dt(e),s=Dt(t);return n.getTime()>s.getTime()}function Bp(e,t){return sv(e,-t)}const l3e=11,u3e=7,d3e=2,m3e=10,f3e=21,p3e=21,h3e=10,V8=S({daysActive:L(Wp())}),M5=S({result:ke(["dismissed","positive","negative"]),date:Wp(),dismissCounter:j()});function g3e(e){const t=new Date;let n=e;return e.some(s=>xh(s,t))||(n=[...e,t]),n.length>h3e?n.slice(-10):n}function v3e(){const e=wt(i4,V8),t=(e==null?void 0:e.daysActive)??[],n=g3e(t),s=Bp(new Date,u3e),o=n.filter(r=>k5(r,s)||xh(r,s)).length;return n!==t&&Gn(i4,V8,{daysActive:n}),o}function C3e(){const e=wt(t2,M5);if(!e)return!1;const t=e.result==="positive",n=e.result==="negative"&&k5(e.date,Bp(new Date,p3e)),s=e.result==="dismissed"&&k5(e.date,Bp(new Date,e.dismissCounter>5?f3e:m3e));return t||n||s}function y3e(e,t){let n="popUpDismiss";t==="negative"?n="appThumbDown":t==="positive"&&(n="appThumbUp"),$t({source:n,conversationId:e});const s=wt(t2,M5),o=(s==null?void 0:s.result)==="dismissed"?s.dismissCounter:0,r={result:t,date:new Date,dismissCounter:t==="dismissed"?o+1:0};Gn(t2,M5,r)}let H8=!1;function b3e(){const e=fm();if(typeof window>"u"||!e||H8)return;performance.mark("startupTime-begin",{startTime:window.appStart}),performance.mark("composer-visible");const t=performance.measure("measure-TTC","startupTime-begin","composer-visible");po({feature:"composer",scenario:"measure-TTC",duration:t.duration}),H8=!0}function Vp({className:e,style:t}){return c.jsx("div",{className:de("animate-[shimmer_2s_infinite] bg-black/5 bg-gradient-to-r dark:bg-white/5","from-transparent via-background-150 to-transparent","bg-[length:50%_100%] bg-no-repeat",e),style:t})}function x3e(e){const{isImageOrVideo:t,isInlineImageOrVideo:n}=e;let s="h-[300px]";return n?s="h-[150px]":t&&(s="h-[144px] sm:h-[176px]"),c.jsx("div",{className:"flex flex-col gap-3 px-4",children:c.jsx(Vp,{className:de("w-full",s),style:{clipPath:"var(--clip-path-squircle-36)"}})})}function z8(e){const{type:t,length:n}=e;if(t==="ads")return c.jsx("div",{});const s=t==="image"||t==="video",o=t==="inlineImage"||t==="inlineVideo",r=s&&n===1;return c.jsx(j1,{size:"md",stroke:!0,className:de("relative flex",r?"w-[300px]":"w-full","flex-col py-3 transition-opacity duration-300 ease-in-out"),children:c.jsx(x3e,{isImageOrVideo:s,isInlineImageOrVideo:o})})}function kke(e){if(e.type==="image")return e.images.length;if(e.type==="video")return e.videos.length}function N5(){return N5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},N5.apply(null,arguments)}function S3e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var E3e=l.useLayoutEffect,w3e=function(t){var n=gi.useRef(t);return E3e(function(){n.current=t}),n},G8=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},I3e=function(t,n){var s=gi.useRef();return gi.useCallback(function(o){t.current=o,s.current&&G8(s.current,null),s.current=n,n&&G8(n,o)},[n])},W8={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},_3e=function(t){Object.keys(W8).forEach(function(n){t.style.setProperty(n,W8[n],"important")})},$8=_3e,Qn=null,q8=function(t,n){var s=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?s+n.borderSize:s-n.paddingSize};function T3e(e,t,n,s){n===void 0&&(n=1),s===void 0&&(s=1/0),Qn||(Qn=document.createElement("textarea"),Qn.setAttribute("tabindex","-1"),Qn.setAttribute("aria-hidden","true"),$8(Qn)),Qn.parentNode===null&&document.body.appendChild(Qn);var o=e.paddingSize,r=e.borderSize,a=e.sizingStyle,i=a.boxSizing;Object.keys(a).forEach(function(p){var g=p;Qn.style[g]=a[g]}),$8(Qn),Qn.value=t;var u=q8(Qn,e);Qn.value=t,u=q8(Qn,e),Qn.value="x";var d=Qn.scrollHeight-o,m=d*n;i==="border-box"&&(m=m+o+r),u=Math.max(m,u);var f=d*s;return i==="border-box"&&(f=f+o+r),u=Math.min(f,u),[u,d]}var Z8=function(){},A3e=function(t,n){return t.reduce(function(s,o){return s[o]=n[o],s},{})},k3e=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],M3e=!!document.documentElement.currentStyle,N3e=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var s=A3e(k3e,n),o=s.boxSizing;if(o==="")return null;M3e&&o==="border-box"&&(s.width=parseFloat(s.width)+parseFloat(s.borderRightWidth)+parseFloat(s.borderLeftWidth)+parseFloat(s.paddingRight)+parseFloat(s.paddingLeft)+"px");var r=parseFloat(s.paddingBottom)+parseFloat(s.paddingTop),a=parseFloat(s.borderBottomWidth)+parseFloat(s.borderTopWidth);return{sizingStyle:s,paddingSize:r,borderSize:a}},R3e=N3e;function uy(e,t,n){var s=w3e(n);l.useLayoutEffect(function(){var o=function(a){return s.current(a)};if(e)return e.addEventListener(t,o),function(){return e.removeEventListener(t,o)}},[])}var P3e=function(t,n){uy(document.body,"reset",function(s){t.current.form===s.target&&n(s)})},L3e=function(t){uy(window,"resize",t)},O3e=function(t){uy(document.fonts,"loadingdone",t)},D3e=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],j3e=function(t,n){var s=t.cacheMeasurements,o=t.maxRows,r=t.minRows,a=t.onChange,i=a===void 0?Z8:a,u=t.onHeightChange,d=u===void 0?Z8:u,m=S3e(t,D3e),f=m.value!==void 0,p=l.useRef(null),g=I3e(p,n),C=l.useRef(0),v=l.useRef(),b=function(){var x=p.current,I=s&&v.current?v.current:R3e(x);if(I){v.current=I;var _=T3e(I,x.value||x.placeholder||"x",r,o),T=_[0],A=_[1];C.current!==T&&(C.current=T,x.style.setProperty("height",T+"px","important"),d(T,{rowHeight:A}))}},y=function(x){f||b(),i(x)};return l.useLayoutEffect(b),P3e(p,function(){if(!f){var E=p.current.value;requestAnimationFrame(function(){var x=p.current;x&&E!==x.value&&b()})}}),L3e(b),O3e(b),l.createElement("textarea",N5({},m,{onChange:y,ref:g}))},$N=l.forwardRef(j3e);function F3e(e,t){const n=l.useRef(null);l.useEffect(()=>{const s=e==null?void 0:e.current;if(!s)return;const o=a=>{const i=s.selectionStart,u=s.selectionEnd;if(i!==u&&a.key!=="Backspace"&&a.key!=="Delete")n.current={type:"replace",char:a.key,index:i};else if(a.key==="Backspace"&&i>0){const m=s.value[i-1];m!==void 0&&(n.current={char:m,index:i-1,type:"delete"})}else if(a.key==="Delete"&&i<s.value.length){const m=s.value[i];m!==void 0&&(n.current={char:m,index:i,type:"delete"})}else n.current=null},r=()=>{t&&t(n.current),n.current=null};return s.addEventListener("keydown",o),s.addEventListener("input",r),()=>{s.removeEventListener("keydown",o),s.removeEventListener("input",r)}},[e,t])}const R5="@",U3e=new RegExp(`${R5}([^${R5}]*)`,"g");function B3e(e,t){return[...e.slice(0,t).matchAll(U3e)].map(s=>({keyword:s[1],start:s.index,end:s.index+s[0].length}))}function V3e(e,t){const n=B3e(e,t);if(n.length===0)return;const s=n[n.length-1];return(s==null?void 0:s.end)===t?s:void 0}function H3e(e){const{className:t,textAreaRef:n,onMentionChange:s,textAreaValue:o,onCancelMention:r}=e,[a,i]=l.useState(void 0),{t:u}=Y(),d=l.useRef(!1),m=l.useRef(s),f=l.useRef(null),p=l.useRef(new Set),g=l.useCallback(E=>{E&&E.char===R5&&E.type!=="insert"&&p.current.delete(E.index)},[]),C=l.useCallback(()=>{i(void 0),f.current=null},[i]);F3e(n,g),l.useEffect(()=>{m.current=s},[s]);const v=l.useCallback(()=>{const E=n==null?void 0:n.current;if(!E)return;const x=E.selectionStart,I=E.selectionEnd;if(x===I){const _=V3e(o,x);_?p.current.has(_.start)?C():(f.current=_,i(T=>T!==_.keyword?_.keyword:T)):C()}},[C,n,o]),b=l.useCallback((E="remove")=>{var A,k;const x=f.current;if(!x)return;if(E==="ignore"){p.current.add(x.start),(A=m.current)==null||A.call(m,{isTrigger:!1}),i(void 0);return}const I=o.slice(0,x.start),_=o.slice(x.end),T=I+_;f.current=null,(k=m.current)==null||k.call(m,{isTrigger:!1}),r==null||r(T)},[r,o]);l.useEffect(()=>{o===""?(C(),p.current.clear()):v()},[v,o,i,C]),l.useEffect(()=>{var E,x;if(!d.current){d.current=!0;return}a!==void 0?(E=m.current)==null||E.call(m,{isTrigger:!0,keyword:a}):(x=m.current)==null||x.call(m,{isTrigger:!1})},[a,m]),l.useEffect(()=>(We.on("mention:cancel",b),()=>{We.off("mention:cancel",b)}),[b]);const y=a==="";return c.jsxs("div",{className:de("pointer-events-none absolute z-0 overflow-auto contrast-more:-z-10 contrast-less:-z-10 forced-colors:-z-10",t),"aria-hidden":"true",children:[c.jsx("span",{className:"invisible select-none whitespace-pre-wrap break-words",children:o}),y&&c.jsx("span",{className:"text-foreground-550 dark:text-foreground-600",children:u("userInput.mentionPlaceholderText")})]})}function z3e(e,t){const n=l.useCallback(async s=>{s.key==="Enter"&&!s.shiftKey&&!t&&await e(s)},[e,t]);hs(n)}function G3e(e,t,n){const s=l.useRef(!1),o=l.useCallback(()=>{s.current=!0},[]),r=l.useCallback(()=>{setTimeout(()=>{s.current=!1},100)},[]);return z3e(async a=>{var i;(i=e.current)!=null&&i.contains(document.activeElement)&&!s.current&&(a.preventDefault(),await t())},n),{handleCompositionStart:o,handleCompositionEnd:r}}const W3e="pointer-events-none cursor-not-allowed select-none shadow-none",$3e="opacity-40",q3e=.25,dy=l.forwardRef((e,t)=>{const{t:n}=Y(),{inputValue:s,errorMessage:o,className:r,characterLimit:a,characterLimitErrorMessage:i,disabled:u,placeholder:d=n("userInput.placeholderText"),autoFocus:m=!0,testId:f,setInput:p,setError:g,onBlur:C,onChange:v,onFocus:b,onClick:y,onEnter:E,onKeyDown:x,onPaste:I,onMentionIfEnabled:_,rightButtons:T,isMultiLines:A,"aria-autocomplete":k,"aria-controls":R,disabledClassName:P,inputContainerClassName:B}=e,U=ut(),$=l.useRef(null),Q=l.useRef(null),te=cy()||ae.instance().config().enterKeyButtonEnabled,X=n("userInput.characterLimitText",{maxCharacters:a.toString()});l.useEffect(()=>{var W;te&&((W=Q.current)==null||W.focus())},[U,te]);const ne=l.useCallback(W=>{const{value:le}=W.target;p(le),v&&v(le),le.length>a?g(i??X):g(null)},[p,v,a,g,i,X]);l.useImperativeHandle(t,()=>({updateInputValue:W=>{const le=W(s);p(le)},focus:()=>{var W;(W=Q.current)==null||W.focus()},blur:()=>{var W;(W=Q.current)==null||W.blur()},contains:W=>{var le;return((le=Q.current)==null?void 0:le.contains(W))??!1},updateSelectionRange:(W,le)=>{var _e;(_e=Q.current)==null||_e.setSelectionRange(W,le)},getTextAreaRef(){return Q}}),[s,p]),hs(W=>{var le,_e;W.key==="Escape"&&((le=$.current)!=null&&le.contains(document.activeElement))&&((_e=Q.current)==null||_e.blur()),x==null||x(W)});const{handleCompositionStart:q,handleCompositionEnd:Z}=G3e($,E,!te),J=u?P??$3e:"";return c.jsxs(ge.div,{className:F("flex grow items-end",u&&W3e,J,r),onClick:()=>{var W;y==null||y(),(W=Q.current)==null||W.focus()},ref:$,onBlur:W=>C==null?void 0:C(W),layout:"preserve-aspect",children:[c.jsx(ge.div,{className:"relative grow overflow-hidden",layout:!0,children:c.jsx(ge.div,{className:"relative flex size-full cursor-text overflow-hidden text-black dark:text-white",layout:!0,children:c.jsxs(ge.div,{className:"flex grow flex-col gap-4 py-user-input",layout:!0,transition:{duration:0},children:[c.jsx("div",{className:F("t-custom-scrollbar scrollbar-stable overflow-y-auto px-4",ae.instance().config().showScrollbarOnHover?"scrollbar-container":"",B),children:c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:F(["invisible block h-0 w-0 overflow-hidden",{"whitespace-nowrap":!A}]),htmlFor:"userInput",children:d}),c.jsx($N,{className:F("font-ligatures-none inline-block h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Go("composer")??"text-base-dense",yd("composerVertical")),disabled:u,placeholder:d,ref:Q,id:u1,role:"textbox","aria-autocomplete":k,"aria-controls":R,spellCheck:!1,value:s,enterKeyHint:"enter",onChange:ne,onFocus:()=>b==null?void 0:b(s),onCompositionStart:q,onCompositionEnd:Z,onPaste:I,autoFocus:m,"data-testid":f}),_&&c.jsx(H3e,{className:F("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Go("composer")??"text-base",yd("composerVertical"),"inset-0"),textAreaRef:Q,textAreaValue:s,onMentionChange:_,onCancelMention:W=>{p(W),g(null)}})]})}),o&&c.jsx("div",{className:"flex min-h-6 select-none items-center px-4 text-foreground-600 text-sm",children:o})]})})}),c.jsx(ge.div,{className:F("relative bottom-0 my-1.5 flex h-9 items-center",T!=null&&T.length?"mx-1.5 w-auto gap-1":"w-0"),children:T==null?void 0:T.map((W,le)=>c.jsx(pt,{children:c.jsx(ge.div,{initial:Be,animate:{...tt,transition:{delay:q3e}},transition:{duration:ns.default},children:W})},le))})]})});dy.displayName="UserInput";function Z3e(e){var I;const{uploadedFile:t,onRemove:n,scenario:s,isUploading:o,role:r,ariaLabel:a,layout:i="grid"}=e,{t:u}=Y(),[d,m]=l.useState(null),[f,p]=l.useState(!1),g=s==="screenshot"?u("composer.screenshotAdded"):void 0,C=i==="list";l.useEffect(()=>{const _=URL.createObjectURL(t);return p(!1),m(_),()=>{URL.revokeObjectURL(_)}},[t]);const v=_=>{p(!0),_.target instanceof HTMLImageElement&&URL.revokeObjectURL(_.target.src)},b=l.useCallback(()=>{n==null||n(),fr({msg:u("fileUpload.imageRemoved")})},[n,u]),y=H("file-upload-card-v2");if(!d)return null;const E=!!((I=ae.instance().config().composer)!=null&&I.smallAttachmentCard)||y,x=o?c.jsxs(rn,{className:F("absolute inset-0 grid place-items-center ",{"bg-transparent":C,"bg-white/80 dark:bg-white/45":!C}),children:[c.jsx(l.Suspense,{fallback:c.jsx("div",{"aria-hidden":!0}),children:c.jsx(it,{type:"spinnerThemed",className:C?"size-8":"size-11"})}),c.jsx(Ti,{msg:u("fileUpload.uploadingImage"),type:"polite"})]}):null;return c.jsxs(ge.div,{className:de("relative max-w-fit shrink-0",{"mt-1 h-[58px] min-w-[58px]":E,"h-32":!E,"flex w-full max-w-full items-center gap-2":C}),layout:"position",initial:Be,animate:f||C?tt:Be,exit:Be,transition:{delay:I_},role:r,"aria-label":a,children:[c.jsx("div",{className:F("relative",{"h-8 w-8":E&&C}),children:C&&o?x:c.jsx(ge.img,{className:de("w-auto rounded-xl border border-black/8 object-contain shadow-inner dark:border-white/8",{"h-[58px]":E&&!C,"h-8 w-8":E&&C,"h-32":!E}),src:d,role:"presentation",onLoad:v,onError:v,alt:"",draggable:!1})}),C?c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:F("font-ligatures-none overflow-hidden truncate whitespace-nowrap text-sm"),children:u("library.itemTypes.image")}),c.jsx("p",{className:"line-clamp-1 uppercase text-foreground-600 text-xs",children:t.name.split(".").pop()})]}):null,g&&c.jsx(Ti,{msg:g}),n&&!o&&c.jsx(ge.button,{type:"button",title:u("fileUpload.removeImageWithName",{name:t.name}),"aria-label":u("fileUpload.removeImageWithName",{name:t.name}),onClick:b,className:F("p-1 ",{"absolute end-0.5 top-0.5 m-1 rounded-full border border-black/20 bg-white fill-black text-black":!C}),children:c.jsx(nn,{className:"size-3","aria-hidden":!0})}),C?null:x]})}const my=l.memo(e=>{const{attachment:t,onRemove:n,role:s,ariaLabel:o,layout:r="grid"}=e,{file:a,processing:i,error:u,scenario:d}=t;if(u||!a)return null;const m=pr(a);return Hl(m)?c.jsx(O3,{onRemove:n,fileName:a.name,fileType:m,isUploading:i,role:s,ariaLabel:o,layout:r}):c.jsx(Z3e,{uploadedFile:a,onRemove:n,scenario:d,isUploading:i,role:s,ariaLabel:o,layout:r})});my.displayName="AttachmentItem";function qN(e){const t=l.useRef(null);l.useEffect(()=>{t.current=document.activeElement;const n=e==null?void 0:e.current;return()=>{n?n.focus():t.current&&t.current.focus()}},[e])}function K3e(e){const{fileName:t,fileType:n,role:s,layout:o="grid"}=e,r=n!==""?n:L3(t);return Hl(r)?c.jsx(O3,{fileName:t,fileType:r,role:s,layout:o}):null}const Y3e=[{canHandle:e=>e.startsWith("https://"),getImageSrc:e=>e,shouldReleaseOnLoad:!1},{canHandle:e=>e.startsWith("/attachments")||e.startsWith("/sharing"),getImageSrc:e=>cpe(e),shouldReleaseOnLoad:!0}];function Q3e(e){return Y3e.find(t=>t.canHandle(e))??null}function J3e({url:e,layout:t="grid"}){const{t:n}=Y(),[s,o]=l.useState(null),[r,a]=l.useState(!1),i=t==="list";return l.useEffect(()=>{if(!e){o(null);return}const u=Q3e(e);if(!u){o(null);return}(async()=>{const m=await u.getImageSrc(e);o(m),a(u.shouldReleaseOnLoad)})()},[e]),s?c.jsx("img",{className:F("block h-full overflow-hidden bg-background-static-250 object-cover object-center shadow-inner dark:bg-background-static-900",{"rounded-xl":i,"rounded-2xl":!i}),alt:n("chat.uploadedImageAltText"),src:s,onLoad:r?ape:void 0}):null}const X3e=e=>l.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M3.556 6.708C3.556 4.989 4.949 3.596 6.667 3.596H22.222C25.659 3.596 28.444 6.382 28.444 9.818V25.374C28.444 27.092 27.052 28.485 25.333 28.485H9.778C6.341 28.485 3.556 25.699 3.556 22.263V6.708Z",fill:"url(#paint0_linear_393_48941)"}),l.createElement("path",{d:"M4.444 6.708C4.444 5.480 5.439 4.485 6.667 4.485H22.222C25.168 4.485 27.556 6.873 27.556 9.818V25.374C27.556 26.602 26.561 27.596 25.333 27.596H9.778C6.832 27.596 4.444 25.208 4.444 22.263V6.708Z",fill:"url(#paint1_linear_393_48941)"}),l.createElement("path",{d:"M4.444 6.708C4.444 5.480 5.439 4.485 6.667 4.485H22.222C25.168 4.485 27.556 6.873 27.556 9.818V25.374C27.556 26.602 26.561 27.596 25.333 27.596H9.778C6.832 27.596 4.444 25.208 4.444 22.263V6.708Z",fill:"url(#paint2_radial_393_48941)"}),l.createElement("path",{d:"M14.900 15.109L9.514 20.497C8.534 21.477 9.228 23.152 10.614 23.152H21.389C22.774 23.152 23.468 21.477 22.488 20.497L17.100 15.109C16.493 14.502 15.507 14.502 14.900 15.109Z",fill:"url(#paint3_linear_393_48941)"}),l.createElement("circle",{cx:20.889,cy:11.152,r:2.222,fill:"url(#paint4_linear_393_48941)"}),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_393_48941",x1:11.593,y1:3.596,x2:14.944,y2:28.729,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#BBBBBB"}),l.createElement("stop",{offset:1,stopColor:"#888888"})),l.createElement("linearGradient",{id:"paint1_linear_393_48941",x1:10.864,y1:4.485,x2:13.787,y2:27.873,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),l.createElement("radialGradient",{id:"paint2_radial_393_48941",cx:0,cy:0,r:1,gradientTransform:"matrix(12.198 18.296 -18.296 6.861 11.827 10.504)",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:.177083,stopColor:"white"}),l.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),l.createElement("linearGradient",{id:"paint3_linear_393_48941",x1:8.935,y1:11.488,x2:15.591,y2:29.836,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"})),l.createElement("linearGradient",{id:"paint4_linear_393_48941",x1:18.667,y1:6.152,x2:23.495,y2:15.396,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{offset:1e-4,stopColor:"#597493"}),l.createElement("stop",{offset:1,stopColor:"#0F2F56"}))));function eye(){const{t:e}=Y(),t=H("file-upload-card-v2");return c.jsx("div",{className:"flex w-fit justify-end",children:c.jsx("div",{className:F("flex items-center justify-center rounded-xl border ",t?"mt-1 h-[58px] border-black/8 px-4":"h-32 w-44 border-stroke-250 bg-accent-200 px-4 py-2 dark:bg-accent-250"),children:t?c.jsx(X3e,{className:"size-6"}):c.jsx("span",{className:"text-center text-foreground-450 text-sm",children:e("share.imagePlaceholder")})})})}function ZN(e){var g;const{messageItem:t,isForSharing:n,imageClassName:s,role:o,layout:r="grid"}=e,{t:a}=Y(),i=!on("kill-share-c2"),u=H("file-upload-card-v2"),d=H("share-conversation-with-attachments"),m=r==="list";if(t.type==="document")return c.jsx(K3e,{fileType:t.contentType,fileName:t.fileName,role:o,layout:r});const f=t.type==="image"&&t.url.startsWith("/attachments");if(i&&!d&&n&&f)return c.jsx(eye,{});const p=!!((g=ae.instance().config().composer)!=null&&g.smallAttachmentCard)||u;return t.type==="image"?c.jsxs("div",{className:F("inline-block h-full max-w-[min(80%,256px)] align-top",s,{"mt-1 h-[58px]":p,"flex w-full max-w-full gap-2":m}),role:o,children:[c.jsx("div",{className:F("h-full w-fit min-w-0",{"h-8 w-8":m&&p}),children:c.jsx(J3e,{url:t.url,layout:r})}),m&&c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:F("font-ligatures-none overflow-hidden truncate whitespace-nowrap text-sm"),children:a("library.itemTypes.image")}),c.jsx("p",{className:"line-clamp-1 uppercase text-foreground-600 text-xs",children:(t.url||"").split(".").pop()})]})]}):null}function KN(e){const{onRemove:t,onClose:n,messages:s=[],attachments:o=[],isForSharing:r,restoreFocusRef:a}=e;qN(a);const i=H("file-upload-card-v2"),{t:u}=Y();return o.length===0&&s.length===0?null:c.jsxs(fn,{isOpen:!0,fullBleed:!0,className:F("max-h-[580px] min-h-[480px] w-full justify-between p-6",{"sm:w-[640px]":!i,"sm:w-[500px]":i}),onClose:n,dialogName:u("userInput.filePreviewModalTitle"),children:[c.jsx("h1",{className:"w-full shrink-0 text-center leading-8 text-2xl",children:u("userInput.filePreviewModalTitle")}),c.jsx("div",{className:"max-h-[450px] min-h-0 flex-1 overflow-y-auto p-4",children:c.jsx("div",{role:"list",className:F("flex  gap-y-1",{"flex-wrap content-start gap-x-2":!i,"flex-col":i}),children:o.length>0?o.map((d,m)=>c.jsx(my,{layout:i?"list":"grid",attachment:d,onRemove:()=>t==null?void 0:t(m),role:"listitem",ariaLabel:u("fileUpload.ariaLabel.listitem",{index:m+1,total:o.length})},`attachment-${m}`)):s.map((d,m)=>c.jsx(ZN,{layout:i?"list":"grid",messageItem:d,imageClassName:"h-32",role:"listitem",isForSharing:r},`message-${m}`))})}),c.jsx(re,{color:i?"subtle-dimmed-inverted":"strong",className:"w-full shrink-0",title:u("common.dismiss"),onClick:n,children:u("common.dismiss")})]})}function tye(e){var E;const{attachments:t,onRemove:n,onVisibilityChange:s}=e,{t:o}=Y(),r=l.useRef(null),a=l.useMemo(()=>t.filter(x=>!x.error),[t]),i=l.useMemo(()=>a.slice(0,op),[a]),u=l.useMemo(()=>a.slice(op),[a]),d=u.filter(x=>x.processing).length,[m,f]=l.useState(!1),p=l.useCallback(x=>{const I=t[x];I!=null&&I.file&&(n(x),a.length<=1&&(f(!1),s==null||s(!1)))},[t,n,a,s]),g=l.useCallback(()=>{fr({msg:o("userInput.seeAll"),type:"polite"}),f(!0),s==null||s(!0)},[f,o,s]),C=l.useCallback(()=>{f(!1),s==null||s(!1)},[f,s]),v=d>0?o("userInput.uploadingProcess",{uploadingCount:d,totalCount:u.length}):o("userInput.seeAll"),b=H("file-upload-card-v2"),y=!!((E=ae.instance().config().composer)!=null&&E.smallAttachmentCard)||b;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"relative flex max-h-64 min-w-0 max-w-full flex-wrap gap-2 overflow-y-auto overflow-x-hidden p-1",children:[i.map((x,I)=>c.jsx(my,{attachment:x,onRemove:()=>p(t.indexOf(x)),ariaLabel:o("fileUpload.ariaLabel.listitem",{index:I+1,total:a.length})},x.id??`file-${I}`)),u.length>0&&c.jsx(re,{ref:r,"aria-label":v,title:v,color:"overlay-dimmed-inverted",onClick:g,className:F("flex cursor-pointer items-center justify-center rounded-xl border-none px-3.5 py-1 text-sm",{"mt-1 h-[58px]":y,"h-32":!y}),children:d>0?c.jsxs(c.Fragment,{children:[c.jsx(it,{className:"size-6"}),o("userInput.uploadingProcess",{uploadingCount:d,totalCount:u.length})]}):c.jsx(c.Fragment,{children:o("userInput.seeAll")})})]}),m&&c.jsx(KN,{onClose:C,attachments:t,onRemove:p,restoreFocusRef:r})]})}function nye(e){const{categories:t,onClose:n,selectedCategoryIndex:s,handleCategoryClick:o}=e,{t:r}=Y(),a=l.useRef(null),i=hl(a,{amount:"all"});return l.useEffect(()=>{i&&cn({page:"chatPage",element:"chatStarterPillCategory",customData:JSON.stringify({visibleItems:t.map(u=>u.id)})})},[i,t]),c.jsx(nM,{onClose:n,className:"px-3",children:c.jsxs("div",{className:"flex w-full flex-col items-center gap-4",ref:a,children:[c.jsx("h1",{className:"mt-2 px-3 text-lg-strong",children:r("widgets.categorySelectorModalHeader")}),c.jsx("ul",{className:"flex w-full list-none flex-col items-center",role:"list",children:t.map((u,d)=>c.jsx("li",{className:"w-full",children:c.jsx(re,{className:"w-full",variant:"rect",color:"subtle-dimmed-inverted",title:u.label,onClick:()=>o(d),children:c.jsxs("span",{className:"flex w-full items-center justify-between",children:[c.jsx("span",{className:"truncate text-start",children:u.label}),s===d&&c.jsx(fh,{className:"ms-2 size-4 shrink-0 text-foreground-600 contrast-more:text-current"})]})})},u.id))})]})})}const sye="contrast-more:outline contrast-more:after:border-2 contrast-more:after:absolute contrast-more:after:pointer-events-none contrast-more:after:w-2/3 contrast-more:after:h-2/3",oye="text-foreground-550 active:text-foreground-350 dark:text-foreground-600 active:dark:text-foreground-550",rye="bg-white/30 safe-hover:bg-black/3 active:bg-black/2 dark:bg-black/3 dark:safe-hover:bg-white/5 dark:active:bg-white/3",aye="border-[1px] border-black/8 dark:border-white/8",iye=`${oye} ${rye} ${aye}`;function YN(e){const{children:t,isSelected:n,className:s,onClick:o,disabled:r,unselectedColorClass:a,variant:i="standard",testId:u,ariaLabel:d,ariaSetSize:m,ariaPosInSet:f,dataItemId:p}=e,{focusable:g}=Ta({autoRestoreFocus:!0,forceFocus:!0});let C;return n?C=Ii.strong:i==="flat"?C=iye:C=Ii[a??"overlay-dimmed-inverted"],c.jsx("button",{disabled:r,type:"button",ref:g.ref,className:F("shadow-none dark:shadow-none",dd,WC["40-base"],$C["40-base"],K2["40-base"],lm,C,s,n&&sye),onClick:o,role:m?"radio":void 0,"aria-checked":m?n:void 0,"aria-pressed":m?void 0:n||void 0,"aria-label":d,"aria-setsize":m,"aria-posinset":f,"data-spatial-focus-key":g.focusKey,"data-testid":u,"data-item-id":p,children:t})}function cye(e){const{text:t,onClick:n,className:s,testId:o,ariaLabel:r,dataItemId:a}=e;return c.jsx(YN,{isSelected:!1,variant:"flat",className:F("min-w-fit",s),onClick:n,testId:o,ariaLabel:r,dataItemId:a,children:c.jsx("span",{className:"px-1 text-sm",children:t})})}const lye=1e3;function fy(){var m;const e=!!((m=ae.instance().config().landingPage)!=null&&m.enablePromptedGreetings),t=m3(),n=H("conversation-starter-prompted-greeting-c1"),s=H("qa-conversation-starter-prompted-greeting-c1"),o=H("qa-conversation-starter-prompted-greeting-debug"),r=H("isenvironmentalsignallmgreeting"),a=H("isprovocativesignallmgreeting"),i=H("personalizedgreetings"),u=H("generatefakelatencygreeting");return e&&(!!t||n||s||o||(r||a||u)||i)}function uye(){const[e,t]=Fe(qT),n=fy();return l.useEffect(()=>{let s;return n?(t(!1),s=window.setTimeout(()=>{t(!0)},lye)):t(!1),()=>{s&&clearTimeout(s)}},[t,n]),e}const dye=300,mye=(e,t)=>{var n;return!e||t===void 0?null:e.type==="categories"?((n=e.categories[t])==null?void 0:n.items)??[]:e.type==="text"?e.items:null};function fye(e){const{className:t,onWidgetClick:n,pageName:s="chatPage",widgetSource:o,starterPromptsData:r,shouldStackChips:a,shouldCenterChips:i,containerId:u="",selectedCategory:d,onCategoryClick:m}=e,f=l.useRef(null),p=l.useRef(new Set),{t:g}=Y(),C=hl(f,{once:!0,amount:"all"}),v=bt({breakpoint:"sm"});l.useEffect(()=>{const E=(d==null?void 0:d.id)??"default";if(C&&f.current&&!p.current.has(E)){p.current.add(E);const x=setTimeout(()=>{requestAnimationFrame(()=>{const I=b(f);cn({page:s,scenario:o,element:"chatStarterPills",customData:JSON.stringify({visibleItems:I,totalItems:I.length,category:d==null?void 0:d.id})})})},dye);return()=>clearTimeout(x)}return()=>{}},[s,C,d==null?void 0:d.id,r,o]);const b=E=>{const x=E.current;if(!x)return[];const I=x.getBoundingClientRect(),_=x.querySelectorAll("[data-item-id]"),T=[];for(const A of _){const k=A.getBoundingClientRect(),R=A.getAttribute("data-item-id"),B=Math.max(0,Math.min(k.right,I.right)-Math.max(k.left,I.left))/k.width;R&&B>=.5&&T.push(R)}return T},y=E=>{const{prompt:x,id:I,actionType:_,source:T,text:A,index:k}=E;Ce({pageName:s,source:o,scenario:I,customData:JSON.stringify({prompt:x,text:A,index:k,category:d==null?void 0:d.id})}),n({actionType:_,id:I,prompt:x,source:T})};return c.jsxs(rn,{role:"list",className:F("flex w-full gap-2 px-1 py-1 sm:flex-wrap sm:py-4",a?"mb-3 flex-col items-end space-y-1 sm:flex-row":"scrollbar-container max-h-[110px] overflow-x-auto overflow-y-hidden",i?"sm:justify-center":"sm:justify-start",t),id:u,ref:f,children:[d&&v&&c.jsx(re,{onClick:m,title:d.label,className:"min-w-fit",color:"overlay-dimmed-inverted",children:c.jsxs("span",{className:"flex items-center gap-2",children:[d.label,c.jsx(ds,{className:"size-4 -rotate-90"})]})}),r.map((E,x)=>{const{id:I,text:_}=E,{type:T}=E.action,A="prompt"in E.action?E.action.prompt:void 0,k=g("composer.starterPromptAriaLabel",{text:_,index:x+1,total:r.length});return c.jsx(cye,{text:_,onClick:()=>y({prompt:A,id:I,actionType:T,source:"pills",text:_,index:x}),className:de(a&&"w-auto min-w-min max-w-[80%] text-start"),testId:`starter-prompt-${I}`,ariaLabel:k,dataItemId:I},I)})]})}function pye(e){var b;const{className:t,onWidgetClick:n,pageName:s="chatPage",selectedCategory:o,selectedCategoryIndex:r,onCategoryClick:a}=e,i=M(rh),u=fy(),d=M(qT),{isAppearanceOnHomeEnabled:m}=Ol(),f=m||(i==null?void 0:i.type)==="categories",p=M(l3),g=(b=ae.instance().config().landingPage)==null?void 0:b.stackStarterChipsForSmallScreens;let C="";p?C=p:o&&(C=o.id);const v=mye(i,r);return u&&!d||!v?null:c.jsx(fye,{onWidgetClick:n,className:t,pageName:s,starterPromptsData:v,widgetSource:(i==null?void 0:i.source)??"chatStarterPills",shouldStackChips:g,shouldCenterChips:f,containerId:C,selectedCategory:o,onCategoryClick:a})}const hye=l.lazy(()=>V(()=>import("./starter-prompt-category-DOTQmFv7.js"),__vite__mapDeps([374,1])));function gye(e){const{className:t,onWidgetClick:n,pageName:s="chatPage"}=e,o=M(rh),r=bt({breakpoint:"sm"}),[a,i]=Fe(nce),[u,d]=l.useState(!1),m=C=>{var v;C!==a&&(i(C),Ce({source:"chatStarterPillCategory",pageName:"chatPage",destination:f?(v=f[C])==null?void 0:v.id:void 0})),d(!1)},f=o&&o.type==="categories"?o.categories.map(C=>({id:C.id,label:C.label})):void 0,p=f&&!r,g=u&&f&&r;return!o||!["text","categories"].includes(o.type)?null:c.jsxs("div",{className:F("mx-auto flex w-full flex-col gap-3 px-2",t),children:[p&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"mt-2 h-8 w-full"}),children:c.jsx(hye,{categories:f,handleCategoryClick:m,selectedCategoryIndex:a,className:"mt-2"})}),c.jsx(pye,{onWidgetClick:n,pageName:s,selectedCategory:f?f[a]:void 0,selectedCategoryIndex:a,onCategoryClick:f?()=>d(!0):void 0}),g&&c.jsx(nye,{categories:f,handleCategoryClick:m,selectedCategoryIndex:a,onClose:()=>d(!1)})]})}function vye(e){var r;const{item:t,onClick:n}=e,s=M(De),o=l.useRef(void 0);return l.useEffect(()=>{s&&o.current!==s&&t.onImpression&&(o.current=s,t.onImpression(s))},[s,t]),c.jsxs(re,{title:t.title,"aria-label":t.title,variant:"rect",color:"subtle-dimmed-inverted",onClick:n,size:"40-base",alignment:"start",className:"min-w-[230px] gap-3 px-3 py-2",testId:t.testId,role:"menuitem",children:[c.jsx("div",{children:t.icon}),c.jsxs("div",{className:"grow text-left",children:[c.jsxs("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:[t.title,(r=t.tags)==null?void 0:r.map(a=>c.jsx("div",{className:"flex items-center",children:c.jsx(Bu,{color:a.color,children:c.jsx("span",{className:"leading-4",children:a.label})},a.label)},a.label))]}),t.description&&c.jsx("p",{className:"line-clamp-1 leading-4 text-foreground-600 text-xs dark:text-foreground-650",children:t.description})]})]},t.key)}const QN="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/dismiss-strong-C4wQ_QdN.svg";function py(e){const{items:t,value:n,defaultValue:s,onSelect:o,onReset:r,onMenuClick:a,disabled:i,showDefaultItemInDropdown:u=!1,renderHeader:d,renderFooter:m,alwaysShowDefault:f=!1,floatingOffset:p=4}=e,g=M(De),C=l.useRef(void 0),{selectedItem:v,dropdownItems:b,selectedNonDefault:y}=l.useMemo(()=>({selectedItem:t.find(E=>E.key===(f?s:n)),dropdownItems:u?t:t.filter(E=>E.key!==s),selectedNonDefault:n!==s&&!f}),[t,n,s,u,f]);return l.useEffect(()=>{g&&C.current!==g&&v&&v.onImpression&&(C.current=g,v.onImpression(g))},[g,v]),c.jsx(Eh,{color:"default",role:"menu",renderTrigger:({openPopover:E})=>v&&c.jsxs(re,{title:v.title,"aria-label":v.title,variant:"rect",size:"36-sm",disabled:i,color:y?"composer-selected":"subtle-dimmed",className:F("h-9 select-none gap-1 rounded-2xl border border-black/8 dark:border-white/8",v.isIconEnabledInButton?"pe-3 ps-2":"pe-3.5 ps-2.5",v.isChevronEnabledInButton&&"pe-2.5",v.hideButtonTitle&&"p-0"),onClick:x=>{var I;a==null||a(),(I=v.beforeClick)==null||I.call(v,g??""),y?r():E(x)},testId:v.testId,children:[y?c.jsx(yt,{url:QN,className:"size-3.5"}):v.isIconEnabledInButton&&v.icon,!v.hideButtonTitle&&c.jsx("span",{className:"text-sm",children:v.buttonTitle??v.title}),!y&&v.isChevronEnabledInButton&&c.jsx(ds,{className:"size-4 rotate-90"})]}),renderSurface:({closePopover:E})=>c.jsxs("div",{className:"flex flex-col",children:[d&&d({closePopover:E}),b.map(x=>c.jsx(vye,{item:x,onClick:I=>{var _;(_=x.beforeSelect)==null||_.call(x,g??""),o(x.key),E(I)}},x.key)),m&&m({closePopover:E})]}),containerClassNames:{surface:"p-1.5 border-white/25 dark:border-stroke-400/25 shadow-tinted-xl"},placement:"bottom-start",floatingOffset:p})}py.displayName="ComposerDropdownButton";const Cye=["chat","coco","smart","reasoning","study","search"];function yye(e){const{disabled:t=!1}=e,n=bye(),s=Ll(),o=H("smart-mode-default"),r=H("smart-mode-coachmark"),a=Co(),{dismissCoachmark:i}=Zo(km),u=l.useCallback(f=>{zt(f),f==="smart"&&i(),v5()},[i]),d=Cye.includes(a)?a:"chat",m=c.jsx(py,{items:n,onSelect:u,value:d,defaultValue:kn(),showDefaultItemInDropdown:!0,onReset:()=>{zt(kn()),v5()},disabled:t,onMenuClick:()=>Ce({source:"composerChatModeDropdownButton",pageName:"chatPage",customData:JSON.stringify({currentMode:a})})});return s&&r&&!o?c.jsx(lN,{triggerComponent:m,offset:10}):m}function bc(e){return()=>cn({element:"composerModeButton",scenario:e,page:"chatPage"})}function xc(e){return t=>Ce({source:"composerModeButton",scenario:e,conversationId:t})}function Sc(e){return t=>Ce({source:"composerDrawerTypeSheet",scenario:e,conversationId:t})}function bye(){const{t:e}=Y("translation"),t=Ll(),n=PT(),s=H("smart-mode-default"),o=n3(),r=H("study-mode"),a=H("coco-mode"),i=[],u={key:"smart",title:n.title,icon:c.jsx(yt,{url:sN,className:"size-5"}),description:n.description,testId:"composer-chat-mode-smart-button",isChevronEnabledInButton:!0,onImpression:bc("smart"),beforeSelect:Sc("smart"),beforeClick:xc("exitSmart")};t&&s&&i.push(u);const d={key:"chat",title:e("composer.chatModes.chat.title"),buttonTitle:e("composer.chatModes.chat.title"),icon:c.jsx(yt,{url:tN,className:"size-5"}),description:e("composer.chatModes.chat.description"),testId:"composer-chat-mode-quick-button",onImpression:bc("quick"),beforeSelect:Sc("quickResponse"),beforeClick:xc("showDrawer"),isChevronEnabledInButton:!0,isIconEnabledInButton:!1};i.push(d);const m={key:"coco",title:e("composer.chatModes.coco.title"),icon:c.jsx(yt,{url:eN,className:"size-5"}),description:e("composer.chatModes.coco.description"),testId:"composer-chat-mode-coco-button",onImpression:bc("coco"),beforeSelect:Sc("coco"),beforeClick:xc("exitCoco")};a&&i.push(m);const f={key:"reasoning",title:CS,icon:c.jsx(yt,{url:rN,className:"size-5"}),description:e("composer.chatModes.reasoning.description"),testId:"composer-chat-mode-reasoning-button",onImpression:bc("thinkDeeper"),beforeSelect:Sc("thinkDeeper"),beforeClick:xc("exitThinkDeeper")};cN()||i.push(f);const p={key:"study",title:e("composer.chatModes.study.title"),icon:c.jsx(yt,{url:oN,className:"size-5"}),description:e("composer.chatModes.study.description"),testId:"composer-chat-mode-study-button",onImpression:bc("study"),beforeSelect:Sc("study"),beforeClick:xc("exitStudy")};r&&i.push(p),t&&!s&&i.push(u);const g={key:"search",title:NB,icon:c.jsx(yt,{url:aN,className:"size-5"}),description:e("composer.chatModes.search.description"),testId:"composer-chat-mode-search-button",onImpression:bc("search"),beforeSelect:Sc("search"),beforeClick:xc("exitSearch")};return o&&i.push(g),i}const xye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/tab-add-6wnFKKVV.svg";function Sye(e){const{onSelectUserOpenedTabs:t}=e,{t:n}=Y();return c.jsx(re,{title:n("composer.multiTabs.addTab"),"aria-label":n("composer.multiTabs.addTab"),variant:"rect",color:"subtle-dimmed-inverted",onClick:t,size:"40-base",alignment:"start",className:"min-w-[230px] rounded-xl p-0",testId:"add-tabs-button",children:c.jsxs("div",{className:"flex h-10 w-full items-center gap-3 rounded-xl px-3 py-2",children:[c.jsx(yt,{url:xye,className:"size-5"}),c.jsx("div",{className:"grow text-left",children:c.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:n("composer.multiTabs.addTab")})})]})})}const Eye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/clipboard-paste-DO-hzNqO.svg",wye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/paperclip-CMVChwA7.svg";function w0(e){const{onClick:t,onImpression:n,uploadButtonDisabled:s,title:o,icon:r}=e,a=l.useRef(null),i=hl(a,{once:!0,amount:"all"});return l.useEffect(()=>{i&&n&&n()},[i,n]),c.jsx(re,{ref:a,title:o,"aria-label":o,variant:"rect",color:"subtle-dimmed-inverted",onClick:t,size:"40-base",alignment:"start",className:"min-w-[230px] rounded-xl p-0",testId:"add-images-files",disabled:s,children:c.jsxs("div",{className:"flex h-10 w-full items-center gap-3 rounded-xl px-3 py-2",children:[r,c.jsx("div",{className:"grow text-left",children:c.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:o})})]})})}function Iye(e){const{onSelectFile:t,onPasteTextClick:n,uploadButtonDisabled:s,onSelectOneDriveFile:o}=e,{t:r}=Y(),a=ut();return c.jsxs("div",{className:"flex flex-col",children:[c.jsx(w0,{onClick:t,uploadButtonDisabled:s,title:r("composer.connector.addImagesFiles"),icon:c.jsx(yt,{url:wye,className:"size-5"})}),n&&c.jsx(w0,{onImpression:()=>{cn({page:a==="/"?"landing":"chat",element:"uploadTextModalCta"})},onClick:n,uploadButtonDisabled:s,title:r("fileUpload.pasteText"),icon:c.jsx(yt,{url:Eye,className:"size-5"})}),o&&c.jsx(w0,{onClick:o,uploadButtonDisabled:s,title:r("composer.addFromOneDrive"),icon:c.jsx(Ch,{className:"size-5"})})]})}const JN=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M7.87869 8.5858C7.48348 8.84756 7.00954 9 6.5 9C5.11929 9 4 7.88071 4 6.5C4 5.11929 5.11929 4 6.5 4C7.88071 4 9 5.11929 9 6.5C9 7.00954 8.84756 7.48348 8.5858 7.8787L10.6213 9.9142C11.0165 9.65244 11.4905 9.5 12 9.5C12.5095 9.5 12.9835 9.65244 13.3787 9.9142L15.4142 7.87869C15.1524 7.48348 15 7.00954 15 6.5C15 5.11929 16.1193 4 17.5 4C18.8807 4 20 5.11929 20 6.5C20 7.88071 18.8807 9 17.5 9C16.9905 9 16.5165 8.84756 16.1213 8.5858L14.0858 10.6213C14.3476 11.0165 14.5 11.4905 14.5 12C14.5 12.5095 14.3476 12.9835 14.0858 13.3787L16.1213 15.4142C16.5165 15.1524 16.9905 15 17.5 15C18.8807 15 20 16.1193 20 17.5C20 18.8807 18.8807 20 17.5 20C16.1193 20 15 18.8807 15 17.5C15 16.9905 15.1524 16.5165 15.4142 16.1213L13.3787 14.0858C12.9835 14.3476 12.5095 14.5 12 14.5C11.4905 14.5 11.0165 14.3476 10.6213 14.0858L8.5858 16.1213C8.84756 16.5165 9 16.9905 9 17.5C9 18.8807 7.88071 20 6.5 20C5.11929 20 4 18.8807 4 17.5C4 16.1193 5.11929 15 6.5 15C7.00954 15 7.48348 15.1524 7.87869 15.4142L9.9142 13.3787C9.65244 12.9835 9.5 12.5095 9.5 12C9.5 11.4905 9.65244 11.0165 9.9142 10.6213L7.87869 8.5858ZM8 6.5C8 5.67157 7.32843 5 6.5 5C5.67157 5 5 5.67157 5 6.5C5 7.32843 5.67157 8 6.5 8C7.32843 8 8 7.32843 8 6.5ZM19 6.5C19 5.67157 18.3284 5 17.5 5C16.6716 5 16 5.67157 16 6.5C16 7.32843 16.6716 8 17.5 8C18.3284 8 19 7.32843 19 6.5ZM6.5 19C7.32843 19 8 18.3284 8 17.5C8 16.6716 7.32843 16 6.5 16C5.67157 16 5 16.6716 5 17.5C5 18.3284 5.67157 19 6.5 19ZM19 17.5C19 16.6716 18.3284 16 17.5 16C16.6716 16 16 16.6716 16 17.5C16 18.3284 16.6716 19 17.5 19C18.3284 19 19 18.3284 19 17.5ZM13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5C12.8284 13.5 13.5 12.8284 13.5 12Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.2}));function XN(e){const{isChecked:t,label:n,description:s,onChange:o,accessory:r,disabled:a,testId:i,className:u,labelClassName:d,descriptionClassName:m}=e,f=l.useId(),[p,g]=l.useState(!1),C=qi(),v=x=>{x.currentTarget.matches(":focus-visible")&&g(!0)},b=()=>g(!1),{focusable:y}=Ta({autoRestoreFocus:!0,forceFocus:!0});let E=t?"bg-system-green-400":"bg-black/20 dark:bg-white/20";return a&&(E="bg-black/20 after:bg-white/40 dark:bg-white/20 dark:after:bg-black/40"),c.jsxs("label",{className:F("flex items-center justify-between gap-4",!a&&"cursor-pointer",u),htmlFor:f,ref:y.ref,"data-testid":i,children:[c.jsxs("div",{className:"flex flex-1 flex-col",children:[c.jsx("span",{className:F("text-foreground-800 text-sm",d),children:n}),s&&c.jsx("span",{className:F("font-medium text-foreground-450 text-sm",m),children:s})]}),c.jsxs("span",{className:"flex flex-row items-center gap-2",children:[r,c.jsx("input",{id:f,type:"checkbox",title:n,checked:t,onChange:x=>o(x.target.checked),onFocus:v,onBlur:b,className:"sr-only",disabled:a}),c.jsx("div",{className:F("relative h-6 w-10 rounded-full","after:absolute after:size-5 after:rounded-full after:transition-all contrast-more:forced-color-adjust-none",C?"rotate-180 after:bottom-[2px] after:end-[2px]":"after:start-[2px] after:top-[2px]",E,!a&&"after:bg-white after:shadow-switch after:hover:scale-110 after:active:w-6",t&&"after:translate-x-4",t&&!a&&"after:active:translate-x-3",p&&"outline outline-2 outline-offset-2")})]})]})}function eR(e){const{isInComposer:t=!1,IconComponent:n,title:s,isToggleOn:o,showToggle:r,showConnect:a=!1,isDisConnected:i=!1,onClickToggle:u,onClickMore:d,onClickConnect:m,description:f}=e,p=F("flex items-center ",t?"gap-3":"gap-2"),g=F("shrink-0",t?"size-4":"size-5"),C=i?z("connector.connect"):z("connector.reconnect");return c.jsxs("div",{className:F(t?"py-1.5 ps-3.5 text-sm":"flex flex-col gap-2 p-2",t&&r?"pe-2.5":"pe-1"),children:[a&&c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("div",{className:p,children:[c.jsx(n,{className:g}),c.jsx("span",{className:"text-foreground-800 text-sm",children:s})]}),c.jsx(re,{className:F("px-2 text-sm",t&&"opacity-65 focus-visible:opacity-100 safe-hover:opacity-100"),title:C,size:"28-xxs",color:t?"subtle-dimmed-inverted":"default",onClick:m,children:C})]}),r&&c.jsxs("div",{className:p,children:[c.jsx(n,{className:g}),c.jsx(XN,{className:"w-full",labelClassName:"text-sm",label:s,isChecked:o,onChange:u})]}),!t&&c.jsxs("div",{className:"text-foreground-700 text-xs",children:[c.jsx("span",{className:"me-1",children:f}),c.jsx(re,{"aria-label":z("connector.moreDetailsAriaLabel",{description:f}),title:z("connector.moreDetails"),className:"inline-block h-auto min-h-0 whitespace-nowrap p-0 leading-none text-foreground-700 underline text-xs",onClick:d,color:"subtle-bright",children:z("connector.moreDetails")})]})]})}function _ye({connectorType:e,triggerSource:t}){const{pushPage:n}=Sr(),s=se(Mw),{getConnectorAppInfo:o,handleToggle:r}=zl(),{id:a,status:i,title:u,IconComponent:d,description:m}=o(e)??{},f=t==="composer";return l.useEffect(()=>{oM(e,i??"unavailable",f?"composer":"settingsConnectorList")},[e,i,f]),!i||!u||!d||!m?null:c.jsx(eR,{isInComposer:f,IconComponent:d,title:u,description:m,showToggle:i==="disconnected"||i==="ready"||i==="disabled",isToggleOn:i==="ready",showConnect:!1,isDisConnected:!1,onClickConnect:()=>{},onClickToggle:()=>{Vu(e,i,f?"composer":"settingsConnectorList",i==="ready"?"toggleOff":"toggleOn"),r(a,i==="ready"?"disabled":"ready")},onClickMore:()=>{s(e),Vu(e,i,"settingsConnectorList","goToDetail"),n("connector-detail")}})}function Tye({connectorType:e,triggerSource:t,closePage:n}){const{pushPage:s,closeSettings:o}=Sr(),r=se(Mw),{getConnectorAppInfo:a,handleConnect:i,handleToggle:u}=zl(),{id:d,status:m,title:f,IconComponent:p,description:g}=a(e)??{},C=t==="composer",v=l.useRef(null),b=hl(v,{amount:"all",once:!0});l.useEffect(()=>{b&&oM(e,m??"unavailable",C?"composer":"settingsConnectorList")},[e,m,C,b]);const y=l.useCallback(I=>{i(e,C?"composer":"settingsConnectorList"),Vu(e,m,C?"composer":"settingsConnectorList","connect"),o(),n==null||n(I)},[e,m,i,o,n,C]),E=l.useCallback(()=>{Vu(e,m,C?"composer":"settingsConnectorList",m==="ready"?"toggleOff":"toggleOn"),u(d,m==="ready"?"disabled":"ready")},[e,m,u,d,C]),x=l.useCallback(()=>{r(e),Vu(e,m,C?"composer":"settingsConnectorList","goToDetail"),s("connector-detail")},[e,m,s,r,C]);return!m||!f||!p||!g?null:c.jsx("div",{ref:v,children:c.jsx(eR,{isInComposer:C,IconComponent:p,title:f,description:g,showToggle:m==="ready"||m==="disabled",isToggleOn:m==="ready",showConnect:m==="disconnected"||m==="sign-in-required",isDisConnected:m==="disconnected",onClickConnect:y,onClickToggle:E,onClickMore:x})})}const hy=()=>{const e=H("settings-as-modal"),t=Np({key:"useDialogLayout",default:!1}),n=bt({breakpoint:"sm"});return e&&!n&&!t};function Aye(e,t){const n=t==null?void 0:t.dataset.spatialFocusKey;n&&(e==null||e.setFocus(n,{}))}function kye(e){l.useEffect(()=>(window.addEventListener("keyup",e),()=>{window.removeEventListener("keyup",e)}),[e])}function Mye(e){const{title:t,onClickBack:n,rightView:s,onClickClose:o}=e,r=l.useRef(null),a=dT(),i=hy(),u=o&&!i?c.jsx(re,{title:z("common.closeText"),variant:"circle",size:"32-xs",onClick:o,className:"col-start-3 justify-self-end",color:"subtle-bright-inverted",testId:"close-settings-button",children:c.jsx(nn,{className:"size-5","aria-hidden":!0})}):null;return kye(d=>{d.key==="Enter"&&r.current&&r.current.focus(),(d.key==="Enter"||V3(d))&&Aye(a,r.current)}),c.jsxs("div",{className:"flex items-center pb-4",children:[c.jsx(re,{ref:r,variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:z("common.backText"),onClick:n,testId:"nav-header-back-button",children:c.jsx(Tl,{className:"size-5 -rotate-90"})}),c.jsx("h2",{className:de("mt-px grow text-center uppercase text-foreground-450 text-xs dark:text-foreground-600",!s&&"pe-8"),children:t}),s??u]})}function tR({triggerSource:e="settings",closePage:t}){const n=e==="composer",o=!hy()&&!n,{goBackOrClose:r}=Sr(),{getSortedConnectors:a,isFirstParty:i}=zl(),[u,d]=a(),m=bt({breakpoint:"md"}),f=p=>i(p.type)?c.jsx(_ye,{connectorType:p.type,triggerSource:e},p.type):c.jsx(Tye,{connectorType:p.type,triggerSource:e,closePage:t},p.type);return c.jsxs("div",{className:n?"min-w-60":"pb-3",children:[o&&c.jsx(Mye,{title:z("settings.connectedAppsTitle"),onClickBack:r}),c.jsxs("div",{className:F("flex flex-col",!n&&"gap-1.5"),children:[u.map(f),u.length>0&&d.length>0&&c.jsx(ms,{className:n?"mx-2 my-1":"my-2",horizontalMargin:!1,color:"default"}),d.map(f),n&&!m&&c.jsxs(re,{variant:"rect",title:z("connector.composer.settings"),color:"subtle-dimmed-inverted",className:"h-6 w-full justify-start gap-2.5 px-3 py-1.5 text-sm",onClick:p=>{t==null||t(p),setTimeout(()=>{iA("connector-list")},200)},children:[c.jsx(Sh,{className:"size-5 shrink-0"}),c.jsx("div",{className:"text-foreground-800 text-sm",children:z("connector.composer.settings")})]})]})]})}function Nye(e){const{t}=Y(),{closeDropdown:n}=e,s=bt({breakpoint:"sm"});return c.jsx(Eh,{color:"default",renderTrigger:({openPopover:o})=>c.jsx(re,{title:t("composer.connector.useConnector"),"aria-label":t("composer.connector.useConnector"),variant:"rect",color:"subtle-dimmed-inverted",onClick:r=>{o(r)},size:"40-base",alignment:"start",className:"w-full rounded-xl p-0",testId:"add-tabs-button",children:c.jsxs("div",{className:"flex h-10 w-full items-center gap-3 rounded-xl pe-2 ps-3",children:[c.jsx(JN,{className:"size-5"}),c.jsxs("div",{className:"flex grow items-center justify-between text-left",children:[c.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:t("composer.connector.useConnector")}),c.jsx(ds,{className:"size-4"})]})]})}),renderSurface:({closePopover:o})=>c.jsx("div",{className:"flex flex-col",children:c.jsx(tR,{triggerSource:"composer",closePage:r=>{o(r),n(r)}})}),containerClassNames:{surface:`p-1.5 border-white/25 dark:border-stroke-400/25 shadow-tinted-xl ${s?"":"-ml-2.5"}`},placement:s?"top-start":"right-end"})}const Rye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/screenshot-DXZDs5NE.svg";function Pye(e,t){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerCreateButton",eventInfo_impressionScenario:e??"off",eventInfo_conversationId:t}})}function nR(e){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerScreenshotButton",eventInfo_conversationId:e}})}function Lye(e,t){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerCreateButton",eventInfo_clickScenario:Oye(e),eventInfo_conversationId:t}})}function Oye(e){if(!e)return"showDrawer";switch(e){case"actions":return"exitActions";case"image":return"exitImage";case"podcast":return"exitPodcast";case"researchReport":return"exitResearchReport";case"quiz":return"exitQuiz";case"video":return"exitVideo";default:return"showDrawer"}}function sR(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerScreenshotButton",eventInfo_conversationId:e}})}function Dye(e){const{onTakeScreenshot:t}=e,{t:n}=Y(),s=M(De),o=l.useRef(void 0);return l.useEffect(()=>{o.current!==s&&nR(s)},[s]),c.jsx(re,{title:n("composer.takeScreenshot"),"aria-label":n("composer.takeScreenshot"),variant:"rect",color:"subtle-dimmed-inverted",onClick:r=>{t(r),sR(s)},size:"40-base",alignment:"start",className:"min-w-[230px] rounded-xl p-0",testId:"add-tabs-button",children:c.jsxs("div",{className:"flex h-10 w-full items-center gap-3 rounded-xl px-3 py-2",children:[c.jsx(yt,{url:Rye,className:"size-5"}),c.jsx("div",{className:"grow text-left",children:c.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:n("composer.takeScreenshot")})})]})})}const jye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/add-BTcFT5ig.svg",Fye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/image-zMo0jLdY.svg",Uye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/podcast-BQmBU8ew.svg",Bye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/quiz-mPcJG41j.svg",Vye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/video-clip-9pviB4uv.svg";function Hye(e,t){switch(e){case"image":return t("composer.create.image.prompt");case"podcast":return t("composer.create.podcast.prompt");case"researchReport":return t("composer.create.researchReport.prompt");case"quiz":return t("composer.create.quiz.prompt");case"actions":return t("composer.create.actions.prompt");case"video":return t("composer.create.video.prompt");case null:default:return""}}function zye(){const{t:e}=Y();return{setComposerCreateModeWithPrefill:l.useCallback(n=>{const s=Hye(n,e);bC(n),s&&Cd({prompt:s,prefillSource:"create"})},[e])}}function gy(){const e=se(uM),t=l.useCallback(s=>{e(s)},[e]),n=l.useCallback(s=>{e(s)},[e]);return{handleFeatureUpsell:t,handleFeatureLimitReached:n}}function Gye(){const{t:e}=Y(),{handleFeatureUpsell:t,handleFeatureLimitReached:n}=gy(),s=ch();return l.useCallback(()=>{if(s.disabledReason??s.subscriptions.length===0){n({allowUpsell:!1,title:e("proSubscription.modal.featureLimitReached.deepResearch.title"),subtitle:e("proSubscription.modal.featureLimitReached.deepResearch.subtitleIneligible"),payflowEntryPoint:"DeepResearchLimit",dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit",disabledReason:s.disabledReason??""});return}const{subscriptions:o}=s;let r;o.includes("m365-personal")?r="proSubscription.modal.featureLimitReached.deepResearch.subtitleFree":o.includes("m365-premium")?r="proSubscription.modal.featureLimitReached.deepResearch.subtitleUpgradable":r="",t({allowUpsell:!0,title:e("proSubscription.modal.featureLimitReached.deepResearch.title"),subtitle:e(r),payflowEntryPoint:"DeepResearchLimit",confirmButton:e("actions.proSubscription.subscribeToPro"),dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"})},[s,t,e,n])}function Wye(){const{t:e}=Y(),{handleFeatureUpsell:t,handleFeatureLimitReached:n}=gy(),s=ch();return l.useCallback(()=>{if(s.disabledReason??s.subscriptions.length===0){n({allowUpsell:!1,title:e("proSubscription.modal.featureLimitReached.podcast.title"),subtitle:e("proSubscription.modal.featureLimitReached.podcast.subtitleIneligible"),payflowEntryPoint:"PodcastLimit",dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit",disabledReason:s.disabledReason??""});return}const{subscriptions:o}=s;let r;o.includes("m365-personal")?r="proSubscription.modal.featureLimitReached.podcast.subtitleFree":o.includes("m365-premium")?r="proSubscription.modal.featureLimitReached.podcast.subtitleUpgradable":r="",t({allowUpsell:!0,title:e("proSubscription.modal.featureLimitReached.podcast.title"),subtitle:e(r),payflowEntryPoint:"PodcastLimit",confirmButton:e("actions.proSubscription.subscribeToPro"),dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"})},[s,t,e,n])}function $ye(){const{t:e}=Y(),{handleFeatureUpsell:t,handleFeatureLimitReached:n}=gy(),s=ch();return l.useCallback(()=>{if(s.disabledReason??s.subscriptions.length===0){n({allowUpsell:!1,title:e("proSubscription.modal.featureLimitReached.video.title"),subtitle:e("proSubscription.modal.featureLimitReached.video.subtitleIneligible"),payflowEntryPoint:"VideoLimit",dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit",disabledReason:s.disabledReason??""});return}const{subscriptions:o}=s;let r;o.includes("m365-personal")?r="proSubscription.modal.featureLimitReached.video.subtitleFree":o.includes("m365-premium")?r="proSubscription.modal.featureLimitReached.video.subtitleUpgradable":r="",t({allowUpsell:!0,title:e("proSubscription.modal.featureLimitReached.video.title"),subtitle:e(r),payflowEntryPoint:"VideoLimit",confirmButton:e("actions.proSubscription.subscribeToPro"),dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"})},[s,t,e,n])}const oR=()=>{const e=lM(),t=VA(),n=zA(),s=GA(),o=WA(),r=HA(),a=$A();return(t||n||s||o||r||a)&&e};function rR(){const{getSortedConnectors:e}=zl(),[t]=e(),[n,s]=l.useState(!1),[o,r]=l.useState(null),a=l.useMemo(()=>{var m;return((m=t.find(f=>f.type==="one-drive"))==null?void 0:m.status)==="ready"},[t]),i=l.useCallback(()=>{a&&s(!0)},[a]),u=l.useCallback(m=>{r(m)},[r]),d=l.useCallback(()=>{s(!1)},[s]);return{isOneDriveFilePickerOpen:n,setIsOneDriveFilePickerOpen:s,pickedOneDriveItems:o,setPickedOneDriveItems:r,oneDriveConnectorReady:a,selectOneDriveFile:i,onPickCallback:u,onCloseCallback:d}}const K8="create";function qye(e){const{disabled:t=!1,onPasteTextClick:n,onSelectFile:s,onSelectUserOpenedTabs:o,onTakeScreenshot:r,onSelectOneDriveFile:a,uploadButtonDisabled:i}=e,u=M(k1),d=M(Kd),m=M(M1),f=M(rd),p=M(Sa),g=Co(),C=M(N1),v=an(),b=se(wa),y=Wye(),E=Gye(),x=$ye(),I=ly(),T=oR()&&f.length>0&&!I,A=aR({remainingPodcastGeneration:u,remainingResearchReportGeneration:d,remainingVideoGeneration:m,isUpgradedUser:C}),{oneDriveConnectorReady:k}=rR(),R=SC(),P=xC(),B=l.useRef(P),U=l.useRef(!1);l.useEffect(()=>{B.current.length>0&&(U.current=!0),B.current=P},[P]);const{setComposerCreateModeWithPrefill:$}=zye(),Q=l.useCallback(Z=>{switch(Z){case"image":$("image");break;case"podcast":if(u===0){v?y():b({isOpen:!0,scenario:"podcast",reason:"createPodcast"});return}$("podcast");break;case"researchReport":if(d===0){v?E():b({isOpen:!0,scenario:"researchReport",reason:"createResearchReport"});return}$("researchReport");break;case"quiz":$("quiz");break;case"actions":$("actions");break;case"video":if(m===0){x();return}$("video");break;default:$(null);break}},[$,v,u,d,m,b,y,E,x]),te=l.useCallback(()=>{bC(null),mp(),zt(kn())},[]);l.useEffect(()=>{P.length===0&&U.current&&R!==null&&g!=="research"&&g!=="computerUse"&&g!=="study"&&te()},[P,te,g,R]);const X=!!r||!!o||T,ne=A.length>1||X,q=!Xa("uploadFile");return c.jsx(py,{items:A,onSelect:Q,value:R??K8,defaultValue:K8,onReset:te,disabled:t,onMenuClick:()=>Ce({source:"composerCreateButton",pageName:"chatPage"}),alwaysShowDefault:!0,renderHeader:({closePopover:Z})=>p||q?null:c.jsxs(c.Fragment,{children:[c.jsx(Iye,{onSelectFile:J=>{Z(J),s()},onPasteTextClick:n?J=>{Ce({source:"uploadTextModalCta"}),n(),Z(J)}:void 0,uploadButtonDisabled:i,onSelectOneDriveFile:a&&k?()=>{a()}:void 0}),ne&&c.jsx(ms,{verticalMargin:!1,className:"my-1.5"})]}),renderFooter:({closePopover:Z})=>c.jsxs(c.Fragment,{children:[X&&c.jsx(ms,{verticalMargin:!1,className:"my-1.5"}),r&&c.jsx(Dye,{onTakeScreenshot:J=>{Z(J),r()}}),o&&c.jsx(Sye,{onSelectUserOpenedTabs:J=>{Z(J),o()}}),T&&c.jsx(Nye,{closeDropdown:Z})]}),floatingOffset:{mainAxis:4,crossAxis:-10}})}function Ga(e,t){return n=>{Pye(e,n),e==="podcast"&&t===0?qg({entryPoint:"ComposerV4",featureName:"Podcast"}):e==="researchReport"&&t===0?qg({entryPoint:"ComposerV4",featureName:"DeepResearch"}):e==="video"&&t===0&&qg({entryPoint:"ComposerV4",featureName:"Video"})}}function Wa(e,t){return n=>{Lye(e,n),e==="podcast"&&t===0?Zg({entryPoint:"ComposerV4",featureName:"Podcast"}):e==="researchReport"&&t===0?Zg({entryPoint:"ComposerV4",featureName:"DeepResearch"}):e==="video"&&t===0&&Zg({entryPoint:"ComposerV4",featureName:"Video"})}}function aR({remainingPodcastGeneration:e,remainingResearchReportGeneration:t,remainingVideoGeneration:n,isUpgradedUser:s}){const o=Xa("actions"),r=Xa("podcast"),a=Xa("researchReport"),i=Xa("quiz"),u=Xa("image"),d=an(),m=H("video-gen")&&d,{t:f}=Y("translation",{keyPrefix:"composer.create"}),{t:p}=Y();return l.useMemo(()=>{const C={key:"create",title:p("common.open"),icon:c.jsx(yt,{url:jye,className:"size-6"}),hideButtonTitle:!0,testId:"composer-create-button",onImpression:Ga(null),beforeClick:Wa(null),isIconEnabledInButton:!0},v={key:"image",title:f("image.title"),icon:c.jsx(yt,{url:Fye,className:"size-5"}),testId:"composer-create-image-button",onImpression:Ga("image"),beforeClick:Wa("image")};function b(){return{key:"podcast",title:f("podcast.title"),icon:c.jsx(yt,{url:Uye,className:"size-5"}),testId:"composer-create-podcast-button",onImpression:Ga("podcast",e),beforeClick:Wa("podcast",e),tags:e!==null&&!s?[{label:f("podcast.remainingCalls",{remainingCalls:e.toString()}),color:e>0?"neutral":"accent"}]:void 0}}function y(){return{key:"researchReport",title:f("researchReport.title"),icon:c.jsx(yt,{url:nN,className:"size-5"}),testId:"composer-create-research-report-button",onImpression:Ga("researchReport",t),beforeClick:Wa("researchReport",t),tags:t!==null&&!s?[{label:f("researchReport.remainingCalls",{remainingCalls:t.toString()}),color:t>0?"neutral":"accent"}]:void 0}}function E(){return{key:"quiz",title:f("quiz.title"),icon:c.jsx(yt,{url:Bye,className:"size-5"}),testId:"composer-create-quiz-button",onImpression:Ga("quiz"),beforeClick:Wa("quiz")}}function x(){return{key:"actions",title:f("actions.title"),icon:c.jsx(yt,{url:XM,className:"size-5"}),testId:"composer-create-actions-button",onImpression:Ga("actions"),beforeClick:Wa("actions"),tags:s?void 0:[{label:f("actions.labsTag"),color:"accent"}]}}function I(){return{key:"video",title:f("video.title"),icon:c.jsx(yt,{url:Vye,className:"size-5"}),testId:"composer-create-video-button",onImpression:Ga("video",n),beforeClick:Wa("video",n),tags:n!==null&&!s?[{label:f("video.remainingCalls",{remainingCalls:n.toString()}),color:n>0?"neutral":"accent"}]:void 0}}return[C,u?v:void 0,m?I():void 0,a?y():void 0,r?b():void 0,i?E():void 0,o?x():void 0].filter(_=>_!==void 0)},[p,f,u,a,r,i,o,m,e,s,t,n])}function Zye(e){const{t}=Y(),{createMode:n,onReset:s}=e,o=t(`composer.create.${n}.selectedText`);return c.jsxs(re,{title:o,"aria-label":o,variant:"rect",size:"36-sm",color:"composer-selected",className:F("h-9 select-none gap-1 rounded-2xl border border-black/8 pe-3.5 ps-2.5 dark:border-white/8"),onClick:s,testId:`composer-${n}-mode-selected`,children:[c.jsx(yt,{url:QN,className:"size-3.5"}),c.jsx("span",{className:"text-sm",children:o})]})}function iR(){const[e,t]=l.useState(!1);return l.useEffect(()=>{async function n(){const{uiOverrides:{showScreenshotButton:s=()=>Promise.resolve(!1)}={}}=ae.instance().config(),o=await s();t(o)}n().catch(()=>{})},[]),e}function Kye(){const{t:e}=Y(),{getAvailableConnectorsCount:t}=zl(),n=t();return c.jsx(pt,{children:n!==0&&c.jsx(ge.div,{initial:{...Be},animate:{...tt},exit:{...Be},transition:{duration:.1,ease:"easeInOut"},children:c.jsx(Eh,{color:"default",renderTrigger:({openPopover:s})=>c.jsx(re,{title:e("connector.composer.buttonTitle"),"aria-label":e("connector.composer.buttonTitle"),variant:"rect",size:"36-sm",color:"subtle-dimmed",className:"h-9 select-none gap-1 rounded-2xl border border-black/8 dark:border-white/8",onClick:s,children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(JN,{className:"size-6"}),c.jsx(pt,{mode:"popLayout",initial:!1,children:n>1&&c.jsx(ge.span,{className:"min-w-4 rounded-full bg-background-700 px-1 text-foreground-100 text-xs-medium",initial:{...Be,scale:.5},animate:{...tt,scale:1},exit:{...Be,scale:.5},transition:cse,children:n})}),c.jsx(ds,{className:"size-4 rotate-90"})]})}),renderSurface:({closePopover:s})=>c.jsx("div",{className:"flex flex-col",children:c.jsx(tR,{triggerSource:"composer",closePage:s})}),containerClassNames:{surface:"p-1.5 border-white/25 dark:border-stroke-400/25 shadow-tinted-xl"},placement:"bottom-start",floatingOffset:{mainAxis:4,crossAxis:-4}})})})}function Yye(e){const{onClose:t,onSubmit:n}=e,{t:s}=Y(),[o,r]=l.useState(""),a=ut(),i=l.useRef(null),u=hl(i,{once:!0}),d=o.trim(),m=d.length>0,f=d.length===0;l.useEffect(()=>{u&&cn({page:a==="/"?"landing":"chat",element:"uploadTextModal"})},[u,a]);const p=()=>{Ce({source:"uploadTextModal",scenario:"close"}),t()},g=()=>{m&&(Ce({source:"uploadTextModalCta",scenario:"submit"}),n==null||n(o),t())};return c.jsx(fn,{isOpen:!0,headerText:s("fileUpload.pasteText"),onClose:p,className:"h-[60vh] max-h-128 w-[80vw] max-w-2xl",bottomSheetOnSmall:!0,children:c.jsxs("div",{className:"mt-3 flex size-full flex-col justify-center gap-6",children:[c.jsx($N,{className:"flex-1 resize-none rounded-xl bg-background-100 p-4 placeholder:text-foreground-650 contrast-more:border-2 dark:text-white",placeholder:s("fileUpload.addTextContentModalPlaceholder"),value:o,autoFocus:!0,ref:i,onChange:C=>r(C.target.value)}),c.jsx(re,{title:s("common.submitText"),size:"56-xl",color:"strong",disabled:f,onClick:g,children:s("common.submitText")})]})})}function Qye(e){const{onPasteText:t,onSelectFile:n,onSelectUserOpenedTabs:s,onTakeScreenshot:o,onSelectOneDriveFile:r,uploadButtonDisabled:a,disabled:i=!1}=e,[u,d]=l.useState(!1),m=SC(),f=oR(),p=M(k1),g=M(Kd),C=M(M1),v=M(N1),y=aR({remainingPodcastGeneration:p,remainingResearchReportGeneration:g,remainingVideoGeneration:C,isUpgradedUser:v}).find(A=>A.key===m),E=l.useCallback(()=>{bC(null),mp(),zt(kn())},[]),x=iR(),I=ly(),_=m!==null&&y?c.jsx(Zye,{createMode:m,onReset:E}):!I&&c.jsx(yye,{disabled:i}),T=f&&!I;return c.jsxs(c.Fragment,{children:[c.jsx(qye,{disabled:i,onPasteTextClick:t?()=>d(!0):void 0,onSelectFile:n,onSelectOneDriveFile:r,onSelectUserOpenedTabs:s,onTakeScreenshot:x?o:void 0,uploadButtonDisabled:a}),_,T&&c.jsx(Kye,{}),u&&c.jsx(Yye,{onClose:()=>d(!1),onSubmit:t})]})}function Jye(e){const[t,n]=l.useState(!1),{tab:s,className:o=""}=e,{t:r}=Y();return t||!s.favIconUrl?c.jsx(wh,{className:de("size-5",o)}):c.jsx("img",{src:s.favIconUrl,alt:r("composer.multiTabs.tabFavIconAltText"),className:de("size-4 rounded bg-white",o),onError:()=>{n(!0)}})}function Xye(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch{return null}}function ebe(e,t=5){const n=new Set;for(const s of e){if(n.size>=t)break;if(s.url){const o=Xye(s.url);o&&n.add(o)}}return Array.from(n).join(", ")}function tbe(e,t=5){const n=new Set;for(const s of e){if(n.size>=t)break;s.title&&n.add(s.title)}return Array.from(n).join(", ")}function nbe(e){const{tabs:t}=e,n=l.useMemo(()=>tbe(t,5),[t]),s=t.length-1;return c.jsxs("div",{className:"flex",children:[c.jsx("span",{className:"min-w-0 truncate font-semibold text-foreground-750 text-sm",children:n}),s>0&&c.jsxs("span",{className:"ms-1 font-semibold text-foreground-750 text-sm",children:["+",s]})]})}function sbe(e){const{tabs:t}=e,n=l.useMemo(()=>ebe(t,5),[t]);return c.jsx("span",{className:"truncate text-foreground-750 opacity-60 text-xs",children:n})}function obe(e,t){return`${e.id}-${e.url??""}-${t}`}function cR(e){const{tabs:t,onRemove:n,showRemoveIcon:s,onClick:o,isLoading:r=!1}=e,{t:a}=Y(),i=l.useMemo(()=>t.slice(0,3),[t]),u=m=>{m.stopPropagation(),n==null||n()},d=m=>{m.stopPropagation(),o==null||o()};return c.jsxs(ge.div,{className:"relative flex h-[58px] w-full flex-row items-center justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-white/90 p-3 dark:border-white/8 dark:bg-background-200/80",layout:"position",initial:Be,animate:tt,exit:Be,onClick:d,children:[c.jsx("div",{className:de("flex h-5 min-w-5 flex-none items-center justify-center rounded bg-white/90 dark:bg-background-200/80"),children:i.map((m,f)=>c.jsx(Jye,{tab:m,className:de(f>0&&"-ms-[6px]")},obe(m,f)))}),c.jsxs("div",{className:"me-7 flex min-w-0 flex-1 flex-col",children:[c.jsx(nbe,{tabs:t}),c.jsx(sbe,{tabs:t})]}),r&&c.jsx(rn,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45","data-testid":"multi-tabs-loading",children:c.jsx(l.Suspense,{fallback:c.jsx("div",{"aria-hidden":!0}),children:c.jsx(it,{type:"spinnerThemed",className:"size-11"})})}),s&&c.jsx("button",{type:"button",title:a("composer.removeImage"),"aria-label":a("composer.removeImage"),onClick:u,tabIndex:0,className:"absolute end-0.5 top-0.5 m-1 rounded-full p-1 text-foreground-850 safe-hover:bg-black/5 dark:safe-hover:bg-black/30",children:c.jsx(nn,{className:"size-3"})})]})}function rbe({onClick:e,showRemoveIcon:t=!0,isLoading:n=!1}){const[s,o]=Fe(zo),r=l.useMemo(()=>Array.from(s.values()),[s]);return s.size===0?null:c.jsx("div",{className:"flex min-h-[60px] cursor-pointer flex-col gap-2","data-testid":"manual-multi-tabs-preview-card",children:c.jsx(cR,{showRemoveIcon:t,tabs:r,onRemove:()=>{o(new Map)},onClick:e,isLoading:n})})}const lR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M11.7498 3C12.1295 3 12.4434 3.28201 12.4931 3.64808L12.5 3.74985L12.5012 11H19.7543C20.1685 11 20.5043 11.3358 20.5043 11.75C20.5043 12.1297 20.2221 12.4435 19.8561 12.4932L19.7543 12.5H12.5012L12.5032 19.7491C12.5033 20.1633 12.1676 20.4993 11.7534 20.4993C11.3737 20.4993 11.0598 20.2173 11.0101 19.8512L11.0032 19.7494L11.0012 12.5H3.7522C3.33798 12.5 3.0022 12.1642 3.0022 11.75C3.0022 11.3703 3.28435 11.0565 3.65043 11.0068L3.7522 11H11.0012L11 3.75015C10.9999 3.33594 11.3356 3 11.7498 3Z"})),Mke=Object.freeze(Object.defineProperty({__proto__:null,default:lR},Symbol.toStringTag,{value:"Module"}));function abe({onRef:e,onClick:t,onButtonRef:n}){const{t:s}=Y(),o=M(D1);return c.jsx(Hs,{data:{title:s("common.open"),testId:"plus-button",isVisible:!0,ariaExpanded:o==="plus",onClick:t},ref:e,onButtonRef:n,children:c.jsx(lR,{className:"size-6","aria-hidden":!0})})}const uR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M11.7722 3.74407C14.1136 1.40049 17.9126 1.40049 20.2558 3.74363C22.5388 6.0267 22.5974 9.69191 20.4314 12.0458L20.2432 12.2432L11.4432 21.0414L11.4066 21.0717C9.94541 22.3884 7.69141 22.3437 6.28404 20.9363C4.96502 19.6173 4.8429 17.5546 5.91769 16.0979C5.94103 16.0525 5.96928 16.0088 6.00249 15.9677L6.05605 15.908L6.14295 15.8203L6.28404 15.6724L6.28695 15.6753L13.7227 8.22096C13.9886 7.95434 14.4052 7.92958 14.6991 8.14704L14.7834 8.21955C15.05 8.48546 15.0747 8.90209 14.8573 9.19599L14.7848 9.28021L7.19015 16.8933C6.47251 17.7689 6.52239 19.0632 7.33979 19.8806C8.16885 20.7096 9.4885 20.7491 10.3643 19.999L19.197 11.1685C20.9525 9.41089 20.9525 6.56165 19.1951 4.80429C17.4927 3.10185 14.7655 3.04865 12.999 4.64469L12.8312 4.80429L12.8186 4.8186L3.28228 14.3549C2.98939 14.6478 2.51452 14.6478 2.22162 14.3549C1.95536 14.0887 1.93115 13.672 2.149 13.3784L2.22162 13.2943L11.7705 3.74363L11.7722 3.74407Z"})),Nke=Object.freeze(Object.defineProperty({__proto__:null,default:uR},Symbol.toStringTag,{value:"Module"})),dR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M6.25 3C4.45507 3 3 4.45507 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C19.5449 21 21 19.5449 21 17.75V6.25C21 4.45507 19.5449 3 17.75 3H6.25ZM4.5 6.25C4.5 5.2835 5.2835 4.5 6.25 4.5H17.75C18.7165 4.5 19.5 5.2835 19.5 6.25V17.75C19.5 18.7165 18.7165 19.5 17.75 19.5H6.25C5.2835 19.5 4.5 18.7165 4.5 17.75V6.25ZM8 7.5C7.72386 7.5 7.5 7.72386 7.5 8V10.25C7.5 10.6642 7.16421 11 6.75 11C6.33579 11 6 10.6642 6 10.25V8C6 6.89543 6.89543 6 8 6H10.25C10.6642 6 11 6.33579 11 6.75C11 7.16421 10.6642 7.5 10.25 7.5H8ZM8 16.5C7.72386 16.5 7.5 16.2761 7.5 16V13.75C7.5 13.3358 7.16421 13 6.75 13C6.33579 13 6 13.3358 6 13.75V16C6 17.1046 6.89543 18 8 18H10.25C10.6642 18 11 17.6642 11 17.25C11 16.8358 10.6642 16.5 10.25 16.5H8ZM16.5 8C16.5 7.72386 16.2761 7.5 16 7.5H13.75C13.3358 7.5 13 7.16421 13 6.75C13 6.33579 13.3358 6 13.75 6H16C17.1046 6 18 6.89543 18 8V10.25C18 10.6642 17.6642 11 17.25 11C16.8358 11 16.5 10.6642 16.5 10.25V8ZM16 16.5C16.2761 16.5 16.5 16.2761 16.5 16V13.75C16.5 13.3358 16.8358 13 17.25 13C17.6642 13 18 13.3358 18 13.75V16C18 17.1046 17.1046 18 16 18H13.75C13.3358 18 13 17.6642 13 17.25C13 16.8358 13.3358 16.5 13.75 16.5H16Z"})),Rke=Object.freeze(Object.defineProperty({__proto__:null,default:dR},Symbol.toStringTag,{value:"Module"})),mR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M3 5.75C3 4.23122 4.23122 3 5.75 3H18.25C19.7688 3 21 4.23122 21 5.75V12.0218C20.5368 11.7253 20.0335 11.4858 19.5 11.3135V5.75C19.5 5.05964 18.9404 4.5 18.25 4.5H5.75C5.05964 4.5 4.5 5.05964 4.5 5.75V18.25C4.5 18.9404 5.05964 19.5 5.75 19.5H11.3135C11.4858 20.0335 11.7253 20.5368 12.0218 21H5.75C4.23122 21 3 19.7688 3 18.25V5.75ZM23 17.5C23 14.4624 20.5376 12 17.5 12C14.4624 12 12 14.4624 12 17.5C12 20.5376 14.4624 23 17.5 23C20.5376 23 23 20.5376 23 17.5ZM18.0006 18L18.0011 20.5035C18.0011 20.7797 17.7773 21.0035 17.5011 21.0035C17.225 21.0035 17.0011 20.7797 17.0011 20.5035L17.0006 18H14.4956C14.2197 18 13.9961 17.7762 13.9961 17.5C13.9961 17.2239 14.2197 17 14.4956 17H17.0005L17 14.4993C17 14.2231 17.2239 13.9993 17.5 13.9993C17.7761 13.9993 18 14.2231 18 14.4993L18.0005 17H20.4966C20.7725 17 20.9961 17.2239 20.9961 17.5C20.9961 17.7762 20.7725 18 20.4966 18H18.0006Z"})),Pke=Object.freeze(Object.defineProperty({__proto__:null,default:mR},Symbol.toStringTag,{value:"Module"})),hu=de("flex w-full flex-row items-center gap-2");function ibe(e){const{startNewChatDisabled:t,startNewConversation:n,selectFile:s,selectOneDriveFile:o,takeScreenshot:r,selectUserOpenedTabs:a,uploadButtonDisabled:i=!1}=e,u=l.useRef(null),{t:d}=Y(),m=M(Sa),f=M(De),p=l.useRef(void 0);return $i(u),l.useEffect(()=>{r&&p.current!==f&&nR(f)},[f,r]),c.jsxs(_r,{className:"pointer-events-auto relative flex flex-col rounded-2xl contrast-more:border-2","data-testid":"composer-plus-menu",role:"menu",circular:!0,children:[c.jsx(re,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:d("composer.startNewChat"),onClick:n,testId:"new-chat-button",ref:u,disabled:t,children:c.jsxs("div",{className:hu,children:[c.jsx(xm,{className:"size-6"}),d("composer.startNewChatShort")]})}),s&&!m&&c.jsx(re,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:d("composer.upload"),disabled:i,testId:"file-upload-button",onClick:g=>{g.preventDefault(),s()},children:c.jsxs("div",{className:hu,children:[c.jsx(uR,{className:"size-6"})," ",d("composer.upload")]})}),r&&c.jsx(re,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:d("composer.takeScreenshot"),onClick:g=>{g.preventDefault(),g.stopPropagation(),r(),sR(f)},children:c.jsxs("div",{className:hu,children:[c.jsx(dR,{className:"size-6"}),d("composer.takeScreenshotShort")]})}),o&&c.jsx(re,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:d("composer.addFromOneDrive"),onClick:g=>{g.preventDefault(),g.stopPropagation(),o()},children:c.jsxs("div",{className:hu,children:[c.jsx(Ch,{className:"size-6"}),d("composer.addFromOneDrive")]})}),a&&c.jsx(re,{role:"menuitem",variant:"rect",testId:"add-tabs-button",color:"subtle-dimmed-inverted",title:d("composer.multiTabs.addTab"),onClick:g=>{g.preventDefault(),g.stopPropagation(),a()},children:c.jsxs("div",{className:hu,children:[c.jsx(mR,{className:"size-6"}),d("composer.multiTabs.addTab")]})})]})}function cbe({startNewChatDisabled:e,uploadButtonDisabled:t=!1,onStartNewConversation:n,onSelectFileIfEnabled:s,onSelectOneDriveFileIfEnabled:o,onTakeScreenshot:r,onSelectUserOpenedTabsIfEnabled:a,onRef:i}){const[u,d]=Fe(D1),m=iR(),p=`plus-menu-${Ji()}`,g=u==="plus";return c.jsx(bm,{isOpen:g,onIsOpenChange:C=>d(v=>C?"plus":v==="plus"?null:v),renderTrigger:C=>c.jsx(abe,{onRef:C.ref,onButtonRef:i,onClick:v=>{C.onClick(v),Ce({source:"composerPlusButton",pageName:"chatPage",customData:JSON.stringify({isOpen:g})})}}),options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:F(Ys,"p-2"),children:c.jsx(ibe,{startNewChatDisabled:e,uploadButtonDisabled:t,startNewConversation:n,selectFile:s,selectOneDriveFile:o,takeScreenshot:m?r:void 0,selectUserOpenedTabs:a})},p)}const fR=async(e,t)=>{pe(fi)&&(e==null||e());try{await WN(fi,n=>!n)}catch{}t==null||t()},Lke=({onTurnstileDisplaying:e,onTurnstileClosed:t})=>l.useCallback(async()=>{await fR(e,t)},[e,t]);function pR(){const e=RT(),t=M(De),n=M(nC),s=M(bn);return vm({queryKey:["history",t],queryFn:async r=>{const{pageParam:a}=r,{url:i,args:u,conversationId:d}=a,m=await St(i,ow,{query:{...u,"api-version":"2"},analytics:{anonymousPath:"/conversations/*/history"},parseOptions:{safe:!0}}).then(f=>f.data);if(m.results.length>0){const f=m.results,p=Eae(f),g=HN(p);e(d,C=>{var v;C.length===0&&RK(s,(v=g.at(0))==null?void 0:v.createdAt),g.reverse(),C.unshift(...g)})}return m},initialPageParam:{url:t?`/conversations/${t}/history`:"",conversationId:t??""},getNextPageParam:r=>r.next&&t?{url:`/conversations/${t}/history`,args:{cursor:r.next},conversationId:t}:null,enabled:!!t&&!(n!=null&&n.prompt)})}function lbe(){const e=!on("kill-cf-turnstile");return H("cf-turnstile-voice")&&e}const ube=null,dbe=1500;function mbe(e){return e instanceof Error&&(e.name==="NotFoundError"||e.name==="OverconstrainedError")}function Cf(){if(yo()==="study"&&ye("study-mode-voice"))return"study"}function fbe({initAudio:e,getAudioConstraints:t,onCallTerminated:n,onSpeechEndDetected:s,keepAudioInputAlive:o=!1,shouldRefetchHistory:r=!0,eventListeners:a=[]}){const i=se(mi),u=se(KK),d=se(vo),m=H("voice-disable-greeting-for-reconnected"),f=sh(),p=se(N4),g=M(De),C=M(b1),v=M(qd),[b,y]=Fe(Qa),E=se(DK),x=se(yi),I=se(Sl),_=H("voice-speed"),T=H("voice-keep-input-stream-alive"),A=M(ZY),k=RT(),{refetch:R}=pR(),{showBoundary:P}=rS(),{isPortraitEnabled:B,isPortraitV2Enabled:U,portraitId:$,portraitVoiceId:Q,portraitScenario:te}=r3(),X=se(Qie),ne=se(ek),q=se(lk),Z=l.useRef("inactive"),J=l.useRef(null),W=e5e(),le=l.useRef(0),[_e,Ae]=Fe(r0),K=KM.getInstance(),be=lbe();l.useEffect(()=>{e||(Ae(!0),y("waiting-for-user-interaction"))},[e,Ae,y]),l.useEffect(()=>{gt.AudioIn.toggleMute(_e)},[_e]);const Me=()=>{J.current&&clearTimeout(J.current)};l.useEffect(()=>(b!=="checking-availability"&&Me(),Me),[b]);const je=l.useCallback(async()=>{g&&(k(g,we=>we.splice(0)),await R())},[R,g,k]),oe=l.useCallback(()=>{gt.AudioOut.stopAudioPlayback(),Us()&&gt.Animation.stopAnimation()},[]),ie=l.useCallback(async(we,Ee)=>{if(Z.current="ending",gt.AudioIn.stopAudioCapture(),oe(),Ae(!1),we.sendAudioEnd(),p("idle"),pe(Qa)==="available"){gt.AudioOut.playCallEndJingle(),r&&await je();const Ke=Cf();K.onEndCall(le.current,Ke),K.trackStartVoiceCall("end"),le.current=0,I(d5e(Ee)),B&&X(!0)}},[oe,Ae,p,r,K,I,B,je,X]),ee=l.useCallback(async we=>{const{AudioIn:Ee}=gt,Ke=Re=>{Re instanceof CustomEvent&&typeof Re.detail=="string"&&we.sendAudio(Re.detail)},dt=async()=>{(T||o)&&Z.current==="active"&&ee(we),Ee.removeEventListener("audioData",Ke),Ee.removeEventListener("audioTrackEnded",dt)};try{Ee.setOnClientSideVoiceStartDetected(()=>K.onClientSpeechStartDetected()),Ee.setOnClientSideVoiceEndDetected(()=>{const Re=Ee.getLastClientVoiceEndTime();Re!==null&&K.onClientSpeechEndDetected(Re)}),await Ee.startAudioCapture(t),Ee.addEventListener("audioData",Ke),Ee.addEventListener("audioTrackEnded",dt),K.trackStartVoiceCall("success")}catch(Re){Re instanceof Error&&(Re.name==="NotAllowedError"||Re.name==="NotSupportedError")?(y("microphone-denied"),await ie(we),D.trackEvent({name:"system",data:{eventName:"copilotNoMicrophoneAccess"}}),K.trackStartVoiceCall("failed","no_permission",Re.message)):mbe(Re)?(y("microphone-not-found"),await ie(we),D.trackEvent({name:"system",data:{eventName:"copilotMicrophoneNotFound"}}),K.trackStartVoiceCall("failed","no_microphone_found",Re instanceof Error?Re.message:String(Re))):(P(new Error(`Error starting audio capture: ${Re}`)),K.trackStartVoiceCall("failed","other_start_fail",Re instanceof Error?Re.message:String(Re)))}},[o,t,y,ie,P,K,T]),me=l.useCallback(we=>{Ae(we==="mute")},[Ae]);l.useEffect(()=>(We.on("voice:toggle-mute",me),()=>{We.off("voice:toggle-mute",me)}),[me]);const Pe=l.useCallback(async we=>{gt.currentTurnIndex+=1,gt.AudioIn.audioContext?K.trackStartVoiceCall("success"):ye("voice-capture-delay")?setTimeout(()=>{Z.current==="active"&&ee(we)},dbe):ee(we);const Ee=_?A:Od;await gt.AudioOut.initialize(Ee),await gt.Animation.initialize(Us())},[A,_,ee,K]),Ve=l.useCallback(()=>{if(B)return"portrait";const we=ae.instance().config().audioConfigClientType;if(we)return we;if(Us())return"character"},[B]),Qe=l.useCallback(()=>{var we;return Q??v??((we=C[0])==null?void 0:we.id)},[Q,v,C]),st=l.useCallback(()=>$?[{type:"portrait",portraitId:$,scenario:U?te:void 0}]:void 0,[U,$,te]),ve=l.useCallback((we,Ee,Ke)=>{const dt=Ve(),Re=Qe(),ft=Cf(),ht=st();we.sendAudioStart({conversationId:Ee,options:{voice:Re,initiator:Ke},clientType:dt,mode:ft,context:ht});const Bn=1e4;Me(),J.current=setTimeout(()=>{pe(Qa)==="checking-availability"&&Z.current==="active"&&(y("start-timeout"),K.onAudioStartTimeout(Bn),K.trackStartVoiceCall("failed","start_timeout"))},Bn)},[Ve,Qe,st,y,K]),xe=l.useCallback(async(we,Ee)=>{if(!Ee||!e||Z.current==="ending")return;y("checking-availability"),E(null),Xfe()&&await fR(),ve(we,Ee),gt.currentTurnIndex=0;const Ke=Cf();K.onStartCall(Ee,Ke),K.trackStartVoiceCall("start"),await gt.AudioOut.playCallStartJingle(),Mc("onStartVoiceChat")},[e,y,K,E,ve]),Te=l.useCallback(async(we,Ee)=>{await ie(we,{type:"server-terminated",reason:Ee}),n(Ee)},[ie,n]),Ze=l.useRef(null),Le=l.useCallback(async we=>{try{if(!we.length)return;let Ee;const Ke=[];for(const ht of we){if(ht.op==="replace"&&ht.path==="/selectedComponentPath"&&ht.value!==null){Ee=ht.value;continue}Ke.push(ht)}if(Ee!==void 0&&at(Nme,Ee),!Ze.current){const{applyPatch:ht}=await V(async()=>{const{applyPatch:Bn}=await import("./index-DS1hydBz.js");return{applyPatch:Bn}},[]);Ze.current={applyPatch:ht}}const dt=pe(Dx)??[],{applyPatch:Re}=Ze.current,{newDocument:ft}=Re(dt,Ke);at(Dx,ft)}catch{}},[]),Ye=(we,Ee)=>{if(!we)return null;switch(we.type){case"topicList":return Array.isArray(we.topics)?{...we,selectedIndex:we.selectedIndex??-1}:{...we,topics:(Ee==null?void 0:Ee.type)==="topicList"?Ee.topics:null};case"summary":return we;default:return null}},Ue=l.useCallback((we,Ee)=>{const Ke=Ye(we,Ee);at(m5,Ke),f&&u(null)},[f,u]),he=l.useRef(a);he.current=a;const ze=l.useCallback(we=>Ee=>{var dt;const Ke=Cf();switch(Ee.event){case"startMessage":{const{messageId:Re}=Ee;if(K.onStartMessage(Re),oe(),Z.current==="inactive")break;Pe(we),y("available"),p("listening");break}case"transcriptEvent":{const{text:Re}=Ee;K.onTranscriptReceived(Re.length);break}case"appendText":{const{messageId:Re}=Ee;K.onTextReceived(Re),f&&u("responding");break}case"audioStartFailed":{const{reason:Re}=Ee,{success:ft}=Ww.safeParse(Re);y(ft?Re:"error"),K.onAudioStartFailed(Re,Ke),K.trackStartVoiceCall("failed","start_fail",Re);break}case"audioTimeRemaining":{const{seconds:Re}=Ee;E(Re);break}case"audio":{if(Z.current==="inactive")break;K.onAudioReceived(Ke),gt.AudioOut.appendAudioData(Ee.audio);break}case"characterAnimation":{K.onCharacterAnimationReceived(),Us()&&gt.Animation.setFrameData(Ee);break}case"characterAnimationEnd":{K.onCharacterAnimationEnd(),Us()&&gt.Animation.setAnimationDone();break}case"callUI":{const{callUI:Re}=Ee,ft=pe(m5);Ue(Re,ft),K.onCallUIEventReceived(Ke);break}case"callUIUpdate":{const{update:Re}=Ee;Le(Re);break}case"characterAppearance":{Us()&&W&&(K.onCharacterAppearanceReceived({body:Ee.body,props:Ee.props}),gt.Animation.setCharacterAppearance({body:Ee.body,props:Ee.props}),q(!0));break}case"characterEmotion":{Us()&&(K.onCharacterEmotionReceived(Ee.emotion,Ee.bodyReaction),gt.Animation.setEmotionData({emotion:Ee.emotion,bodyReaction:Ee.bodyReaction}));break}case"interruptAudio":{p("listening"),i("listening"),f&&u("listening"),K.onAudioInterrupt(Ke),oe(),We.emit("portrait:interrupt-audio");break}case"speechEndDetected":{K.onSpeechEndDetected(Ke),We.emit("portrait:end-speech"),i("thinking"),f&&u("thinking");const Re=gt.AudioIn.onServerSpeechEndDetected();Re!==null&&K.onServerVADLatencyMeasured(Re),s==null||s();break}case"callTerminated":{Te(we,Ee.reason),K.onTerminated(Ee.reason,Ke);break}case"error":{const{errorCode:Re}=Ee;switch(Re){case"over-turn-limit":{x(0);break}case"character-out-of-capacity":{we.setCallType("standard");break}}K.onError(Re,Ke);break}case"done":{const{messageId:Re}=Ee;le.current+=1,gt.AudioOut.setAudioDone(),K.onMessageDone({messageId:Re,voiceType:v??((dt=C[0])==null?void 0:dt.id),audioChatMode:Ke});break}case"banned":{const{expiresAt:Re}=Ee,ft=YC(Re);ft&&(QC(ft,"voice",Re),oe(),ie(we));break}case"callTypeChanged":{const{callType:Re}=Ee;d(Re==="character"?Ea:void 0);break}case"challenge":{be&&(Z.current="inactive",y("waiting-for-user-interaction"),p("waiting-for-user-interaction"),at(r0,!0),oe());break}}for(const Re of he.current)try{Re(Ee)}catch{}},[K,oe,Pe,y,p,f,u,E,Ue,Le,W,q,i,s,Te,x,v,C,ie,d,be]),It=l.useCallback(()=>we=>{switch(we.event){case"callEnded":{Z.current="inactive";break}}},[]),kt=l.useCallback(async(we,Ee)=>{const{force:Ke=!1}=Ee??{},dt=pe(De);if(ml.onVoiceChatToggled(we,dt),we==="start"&&Z.current!=="inactive"&&!Ke||(we==="start"&&K.onBeforeStartCall(Us(),B),we==="end"&&(Z.current==="inactive"||Z.current==="ending")&&!Ke))return;Me(),Z.current=we==="start"&&e?"active":"inactive";const Re=await Ns({useMockConnection:!!ube});if(we==="start"){const ft=ze(Re);Re.setOnEvent(ft),Re.setOnOpen(()=>{Z.current==="active"&&dt&&pe(Qa)==="available"?(Re.setOnEvent(ft),ve(Re,dt,m?"human":void 0)):(Z.current="inactive",pe(Qa)==="available"&&y("checking-availability"))}),Us()&&W&&await gt.Animation.initSyncHandler(),await xe(Re,dt)}else Re.setOnEvent(It()),await ie(Re),We.emit("voice:call-ended")},[e,K,ze,W,xe,ve,y,It,ie,m,B]);return l.useEffect(()=>{async function we(){if(!be||!e)return;pe(r0)&&me("unmute"),pe(N4)==="waiting-for-user-interaction"&&((await Ns()).sendAudioEnd(),await kt("start",{force:!0}))}return We.on("challenge:success",we),()=>{We.off("challenge:success",we)}},[e,me,kt,be]),l.useEffect(()=>{const{AudioOut:we}=gt,Ee=()=>{ne(!0),p("responding"),i("responding"),K.onAudioStart()},Ke=()=>{ne(!1),p("listening"),i("listening"),K.onAudioEnd()};return we.addEventListener("audioStart",Ee),we.addEventListener("audioEnd",Ke),()=>{we.removeEventListener("audioStart",Ee),we.removeEventListener("audioEnd",Ke)}},[i,ne,p,K]),{toggleVoiceChat:kt,toggleMute:me,isInputMuted:_e,inputVolume:gt.AudioIn.volume}}const pbe=3,hbe=10,gbe=3,Y8={SUCCESS:"success",FAILED:"failed"};function vbe({toggleVoiceChat:e,enabled:t=!1}){const n=l.useRef(e);n.current=e;const s=l.useRef({hasAudio:!0,hasText:!0,retryCount:0,consecutiveErrors:0,isFirstTurn:!0}),[o,r]=l.useState(!1),a=M(De),i=l.useCallback(g=>{const C=s.current;let v="initialAutoRetry";o?v="userManualRetry":C.isFirstTurn?v="initialAutoRetry":C.consecutiveErrors>0&&(v="backendAutoRecover");const b=JSON.stringify({retryCount:C.retryCount,consecutiveErrors:C.consecutiveErrors});D.trackEvent({name:"system",data:{eventName:"voiceRecoveryEventData",eventInfo_result:g,eventInfo_scenario:v,eventInfo_customData:b,eventInfo_conversationId:a??""}})},[o,a]),u=l.useCallback(async()=>{n.current("end",{force:!0}),await XC(),n.current("start",{force:!0}),s.current.isFirstTurn=!0,s.current.retryCount+=1},[]),d=l.useCallback(()=>{i(Y8.FAILED),n.current("end",{force:!0}),s.current.retryCount=0,s.current.consecutiveErrors=0,r(!0)},[i,r]),m=l.useCallback(()=>{(s.current.retryCount>0||s.current.consecutiveErrors>0||o)&&i(Y8.SUCCESS),s.current.retryCount=0,s.current.consecutiveErrors=0,r(!1)},[r,i,o]),f=l.useCallback(()=>{const g=s.current;if(!o&&g.isFirstTurn&&g.retryCount<hbe){u();return}if(!(!g.isFirstTurn&&!o&&(g.consecutiveErrors+=1,g.consecutiveErrors<gbe))){if(o&&g.retryCount<pbe){u();return}d()}},[o,u,d]);return{voiceRecoveryHandler:l.useCallback(g=>{if(t)switch(g.event){case"startMessage":s.current.hasAudio=!1,s.current.hasText=!1;break;case"appendText":s.current.hasText=!0;break;case"audio":s.current.hasAudio=!0,m();break;case"done":s.current.hasText&&!s.current.hasAudio&&f(),s.current.isFirstTurn=!1;break}},[m,f,t]),isNoAudioErrorVisible:t?o:!1}}function Cbe({isAudioCall:e,onCallTerminated:t,onMute:n,onUnmute:s}){const o=ut(),r=C_(),[a,i]=th(),u=a==="audioCall",[d,m]=l.useState(!1),{noModalToShow:f,shouldShowTryNowModal:p,shouldShowEducationModal:g}=xk(),{state:C,setState:v}=_3({defaultValue:!u}),b=H("voice-no-audio-recovery"),y=se(Qa),E=l.useRef(async()=>{}),{voiceRecoveryHandler:x,isNoAudioErrorVisible:I}=vbe({toggleVoiceChat:E.current,enabled:b}),_=l.useMemo(()=>[x],[x]),{toggleVoiceChat:T,toggleMute:A,inputVolume:k,isInputMuted:R}=fbe({initAudio:C,onCallTerminated:t,eventListeners:_});E.current=T,l.useEffect(()=>{e?!u&&f&&E.current("start"):E.current("end")},[o,e,u,f]);const P=l.useCallback(X=>{T("start",{force:X}),C&&!d&&(m(!0),A("unmute"))},[T,C,d,A]),B=l.useCallback(X=>{i(),v(!0),T("end",{force:X})},[i,v,T]),U=l.useCallback(()=>{v(!0),A(R?"unmute":"mute"),R?s==null||s():n==null||n()},[v,A,R,n,s]);l.useEffect(()=>{e&&u&&C&&P()},[C,e,u,P]),l.useEffect(()=>{I&&y("error")},[I,y]);const $=l.useCallback(async(X=!1)=>{(!e||X)&&await Q()!=="NotSupported"||(await r({talk:!0}),!p&&!g&&P())},[e,r,g,p,P]);l.useEffect(()=>{u&&$(!0)},[u,$]);async function Q(){return(await hJ.run({onAudioCall:async()=>"NotSupported"})).onAudioCall()}const te=l.useCallback(X=>{const{toLocation:ne}=X,q=ne.pathname;e&&!q.endsWith("/talk")&&E.current("end")},[e]);return g3(te),l.useEffect(()=>{const X=()=>{P(!0),We.off("voice:call-ended",X)},ne=q=>{switch(q){case"start":P();break;case"end":B();break;case"restart":{We.on("voice:call-ended",X),B(!0);break}}};return We.on("composer:request-voice",ne),()=>{We.off("composer:request-voice",ne),We.off("voice:call-ended",X)}},[B,P]),{launchAudioCall:$,startAudioCallIfNotStartedAlready:P,endAudioCall:B,toggleAudioInput:U,inputVolume:k,isInputMuted:R,isAudioDeepLink:u,canInitAudio:C}}const hR=crypto.randomUUID();function ybe(e){return e?{"zh-Hans":"zh-CN","zh-Hant":"zh-TW"}[e]??e:"en-US"}function bbe(){return{sdk:"8.0",messaging:{origin:window.location.origin,channelId:hR},selection:{mode:"multiple"},accessibility:{showFocusOnLoad:!1,enableFocusTrap:!0},authentication:{},entry:{oneDrive:{recent:{}}},typesAndSources:{mode:"files",filters:_pe(),pivots:{oneDrive:!0,recent:!0,photos:!1}}}}function xbe(){const e=new URLSearchParams({app:"CMC",scenario:"AnalyzeDoc",filePicker:JSON.stringify(bbe()),locale:ybe(Pt.resolvedLanguage)});return`${gR}/picker?${e}`}const gR="https://onedrive.live.com";async function vR(){const e=await kJ();return(e==null?void 0:e.accessToken)??""}function Sbe(e){return e!==null&&typeof e=="object"&&"type"in e&&e.type==="initialize"&&"channelId"in e&&typeof e.channelId=="string"}function Ebe({port:e,onClose:t,onPick:n,setIsLoading:s,onError:o}){return async r=>{let a;switch(r.data.type){case"notification":r.data.data.notification==="page-loaded"&&s(!1);break;case"command":switch(e.postMessage({type:"acknowledge",id:r.data.id}),r.data.data.command){case"authenticate":a=await vR(),typeof a<"u"?e.postMessage({type:"result",id:r.data.id,data:{result:"token",token:a}}):(e.postMessage({type:"result",id:r.data.id,data:{result:"error",error:{code:"authTokenError",message:"Could not get OneDrive authentication token."}}}),s(!1),o(),t());break;case"close":t();break;case"pick":r.data.data.items!==void 0&&r.data.data.items.length>0&&r.data.data.items[0]!==void 0&&(n(r.data.data.items),e.postMessage({type:"result",id:r.data.id,data:{result:"success"}}),t());break;default:s(!1),e.postMessage({result:"error",error:{code:"unsupportedCommand",message:r.data.data.command},isExpected:!0}),o(),t();break}break}}}function wbe({onClose:e,onPick:t,onError:n}){const s=l.useRef(null),{t:o}=Y(),[r,a]=l.useState(!0);return l.useEffect(()=>{var f;const i=()=>{const p={title:o("composer.errors.attachmentOneDrive.title"),message:o("composer.errors.attachmentOneDrive.message")};n(p),D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:p.message,eventInfo_details:"Error submitting message"}})},u=(f=s.current)==null?void 0:f.contentWindow;let d,m;return u&&(async()=>{const g=u.document.createElement("form");g.method="POST",g.action=xbe(),u.document.body.appendChild(g);const C=u.document.createElement("input");C.type="hidden",C.name="access_token",C.value=await vR(),g.appendChild(C),window.addEventListener("message",v=>{if(v.origin&&v.origin===gR){const b=v.data;if(Sbe(b)&&b.channelId===hR){if([m]=v.ports,!m){a(!1),i(),e();return}d=Ebe({port:m,onClose:e,onPick:t,onError:i,setIsLoading:a}),m.addEventListener("message",d),m.start(),m.postMessage({type:"activate"})}}}),g.submit()})(),()=>{d&&window.removeEventListener("message",d),m&&m.close()}},[e,t,n,o]),c.jsxs(fn,{isOpen:!0,onClose:e,className:"flex h-[90vh] max-h-[680px] w-[90vw] max-w-[1080px]",fullBleed:!0,children:[r&&c.jsxs("div",{className:"flex size-full items-center justify-center","aria-live":"polite",role:"status","aria-label":o("oneDrive.pickerLoading"),children:[c.jsx("span",{className:"sr-only",children:o("oneDrive.pickerLoading")}),c.jsx(it,{className:"size-20"})]}),c.jsx("iframe",{title:o("onedrive.filePicker"),ref:s,hidden:r,width:"100%",height:"100%"})]})}const Ibe=l.lazy(()=>V(()=>import("./wallet-section-BoTMHx3b.js"),__vite__mapDeps([375,1,321,376,325,308,309,343,314,315,316,317,318,307])).then(e=>({default:e.WalletSection}))),CR=64,_be=8,Oke={opacity:0,translateY:CR},Tbe={opacity:1,scale:1,translateY:0};function Abe(){return gh()?{opacity:1,scale:1,translateY:0}:{opacity:0,translateY:CR}}const $a="size-6",kbe=l.lazy(()=>V(()=>import("./upsell-block-D2CVy_eV.js"),__vite__mapDeps([377,1,378]))),Mbe=l.lazy(()=>V(()=>import("./price-tracking-block-hD2btxv3.js").then(e=>e.p),__vite__mapDeps([379,1,326,323,380,329,328])).then(e=>({default:e.PriceTrackingBlock}))),Nbe=l.lazy(()=>V(()=>import("./composer-auto-complete-CHindCg5.js"),__vite__mapDeps([381,1]))),Rbe=l.lazy(()=>V(()=>import("./composer-actions-prompt-suggestions-BKsIw8f5.js"),__vite__mapDeps([382,1,383])).then(e=>({default:e.ComposerActionsPromptSuggestions}))),Pbe=l.lazy(()=>V(()=>import("./composer-file-upload-prompt-suggestions-BR7OAGB2.js"),__vite__mapDeps([384,1,383])).then(e=>({default:e.ComposerFileUploadPromptSuggestions}))),Lbe=l.lazy(()=>V(()=>import("./voice-options-C8MCTAzI.js").then(e=>e.v),__vite__mapDeps([306,1]))),Obe=l.lazy(()=>V(()=>import("./over-task-quota-B2ztPXJR.js"),__vite__mapDeps([385,1,386])).then(e=>({default:e.OverTaskQuota}))),Dbe=l.lazy(()=>V(()=>import("./computer-use-task-closed-C5z4DwVH.js"),__vite__mapDeps([387,1,388,389,390,391,392,393,394,395,396,397,386])).then(e=>({default:e.ComputerUseTaskClosed}))),jbe=l.lazy(()=>V(()=>import("./safety-risk-card-D09yQGoS.js"),__vite__mapDeps([398,1,399,386])).then(e=>({default:e.SafetyRiskCard}))),Fbe=l.lazy(()=>V(()=>import("./add-to-page-CqlfBnUa.js"),__vite__mapDeps([400,1])).then(e=>({default:e.AddToPage}))),Ube=l.lazy(()=>V(()=>import("./cross-selling-strip-consumer-D37H-wD8.js"),__vite__mapDeps([401,1,378]))),Bbe=l.lazy(()=>V(()=>import("./composer-prompt-review-Oxt-D8j5.js"),__vite__mapDeps([402,1,333]))),I0=l.lazy(()=>V(()=>import("./composer-action-xioSqFg2.js"),__vite__mapDeps([386,1]))),Vbe=l.lazy(()=>V(()=>import("./biometric-consent-DDoMo4z5.js"),__vite__mapDeps([403,1])).then(e=>({default:e.BiometricConsent}))),Hbe=l.lazy(()=>V(()=>import("./daily-briefing-chat-DKoBLz5g.js"),__vite__mapDeps([404,1,405,406])).then(e=>({default:e.DailyBriefingChat}))),zbe=l.lazy(()=>V(()=>import("./composer-sign-in-DhH3hb3w.js"),__vite__mapDeps([407,1,408]))),Gbe=l.lazy(()=>V(()=>import("./daily-briefing-composer-player-XOJBDVN8.js"),__vite__mapDeps([409,1,396,392,393,394,406])));function Wbe(e){var fb,pb,hb;const{suppressBottomSection:t,onInputKeydown:n}=e,{t:s}=Y(),{isPortraitEnabled:o}=r3(),r=se(VT),a=se(HT),i=H("image-copy-paste"),u=H("text-paste-modal-file-upload"),d=H("text-paste-file-upload"),m=M(Sa),f=hCe(),p=H("shopping-card"),g=om(),C=H("anonymousattachmentupload"),v=H("onedrive-file-upload"),b=H("ds-editprompt"),y=H("ds-new-progress"),E=!fm(),x=M(Yw),I=H("multi-file-upload"),_=H("dr-nano-single-file-upload"),T=H("attachment-suggestions"),A=_l(),k=xo(),R=C_(),P=ZCe(),B=ut(),U=M(sn),$=Ps(),Q=M(Vo),te=se(Rd),X=bt({breakpoint:"sm"}),ne=Up({breakpoint:"h760"}),q=Up({breakpoint:"h600"}),Z=hX(),J=xC(),W=pX(),[le,_e]=l.useState(null),[Ae,K]=Fe(wa),be=M(jX),Me=M(FX),je=M(FK),oe=M(Sw),ie=M(Jv),ee=M(L2),me=gX(),Pe=UM(),Ve=M(bn),Qe=!!(Ve!=null&&Ve.group),st=M(ofe),ve=H("file-upload-card-v2"),xe=Dd(),Te=!Qe&&ie||me,{startConversationDisabled:Ze}=mm(),Le=M(Wo),[Ye,Ue]=l.useState(!1),[he,ze]=Fe(bo),[It,kt]=Fe(ice),[we,Ee]=Fe(tm),Ke=se(sC),dt=M(sr),Re=(dt==null?void 0:dt.type)==="popup",ft=YCe(),ht=Re||ft,Bn=GN(),Io=(fb=ae.instance().config().composer)==null?void 0:fb.enableAppShadow,_o=(pb=ae.instance().config().uiOverrides)==null?void 0:pb.hideImageDownloadButton,{isPlaying:nc,pause:as,resetAllTimers:Tr}=FN(),sc=ACe(),To=Oce(),Na=qCe(),Ra=an(),qt=l.useRef(null),ln=l.useRef(null),gs=l.useRef(null),oc=l.useRef(null),{isOneDriveFilePickerOpen:Ls,setIsOneDriveFilePickerOpen:rc,pickedOneDriveItems:Ko,setPickedOneDriveItems:Pa,selectOneDriveFile:_t,onPickCallback:Js,onCloseCallback:Rm}=rR(),Pm=H("imagegenv3"),ac=H("logged-out-sharing"),qn=!on("kill-composer-layout-animations"),{isMediaViewerOpen:Zn,closeMediaViewer:Lm,isPictureInPictureSupported:Om,triggerPictureInPicture:Dm,showOneLineComposerWhenMediaViewerOpen:Ar,contentComposerType:$e,contentPageType:G,triggerVideoDownload:Ie}=ka(),{trackConsumptionPageComposerClick:He,trackConsumptionPageComposerSubmit:Lt}=vCe(),{switchMsnConversation:Sn}=JCe(),mt=npe(),Vn=$e===Rp.IMAGE_VIEWER,Xs=$e===Rp.CLOSE_BUTTON,En=B.endsWith("/talk"),pn=B.endsWith("/daily"),un=H("1s-dbchat"),jm=H("discover-composer-off"),Os=hh(),Sy=pn||Os,Ey=xr(),Wl=gk(),La=B.startsWith("/chats")&&!En,$l=B.startsWith("/shares"),EP=G==="weather",wy=M(Qa),{login:wP}=Xi(),ic=he==="dialog",ql=f&&he==="checkout",IP=zCe(),Ao=Co(),[_P,TP]=l.useState(!1),eo=iy(),{isCentralComposerEnabled:kh,isAutoSuggestEnabled:AP,isStarterPromptsEnabled:kP,isWidgetSectionEnabled:MP,isAppearanceOnHomeEnabled:NP}=Ol(),{floatingStyles:RP,edgeTabMenuRefs:Mh,isMultiTabsMenuExpanded:PP,setIsMultiTabsMenuExpanded:Iy,multiTabsMenuMode:LP,setMultiTabsMenuMode:_y,handleMentionEvent:OP,handleMultiTabsMenuSaveBtnEvent:Ty,handleMultiTabsMenuCloseBtnEvent:Ay,handleUserInputEnterEvent:DP,handleUserInputKeydownEvent:ky,isMentionTriggered:My,isFetchingTabsPageContext:Ny}=pCe(),Ry=M(wie),jP=Ao==="coco",Zl=Ao==="computerUse",Kl=kh&&(!he||he==="biometric-consent"),Py=AP&&!he&&!Zl,Ly=W==="autosuggest"&&Py,Oy=l.useId(),FP=M(u3),UP=kP&&(!he||he==="biometric-consent")&&!Zl&&!FP&&(!q||X),BP=Kl&&MP&&!Zl&&(!ne||X),Yl=l.useRef(null),VP=KCe(),HP=!En&&!pn&&!Os&&!Kl&&!ql&&!EP,Dy=(Wl||La||Ey||$l)&&(!he||he==="biometric-consent")&&!(Zn&&!Ar),Nh=ql,Rh=M(wC),jy=M(VK),[Ph,Fy]=Fe(RX),Uy=M(PX);H("multiple-research-tasks-in-conversation");const cc=qee(),Ql=M(Wn),Oa=Ql==="side-by-side"&&(cc==null?void 0:cc.type)==="computerUse"&&La,By=_h(),Fm=Oa&&!y_(cc.status),Jl=Oa&&tte(cc),zP=Oa&&nte(cc),GP=Xa("voice"),WP=!B.endsWith("/agents")&&!pn&&!Ey&&!$l&&!NP&&!Zn&&!A,Um=Uy&&!0&&!y,Vy=Jl||Oa||pn||Um||Zn||!GP||!xe,$P=l.useCallback(()=>{const ce=[];if(ln.current){const Ge=ln.current.getTextAreaRef();Ge.current&&ce.push(Ge)}return ce},[ln]),Hy=!(Zn&&!Ar)&&!En&&(!he||he==="daily-briefing-chat"),Bm=je||!Hy||Fm||Jl||zP||Um,[qP,ZP]=l.useState(!1),Xl=M(NX),kr=M(MX),[ko,zy]=Fe(QI),Lh=Fl(),Gy=()=>{Tu(km)},Wy=()=>{Tu(HM)},$y=()=>{Tu(VM)},Oh=se(xn),eu=he==="prompt-sign-in"||he==="prompt-3p-sign-in"||he==="prompt-location"||he==="prompt-review"||he==="confirm-link-navigation"||he==="cross-promo-card"||he==="shopping-upsell-card"||he==="shopping-price-tracking"||he==="add-to-page"||he==="safety-risk-card"||he==="computer-use-task-closed"||he==="over-task-quota"||he==="daily-briefing-chat"||he==="biometric-consent",qy=!En&&he!=="daily-briefing-player"&&he!=="audioSettings"&&he!=="checkout"&&!eu&&!(Zn&&!Ar),KP=Abe(),YP=l.useCallback(ce=>{Br(ce)},[]),QP=()=>{var Ge;const ce=((Ge=ae.instance().config().composer)==null?void 0:Ge.homeButtonState)??"enabled";return ce!=="enabled"?ce:Wl?"disabled":"enabled"},JP=l.useCallback(()=>{var ce;(ce=ln.current)==null||ce.focus(),qa(!0)},[]),XP=l.useCallback(()=>{gs.current&&(gs.current.value="")},[]),lc=l.useCallback((ce,Ge)=>{K({isOpen:!0,scenario:Ge??null,reason:ce})},[K]),eL=l.useCallback(()=>{lc("fileUpload")},[lc]),{processUploadedFiles:Zy,processUploadedLocalFiles:to,isUploadingAttachments:tL,uploadedAttachments:Mo,resetFileUpload:nL,removeAttachment:Dh}=FCe(JP,Br,XP,eL),sL=M(Eie),no=Mo.filter(({error:ce})=>!ce),Ky=no.length>0||Ry,oL=tL||eo&&Ny,rL=Xp(),Yy=!!(J.trim().length>0||Ky)&&!Bm,Qy=!!((le&&le.length>0)===!0||oL||Te||ee||J.trim().length===0&&Ao==="computerUse")||!xe,aL=H("file-upload-config"),uc=M(Er),Jy=I&&no.length>=uc.maxFilesPerMessage||!xe,[iL,cL]=l.useMemo(()=>{const{reason:ce}=Ae;return ce?[s(`signInPrompt.${ce}Header`,s("signInPrompt.header")),s(`signInPrompt.${ce}Text`,s("signInPrompt.text"))]:[s("signInPrompt.header"),s(ac?"signInPrompt.textV2":"signInPrompt.textV3")]},[ac,Ae,s]),[Xy,lL]=l.useState({onSubmitCallback:null,onCancelCallback:null}),uL=l.useCallback(()=>{var ce;Ty(),(ce=ln.current)==null||ce.focus()},[Ty]),dL=l.useCallback(()=>{var ce;My||(ce=qt.current)==null||ce.focus(),Ay()},[Ay,My]),mL=l.useCallback(async()=>new Promise(ce=>{if(pe(Jw)||no.length===0){ce(!0);return}ze("biometric-consent"),lL({onSubmitCallback:()=>{ze(null),ce(!0)},onCancelCallback:()=>{ze(null),ce(!1)}})}),[no,ze]),fL=l.useCallback(ce=>{var Tt,Mt;if(!(n&&((Tt=ln.current)!=null&&Tt.contains(document.activeElement))&&(n(ce),ce.defaultPrevented)||ky(ce))&&ce.key==="ArrowDown"&&(Mt=ln.current)!=null&&Mt.contains(document.activeElement)&&Yl.current){ce.preventDefault();const Mr=Yl.current.querySelector("button");Mr&&Mr.focus()}},[ky,n]),pL=async()=>{var ce;await Fn.stopMessage(),(ce=ln.current)==null||ce.focus()},Vm=async ce=>{var Ge,Tt;if($l&&await B8(),!Yy||!J&&!Ky||Qy){await Fn.onSubmitMessageBlocked();return}if(!(Pm&&!await mL())){if(y&&Ao==="research"&&Uy){const Mt=pe(De);if(Mt){kf(s("error.researchTaskNotAllowedWhileRunningAnother"),Mt),zt(kn());return}}Gy(),Wy(),mp(),AL?(Tt=ln.current)==null||Tt.focus():(Ge=ln.current)==null||Ge.blur(),await DL(ce??J)}},hL=l.useCallback(async ce=>{await R();const{title:Ge,subtitle:Tt}=u5e(s,ce);Oh({title:Ge,subtitle:Tt,dismissAfter:3e3})},[R,Oh,s]),jh=M(ek),{launchAudioCall:gL,startAudioCallIfNotStartedAlready:vL,endAudioCall:Fh,toggleAudioInput:CL,inputVolume:yL,isInputMuted:bL,isAudioDeepLink:xL,canInitAudio:SL}=Cbe({isAudioCall:En,onCallTerminated:hL,onMute:()=>$t({source:"audioCall",scenario:"mute"})});l.useEffect(()=>{b3e()},[]),l.useEffect(()=>{be&&(ze(Lh?"prompt-3p-sign-in":"prompt-sign-in"),Ae.isOpen&&K({...Ae,isOpen:!1,reason:Ae.reason??(je?"overTurnLimit":null)}),qa(!0))},[ze,K,be,Ae,Lh,je]),l.useEffect(()=>{Me&&("geolocation"in navigator?setTimeout(()=>{ze("prompt-location"),qa(!0),Mn("hasBeenPromptedForLocation","true"),D.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"seen"}})},bB):D.trackEvent({name:"system",data:{eventName:"geolocationUnavailable"}}))},[ze,Me]),l.useEffect(()=>{Sy?ze("daily-briefing-player"):ht?(qa(!0),ze("cross-promo-card")):ze(Jl?"safety-risk-card":Fm?"computer-use-task-closed":null)},[ze,ht,Fm,Jl,Sy]);const eb=H("sticky-conversation-mode"),tb=H("persist-conversation-mode");l.useEffect(()=>{eb&&zt(tb?wt(s1,xl)??kn():jn("sticky-conversation-mode")??kn())},[eb,tb]);const Uh=l.useRef(null),Hm=gCe("app"),EL=wr(ce=>{Hm.current&&(ce.height===0?Hm.current.style.removeProperty("--composer-attachments-height"):Hm.current.style.setProperty("--composer-attachments-height",`${ce.height+_be}px`))}),wL=()=>{is(),kt(void 0)},nb=()=>{Ye&&(vL(),Ue(!1))},is=()=>{if(pn&&he==="daily-briefing-chat"&&(ze("daily-briefing-player"),mp()),he==="prompt-3p-sign-in"&&(Os||pn)&&ze("daily-briefing-player"),!(je||pn||Os||Jl)){if(Fm){ze("computer-use-task-closed");return}if(ic&&(kr!=null&&kr.closeDialogCallback)){kr.closeDialogCallback();return}he==="prompt-review"&&y3e(pe(De),"dismissed"),he==="cross-promo-card"&&Bn(),he==="audioSettings"&&nb(),ze(null),he==="prompt-sign-in"&&Ae.scenario&&K({isOpen:!1,scenario:null})}},Bh=l.useCallback(async()=>{Pe&&$y(),st&&Tu(BM),Fh(),o?(a(!1),r(null),await k({to:"/labs/portrait",from:B})):await R()},[o,r,a,Pe,st,Fh,k,B,R]);l.useEffect(()=>{ae.instance().config().endAudioOnVisibilityHidden&&!jy&&(nc?as==null||as():En&&Bh())},[Bh,En,nc,as,jy]);const sb={title:s("composer.endAudioCall"),icon:c.jsx(nn,{className:$a,"aria-hidden":!0}),isVisible:!0,onClick:Bh},IL=mCe(),ob=ce=>{o&&(We.emit("portrait:change-voice",ce),a(!0)),pn||Os?as==null||as():En&&Fh(),Ue(!0)},zm=se(D1),Gm=(["chat","reasoning","smart","study"].includes(Ao)||Ao==="research"&&_)&&!Oa&&!qP,_L=SC();let wn=M(Ul);Ao==="research"?wn=uc.document.mimeTypes:_L==="video"&&(wn=uc.image.mimeTypes);const TL=Tk(wn);l.useEffect(()=>{for(const[ce,Ge]of Mo.entries())P3(Ge.file,{supportedMimeTypes:wn})||Dh(ce)},[wn,Mo,Dh]);const AL=cy(),Hn=Ih(),tu=Hn&&!En&&!Zn,dc=l.useCallback(()=>{zm(null)},[zm]);l.useEffect(()=>{dc()},[qy,dc]),l.useEffect(()=>{J&&Rh?wu("autosuggest"):Zl&&(!J||Hn)?wu("actions-autosuggest"):T&&!J&&Mo.length>0?wu("file-upload-autosuggest"):wu("starter-prompts")},[Rh,J,Hn,Zl,T,Mo]),ho({onOutsideEvent:()=>{is()},elements:[Uh],includeScroll:!1,invokeOnce:!1,shouldAttachListeners:!ql}),ho({onOutsideEvent:_u,elements:[Uh,Yl],includeScroll:!1,invokeOnce:!1});const Vh=()=>{TP(!0),ze(ce=>ce==="audioSettings"?(nb(),null):(Pe&&$y(),"audioSettings"))},kL={title:s("composer.closeVoiceSettings"),icon:c.jsx(nn,{className:$a,"aria-hidden":!0}),isVisible:!0,onClick:Vh},Wm={title:s("imageCard.composer.closeImageViewer"),icon:c.jsx(nn,{className:$a,"aria-hidden":!0}),isVisible:!0,onClick:Lm},Hh=M(Vl),{shareClickHandler:ML}=ey({messageId:Hh==null?void 0:Hh.messageId,scenario:"shareAsLinkSingleImage",trackShareClick:()=>QA({scenario:"shareAsLinkSingleImage",pageName:"imageDetailPage"})}),rb={title:s("common.share"),icon:c.jsx(bh,{className:$a,"aria-hidden":!0}),isVisible:!0,onClick:ML},ab={title:s("imageCard.composer.downloadImage"),icon:c.jsx(vd,{className:$a,"aria-hidden":!0}),isVisible:!0,onClick:async()=>{if((mt==null?void 0:mt.type)==="image")try{await Pk({url:mt.url,fileName:Sk()})}catch(ce){const Ge=ce instanceof Error?ce.message:"unknown error on downloading image";p5(Ge)}}},ib={title:s("video.downloadVideoViewer"),icon:c.jsx(vd,{className:$a,"aria-hidden":!0}),isVisible:!0,onClick:Ie},NL=ce=>{var Mt;qa(!0),g&&FA("idle");const{relatedTarget:Ge}=ce;((Mt=Yl.current)==null?void 0:Mt.contains(Ge))||setTimeout(()=>_u(),100)},RL=ce=>{Py&&ce!==void 0&&Hk(ce)},PL=async()=>{WP&&(Wl&&Ce({source:"composerInput",scenario:"clickNavigateToChat",pageName:"discover"}),La||await ub()),Zn&&Ar&&He()},LL=(ce,Ge)=>{Wk({prompt:ce,prefix:Ge}),Vm(ce)},cb=l.useCallback(ce=>{Cd({prompt:ce,prefillSource:"promptPassThrough"}),Ee(null),Ke(null)},[Ee,Ke]);l.useEffect(()=>{((we==null?void 0:we.source)==="promptInUrl"||(we==null?void 0:we.source)==="edgeOnAskCopilot")&&cb(we.prompt)},[we,cb]);const zh=l.useCallback((ce,Ge)=>{const{scenario:Tt,reasonIfSignInError:Mt}=Ge;ce.message==="not-signed-in"?lc(Mt,Tt):Br(Nk(ce.message))},[lc]),OL=H("local-agents"),DL=async ce=>{var fc,nu,su,$m;const Ge=B1e(ce),Tt=U1e(ce,Mo),Mt=ce.trim(),Mr=Ao==="research"&&b?{research:{awaitUserConfirmation:!0}}:void 0;if(he!=="daily-briefing-chat"&&(nL(),qa(!0),KI(!1),ze(null)),_u(),OL){if(Mt.startsWith("/agent")){await P();return}if(B.endsWith("/agents"))return}Zn&&Ar?(await Sn(),te(!0),Lt()):he!=="daily-briefing-chat"&&!A&&await R();try{fp(!0);let Nr;sc&&(Nr=sc),To&&(Nr=To),Na&&(Nr=Na),await Fn.submitMessage({text:Mt,filesWithAttachment:Mo,inputMethod:"text",scenario:Ge??void 0,customData:Tt??void 0,reference:Nr,context:Mr})}catch(Nr){if(Nr instanceof Error){let gb={};no.length>0&&(gb={eventInfo_uploadFileSize:((nu=(fc=no[0])==null?void 0:fc.file)==null?void 0:nu.size)??0,eventInfo_uploadFileType:(($m=(su=no[0])==null?void 0:su.file)==null?void 0:$m.type)??"",eventInfo_numDocumentsUploaded:no.length}),D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:Nr.message,eventInfo_details:"Error submitting message",...gb}}),zh(Nr,{reasonIfSignInError:"fileUpload"})}else D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:"Unknown error",eventInfo_details:"Error submitting message"}}),Br({title:s("composer.errors.default.title"),message:s("composer.errors.default.message")})}finally{fp(!1),V1e()}},mc=l.useCallback(ce=>{const Ge=!Ra&&!C;return Ge&&lc("fileUpload",ce),Ge},[Ra,C,lc]),lb=l.useCallback(()=>{var ce;mc()||(ce=gs.current)==null||ce.click()},[mc]),Gh=l.useCallback(ce=>{const Ge=Npe(ce);to({rawFiles:[Ge],scenario:"pasteUploadText",replaceExisting:!I,supportedMimeTypes:wn})},[to,I,wn]),jL=l.useCallback(ce=>{const Ge=ce.clipboardData.getData("text/plain")||"";Ge.length>0&&d&&Ge.length>hS&&(ce.preventDefault(),ce.stopPropagation(),Gh(Ge))},[d,Gh]);l.useEffect(()=>{if(Bm||!i)return()=>{};const ce=async Ge=>{const{file:Tt,error:Mt}=Ape(Ge);(Tt??Mt)&&(Ge.preventDefault(),Mt?zh(Mt,{reasonIfSignInError:"fileUpload"}):Tt&&to({rawFiles:[Tt],scenario:"pasteUpload",replaceExisting:!I,supportedMimeTypes:wn}))};return document.addEventListener("paste",ce),()=>document.removeEventListener("paste",ce)},[to,Bm,i,zh,I,wn]),l.useEffect(()=>{Ph!==null&&(to({rawFiles:[Ph],scenario:"fileUpload",replaceExisting:!I,supportedMimeTypes:wn}),Fy(null))},[Ph,to,Fy,I,wn]),l.useEffect(()=>{Ko&&!Ls&&(Zy({uploads:Ko.map(ce=>({kind:"onedrive",item:ce,file:new File([],ce.name)})),scenario:"fileUpload",replaceExisting:!I,supportedMimeTypes:wn}),Pa(null))},[Ko,Pa,Ls,Zy,I,wn]),l.useEffect(()=>{pn&&Tr()},[pn]);function FL(ce){const Ge=Array.from(ce.target.files??[]),Tt=Ge[0];if(Ge.length===0||!Tt)return;to({rawFiles:I?Ge:[Tt],scenario:"fileUpload",replaceExisting:!I,supportedMimeTypes:wn})}const UL=l.useCallback(ce=>{if(!Gm||!ce.dataTransfer||(ce.preventDefault(),mc()))return;dc();const Ge=ce.dataTransfer.files[0],Tt=Array.from(ce.dataTransfer.files);Ge&&to({rawFiles:I?Tt:[Ge],scenario:"fileUpload",replaceExisting:!I,supportedMimeTypes:wn})},[Gm,mc,dc,to,I,wn]),Wh=kCe(Hy,UL),$h=(no.length>0||Wh)&&!En;async function BL(){$l&&await B8(),$t({source:"audioCallButton",chatMode:Ao}),ml.onUserInteract("audioCallButton"),await gL()}l.useEffect(()=>{const ce=()=>{var Ge;(Ge=ln.current)==null||Ge.focus()};return We.on("composer:focus-input",ce),()=>{We.off("composer:focus-input",ce)}},[]);const ub=Aa(),db=l.useCallback(async()=>{if(mc())return;dc();const{file:ce,error:Ge}=await fJ.run({});ce?to({rawFiles:[ce],scenario:"screenshot",replaceExisting:!I,supportedMimeTypes:wn}):Ge&&Br(Ge)},[dc,mc,to,I,wn]),VL=async()=>{is(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(async ce=>{const{latitude:Ge,longitude:Tt,accuracy:Mt}=ce.coords;D.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"shared",eventInfo_locationAccuracy:Mt}}),await Nn({path:"/user/location",args:{body:{latitude:Ge,longitude:Tt,accuracyInMeters:Mt,provider:Mt<100?"gps":"wifi"}}})},ce=>{D.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"denied",eventInfo_error:{code:ce.code,message:ce.message}}}),Br({title:s("composer.errors.location.title"),message:s("composer.errors.location.message")})},{enableHighAccuracy:!0})},HL=RN({from:"/",scenario:"voice"}),zL=()=>{const ce=c.jsx(Hs,{className:"end-0",data:sb,children:sb.icon});if(he==="dismiss-audio-call-only")return ce;switch(wy){case"requires-account":case"signed-out":return c.jsxs(c.Fragment,{children:[ce,c.jsx(JM,{className:"mx-2",title:s("voice.signUpOrLogin"),onClick:HL})]});case"time-expired-non-pro":case"time-expired-month-non-pro":return c.jsxs(c.Fragment,{children:[ce,IL]});case"time-expired":case"checking-availability":case"start-timeout":case"error":case"not-in-flight":case"throttled":case"throttled-non-pro":case"region-not-available":case"time-expired-month":case"microphone-denied":case"microphone-not-found":return ce;case"waiting-for-user-interaction":case"available":return c.jsx(G2e,{expandedSection:he,settingsIconClassName:$a,dismissCallButton:ce,onAudioSettingsClick:Vh,DismissAudioSettings:kL,audioInputProps:{className:"mx-2",inputVolume:yL,isInputMuted:bL,isOutputPlaying:jh,coachUserUnmute:xL&&!SL&&!_P,onInputClick:CL}});default:return wy}},GL=()=>no.length>0?s("userInput.messageRequiredPlaceholderText"):Wh?Gm?aL?s("userInput.fileUploadLimit",{imageSizeLimit:uc.image.maxBytes/(1024*1024),documentSizeLimit:uc.document.maxBytes/(1024*1024),maxCount:uc.maxFilesPerMessage}):s("userInput.imageDropPreviewPlaceHolderText"):s("userInput.fileDropNotSupportedPlaceHolderText",{chatMode:pd(Ao)}):$l?s("userInput.continueConversationInputPlaceholderText"):x!=null&&x.name&&g?s("userInput.characterPlaceholderText",{character:x.name}):s(Um?"research.placeholder":un&&pn?he==="daily-briefing-chat"?"userInput.dailyChatInputPlaceholderText":"userInput.dailyComposerInputPlaceholderText":eo?"userInput.placeholderTextWithMention":jP?"userInput.cocoPlaceholderText":"userInput.placeholderText"),qh=({enableActionButtons:ce,hasReducedUserInputMaxHeight:Ge})=>{var nu,su;const Tt=!!((nu=ae.instance().config().composer)!=null&&nu.smallAttachmentCard)||ve,Mr=he==="daily-briefing-player"&&un&&pn?"":void 0,fc=Ge??((su=ae.instance().config().composer)==null?void 0:su.reducedUserInputHeight);return c.jsxs(c.Fragment,{children:[c.jsxs(ge.div,{className:de("w-full",{"mt-2 h-auto min-h-32 px-2":$h&&!eo&&!Tt,"mt-2 h-auto min-h-[58px] px-2":$h&&!eo&&Tt,"h-auto":eo,"h-0":!$h&&!eo}),ref:EL,layout:!0,children:[sL&&c.jsx(tye,{onRemove:Dh,attachments:Mo,onVisibilityChange:ZP}),eo&&Ry&&c.jsx(ge.div,{className:"z-10 mt-2 w-full px-2","data-testid":"browser-tabs-preview",children:c.jsx(rbe,{onClick:()=>{_y("update"),Iy(!0)},isLoading:Ny})})]}),c.jsx(dy,{ref:ln,className:de("min-h-0 w-auto grow",Hn&&!pn&&"mt-1"),inputContainerClassName:F({"max-h-[15dvh]":fc,"max-h-user-input-shallow":kh&&!fc,"max-h-user-input":!kh&&!fc}),disabled:Bm,disabledClassName:Mr,inputValue:J,errorMessage:le,onClick:PL,onBlur:NL,onChange:$m=>{$k({text:$m,attachments:no}),Gy(),Wy()},onFocus:RL,onPaste:jL,onEnter:async()=>{DP()||await Vm()},onKeyDown:fL,onMentionIfEnabled:eo?OP:void 0,setInput:R2,setError:_e,placeholder:GL(),characterLimit:oe,rightButtons:ce?[c.jsx(P8,{config:mb()},"composer-action-button")]:void 0,testId:"composer-input","aria-autocomplete":"both","aria-controls":Ly?Oy:void 0})]})},mb=()=>{if(rL){if(Te||Um)return{mode:"stop",onClick:pL};if(Yy)return{mode:"submit",disabled:Qy,onClick:()=>Vm()};if(!m&&!Vy)return{mode:"microphone",onClick:BL}}},WL=({homeButtonState:ce,enableInputActionButtons:Ge})=>{const Tt=Hn?"to-background-400/8 from-background-400/5 dark:from-background-200/65 dark:to-background-200/65":"from-background-400/10 to-white/35 dark:from-background-300/35 dark:to-background-200/65",Mt=eo?()=>{zm(null),_y("add"),Iy(!0)}:void 0;return c.jsx(ge.div,{className:de("relative max-h-full w-expanded-composer max-w-chat bg-gradient-to-b p-1.5",Tt),layout:!0,style:{borderRadius:vf(tu),boxShadow:Le==="dark"?QM:YM},ref:Mh.setReference,children:c.jsxs(ge.div,{className:de(Hn?q5e:$5e),layout:!0,style:{borderRadius:n3e(tu)},children:[c.jsx(ge.div,{className:de(G5e,W5e,Wh?"before:opacity-100 before:delay-100 before:duration-200":"before:opacity-0"),layout:!0,children:qh({enableActionButtons:Ge})}),!Ge&&c.jsxs(ge.div,{className:de("relative bottom-0 flex justify-between pb-0.5",Hn?"pe-2.5 ps-1.5":"px-2"),layout:!0,children:[c.jsxs("div",{className:"flex gap-1",children:[c.jsx(hve,{state:ce}),c.jsxs("div",{className:F("flex gap-2",Hn&&"items-center"),children:[!Hn&&c.jsx(pve,{disableChatModeSwitcher:!Vy}),Hn&&c.jsx(Qye,{onSelectFile:lb,onPasteText:u?Gh:void 0,onSelectOneDriveFile:(U==null?void 0:U.provider)==="microsoft"&&v?_t:void 0,uploadButtonDisabled:Jy,onSelectUserOpenedTabs:Mt,onTakeScreenshot:db,disabled:!xe})]})]}),c.jsxs("div",{className:F("flex gap-2",Hn&&"items-center"),children:[!Hn&&c.jsx(cbe,{startNewChatDisabled:Ze,onStartNewConversation:()=>ub(),onSelectFileIfEnabled:Gm?lb:void 0,uploadButtonDisabled:Jy,onSelectOneDriveFileIfEnabled:(U==null?void 0:U.provider)==="microsoft"&&v?()=>{rc(!0),zm(null)}:void 0,onTakeScreenshot:db,onSelectUserOpenedTabsIfEnabled:Mt,onRef:Mr=>{qt.current=Mr}}),c.jsx(P8,{config:mb()})]})]})]})})},$L=async()=>{Ae.scenario&&($t({source:"signin",scenario:Ae.scenario}),K({isOpen:!1,scenario:null})),Lh?await k({from:"/conversations",to:"/login"}):await wP({provider:"microsoft"})};return!IP||Wl&&jm&&!Zn?null:c.jsxs(c.Fragment,{children:[Nh&&c.jsx("div",{className:de("fixed inset-0 size-full bg-background-850/30 backdrop-blur-[10px] dark:bg-background-150/70",lt.composerDimmedBackground)}),c.jsxs("div",{"data-testid":"composer",ref:Hm,className:de("pointer-events-none absolute bottom-0 flex",Kl&&"sm:bottom-1/2 sm:translate-y-1/2 sm:pt-36",BP&&"sm:pt-80",lt.composer,Ql==="side-by-side"&&La&&$&&!By&&"mb-2",Ql==="side-by-side"&&La&&!By&&"w-1/4 min-w-secondary-panel",Ql==="side-by-side"&&La&&"end-0 pe-1",(Ql==="chat-only"||!La)&&"w-full","max-sm:w-full",Nh&&lt.composerModalOnDimmedBackground),children:[c.jsx("input",{type:"file",accept:TL.join(","),className:"hidden",ref:gs,onChange:FL,"aria-hidden":"true",multiple:I}),c.jsx(pt,{children:HP&&c.jsx(M5e,{dynamicHeight:he===null&&!Wl})}),c.jsx(ge.div,{className:de("relative flex w-full flex-col-reverse items-center px-3 sm:flex-col",Kl?"sm:mb-0":"sm:mb-8",Io?"mb-3":"mb-4",(pn||Os)&&"min-w-72"),initial:E?"enter":!1,animate:"animate",variants:{enter:KP,animate:Tbe},transition:RC,style:uv,children:c.jsxs(W9,{transition:Z?ise:{duration:0},children:[c.jsxs(ge.div,{layoutId:qn?"composer-inner":void 0,className:de("relative max-h-full min-h-composer min-w-16 max-w-chat rounded-5xl",eo&&"z-40"),children:[g&&qy&&c.jsx(P5e,{}),c.jsx(ge.div,{layoutId:qn?"composer-container":void 0,className:"absolute inset-0",layout:!0,style:{borderRadius:vf(tu),boxShadow:XCe(Le,Hn)}}),c.jsx(pt,{children:jh&&c.jsx(N8,{})}),c.jsx(ge.div,{layoutId:qn?"composer-background":void 0,className:de("relative",Eee),layout:!0,style:{borderRadius:vf(tu),boxShadow:e3e(Le,Hn)},children:c.jsxs(ge.div,{layoutId:qn?"composer-content":void 0,className:de("pointer-events-auto relative flex flex-col overflow-hidden contrast-more:border-2",ic&&"max-w-72",Nh&&Kr),"data-testid":"composer-content",ref:Uh,layout:!0,style:{borderRadius:vf(tu),boxShadow:t3e(Le)},children:[c.jsx(pt,{children:jh&&c.jsx(N8,{isNested:!0})}),c.jsxs(pt,{children:[he&&he!=="daily-briefing-player"&&he!=="dismiss-audio-call-only"&&c.jsxs(ge.div,{layoutId:qn?"composer-expanded-section-container":void 0,className:de(!ic&&!eu&&"border-b border-black/10 dark:border-white/10",he==="audioSettings"&&"w-settings",eu&&he!=="daily-briefing-chat"&&"w-prompt-sign-in",eu&&(he==="computer-use-task-closed"||he==="safety-risk-card")&&"max-w-single-image",he==="daily-briefing-chat"&&(Q?"min-w-secondary-panel bp-960:max-w-full lg:w-expanded-composer":"w-expanded-composer")),layout:!0,children:[he!=="dialog"&&c.jsxs(ge.div,{"data-testid":"audio-settings-dialog",className:de("t-custom-scrollbar max-h-expanded-section overflow-auto",he==="audioSettings"&&"px-2 py-4"),layout:!0,initial:Be,animate:{...tt,transition:{delay:ns.default}},ref:oc,children:[c.jsx(pt,{children:eu&&c.jsxs(Of,{children:[he==="biometric-consent"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{"aria-hidden":!0}),children:c.jsx(Vbe,{onSubmit:Xy.onSubmitCallback,onCancel:Xy.onCancelCallback})}),he==="prompt-sign-in"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(I0,{header:iL,text:cL,primaryAction:{title:s("common.loginText"),onClick:$L},testid:"prompt-sign-in-composer-action",secondaryAction:je?void 0:{onClick:is,title:s("common.maybeLater"),testid:"maybe-later-button"},onClose:is})}),he==="prompt-3p-sign-in"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(zbe,{dismiss:is})}),he==="daily-briefing-chat"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(Hbe,{dismiss:is,inputUI:qh({enableActionButtons:!0,hasReducedUserInputMaxHeight:!0})})}),he==="prompt-location"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(I0,{header:s("locationPermission.header"),text:s("locationPermission.text"),primaryAction:{title:s("locationPermission.share"),onClick:VL},secondaryAction:{onClick:is,title:s("common.maybeLater")},onClose:is})}),he==="confirm-link-navigation"&&(ko==null?void 0:ko.url)&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(I0,{showImage:!1,header:s("composer.linkConfirmation.header"),text:s("composer.linkConfirmation.text",{url:ko.url}),primaryAction:{title:s("common.continue"),onClick:()=>{if(ko.url){$t({source:"linkNavigationConfirmButton",conversationId:ko.conversationId,messageId:ko.messageId,destination:co(ko.url)});try{VP(Jr(co(ko.url)))}catch{Oh({intent:"error",title:s("composer.link.openFailed.title"),subtitle:s("composer.link.openFailed.message",{link:ko.url}),dismissAfter:3e3})}is(),zy(void 0)}}},secondaryAction:{onClick:()=>{is(),zy(void 0)},title:s("common.cancel")},onClose:is,restoreFocusOnUnmount:!0})}),he==="prompt-review"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(Bbe,{})}),he==="cross-promo-card"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(Ube,{variant:"aggressive"})}),p&&he==="shopping-upsell-card"&&c.jsx(l.Suspense,{fallback:c.jsx(z8,{}),children:c.jsx(kbe,{onDismiss:()=>ze(null)})}),he==="shopping-price-tracking"&&It&&c.jsx(l.Suspense,{fallback:c.jsx(z8,{}),children:c.jsx(Mbe,{content:It.data,messageId:It.messageId,cardType:It.cardType,onConfirm:()=>ze("shopping-upsell-card"),onCancel:wL})}),he==="add-to-page"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(Fbe,{onClose:is})}),he==="safety-risk-card"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(jbe,{})}),he==="computer-use-task-closed"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(Dbe,{})}),he==="over-task-quota"&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(Obe,{})})]})}),he==="audioSettings"&&c.jsx(Of,{children:c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})}),children:c.jsx(Lbe,{onVoiceSelected:ob,onVoiceSpeedChange:()=>ob(),onAppearanceEnabled:Vh})})}),ql&&c.jsx(Of,{children:c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex max-h-expanded-section w-prompt-sign-in flex-col overflow-auto rounded-t-5xl p-5 sm:w-checkout-composer",children:c.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:c.jsx(it,{className:"size-12"})})}),children:c.jsx(Ibe,{onDismiss:is})})})]}),ic&&Xl&&kr&&c.jsx(K5e,{titleKey:Xl.titleKey,textKey:Xl.textKey,buttonTextKey:Xl.buttonTextKey,onClick:Xl.onClick,button:kr.button,cancelButton:kr.cancelButton,closeDialogCallback:kr.closeDialogCallback})]}),(pn&&he!=="daily-briefing-chat"||Os)&&c.jsx(l.Suspense,{fallback:c.jsx("div",{className:F("flex h-composer items-center justify-center",pn?"w-daily-briefing-lg":"w-daily-briefing"),children:c.jsx(it,{className:"size-12"})}),children:c.jsx(Gbe,{isPodcast:Os,inputUI:un&&!Os?qh({enableActionButtons:!1}):void 0})}),En&&(!he||he==="audioSettings"||he==="dismiss-audio-call-only")&&c.jsx("div",{className:"flex justify-center p-2",children:zL()}),Dy&&WL({homeButtonState:Oa||Hn?"hidden":QP(),enableInputActionButtons:Zn&&Ar||Hn&&Oa}),Zn&&Xs&&!ql&&c.jsxs(ge.div,{className:de("relative flex max-h-full max-w-chat justify-center",!he&&"p-2",!ic&&"h-composer"),layout:!0,children:[c.jsx(Hs,{data:Wm,children:Wm.icon}),Om&&c.jsx(dCe,{onClick:Dm}),Ie&&c.jsx(Hs,{data:ib,children:ib.icon})]}),Zn&&Vn&&c.jsxs(ge.div,{className:de("relative flex max-h-full max-w-chat justify-center",!he&&"p-2",!ic&&"h-composer"),layout:!0,children:[c.jsx(Hs,{data:Wm,children:Wm.icon}),(mt==null?void 0:mt.type)==="image"&&mt.shareable&&c.jsx(Hs,{data:rb,children:rb.icon}),(mt==null?void 0:mt.type)==="image"&&mt.downloadable&&!_o&&c.jsx(Hs,{data:ab,children:ab.icon})]}),Ls&&c.jsx(wbe,{onPick:Js,onClose:Rm,onError:YP})]})]})})]}),Kl&&!t&&c.jsxs(rn,{id:W,className:de("flex h-[150px] w-full max-w-chat flex-none items-end px-2 sm:flex-initial sm:items-start",lt.composerBottomSlot),delay:.2,initial:E?"initial":!1,children:[Ly&&c.jsx(l.Suspense,{fallback:null,children:c.jsx(Nbe,{id:Oy,dataResponse:Rh,onClick:(ce,Ge)=>LL(ce,Ge),onHighlight:ce=>R2(ce),onDismiss:_u,className:"pointer-events-auto mb-3 sm:mb-0 sm:mt-3",ref:Yl,query:J})}),W==="actions-autosuggest"&&c.jsx(l.Suspense,{fallback:null,children:c.jsx(Rbe,{className:"pointer-events-auto mb-3 sm:mb-0 sm:mt-3",onClick:ce=>Cd({prompt:ce,prefillSource:"action"})})}),W==="file-upload-autosuggest"&&c.jsx(l.Suspense,{fallback:null,children:c.jsx(Pbe,{className:"pointer-events-auto mb-3 sm:mb-0 sm:mt-3",isMultiple:Mo.length>1,variant:((hb=Mo[0])==null?void 0:hb.type)??"file",onClick:ce=>{Vm(ce)}})}),W==="starter-prompts"&&UP&&c.jsx(gye,{className:"pointer-events-auto sm:mt-8",onWidgetClick:F3})]}),eo&&PP&&Dy&&c.jsx(uCe,{onSave:uL,styles:RP,onRef:Mh.setFloating,onClose:dL,outsideClickElements:$P(),mode:LP,originElement:Mh.reference})]})})]})]})}function $be(){const e=on("kill-cookie-banner"),t=M(Rn),[n,s]=Fe(rC),[o,r]=l.useState("main"),a=Ni(),[i,u]=l.useState(()=>a.analytics),[d,m]=l.useState(a.advertising),[f,p]=l.useState(a.socialMedia),g=nh(t),C=!!ov(),[v,b]=Fe(LA),y=!e&&(!!v||g&&!C&&!n);if(l.useEffect(()=>{y&&D.trackEvent({name:"system",data:{eventName:"cookieBannerShown",eventInfo_region:t}})},[t,y]),!y)return null;const E=I=>{D.trackEvent({name:"interaction",data:{eventName:"cookieBannerChoice",eventInfo_analytics:I.analytics,eventInfo_advertising:I.advertising,eventInfo_socialMedia:I.socialMedia}}),MU(I),r("main"),b(void 0),s(!0)},x=v==="more-options";return c.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[c.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-background-150 opacity-90 dark:bg-background-150"}),c.jsx("div",{className:de("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",Ys,lt.modal),children:c.jsxs("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:[v!=="more-options"&&o==="main"&&c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("h3",{className:"text-lg",children:z("cookies.heading")}),c.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-xs sm:flex-row",children:[c.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-xs sm:flex-row",children:[c.jsx("p",{children:z("cookies.bannerIntro")}),c.jsxs("p",{children:[z("cookies.bannerExplanation"),c.jsx(ls,{href:es,title:z("cookies.privacyLink"),className:"ps-1 underline",children:z("cookies.privacyLink")})]})]}),c.jsxs("div",{className:"flex min-w-44 shrink-0 grow flex-col gap-2",children:[c.jsx(re,{variant:"rect",size:"32-xs",onClick:()=>E({analytics:!0,advertising:!0,socialMedia:!0}),title:z("cookies.accept"),testId:"cookie-banner-accept-button",children:z("cookies.accept")}),c.jsx(re,{variant:"rect",size:"32-xs",onClick:()=>E({analytics:!1,advertising:!1,socialMedia:!1}),title:z("cookies.reject"),testId:"cookie-banner-reject-button",children:z("cookies.reject")}),c.jsx(re,{variant:"rect",color:"subtle-dimmed",size:"32-xs",onClick:()=>{r("more-options")},title:z("cookies.moreOptions"),testId:"cookie-banner-options-button",children:z("cookies.moreOptions")})]})]})]}),(v==="more-options"||o==="more-options")&&c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("div",{className:"flex items-center",children:[!x&&c.jsx(re,{title:z("common.backText"),variant:"circle",color:"subtle-dimmed",size:"32-xs",onClick:()=>r("main"),children:c.jsx(ds,{className:"rotate-180"})}),c.jsx("h3",{className:de({"ps-3":!x},"text-lg"),children:z("cookies.moreOptionsHeading")})]}),c.jsx("p",{className:"py-3 text-xs",children:z("cookies.essentialCookiesExplanation")}),c.jsx(_0,{label:z("cookies.advertisingLabel"),explanation:z("cookies.advertisingDescription"),isChecked:d,onChange:()=>m(I=>!I),testId:"cookie-banner-advertising-option"}),c.jsx(_0,{label:z("cookies.analyticsLabel"),explanation:z("cookies.analyticsDescription"),isChecked:i,onChange:()=>u(I=>!I),testId:"cookie-banner-analytics-option"}),c.jsx(_0,{label:z("cookies.socialMediaLabel"),explanation:z("cookies.socialMediaDescription"),isChecked:f,onChange:()=>p(I=>!I),testId:"cookie-banner-social-option"}),c.jsx("div",{className:"flex justify-end",children:c.jsx(re,{variant:"rect",size:"36-sm",className:"w-fit px-7",onClick:()=>{E({analytics:i,advertising:d,socialMedia:f})},title:z("cookies.savePreferences"),testId:"cookie-banner-save",children:z("cookies.savePreferences")})})]})]})})]})}function _0(e){const{label:t,explanation:n,isChecked:s,onChange:o,testId:r}=e;return c.jsxs(c.Fragment,{children:[c.jsx(ms,{horizontalMargin:!1}),c.jsx(XN,{label:t,className:"w-full py-2 pe-1",isChecked:s,onChange:o,testId:r}),c.jsx("p",{className:"pb-4 pt-1 text-xs",children:n})]})}function qbe(){const[e,t]=l.useState(!0),n=M(sr),s=GN(),o=l.useMemo(()=>n==null?void 0:n.images,[n]),r=l.useMemo(()=>({title:n==null?void 0:n.title,subTitle:n==null?void 0:n.subTitle}),[n]),i=M(Wo)==="dark"?o==null?void 0:o.dark:o==null?void 0:o.light,u=r;l.useEffect(()=>{Oc({name:"interaction",status:"Shown",eventName:"crossPromotionStripCard",source:"bottomRightCard"})},[]);const d=()=>{t(!1),s()};return n===null||!e?null:c.jsx(rn,{mode:"sync",className:"fixed bottom-5 end-5 z-[1000]",children:c.jsxs("div",{className:de("flex h-32 w-96 flex-col justify-center rounded-5xl border border-white bg-background-100 p-3 dark:border-white/5 dark:bg-background-250"),children:[c.jsxs("div",{className:"flex items-center",children:[i&&c.jsx("img",{src:i,alt:z("crossSelling.imageAlt"),className:"size-24 rounded-lg object-cover"}),c.jsxs("div",{className:"me-6 ms-3",children:[c.jsx("div",{className:"mb-1 text-sm",children:c.jsx("strong",{children:u.title})}),c.jsx("div",{className:"text-sm",children:u.subTitle})]})]}),c.jsx("div",{className:"absolute end-1.5 top-1.5 flex self-start",children:c.jsx(re,{title:z("common.closeText"),variant:"square",color:"subtle-dimmed","aria-label":z("common.closeText"),onClick:d,className:"flex size-8 items-center justify-center p-1.5",children:c.jsx(nn,{className:"m-0 size-5 self-center p-0"})})})]})})}function Q8({icon:e,text:t,buttonText:n,buttonColor:s,buttonOnClick:o,className:r=""}){return c.jsxs("div",{className:de("flex items-center justify-between",r),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex size-10 items-center justify-center rounded-[8.5px] border border-black/10 bg-background-200 dark:border-white/10",children:c.jsx("div",{className:"m-1 size-6",children:e})}),c.jsx("p",{className:"text-base",children:t})]}),c.jsx(re,{className:"h-10 w-24",color:s,title:n,"aria-label":n,variant:"rect",onClick:o,children:n})]})}const Zbe="https://ercz.adj.st/home?network=1g17o7tz&campaign=1gl0zo0u&adj_t=1gl0zo0u&adj_deep_link=sapphirecopilot%3A%2F%2Fhome%3Fnetwork%3D1g17o7tz%26campaign%3D1gl0zo0u&adj_redirect_android=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.microsoft.copilot&adj_redirect_ios=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fmicrosoft-copilot%2Fid6472538445%3Fct%3DCMC_Copilot_ContinueChatting%26pt%3D80423";function Kbe(){const e=cy(),t=zd(),n=iK(),s=cK(),o=l.useRef(null),[r,a]=l.useState(!1),i=M($d),u=M(Ri),d=M(xw),m=H("cross-selling-title-dn"),f=H("cross-selling-title-tn"),p=H("cross-selling-description-f-dc"),g=H("cross-selling-description-s-w"),C=H("cross-selling-triggerlogic-delay"),v=H("cross-selling-no-browser"),b=()=>m?z("crossSelling.headerDownloadNow"):f?z("crossSelling.headerTryNow"):z("crossSelling.header"),y=()=>p?z("crossSelling.buttonDownloadCopilot"):z("common.open"),E=()=>g?z("crossSelling.browserWeb"):z("crossSelling.browser"),x=()=>{a(!0),Oc({name:"system",status:"Shown",eventName:"copilotMobileCrossSelling"})};l.useEffect(()=>{if(!i||u||e||n||s||!t){a(!1);return}if(!d){a(!1);return}const T=tn(s4),A=tn(ig),k=!wp(T,3*sp),R=qC(A,3);k||R?C?setTimeout(()=>{x()},5e3):x():Oc({name:"system",status:"TriggeredButSnoozed",eventName:"copilotMobileCrossSelling"})},[u,e,n,s,i,d,t,C,v]);const I=()=>{Mn(s4,Date.now().toString());const T=tn(ig);Mn(ig,`${parseInt(T??"0",10)+1}`),a(!1),Oc({name:"interaction",status:"Dismissed",eventName:"copilotMobileCrossSelling"})},_=()=>{Eo(Zbe),a(!1),Oc({name:"interaction",status:"Clicked",eventName:"copilotMobileCrossSelling"})};return r?c.jsx(rn,{mode:"sync",className:de("relative",lt.modal),children:c.jsx("div",{className:"fixed inset-0 grid bg-background-850/30 dark:bg-background-150/70",onClick:v?I:void 0,role:v?"button":void 0,"aria-label":v?z("common.close"):void 0,children:c.jsx("div",{ref:o,className:"mb-0 h-fit w-full self-end justify-self-center rounded-t-3xl border border-white/10 bg-background-200 p-2 contrast-more:border-2 md:mb-5 md:w-fit md:rounded-3xl",onClick:v?T=>T.stopPropagation():void 0,role:"dialog",children:c.jsxs("div",{className:"mx-3 mb-6 mt-3 flex flex-col gap-4",children:[c.jsx("div",{className:"text-lg md:text-center",children:b()}),c.jsx(Q8,{icon:c.jsx(Sm,{}),text:z("crossSelling.copilotApp"),buttonText:y(),buttonColor:"strong",buttonOnClick:_,className:"gap-14"}),!v&&c.jsx(Q8,{icon:c.jsx(Em,{}),text:E(),buttonText:z("common.continue"),buttonColor:"subtle-bright",buttonOnClick:I,className:"gap-14"})]})})})}):null}function Ybe(){const{alreadyShown:e,dismissCoachmark:t}=Zo(P2e),[n,s]=l.useState(!1),o=l.useCallback(()=>{s(!1),t()},[t]);return l.useEffect(()=>{if(!e){const r=()=>{s(!0)};return We.on("edge:inline-browsing-replace-visible-conversation",r),()=>{We.off("edge:inline-browsing-replace-visible-conversation",r)}}},[e]),{showInlineBrowsingPreviousConversationsCoachmark:n,dismissInlineBrowsingPreviousConversationsCoachmark:o}}function Qbe(e){const{renderTrigger:t}=e,{t:n}=Y(),{isOpen:s,title:o,description:r,dismiss:a}=Jbe(),i=u=>{u.stopPropagation(),a()};return c.jsx(Mm,{className:"max-w-48 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:s,placement:"bottom",withArrow:!0,offset:8,renderReferenceElement:u=>c.jsx("div",{ref:u.ref,className:"relative",children:t({onClick:()=>{a()}})}),portalId:"composer-container",onInsideEvent:()=>{a()},children:c.jsxs("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-2xs-strong",children:o}),c.jsx("button",{onClick:i,type:"button","aria-label":n("common.dismiss"),children:c.jsx(nn,{className:"size-4"})})]}),c.jsx("div",{className:"text-2xs",children:r})]})})}function Jbe(){const{t:e}=Y(),{showInlineBrowsingPreviousConversationsCoachmark:t,dismissInlineBrowsingPreviousConversationsCoachmark:n}=Ybe();return t?{isOpen:!0,title:e("composer.chatModes.inline.myConversations.coachmarkTitle"),description:e("composer.chatModes.inline.myConversations.description"),dismiss:n}:{isOpen:!1,title:"",description:"",dismiss:()=>{}}}function Xbe(e){const{className:t}=e,{t:n}=Y(),[s,o]=l.useState(!1),r=M(ok),a=se(Vo),i=l.useRef(null),u=l.useCallback(m=>{i.current=m},[]),d=l.useCallback(m=>{m.key==="Escape"&&(m.preventDefault(),m.stopPropagation(),o(!1))},[]);return c.jsx(bm,{isOpen:s,onIsOpenChange:o,renderTrigger:m=>c.jsx(Qbe,{renderTrigger:f=>c.jsx(re,{ref:p=>{m.ref(p),u(p)},onClick:p=>{m.onClick(p),f.onClick(p)},color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",title:n("edgeHeader.dropdownMenuButtonTitle"),className:"ms-auto",testId:"header-dropdown","aria-haspopup":"menu","aria-expanded":s,children:c.jsx(Sh,{className:"size-5"})})}),options:{overrideZIndex:lt.header,placement:"bottom-end",offset:{mainAxis:4,crossAxis:0},hideOnMenuClick:!0,returnFocus:!1},className:F(Ys,"flex p-1",t),children:c.jsxs(_r,{axis:"vertical",className:"flex flex-col items-start gap-1",role:"menu",circular:!0,onKeyDown:d,children:[!r&&c.jsx(re,{variant:"rect",color:"subtle-dimmed-inverted",className:"w-full justify-start text-sm",onClick:()=>{a(!0),Ce({source:"sidebarHeader"})},title:n("edgeHeader.conversationHistory"),testId:"header-conversation-history-button",role:"menuitem",children:n("edgeHeader.conversationHistory")}),c.jsx(re,{variant:"rect",color:"subtle-dimmed-inverted",className:"w-full justify-start text-sm",onClick:m=>{m.stopPropagation(),a(!1),iA("menu",{onPopPageCallback:()=>{var f;(f=i.current)==null||f.focus()}}),o(!1)},title:n("settings.settings"),testId:"header-settings-button",role:"menuitem",children:n("settings.settings")}),c.jsx(re,{variant:"rect",color:"subtle-dimmed-inverted",className:"w-full justify-start text-sm",onClick:()=>{We.emit("edge:header-command","sendFeedback")},title:n("settings.feedbackButton"),testId:"header-feedback-button",role:"menuitem",children:n("settings.feedbackButton")})]})})}const yR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M3.28035 2.21967C2.98746 1.92678 2.51258 1.92677 2.21968 2.21966C1.92678 2.51255 1.92677 2.98742 2.21967 3.28032L8.12461 9.18526L4.81064 10.3301C3.93794 10.6315 3.68202 11.7426 4.3349 12.3954L7.43942 15.4999L3.00009 19.9392L3.00001 20.9999H4.06077L8.50009 16.5605L11.6046 19.665C12.2575 20.3179 13.3686 20.062 13.67 19.1893L14.8148 15.8755L20.7196 21.7803C21.0125 22.0732 21.4874 22.0732 21.7803 21.7803C22.0732 21.4874 22.0732 21.0126 21.7803 20.7197L3.28035 2.21967ZM13.6353 14.696L12.3827 18.3218L5.67816 11.6174L9.30412 10.3648L13.6353 14.696ZM19.6829 10.8201L15.8957 12.7137L17.0137 13.8317L20.3537 12.1617C22.0326 11.3223 22.3957 9.08476 21.0684 7.75751L16.2426 2.93179C14.9153 1.60453 12.6778 1.96763 11.8383 3.6465L10.1684 6.98637L11.2864 8.10441L13.18 4.31731C13.5616 3.55419 14.5786 3.38914 15.1819 3.99244L20.0078 8.81817C20.6111 9.42146 20.446 10.4385 19.6829 10.8201Z"})),Dke=Object.freeze(Object.defineProperty({__proto__:null,default:yR},Symbol.toStringTag,{value:"Module"})),bR=e=>l.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M16.2425 2.93189L21.0682 7.75765C22.3955 9.08491 22.0324 11.3224 20.3535 12.1619L15.4826 14.5973C15.3073 14.685 15.1732 14.8379 15.1092 15.0232L13.6699 19.1895C13.3684 20.0622 12.2574 20.3181 11.6045 19.6653L8.50002 16.5607L4.06074 21.0001H3L3.00008 19.9394L7.43936 15.5001L4.33487 12.3956C3.682 11.7427 3.93791 10.6317 4.81061 10.3302L8.97688 8.89096C9.16223 8.82694 9.31512 8.69287 9.40281 8.51748L11.8382 3.6466C12.6777 1.96772 14.9152 1.60462 16.2425 2.93189ZM20.0076 8.81831L15.1818 3.99255C14.5785 3.38924 13.5614 3.55429 13.1799 4.31742L10.7445 9.18829C10.4814 9.71446 10.0227 10.1167 9.46666 10.3087L5.67812 11.6175L12.3826 18.322L13.6914 14.5335C13.8835 13.9774 14.2857 13.5188 14.8118 13.2557L19.6827 10.8202C20.4458 10.4387 20.6109 9.42161 20.0076 8.81831Z"})),jke=Object.freeze(Object.defineProperty({__proto__:null,default:bR},Symbol.toStringTag,{value:"Module"}));function e4e(e){const{isPinned:t,showCloseButton:n,showPinButton:s,className:o}=e,{t:r}=Y(),a=wr(()=>{const i=document.getElementById("app");if(i&&a.current){const u=a.current.clientWidth;i.style.setProperty("--header-controls-inline-end-width",`${u}px`)}});return c.jsxs("div",{className:F("flex items-center",o),"data-testid":"header-controls",ref:a,children:[c.jsx(Xbe,{}),s&&c.jsx(re,{variant:"square",color:"subtle-dimmed-inverted",size:"28-xxs",onClick:()=>{We.emit("edge:header-command","togglePinState")},title:r(t?"edgeHeader.unpinButtonTitle":"edgeHeader.pinButtonTitle"),testId:"header-pin-button",children:t?c.jsx(yR,{className:"size-5"}):c.jsx(bR,{className:"size-5"})}),n&&c.jsx(re,{variant:"square",color:"subtle-dimmed-inverted",size:"28-xxs",onClick:()=>{We.emit("edge:header-command","closePane")},title:r(t?"edgeHeader.closeButtonAsPinnedTitle":"edgeHeader.closeButtonAsUnpinnedTitle"),testId:"header-close-button",children:c.jsx(nn,{className:"size-5"})})]})}function t4e({pixelUrl:e,onComplete:t}){return l.useEffect(()=>{const n=setTimeout(()=>{t()},3e3);return()=>{clearTimeout(n)}},[e,t]),c.jsx("img",{className:"hidden",src:e,width:"1",height:"1",alt:"",referrerPolicy:"no-referrer-when-downgrade",onLoad:t,onError:t})}function n4e(){const e=H("ads-pixels"),[t,n]=Fe(Iw),s=M(rC),o=M(Rn),r=(o&&l1.includes(o))===!0,a=l.useMemo(()=>Ni(),[s]),i=!r||a.advertising;if(!e||!i)return null;const u=Object.values(t).filter(d=>d.isMounted).map(d=>d.url);return c.jsx("div",{className:"absolute start-[-9999px] top-[-9999px] size-px overflow-hidden",children:u.map(d=>c.jsx(t4e,{pixelUrl:d,onComplete:()=>n(m=>m[d]?{...m,[d]:{...m[d],isMounted:!1}}:m)},d))})}function s4e(e){const{label:t,selected:n,onClick:s}=e;return c.jsx(re,{className:F("flex w-48 justify-start",{"bg-black/5 dark:dark:bg-background-150":n}),title:t,color:"subtle-dimmed",size:"36-sm",onClick:s,children:c.jsx("span",{className:"w-full truncate text-start",children:t})})}function xR(){const e=H("copilot-beta"),t=M(v1),n=k3(),{t:s}=Y(),o=an();return[{label:s("settings.preferences.title"),page:"preferences"},{label:s("settings.accountTitle"),page:"account"},{label:s("settings.connectedAppsTitle"),page:"connector-list",needSignIn:!0},{label:s("settings.shoppingTitle"),page:"shopping",needSignIn:!0},{label:s("subscriptionManage.title"),page:"manage-subscription",needSignIn:!0},{label:s("settings.privacyLink"),page:"privacy",needSignIn:!0},{label:s("settings.titleAbout"),page:"about"},{label:s("settings.copilotBeta.title"),page:"copilot-beta"}].filter(a=>{switch(a.page){case"copilot-beta":return e&&t&&n;default:return!a.needSignIn||o}})}function o4e(){const{currentPage:e,pushPage:t,parentPageOf:n}=Sr(),s=xR();return c.jsx("div",{className:"flex flex-col gap-0.5",children:s.map(o=>c.jsx(s4e,{label:o.label,selected:e===o.page||e!==void 0&&n[e]===o.page,onClick:()=>{t(o.page)}},o.label))})}function r4e(){var o;const{currentPage:e}=Sr(),s=(((o=xR().find(r=>r.page===e))==null?void 0:o.label)??"").trim();return s?c.jsxs("div",{className:"sticky top-0 z-10 bg-white py-3 dark:bg-background-150",children:[c.jsx("h3",{className:"flex w-full items-center justify-start p-2 pb-4 text-base-medium",children:s}),c.jsx(ms,{verticalMargin:!1})]}):null}const SR=l.createContext(null);function a4e(e){const{value:t,children:n}=e;return c.jsx(SR.Provider,{value:t,children:n})}function Fke(){const e=l.useContext(SR);return e||null}const i4e=l.lazy(()=>V(()=>import("./actions-chat-detail-GgERrXLw.js"),__vite__mapDeps([410,1,411,412,413,356,399])).then(e=>({default:e.ActionsChatDetail}))),c4e=l.lazy(()=>V(()=>import("./showroom-chat-detail-CBeHXotG.js"),__vite__mapDeps([414,1])).then(e=>({default:e.ShowroomChatDetail})));function l4e(){const e=M(As);return c.jsx("div",{className:"flex size-full items-center justify-center",children:e?c.jsx(l.Suspense,{fallback:c.jsx(P5,{}),children:c.jsx(c4e,{})}):c.jsx(l.Suspense,{fallback:c.jsx(P5,{}),children:c.jsx(i4e,{})})})}function P5(){return c.jsx("div",{className:"flex size-full items-center justify-center",children:c.jsx(it,{className:"size-12"})})}const u4e=l.lazy(()=>V(()=>import("./settings-BdpiAmkt.js").then(e=>e.s),__vite__mapDeps([305,1,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344])));function d4e(){const e=l.useRef(null);return c.jsx(a4e,{value:e,children:c.jsx("div",{className:"flex h-full min-h-0",ref:e,children:c.jsxs("div",{className:"flex flex-1 gap-3",children:[c.jsx(o4e,{}),c.jsx("div",{className:F("relative flex min-h-0 min-w-0 flex-1 rounded-3xl bg-white will-change-auto dark:bg-background-150","after:pointer-events-none after:absolute after:inset-0 after:z-10 after:rounded-3xl after:border after:border-black/10 dark:border-transparent"),children:c.jsxs("div",{className:"t-custom-scrollbar flex flex-1 flex-col overflow-y-auto rounded-3xl px-3 pb-3",children:[c.jsx(r4e,{}),c.jsx(l.Suspense,{fallback:c.jsx(P5,{}),children:c.jsx(u4e,{shouldShowHeaderOverride:!1,isNarrowScreen:!1})})]})})]})})})}function m4e(){const e=hy(),{currentPage:t,closeSettings:n}=Sr(),{t:s}=Y();return e?c.jsx(fn,{isOpen:!!t&&t!=="menu",className:"size-full h-conversation-modal p-3 dark:bg-background-150/50 md:w-[728px]",headerTextClassName:"ps-2.5 py-2",headerText:s("settings.settings"),onClose:n,bottomSheetOnSmall:!1,children:c.jsx(d4e,{})}):null}const gu=typeof HTMLElement<"u"&&"showPopover"in HTMLElement.prototype&&typeof HTMLElement.prototype.showPopover=="function";function f4e(){const e=l.useRef(null),t=l.useCallback(()=>{const o=e.current;if(o&&gu)try{o.showPopover()}catch(r){Yt({feature:"toast",scenario:"showPopoverToast",errorMessage:r instanceof Error?r.message:void 0})}},[]),n=l.useCallback(()=>{const o=e.current;if(o&&gu)try{o.hidePopover()}catch(r){Yt({feature:"toast",scenario:"hidePopoverToast",errorMessage:r instanceof Error?r.message:void 0})}},[]),s=f5(()=>{n(),t()},50);return l.useEffect(()=>{if(t(),gu){const o=requestAnimationFrame(()=>{s()});return()=>cancelAnimationFrame(o)}return()=>{}},[t,s]),l.useEffect(()=>{if(!gu)return()=>{};const o=new MutationObserver(()=>{document.querySelectorAll("dialog[open]").length>0&&requestAnimationFrame(s)});return o.observe(document.documentElement,{childList:!0,subtree:!0,attributeFilter:["open"]}),()=>o.disconnect()},[s]),{toastRef:e,supportsPopover:gu}}function p4e({onClick:e}){return c.jsx("div",{className:"absolute end-0 top-0 z-10 cursor-pointer p-1 rtl:right-auto",children:c.jsx(re,{title:z("product.dismiss"),"aria-label":z("product.dismiss"),variant:"rect",color:"subtle-bright-inverted",size:"32-xs",onClick:e,children:c.jsx(nn,{className:"size-4"})})})}const h4e=["overflow-hidden","rounded-3xl","border","border-solid","border-white/20","shadow-lg","backdrop-blur-[30px]","bg-acrylic-default-tint-light/95","dark:bg-acrylic-default-tint-dark/95"];function g4e(e){const{title:t,subtitle:n,dismiss:s,link:o,ctaLabel:r,dismissable:a=!0,className:i,Icon:u,iconClassName:d,isRTL:m,onClick:f,onActiveChange:p,customColorTheme:g,intent:C="info",removeIconBorder:v}=e,b=M(Wo),y=g??b,[E,x]=l.useState(!1),[I,_]=l.useState(!1),T=E||I,{toastRef:A,supportsPopover:k}=f4e();l.useEffect(()=>{p==null||p(T)},[T,p]);const R=te=>{(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),f==null||f())},P=n??o?c.jsxs(c.Fragment,{children:[typeof n=="string"?`${n} `:n,o&&c.jsx("span",{className:"text-accent-450 underline text-sm dark:text-accent-600",role:"button",tabIndex:0,"aria-label":o,onKeyDown:R,children:o})]}):null,B="top-5 start-1/2 -translate-x-1/2",U=ae.instance().config(),$=(k?U.toastPopoverNotificationPositioning:U.toastNotificationPositioning)??B,Q=k?{popover:"manual"}:{};return c.jsx("div",{"data-theme":y,className:F("pointer-events-none",k?"fixed m-0 overflow-visible bg-transparent":"absolute",lt.toastNotification,$,i),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onFocus:()=>_(!0),onBlur:()=>_(!1),ref:A,...Q,children:c.jsx(pt,{children:c.jsxs(ge.div,{className:de("pointer-events-auto","relative",h4e,f&&"cursor-pointer"),initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:400,damping:30},onClick:f,children:[a&&c.jsx(p4e,{onClick:s}),c.jsx("div",{className:de("flex","flex-col","items-center","justify-center","py-2","ps-2","pe-1.5",{"w-[min(381px,100vw)]":!!P}),children:c.jsxs("div",{className:de("relative flex w-full items-center p-0",{"gap-x-3":u,"flex-row-reverse":u&&m}),children:[u&&c.jsx("div",{"aria-hidden":"true",className:F("flex size-16 shrink-0 items-center justify-center rounded-xl",!v&&"border border-black/10 dark:border-white/10"),children:c.jsx(u,{className:d})}),c.jsxs("div",{className:F("flex flex-1 flex-col justify-center py-1",{"ps-4":!u&&P,"pe-10":a&&(P??t)&&!r,"pe-4":r,"px-4":!P}),children:[c.jsx("header",{className:de("flex w-full overflow-hidden",{"items-center":!!P,"items-center justify-center":!P}),children:c.jsx("h2",{className:de("text-foreground-750 text-sm-strong",{"text-base-strong":!!P,"text-sm":!P},C==="error"&&"text-system-red-550"),children:t})}),P&&c.jsx("p",{className:"w-full text-foreground-700 text-sm",children:P}),c.jsx(Ti,{msg:`${t??""} ${typeof n=="string"?n:""}`,type:"assertive"})]}),r&&c.jsx("div",{className:F("flex shrink-0 items-center","me-4",a&&"me-10"),children:c.jsx(re,{variant:"rect",size:"40-base",className:"border border-black/8",title:r,onClick:te=>{te.stopPropagation(),f==null||f()},children:r})})]})})]})},t)})}function v4e(){const[e,t]=Fe(xn),n=qi(),[s,o]=l.useState(!1),[r,a]=l.useState(!1),i=l.useCallback(()=>{e!=null&&e.trackingArgs&&Ce({source:"toastNotification",scenario:e.trackingArgs.scenario,customData:e.trackingArgs.customData})},[e]),u=l.useCallback(()=>{t(null)},[t]),d=l.useCallback(()=>{var f;if(!(e!=null&&e.action))return;i();const{action:m}=e;m(),u(),(f=e.onClick)==null||f.call(e)},[e,i,u]);return l.useEffect(()=>{let m;return a(!1),o(!1),e!=null&&e.dismissAfter&&(m=window.setTimeout(()=>a(!0),e.dismissAfter)),()=>clearTimeout(m)},[e]),l.useEffect(()=>{r&&!s&&u()},[r,s,u]),e?c.jsx(g4e,{title:e.title,subtitle:e.subtitle,link:e.link,ctaLabel:e.ctaLabel,dismissable:e.dismissable,className:e.className,Icon:e.iconProvider??e.Icon,iconClassName:e.iconClassName,intent:e.intent,dismiss:m=>{var f;m==null||m.stopPropagation(),(f=e.onDismiss)==null||f.call(e),u()},isRTL:n,onClick:e.action?d:void 0,onActiveChange:o,customColorTheme:e.customColorTheme,removeIconBorder:e.removeIconBorder}):null}function C4e(){var o;const e=H("top-banner-upgrade-surface-app"),t=(o=ae.instance().config().uiOverrides)==null?void 0:o.showUpgradeAppTopBanner,n=e&&t;l.useEffect(()=>{n&&D.trackEvent({name:"system",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Shown"}})},[n]);const s=()=>{D.trackEvent({name:"interaction",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Clicked"}}),Eo("macappstore://apps.apple.com/app/id6738511300")};return n?c.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[c.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-background-150 opacity-90 dark:bg-background-150"}),c.jsx("div",{className:de("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",Ys,lt.modal),children:c.jsx("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("h3",{className:"text-lg",children:z("upgradeSurface.heading")}),c.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-xs sm:flex-row",children:[c.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-xs sm:flex-row",children:[c.jsx("p",{children:z("upgradeSurface.primaryDescription")}),c.jsx("p",{children:z("upgradeSurface.secondaryDescription")})]}),c.jsx("div",{className:"flex min-w-44 shrink-0 grow flex-col justify-center gap-2",children:c.jsx(re,{variant:"rect",size:"32-xs",onClick:s,title:z("upgradeSurface.buttonText"),children:z("upgradeSurface.buttonText")})})]})]})})})]}):null}const y4e=l.lazy(()=>V(()=>Promise.resolve().then(()=>A3),void 0)),b4e=Ck(()=>V(()=>import("./settings-wrapper-CNkMY6KE.js"),__vite__mapDeps([415,1,345,349,416,417,352])),"settings-wrapper"),x4e=l.lazy(()=>V(()=>import("./media-viewer-CoOWZPhA.js").then(e=>e.m),__vite__mapDeps([418,1])).then(e=>({default:e.MediaViewer}))),S4e=l.lazy(()=>V(()=>import("./picture-in-picture-ChHWGAsI.js"),__vite__mapDeps([419,1,393,394,420,421])).then(e=>({default:e.PictureInPicture}))),E4e=l.lazy(()=>V(()=>import("./composer-large-screen-yIPPnJl9.js"),__vite__mapDeps([422,1,423,424,425,426,427,428,429,430,431,432,433,434])));function w4e(e){const{children:t,customLayout:n}=e,s=gh(),o=ut(),{isPictureInPictureOpen:r}=wk(),a=ae.instance().config().appLayout,i=M(sr),u=(i==null?void 0:i.type)==="card",d=M(Dme),m=M(jme),f=M(Fme),p=ype();return c.jsxs(c.Fragment,{children:[p&&c.jsx("div",{className:F("pointer-events-none sticky top-0 w-full",lt.header),children:c.jsx("div",{className:"pointer-events-auto absolute end-2 top-2",children:c.jsx(e4e,{isPinned:f,showCloseButton:d,showPinButton:m})})}),c.jsxs(Qfe,{children:[s||n?t:c.jsxs(gd,{className:"flex-1",children:[t,c.jsx(L5,{}),c.jsx(Hp,{}),c.jsx(zp,{})]}),c.jsx(v4e,{}),r&&c.jsx(l.Suspense,{fallback:c.jsx(Ipe,{}),children:c.jsx(S4e,{})})]}),a.showMobileCrossSelling&&o.startsWith("/chats")&&!o.endsWith("/talk")&&c.jsx(Kbe,{}),u&&c.jsx(qbe,{}),a.showCookieBanner&&c.jsx($be,{}),c.jsx(C4e,{}),c.jsx(C2e,{}),c.jsx(m4e,{}),c.jsx("div",{id:"inAppFeedbackOcv"}),c.jsx("div",{id:"popoverPortal"}),c.jsx(n4e,{})]})}function L5(){const{isMediaViewerOpen:e}=ka();return e?c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"pointer-events-auto absolute inset-0 flex items-center justify-center",children:c.jsx(y4e,{type:"spinnerThemed",className:"size-12"})}),children:c.jsx(x4e,{})}):null}function Hp(){const e=gpe(),t=vpe();return c.jsxs(c.Fragment,{children:[e&&c.jsx(Wbe,{}),t&&c.jsx(l.Suspense,{fallback:null,children:c.jsx(E4e,{})})]})}function zp(){const e=ae.instance().config().appLayout,t=Cpe({showSettings:e.showSettings,showSettingsRelyOnChatDetailLayout:e.showSettingsRelyOnChatDetailLayout}),n=Ps(),s=H("sidebar-settings");return t?c.jsx(l.Suspense,{fallback:null,children:c.jsx(b4e,{className:F("top-6",n&&"-me-1 -mt-3",s&&"-me-[14px] -mt-[14px]")})}):null}function I4e(){typeof window<"u"&&(Object.defineProperty(window,"APP_VERSION",{value:hv()}),Object.defineProperty(window,"APP_SURFACE",{value:"cmc"}))}function _4e(){const e=c.jsxs(c.Fragment,{children:[c.jsx(SS,{children:c.jsx(Qde,{})}),c.jsx(w4e,{children:c.jsx(F9,{})})]});return c.jsx(ide,{children:e})}function T4e(e){const{onError:t=mw}=e,n=bpe();return c.jsxs(oS,{fallback:c.jsx(I3,{}),onError:t,children:[c.jsx(DA,{}),n?c.jsx(F9,{}):c.jsx(_4e,{})]})}I4e();sme();function A4e(){return({search:e,next:t})=>t(e)}hA();const k4e=S({"prompt-branch":h().optional(),"use-sxs":Ne([fe(),h()]).transform(e=>typeof e=="string"?e==="true":e).optional(),branch:h().optional(),"sxs-feature":h().optional(),renderingType:ke(["ssr","csr"]).optional()}),Xe=pO()({component:T4e,validateSearch:e=>k4e.parse(e),search:{middlewares:[A4e(),hO(["prompt-branch","use-sxs","branch","sxs-feature","renderingType"])]}});function M4e(){const{createConversation:e}=mm(),t=Ji(),n=ut(),s=l.useRef(null);l.useEffect(()=>{const o=s.current;s.current=n,n==="/"&&o!=="/"&&(t||(tk(),e({shouldNavigateToChat:!1})))},[t,n,e])}const J8=fe();function N4e(){const[e,t]=Fe(xn),{t:n}=Y(),s=R3(),o=ut(),r=xo(),a=o==="/fallrelease",i=o==="/login",u=o.includes("/chats"),d=(e==null?void 0:e.title)===n("octoberMoment.awarenessCard.cardHeader");l.useEffect(()=>{const m=yk(),f=wt(u4,J8),p=()=>{Lfe(),Gn(u4,J8,!0)},g=()=>c.jsx(bk,{isNotification:!0}),C=async()=>{Pfe(),await r({to:"/fallrelease",from:o})};a||i||u?t(null):m&&!e&&!f&&!s&&t({iconProvider:g,title:n("octoberMoment.awarenessCard.cardHeader"),subtitle:n("octoberMoment.awarenessCard.cardDescription"),action:C,onDismiss:p})},[o,e,s,n,r,t,a,i,u]),l.useEffect(()=>{s&&d&&t(null)},[s,t,d])}function vy(){return de(yd("pageContainer")??"px-6","mx-auto w-full max-w-chat")}function R4e(e){const{children:t,onClick:n,title:s,className:o,spatialNavigationAutofocus:r=!0,disabled:a=!1,testId:i}=e;return c.jsx(re,{disabled:a,variant:"pill",color:"acrylic-thin",size:"64-xxl",testId:i,className:F("w-conversations items-center justify-center",o),onClick:n,title:s,spatialNavigationAutofocus:r,children:t})}async function O5(e,t,n){try{await Nn({path:`/conversations/${e}/react`,args:{body:{[n]:t},analytics:{anonymousPath:"/conversations/*/react"}}})}catch{}}async function ER(e,t,n){try{await Nn({path:`/conversations/${e}/feedback`,args:{body:{types:Array.from(t),text:n},analytics:{anonymousPath:"/conversations/*/feedback"}}})}catch{}}const wR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7939 22.5C13.4857 22.4999 14.1313 22.154 14.5151 21.5786L14.54 21.5405C15.3284 20.3578 15.7499 18.9687 15.75 17.5474C15.75 16.8701 15.6551 16.196 15.4673 15.5464L15.3809 15.2695L15.2915 15H19.0781C20.9676 15 22.5 13.4676 22.5 11.5781C22.5 11.3687 22.4811 11.1597 22.4429 10.9541L22.3975 10.749L20.6543 3.77197C20.3204 2.43673 19.12 1.50018 17.7437 1.5H10.6772C9.60719 1.5 8.55025 1.71953 7.57031 2.1416C7.16475 1.74558 6.61162 1.5 6 1.5H3.75C2.50736 1.5 1.5 2.50736 1.5 3.75V11.25C1.5 12.4926 2.50736 13.5 3.75 13.5H6C6.51972 13.5 6.9975 13.3228 7.37842 13.0269L8.92383 14.8799L9.10986 15.1128C10.0102 16.2948 10.5 17.7421 10.5 19.2334V20.2837C10.5 21.5073 11.4927 22.5 12.7163 22.5H12.7939ZM3.75 12C3.33579 12 3 11.6642 3 11.25V3.75C3 3.33579 3.33579 3 3.75 3H6C6.41421 3 6.75 3.33579 6.75 3.75V11.25C6.75 11.6642 6.41421 12 6 12H3.75ZM12.7163 21C12.3211 21 12 20.6789 12 20.2837V19.2334C12 17.4131 11.4012 15.6473 10.3022 14.2046L10.0767 13.9204L8.20752 11.6792C8.23439 11.5402 8.25 11.3969 8.25 11.25V3.75C8.25 3.6622 8.24221 3.5759 8.23242 3.49072C9.00588 3.16824 9.83642 3 10.6772 3H17.7437C18.4318 3.00018 19.0313 3.4691 19.1982 4.13672L20.9429 11.1123L20.9854 11.3438C20.9949 11.4214 21 11.4997 21 11.5781C21 12.6392 20.1392 13.5 19.0781 13.5H14.25C14.2397 13.5 14.2295 13.5025 14.2192 13.5029C14.1856 13.5043 14.152 13.5071 14.1182 13.5132C14.0986 13.5167 14.08 13.5229 14.061 13.5278C14.0452 13.532 14.0284 13.5328 14.0127 13.5381C14.0021 13.5416 13.9923 13.5473 13.9819 13.5513C13.9639 13.5582 13.9466 13.5664 13.9292 13.5747C13.9038 13.5868 13.8794 13.5997 13.856 13.6143C13.8409 13.6236 13.8263 13.6332 13.812 13.6436C13.7873 13.6614 13.7638 13.6802 13.7417 13.7007C13.73 13.7115 13.719 13.7228 13.708 13.7344C13.6878 13.7557 13.6698 13.7784 13.6523 13.8018C13.6421 13.8154 13.6309 13.8284 13.6216 13.8428C13.6055 13.8677 13.5921 13.8938 13.5791 13.9204C13.5434 13.993 13.5194 14.0713 13.5088 14.1548C13.5056 14.1796 13.5021 14.2043 13.5015 14.2295C13.5013 14.2363 13.5 14.2431 13.5 14.25C13.5 14.2653 13.502 14.2804 13.5029 14.2954C13.5038 14.31 13.5041 14.3247 13.5059 14.3394L13.5103 14.3628C13.5148 14.3928 13.5213 14.4219 13.5293 14.4507L13.5381 14.4873L13.957 15.7441L14.0845 16.1851C14.194 16.6302 14.25 17.0879 14.25 17.5474C14.2499 18.6726 13.9161 19.7722 13.292 20.7085L13.2671 20.7466C13.1614 20.9047 12.9841 20.9999 12.7939 21H12.7163Z"})),Uke=Object.freeze(Object.defineProperty({__proto__:null,default:wR},Symbol.toStringTag,{value:"Module"})),IR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7939 1.5C13.4857 1.50008 14.1313 1.84595 14.5151 2.42139L14.54 2.45947L14.8184 2.91211C15.4271 3.98985 15.7499 5.20889 15.75 6.45264C15.75 7.2266 15.6256 7.99622 15.3809 8.73047L15.2915 9H19.0781C20.9676 9 22.5 10.5324 22.5 12.4219C22.5 12.6313 22.4811 12.8403 22.4429 13.0459L22.3975 13.251L20.6543 20.228C20.3204 21.5633 19.12 22.4998 17.7437 22.5H10.6772C9.61047 22.5 8.55647 22.2823 7.5791 21.8628L7.57031 21.8584C7.16475 22.2544 6.61162 22.5 6 22.5H3.75C2.50736 22.5 1.5 21.4926 1.5 20.25V12.75C1.5 11.5074 2.50736 10.5 3.75 10.5H6C6.51972 10.5 6.9975 10.6772 7.37842 10.9731L8.92383 9.12012L9.10986 8.88721C10.0102 7.70524 10.5 6.2579 10.5 4.7666V3.71631C10.5 2.49265 11.4927 1.5 12.7163 1.5H12.7939ZM3.75 12C3.33579 12 3 12.3358 3 12.75V20.25C3 20.6642 3.33579 21 3.75 21H6C6.41421 21 6.75 20.6642 6.75 20.25V12.75C6.75 12.3358 6.41421 12 6 12H3.75ZM12.7163 3C12.3211 3 12 3.32108 12 3.71631V4.7666C12 6.58686 11.4012 8.35271 10.3022 9.79541L10.0767 10.0796L8.20752 12.3208C8.23439 12.4598 8.25 12.6031 8.25 12.75V20.25C8.25 20.3378 8.24221 20.4241 8.23242 20.5093C9.00584 20.8318 9.83643 21 10.6772 21H17.7437C18.4318 20.9998 19.0313 20.5309 19.1982 19.8633L20.9429 12.8877L20.9854 12.6562C20.9949 12.5786 21 12.5003 21 12.4219C21 11.3608 20.1392 10.5 19.0781 10.5H14.25C14.2382 10.5 14.2266 10.4961 14.2148 10.4956C14.1855 10.4942 14.1564 10.4918 14.127 10.4868C14.102 10.4827 14.0778 10.4772 14.0537 10.4707C14.0403 10.467 14.026 10.4664 14.0127 10.4619C14.0035 10.4589 13.9953 10.4536 13.9863 10.4502C13.9606 10.4405 13.936 10.4289 13.9116 10.4165C13.8915 10.4063 13.8719 10.3961 13.853 10.3843C13.8325 10.3714 13.8136 10.3566 13.7944 10.3418C13.7742 10.3262 13.7542 10.3109 13.7358 10.2935C13.719 10.2775 13.7043 10.2597 13.689 10.2422C13.6733 10.2243 13.6574 10.2072 13.6436 10.188C13.6284 10.167 13.6155 10.1446 13.6025 10.1221C13.5914 10.1027 13.5797 10.0838 13.5703 10.0635C13.5589 10.0388 13.5497 10.0133 13.541 9.9873C13.5337 9.96547 13.5258 9.94388 13.5205 9.92139C13.5159 9.90169 13.5133 9.88159 13.5103 9.86133C13.5058 9.83177 13.5024 9.80214 13.5015 9.77197C13.5013 9.76466 13.5 9.75736 13.5 9.75C13.5 9.73818 13.5024 9.72653 13.5029 9.71484C13.5043 9.68556 13.5068 9.65636 13.5117 9.62695C13.5158 9.60203 13.5213 9.57774 13.5278 9.55371C13.5315 9.54019 13.5336 9.52615 13.5381 9.5127L13.957 8.25586C14.1508 7.67456 14.25 7.06538 14.25 6.45264C14.2499 5.46789 13.9952 4.5022 13.5132 3.64893L13.292 3.2915L13.2671 3.25342C13.1614 3.09528 12.9841 3.00008 12.7939 3H12.7163Z"})),Bke=Object.freeze(Object.defineProperty({__proto__:null,default:IR},Symbol.toStringTag,{value:"Module"}));function _R(e){const{titleText:t,subtitleText:n,positiveButtonText:s,negativeButtonText:o,positiveButtonTitle:r,negativeButtonTitle:a,modalHeaderText:i,onPositiveClick:u,onNegativeClick:d,isModalOpen:m,onModalClose:f,modalContent:p,className:g="",isDebugAudioRecorderEnabled:C=!1}=e;return c.jsxs("div",{className:g,children:[c.jsx("div",{className:"relative w-full pb-6 after:absolute after:mt-3 after:w-full after:border-b after:border-stroke-300"}),c.jsx("h2",{className:"mt-5 text-foreground-600 text-sm",children:c.jsx("strong",{children:t})}),c.jsx("p",{className:"mt-1 text-foreground-600 text-sm",children:n}),c.jsxs("div",{className:de("mt-3.5 grid w-fit min-w-72 grid-rows-1 gap-2",C?"grid-cols-3":"grid-cols-2"),children:[c.jsxs(re,{onClick:u,title:r,variant:"rect",size:"36-sm",children:[c.jsx(IR,{className:"size-5"})," ",s]}),c.jsxs(re,{onClick:d,title:a,variant:"rect",size:"36-sm",children:[c.jsx(wR,{className:"size-5"})," ",o]}),C&&c.jsx(re,{onClick:async()=>{const{AUDIO_RECORDER:v}=await V(async()=>{const{AUDIO_RECORDER:b}=await import("./audio-recorder-tlDtiSpY.js");return{AUDIO_RECORDER:b}},__vite__mapDeps([435,1]));await v.download()},title:"Download audio debug",variant:"rect",size:"36-sm",children:"Download audio debug"})]}),m&&c.jsx(fn,{isOpen:!0,onClose:f,headerText:i,className:"w-full max-w-[400px]",children:p})]})}function P4e(){}function L4e({inputValue:e,handleChange:t,className:n=""}){const[s,o]=l.useState(""),{t:r}=Y();return on("kill-free-form-text")?null:c.jsx(dy,{disabled:!1,className:F(n,"max-h-[8rem] grow-0 basis-[8rem] !items-start overflow-auto rounded-xl border-2 border-foreground-700 bg-black/5 px-0.5"),inputValue:e,characterLimit:PB,autoFocus:!1,setInput:i=>{t(i)},placeholder:r("chat.feedback.placeholder"),errorMessage:s,setError:o,onEnter:P4e,isMultiLines:!0})}function TR(e){const{feedbackOptions:t,onSubmit:n,shouldHideTextbox:s=!1}=e,{t:o}=Y(),[r,a]=l.useState(new Set),[i,u]=l.useState(""),d=r.size===0,m=p=>{a(g=>{const C=new Set(g);return r.has(p)?C.delete(p):C.add(p),C})},f=async()=>{n(r,i),a(new Set)};return t?c.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[c.jsx("ul",{role:"list",className:"mt-0 flex list-none flex-col gap-4",children:t.map((p,g)=>c.jsx("li",{children:c.jsx(w3,{label:p.label,setChecked:()=>m(p.type),checked:r.has(p.type),spatialNavigationAutofocus:g===0})},p.type))}),d||s?null:c.jsx(L4e,{inputValue:i,handleChange:u}),c.jsx(re,{title:o("chat.feedback.submitFeedbackButton"),size:"48-lg",color:"strong",className:"mt-4 max-h-12",disabled:d,onClick:f,children:o("chat.feedback.submitFeedbackButton")})]}):null}function O4e(e){var y,E;const{className:t}=e,n=M(eC),[s,o]=Fe(L1),[r,a]=l.useState(!1),[i,u]=l.useState(),d=H("ads-showroom-picasso-feedback"),{t:m}=Y(),f=x=>{$t({source:"feedback",scenario:hK[x],conversationId:s==null?void 0:s.conversationId,additionalData:{brandId:s==null?void 0:s.brandId,brandName:(s==null?void 0:s.brandName)??""}})},p=()=>{a(!1),o(void 0)},g=async x=>{s!=null&&s.conversationId&&d&&await O5(s.conversationId,x,"showroomReaction")},C=()=>{var x;f("thumbs-up"),u("thumbs-up"),(x=n==null?void 0:n.showroom)!=null&&x.positive?a(!0):p(),g("thumbs-up")},v=()=>{var x;f("thumbs-down"),u("thumbs-down"),(x=n==null?void 0:n.showroom)!=null&&x.negative?a(!0):p(),g("thumbs-down")},b=async(x,I)=>{p(),s&&D.trackEvent({name:"interaction",data:{eventName:"copilotSubmitFineConversationFeedback",eventInfo_fineFeedbackTypes:Array.from(x).join(","),eventInfo_conversationId:s.conversationId,eventInfo_additionalData:JSON.stringify({brandId:s.brandId,brandName:s.brandName,reactionType:i,showroomMessageId:s.messageId})}}),s!=null&&s.conversationId&&x.size>0&&ER(s.conversationId,x,I)};return c.jsx(_R,{titleText:m("ads.showroomFeedbackTitle",{brand:s==null?void 0:s.brandName}),subtitleText:m("ads.showroomFeedbackDescription"),positiveButtonText:m("ads.showroomFeedbackPositive"),negativeButtonText:m("ads.showroomFeedbackNegative"),positiveButtonTitle:m("reviewPrompt.positive"),negativeButtonTitle:m("reviewPrompt.negative"),modalHeaderText:m("ads.showroomFeedbackModalTitle"),onPositiveClick:C,onNegativeClick:v,isModalOpen:r,onModalClose:p,modalContent:c.jsx(TR,{onSubmit:b,feedbackOptions:i==="thumbs-up"?((y=n==null?void 0:n.showroom)==null?void 0:y.positive)??void 0:(E=n==null?void 0:n.showroom)==null?void 0:E.negative}),className:t,isDebugAudioRecorderEnabled:!1})}function D4e(e){const{onSubmit:t}=e,{t:n}=Y(),[s,o]=l.useState(!1),r=async a=>{o(!0),await t(a),o(!1)};return c.jsxs("div",{children:[c.jsx("p",{children:n("voice.feedback.reviewReasonV2")}),c.jsx(re,{title:n("voice.feedback.okay"),size:"48-lg",color:"strong",className:"mt-4 max-h-12 w-full",disabled:s,onClick:()=>r(!0),children:n("voice.feedback.okay")}),c.jsx(re,{title:n("voice.feedback.noThanks"),size:"48-lg",color:"default",className:"mt-3 w-full",onClick:()=>r(!1),children:n("voice.feedback.noThanks")})]})}const j4e="voice",F4e="appearance";function U4e({className:e}){const t=M(De),n=M(eC),s=se(Sl),[o,r]=Fe(dC),[a,i]=l.useState(),u=H("debug-audio-recorder")&&!1,d=a3(),m=d?F4e:j4e,{t:f}=Y(),p=()=>{$t({source:"voiceFeedback",scenario:"thumbsUp",conversationId:t,destination:m}),t&&O5(t,"thumbs-up","audioReaction"),s(!1),We.emit("feedback:ai-message-reaction","positive")},g=()=>{$t({source:"voiceFeedback",scenario:"thumbsDown",conversationId:t,destination:m}),t&&O5(t,"thumbs-down","audioReaction"),i("feedback-options")},C=()=>{i(null),s(!1)},v=async(E,x)=>{Ce({source:"voiceFeedback",scenario:"feedbackSubmit",conversationId:t,destination:m,customData:JSON.stringify({selectedOptionsCount:E.size,feedbackTypes:[...E].join(",")})}),t&&E.size>0&&ER(t,E,x),o?C():i("review-request")},b=async E=>{E&&(r(!0),await JC({optInToVoiceTraining:!0})),C()},y=()=>a==="feedback-options"?c.jsx(TR,{onSubmit:v,feedbackOptions:d?n==null?void 0:n.appearance:n==null?void 0:n.call}):a==="review-request"?c.jsx(D4e,{onSubmit:b}):null;return c.jsx(_R,{titleText:f(d?"voice.feedback.howWasAppearanceChat":"voice.feedback.howWasVoiceChat"),subtitleText:f("voice.feedback.giveFeedback"),positiveButtonText:f("voice.feedback.good"),negativeButtonText:f("voice.feedback.bad"),positiveButtonTitle:f("reviewPrompt.positive"),negativeButtonTitle:f("reviewPrompt.negative"),modalHeaderText:f(a==="feedback-options"?"voice.feedback.chooseWhatHappened":"voice.feedback.canMicrosoftReview"),onPositiveClick:p,onNegativeClick:g,isModalOpen:!!a,onModalClose:C,modalContent:y(),className:e,isDebugAudioRecorderEnabled:u})}const B4e=l.lazy(()=>V(()=>import("./index.es-DxI5XnPj.js"),__vite__mapDeps([5,1]))),V4e=KA();function H4e({onAnimationClicked:e}){const t=l.useRef(null),{t:n}=Y(),[s,o]=l.useState(null);l.useEffect(()=>{V4e.load("../../assets/lottie/character-thinking-cloud-animation.json").then(o).catch(()=>o(null))},[]),l.useEffect(()=>{const i=t.current;return i&&s&&i.playSegments([0,67],!0),()=>{i&&s&&i.playSegments([350,370],!0)}},[s]);const r=()=>{var u,d;(u=t.current)==null||u.playSegments([320,345],!0),(d=t.current)==null||d.pause(),e();const i=document.getElementById(u1);i==null||i.focus()},a=i=>{i.key==="Enter"&&r()};return c.jsx("div",{children:c.jsx(l.Suspense,{fallback:c.jsx("div",{}),children:c.jsx(B4e,{lottieRef:t,role:"button",tabIndex:0,"aria-label":n("characterAnimation.characterThinkingCloudAriaLabelText"),title:n("characterAnimation.characterThinkingCloudAriaLabelText"),animationData:s,loop:!1,onMouseDown:r,onMouseEnter:()=>{var i;return(i=t.current)==null?void 0:i.playSegments([275,295],!0)},onMouseLeave:()=>{var i;return(i=t.current)==null?void 0:i.playSegments([296,315],!0)},onKeyDown:a,onComplete:()=>{var i;return(i=t.current)==null?void 0:i.playSegments([68,274],!0)}})})})}const X8=1,z4e=l.lazy(()=>V(()=>import("./character-BmSd48ML.js"),__vite__mapDeps([372,1,373])).then(e=>({default:e.Character})));function G4e({animatingMessageId:e,isStreamingMessage:t,displayedCharacterId:n,setCharacterComponentHeight:s}){const o=H("characterspeech"),[r,a]=l.useState(0),[i,u]=l.useState(!1),[d,m]=Fe(mi),f=M(vr),p=()=>{a(0),u(!1)};l.useEffect(()=>{let v;return o&&d==="idle"&&(v=setInterval(()=>{a(b=>b<X8?b+1:b),f.length>0&&r===X8&&!t&&(u(!0),D.trackEvent({name:"system",data:{eventName:"characterTalkToMeDisplayed",eventInfo_conversationId:pe(De),eventInfo_characterId:n}}))},1e3)),()=>clearInterval(v)},[d,n,f.length,o,r,t]),l.useEffect(()=>{o&&d!=="idle"&&d!=="hovering"&&p()},[d,o]);const g=async()=>{p(),m("responding"),await Fn.submitMessage({command:{type:"promptCharacterSpeech"},inputMethod:"promptCharacterSpeech"}),D.trackEvent({name:"interaction",data:{eventName:"characterTalkToMeClicked",eventInfo_conversationId:pe(De),eventInfo_characterId:n}})};function C(){switch(n){case"aqua":return"translate-x-9";case"mica":return"translate-x-14";case"erin":return"translate-x-16";default:throw new Error("Invalid characterId provided to getTranslateXClass")}}return c.jsx(oS,{fallback:c.jsx(I3,{}),onError:NK(e,n),children:c.jsxs("div",{"data-testid":"character-div",className:F("sticky top-0 h-2/5 min-h-[40vh] w-full bg-gradient-chat-light-character dark:bg-background-150 dark:bg-none",lt.babylonCharacter),style:{maskImage:"linear-gradient(to bottom, #000 95%, transparent 100%)"},children:[c.jsx(pt,{children:i&&c.jsx(ge.div,{className:F("absolute start-1/2 top-12 size-36",C()),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:c.jsx(H4e,{onAnimationClicked:g})})}),c.jsx(l.Suspense,{fallback:c.jsx("div",{className:"flex h-full items-center justify-center",children:c.jsx(it,{type:"spinnerThemed",className:"size-12"})}),children:c.jsx(z4e,{characterId:n,setCharacterComponentHeight:s})})]})})}function W4e({className:e}){const{t}=Y();return c.jsxs("div",{className:F("flex items-center gap-2",e),children:[c.jsx(it,{type:"reasoning",className:"size-11"}),c.jsxs("div",{className:"flex flex-col text-sm",children:[c.jsx("span",{children:t("chat.reasoningLoading.title")}),c.jsx("span",{className:"text-foreground-450 dark:text-foreground-600",children:t("chat.reasoningLoading.description")})]})]})}function $4e(){return c.jsx("div",{className:"animate-thinking-polygon h-12 w-[max(7rem,50%)] bg-accent-350 blur-md dark:bg-accent-550"})}function q4e(e){const{isActive:t,animationDuration:n,children:s,className:o,...r}=e;return c.jsx("div",{className:F(t&&"animate-shimmer-text bg-gradient-to-r from-foreground-800 from-[calc(50%-64px)] via-foreground-250 via-50% to-foreground-800 to-[calc(50%+64px)] bg-[size:400%_100%] bg-clip-text text-transparent rtl:animate-shimmer-text-reverse",o),style:{...t&&n&&{animationDuration:n}},...r,children:s})}function Z4e(e){const{title:t,className:n,isActive:s=!0}=e,{t:o}=Y(),r=o("chat.reasoningLoading.title"),a=t&&t.trim()!==""?t:r;return c.jsx("div",{className:F("my-0.5 w-max text-base-dense",n),children:c.jsx(q4e,{isActive:s,children:a})})}const Vke="rounded-2xl px-4 py-3 text-foreground-600 -outline-offset-2 squircle-16 focus-visible:text-foreground-800 safe-hover:text-foreground-800 dark:text-foreground-700 dark:focus-visible:text-foreground-800 dark:safe-hover:text-foreground-800";function K4e(e){const{className:t,children:n,isActive:s=!0,title:o}=e;return c.jsx(j1,{className:F("mb-6 w-max max-w-[80%] px-4 py-2.5",t),background:"transparent",size:"xs",stroke:!0,initial:Be,animate:tt,strokeChildren:s?c.jsx("div",{className:"absolute inset-0 rtl:-scale-x-100",children:c.jsx($4e,{})}):void 0,children:n??c.jsx(Z4e,{title:o,isActive:s})})}function AR(e){const{loadingType:t}=e;switch(t){case"spinner":return c.jsx(it,{type:"spinnerThemed",className:"absolute -ms-2.5 -mt-2 size-11"});case"thinking-card":return c.jsx(K4e,{});case"reasoning-chat":return c.jsx(W4e,{className:"absolute -ms-2.5 -mt-2 w-max"});default:return null}}function kR(){const e=Co(),t=M(_X),n=H("think-deeper-cot");switch(e){case"chat":case"computerUse":case"study":case"research":case"search":return t?null:"spinner";case"reasoning":return n?"thinking-card":"reasoning-chat";case"smart":return null;case"coco":return"thinking-card";default:return null}}function MR(e){const{delay:t,className:n}=e,{t:s}=Y(),o=H("announce-loading"),r=l.useId(),a=Co(),i=kR();return i?c.jsxs(ge.div,{"aria-hidden":!0,className:F("relative",n),initial:"start",animate:"end",variants:{start:{...Be},end:{...tt,transition:{delay:t}}},children:[o&&c.jsx(Ti,{id:r,timeout:3e3,msg:s(a==="reasoning"?"chat.reasoning":"chat.loading"),type:"polite"}),c.jsx(AR,{loadingType:i})]}):null}const NR={"56-default":"h-14","64-legacy":"h-16"},Y4e={100:"bg-background-100/95 dark:bg-background-100/90",150:"bg-background-150/95 dark:bg-background-150/90",200:"bg-background-200/95 dark:bg-background-200/90"},Q4e={100:"dark:bg-background-100/90",150:"dark:bg-background-150/90",200:"dark:bg-background-200/90"};function Th(e){const{middle:t,start:n,end:s,className:o,sectionHeight:r="56-default",backgroundColor:a="150",backgroundDarkColor:i,hideBackground:u,showBottomBorder:d,disableFadeInOut:m,sectionClassName:f,startClassName:p,middleClassName:g,endClassName:C,secondaryStart:v,secondaryMiddle:b,secondaryEnd:y,secondarySectionClassName:E}=e,I=!bt({breakpoint:"md"}),_=!!n||!!t||!!s,T=!!v||!!b||!!y,A=_||T;return c.jsx(rn,{className:F("pointer-events-none sticky top-0 w-full",lt.stickyHeader),duration:m?0:ns.default,children:c.jsxs("div",{className:F("absolute flex w-full flex-col",d&&"border-b border-foreground-250/80 dark:border-foreground-250",o),"data-testid":"sticky-header",children:[c.jsx(rn,{duration:I?0:ns.default,children:!u&&c.jsx("div",{className:F("pointer-events-auto absolute inset-0",!A&&NR[r],Ys,Y4e[a],i&&Q4e[i])})}),_&&c.jsx(e9,{start:n,middle:t,end:s,height:r,sectionClassName:f,startClassName:p,middleClassName:g,endClassName:C}),T&&c.jsx(e9,{start:v,middle:b,end:y,height:r,sectionClassName:E,isSubtitleSection:!0})]})})}function e9(e){const{start:t,middle:n,end:s,height:o="64-legacy",isSubtitleSection:r,sectionClassName:a,startClassName:i,middleClassName:u,endClassName:d}=e;return c.jsxs("section",{className:F("relative flex w-full gap-2 px-2.5",r?"pb-2.5":"py-2.5",NR[o],a),children:[c.jsx("div",{className:F("flex flex-1 items-center justify-start sm:gap-2",i),children:c.jsx("div",{className:"pointer-events-auto contents",children:t})}),n&&c.jsx("div",{className:F("flex items-center overflow-hidden sm:gap-2",u),children:c.jsx("div",{className:"pointer-events-auto contents",children:n})}),c.jsx("div",{className:F("flex flex-1 items-center justify-end sm:gap-2",d),children:c.jsx("div",{className:"pointer-events-auto contents",children:s})})]})}const Cy=e=>l.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M15.75 3.75V20.25M22.25 6.25C22.25 5.58696 21.98 4.94884 21.4995 4.48C21.0189 4.01116 20.3671 3.75 19.6875 3.75H4.3125C3.63288 3.75 2.9811 4.01116 2.50054 4.48C2.01998 4.94884 1.75 5.58696 1.75 6.25V18C1.75 18.663 2.01998 19.3012 2.50054 19.77C2.9811 20.2388 3.63288 20.25 4.3125 20.25H19.6875C20.3671 20.25 21.0189 20.2388 21.4995 19.77C21.98 19.3012 22.25 18.663 22.25 18V6.25Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M7.5 14.5L10 12L7.5 9.5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Hke=Object.freeze(Object.defineProperty({__proto__:null,default:Cy},Symbol.toStringTag,{value:"Module"}));function J4e(){const e=!on("kill-share-c2"),t=ut(),n=M(bn),s=M(Sa),o=_l();return!!(!s&&e&&t.startsWith("/chats")&&!t.endsWith("/talk")&&(n!=null&&n.history.length)&&!o)}const RR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M20.9519 3.0481C19.5543 1.65058 17.2885 1.65064 15.8911 3.04825L3.94103 14.9997C3.5347 15.4061 3.2491 15.9172 3.116 16.4762L2.02041 21.0777C1.96009 21.3311 2.03552 21.5976 2.21968 21.7817C2.40385 21.9659 2.67037 22.0413 2.92373 21.981L7.52498 20.8855C8.08418 20.7523 8.59546 20.4666 9.00191 20.0601L20.952 8.10861C22.3493 6.71112 22.3493 4.4455 20.9519 3.0481ZM16.9518 4.10884C17.7634 3.29709 19.0795 3.29705 19.8912 4.10876C20.7028 4.9204 20.7029 6.23632 19.8913 7.04801L19 7.93946L16.0606 5.00012L16.9518 4.10884ZM15 6.06084L17.9394 9.00018L7.94119 18.9995C7.73104 19.2097 7.46668 19.3574 7.17755 19.4263L3.76191 20.2395L4.57521 16.8237C4.64402 16.5346 4.79168 16.2704 5.00175 16.0603L15 6.06084Z"})),zke=Object.freeze(Object.defineProperty({__proto__:null,default:RR},Symbol.toStringTag,{value:"Module"}));function X4e(e){const{title:t,onSave:n=()=>{},as:s="h2",inputClassName:o="",displayClassName:r="","aria-label":a,placeholder:i,maxLength:u,leftSlot:d,editable:m=!0,alignment:f="center",isEditIconVisibleOnHover:p}=e,{t:g}=Y(),[C,v]=l.useState(!1),[b,y]=l.useState(!1),[E,x]=l.useState(t),I=s,_=()=>{m&&(C||y(!0))},T=P=>{u!==void 0&&P.target.value.length>u||x(P.target.value)},A=()=>{R()},k=P=>{P.key==="Enter"||P.key==="Return"?R():P.key==="Escape"&&(x(t),y(!1))},R=async()=>{if(y(!1),E!==t){v(!0);try{await n(E)}catch{x(t)}finally{v(!1)}}};return b&&m?c.jsx(e6e,{disabled:C,type:"text",value:E,onChange:T,onBlur:A,onKeyDown:k,"aria-label":a,className:F("relative rounded-xl border border-transparent bg-background-200/75 px-[11px] py-1 outline-0 text-base-medium dark:bg-black","focus-visible:border-foreground-350 focus-visible:dark:border-foreground-400",f==="start"?"text-start":"text-center",o),maxLength:u}):c.jsxs(c.Fragment,{children:[d,c.jsxs(I,{className:F("relative w-max cursor-default items-center gap-2.5 truncate rounded-xl px-3 py-[5px] text-base-medium",r,p&&"hover:pe-9",m&&"group cursor-pointer hover:bg-black/5 active:bg-black/3 dark:hover:bg-black/30 dark:active:bg-black/20"),tabIndex:0,role:"button","aria-label":g("editableTitle.titleLabel",{title:t}),onClick:_,disabled:C||!m,onKeyDown:P=>{(P.key==="Enter"||P.key===" ")&&_()},children:[E!==""?E:i,p&&c.jsx(RR,{className:"absolute end-2.5 top-2.5 hidden size-4 opacity-60 group-hover:block group-focus-visible:block","aria-hidden":!0})]})]})}function e6e(e){const{autoFocus:t,...n}=e,s=l.useRef(null);return $i(s),c.jsx("input",{ref:s,...n})}function t6e(){const{t:e}=Y(),{hideConversationTitle:t,hideConversationActions:n}=ae.instance().config().uiOverrides??{},s=M(bn),o=Ji(),r="chatPage",{shareClickHandler:a}=ey({scenario:r,trackShareClick:()=>QA({scenario:r,sectionName:"topRight"})}),i=M(Wn)==="side-by-side",u=se(Wn),d=l.useCallback(()=>{u("detail-only")},[u]),m=s==null?void 0:s.title,f=m===""?e("conversations.newConversationTitle"):m,p=!t&&!o&&!i&&f?c.jsx(pt,{children:c.jsx(ge.div,{initial:Be,animate:tt,exit:{transition:{duration:0},...Be},transition:mn,className:"flex w-full items-center justify-center",children:c.jsx(X4e,{title:f,editable:!1,displayClassName:"w-max max-w-full",inputClassName:"w-full"},f)})}):void 0,g=bt({breakpoint:"sm"}),C=i&&!g,v=C&&c.jsx(pt,{children:c.jsx(ge.div,{initial:Be,animate:tt,exit:{transition:{duration:0},...Be},transition:mn,children:c.jsx(re,{title:e("actions.hideDetails"),color:"subtle-dimmed",variant:"square",size:"36-sm",onClick:d,children:c.jsx(Cy,{className:"size-5"})})})}),b=J4e(),y=!n&&b&&!i&&c.jsx(pt,{children:c.jsx(ge.div,{initial:Be,animate:tt,exit:{transition:{duration:0},...Be},transition:mn,children:c.jsx(re,{variant:"square",color:"subtle-dimmed-inverted",size:"36-sm",title:e("chat.actions.share"),onClick:a,children:c.jsx(bh,{className:"size-5"})})})}),E=M(Rd);return!_h()&&!E&&c.jsx(Th,{start:v,middle:p,end:y,sectionClassName:C?void 0:"ps-[calc(var(--sidebar-header-secondary-buttons-collapsed-width)+10px)]",showBottomBorder:!0,startClassName:"flex-none md:flex-1",middleClassName:"grow min-w-0",endClassName:"flex-none md:flex-1"})}function PR(){const e=H("sidebar-narrow"),t=bt({breakpoint:"lg"});return e&&t?yB:CB}const T0="0.5rem";function n6e(e){const{children:t}=e,n=M(Wn),s=Ps(),o=n==="side-by-side",r=_h(),a=PR(),i=n==="side-by-side"&&!r,u=s?"bg-background-150":"bg-gradient-chat-light",d=wr(f=>{const p=document.getElementById("app");p&&p.style.setProperty("--chat-details-container-height",r?`${f.height}px`:null)}),m=()=>n==="detail-only"?"0px":i?`max(${a}px, 25%)`:"100%";return c.jsxs("div",{className:de("flex size-full max-h-[100vh] min-h-0",r&&"flex-col",o&&"bg-sidebar-light dark:bg-sidebar-dark",s&&o&&"pb-2"),style:i?{gap:T0}:void 0,children:[n!=="chat-only"&&c.jsx(ge.div,{ref:d,className:de("rounded-lg",r&&"h-fit",o&&"shadow-lg","dark:bg-background-150 dark:bg-none",u),initial:{width:i?`calc(100% - ${T0} - max(${a}px, 25%))`:"100%"},animate:{width:i?`calc(100% - ${T0} - max(${a}px, 25%))`:"100%"},transition:mn,children:c.jsx(l4e,{})}),c.jsx(ge.div,{className:de(n==="detail-only"&&"hidden",o&&u,r?"h-[calc(100vh-var(--chat-details-container-height))]":"h-full",o&&"rounded-lg pb-px shadow-lg dark:bg-background-150 dark:bg-none"),initial:{width:m()},animate:{width:m()},layout:"position",transition:mn,children:t})]})}function $u(e,t){const n=Dt(e),s=Dt(t),o=n.getTime()-s.getTime();return o<0?-1:o>0?1:o}function s6e(e,t){const n=Dt(e),s=Dt(t),o=n.getFullYear()-s.getFullYear(),r=n.getMonth()-s.getMonth();return o*12+r}function o6e(e){const t=Dt(e);return t.setHours(23,59,59,999),t}function r6e(e){const t=Dt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function a6e(e){const t=Dt(e);return+o6e(t)==+r6e(t)}function i6e(e,t){const n=Dt(e),s=Dt(t),o=$u(n,s),r=Math.abs(s6e(n,s));let a;if(r<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*r);let i=$u(n,s)===-o;a6e(Dt(e))&&r===1&&$u(e,s)===1&&(i=!1),a=o*(r-Number(i))}return a===0?0:a}function c6e(e,t){const n=Dt(e),s=Dt(t);return n.getFullYear()-s.getFullYear()}function l6e(e,t){const n=Dt(e),s=Dt(t),o=$u(n,s),r=Math.abs(c6e(n,s));n.setFullYear(1584),s.setFullYear(1584);const a=$u(n,s)===-o,i=o*(r-+a);return i===0?0:i}function u6e(e,t){const n=Dt(e),s=Dt(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}let d6e={};function m6e(){return d6e}function f6e(e,t){var i,u,d,m;const n=m6e(),s=(t==null?void 0:t.weekStartsOn)??((u=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((m=(d=n.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,o=Dt(e),r=o.getDay(),a=(r<s?7:0)+r-s;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function p6e(e,t,n){const s=Gc(e,t),o=f6e(t,{weekStartsOn:1}),r=Gc(o,t),a=Gc(Bp(o,7),t),i=ts(e,"EEEE"),u=n(`dates.weekdays.${i.toLowerCase()}`),d=n(`dates.months.${ts(e,"MMMM").toLowerCase()}Abbr`),m=ts(e,"d"),f=n("dates.dayMonthDate",{day:u,month:d,date:m});return s>=1?f:s>=0?`${n("dates.today")}`:s>=-1?`${n("dates.yesterday")}`:s>=r?u:s>=a?n("dates.previousDay",{day:u}):f}function h6e(e,t,n){const s=Gc(t,e);if(s===0)return n("dates.today");if(s<=1)return n("dates.yesterday");if(s<7)return n("dates.weekThis");if(u6e(e,t))return n("dates.monthThis");if(i6e(t,e)<12){const a=ts(e,"MMMM").toLowerCase();return n(`dates.months.${a}`)}const r=l6e(t,e);return r===1?n("dates.yearAgo"):n("dates.yearsAgoPlural",{count:r})}function g6e(e,t){return p6e(e,new Date,t)}function Gke(e,t){return h6e(e,new Date,t)}function Wke(e){const t=Math.max(0,e),n=Math.floor(t/60),s=t%60;return`${n}:${s<10?"0":""}${s}`}function v6e(e){const{date:t,className:n}=e,{t:s}=Y();return c.jsxs("div",{className:de("flex items-center",n),children:[c.jsx("span",{className:"opacity-70 text-sm-strong","data-testid":"date-divider",children:g6e(t,s)}),c.jsx(ms,{verticalMargin:!1,color:"accent",className:"mt-px grow"})]})}function C6e(e){const{content:t}=e;return c.jsx("div",{className:"text-center text-foreground-450 text-sm dark:text-foreground-600",children:t})}const LR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M17.5004 12.0003C20.5379 12.0003 23.0004 14.4627 23.0004 17.5003C23.0004 20.5378 20.5379 23.0003 17.5004 23.0003C14.4628 23.0003 12.0004 20.5378 12.0004 17.5003C12.0004 14.4627 14.4628 12.0003 17.5004 12.0003ZM12.0226 13.9996C11.7259 14.4629 11.4864 14.9663 11.314 15.4999L4.25278 15.5002C3.83919 15.5002 3.50391 15.8355 3.50391 16.2491V16.8267C3.50391 17.3624 3.69502 17.8805 4.04287 18.2878C5.29618 19.7555 7.26206 20.5013 10.0004 20.5013C10.5968 20.5013 11.1567 20.4659 11.6806 20.3954C11.9258 20.8903 12.2333 21.3489 12.5921 21.7618C11.7966 21.922 10.9317 22.0013 10.0004 22.0013C6.8545 22.0013 4.46849 21.0962 2.90219 19.2619C2.32242 18.583 2.00391 17.7195 2.00391 16.8267V16.2491C2.00391 15.007 3.01076 14.0002 4.25278 14.0002L12.0226 13.9996ZM17.5004 14.0002L17.4105 14.0083C17.2064 14.0453 17.0455 14.2063 17.0084 14.4104L17.0004 14.5002L16.9994 17.0003H14.5043L14.4144 17.0083C14.2103 17.0454 14.0494 17.2063 14.0123 17.4104L14.0043 17.5003L14.0123 17.5901C14.0494 17.7942 14.2103 17.9552 14.4144 17.9922L14.5043 18.0003H16.9994L17.0004 20.5002L17.0084 20.5901C17.0455 20.7942 17.2064 20.9551 17.4105 20.9922L17.5004 21.0002L17.5902 20.9922C17.7943 20.9551 17.9553 20.7942 17.9923 20.5901L18.0004 20.5002L17.9994 18.0003H20.5043L20.5941 17.9922C20.7982 17.9552 20.9592 17.7942 20.9962 17.5901L21.0043 17.5003L20.9962 17.4104C20.9592 17.2063 20.7982 17.0454 20.5941 17.0083L20.5043 17.0003H17.9994L18.0004 14.5002L17.9923 14.4104C17.9553 14.2063 17.7943 14.0453 17.5902 14.0083L17.5004 14.0002ZM10.0004 2.00488C12.7618 2.00488 15.0004 4.24346 15.0004 7.00488C15.0004 9.76631 12.7618 12.0049 10.0004 12.0049C7.23894 12.0049 5.00036 9.76631 5.00036 7.00488C5.00036 4.24346 7.23894 2.00488 10.0004 2.00488ZM10.0004 3.50488C8.06737 3.50488 6.50036 5.07189 6.50036 7.00488C6.50036 8.93788 8.06737 10.5049 10.0004 10.5049C11.9334 10.5049 13.5004 8.93788 13.5004 7.00488C13.5004 5.07189 11.9334 3.50488 10.0004 3.50488Z",fill:"currentColor"})),$ke=Object.freeze(Object.defineProperty({__proto__:null,default:LR},Symbol.toStringTag,{value:"Module"})),OR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M17.5004 12.0003C20.5379 12.0003 23.0004 14.4627 23.0004 17.5003C23.0004 20.5378 20.5379 23.0003 17.5004 23.0003C14.4628 23.0003 12.0004 20.5378 12.0004 17.5003C12.0004 14.4627 14.4628 12.0003 17.5004 12.0003ZM12.0226 13.9996C11.7259 14.4629 11.4864 14.9663 11.314 15.4999L4.25391 15.5002C3.83969 15.5002 3.50391 15.836 3.50391 16.2502V17.1575C3.50391 17.8132 3.7899 18.4362 4.28707 18.8636C5.54516 19.9453 7.44117 20.5013 10.0004 20.5013C10.5992 20.5013 11.1618 20.4709 11.6885 20.4104C11.9374 20.9105 12.2512 21.3743 12.6175 21.7908C11.8153 21.9315 10.9423 22.0013 10.0004 22.0013C7.11087 22.0013 4.87205 21.3447 3.30918 20.001C2.48056 19.2887 2.00391 18.2503 2.00391 17.1575V16.2502C2.00391 15.0075 3.01127 14.0002 4.25391 14.0002L12.0226 13.9996ZM16.7196 14.5889L16.6503 14.6467L14.1347 17.163L14.0941 17.2137L14.0594 17.2711L14.0272 17.3491L14.0156 17.3923L14.0044 17.4787L14.0082 17.5661L14.0271 17.6513L14.0591 17.729L14.0837 17.7714L14.1346 17.8374L16.6503 20.3538C16.8456 20.5491 17.1622 20.5491 17.3574 20.3538C17.531 20.1802 17.5503 19.9108 17.4153 19.716L17.3574 19.6467L15.7114 18.0003H20.5004C20.7458 18.0003 20.95 17.8234 20.9923 17.5901L21.0004 17.5003C21.0004 17.2548 20.8235 17.0507 20.5902 17.0083L20.5004 17.0003H15.7114L17.3574 15.3538C17.531 15.1802 17.5503 14.9108 17.4153 14.716L17.3574 14.6467C17.1839 14.4731 16.9145 14.4539 16.7196 14.5889ZM10.0004 2.00488C12.7618 2.00488 15.0004 4.24346 15.0004 7.00488C15.0004 9.76631 12.7618 12.0049 10.0004 12.0049C7.23894 12.0049 5.00036 9.76631 5.00036 7.00488C5.00036 4.24346 7.23894 2.00488 10.0004 2.00488ZM10.0004 3.50488C8.06737 3.50488 6.50036 5.07189 6.50036 7.00488C6.50036 8.93788 8.06737 10.5049 10.0004 10.5049C11.9334 10.5049 13.5004 8.93788 13.5004 7.00488C13.5004 5.07189 11.9334 3.50488 10.0004 3.50488Z"})),qke=Object.freeze(Object.defineProperty({__proto__:null,default:OR},Symbol.toStringTag,{value:"Module"})),DR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M17.5004 12.0003C20.5379 12.0003 23.0004 14.4627 23.0004 17.5003C23.0004 20.5378 20.5379 23.0003 17.5004 23.0003C14.4628 23.0003 12.0004 20.5378 12.0004 17.5003C12.0004 14.4627 14.4628 12.0003 17.5004 12.0003ZM12.0226 13.9996C11.7259 14.4629 11.4864 14.9663 11.314 15.4999L4.25391 15.5002C3.83969 15.5002 3.50391 15.836 3.50391 16.2502V17.1575C3.50391 17.8132 3.7899 18.4362 4.28707 18.8636C5.54516 19.9453 7.44117 20.5013 10.0004 20.5013C10.5992 20.5013 11.1618 20.4709 11.6885 20.4104C11.9374 20.9105 12.2512 21.3743 12.6175 21.7908C11.8153 21.9315 10.9423 22.0013 10.0004 22.0013C7.11087 22.0013 4.87205 21.3447 3.30918 20.001C2.48056 19.2887 2.00391 18.2503 2.00391 17.1575V16.2502C2.00391 15.0075 3.01127 14.0002 4.25391 14.0002L12.0226 13.9996ZM15.0934 14.9665L15.0242 15.0244L14.9663 15.0936C14.8482 15.2642 14.8482 15.4917 14.9663 15.6623L15.0242 15.7315L16.7937 17.5009L15.0268 19.2677L14.9689 19.337C14.8508 19.5075 14.8508 19.7351 14.9689 19.9056L15.0268 19.9749L15.096 20.0327C15.2665 20.1508 15.4941 20.1508 15.6646 20.0327L15.7339 19.9749L17.5007 18.2079L19.2698 19.9771L19.339 20.035C19.5095 20.1531 19.7371 20.1531 19.9076 20.035L19.9769 19.9771L20.0347 19.9079C20.1528 19.7373 20.1528 19.5097 20.0347 19.3392L19.9769 19.27L18.2077 17.5009L19.9796 15.7316L20.0375 15.6623C20.1556 15.4918 20.1556 15.2642 20.0375 15.0937L19.9796 15.0244L19.9104 14.9666C19.7399 14.8485 19.5123 14.8485 19.3418 14.9666L19.2725 15.0244L17.5007 16.794L15.7313 15.0244L15.662 14.9665C15.5159 14.8653 15.3278 14.8508 15.1696 14.9231L15.0934 14.9665ZM10.0004 2.00488C12.7618 2.00488 15.0004 4.24346 15.0004 7.00488C15.0004 9.76631 12.7618 12.0049 10.0004 12.0049C7.23894 12.0049 5.00036 9.76631 5.00036 7.00488C5.00036 4.24346 7.23894 2.00488 10.0004 2.00488ZM10.0004 3.50488C8.06737 3.50488 6.50036 5.07189 6.50036 7.00488C6.50036 8.93788 8.06737 10.5049 10.0004 10.5049C11.9334 10.5049 13.5004 8.93788 13.5004 7.00488C13.5004 5.07189 11.9334 3.50488 10.0004 3.50488Z",fill:"currentColor"})),Zke=Object.freeze(Object.defineProperty({__proto__:null,default:DR},Symbol.toStringTag,{value:"Module"}));function y6e(e){switch(e){case"joined":return LR;case"left":return OR;case"kicked":return DR;default:return null}}function b6e({message:e}){const{participant:t,updateType:n}=e,s=vy(),o=y6e(n),{t:r}=Y(),a=l.useMemo(()=>{switch(n){case"joined":return r("share.invite.participantJoined",{name:t.userDisplayName});case"left":return r("share.invite.participantLeft",{name:t.userDisplayName});case"kicked":return r("share.invite.participantKicked",{name:t.userDisplayName});default:return null}},[n,t.userDisplayName,r]);return c.jsx("div",{className:F(CT,s),children:c.jsxs("div",{className:"flex gap-2 text-foreground-550 text-sm",children:[o&&c.jsx(o,{className:"size-4 shrink-0"}),a]})})}const t9=l.lazy(()=>V(()=>import("./ai-message-DhfPbXpJ.js").then(e=>e.a),__vite__mapDeps([436,1,413,437,438,439,434,440,367,441,442,443,444,396,445,394])));function x6e(e){const{message:t,animatingMessageIds:n,conversationId:s,sideBySideComparisonId:o,isStreamingComplete:r,shouldAnimate:a,reactionsToDisable:i,isLastMessage:u}=e,{t:d}=Y(),m=se(xn),f=kR();if(!s)return null;if(!m_(t))return c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.25},children:c.jsx(l.Suspense,{fallback:f&&c.jsx(AR,{loadingType:f}),children:c.jsx(t9,{message:t,isStreamingComplete:r,shouldAnimate:!1,reactionsToDisable:i,isLastMessage:u})})});if(!o)return null;const{left:p,right:g}=t,C=y=>!(n!=null&&n.has(y.id))&&!y.sideBySideConfig.isStreamingComplete,v=(y,E)=>{Oae({sideBySideComparisonId:o,sideBySideConfig:E}),Fn.selectSideBySideMessage({selectedMessageId:y,sideBySideComparisonId:o}),Gee(s,y),m({title:d("chat.sideBySide.selectedResponseToastTitle"),subtitle:d("chat.sideBySide.selectedResponseToastSubtitle"),dismissAfter:2e3})},b=c.jsx(MR,{delay:.5,className:"mt-2"});return c.jsxs("div",{className:"flex w-full flex-col items-center gap-6 pb-4",children:[c.jsx("p",{children:d("chat.sideBySide.preambleMessage")}),c.jsx("div",{className:"flex flex-col justify-center gap-6 @5xl/chat:w-[100cqw] @5xl/chat:flex-row @5xl/chat:items-stretch @5xl/chat:px-6",children:[p,g].map(y=>c.jsxs("div",{className:"flex min-h-24 flex-col rounded-2xl border-[0.5px] border-black/12 bg-white/45 p-6 @5xl/chat:min-w-[480px] @5xl/chat:max-w-[600px] @5xl/chat:flex-[1_1_600px] dark:bg-background-650/10",children:[c.jsx("div",{className:"flex-1",children:C(y)?b:c.jsx(l.Suspense,{fallback:b,children:c.jsx(t9,{message:y,isStreamingComplete:r,shouldAnimate:a,reactionsToDisable:"all",isLastMessage:!0,groupHasTopMargin:!1,isInSideBySide:!0})})}),r&&c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},children:c.jsx(re,{size:"36-sm",className:"mx-auto mt-6",title:d("chat.actions.selectResponse"),color:"strong",onClick:()=>v(y.id,y.sideBySideConfig),children:d("chat.actions.selectResponse")})})]},y.id))})]})}const jR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M19.5 5.5H4.5C3.94772 5.5 3.5 5.94772 3.5 6.5V15.5C3.5 16.0523 3.94772 16.5 4.5 16.5H9V18H4.5C3.11929 18 2 16.8807 2 15.5V6.5C2 5.11929 3.11929 4 4.5 4H19.5C20.8807 4 22 5.11929 22 6.5V15.5C22 16.7183 21.1285 17.7331 19.975 17.9549C19.9 17.5176 19.6598 17.1137 19.2849 16.8388L18.9461 16.5H19.5C20.0523 16.5 20.5 16.0523 20.5 15.5V6.5C20.5 5.94772 20.0523 5.5 19.5 5.5ZM11.2803 10.2197C11.0658 10.0052 10.7432 9.94103 10.463 10.0571C10.1827 10.1732 10 10.4467 10 10.75V21.25C10 21.5785 10.2138 21.8688 10.5275 21.9663C10.8413 22.0637 11.1819 21.9456 11.368 21.6749L13.8348 18.0869L18.0955 18.9839C18.4203 19.0523 18.7514 18.8991 18.9095 18.6073C19.0675 18.3154 19.015 17.9544 18.7803 17.7197L11.2803 10.2197ZM11.5 18.8353V12.5607L15.9357 16.9964L13.6545 16.5161C13.3582 16.4537 13.0535 16.5756 12.882 16.8251L11.5 18.8353Z"})),Kke=Object.freeze(Object.defineProperty({__proto__:null,default:jR},Symbol.toStringTag,{value:"Module"})),FR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM15.4462 8.39705L15.5303 8.46967C15.7966 8.73594 15.8208 9.1526 15.6029 9.44621L15.5303 9.53033L13.061 12L15.5303 14.4697C15.7966 14.7359 15.8208 15.1526 15.6029 15.4462L15.5303 15.5303C15.2641 15.7966 14.8474 15.8208 14.5538 15.6029L14.4697 15.5303L12 13.061L9.53033 15.5303C9.26406 15.7966 8.8474 15.8208 8.55379 15.6029L8.46967 15.5303C8.2034 15.2641 8.1792 14.8474 8.39705 14.5538L8.46967 14.4697L10.939 12L8.46967 9.53033C8.2034 9.26406 8.1792 8.8474 8.39705 8.55379L8.46967 8.46967C8.73594 8.2034 9.1526 8.1792 9.44621 8.39705L9.53033 8.46967L12 10.939L14.4697 8.46967C14.7359 8.2034 15.1526 8.1792 15.4462 8.39705Z"})),Yke=Object.freeze(Object.defineProperty({__proto__:null,default:FR},Symbol.toStringTag,{value:"Module"})),n9="size-5",s9="flex w-full items-center justify-end gap-1.5 text-foreground-450 dark:text-foreground-600";function S6e({type:e}){const{t}=Y();switch(e){case"takeTaskControl":return c.jsxs("div",{className:s9,children:[c.jsx(jR,{className:n9}),t("actions.tookControl")]});case"cancelTask":return c.jsxs("div",{className:s9,children:[c.jsx(FR,{className:n9}),t("actions.cancelledTask")]});case"createPage":case"appendToPage":case"promptCharacterSpeech":default:return null}}function E6e(e){const{text:t,author:n}=e,s=M(T1),o=(n==null?void 0:n.type)==="groupParticipant"&&n.id!==s;return c.jsx("div",{className:F("flex w-full flex-col",{"items-start":o,"items-end":!o}),"data-content":"user-message",children:c.jsxs("div",{className:F("font-ligatures-none relative h-fit max-w-user-text-message whitespace-pre-wrap break-words bg-accent-250/60 px-4 py-2.5 squircle-16 dark:bg-accent-200",Go("userMessage")??"text-base",{"bg-white dark:bg-accent-100":o}),children:[o&&c.jsx("div",{className:"pointer-events-none absolute inset-0 border-squircle-card border-accent-200 squircle-stroke-16 dark:border-accent-300","aria-hidden":"true"}),t]})})}const UR=e=>(F1(gO),hp({groupper:{tabbability:w6e(e==null?void 0:e.tabBehavior)},focusable:{ignoreKeydown:e==null?void 0:e.ignoreDefaultKeydown}})),w6e=e=>{switch(e){case"unlimited":return Kh.Unlimited;case"limited":return Kh.Limited;case"limited-trap-focus":return Kh.LimitedTrapFocus;default:return}},BR=l.forwardRef((e,t)=>{const{children:n,tabBehavior:s="limited-trap-focus",ignoreDefaultKeydown:o,...r}=e,a=UR({tabBehavior:s,ignoreDefaultKeydown:o});return H("a11y-keyboard-navigation")?c.jsx(ge.div,{ref:t,...a,...r,tabIndex:0,children:n}):c.jsx(ge.div,{...r,ref:t,children:n})});BR.displayName="FocusableGroupMotion";function I6e(e){const{children:t,tabBehavior:n="limited-trap-focus",ignoreDefaultKeydown:s,...o}=e,r=UR({tabBehavior:n,ignoreDefaultKeydown:s});return H("a11y-keyboard-navigation")?c.jsx("div",{...r,...o,tabIndex:0,role:"article",children:t}):c.jsx("div",{...o,children:t})}const VR=e=>c.jsx(I6e,{...e});VR.Motion=BR;function _6e({tabs:e=[]}){return e.length===0?null:c.jsx(_r,{className:"flex min-h-[60px] flex-col gap-2",tabbable:!0,tabIndex:0,children:c.jsx(cR,{showRemoveIcon:!1,tabs:e})})}function T6e(e){var T,A,k,R;const{message:t,className:n,isForSharing:s}=e,{t:o}=Y(),a=!!M(As),i=M(T1),u=iy(),d=H("a11y-keyboard-navigation"),m=t.content.filter(P=>P.type==="document"||P.type==="image"),[f,p]=l.useState(!1),g=H("file-upload-card-v2"),C=!!((T=ae.instance().config().composer)!=null&&T.smallAttachmentCard)||g,v=m.slice(0,op),b=l.useCallback(()=>{fr({msg:o("userInput.seeAll"),type:"polite"}),p(!0)},[o,p]),y=m.length>op,E=t.author==="groupParticipant"&&((A=t.authorMetadata)==null?void 0:A.id)!==i,x=E?((k=t.authorMetadata)==null?void 0:k.displayName)??o("share.invite.formerMemberTitle"):"";function I(){return E?o("chat.participantSaid",{name:x}):o(d?"chat.userSaid":"chat.user")}const _=I();return c.jsxs(VR,{className:de("space-y-1",n),id:`${t.id}-user-message`,"aria-labelledby":`${t.id}-user-message`,children:[c.jsxs("div",{className:"relative space-y-3",children:[c.jsx("h2",{className:"sr-only","aria-label":_,"data-copy":"false",children:_}),m.length>0&&c.jsxs("div",{className:F("flex w-full flex-row gap-2 overflow-hidden",{"justify-end":!E,"h-32":!g&&!C,"h-[58px]":!g&&C,"h-auto":g}),children:[v.map((P,B)=>c.jsx(ZN,{messageItem:P,isForSharing:s},`file-${B}`)),y&&c.jsx(re,{"aria-label":o("userInput.seeAll"),title:o("userInput.seeAll"),color:"overlay-dimmed-inverted",onClick:b,className:F(C?"mt-1 h-[58px]":""),children:o("userInput.seeAll")}),f&&c.jsx(KN,{onClose:()=>p(!1),messages:m,isForSharing:s})]}),t.content.map((P,B)=>P.type==="browserTabs"?u&&Zne(P.tabs)?c.jsx(_6e,{tabs:P.tabs},B):null:P.type==="text"?c.jsxs("div",{className:"flex flex-col gap-1",children:[E&&c.jsx("div",{className:"text-foreground-600 text-xs","aria-hidden":"true",children:x}),c.jsx(E6e,{author:t.authorMetadata,text:P.text})]},B):P.type==="command"?c.jsx(S6e,{type:P.command.type},B):(P.type==="document",null)),t.emojiReaction&&c.jsx("div",{className:"absolute -bottom-3 end-3",children:t.emojiReaction})]}),!a&&((R=t.brand)==null?void 0:R.brandLogo)&&c.jsx("div",{className:"w-full px-3 text-right text-foreground-600 text-sm",children:o("ads.aboutBrand",{brand:t.brand.brandLogo.businessName})})]},t.id)}const o9=l.lazy(()=>V(()=>import("./ai-message-DhfPbXpJ.js").then(e=>e.a),__vite__mapDeps([436,1,413,437,438,439,434,440,367,441,442,443,444,396,445,394])));function r9(e){const{chatItemClasses:t,currentConversation:n,enableLastMessageCheck:s=!1,hasNextPage:o=!1,isStreamingComplete:r,messages:a,previousMessageInit:i,reactionsToDisable:u,shouldAnimate:d=!1}=e,f=M(y1).get((n==null?void 0:n.id)??""),p=H("share-continue-v2"),{disableMultiturn:g}=ae.instance().config();return a.map((v,b)=>{const y=new Date(v.createdAt),E=b>0?a[b-1]:i,x=E&&new Date(E.createdAt),I=!x||!xh(y,x),_=p&&c3e(n!=null&&n.continuedAt?new Date(n.continuedAt):null,y,x),T=s&&b===a.length-1;let A;Fee(v)?A=c.jsx(x6e,{message:v,conversationId:n==null?void 0:n.id,animatingMessageIds:f,sideBySideComparisonId:n==null?void 0:n.sideBySideComparisonId,isStreamingComplete:r,shouldAnimate:d,reactionsToDisable:u,isLastMessage:T}):v.author==="ai"?A=e.isNewChat?c.jsx(l.Suspense,{fallback:c.jsx("div",{"aria-hidden":!0}),children:c.jsx(o9,{message:v,isStreamingComplete:r,shouldAnimate:d,reactionsToDisable:u,isLastMessage:T})}):c.jsx(o9,{message:v,isStreamingComplete:r,shouldAnimate:d,reactionsToDisable:u,isLastMessage:T}):v.author==="system"?A=c.jsx(b6e,{message:v}):A=c.jsx(T6e,{message:v,className:t});const k=b===0&&o&&!E;return c.jsxs(l.Fragment,{children:[_&&c.jsx(C6e,{content:z("chat.continuedConversationDisclaimer")}),!k&&I&&!g&&c.jsx(v6e,{date:y,className:t}),A]},v.id)})}function HR(e){const{className:t}=e,n=M(Sa),s="top-disclaimer";return n?c.jsx(C5,{forceVisible:!0,className:t,testId:s,shouldUpdateNewConversationCount:!0}):c.jsx(C5,{className:t,testId:s,shouldUpdateNewConversationCount:!0})}const a9=10,A6e=0,k6e=.2;function M6e({onClick:e,shouldShowScrollToBottomButton:t,bottomButtonClass:n=""}){const{t:s}=Y(),o=M(Wn),r=_h(),a=o==="side-by-side"&&!r;return c.jsx(pt,{children:t&&c.jsx(ge.div,{className:F("pointer-events-none absolute flex justify-center",lt.chatScrollToBottomButton,a?"end-0 w-1/4 min-w-secondary-panel-slim":"inset-x-0",n),initial:{...Be,y:a9},animate:{...tt,y:A6e},exit:{...Be,y:a9},transition:{duration:k6e},children:c.jsx(re,{color:"acrylic",variant:"circle",size:"36-sm",title:s("chat.scrollToBottom"),onClick:e,className:"pointer-events-auto border-none shadow-xl",testId:"scroll-to-bottom-button",children:c.jsx("span",{className:F("relative rounded-full bg-white/40 p-2 shadow-xl hover:bg-white hover:p-[9px] dark:bg-background-350/60","after:absolute after:inset-0 after:rounded-full after:shadow-xl","before:absolute before:-inset-px before:rounded-full before:border before:border-black/8"),children:c.jsx(Tl,{className:"size-5 rotate-180 fill-foreground-900 dark:fill-white"})})})})})}function N6e(e){const{query:t,messageId:n,index:s,onClick:o}=e,r=M(De),a=()=>{$t({source:"suggestionChip",conversationId:r,messageId:n}),D.trackEvent({name:"interaction",data:{eventName:"copilotSuggestionFollowupSelection",eventInfo_messageId:n,eventInfo_conversationId:r??"",eventInfo_suggestionIndex:s}}),o()};return c.jsx(YN,{isSelected:!1,variant:"flat",className:"max-w-[80%] text-start sm:max-w-fit",onClick:a,children:c.jsx("span",{className:"p-1",children:t})})}function R6e(e){const{mostRecentMessageId:t,className:n}=e,s=M(De),o=M(GK),r=o&&t===o.messageId;return l.useEffect(()=>{r&&D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_messageId:t,eventInfo_impressionScenario:"suggestionReceived",eventInfo_conversationId:s??""}})},[r,t,s]),c.jsx("div",{className:de("mt-auto",n),children:r&&c.jsx(L6e,{suggestions:o.suggestions,messageId:o.messageId,conversationId:s??""})})}async function P6e(e){await Fn.submitMessage({text:e,inputMethod:"suggestion"}),We.emit("composer:focus-input")}function L6e({suggestions:e,messageId:t,conversationId:n}){const s=l.useRef(null),o=hl(s,{amount:"all",once:!0});return l.useEffect(()=>{o&&D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_messageId:t,eventInfo_impressionScenario:"suggestionRender",eventInfo_conversationId:n}})},[o,t,n]),c.jsx(rn,{ref:s,duration:ns.suggestions,className:"flex flex-col items-end gap-3 pb-8",children:e.map((r,a)=>c.jsx(N6e,{index:a,messageId:t,onClick:()=>P6e(r),query:r},r))})}const O6e="answerCards.ariaLabel.numberOfLocalResultsSingle",D6e="answerCards.ariaLabel.numberOfLocalResultsPlural";function j6e(e){let t="";for(const s of e.entities){if(t+=s.name,s.category&&(t+=`, ${s.category}`),s.price&&(t+=`, ${F6e(s.price)}`),s.reviews[0]){const o=s.reviews[0];t+=", ",t+=z("answerCards.ariaLabel.ratedByReviewer",{rating:o.rating,reviewCount:o.count,reviewProvider:o.providerName})}s.phoneNumber&&(t+=", ",t+=z("answerCards.ariaLabel.phoneNumber",{phoneNumber:s.phoneNumber})),s.location.address&&(t+=", ",t+=z("answerCards.ariaLabel.address",{address:s.location.address})),s.openState&&(t+=", ",t+=z("answerCards.ariaLabel.openState",{openState:s.openState})),t+=". "}const n=e.entities.length===1?O6e:D6e;return z(n,{count:e.entities.length,resultSummary:t})}function F6e(e){switch(e.length){case 1:return z("answerCards.ariaLabel.inexpensivePrices");case 2:return z("answerCards.ariaLabel.averagePrices");default:return z("answerCards.ariaLabel.expensivePrices")}}function U6e(e){const{content:t,announce:n}=e;let s;for(const o of t){switch(o.type){case"text":s=o.text;break;case"image":o.url?s=z("chat.imageGenerated",{prompt:o.prompt??""}):s=z("chat.imageGenerating");break;case"page":break;case"citation":break;case"card":s=B6e(o.card);break;case"error":s=o.text;break;case"task":break;case"deleted":break;case"chainOfThought":break;case"chainOfThoughtGroup":break;case"document":break;case"activity":break;case"memorySignal":s=o.text;break;case"indicator-ai-response":s=o.text;break}s&&n({msg:s})}}function B6e(e){switch(e.type){case"localEntity":return j6e(e);case"healthcareEntity":return"";case"healthcareInfo":return"";case"shoppingProducts":return z("shopping.ariaLabel.carouselCards");case"ads":case"artifact":case"weather":case"weatherTemperatureHourly":case"weatherTemperatureDaily":case"weatherPrecipitationHourly":case"weatherPrecipitationDaily":case"image":case"person":case"phoneImages":case"phoneLinking":case"phoneAlarm":case"phoneTimer":case"phoneSendMessage":case"video":case"sportsSchedule":case"sportsGame":case"safetyHelpline":case"shopping":case"shoppingCurated":case"suggestVision":case"job":case"inlineVideo":case"quiz":case"financeChart":case"financeComparisonChart":case"generativeUI":case"recipe":case"mediaSpotlight":case"inlineImage":case"m365":case"file":case"computerUseFeedback":case"document":case"personalArtifacts":case"flashcard":case"consent":case"consentV2":case"newsCarousel":case"navigation":case"mediaCarousel":case"edge-passwords":case"powerPointCreator":case"federatedLogin":case"form-fill":return"";default:return""}}function V6e(e,t){const n=l.useRef(void 0);l.useEffect(()=>{var o;if(t)return;const s=e.at(-1);s&&s.author==="ai"&&s.id!==((o=n.current)==null?void 0:o.id)&&(U6e({content:s.content,announce:fr}),n.current=s)},[e,t])}function H6e(e){l.useEffect(()=>{if(e.current){const t=s=>{var r,a,i,u,d;if(s.target&&s.target instanceof Element&&s.target.closest('[data-formatless-copy="false"]'))return;const o=window.getSelection();if(o!=null&&o.rangeCount){let m=document.createElement("div");const f=o.getRangeAt(0),{startContainer:p,endContainer:g}=f;m.appendChild(f.cloneContents());const C=(r=p.parentElement)==null?void 0:r.closest("pre"),v=(a=g.parentElement)==null?void 0:a.closest("pre"),b=!!C&&!!v&&C===v,y=!!((i=p.parentElement)!=null&&i.closest("table"))&&!z6e(f),E=m.getElementsByTagName("*");for(const T of E)T.getAttribute("data-copy")==="false"?T.remove():(T.removeAttribute("style"),T.removeAttribute("class"),T.removeAttribute("initial"),T.removeAttribute("animate"),T.removeAttribute("variants"),T.removeAttribute("custom"));if(b){const T=document.createElement("pre");T.appendChild(m),m=T}if(y){const T=document.createElement("table"),A=Array.from(m.children);for(const k of A)T.appendChild(k);m=T}m.style.position="absolute",m.style.left="-9999px",document.body.appendChild(m);const x=window.getSelection(),I=document.createRange();I.selectNodeContents(m),x==null||x.removeAllRanges(),x==null||x.addRange(I);const _=(x==null?void 0:x.toString())??"";x==null||x.removeAllRanges(),x==null||x.addRange(f),document.body.removeChild(m),m.removeAttribute("style"),(u=s.clipboardData)==null||u.setData("text/plain",_),(d=s.clipboardData)==null||d.setData("text/html",b||y?m.outerHTML:m.innerHTML)}s.preventDefault()},n=e.current;return n.addEventListener("copy",t),()=>{n.removeEventListener("copy",t)}}return()=>{}},[e])}function z6e(e){var r,a,i,u;const{startContainer:t,endContainer:n}=e,s=((r=t.parentElement)==null?void 0:r.closest("td"))??((a=t.parentElement)==null?void 0:a.closest("th")),o=((i=n.parentElement)==null?void 0:i.closest("td"))??((u=n.parentElement)==null?void 0:u.closest("th"));return!!(s&&o&&s===o)}function G6e(){const e=bt({breakpoint:"lg"}),t=bt({breakpoint:"xl"}),n=bt({breakpoint:"2xl"}),s=R3(),r=!!kC();return e||s&&t||r&&n}const W6e=100,i9=.3,$6e=2*gS,q6e="bottom-[60px] sm:bottom-[120px] h-[50px]",Z6e="min-h-[60px] sm:min-h-[120px]",K6e="min-h-[calc(100dvh-60px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-120px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",Y6e="min-h-[calc(100dvh-48px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-48px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",Q6e="min-h-[calc(100dvh-80px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-80px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",J6e="bottom-[var(--character-component-height)] h-[50px]",X6e="min-h-[calc(100dvh-var(--character-component-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))]";function exe(e,t,n,s,o){const r=Ps(),a=l.useMemo(()=>({initial:{opacity:0,y:W6e},animate:{opacity:1,y:0,transition:{duration:.4,y:{duration:i9}}},exit:{opacity:0,y:-100,transition:{duration:.2,y:{duration:i9}}},onAnimationStart:x=>{typeof x=="object"&&!Array.isArray(x)&&x.opacity===1&&e()}}),[e]),i=n?J6e:q6e,u=n?`min-h-[${s}px]`:Z6e,{highlighted:d,backstage:m}=nxe(o),f=sxe(n,m,d),[p,g]=l.useState(!1),C=l.useRef(null),v=l.useCallback(x=>{C.current=x,x&&g(!0)},[]),{scrollYProgress:b}=CF({target:p?C:void 0,container:t,offset:["end start","start start"]});wr(()=>{requestAnimationFrame(()=>{var x;(x=t.current)==null||x.dispatchEvent(new Event("scroll"))})},{},t.current);const y=tl(b,[$6e/100,1],[0,1]);return{highlightedMessagesProps:a,opacity:r?y:b,sentinelRef:v,sentinelClasses:i,backstageClasses:u,highlightedClasses:f,highlighted:d,backstage:m}}function txe(e){const t=zR(e);if(!t)return[];const n=e.at(-2),s=[];Si(n)&&s.push(n),Si(t)&&s.push(t);const o=e.at(-3);if((o==null?void 0:o.author)==="human"&&s.length===2)return[o,...s];const r=t.author==="human",a=!r&&(n==null?void 0:n.author)==="ai";return r||a?[t]:e.slice(-2)}function zR(e){return e.at(-1)}function nxe(e){const t=txe(e),n=e.slice(0,-t.length);return{highlighted:t,backstage:n}}function sxe(e,t,n){return e?X6e:ae.instance().config().smallAnochorTopWithoutHeader&&n.length>0?t.length===0?Q6e:Y6e:K6e}const oxe=typeof document<"u"?l.useLayoutEffect:l.useEffect;function rxe(e,t){const n=l.useRef(0),s=l.useRef(0);oxe(()=>{const o=t.current;if(!o)return;const r=o.scrollHeight-n.current,a=o.scrollTop===0;r>0&&a?o.scrollTop=r:o.scrollTop=s.current,n.current=o.scrollHeight,s.current=o.scrollTop},[e]),l.useEffect(()=>{const{current:o}=t,r=()=>{o&&(s.current=o.scrollTop)};return o==null||o.addEventListener("scroll",r),()=>o==null?void 0:o.removeEventListener("scroll",r)},[t])}function axe(e,t){const n=on("kill-review-prompt"),o=!!ae.instance().config().promptForReviews&&!n,r=se(bo),a=l.useCallback(async u=>{if(!o)return;const{shown:d}=await pJ.run({});if(d)return;const f=v3e()>=d3e,p=u>l3e;(f||p)&&!C3e()&&(r("prompt-review"),D.trackEvent({name:"system",data:{eventName:"inAppSurveyPopUp",eventInfo_triggerType:p?"longChat":"activeDays"}}))},[o,r]),i=l.useRef(!1);l.useEffect(()=>{t&&(i.current=!0)},[t]),l.useEffect(()=>{t||!i.current||a(e)},[e,t,a])}function ixe(e){return l.useCallback(({behavior:n="smooth",delay:s=0})=>{const o=()=>{e.current&&e.current.scrollTo({top:e.current.scrollHeight,behavior:n})};s===0?o():setTimeout(o,s)},[e])}const cxe=.1;function lxe(e){const{chatRef:t,hasMessages:n=!0}=e,s=l.useRef(null),[o,r]=l.useState(!1),a=l.useRef(n);a.current=n;const i=l.useCallback(u=>{const d=u[0];d&&d.boundingClientRect.width!==0&&r(!d.isIntersecting&&a.current)},[]);return l.useEffect(()=>{if(!t.current||!s.current)return()=>{};const u=new IntersectionObserver(i,{root:t.current,threshold:cxe});return u.observe(s.current),()=>{u.disconnect()}},[t,i]),l.useEffect(()=>{n||r(!1)},[n]),{bottomRef:s,shouldShowScrollToBottomButton:o}}function uxe(){const e=M(Zd),t=gl(xt),n=M(C1);l.useEffect(()=>{t(s=>{if(n){const o=s.get(n);o&&(o.characterId=e)}})},[n,e,t])}async function dxe(e,t){const n=EC(t);if(n){const{message:s,part:o}=n;if(!o.task)return;const r=await Ns();r.setConversationIdByMessageId({messageId:s.id,conversationId:e}),r.setMessageIdByTaskId({taskId:o.task.id,messageId:s.id})}}const mxe=window.requestIdleCallback?window.requestIdleCallback:function(t){const n=Date.now();return setTimeout(()=>{t({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-n))}})},1)},fxe=1.5,c9="inline-block w-full space-y-8",yy="max-w-chat w-full";function pxe({children:e,chatRef:t,historyLength:n}){return rxe(n,t),e}function Ff(e){var Ko,Pa;const{className:t,conversationContainerClassName:n="mb-[var(--composer-container-height)]",bottomButtonClassName:s="bottom-[calc(var(--composer-container-height)+1rem)]",customLaunchGreeting:o,customBottomDisclaimer:r,enableHighlightedClasses:a=!0,enableBackstageClasses:i=!0,disableStickyHeader:u=!1,disableSuggestions:d=!1,disableScrollToBottomButton:m=!1,reactionsToDisable:f}=e,{loader:p}=pR(),g=M(vr),C=M(bn),v=M(Xv),b=M(L1),y=bt({breakpoint:"sm"}),E=H("sticky-conversation-mode"),x=H("persist-conversation-mode"),I=M(Jv),T=om()&&v!==null,A=!fm();l.useEffect(()=>{E&&zt(x?wt(s1,xl)??kn():jn("sticky-conversation-mode")??kn())},[E,x]);const k=C==null?void 0:C.sideBySideComparisonId,R=!!k,[P,B]=l.useState(0);uxe();const U=l.useRef(null),$=ixe(U);H6e(U);const{isContextualShoppingCardExpanded:Q,showShoppingCardInNewChat:te}=ah();N3({scrollableRef:U,source:"chat",customData:{conversationId:C==null?void 0:C.id,...Q&&{isContextualShoppingCardExpanded:Q}}});const[X]=Q3({...p,disabled:!!p.error}),{highlightedMessagesProps:ne,sentinelRef:q,sentinelClasses:Z,backstageClasses:J,highlightedClasses:W,opacity:le,highlighted:_e,backstage:Ae}=exe(()=>$({behavior:"instant",delay:ae.instance().config().scrollToBottomDelay}),U,T,P,g),K=tl(le,_t=>_t<.5?"none":"auto"),be=()=>$({behavior:"smooth"}),{bottomRef:Me,shouldShowScrollToBottomButton:je}=lxe({chatRef:U,hasMessages:g.length>0&&!m}),ie=M(y1).get((C==null?void 0:C.id)??""),ee=!!(ie!=null&&ie.size),me=ie==null?void 0:ie.values().next().value,Pe=M(Sl);l.useEffect(()=>{C!=null&&C.id&&(dxe(C.id,g),mxe(()=>{V(()=>import("./ai-message-DhfPbXpJ.js").then(_t=>_t.a),__vite__mapDeps([436,1,413,437,438,439,434,440,367,441,442,443,444,396,445,394]))}))},[C==null?void 0:C.id,g]),V6e(g,I);const Ve=zR(_e),Qe=(Ve==null?void 0:Ve.author)==="human"||I,st=!!M(Eu),ve=M(Uc),xe=l.useMemo(()=>{if((Ve==null?void 0:Ve.author)!=="ai")return!1;const _t=Ve.content.at(-1);return(_t==null?void 0:_t.type)==="image"&&_t.status==="generating"},[Ve]),Te=Qe&&!ee||st||ve,{disableMultiturn:Ze}=ae.instance().config(),Le=(Pa=(Ko=ae.instance().config().styleOverrides)==null?void 0:Ko.width)==null?void 0:Pa.chat;axe(g.length,Qe);const Ye=Ps(),Ue=Ji(),he=!T&&!y&&Ue,ze=M(Rd),It=i&&!(te&&!y)&&!ze,{isMediaViewerOpen:kt}=ka(),we=H("chat-refactor-max-width"),Ee=we?vy():void 0,Ke=we?"w-full":yy,dt=!I,Re=!d&&!R,{showLaunchGreeting:ft}=Ol(),ht=ft&&!T,Io=!!ae.instance().config().smallScreenShowTopDisclaimerAfterSendingMessage?!Ue:!ht,_o=T||y&&Io,nc=Te&&!R&&!xe,as=H("chat-header-title"),Tr=G6e(),sc=M(Wn)==="side-by-side",To=ut(),Na=se(Wn),Ra=sc&&!y&&To.startsWith("/chats"),qt=l.useCallback(()=>{Na("detail-only")},[Na]),ln=c.jsx(ge.div,{initial:Be,animate:tt,exit:{transition:{duration:0},...Be},transition:mn,children:c.jsx(re,{title:z("actions.hideDetails"),color:"subtle-dimmed",variant:"square",size:"36-sm",onClick:qt,testId:"collapse-chat-button",children:c.jsx(Cy,{className:"size-5"})})}),gs=_e[0],oc=gs==null?void 0:gs.createdAt,Ls=Ae,rc=R?jee(_e,k):_e;return c.jsx(n6e,{children:c.jsxs("div",{className:F("@container/chat","scrollbar-stable t-custom-scrollbar flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-secondary-panel-slim lg:min-w-secondary-panel",ae.instance().config().showScrollbarOnHover&&"scrollbar-container",kt&&!ze&&"invisible",t),ref:U,"data-testid":"chat-page",children:[!u&&(as?c.jsx(t6e,{}):c.jsx(Th,{hideBackground:!Tr&&!Ra,start:Ra&&ln})),T&&c.jsx(G4e,{animatingMessageId:me,isStreamingMessage:Qe,displayedCharacterId:v,setCharacterComponentHeight:B}),c.jsx(_r.Motion,{circular:!1,tabbable:!0,initial:A?"start":!1,animate:"end",variants:{start:Be,end:{...tt,transition:{duration:.2,delay:.2}}},className:F(n,"grow",!we&&(yd("pageContainer")??"px-6"),Ke,Le),transition:mn,"data-content":"conversation","data-copy":"false",children:c.jsx(l.Suspense,{fallback:c.jsx("div",{"aria-hidden":!0}),children:c.jsx(l.Suspense,{fallback:c.jsx("div",{"aria-hidden":!0}),children:c.jsxs(pxe,{chatRef:U,historyLength:g.length,children:[p.hasNextPage&&c.jsx("div",{ref:X}),c.jsxs(ge.div,{className:F("relative",Ye||!u?"pt-10":"pt-6",Ls.length>0&&c9,It&&J),style:{opacity:g.length>0?le:0,pointerEvents:K},children:[c.jsx("div",{className:F("absolute -z-10 w-full",Z),ref:q}),c.jsx(r9,{chatItemClasses:Ee,currentConversation:C,isStreamingComplete:dt,messages:Ls,hasNextPage:p.hasNextPage,reactionsToDisable:f,isNewChat:!1})]}),c.jsxs("div",{className:F(a&&W,"flex flex-col"),"data-testid":"highlighted-chats",children:[c.jsx(pt,{mode:"wait",initial:!0,children:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:Ee,children:c.jsxs("div",{className:F("flex w-full flex-col gap-2",ht&&"pb-2"),children:[ht&&o,_o&&c.jsx(HR,{})]})}),_e.length>0&&c.jsxs(ge.div,{className:F(Ze?"pb-24":"pb-6",c9),initial:ne.initial,animate:ne.animate,exit:ne.exit,onAnimationStart:_t=>{const Js=le.get()<1;((gs==null?void 0:gs.author)==="human"||Js)&&ne.onAnimationStart(_t)},children:[c.jsx(r9,{chatItemClasses:Ee,currentConversation:C,enableLastMessageCheck:!0,isStreamingComplete:dt,messages:rc,previousMessageInit:Ls[Ls.length-1]??void 0,reactionsToDisable:f,shouldAnimate:ee,isNewChat:!0}),c.jsx(l.Suspense,{fallback:c.jsx("div",{"aria-hidden":!0}),children:nc&&c.jsx(MR,{delay:fxe,className:Ee})}),c.jsx(rn,{children:Pe&&c.jsx(U4e,{className:Ee})}),c.jsx(rn,{children:b&&b.visible&&c.jsx(O4e,{className:Ee})})]},oc)]})}),Re&&c.jsx(R6e,{mostRecentMessageId:Ve==null?void 0:Ve.id,className:Ee}),c.jsx("div",{ref:Me,style:{height:0,overflow:"hidden"}}),c.jsx(M6e,{shouldShowScrollToBottomButton:je,onClick:be,bottomButtonClass:s}),Ze&&!Te&&pl.createPortal(c.jsx(R4e,{title:z("tv.chat.moveToMultiturn"),onClick:()=>{const _t=new URL(window.location.origin);_t.searchParams.set("wtv","1"),_t.searchParams.set("oem","lg-multiturn"),_t.searchParams.set("form","LGTVTR"),Qi(_t.toString())},className:F("fixed bottom-6 start-1/2 z-10 -translate-x-1/2 px-8 transition-opacity duration-300",je?"pointer-events-none opacity-0":"opacity-100"),children:z("tv.chat.moveToMultiturn")}),document.body)]})]})})})}),he&&r]})})}const Qke=Object.freeze(Object.defineProperty({__proto__:null,CHAT_WIDTH_CLASSES:yy,default:Ff},Symbol.toStringTag,{value:"Module"}));function hxe(e){const{customBottomDisclaimer:t}=e,n=H("async-disclaimer-text"),s=xC(),[o,r]=l.useState(!n);return l.useEffect(()=>{s&&s.length>0&&r(!0)},[s]),t||(o?c.jsx(rn,{className:"absolute bottom-0 flex max-w-chat justify-center px-6 text-center","data-testid":"bottom-disclaimer",children:c.jsx(C5,{shouldUpdateNewConversationCount:!0})}):null)}function gxe(){return c.jsx("div",{"aria-hidden":!0,className:"flex size-full flex-col items-center justify-center"})}const Ec="absolute animate-dot-ellipsis size-2 rounded-full bg-background-450";function vxe(e){const{className:t}=e;return c.jsxs("div",{className:F("flex items-center justify-center gap-3",t),children:[c.jsxs("div",{className:"relative flex items-center justify-center",children:[c.jsx("div",{className:Ec,style:{animationDelay:"0ms"}}),c.jsx("div",{className:Ec,style:{animationDelay:"30ms"}})]}),c.jsxs("div",{className:"relative flex items-center justify-center",children:[c.jsx("div",{className:Ec,style:{animationDelay:"100ms"}}),c.jsx("div",{className:Ec,style:{animationDelay:"130ms"}})]}),c.jsxs("div",{className:"relative flex items-center justify-center",children:[c.jsx("div",{className:Ec,style:{animationDelay:"200ms"}}),c.jsx("div",{className:Ec,style:{animationDelay:"230ms"}})]})]})}function Cxe(e){const{text:t,staggerChildren:n=.018,delayChildren:s=0,initialOpacity:o=0,className:r}=e;return c.jsx(ge.div,{variants:{show:{transition:{staggerChildren:n,delayChildren:s}}},initial:"hidden",animate:"show",className:r,children:U3(t).map((a,i)=>c.jsx(ge.span,{variants:{hidden:{opacity:o},show:{opacity:1,transition:{duration:Dk}}},children:a},i))})}const yxe={sm:"text-lg",md:"text-2xl",lg:"text-4xl"},l9=25;function bxe(e){const{subheading:t}=e;return c.jsx("h2",{className:"mt-4 text-foreground-800 text-base",children:t})}function xxe(e){const{className:t,fontSize:n="lg"}=e,s=M(oh),o=M(Zw),{t:r}=Y(),{greetingKey:a,widgetGreeting:i,widgetSubheading:u}=YT(),{isCentralComposerEnabled:d,isGreetingCentered:m}=Ol(),f=fy(),p=uye(),g=o&&o.length>l9?`${o.slice(0,l9)}`:o,C=a?r(a,{name:g}):"";return f?c.jsx("div",{className:F(t,"flex w-full flex-col items-start justify-start gap-2 sm:mb-6 sm:h-[100px] sm:justify-end"),children:c.jsx("div",{className:"flex justify-start sm:min-h-8",children:!p||s?c.jsx("div",{className:"ms-2 mt-6 flex size-full sm:mt-0",children:c.jsx(vxe,{className:"flex-1"})}):c.jsxs("div",{className:"flex flex-col items-start gap-2",children:[c.jsxs(rn,{className:"flex items-center gap-2 text-foreground-550 dark:text-foreground-750",id:i??C,children:[c.jsx("p",{className:"text-sm-strong",children:r("common.copilotText")}),c.jsx("p",{className:"text-sm",children:ts(new Date,"h:mm aa")})]}),c.jsx("h1",{className:"text-xl",children:c.jsx(GR,{text:i??C},i)})]})})}):c.jsxs("div",{className:F("flex w-full flex-col items-start justify-start sm:mb-8 sm:h-[100px] sm:justify-end",m&&"sm:items-center",!d&&"sm:justify-start",yxe[n],u&&"sm:mb-4",t),"data-testid":"launch-greeting",children:[c.jsx("h1",{children:C}),u&&c.jsx(bxe,{subheading:u})]})}const GR=l.memo(e=>{const{text:t}=e;return c.jsx(Cxe,{text:t,staggerChildren:.02,delayChildren:.1},t)});GR.displayName="AnimatedTextMemo";function Sxe(e){const{customLaunchGreeting:t,className:n}=e;return t||c.jsx(xxe,{className:n,fontSize:"md"})}function Exe({characterId:e,className:t}){const n=M(bn),[s,o]=Fe(Cw),{t:r}=Y();return l.useEffect(()=>{(n==null?void 0:n.isNew)===!1&&o(!1)},[o,n==null?void 0:n.isNew]),n!=null&&n.isNew?c.jsxs(rn,{id:"character-disclaimer",mode:"wait",className:de("pb-2 text-foreground-550/90 text-sm dark:text-foreground-750/60",t),children:[r("characterAnimation.characterDisclaimerTextV2",{characterName:MK(e,r)})," ",s&&c.jsx(hn,{i18nKey:"characterAnimation.characterSettingDisclaimerText",components:{settingsLink:c.jsx(jl,{pages:["menu","character-options"],className:"text-foreground-550/90 underline text-sm dark:text-foreground-750/60"})}})]}):null}function wxe(){return c.jsx(j1,{size:"sm",stroke:!0,className:"flex h-[172px] w-[324px] cursor-pointer flex-col p-4",children:c.jsx("div",{className:"flex flex-1",children:c.jsx(Vp,{className:"size-full",style:{clipPath:"var(--clip-path-squircle-36)"}})})})}const Ixe=l.lazy(()=>V(()=>import("./widget-section-CkOZAdJ3.js"),__vite__mapDeps([446,1])).then(e=>({default:e.default}))),_xe=l.lazy(()=>V(()=>import("./shopping-starter-card-BdMC8xea.js"),__vite__mapDeps([447,1,448,328,324,325,308,309,449,326,380,450,451,452,327,453,323,454,330,438,455,456,457,458,459,460,461,342,462])).then(e=>({default:e.ShoppingStarterCard})));function Txe(e){const{customLaunchGreeting:t,chatItemClasses:n,postContent:s}=e,{isCentralComposerEnabled:o,isWidgetSectionEnabled:r,isAppearanceOnHomeEnabled:a,isGreetingCentered:i,showLaunchGreeting:u}=Ol(),d=bt({breakpoint:"sm"}),m=Up({breakpoint:"h760"}),f=Up({breakpoint:"h600"}),p=H("appr-home-toggle"),g=M(KY),C=a&&(!p||!g)&&!f,v=om(),b=Ji(),y=M(Xv),E=!fm(),x=v&&y!==null,I=M(Tw),{showShoppingCardInNewChat:_}=ah(),T=u&&!x,k=!!ae.instance().config().smallScreenShowTopDisclaimerAfterSendingMessage?!b:!T,R=x||d&&k,B=Co()==="computerUse",U=r&&!B&&(!m||d),$=T&&"pb-2",Q=l.useMemo(()=>l.lazy(()=>a?V(()=>import("./appearance-chat-CjboCFso.js"),__vite__mapDeps([463,1,464])).then(X=>({default:X.AppearanceChat})):Promise.resolve({default:()=>null})),[a]),te=c.jsxs(rn,{delay:.2,initial:E?"initial":!1,className:F(o?"mt-2 flex flex-col items-start text-pretty pe-0 sm:absolute sm:inset-x-0 sm:inset-y-0 sm:mx-auto sm:mt-0 sm:max-w-chat sm:px-4 sm:pb-[calc(var(--composer-container-height))]":$,_&&"mx-auto mt-2 max-w-sm sm:relative sm:mt-6 sm:max-w-md sm:px-4",C&&d&&"grow",U&&"sm:pb-[calc(var(--composer-container-height)+42px)]"),children:[C&&o&&c.jsx("div",{className:F("order-2 flex w-full flex-col items-center justify-center sm:absolute sm:h-[calc(50%-60px-var(--composer-container-height)/2)]",d&&"grow"),children:c.jsx(l.Suspense,{fallback:c.jsx(gxe,{}),children:c.jsx(Q,{voiceAppearanceId:Ea},"appearance-chat-home")})}),c.jsxs("div",{className:"order-1 flex w-full flex-col gap-2 sm:top-0 sm:h-full sm:justify-center",children:[T&&c.jsx(Sxe,{customLaunchGreeting:t,className:F(i?"sm:text-center":"sm:ps-2")}),x&&c.jsx(Exe,{characterId:y}),_&&!I&&c.jsx(l.Suspense,{fallback:c.jsx(wxe,{}),children:c.jsx(_xe,{})}),R&&c.jsx(HR,{}),U&&c.jsx(Ixe,{onWidgetClick:F3,className:"mx-auto mt-4 max-w-sm px-2 pb-8 sm:mx-0 sm:mt-0 sm:h-[220px] sm:w-full sm:max-w-none sm:px-4 sm:pb-0"}),s]})]},"chat-welcome");return n?c.jsx("div",{className:n,children:te}):te}function Axe(e){var v,b;const{className:t,conversationContainerClassName:n,customLaunchGreeting:s,customBottomDisclaimer:o,disableStickyHeader:r=!1,postWelcomeContent:a}=e;M4e(),N4e();const i=H("chat-refactor-max-width"),u=bt({breakpoint:"sm"}),d=Ps(),m=!fm(),f=!u,p=(b=(v=ae.instance().config().styleOverrides)==null?void 0:v.width)==null?void 0:b.chat,g=i?vy():void 0,C=i?"w-full":yy;return c.jsxs("div",{className:F("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-secondary-panel-slim lg:min-w-secondary-panel",ae.instance().config().showScrollbarOnHover&&"scrollbar-container",t),"data-testid":"landing-page",children:[!r&&c.jsx(Th,{sectionHeight:"64-legacy"}),c.jsx(_r.Motion,{circular:!1,tabbable:!0,initial:m?"start":!1,animate:"end",variants:{start:Be,end:{...tt,transition:{duration:.2,delay:.2}}},className:F(n,"grow",!i&&(yd("pageContainer")??"px-6"),C,p),layout:"position",transition:mn,children:c.jsxs(l.Suspense,{fallback:c.jsx("div",{"aria-hidden":!0}),children:[c.jsx("div",{className:F("relative",d||!r?"pt-10":"pt-6","min-h-[60px] sm:min-h-[120px]")}),c.jsx(pt,{mode:"wait",initial:!1,children:c.jsx(Txe,{customLaunchGreeting:s,chatItemClasses:g,postContent:a})})]})}),f&&c.jsx(hxe,{customBottomDisclaimer:o})]})}function kxe(e){const{className:t,conversationContainerClassName:n="mb-[var(--composer-container-height)]",customLaunchGreeting:s,customBottomDisclaimer:o,disableStickyHeader:r=!1,postWelcomeContent:a}=e;return c.jsxs(gd,{className:"size-full overflow-hidden",children:[c.jsxs(SS,{children:[c.jsx(Axe,{className:t,conversationContainerClassName:n,customLaunchGreeting:s,customBottomDisclaimer:o,disableStickyHeader:r,postWelcomeContent:a}),c.jsx(zp,{})]}),c.jsx(Hp,{})]})}const Mxe=Je("/")({component:kxe,beforeLoad:()=>({customLayout:!0})}),Nxe=Je("/partners/feedback")({beforeLoad:()=>({standalonePage:!0})}),Rxe=Je("/pages/$pageId")({beforeLoad:()=>({customLayout:!0})});function Pxe(e){const{text:t,shouldAnimate:n,title:s}=e,o=mM(!1),[r,a]=l.useState(0),i=l.useMemo(()=>{const u=o(),d=B3(t);return xd({contentBlocks:d,delay:u,forceRender:()=>{a(r+1)}})},[o,r,t]);return c.jsxs(c.Fragment,{children:[s&&c.jsx("div",{className:"mb-1 text-foreground-800 text-sm-strong",children:s}),c.jsx("div",{className:"flex flex-col gap-3 text-foreground-700 text-sm",children:c.jsx(bd,{blocks:i,shouldAnimate:n})})]})}const WR=e=>l.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12.0016 1.99902C17.5253 1.99902 22.0031 6.47687 22.0031 12.0006C22.0031 17.5243 17.5253 22.0021 12.0016 22.0021C6.47785 22.0021 2 17.5243 2 12.0006C2 6.47687 6.47785 1.99902 12.0016 1.99902ZM12.0016 3.49902C7.30627 3.49902 3.5 7.3053 3.5 12.0006C3.5 16.6959 7.30627 20.5021 12.0016 20.5021C16.6968 20.5021 20.5031 16.6959 20.5031 12.0006C20.5031 7.3053 16.6968 3.49902 12.0016 3.49902ZM12 10.5C12.4142 10.5 12.75 10.8358 12.75 11.25V16.25C12.75 16.6642 12.4142 17 12 17C11.5858 17 11.25 16.6642 11.25 16.25V11.25C11.25 10.8358 11.5858 10.5 12 10.5ZM12 9C12.5523 9 13 8.55229 13 8C13 7.44772 12.5523 7 12 7C11.4477 7 11 7.44772 11 8C11 8.55229 11.4477 9 12 9Z"})),Jke=Object.freeze(Object.defineProperty({__proto__:null,default:WR},Symbol.toStringTag,{value:"Module"}));function Lxe(e){const{status:t}=e;let n=c.jsx("div",{className:"size-5 pe-1","aria-hidden":"true"});switch(t){case"running":n=c.jsx(it,{className:"size-5"});break;case"failed":n=c.jsx(WR,{className:"size-5"});break;case"completed":n=c.jsx(fh,{className:"size-5"});break}return c.jsx("div",{className:"ps-0.5",children:n})}function Oxe(e){const{items:t,shouldAnimate:n,isComplete:s}=e,{t:o}=Y();return c.jsxs("div",{className:"flex flex-col gap-5 ps-2",children:[t==null?void 0:t.map((r,a)=>c.jsx("div",{className:"flex flex-col",children:c.jsxs(u9,{isLastStep:!1,shouldAnimate:n,stepType:r.type,stepStatus:r.type==="activity"?r.activity.status:void 0,children:[r.type==="chainOfThought"&&c.jsx(Pxe,{title:r.title,text:r.text,shouldAnimate:n}),r.type==="activity"&&c.jsx(Dxe,{activity:r.activity})]})},a)),s&&c.jsx(u9,{isLastStep:!0,shouldAnimate:n,children:c.jsx("div",{className:"text-foreground-700 text-sm",children:c.jsx("strong",{children:o("chat.chainOfThought.done")})})})]})}function Dxe(e){const{activity:t}=e,n=H("ppt-generation");return c.jsx("div",{className:"flex flex-col gap-4 overflow-y-auto",children:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("h3",{className:"text-sm",children:t.title}),n&&t.steps.length>0&&c.jsx("div",{className:"flex flex-col gap-2",children:t.steps.map((s,o)=>c.jsx("div",{className:"flex items-center gap-2 text-sm",children:c.jsx("span",{className:"text-foreground-700",children:s.title})},o))}),t.artifacts.map((s,o)=>c.jsx(tM,{artifact:s},o))]})})}function jxe(e){return e?c.jsx(_m,{className:"relative bottom-0.5 size-4 text-foreground-900"}):c.jsx("div",{className:"size-[9px] rounded-full border-[4.5px] border-foreground-800 bg-foreground-800"})}function u9(e){const{isLastStep:t,shouldAnimate:n,children:s,stepType:o="chainOfThought",stepStatus:r}=e,a=o==="activity"&&r&&r!=="completed";return c.jsxs(ge.div,{className:"relative grid grid-cols-[auto,1fr] items-start gap-4",initial:n?"start":"end",animate:"end",variants:{start:Be,end:i=>({...tt,transition:{delay:i,ease:"easeInOut",duration:1.2}})},children:[c.jsxs("div",{className:F("relative flex h-full w-2 flex-col items-center",t?"mt-1":"mt-1.5"),children:[a?c.jsx(Lxe,{status:r}):jxe(t),!t&&c.jsx("div",{className:F("absolute bottom-0 border-e-[1px] border-foreground-800/40",a?"top-6 ":"top-4")})]}),c.jsx("div",{className:"min-w-0 flex-1",children:s})]})}function Fxe(e){const{chainOfThoughtItems:t,isComplete:n}=e;return c.jsx("div",{className:"flex flex-col p-4",children:c.jsx(phe,{config:{shouldCollapseCode:!0},children:c.jsx(Oxe,{items:t,shouldAnimate:!1,isComplete:n})})})}const Uxe=F("relative rounded-3xl p-4 contrast-more:border-2","shadow-xs transition-shadow safe-hover:shadow-sm focus-visible:shadow-sm","bg-background-100 dark:bg-background-200","safe-hover:before:absolute safe-hover:before:inset-0 safe-hover:before:rounded-3xl safe-hover:before:bg-white/50 dark:safe-hover:before:bg-white/2","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-stroke-900");function $R(e){const{title:t,name:n,iconUrl:s,url:o,mode:r,onClick:a,className:i,variant:u,snippet:d}=e,m=co(o),f=u==="panel"||u==="modal";return c.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",onClick:a,className:F("flex w-full min-w-0 cursor-pointer items-start",u==="modal"?"group/modal-variant":Uxe,i),children:c.jsxs("div",{className:"relative flex min-w-0 grow flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex shrink-0 items-center justify-center rounded",children:s?c.jsx("div",{className:"size-4 rounded bg-white bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url('${s}')`}}):c.jsx(Em,{className:"size-4 text-foreground-650"})}),c.jsx("div",{className:"min-w-0 flex-1 overflow-hidden",children:c.jsx("p",{className:"truncate text-foreground-650 text-sm md:mt-0.5 md:text-xs",children:r==="research"?Ts(m):n})})]}),c.jsx("div",{className:"overflow-hidden text-foreground-900 text-sm-medium group-hover/modal-variant:underline group-focus-visible/modal-variant:underline",children:c.jsx("p",{className:F(u==="row"?"line-clamp-1":"line-clamp-2"),children:t})}),f&&d&&c.jsx("div",{className:"overflow-hidden text-foreground-800 text-sm md:text-xs",children:c.jsx("p",{className:"line-clamp-3",children:d})}),f&&c.jsx("div",{className:"overflow-hidden text-foreground-650 text-sm md:text-xs",children:c.jsx("p",{className:"truncate",children:o})})]})})}function qR(){cn({page:"chat",element:"relatedResultsReferencePanelCard",scenario:"shown"})}function ZR(e,t){Ce({source:"relatedResultsReferencePanelCard",scenario:"openLink",destination:t,conversationId:e})}function Bxe(e){Ce({source:e,scenario:"switchTab"})}function Vxe(e,t,n){D.trackEvent({name:"apiresponse",data:{eventName:"relatedResultsApiFailure",eventInfo_messageId:e,eventInfo_errorMessage:t,...n&&{eventInfo_errorCode:n}}})}function Hxe(e){D.trackEvent({name:"apiresponse",data:{eventName:"relatedResultsZeroResults",eventInfo_messageId:e}})}function zxe(e){const{section:t,label:n,selectedSection:s,onSectionChange:o}=e,r=()=>{Bxe(t==="citations"?"citationsPanelTab":"relatedResultsReferencePanelTab"),o(t)};return c.jsx(re,{title:n,color:s===t?"overlay-dimmed-inverted":"subtle-dimmed-inverted",outline:s===t?"none":"weak",size:"40-base",variant:"rect",onClick:r,children:n})}function Gxe(e){const{sections:t,selectedSection:n,onSectionChange:s}=e,{t:o}=Y(),r=a=>o(a==="citations"?"citationCards.references":"citationCards.relatedResults");return t.length>1&&n&&s?c.jsx("div",{className:"sticky top-0 z-10 flex items-center justify-start gap-2 bg-background-150 pb-3 dark:bg-background-250",children:t.map(a=>c.jsx(zxe,{section:a,label:r(a),selectedSection:n,onSectionChange:s},a))}):null}function Wxe(e){const{citations:t,relatedResults:n,className:s,conversationId:o}=e,r=t.length>0,a=n.length>0,[i,u]=l.useState(r?"citations":"related");if(l.useEffect(()=>{a&&qR()},[a]),!r&&!a)return null;const d=[r?"citations":null,a?"related":null].filter(Boolean),m=i==="citations"?t:n;return c.jsxs("div",{className:F("flex flex-col px-2 pb-4",s),children:[c.jsx(Gxe,{sections:d,selectedSection:i,onSectionChange:u}),c.jsx("div",{className:"flex flex-col gap-5 divide-y divide-foreground-250 dark:divide-foreground-350",children:m.map(({title:f,publisher:p,url:g,iconUrl:C,snippet:v})=>c.jsx("div",{className:"pt-5",children:c.jsx($R,{title:f,name:p??Ts(g),url:g,iconUrl:C??void 0,className:"w-full",variant:"modal",snippet:v,onClick:i==="related"?()=>{ZR(o,g)}:()=>{Fk("panel",o,g)}})},`${i}-${g}`))})]})}function $xe(e){const{citations:t,relatedResults:n,className:s,conversationId:o}=e,{t:r}=Y();if(l.useEffect(()=>{n.length>0&&qR()},[n.length]),t.length===0&&n.length===0)return null;const a=(u,d="citation")=>c.jsx("ul",{className:"flex list-none flex-col gap-4",role:"list",children:u.map(({title:m,publisher:f,url:p,iconUrl:g,snippet:C,index:v})=>c.jsx("li",{children:c.jsx($R,{title:m,name:f??Ts(p),url:p,iconUrl:g??void 0,className:"w-full",variant:"panel",snippet:C,onClick:()=>{d==="relatedResult"?ZR(o,p):Fk("panel",o,p)}})},`${d}-${p}-${v}`))}),i=()=>c.jsx("div",{className:"pointer-events-none sticky top-0 z-20 mb-2 flex h-14 w-full justify-center px-10",children:c.jsx("div",{className:"flex size-full items-center justify-center bg-background-150 p-2",children:c.jsx("h3",{className:"truncate text-center text-foreground-800 text-sm",children:r("citationCards.relatedResults")})})});return c.jsxs("div",{className:F("flex flex-col gap-4 px-4 pb-4",s),children:[t.length>0&&c.jsx("div",{children:a(t,"citation")}),n.length>0&&c.jsxs("div",{children:[i(),a(n,"relatedResult")]})]})}async function qxe(e,t){const n=`/messages/${e}/related-results`;return St(n,KH,{analytics:{anonymousPath:"/messages/{id}/related-results"},parseOptions:{safe:t==null?void 0:t.safe},onFailedRequest:s=>{Vxe(e,s.statusText||"API request failed",s.status.toString())}}).then(s=>{const o=s.data;return o&&o.relatedResults.length===0&&Hxe(e),o})}function Zxe(e,t,n){return Rs({queryKey:["relatedResults",e,t],queryFn:async()=>{const s=await qxe(e);return s==null?void 0:s.relatedResults},enabled:(n==null?void 0:n.enabled)??!!e,staleTime:5*60*1e3})}function Kxe(e){const{data:t,className:n,variant:s}=e,{conversationId:o,messageId:r,targetCitationIds:a}=t,i=M(xt),u=H("see-more-results"),d=i.get(o),m=l.useMemo(()=>d==null?void 0:d.history.find(v=>v.id===r&&v.author==="ai"),[d==null?void 0:d.history,r]),f=l.useMemo(()=>{const v=(m==null?void 0:m.content.filter(b=>b.type==="text").flatMap(b=>b.citations??[]))??[];return a&&a.length>0?v.filter(b=>a.includes(b.url)):v},[m,a]),p=Qv(d),{data:g=[]}=Zxe(r,o,{enabled:!!r&&(u||(m==null?void 0:m.mode)==="search")&&!p}),C=l.useMemo(()=>g.map((v,b)=>({index:(b+1).toString(),title:v.title,url:v.url,iconUrl:v.iconUrl??null,publisher:v.publisher??null,snippet:v.snippet??null})),[g]);return s==="modal"?c.jsx(Wxe,{citations:f,relatedResults:C,className:n,conversationId:o}):c.jsx($xe,{citations:f,relatedResults:C,className:n,conversationId:o})}const Yxe=Ne([w(!0),w(!1)]);S({enabled:Yxe.optional()});async function Qxe(e,t){return(await St(`/healthcare/navigation/provider/${e}`,_H,{query:t,options:{method:"GET",headers:{"Content-Type":"application/json"}}})).data}function Jxe(e,t){const{data:n,isLoading:s,error:o,refetch:r}=Rs({queryKey:["healthcareProvider",e,JSON.stringify(t)],queryFn:()=>Qxe(e,t),enabled:!!e,retry:1});return{data:n,isLoading:s,error:o,refetch:r}}function Gp(e){const{title:t,subtitle:n,children:s}=e;return c.jsxs("section",{className:"flex flex-col gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("h3",{className:"font-medium text-foreground-700 text-sm-strong",children:t}),n&&c.jsx("p",{className:"text-foreground-600 text-sm",children:n})]}),s]})}function Xxe(e){const{education:t}=e,{type:n,name:s,year:o}=t;if(!n&&!o)return c.jsx("span",{children:s});let r,a;return n&&o?(r="answerCards.educationLabelFull",a={type:n,name:s,year:o}):n?(r="answerCards.educationLabelNameAndType",a={type:n,name:s}):(r="answerCards.educationLabelNameAndYear",a={name:s,year:o}),c.jsx(hn,{i18nKey:r,values:a,components:{bold:c.jsx("strong",{})}})}function e8e(e){const{educations:t}=e,{t:n}=Y();return!t||t.length===0?null:c.jsx(Gp,{title:n("answerCards.education"),children:c.jsx("div",{className:"rounded-2xl border-neutral-200 bg-background-300/20 p-4 dark:bg-background-650/5",children:c.jsx("ul",{className:"mt-0 space-y-2",children:t.map((s,o)=>c.jsx("li",{className:"list-none text-foreground-600 text-sm",children:c.jsx(Xxe,{education:s})},o))})})})}const t8e=l.lazy(()=>V(()=>import("./typeahead-ESfLmDG3.js"),__vite__mapDeps([465,1])).then(e=>({default:e.Typeahead})));function n8e(){return c.jsx("div",{className:"w-full rounded-2xl bg-black/5 p-4 text-sm dark:bg-background-450/25",children:c.jsx("div",{className:"h-5 w-48 animate-pulse rounded bg-foreground-550/20"})})}const A0=4;function s8e(e){const{insurances:t}=e,{t:n}=Y(),[s,o]=l.useState(null),[r,a]=l.useState(A0),i=l.useMemo(()=>{const x=new Set((t??[]).map(I=>I.carrierName).filter(Boolean));return Array.from(x).map(I=>({id:I,name:I})).sort((I,_)=>I.name.localeCompare(_.name))},[t]),u=l.useMemo(()=>({groups:[{items:i.map(x=>({id:x.id,displayString:x.name}))}]}),[i]),d=l.useMemo(()=>{const x=new Map;for(const I of i)x.set(I.id,I);return x},[i]),m=l.useCallback(x=>{o(x)},[]),f=l.useCallback(()=>{Ce({source:"insuranceSearch",scenario:"sidePanel",destination:"focus",customData:JSON.stringify({cardType:"healthcare"})})},[]),p=l.useCallback(x=>{const I=d.get(x);I&&(Ce({source:"insuranceSearch",scenario:"sidePanel",destination:"selection",customData:JSON.stringify({cardType:"healthcare",insurerName:I.name})}),m(I))},[d,m]),g=l.useCallback(x=>{const I=(s==null?void 0:s.id)===x.id;return c.jsxs("div",{className:"flex w-full items-center gap-1.5",children:[c.jsx("span",{children:x.displayString}),I&&c.jsx(_m,{className:"size-5"})]})},[s==null?void 0:s.id]);if(!t)return null;if(i.length===0)return c.jsx(Gp,{title:n("answerCards.insuranceTitle"),subtitle:n("answerCards.insuranceSubtitle"),children:c.jsxs("div",{className:"flex flex-row items-center gap-1",children:[c.jsx(nn,{className:"size-6 text-system-red-550"}),c.jsx("span",{children:n("answerCards.insuranceDoesNotAccept")})]})});const C=i.slice(0,r),v=i.length>r,b=r>A0,y=()=>{a(i.length)},E=()=>{a(A0)};return c.jsx(Gp,{title:n("answerCards.insuranceTitle"),subtitle:n("answerCards.insuranceSubtitle"),children:c.jsxs("div",{className:"mb-2 flex flex-col gap-4",children:[c.jsx(l.Suspense,{fallback:c.jsx(n8e,{}),children:c.jsx(t8e,{data:u,renderItem:g,onSelect:p,onFocus:f,placeholder:n("answerCards.insuranceSearchPlaceholder"),className:"w-full"})}),c.jsx(pt,{mode:"wait",children:s&&c.jsxs(ge.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.2,ease:"easeOut"},children:[c.jsx("div",{className:"font-medium text-foreground-700",children:n("answerCards.insuranceSelectionConfirmation",{insurerName:s.name})}),c.jsx("button",{type:"button",onClick:()=>o(null),className:"mt-2 text-foreground-450 underline transition-colors duration-200 text-sm hover:text-foreground-600",children:n("answerCards.insuranceClearSelection")})]},s.id)}),!s&&c.jsxs(c.Fragment,{children:[c.jsx("ul",{className:"ms-2 mt-0 space-y-2 ps-4",children:C.map(x=>c.jsx("li",{className:"list-disc text-foreground-600 text-sm",children:x.name},x.id))}),v&&c.jsx(re,{size:"36-sm",color:"default",title:n("answerCards.insuranceViewAll",{count:i.length}),onClick:y,className:"font-ligatures-none w-full",children:n("answerCards.insuranceViewAll",{count:i.length})}),b&&c.jsx("button",{type:"button",onClick:E,className:"mb-1 text-center text-foreground-450 underline text-sm hover:text-foreground-600 focus:text-foreground-600 focus:outline-none",children:n("answerCards.showLess")})]})]})})}function d9(e){const t=e.trim();if(!t)return t;const n=t.match(/^(?:\+?1)?(\d{3})(\d{3})(\d{4})$/);return n?`(${n[1]}) ${n[2]}-${n[3]}`:t}function Xke(e,t,n){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:e,eventInfo_clickScenario:"healthcareInfoCard",eventInfo_conversationId:pe(De),eventInfo_messageId:t,eventInfo_customData:n}})}function eMe(e,t){return lI(()=>{D.trackEvent({name:"system",data:{eventName:"healthcareInfoCardHover",eventInfo_customData:t,eventInfo_messageId:e,eventInfo_conversationId:pe(De)??""}})})}function tMe(e,t){return lI(()=>{D.trackEvent({name:"system",data:{eventName:"healthcareEntityCardHover",eventInfo_messageId:e,eventInfo_conversationId:pe(De)??"",eventInfo_customData:t}})})}function by(e){const{source:t,providerId:n,destination:s,scenario:o}=e,r=pe(De);Ce({source:t,scenario:o,destination:s,conversationId:r??void 0,customData:JSON.stringify({cardType:"healthcare",...n&&{providerId:n}})})}function nMe(e){by({source:"viewDetailsButton",providerId:e})}function sMe(e,t,n){const s=pe(De);D.trackEvent({name:"interaction",data:{eventName:"healthcareEntityCardScrolled",eventInfo_scrollDepth:e,eventInfo_scrollDepthMax:t,eventInfo_conversationId:s,eventInfo_messageId:n}})}function o8e(e){const{location:t,providerId:n}=e,{address:s,phoneNumber:o}=t,{t:r}=Y(),a=l.useCallback(()=>{o&&(by({source:"phoneButton",providerId:n,scenario:"sidePanel"}),Eo(`tel:${o}`))},[n,o]);return c.jsxs("div",{className:"flex flex-col gap-1.5",children:[o&&c.jsx("p",{className:"text-foreground-600 text-sm",children:d9(o)}),s&&c.jsx("p",{className:"text-foreground-600 text-sm",children:s}),o&&c.jsx(re,{size:"36-sm",color:"default",title:`${r("answerCards.call")} ${d9(o)}`,onClick:a,className:"mt-1.5 w-full",children:r("answerCards.call")})]})}function r8e(e){const{url:t,providerName:n,providerId:s}=e,{t:o}=Y(),r=l.useCallback(()=>{by({source:"websiteButton",providerId:s,destination:t,scenario:"sidePanel"})},[s,t]);return c.jsx(ls,{href:t,title:o("answerCards.visitProviderWebsite"),className:"block truncate text-foreground-700 underline text-sm hover:no-underline","aria-label":o("answerCards.ariaLabel.websiteTo",{place:n}),onClick:r,children:o("answerCards.onlineProfile")})}function a8e(e){const{providerName:t,url:n,location:s,providerId:o,primarySpecialtyTitle:r}=e;return c.jsxs("header",{className:"flex flex-col gap-1.5",children:[c.jsx("h2",{className:"text-foreground-750 text-lg-strong",children:t}),r&&c.jsx("p",{className:"text-foreground-600 text-sm-strong",children:r}),n?c.jsx(r8e,{providerName:t,url:n,providerId:o}):null,s?c.jsx(o8e,{location:s,providerId:o}):null]})}const i8e=4,c8e=10;function l8e(e){const{items:t,initialCount:n=i8e,showMoreInterval:s=c8e,listLabel:o,viewMoreButtonLabel:r}=e,[a,i]=l.useState(n),{t:u}=Y(),d=u("answerCards.viewMore"),m=u("answerCards.showLess"),f=Math.min(a,t.length),p=t.slice(0,f),g=t.length>f,C=f>n,v=l.useCallback(()=>{i(y=>y+s)},[s]),b=l.useCallback(()=>{i(n)},[n]);return t.length===0?null:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("ul",{className:"mt-0 space-y-1 ps-4",role:"list","aria-label":o,children:p.map(y=>c.jsx("li",{className:"list-disc text-foreground-600 text-sm",children:y},y))}),g&&c.jsx(re,{size:"36-sm",color:"default",title:r,"aria-label":r,onClick:v,className:"w-full",children:d}),C&&c.jsx("button",{type:"button",onClick:b,className:"w-full text-center text-foreground-450 underline text-sm hover:text-foreground-600 focus:text-foreground-600 focus:outline-none",children:m})]})}function u8e(e){const{languages:t}=e,{t:n}=Y();return!t||t.length===0?null:c.jsx(Gp,{title:n("answerCards.languages"),children:c.jsx(l8e,{items:t,showMoreInterval:20,listLabel:n("answerCards.languages"),viewMoreButtonLabel:n("answerCards.viewMoreLanguages")})})}function d8e(e){const{data:t}=e,{location:n,name:s,npi:o,professionalCredentials:r,primarySpecialtyTitle:a,url:i}=t,{uuid:u}=n,{t:d}=Y(),{data:m,isLoading:f,error:p}=Jxe(o,{locationUuid:u}),{educations:g,insurances:C,languages:v,dataSourceUrl:b}=m??{},y=[s,...r??[]].filter(Boolean).join(", ");return c.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[c.jsx(a8e,{providerName:y,url:i,location:n,primarySpecialtyTitle:a}),p&&c.jsx("p",{className:"text-foreground-800 text-sm",children:c.jsx("span",{children:d("answerCards.errorLoadingProviderInfo")})}),f&&c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx(Vp,{className:"h-5 w-full rounded-lg"}),c.jsx(Vp,{className:"h-20 w-full rounded-lg"})]}),!f&&!p&&c.jsxs(c.Fragment,{children:[c.jsx(e8e,{educations:g}),c.jsx(s8e,{insurances:C}),c.jsx(u8e,{languages:v}),b&&c.jsx("div",{className:"border-t border-background-900/8 py-7 text-foreground-600 text-sm",children:c.jsx(hn,{i18nKey:"answerCards.healthcareInfoProviderLink",components:{faqLink:c.jsx(fl,{link:b})}})})]})]})}function m8e(e){const{data:t,variant:n,className:s,messageId:o}=e,r=l.useId(),a=l.useRef(null);return c.jsx("div",{className:F("flex flex-col gap-3",n==="panel"&&"px-1",s),ref:a,children:t.map(([i,u],d)=>{const m=`${r}-source-${d}`;return c.jsxs("section",{className:"mb-4","aria-labelledby":m,children:[c.jsx("div",{id:m,className:F("px-4 pb-4 text-foreground-600 text-sm-medium",n==="modal"&&"mt-3"),children:c.jsx(LM,{source:i,messageId:o})}),c.jsx("ul",{"aria-labelledby":m,role:"list",className:"m-0 flex list-none flex-col gap-1 p-0",children:u.map(f=>c.jsx("li",{children:c.jsx(RM,{artifact:f,portalContainerRef:a,showActions:!0,messageId:o})},f.id))})]},`${i}-${d}`)})})}const f8e=l.lazy(()=>V(()=>import("./product-details-modal-CDHrI0py.js"),__vite__mapDeps([466,1,324,325,308,309,449,326,380,327,328,450,451,452,453,448,323,454,330,438,467,314,315,316,317,318,468,379,329,469,377,378,376,343,433,424])));function p8e(e){const{data:{cardData:t,messageId:n}}=e;return c.jsx(l.Suspense,{fallback:null,children:c.jsx(f8e,{cardData:t,messageId:n,onClose:()=>Il(null),viewMode:"side-pane"})})}function m9(e){var u,d;const{variant:t}=e,n=kC(),{t:s}=Y(),o=bt({breakpoint:"lg"}),r=H("sidebar-narrow"),a=l.useRef(null);if(qN(),$i(a),N3({scrollableRef:a,source:(u=n==null?void 0:n.trackingOptions)==null?void 0:u.scrollSource,customData:(d=n==null?void 0:n.trackingOptions)==null?void 0:d.customData}),!n)return null;const i=()=>{var m;$t({source:"closeConversationPanelButton",messageId:(m=n.trackingOptions)==null?void 0:m.messageId}),Il(null)};return t==="modal"?c.jsxs(Ho,{isOpen:!!n,onClose:i,className:"relative mx-6 h-conversation-modal w-conversation-modal max-w-conversation-modal p-4",trapFocus:!0,children:[c.jsx("div",{className:"pointer-events-none absolute start-0 w-full pb-1.5 pe-16 ps-6 pt-0.5",children:c.jsx(f9,{panelData:n,variant:"modal"})}),c.jsx("div",{className:"t-custom-scrollbar h-full overflow-auto",children:c.jsx(p9,{panelData:n,variant:"modal"})})]}):c.jsx(gd,{className:F("shrink-0",r&&o?"w-secondary-panel-slim":"w-secondary-panel"),children:c.jsxs("div",{ref:a,className:"t-custom-scrollbar size-full space-y-[60px] overflow-auto",tabIndex:-1,children:[c.jsx(Th,{start:c.jsx(re,{title:s("common.closeSidePaneTitle"),color:"subtle-dimmed-inverted",size:"36-sm",variant:"square",onClick:i,tooltip:!0,children:c.jsx(nn,{className:"size-5"})}),middle:c.jsx(f9,{panelData:n,variant:"panel"})}),c.jsx(p9,{panelData:n,variant:"panel"})]})})}function f9(e){const{panelData:t,variant:n}=e,s=h8e({panelData:t,variant:n});return c.jsx("h2",{className:"pointer-events-none block min-w-0 flex-1 truncate text-base-medium md:text-sm",children:s})}function h8e(e){const{panelData:t,variant:n}=e,{t:s}=Y();switch(t.type){case"devModeMessageInfo":return"Inspect message";case"chainOfThought":return s("chat.chainOfThought.title");case"citations":return n==="modal"?s("citationCards.allLinks","All links"):s("citationCards.references");case"shoppingProductDetails":return s("product.productDetailsPage.productDetails","Product details");case"healthcareEntity":return null;case"personalData":{const{data:o}=t;return s("connector.search.title",{resultsCount:o.reduce((a,[,i])=>a+i.length,0)})}case"__TODO___REPLACE_ME__":throw new Error("ConversationPanelTitle: Unimplemented type")}return null}function p9(e){var s;const{panelData:t,variant:n}=e;switch(t.type){case"devModeMessageInfo":return OB;case"chainOfThought":return c.jsx(Fxe,{chainOfThoughtItems:t.data.chainOfThoughtItems,isComplete:t.data.isComplete});case"citations":return c.jsx(Kxe,{data:t.data,variant:n});case"shoppingProductDetails":return c.jsx(p8e,{data:t.data},t.data.cardData.offerId);case"healthcareEntity":return c.jsx(d8e,{data:t.data.cardData},t.data.cardData.npi);case"personalData":return c.jsx(m8e,{data:t.data,variant:n,messageId:(s=t.trackingOptions)==null?void 0:s.messageId});case"__TODO___REPLACE_ME__":throw new Error("ConversationPanelContent: Unimplemented type")}return null}const yf=8;function g8e(e){const{children:t,isOpen:n,panelWidth:s}=e,o=qi(),r=l.useRef(!0),a=bt({breakpoint:"lg"}),i=H("sidebar-narrow");l.useEffect(()=>{r.current=!1},[]);const u=!r.current||!n;return c.jsx(ge.div,{className:"relative h-full overflow-hidden will-change-auto",initial:{width:n?s:0,marginLeft:n&&!o?yf:0,marginRight:n&&o?yf:0},animate:{width:n?s:0,marginLeft:n&&!o?yf:0,marginRight:n&&o?yf:0},transition:u?mn:{duration:0},children:n&&c.jsx(ge.div,{className:F("absolute end-0 size-full",i&&a?"sm:w-secondary-panel-slim":"sm:w-secondary-panel"),initial:u?"initial":"animate",animate:"animate",exit:"exit",variants:{initial:Be,animate:tt,exit:Be},transition:u?mn:{duration:0},children:t})})}function v8e(){const e=gh(),t=ae.instance().config().supportsChatDetails;return e&&!!t}function C8e(){var n;const e=bt({breakpoint:"md"}),t=!!((n=ae.instance().config().uiOverrides)!=null&&n.alwaysShowConversationPanelAsModal);return e||t}const y8e=vO("/chats/$conversationId");function b8e(e){const{disableStickyHeader:t,reactionsToDisable:n}=e,{conversationId:s}=y8e.useParams(),o=v8e(),r=kC(),a=C8e(),i=se(De),u=M(bn),d=H("conversation-id-sync"),m=gh(),f=PR();if(l.useEffect(()=>{d&&i(s)},[s,i,d]),l.useEffect(()=>{u!=null&&u.group&&Fn.connect()},[u==null?void 0:u.group]),l.useEffect(()=>()=>{Il(null)},[]),o){const p=!!r,g=a?p&&c.jsx(m9,{variant:"modal"}):c.jsx(g8e,{isOpen:p,panelWidth:f,children:c.jsx(m9,{variant:"panel"})});return c.jsxs(C1e,{enabled:!0,children:[c.jsxs(gd,{className:"relative h-full flex-1 overflow-hidden will-change-auto",children:[c.jsx(Ff,{disableStickyHeader:t,reactionsToDisable:n}),c.jsx(L5,{}),c.jsx(Hp,{}),c.jsx(zp,{})]}),g]})}return m?c.jsxs(gd,{className:"relative h-full flex-1 overflow-hidden will-change-auto",children:[c.jsx(Ff,{disableStickyHeader:t,reactionsToDisable:n}),c.jsx(L5,{}),c.jsx(Hp,{}),c.jsx(zp,{})]}):c.jsx(Ff,{disableStickyHeader:t,reactionsToDisable:n})}const x8e=Je("/chats/$conversationId")({component:b8e,beforeLoad:()=>({customLayout:!Rt("kill-chat-layout-v2")})}),S8e=Je("/shares/pages/$shareId")({beforeLoad:()=>({customLayout:!0})}),E8e=Je("/chats_/$conversationId/talk")({beforeLoad:()=>({customLayout:!Rt("kill-chat-layout-v2")})}),w8e=Je("/topic-selection")(),I8e=Je("/shopping")(),_8e=Je("/login")(),T8e=Je("/library")(),A8e=Je("/imagine")(),k8e=Je("/gaming")(),M8e=Je("/gallery")(),N8e=Je("/daily")(),R8e=Je("/agents")(),P8e=Je("/referrals/")(),L8e=Je("/labs_/")(),O8e=Je("/fallrelease/")(),D8e=Je("/subscription/start")(),j8e=Je("/subscription/manage")(),F8e=Je("/shares/$conversationId")(),U8e=Je("/research/$researchId")(),B8e=Je("/referrals/rules")(),V8e=Je("/pro/subscribe")(),H8e=Je("/memory/narrative")(),z8e=Je("/imagine/$galleryItemId")(),G8e=Je("/gallery/$galleryItemId")(),W8e=Je("/e/sol")(),$8e=Je("/e/so")(),q8e=Je("/connector/callback")(),Z8e=Je("/chats/private")(),K8e=Je("/campaigns/$campaignId")(),Y8e=Je("/labs_/portrait/")(),Q8e=Je("/labs_/career-coach/")(),J8e=Je("/labs_/audio-expression/")(),X8e=Je("/shares/tasks/$shareId")(),e9e=Je("/shares/podcasts/$shareId")(),t9e=Je("/shares/3d-generations/$shareId")(),n9e=Je("/pro/redeem/$redeemCode")(),s9e=Je("/pro/ewallet/return")(),o9e=Je("/podcasts/$podcastType/$podcastId")(),r9e=Je("/labs_/portrait/talk")(),a9e=Je("/labs_/portrait/gallery")(),i9e=Je("/labs_/experiments/$experimentAlias")(),c9e=Je("/labs_/career-coach/report")(),l9e=Je("/labs_/career-coach/mock-interview")(),u9e=Je("/discover/{-$modalType}/{-$modalId}")(),d9e=Je("/conversations/join/$token")(),m9e=Je("/labs_/portrait/future-self/")(),f9e=Je("/labs_/experiments/3d-generations/")(),p9e=Je("/labs_/portrait/future-self/create")(),h9e=Je("/labs_/experiments/3d-generations/my-creations")(),g9e=w8e.update({id:"/topic-selection",path:"/topic-selection",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./topic-selection.lazy-CtPXZBG_.js"),__vite__mapDeps([470,1])).then(e=>e.Route)),v9e=I8e.update({id:"/shopping",path:"/shopping",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./shopping.lazy-B9-Ukm6X.js"),__vite__mapDeps([471,1,454,380,326,433,424,449,472,324,325,308,309,327,328,322,323,469,379,329,377,378])).then(e=>e.Route)),C9e=_8e.update({id:"/login",path:"/login",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./login.lazy-BSnlLQM4.js"),__vite__mapDeps([473,1,408])).then(e=>e.Route)),y9e=T8e.update({id:"/library",path:"/library",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./library.lazy-DNlxHNmr.js"),__vite__mapDeps([474,1,475,476,477,478,479,480,442,443,444,369,445,481,482,483,362])).then(e=>e.Route)),KR=A8e.update({id:"/imagine",path:"/imagine",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./imagine._galleryItemId.lazy-CZAgLBD_.js").then(e=>e.i),__vite__mapDeps([484,1,485,486,487,488,489,490,491,483,362,418,421])).then(e=>e.Route)),b9e=k8e.update({id:"/gaming",path:"/gaming",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./gaming.lazy-Bwrd6bAY.js"),__vite__mapDeps([492,1,493,336,337])).then(e=>e.Route)),YR=M8e.update({id:"/gallery",path:"/gallery",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./gallery._galleryItemId.lazy-CrmHEoT-.js").then(e=>e.g),__vite__mapDeps([494,1,485,486,487,488,489,490,491,483,362,418,421])).then(e=>e.Route)),x9e=N8e.update({id:"/daily",path:"/daily",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./daily.lazy-B3DP2Cro.js"),__vite__mapDeps([495,1,496,497,498,499,500,501,502,503,504,505,396,443,506,444])).then(e=>e.Route)),S9e=R8e.update({id:"/agents",path:"/agents",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./agents.lazy-BOiDXjaC.js"),__vite__mapDeps([507,1])).then(e=>e.Route)),E9e=Mxe.update({id:"/",path:"/",getParentRoute:()=>Xe}),w9e=P8e.update({id:"/referrals/",path:"/referrals/",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./index.lazy-C001kU32.js"),__vite__mapDeps([508,1,332,315,331,334,509,510,511,512])).then(e=>e.Route)),I9e=L8e.update({id:"/labs_/",path:"/labs/",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./index.lazy-DCHrotUH.js"),__vite__mapDeps([513,1,493,514])).then(e=>e.Route)),_9e=O8e.update({id:"/fallrelease/",path:"/fallrelease/",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./index.lazy-C0kI_3Ay.js"),__vite__mapDeps([515,1])).then(e=>e.Route)),T9e=D8e.update({id:"/subscription/start",path:"/subscription/start",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./subscription.start.lazy-D7vq01YT.js"),__vite__mapDeps([516,1])).then(e=>e.Route)),A9e=j8e.update({id:"/subscription/manage",path:"/subscription/manage",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./subscription.manage.lazy-Cl7C5P0c.js"),__vite__mapDeps([517,1,365,304])).then(e=>e.Route)),k9e=F8e.update({id:"/shares/$conversationId",path:"/shares/$conversationId",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./shares._conversationId.lazy-4Ld18ygc.js"),__vite__mapDeps([518,1])).then(e=>e.Route)),M9e=U8e.update({id:"/research/$researchId",path:"/research/$researchId",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./research._researchId.lazy-DCazggvq.js"),__vite__mapDeps([519,1,439,437,438,434,440,520,521,481,482,483,362])).then(e=>e.Route)),N9e=B8e.update({id:"/referrals/rules",path:"/referrals/rules",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./rules.lazy-CiG5_vRq.js"),__vite__mapDeps([522,1,315,334,335,523,512])).then(e=>e.Route)),R9e=V8e.update({id:"/pro/subscribe",path:"/pro/subscribe",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./pro.subscribe.lazy-DfQbPle2.js"),__vite__mapDeps([524,1,316,317,318,525,364,526,527,528,529,312,309,321,530,531,532,467,314,315,468,533,534,535,536,537,538,539,540,541,336,337,542,395,543])).then(e=>e.Route)),P9e=H8e.update({id:"/memory/narrative",path:"/memory/narrative",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./memory.narrative.lazy-PZBy-HC3.js"),__vite__mapDeps([544,1,338])).then(e=>e.Route)),L9e=z8e.update({id:"/$galleryItemId",path:"/$galleryItemId",getParentRoute:()=>KR}).lazy(()=>V(()=>import("./imagine._galleryItemId.lazy-CZAgLBD_.js").then(e=>e.a),__vite__mapDeps([484,1,485,486,487,488,489,490,491,483,362,418,421])).then(e=>e.Route)),O9e=G8e.update({id:"/$galleryItemId",path:"/$galleryItemId",getParentRoute:()=>YR}).lazy(()=>V(()=>import("./gallery._galleryItemId.lazy-CrmHEoT-.js").then(e=>e.a),__vite__mapDeps([494,1,485,486,487,488,489,490,491,483,362,418,421])).then(e=>e.Route)),D9e=W8e.update({id:"/e/sol",path:"/e/sol",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./e.sol.lazy-B0s3aLYS.js"),__vite__mapDeps([545,1])).then(e=>e.Route)),j9e=$8e.update({id:"/e/so",path:"/e/so",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./e.so.lazy-Ci6xLu9N.js"),__vite__mapDeps([546,1])).then(e=>e.Route)),F9e=q8e.update({id:"/connector/callback",path:"/connector/callback",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./connector.callback.lazy-CQEXIkLj.js"),__vite__mapDeps([547,1])).then(e=>e.Route)),U9e=Z8e.update({id:"/chats/private",path:"/chats/private",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./chats.private.lazy-Xvauu3Bp.js"),__vite__mapDeps([548,1])).then(e=>e.Route)),B9e=K8e.update({id:"/campaigns/$campaignId",path:"/campaigns/$campaignId",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./campaigns._campaignId.lazy-DdxvQc7L.js"),__vite__mapDeps([549,1])).then(e=>e.Route)),V9e=Nxe.update({id:"/partners/feedback",path:"/partners/feedback",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./partners.feedback.lazy-KdpHXT7b.js"),__vite__mapDeps([550,1,551])).then(e=>e.Route)),H9e=Rxe.update({id:"/pages/$pageId",path:"/pages/$pageId",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./pages._pageId.lazy-D6pwkz3s.js"),__vite__mapDeps([552,1,553,476,477,353,367,554,555,556,557,558,559,412,560,441,561,562,563,501,564,520,565,478,566])).then(e=>e.Route)),z9e=x8e.update({id:"/chats/$conversationId",path:"/chats/$conversationId",getParentRoute:()=>Xe}),G9e=Y8e.update({id:"/labs_/portrait/",path:"/labs/portrait/",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./index.lazy-CI10m7_v.js"),__vite__mapDeps([567,1,568,569,570])).then(e=>e.Route)),W9e=Q8e.update({id:"/labs_/career-coach/",path:"/labs/career-coach/",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./mock-interview.lazy-BD4lXo3U.js").then(e=>e.i),__vite__mapDeps([571,1,458,459])).then(e=>e.Route)),$9e=J8e.update({id:"/labs_/audio-expression/",path:"/labs/audio-expression/",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./index.lazy-DlIEjFhG.js"),__vite__mapDeps([572,1,336,337,573,393,394,392,396])).then(e=>e.Route)),q9e=X8e.update({id:"/shares/tasks/$shareId",path:"/shares/tasks/$shareId",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./shares.tasks._shareId.lazy-Bk2RYtnS.js"),__vite__mapDeps([574,1,564,354,482,437,438,521])).then(e=>e.Route)),Z9e=e9e.update({id:"/shares/podcasts/$shareId",path:"/shares/podcasts/$shareId",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./shares.podcasts._shareId.lazy-DjwnNRvd.js"),__vite__mapDeps([575,1,443,444,504,505])).then(e=>e.Route)),K9e=t9e.update({id:"/shares/3d-generations/$shareId",path:"/shares/3d-generations/$shareId",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./shares.3d-generations._shareId.lazy-_GIecbTu.js"),__vite__mapDeps([576,1,577,578,491,579,493,489,490,580])).then(e=>e.Route)),Y9e=n9e.update({id:"/pro/redeem/$redeemCode",path:"/pro/redeem/$redeemCode",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./pro.redeem._redeemCode.lazy-Bg9UeqZ_.js"),__vite__mapDeps([581,1])).then(e=>e.Route)),Q9e=s9e.update({id:"/pro/ewallet/return",path:"/pro/ewallet/return",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./pro.ewallet.return.lazy-Qi319rlM.js"),__vite__mapDeps([582,1,542,395,364])).then(e=>e.Route)),J9e=o9e.update({id:"/podcasts/$podcastType/$podcastId",path:"/podcasts/$podcastType/$podcastId",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./podcasts._podcastType._podcastId.lazy-Bc-6xAVK.js"),__vite__mapDeps([583,1,496,497,498,499,500,501,502,503,504,505,396,443,506,444])).then(e=>e.Route)),X9e=r9e.update({id:"/labs_/portrait/talk",path:"/labs/portrait/talk",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./talk.lazy-umDRrR1G.js"),__vite__mapDeps([584,1,585,586,336,337,587,578,464,588])).then(e=>e.Route)),e7e=a9e.update({id:"/labs_/portrait/gallery",path:"/labs/portrait/gallery",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./gallery.lazy-B0_Giqo6.js"),__vite__mapDeps([589,1,568,569,570])).then(e=>e.Route)),t7e=i9e.update({id:"/labs_/experiments/$experimentAlias",path:"/labs/experiments/$experimentAlias",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./experiments._experimentAlias.lazy-CQTE4oNS.js").then(e=>e.e),__vite__mapDeps([590,1,393,394,493,514])).then(e=>e.Route)),n7e=c9e.update({id:"/labs_/career-coach/report",path:"/labs/career-coach/report",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./mock-interview.lazy-BD4lXo3U.js").then(e=>e.r),__vite__mapDeps([571,1,458,459])).then(e=>e.Route)),s7e=l9e.update({id:"/labs_/career-coach/mock-interview",path:"/labs/career-coach/mock-interview",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./mock-interview.lazy-BD4lXo3U.js").then(e=>e.m),__vite__mapDeps([571,1,458,459])).then(e=>e.Route)),o7e=u9e.update({id:"/discover/{-$modalType}/{-$modalId}",path:"/discover/{-$modalType}/{-$modalId}",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./discover._-_modalType_._-_modalId_.lazy-CksPN7Ee.js"),__vite__mapDeps([591,1])).then(e=>e.Route)),r7e=d9e.update({id:"/conversations/join/$token",path:"/conversations/join/$token",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./conversations.join._token.lazy-BI_N0jlN.js"),__vite__mapDeps([592,1,417,339])).then(e=>e.Route)),a7e=S8e.update({id:"/shares/pages/$shareId",path:"/shares/pages/$shareId",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./shares.pages._shareId.lazy-pBfZZYvH.js"),__vite__mapDeps([593,1,566,553,476,477,353,367,554,555,556,557,558,559,412,560,441,561,562,563,501,564,520,565,479,594])).then(e=>e.Route)),i7e=E8e.update({id:"/chats_/$conversationId/talk",path:"/chats/$conversationId/talk",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./chats_._conversationId.talk.lazy-CH-SnYa4.js"),__vite__mapDeps([595,1,586,336,337,587,578,464,588])).then(e=>e.Route)),c7e=m9e.update({id:"/labs_/portrait/future-self/",path:"/labs/portrait/future-self/",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./index.lazy-BnKzTktL.js"),__vite__mapDeps([596,1,569])).then(e=>e.Route)),l7e=f9e.update({id:"/labs_/experiments/3d-generations/",path:"/labs/experiments/3d-generations/",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./my-creations.lazy-Cf7W6k4H.js").then(e=>e.i),__vite__mapDeps([597,1,577,578,491,579,493,505,560,403,598,599,573,483,362,580,337,497,498,499,500,600])).then(e=>e.Route)),u7e=p9e.update({id:"/labs_/portrait/future-self/create",path:"/labs/portrait/future-self/create",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./create.lazy-CSMo7x40.js"),__vite__mapDeps([601,1,585,586,336,337,587,578,464,588])).then(e=>e.Route)),d7e=h9e.update({id:"/labs_/experiments/3d-generations/my-creations",path:"/labs/experiments/3d-generations/my-creations",getParentRoute:()=>Xe}).lazy(()=>V(()=>import("./my-creations.lazy-Cf7W6k4H.js").then(e=>e.m),__vite__mapDeps([597,1,577,578,491,579,493,505,560,403,598,599,573,483,362,580,337,497,498,499,500,600])).then(e=>e.Route)),m7e={GalleryGalleryItemIdLazyRoute:O9e},f7e=YR._addFileChildren(m7e),p7e={ImagineGalleryItemIdLazyRoute:L9e},h7e=KR._addFileChildren(p7e),g7e={IndexRoute:E9e,AgentsLazyRoute:S9e,DailyLazyRoute:x9e,GalleryLazyRoute:f7e,GamingLazyRoute:b9e,ImagineLazyRoute:h7e,LibraryLazyRoute:y9e,LoginLazyRoute:C9e,ShoppingLazyRoute:v9e,TopicSelectionLazyRoute:g9e,ChatsConversationIdRoute:z9e,PagesPageIdRoute:H9e,PartnersFeedbackRoute:V9e,CampaignsCampaignIdLazyRoute:B9e,ChatsPrivateLazyRoute:U9e,ConnectorCallbackLazyRoute:F9e,ESoLazyRoute:j9e,ESolLazyRoute:D9e,MemoryNarrativeLazyRoute:P9e,ProSubscribeLazyRoute:R9e,ReferralsRulesLazyRoute:N9e,ResearchResearchIdLazyRoute:M9e,SharesConversationIdLazyRoute:k9e,SubscriptionManageLazyRoute:A9e,SubscriptionStartLazyRoute:T9e,FallreleaseIndexLazyRoute:_9e,LabsIndexLazyRoute:I9e,ReferralsIndexLazyRoute:w9e,ChatsConversationIdTalkRoute:i7e,SharesPagesShareIdRoute:a7e,ConversationsJoinTokenLazyRoute:r7e,DiscoverModalTypeModalIdLazyRoute:o7e,LabsCareerCoachMockInterviewLazyRoute:s7e,LabsCareerCoachReportLazyRoute:n7e,LabsExperimentsExperimentAliasLazyRoute:t7e,LabsPortraitGalleryLazyRoute:e7e,LabsPortraitTalkLazyRoute:X9e,PodcastsPodcastTypePodcastIdLazyRoute:J9e,ProEwalletReturnLazyRoute:Q9e,ProRedeemRedeemCodeLazyRoute:Y9e,Shares3dGenerationsShareIdLazyRoute:K9e,SharesPodcastsShareIdLazyRoute:Z9e,SharesTasksShareIdLazyRoute:q9e,LabsAudioExpressionIndexLazyRoute:$9e,LabsCareerCoachIndexLazyRoute:W9e,LabsPortraitIndexLazyRoute:G9e,LabsExperiments3dGenerationsMyCreationsLazyRoute:d7e,LabsPortraitFutureSelfCreateLazyRoute:u7e,LabsExperiments3dGenerationsIndexLazyRoute:l7e,LabsPortraitFutureSelfIndexLazyRoute:c7e},v7e=Xe._addFileChildren(g7e)._addFileTypes();let k0=null;function C7e({isEntryServerOrIsGetRouter:e}){return CO({routeTree:v7e})}function Ma(){return k0||(k0=C7e({isEntryServerOrIsGetRouter:!0})),k0}const y7e=new yO({defaultOptions:{queries:{retry:0,refetchOnWindowFocus:!1}}}),b7e=Ma();function x7e(){return c.jsx(AF,{queryClient:y7e,children:c.jsx(bO,{router:b7e})})}(function(){const e="onabort onactivate onactivateinvisible onafterprint onafterupdate onanimationcancel onanimationend onanimationiteration onanimationstart onariarequest onauxclick onbeforeactivate onbeforecopy onbeforecut onbeforedeactivate onbeforeeditfocus onbeforepaste onbeforeprint onbeforeunload onbegin onblur onbounce oncancel oncanplay oncanplaythrough oncellchange onchange onclick onclose oncommand oncontextmenu oncontrolselect oncopy oncuechange oncut ondataavailable ondatasetchanged ondatasetcomplete ondblclick ondeactivate ondrag ondragdrop ondragend ondragenter ondragexit ondragleave ondragover ondragstart ondrop ondurationchange onemptied onend onended onerror onerrorupdate onexit onfilterchange onfinish onfocus onfocusin onfocusout onformdata onfullscreenchange onfullscreenerror ongotpointercapture onhelp oninput oninvalid onkeydown onkeypress onkeyup onlayoutcomplete onload onloadeddata onloadedmetadata onloadend onloadstart onlosecapture onlostpointercapture onmediacomplete onmediaerror onmessage onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup onmousewheel onmove onmoveend onmovestart onmozfullscreenchange onmozfullscreenerror onmscontentzoom onmsgesturechange onmsgesturedoubletap onmsgestureend onmsgesturehold onmsgesturestart onmsgesturetap onmsgotpointercapture onmsinertiastart onmslostpointercapture onmsmanipulationstatechanged onmspointercancel onmspointerdown onmspointerenter onmspointerleave onmspointermove onmspointerout onmspointerover onmspointerup onoffline ononline onoutofsync onoverscroll onpaste onpause onplay onplaying onpointercancel onpointerdown onpointerenter onpointerleave onpointermove onpointerout onpointerover onpointerrawupdate onpointerup onprogress onpropertychange onratechange onreadystatechange onrepeat onreset onresize onresizeend onresizestart onresume onreverse onrowdelete onrowenter onrowexit onrowinserted onscroll onscrollend onsearch onseek onseeked onseeking onselect onselectionchange onselectstart onshow onstalled onstart onstop onstorage onsubmit onsuspend onsynchrestored ontimeerror ontimeupdate ontoggle ontrackchange ontransitioncancel ontransitionend ontransitionrun ontransitionstart onunload onurlflip onvolumechange onwaiting onwebkitanimationend onwebkitanimationiteration onwebkitanimationstart onwebkitfullscreenchange onwebkitfullscreenerror onwebkittransitionend onwheel".split(" ");function t(){if(typeof window<"u"){const f=[];for(const p in HTMLElement.prototype)p.slice(0,2)==="on"&&f.push(p);return f}return e}const n=typeof window<"u",s=()=>{throw new TypeError("undefined conversion")},o=()=>null,{toLowerCase:r,toUpperCase:a}=String.prototype;function i(){throw new TypeError("Illegal constructor")}function u(){throw new TypeError("Illegal constructor")}const{l:d}=function(){function f(oe){let ie=$.get(oe);return ie===void 0&&(ie=x(null),$.set(oe,ie)),ie}function p(oe){const ie=A(oe);if(ie==null||A(ie)!==k)throw Error();for(const ee of T(ie))I(oe,ee,{value:oe[ee]});return oe}function g(oe,ie){_(oe.prototype),delete oe.name,I(oe,"name",{value:ie})}function C(oe){return ie=>ie instanceof oe&&$.has(ie)}function v(oe,ie){function ee(Pe,Ve){const Qe=ie[Ve]||(oe=="default"?o:s),st=_(new Pe(U,oe));return _({[Ve](ve,...xe){if(ve=Qe(""+ve,...xe),ve==null){if(oe=="default")return ve;ve=""}return ve=""+ve,xe=_(x(st)),f(xe).v=ve,xe}}[Ve])}const me=x(i.prototype);for(const Pe of T(Me))me[Pe]=ee(Me[Pe],Pe);return I(me,"name",{value:oe,writable:!1,configurable:!1,enumerable:!0}),_(me)}function b(oe,ie,ee,me="",Pe=""){if(oe=a.apply(String(oe)),(me=Pe||me)||(me="http://www.w3.org/1999/xhtml"),me=R.apply(K,[me])?K[me]:null){if(R.apply(me,[oe])&&me[oe]&&R.apply(me[oe][ie],[ee])&&me[oe][ie][ee])return me[oe][ie][ee];if(R.apply(me,["*"])&&R.apply(me["*"][ie],[ee])&&me["*"][ie][ee])return me["*"][ie][ee]}}function y(){return ne}const{assign:E,create:x,defineProperty:I,freeze:_,getOwnPropertyNames:T,getPrototypeOf:A,prototype:k}=Object,{hasOwnProperty:R}=k,{forEach:P,push:B}=Array.prototype,U=Symbol(),$=p(new WeakMap),Q=p([]),te=p([]);let X=!0,ne=null,q=!1;class Z{constructor(ie,ee){if(ie!==U)throw Error("cannot call the constructor");I(this,"policyName",{value:ee,enumerable:!0})}toString(){return f(this).v}valueOf(){return f(this).v}}class J extends Z{}g(J,"TrustedScriptURL");class W extends Z{}g(W,"TrustedHTML");class le extends Z{}g(le,"TrustedScript"),g(Z,"TrustedType");const _e=_(x(new W(U,"")));f(_e).v="";const Ae=_(x(new le(U,"")));f(Ae).v="";const K={"http://www.w3.org/1999/xhtml":{EMBED:{attributes:{src:J.name}},IFRAME:{attributes:{srcdoc:W.name}},OBJECT:{attributes:{data:J.name,codebase:J.name}},SCRIPT:{attributes:{src:J.name,text:le.name},properties:{innerText:le.name,textContent:le.name,text:le.name}},"*":{attributes:{},properties:{innerHTML:W.name,outerHTML:W.name}}},"http://www.w3.org/2000/svg":{"*":{attributes:{},properties:{}}}};var be={codebase:"codeBase",formaction:"formAction"};!n||"srcdoc"in HTMLIFrameElement.prototype||delete K["http://www.w3.org/1999/xhtml"].IFRAME.attributes.srcdoc;for(const oe of Object.keys(K["http://www.w3.org/1999/xhtml"])){K["http://www.w3.org/1999/xhtml"][oe].properties||(K["http://www.w3.org/1999/xhtml"][oe].properties={});for(const ie of Object.keys(K["http://www.w3.org/1999/xhtml"][oe].attributes))K["http://www.w3.org/1999/xhtml"][oe].properties[be[ie]?be[ie]:ie]=K["http://www.w3.org/1999/xhtml"][oe].attributes[ie]}for(const oe of t())K["http://www.w3.org/1999/xhtml"]["*"].attributes[oe]="TrustedScript",K["http://www.w3.org/2000/svg"]["*"].attributes[oe]="TrustedScript";const Me={createHTML:W,createScriptURL:J,createScript:le},je=Me.hasOwnProperty;return be=x(u.prototype),E(be,{createPolicy:function(oe,ie){if(!oe.match(/^[-#a-zA-Z0-9=_/@.%]+$/g))throw new TypeError("Policy "+oe+" contains invalid characters.");if(q&&te.indexOf(oe)===-1&&te.indexOf("*")===-1)throw new TypeError("Policy "+oe+" disallowed.");if(oe==="default"&&ne)throw new TypeError("Policy "+oe+" already exists.");if(q&&!X&&Q.indexOf(oe)!==-1)throw new TypeError("Policy "+oe+" exists.");Q.push(oe);const ee=x(null);if(ie&&typeof ie=="object")for(const me of T(ie))je.call(Me,me)&&(ee[me]=ie[me]);else console.warn("trustedTypes.createPolicy "+oe+" was given an empty policy");return _(ee),ie=v(oe,ee),oe==="default"&&(ne=ie),ie},h:C(W),j:C(J),i:C(le),c:function(oe,ie,ee="",me=""){return ie=r.apply(String(ie)),b(oe,"attributes",ie,ee,me)||null},f:function(oe,ie,ee=""){return b(oe,"properties",String(ie),ee)||null},g:function(oe=""){if(!oe)try{oe=document.documentElement.namespaceURI}catch{oe="http://www.w3.org/1999/xhtml"}return(oe=K[oe])?JSON.parse(JSON.stringify(oe)):{}},a:_e,b:Ae,o:ne,TrustedHTML:W,TrustedScriptURL:J,TrustedScript:le}),I(be,"defaultPolicy",{get:y,set:()=>{}}),{l:_(be),w:function(oe,ie){q=!0,te.length=0,P.call(oe,ee=>{B.call(te,""+ee)}),X=ie,Q.length=0},m:function(){q=!1},s:y,u:function(){ne=null,Q.splice(Q.indexOf("default"),1)}}}();if(typeof window<"u"&&(window.TrustedTypes&&typeof window.trustedTypes>"u"&&(window.trustedTypes=Object.freeze(window.TrustedTypes)),typeof window.trustedTypes>"u")){var m=Object.create(u.prototype);Object.assign(m,{isHTML:d.h,isScriptURL:d.j,isScript:d.i,createPolicy:d.createPolicy,getAttributeType:d.c,getPropertyType:d.f,getTypeMapping:d.g,emptyHTML:d.a,emptyScript:d.b,_isPolyfill_:!0}),Object.defineProperty(m,"defaultPolicy",Object.getOwnPropertyDescriptor(d,"defaultPolicy")||{}),window.trustedTypes=Object.freeze(m),window.TrustedHTML=d.TrustedHTML,window.TrustedScriptURL=d.TrustedScriptURL,window.TrustedScript=d.TrustedScript,window.TrustedTypePolicy=i,window.TrustedTypePolicyFactory=u}}).call(void 0);/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */const{entries:QR,setPrototypeOf:h9,isFrozen:S7e,getPrototypeOf:E7e,getOwnPropertyDescriptor:w7e}=Object;let{freeze:ss,seal:Ks,create:JR}=Object,{apply:D5,construct:j5}=typeof Reflect<"u"&&Reflect;ss||(ss=function(t){return t});Ks||(Ks=function(t){return t});D5||(D5=function(t,n){for(var s=arguments.length,o=new Array(s>2?s-2:0),r=2;r<s;r++)o[r-2]=arguments[r];return t.apply(n,o)});j5||(j5=function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return new t(...s)});const bf=os(Array.prototype.forEach),I7e=os(Array.prototype.lastIndexOf),g9=os(Array.prototype.pop),vu=os(Array.prototype.push),_7e=os(Array.prototype.splice),Uf=os(String.prototype.toLowerCase),M0=os(String.prototype.toString),N0=os(String.prototype.match),Cu=os(String.prototype.replace),T7e=os(String.prototype.indexOf),A7e=os(String.prototype.trim),oo=os(Object.prototype.hasOwnProperty),Jn=os(RegExp.prototype.test),yu=k7e(TypeError);function os(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return D5(e,t,s)}}function k7e(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return j5(e,n)}}function ct(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uf;h9&&h9(e,null);let s=t.length;for(;s--;){let o=t[s];if(typeof o=="string"){const r=n(o);r!==o&&(S7e(t)||(t[s]=r),o=r)}e[o]=!0}return e}function M7e(e){for(let t=0;t<e.length;t++)oo(e,t)||(e[t]=null);return e}function Xo(e){const t=JR(null);for(const[n,s]of QR(e))oo(e,n)&&(Array.isArray(s)?t[n]=M7e(s):s&&typeof s=="object"&&s.constructor===Object?t[n]=Xo(s):t[n]=s);return t}function bu(e,t){for(;e!==null;){const s=w7e(e,t);if(s){if(s.get)return os(s.get);if(typeof s.value=="function")return os(s.value)}e=E7e(e)}function n(){return null}return n}const v9=ss(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R0=ss(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P0=ss(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N7e=ss(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L0=ss(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),R7e=ss(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),C9=ss(["#text"]),y9=ss(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),O0=ss(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),b9=ss(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xf=ss(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),P7e=Ks(/\{\{[\w\W]*|[\w\W]*\}\}/gm),L7e=Ks(/<%[\w\W]*|[\w\W]*%>/gm),O7e=Ks(/\$\{[\w\W]*/gm),D7e=Ks(/^data-[\-\w.\u00B7-\uFFFF]+$/),j7e=Ks(/^aria-[\-\w]+$/),XR=Ks(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),F7e=Ks(/^(?:\w+script|data):/i),U7e=Ks(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eP=Ks(/^html$/i),B7e=Ks(/^[a-z][.\w]*(-[.\w]+)+$/i);var x9=Object.freeze({__proto__:null,ARIA_ATTR:j7e,ATTR_WHITESPACE:U7e,CUSTOM_ELEMENT:B7e,DATA_ATTR:D7e,DOCTYPE_NAME:eP,ERB_EXPR:L7e,IS_ALLOWED_URI:XR,IS_SCRIPT_OR_DATA:F7e,MUSTACHE_EXPR:P7e,TMPLIT_EXPR:O7e});const xu={element:1,text:3,progressingInstruction:7,comment:8,document:9},V7e=function(){return typeof window>"u"?null:window},H7e=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(s=n.getAttribute(o));const r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},S9=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function tP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V7e();const t=$e=>tP($e);if(t.version="3.2.7",t.removed=[],!e||!e.document||e.document.nodeType!==xu.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const s=n,o=s.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:i,Element:u,NodeFilter:d,NamedNodeMap:m=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:g}=e,C=u.prototype,v=bu(C,"cloneNode"),b=bu(C,"remove"),y=bu(C,"nextSibling"),E=bu(C,"childNodes"),x=bu(C,"parentNode");if(typeof a=="function"){const $e=n.createElement("template");$e.content&&$e.content.ownerDocument&&(n=$e.content.ownerDocument)}let I,_="";const{implementation:T,createNodeIterator:A,createDocumentFragment:k,getElementsByTagName:R}=n,{importNode:P}=s;let B=S9();t.isSupported=typeof QR=="function"&&typeof x=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:U,ERB_EXPR:$,TMPLIT_EXPR:Q,DATA_ATTR:te,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:ne,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:Z}=x9;let{IS_ALLOWED_URI:J}=x9,W=null;const le=ct({},[...v9,...R0,...P0,...L0,...C9]);let _e=null;const Ae=ct({},[...y9,...O0,...b9,...xf]);let K=Object.seal(JR(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),be=null,Me=null,je=!0,oe=!0,ie=!1,ee=!0,me=!1,Pe=!0,Ve=!1,Qe=!1,st=!1,ve=!1,xe=!1,Te=!1,Ze=!0,Le=!1;const Ye="user-content-";let Ue=!0,he=!1,ze={},It=null;const kt=ct({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let we=null;const Ee=ct({},["audio","video","img","source","image","track"]);let Ke=null;const dt=ct({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Re="http://www.w3.org/1998/Math/MathML",ft="http://www.w3.org/2000/svg",ht="http://www.w3.org/1999/xhtml";let Bn=ht,Io=!1,_o=null;const nc=ct({},[Re,ft,ht],M0);let as=ct({},["mi","mo","mn","ms","mtext"]),Tr=ct({},["annotation-xml"]);const sc=ct({},["title","style","font","a","script"]);let To=null;const Na=["application/xhtml+xml","text/html"],Ra="text/html";let qt=null,ln=null;const gs=n.createElement("form"),oc=function(G){return G instanceof RegExp||G instanceof Function},Ls=function(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ln&&ln===G)){if((!G||typeof G!="object")&&(G={}),G=Xo(G),To=Na.indexOf(G.PARSER_MEDIA_TYPE)===-1?Ra:G.PARSER_MEDIA_TYPE,qt=To==="application/xhtml+xml"?M0:Uf,W=oo(G,"ALLOWED_TAGS")?ct({},G.ALLOWED_TAGS,qt):le,_e=oo(G,"ALLOWED_ATTR")?ct({},G.ALLOWED_ATTR,qt):Ae,_o=oo(G,"ALLOWED_NAMESPACES")?ct({},G.ALLOWED_NAMESPACES,M0):nc,Ke=oo(G,"ADD_URI_SAFE_ATTR")?ct(Xo(dt),G.ADD_URI_SAFE_ATTR,qt):dt,we=oo(G,"ADD_DATA_URI_TAGS")?ct(Xo(Ee),G.ADD_DATA_URI_TAGS,qt):Ee,It=oo(G,"FORBID_CONTENTS")?ct({},G.FORBID_CONTENTS,qt):kt,be=oo(G,"FORBID_TAGS")?ct({},G.FORBID_TAGS,qt):Xo({}),Me=oo(G,"FORBID_ATTR")?ct({},G.FORBID_ATTR,qt):Xo({}),ze=oo(G,"USE_PROFILES")?G.USE_PROFILES:!1,je=G.ALLOW_ARIA_ATTR!==!1,oe=G.ALLOW_DATA_ATTR!==!1,ie=G.ALLOW_UNKNOWN_PROTOCOLS||!1,ee=G.ALLOW_SELF_CLOSE_IN_ATTR!==!1,me=G.SAFE_FOR_TEMPLATES||!1,Pe=G.SAFE_FOR_XML!==!1,Ve=G.WHOLE_DOCUMENT||!1,ve=G.RETURN_DOM||!1,xe=G.RETURN_DOM_FRAGMENT||!1,Te=G.RETURN_TRUSTED_TYPE||!1,st=G.FORCE_BODY||!1,Ze=G.SANITIZE_DOM!==!1,Le=G.SANITIZE_NAMED_PROPS||!1,Ue=G.KEEP_CONTENT!==!1,he=G.IN_PLACE||!1,J=G.ALLOWED_URI_REGEXP||XR,Bn=G.NAMESPACE||ht,as=G.MATHML_TEXT_INTEGRATION_POINTS||as,Tr=G.HTML_INTEGRATION_POINTS||Tr,K=G.CUSTOM_ELEMENT_HANDLING||{},G.CUSTOM_ELEMENT_HANDLING&&oc(G.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=G.CUSTOM_ELEMENT_HANDLING.tagNameCheck),G.CUSTOM_ELEMENT_HANDLING&&oc(G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),G.CUSTOM_ELEMENT_HANDLING&&typeof G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),me&&(oe=!1),xe&&(ve=!0),ze&&(W=ct({},C9),_e=[],ze.html===!0&&(ct(W,v9),ct(_e,y9)),ze.svg===!0&&(ct(W,R0),ct(_e,O0),ct(_e,xf)),ze.svgFilters===!0&&(ct(W,P0),ct(_e,O0),ct(_e,xf)),ze.mathMl===!0&&(ct(W,L0),ct(_e,b9),ct(_e,xf))),G.ADD_TAGS&&(W===le&&(W=Xo(W)),ct(W,G.ADD_TAGS,qt)),G.ADD_ATTR&&(_e===Ae&&(_e=Xo(_e)),ct(_e,G.ADD_ATTR,qt)),G.ADD_URI_SAFE_ATTR&&ct(Ke,G.ADD_URI_SAFE_ATTR,qt),G.FORBID_CONTENTS&&(It===kt&&(It=Xo(It)),ct(It,G.FORBID_CONTENTS,qt)),Ue&&(W["#text"]=!0),Ve&&ct(W,["html","head","body"]),W.table&&(ct(W,["tbody"]),delete be.tbody),G.TRUSTED_TYPES_POLICY){if(typeof G.TRUSTED_TYPES_POLICY.createHTML!="function")throw yu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof G.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw yu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');I=G.TRUSTED_TYPES_POLICY,_=I.createHTML("")}else I===void 0&&(I=H7e(g,o)),I!==null&&typeof _=="string"&&(_=I.createHTML(""));ss&&ss(G),ln=G}},rc=ct({},[...R0,...P0,...N7e]),Ko=ct({},[...L0,...R7e]),Pa=function(G){let Ie=x(G);(!Ie||!Ie.tagName)&&(Ie={namespaceURI:Bn,tagName:"template"});const He=Uf(G.tagName),Lt=Uf(Ie.tagName);return _o[G.namespaceURI]?G.namespaceURI===ft?Ie.namespaceURI===ht?He==="svg":Ie.namespaceURI===Re?He==="svg"&&(Lt==="annotation-xml"||as[Lt]):!!rc[He]:G.namespaceURI===Re?Ie.namespaceURI===ht?He==="math":Ie.namespaceURI===ft?He==="math"&&Tr[Lt]:!!Ko[He]:G.namespaceURI===ht?Ie.namespaceURI===ft&&!Tr[Lt]||Ie.namespaceURI===Re&&!as[Lt]?!1:!Ko[He]&&(sc[He]||!rc[He]):!!(To==="application/xhtml+xml"&&_o[G.namespaceURI]):!1},_t=function(G){vu(t.removed,{element:G});try{x(G).removeChild(G)}catch{b(G)}},Js=function(G,Ie){try{vu(t.removed,{attribute:Ie.getAttributeNode(G),from:Ie})}catch{vu(t.removed,{attribute:null,from:Ie})}if(Ie.removeAttribute(G),G==="is")if(ve||xe)try{_t(Ie)}catch{}else try{Ie.setAttribute(G,"")}catch{}},Rm=function(G){let Ie=null,He=null;if(st)G="<remove></remove>"+G;else{const mt=N0(G,/^[\r\n\t ]+/);He=mt&&mt[0]}To==="application/xhtml+xml"&&Bn===ht&&(G='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+G+"</body></html>");const Lt=I?I.createHTML(G):G;if(Bn===ht)try{Ie=new p().parseFromString(Lt,To)}catch{}if(!Ie||!Ie.documentElement){Ie=T.createDocument(Bn,"template",null);try{Ie.documentElement.innerHTML=Io?_:Lt}catch{}}const Sn=Ie.body||Ie.documentElement;return G&&He&&Sn.insertBefore(n.createTextNode(He),Sn.childNodes[0]||null),Bn===ht?R.call(Ie,Ve?"html":"body")[0]:Ve?Ie.documentElement:Sn},Pm=function(G){return A.call(G.ownerDocument||G,G,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},ac=function(G){return G instanceof f&&(typeof G.nodeName!="string"||typeof G.textContent!="string"||typeof G.removeChild!="function"||!(G.attributes instanceof m)||typeof G.removeAttribute!="function"||typeof G.setAttribute!="function"||typeof G.namespaceURI!="string"||typeof G.insertBefore!="function"||typeof G.hasChildNodes!="function")},Ah=function(G){return typeof i=="function"&&G instanceof i};function qn($e,G,Ie){bf($e,He=>{He.call(t,G,Ie,ln)})}const Zn=function(G){let Ie=null;if(qn(B.beforeSanitizeElements,G,null),ac(G))return _t(G),!0;const He=qt(G.nodeName);if(qn(B.uponSanitizeElement,G,{tagName:He,allowedTags:W}),Pe&&G.hasChildNodes()&&!Ah(G.firstElementChild)&&Jn(/<[/\w!]/g,G.innerHTML)&&Jn(/<[/\w!]/g,G.textContent)||G.nodeType===xu.progressingInstruction||Pe&&G.nodeType===xu.comment&&Jn(/<[/\w]/g,G.data))return _t(G),!0;if(!W[He]||be[He]){if(!be[He]&&Om(He)&&(K.tagNameCheck instanceof RegExp&&Jn(K.tagNameCheck,He)||K.tagNameCheck instanceof Function&&K.tagNameCheck(He)))return!1;if(Ue&&!It[He]){const Lt=x(G)||G.parentNode,Sn=E(G)||G.childNodes;if(Sn&&Lt){const mt=Sn.length;for(let Vn=mt-1;Vn>=0;--Vn){const Xs=v(Sn[Vn],!0);Xs.__removalCount=(G.__removalCount||0)+1,Lt.insertBefore(Xs,y(G))}}}return _t(G),!0}return G instanceof u&&!Pa(G)||(He==="noscript"||He==="noembed"||He==="noframes")&&Jn(/<\/no(script|embed|frames)/i,G.innerHTML)?(_t(G),!0):(me&&G.nodeType===xu.text&&(Ie=G.textContent,bf([U,$,Q],Lt=>{Ie=Cu(Ie,Lt," ")}),G.textContent!==Ie&&(vu(t.removed,{element:G.cloneNode()}),G.textContent=Ie)),qn(B.afterSanitizeElements,G,null),!1)},Lm=function(G,Ie,He){if(Ze&&(Ie==="id"||Ie==="name")&&(He in n||He in gs))return!1;if(!(oe&&!Me[Ie]&&Jn(te,Ie))){if(!(je&&Jn(X,Ie))){if(!_e[Ie]||Me[Ie]){if(!(Om(G)&&(K.tagNameCheck instanceof RegExp&&Jn(K.tagNameCheck,G)||K.tagNameCheck instanceof Function&&K.tagNameCheck(G))&&(K.attributeNameCheck instanceof RegExp&&Jn(K.attributeNameCheck,Ie)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(Ie,G))||Ie==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&Jn(K.tagNameCheck,He)||K.tagNameCheck instanceof Function&&K.tagNameCheck(He))))return!1}else if(!Ke[Ie]){if(!Jn(J,Cu(He,q,""))){if(!((Ie==="src"||Ie==="xlink:href"||Ie==="href")&&G!=="script"&&T7e(He,"data:")===0&&we[G])){if(!(ie&&!Jn(ne,Cu(He,q,"")))){if(He)return!1}}}}}}return!0},Om=function(G){return G!=="annotation-xml"&&N0(G,Z)},Dm=function(G){qn(B.beforeSanitizeAttributes,G,null);const{attributes:Ie}=G;if(!Ie||ac(G))return;const He={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_e,forceKeepAttr:void 0};let Lt=Ie.length;for(;Lt--;){const Sn=Ie[Lt],{name:mt,namespaceURI:Vn,value:Xs}=Sn,En=qt(mt),pn=Xs;let un=mt==="value"?pn:A7e(pn);if(He.attrName=En,He.attrValue=un,He.keepAttr=!0,He.forceKeepAttr=void 0,qn(B.uponSanitizeAttribute,G,He),un=He.attrValue,Le&&(En==="id"||En==="name")&&(Js(mt,G),un=Ye+un),Pe&&Jn(/((--!?|])>)|<\/(style|title|textarea)/i,un)){Js(mt,G);continue}if(En==="attributename"&&N0(un,"href")){Js(mt,G);continue}if(He.forceKeepAttr)continue;if(!He.keepAttr){Js(mt,G);continue}if(!ee&&Jn(/\/>/i,un)){Js(mt,G);continue}me&&bf([U,$,Q],Os=>{un=Cu(un,Os," ")});const jm=qt(G.nodeName);if(!Lm(jm,En,un)){Js(mt,G);continue}if(I&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Vn)switch(g.getAttributeType(jm,En)){case"TrustedHTML":{un=I.createHTML(un);break}case"TrustedScriptURL":{un=I.createScriptURL(un);break}}if(un!==pn)try{Vn?G.setAttributeNS(Vn,mt,un):G.setAttribute(mt,un),ac(G)?_t(G):g9(t.removed)}catch{Js(mt,G)}}qn(B.afterSanitizeAttributes,G,null)},Ar=function $e(G){let Ie=null;const He=Pm(G);for(qn(B.beforeSanitizeShadowDOM,G,null);Ie=He.nextNode();)qn(B.uponSanitizeShadowNode,Ie,null),Zn(Ie),Dm(Ie),Ie.content instanceof r&&$e(Ie.content);qn(B.afterSanitizeShadowDOM,G,null)};return t.sanitize=function($e){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie=null,He=null,Lt=null,Sn=null;if(Io=!$e,Io&&($e="<!-->"),typeof $e!="string"&&!Ah($e))if(typeof $e.toString=="function"){if($e=$e.toString(),typeof $e!="string")throw yu("dirty is not a string, aborting")}else throw yu("toString is not a function");if(!t.isSupported)return $e;if(Qe||Ls(G),t.removed=[],typeof $e=="string"&&(he=!1),he){if($e.nodeName){const Xs=qt($e.nodeName);if(!W[Xs]||be[Xs])throw yu("root node is forbidden and cannot be sanitized in-place")}}else if($e instanceof i)Ie=Rm("<!---->"),He=Ie.ownerDocument.importNode($e,!0),He.nodeType===xu.element&&He.nodeName==="BODY"||He.nodeName==="HTML"?Ie=He:Ie.appendChild(He);else{if(!ve&&!me&&!Ve&&$e.indexOf("<")===-1)return I&&Te?I.createHTML($e):$e;if(Ie=Rm($e),!Ie)return ve?null:Te?_:""}Ie&&st&&_t(Ie.firstChild);const mt=Pm(he?$e:Ie);for(;Lt=mt.nextNode();)Zn(Lt),Dm(Lt),Lt.content instanceof r&&Ar(Lt.content);if(he)return $e;if(ve){if(xe)for(Sn=k.call(Ie.ownerDocument);Ie.firstChild;)Sn.appendChild(Ie.firstChild);else Sn=Ie;return(_e.shadowroot||_e.shadowrootmode)&&(Sn=P.call(s,Sn,!0)),Sn}let Vn=Ve?Ie.outerHTML:Ie.innerHTML;return Ve&&W["!doctype"]&&Ie.ownerDocument&&Ie.ownerDocument.doctype&&Ie.ownerDocument.doctype.name&&Jn(eP,Ie.ownerDocument.doctype.name)&&(Vn="<!DOCTYPE "+Ie.ownerDocument.doctype.name+`>
`+Vn),me&&bf([U,$,Q],Xs=>{Vn=Cu(Vn,Xs," ")}),I&&Te?I.createHTML(Vn):Vn},t.setConfig=function(){let $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ls($e),Qe=!0},t.clearConfig=function(){ln=null,Qe=!1},t.isValidAttribute=function($e,G,Ie){ln||Ls({});const He=qt($e),Lt=qt(G);return Lm(He,Lt,Ie)},t.addHook=function($e,G){typeof G=="function"&&vu(B[$e],G)},t.removeHook=function($e,G){if(G!==void 0){const Ie=I7e(B[$e],G);return Ie===-1?void 0:_7e(B[$e],Ie,1)[0]}return g9(B[$e])},t.removeHooks=function($e){B[$e]=[]},t.removeAllHooks=function(){B=S9()},t}var E9=tP(),qu=class{constructor(e,t,n,s,o,r){O(this,"type",3);O(this,"name","");O(this,"prefix","");O(this,"value","");O(this,"suffix","");O(this,"modifier",3);this.type=e,this.name=t,this.prefix=n,this.value=s,this.suffix=o,this.modifier=r}hasCustomName(){return this.name!==""&&typeof this.name!="number"}},z7e=/[$_\p{ID_Start}]/u,G7e=/[$_\u200C\u200D\p{ID_Continue}]/u,F5=".*";function W7e(e,t){return/^[\x00-\x7F]*$/.test(e)}function nP(e,t=!1){let n=[],s=0;for(;s<e.length;){let o=e[s],r=function(a){if(!t)throw new TypeError(a);n.push({type:"INVALID_CHAR",index:s,value:e[s++]})};if(o==="*"){n.push({type:"ASTERISK",index:s,value:e[s++]});continue}if(o==="+"||o==="?"){n.push({type:"OTHER_MODIFIER",index:s,value:e[s++]});continue}if(o==="\\"){n.push({type:"ESCAPED_CHAR",index:s++,value:e[s++]});continue}if(o==="{"){n.push({type:"OPEN",index:s,value:e[s++]});continue}if(o==="}"){n.push({type:"CLOSE",index:s,value:e[s++]});continue}if(o===":"){let a="",i=s+1;for(;i<e.length;){let u=e.substr(i,1);if(i===s+1&&z7e.test(u)||i!==s+1&&G7e.test(u)){a+=e[i++];continue}break}if(!a){r(`Missing parameter name at ${s}`);continue}n.push({type:"NAME",index:s,value:a}),s=i;continue}if(o==="("){let a=1,i="",u=s+1,d=!1;if(e[u]==="?"){r(`Pattern cannot start with "?" at ${u}`);continue}for(;u<e.length;){if(!W7e(e[u])){r(`Invalid character '${e[u]}' at ${u}.`),d=!0;break}if(e[u]==="\\"){i+=e[u++]+e[u++];continue}if(e[u]===")"){if(a--,a===0){u++;break}}else if(e[u]==="("&&(a++,e[u+1]!=="?")){r(`Capturing groups are not allowed at ${u}`),d=!0;break}i+=e[u++]}if(d)continue;if(a){r(`Unbalanced pattern at ${s}`);continue}if(!i){r(`Missing pattern at ${s}`);continue}n.push({type:"REGEX",index:s,value:i}),s=u;continue}n.push({type:"CHAR",index:s,value:e[s++]})}return n.push({type:"END",index:s,value:""}),n}function sP(e,t={}){let n=nP(e);t.delimiter??(t.delimiter="/#?"),t.prefixes??(t.prefixes="./");let s=`[^${js(t.delimiter)}]+?`,o=[],r=0,a=0,i=new Set,u=E=>{if(a<n.length&&n[a].type===E)return n[a++].value},d=()=>u("OTHER_MODIFIER")??u("ASTERISK"),m=E=>{let x=u(E);if(x!==void 0)return x;let{type:I,index:_}=n[a];throw new TypeError(`Unexpected ${I} at ${_}, expected ${E}`)},f=()=>{let E="",x;for(;x=u("CHAR")??u("ESCAPED_CHAR");)E+=x;return E},p=E=>E,g=t.encodePart||p,C="",v=E=>{C+=E},b=()=>{C.length&&(o.push(new qu(3,"","",g(C),"",3)),C="")},y=(E,x,I,_,T)=>{let A=3;switch(T){case"?":A=1;break;case"*":A=0;break;case"+":A=2;break}if(!x&&!I&&A===3){v(E);return}if(b(),!x&&!I){if(!E)return;o.push(new qu(3,"","",g(E),"",A));return}let k;I?I==="*"?k=F5:k=I:k=s;let R=2;k===s?(R=1,k=""):k===F5&&(R=0,k="");let P;if(x?P=x:I&&(P=r++),i.has(P))throw new TypeError(`Duplicate name '${P}'.`);i.add(P),o.push(new qu(R,P,g(E),k,g(_),A))};for(;a<n.length;){let E=u("CHAR"),x=u("NAME"),I=u("REGEX");if(!x&&!I&&(I=u("ASTERISK")),x||I){let T=E??"";t.prefixes.indexOf(T)===-1&&(v(T),T=""),b();let A=d();y(T,x,I,"",A);continue}let _=E??u("ESCAPED_CHAR");if(_){v(_);continue}if(u("OPEN")){let T=f(),A=u("NAME"),k=u("REGEX");!A&&!k&&(k=u("ASTERISK"));let R=f();m("CLOSE");let P=d();y(T,A,k,R,P);continue}b(),m("END")}return o}function js(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function w9(e){return e&&e.ignoreCase?"ui":"u"}function $7e(e,t,n){return oP(sP(e,n),t,n)}function Dc(e){switch(e){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function oP(e,t,n={}){n.delimiter??(n.delimiter="/#?"),n.prefixes??(n.prefixes="./"),n.sensitive??(n.sensitive=!1),n.strict??(n.strict=!1),n.end??(n.end=!0),n.start??(n.start=!0),n.endsWith="";let s=n.start?"^":"";for(let i of e){if(i.type===3){i.modifier===3?s+=js(i.value):s+=`(?:${js(i.value)})${Dc(i.modifier)}`;continue}t&&t.push(i.name);let u=`[^${js(n.delimiter)}]+?`,d=i.value;if(i.type===1?d=u:i.type===0&&(d=F5),!i.prefix.length&&!i.suffix.length){i.modifier===3||i.modifier===1?s+=`(${d})${Dc(i.modifier)}`:s+=`((?:${d})${Dc(i.modifier)})`;continue}if(i.modifier===3||i.modifier===1){s+=`(?:${js(i.prefix)}(${d})${js(i.suffix)})`,s+=Dc(i.modifier);continue}s+=`(?:${js(i.prefix)}`,s+=`((?:${d})(?:`,s+=js(i.suffix),s+=js(i.prefix),s+=`(?:${d}))*)${js(i.suffix)})`,i.modifier===0&&(s+="?")}let o=`[${js(n.endsWith)}]|$`,r=`[${js(n.delimiter)}]`;if(n.end)return n.strict||(s+=`${r}?`),n.endsWith.length?s+=`(?=${o})`:s+="$",new RegExp(s,w9(n));n.strict||(s+=`(?:${r}(?=${o}))?`);let a=!1;if(e.length){let i=e[e.length-1];i.type===3&&i.modifier===3&&(a=n.delimiter.indexOf(i)>-1)}return a||(s+=`(?=${r}|${o})`),new RegExp(s,w9(n))}var Ur={delimiter:"",prefixes:"",sensitive:!0,strict:!0},q7e={delimiter:".",prefixes:"",sensitive:!0,strict:!0},Z7e={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function K7e(e,t){return e.length?e[0]==="/"?!0:!t||e.length<2?!1:(e[0]=="\\"||e[0]=="{")&&e[1]=="/":!1}function rP(e,t){return e.startsWith(t)?e.substring(t.length,e.length):e}function Y7e(e,t){return e.endsWith(t)?e.substr(0,e.length-t.length):e}function aP(e){return!e||e.length<2?!1:e[0]==="["||(e[0]==="\\"||e[0]==="{")&&e[1]==="["}var iP=["ftp","file","http","https","ws","wss"];function cP(e){if(!e)return!0;for(let t of iP)if(e.test(t))return!0;return!1}function Q7e(e,t){if(e=rP(e,"#"),t||e==="")return e;let n=new URL("https://example.com");return n.hash=e,n.hash?n.hash.substring(1,n.hash.length):""}function J7e(e,t){if(e=rP(e,"?"),t||e==="")return e;let n=new URL("https://example.com");return n.search=e,n.search?n.search.substring(1,n.search.length):""}function X7e(e,t){return t||e===""?e:aP(e)?dP(e):uP(e)}function eSe(e,t){if(t||e==="")return e;let n=new URL("https://example.com");return n.password=e,n.password}function tSe(e,t){if(t||e==="")return e;let n=new URL("https://example.com");return n.username=e,n.username}function nSe(e,t,n){if(n||e==="")return e;if(t&&!iP.includes(t))return new URL(`${t}:${e}`).pathname;let s=e[0]=="/";return e=new URL(s?e:"/-"+e,"https://example.com").pathname,s||(e=e.substring(2,e.length)),e}function sSe(e,t,n){return lP(t)===e&&(e=""),n||e===""?e:mP(e)}function oSe(e,t){return e=Y7e(e,":"),t||e===""?e:xy(e)}function lP(e){switch(e){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function xy(e){if(e==="")return e;if(/^[-+.A-Za-z0-9]*$/.test(e))return e.toLowerCase();throw new TypeError(`Invalid protocol '${e}'.`)}function rSe(e){if(e==="")return e;let t=new URL("https://example.com");return t.username=e,t.username}function aSe(e){if(e==="")return e;let t=new URL("https://example.com");return t.password=e,t.password}function uP(e){if(e==="")return e;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(e))throw new TypeError(`Invalid hostname '${e}'`);let t=new URL("https://example.com");return t.hostname=e,t.hostname}function dP(e){if(e==="")return e;if(/[^0-9a-fA-F[\]:]/g.test(e))throw new TypeError(`Invalid IPv6 hostname '${e}'`);return e.toLowerCase()}function mP(e){if(e===""||/^[0-9]*$/.test(e)&&parseInt(e)<=65535)return e;throw new TypeError(`Invalid port '${e}'.`)}function iSe(e){if(e==="")return e;let t=new URL("https://example.com");return t.pathname=e[0]!=="/"?"/-"+e:e,e[0]!=="/"?t.pathname.substring(2,t.pathname.length):t.pathname}function cSe(e){return e===""?e:new URL(`data:${e}`).pathname}function lSe(e){if(e==="")return e;let t=new URL("https://example.com");return t.search=e,t.search.substring(1,t.search.length)}function uSe(e){if(e==="")return e;let t=new URL("https://example.com");return t.hash=e,t.hash.substring(1,t.hash.length)}var Zc,Xn,_n,Vt,ci,Kc,Cs,Yc,Qc,Jc,Se,vn,fP,U5,Au,Bf,Fs,B5,pP,Vf,hP,gP,Hf,Tc,Ya,vP,CP,yP,bP,No,xP,P9,dSe=(P9=class{constructor(e){jt(this,Se);jt(this,Zc);jt(this,Xn,[]);jt(this,_n,{});jt(this,Vt,0);jt(this,ci,1);jt(this,Kc,0);jt(this,Cs,0);jt(this,Yc,0);jt(this,Qc,0);jt(this,Jc,!1);vt(this,Zc,e)}get result(){return ue(this,_n)}parse(){for(vt(this,Xn,nP(ue(this,Zc),!0));ue(this,Vt)<ue(this,Xn).length;vt(this,Vt,ue(this,Vt)+ue(this,ci))){if(vt(this,ci,1),ue(this,Xn)[ue(this,Vt)].type==="END"){if(ue(this,Cs)===0){Oe(this,Se,U5).call(this),Oe(this,Se,Ya).call(this)?Oe(this,Se,vn).call(this,9,1):Oe(this,Se,Tc).call(this)?Oe(this,Se,vn).call(this,8,1):Oe(this,Se,vn).call(this,7,0);continue}else if(ue(this,Cs)===2){Oe(this,Se,Au).call(this,5);continue}Oe(this,Se,vn).call(this,10,0);break}if(ue(this,Yc)>0)if(Oe(this,Se,CP).call(this))vt(this,Yc,ue(this,Yc)-1);else continue;if(Oe(this,Se,vP).call(this)){vt(this,Yc,ue(this,Yc)+1);continue}switch(ue(this,Cs)){case 0:Oe(this,Se,B5).call(this)&&Oe(this,Se,Au).call(this,1);break;case 1:if(Oe(this,Se,B5).call(this)){Oe(this,Se,xP).call(this);let e=7,t=1;Oe(this,Se,pP).call(this)?(e=2,t=3):ue(this,Jc)&&(e=2),Oe(this,Se,vn).call(this,e,t)}break;case 2:Oe(this,Se,Vf).call(this)?Oe(this,Se,Au).call(this,3):(Oe(this,Se,Hf).call(this)||Oe(this,Se,Tc).call(this)||Oe(this,Se,Ya).call(this))&&Oe(this,Se,Au).call(this,5);break;case 3:Oe(this,Se,hP).call(this)?Oe(this,Se,vn).call(this,4,1):Oe(this,Se,Vf).call(this)&&Oe(this,Se,vn).call(this,5,1);break;case 4:Oe(this,Se,Vf).call(this)&&Oe(this,Se,vn).call(this,5,1);break;case 5:Oe(this,Se,yP).call(this)?vt(this,Qc,ue(this,Qc)+1):Oe(this,Se,bP).call(this)&&vt(this,Qc,ue(this,Qc)-1),Oe(this,Se,gP).call(this)&&!ue(this,Qc)?Oe(this,Se,vn).call(this,6,1):Oe(this,Se,Hf).call(this)?Oe(this,Se,vn).call(this,7,0):Oe(this,Se,Tc).call(this)?Oe(this,Se,vn).call(this,8,1):Oe(this,Se,Ya).call(this)&&Oe(this,Se,vn).call(this,9,1);break;case 6:Oe(this,Se,Hf).call(this)?Oe(this,Se,vn).call(this,7,0):Oe(this,Se,Tc).call(this)?Oe(this,Se,vn).call(this,8,1):Oe(this,Se,Ya).call(this)&&Oe(this,Se,vn).call(this,9,1);break;case 7:Oe(this,Se,Tc).call(this)?Oe(this,Se,vn).call(this,8,1):Oe(this,Se,Ya).call(this)&&Oe(this,Se,vn).call(this,9,1);break;case 8:Oe(this,Se,Ya).call(this)&&Oe(this,Se,vn).call(this,9,1);break}}ue(this,_n).hostname!==void 0&&ue(this,_n).port===void 0&&(ue(this,_n).port="")}},Zc=new WeakMap,Xn=new WeakMap,_n=new WeakMap,Vt=new WeakMap,ci=new WeakMap,Kc=new WeakMap,Cs=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,Se=new WeakSet,vn=function(e,t){var n,s,o;switch(ue(this,Cs)){case 0:break;case 1:ue(this,_n).protocol=Oe(this,Se,No).call(this);break;case 2:break;case 3:ue(this,_n).username=Oe(this,Se,No).call(this);break;case 4:ue(this,_n).password=Oe(this,Se,No).call(this);break;case 5:ue(this,_n).hostname=Oe(this,Se,No).call(this);break;case 6:ue(this,_n).port=Oe(this,Se,No).call(this);break;case 7:ue(this,_n).pathname=Oe(this,Se,No).call(this);break;case 8:ue(this,_n).search=Oe(this,Se,No).call(this);break;case 9:ue(this,_n).hash=Oe(this,Se,No).call(this);break}ue(this,Cs)!==0&&e!==10&&([1,2,3,4].includes(ue(this,Cs))&&[6,7,8,9].includes(e)&&((n=ue(this,_n)).hostname??(n.hostname="")),[1,2,3,4,5,6].includes(ue(this,Cs))&&[8,9].includes(e)&&((s=ue(this,_n)).pathname??(s.pathname=ue(this,Jc)?"/":"")),[1,2,3,4,5,6,7].includes(ue(this,Cs))&&e===9&&((o=ue(this,_n)).search??(o.search=""))),Oe(this,Se,fP).call(this,e,t)},fP=function(e,t){vt(this,Cs,e),vt(this,Kc,ue(this,Vt)+t),vt(this,Vt,ue(this,Vt)+t),vt(this,ci,0)},U5=function(){vt(this,Vt,ue(this,Kc)),vt(this,ci,0)},Au=function(e){Oe(this,Se,U5).call(this),vt(this,Cs,e)},Bf=function(e){return e<0&&(e=ue(this,Xn).length-e),e<ue(this,Xn).length?ue(this,Xn)[e]:ue(this,Xn)[ue(this,Xn).length-1]},Fs=function(e,t){let n=Oe(this,Se,Bf).call(this,e);return n.value===t&&(n.type==="CHAR"||n.type==="ESCAPED_CHAR"||n.type==="INVALID_CHAR")},B5=function(){return Oe(this,Se,Fs).call(this,ue(this,Vt),":")},pP=function(){return Oe(this,Se,Fs).call(this,ue(this,Vt)+1,"/")&&Oe(this,Se,Fs).call(this,ue(this,Vt)+2,"/")},Vf=function(){return Oe(this,Se,Fs).call(this,ue(this,Vt),"@")},hP=function(){return Oe(this,Se,Fs).call(this,ue(this,Vt),":")},gP=function(){return Oe(this,Se,Fs).call(this,ue(this,Vt),":")},Hf=function(){return Oe(this,Se,Fs).call(this,ue(this,Vt),"/")},Tc=function(){if(Oe(this,Se,Fs).call(this,ue(this,Vt),"?"))return!0;if(ue(this,Xn)[ue(this,Vt)].value!=="?")return!1;let e=Oe(this,Se,Bf).call(this,ue(this,Vt)-1);return e.type!=="NAME"&&e.type!=="REGEX"&&e.type!=="CLOSE"&&e.type!=="ASTERISK"},Ya=function(){return Oe(this,Se,Fs).call(this,ue(this,Vt),"#")},vP=function(){return ue(this,Xn)[ue(this,Vt)].type=="OPEN"},CP=function(){return ue(this,Xn)[ue(this,Vt)].type=="CLOSE"},yP=function(){return Oe(this,Se,Fs).call(this,ue(this,Vt),"[")},bP=function(){return Oe(this,Se,Fs).call(this,ue(this,Vt),"]")},No=function(){let e=ue(this,Xn)[ue(this,Vt)],t=Oe(this,Se,Bf).call(this,ue(this,Kc)).index;return ue(this,Zc).substring(t,e.index)},xP=function(){let e={};Object.assign(e,Ur),e.encodePart=xy;let t=$7e(Oe(this,Se,No).call(this),void 0,e);vt(this,Jc,cP(t))},P9),D0=["protocol","username","password","hostname","port","pathname","search","hash"],Dr="*";function I9(e,t){if(typeof e!="string")throw new TypeError("parameter 1 is not of type 'string'.");let n=new URL(e,t);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search!==""?n.search.substring(1,n.search.length):void 0,hash:n.hash!==""?n.hash.substring(1,n.hash.length):void 0}}function Qo(e,t){return t?ku(e):e}function Su(e,t,n){let s;if(typeof t.baseURL=="string")try{s=new URL(t.baseURL),t.protocol===void 0&&(e.protocol=Qo(s.protocol.substring(0,s.protocol.length-1),n)),!n&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&(e.username=Qo(s.username,n)),!n&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&t.password===void 0&&(e.password=Qo(s.password,n)),t.protocol===void 0&&t.hostname===void 0&&(e.hostname=Qo(s.hostname,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&(e.port=Qo(s.port,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&(e.pathname=Qo(s.pathname,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&(e.search=Qo(s.search.substring(1,s.search.length),n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&t.hash===void 0&&(e.hash=Qo(s.hash.substring(1,s.hash.length),n))}catch{throw new TypeError(`invalid baseURL '${t.baseURL}'.`)}if(typeof t.protocol=="string"&&(e.protocol=oSe(t.protocol,n)),typeof t.username=="string"&&(e.username=tSe(t.username,n)),typeof t.password=="string"&&(e.password=eSe(t.password,n)),typeof t.hostname=="string"&&(e.hostname=X7e(t.hostname,n)),typeof t.port=="string"&&(e.port=sSe(t.port,e.protocol,n)),typeof t.pathname=="string"){if(e.pathname=t.pathname,s&&!K7e(e.pathname,n)){let o=s.pathname.lastIndexOf("/");o>=0&&(e.pathname=Qo(s.pathname.substring(0,o+1),n)+e.pathname)}e.pathname=nSe(e.pathname,e.protocol,n)}return typeof t.search=="string"&&(e.search=J7e(t.search,n)),typeof t.hash=="string"&&(e.hash=Q7e(t.hash,n)),e}function ku(e){return e.replace(/([+*?:{}()\\])/g,"\\$1")}function mSe(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function fSe(e,t){t.delimiter??(t.delimiter="/#?"),t.prefixes??(t.prefixes="./"),t.sensitive??(t.sensitive=!1),t.strict??(t.strict=!1),t.end??(t.end=!0),t.start??(t.start=!0),t.endsWith="";let n=".*",s=`[^${mSe(t.delimiter)}]+?`,o=/[$_\u200C\u200D\p{ID_Continue}]/u,r="";for(let a=0;a<e.length;++a){let i=e[a];if(i.type===3){if(i.modifier===3){r+=ku(i.value);continue}r+=`{${ku(i.value)}}${Dc(i.modifier)}`;continue}let u=i.hasCustomName(),d=!!i.suffix.length||!!i.prefix.length&&(i.prefix.length!==1||!t.prefixes.includes(i.prefix)),m=a>0?e[a-1]:null,f=a<e.length-1?e[a+1]:null;if(!d&&u&&i.type===1&&i.modifier===3&&f&&!f.prefix.length&&!f.suffix.length)if(f.type===3){let p=f.value.length>0?f.value[0]:"";d=o.test(p)}else d=!f.hasCustomName();if(!d&&!i.prefix.length&&m&&m.type===3){let p=m.value[m.value.length-1];d=t.prefixes.includes(p)}d&&(r+="{"),r+=ku(i.prefix),u&&(r+=`:${i.name}`),i.type===2?r+=`(${i.value})`:i.type===1?u||(r+=`(${s})`):i.type===0&&(!u&&(!m||m.type===3||m.modifier!==3||d||i.prefix!=="")?r+="*":r+=`(${n})`),i.type===1&&u&&i.suffix.length&&o.test(i.suffix[0])&&(r+="\\"),r+=ku(i.suffix),d&&(r+="}"),i.modifier!==3&&(r+=Dc(i.modifier))}return r}var Lo,li,Xc,Tn,ro,el,L9,pSe=(L9=class{constructor(e={},t,n){jt(this,Lo);jt(this,li,{});jt(this,Xc,{});jt(this,Tn,{});jt(this,ro,{});jt(this,el,!1);try{let s;if(typeof t=="string"?s=t:n=t,typeof e=="string"){let i=new dSe(e);if(i.parse(),e=i.result,s===void 0&&typeof e.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");e.baseURL=s}else{if(!e||typeof e!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(s)throw new TypeError("parameter 1 is not of type 'string'.")}typeof n>"u"&&(n={ignoreCase:!1});let o={ignoreCase:n.ignoreCase===!0};vt(this,Lo,Su({pathname:Dr,protocol:Dr,username:Dr,password:Dr,hostname:Dr,port:Dr,search:Dr,hash:Dr},e,!0)),lP(ue(this,Lo).protocol)===ue(this,Lo).port&&(ue(this,Lo).port="");let a;for(a of D0){if(!(a in ue(this,Lo)))continue;let i={},u=ue(this,Lo)[a];switch(ue(this,Xc)[a]=[],a){case"protocol":Object.assign(i,Ur),i.encodePart=xy;break;case"username":Object.assign(i,Ur),i.encodePart=rSe;break;case"password":Object.assign(i,Ur),i.encodePart=aSe;break;case"hostname":Object.assign(i,q7e),aP(u)?i.encodePart=dP:i.encodePart=uP;break;case"port":Object.assign(i,Ur),i.encodePart=mP;break;case"pathname":cP(ue(this,li).protocol)?(Object.assign(i,Z7e,o),i.encodePart=iSe):(Object.assign(i,Ur,o),i.encodePart=cSe);break;case"search":Object.assign(i,Ur,o),i.encodePart=lSe;break;case"hash":Object.assign(i,Ur,o),i.encodePart=uSe;break}try{ue(this,ro)[a]=sP(u,i),ue(this,li)[a]=oP(ue(this,ro)[a],ue(this,Xc)[a],i),ue(this,Tn)[a]=fSe(ue(this,ro)[a],i),vt(this,el,ue(this,el)||ue(this,ro)[a].some(d=>d.type===2))}catch{throw new TypeError(`invalid ${a} pattern '${ue(this,Lo)[a]}'.`)}}}catch(s){throw new TypeError(`Failed to construct 'URLPattern': ${s.message}`)}}test(e={},t){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof e!="string"&&t)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return!1;try{typeof e=="object"?n=Su(n,e,!1):n=Su(n,I9(e,t),!1)}catch{return!1}let s;for(s of D0)if(!ue(this,li)[s].exec(n[s]))return!1;return!0}exec(e={},t){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof e!="string"&&t)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return;try{typeof e=="object"?n=Su(n,e,!1):n=Su(n,I9(e,t),!1)}catch{return null}let s={};t?s.inputs=[e,t]:s.inputs=[e];let o;for(o of D0){let r=ue(this,li)[o].exec(n[o]);if(!r)return null;let a={};for(let[i,u]of ue(this,Xc)[o].entries())if(typeof u=="string"||typeof u=="number"){let d=r[i+1];a[u]=d}s[o]={input:n[o]??"",groups:a}}return s}static compareComponent(e,t,n){let s=(i,u)=>{for(let d of["type","modifier","prefix","value","suffix"]){if(i[d]<u[d])return-1;if(i[d]!==u[d])return 1}return 0},o=new qu(3,"","","","",3),r=new qu(0,"","","","",3),a=(i,u)=>{let d=0;for(;d<Math.min(i.length,u.length);++d){let m=s(i[d],u[d]);if(m)return m}return i.length===u.length?0:s(i[d]??o,u[d]??o)};return!ue(t,Tn)[e]&&!ue(n,Tn)[e]?0:ue(t,Tn)[e]&&!ue(n,Tn)[e]?a(ue(t,ro)[e],[r]):!ue(t,Tn)[e]&&ue(n,Tn)[e]?a([r],ue(n,ro)[e]):a(ue(t,ro)[e],ue(n,ro)[e])}get protocol(){return ue(this,Tn).protocol}get username(){return ue(this,Tn).username}get password(){return ue(this,Tn).password}get hostname(){return ue(this,Tn).hostname}get port(){return ue(this,Tn).port}get pathname(){return ue(this,Tn).pathname}get search(){return ue(this,Tn).search}get hash(){return ue(this,Tn).hash}get hasRegExpGroups(){return ue(this,el)}},Lo=new WeakMap,li=new WeakMap,Xc=new WeakMap,Tn=new WeakMap,ro=new WeakMap,el=new WeakMap,L9);globalThis.URLPattern||(globalThis.URLPattern=pSe);let SP;function oMe(e){SP=e}const _9=["copilot.microsoft.com","copilot.com","copilot-stg.com","studiostaticassetsprod.azureedge.net",window.location.hostname];function hSe(){var e,t;typeof window<"u"&&(window.copilotTrustedTypesPolicy=(e=window.trustedTypes)==null?void 0:e.createPolicy("copilotPolicy",{createHTML:n=>E9.sanitize(n)}),(t=window.trustedTypes)==null||t.createPolicy("default",{createScriptURL:n=>{if(!n)throw new Error(`Invalid script URL "${n}" blocked by CSP.`);const s=/^\/cl\//,o=new URLPattern({protocol:"https",hostname:"*.clarity.ms"}),r=new URLPattern({protocol:"https",hostname:"*.cloudflare.com"}),a=new URLPattern({protocol:"https",hostname:"bat.bing.com"}),i=new URLPattern({protocol:"https",hostname:"az416426.vo.msecnd.net"}),u=new URLPattern({protocol:"https",hostname:"fpt.dfp.microsoft.com"}),d=new URLPattern({protocol:"https",hostname:"assets.msn.com"}),m=new URLPattern({protocol:"https",hostname:"content.lifecycle.office.net"}),f=new URLPattern({protocol:"https",hostname:"*.paypal.com"}),p=new URLPattern({protocol:"https",hostname:"*.paypalobjects.com"}),g=new URLPattern({protocol:window.location.protocol,hostname:window.location.hostname,port:window.location.port||void 0,pathname:"/src/workers/*.worker.ts*"}),C=_9.map(b=>new URLPattern({protocol:"https",hostname:b,pathname:"*/assets/*.worker-*.js"})),v=b=>{if(!b.startsWith("blob:"))return!1;const y=b.match(/^blob:(https?:\/\/[^/]+)/);if(!y||!y[1])return!1;const E=y[1];try{const x=new URL(E);return _9.some(I=>x.hostname===I)}catch{return!1}};if(s.test(n)||o.test(n)||r.test(n)||a.test(n)||i.test(n)||u.test(n)||d.test(n)||m.test(n)||f.test(n)||p.test(n)||g.test(n)||C.some(b=>b.test(n))||n===SP||v(n))return n;throw new Error(`Unsafe script URL "${n}" blocked by CSP.`)},createHTML:n=>E9.sanitize(n)}))}const gSe="6472538445",vSe="6738511300";function CSe(){const e=document.querySelector('meta[name="apple-itunes-app"]');e&&e.remove();let t=null;if(Kv()?t=gSe:lK()&&(t=vSe),t){const n=document.createElement("meta");n.name="apple-itunes-app",n.content=`app-id=${t}`,document.head.appendChild(n)}}hSe();CSe();xO.createRoot(document.getElementById("app")).render(c.jsx(gi.StrictMode,{children:c.jsx(x7e,{})}));export{bEe as $,D as A,at as B,Ff as C,fn as D,ae as E,Il as F,dce as G,on as H,TIe as I,AIe as J,Wo as K,$i as L,re as M,nn as N,$n as O,ZSe as P,Fn as Q,qIe as R,tEe as S,nEe as T,w3 as U,bIe as V,bo as W,ON as X,xo as Y,lt as Z,qN as _,sEe as a,Ys as a$,Ti as a0,Vae as a1,gIe as a2,rn as a3,Y0 as a4,ls as a5,Hi as a6,ch as a7,Pl as a8,RT as a9,qw as aA,Jw as aB,fl as aC,Ap as aD,JC as aE,vfe as aF,yC as aG,yt as aH,U2e as aI,gA as aJ,BCe as aK,vr as aL,Eh as aM,WR as aN,dm as aO,e5e as aP,Y2 as aQ,oS as aR,NK as aS,I3 as aT,FEe as aU,Ts as aV,mw as aW,Eo as aX,bt as aY,Up as aZ,hs as a_,EIe as aa,Vp as ab,it as ac,N as ad,ds as ae,pt as af,ns as ag,tt as ah,Be as ai,Ii as aj,an as ak,KIe as al,wt as am,jSe as an,Gn as ao,nse as ap,vm as aq,xEe as ar,Vo as as,k3 as at,Bl as au,cn as av,xk as aw,du as ax,gl as ay,Jt as az,Nn as b,qi as b$,Ce as b0,wwe as b1,Cde as b2,zK as b3,mwe as b4,sn as b5,iQ as b6,f3 as b7,Hce as b8,P0e as b9,wp as bA,sp as bB,mm as bC,PN as bD,bn as bE,hke as bF,YT as bG,Rle as bH,Yee as bI,C1e as bJ,_5 as bK,Gl as bL,C5 as bM,QM as bN,YM as bO,B5e as bP,H5e as bQ,$5e as bR,W5e as bS,lke as bT,G5e as bU,Xi as bV,b3 as bW,IA as bX,hm as bY,mn as bZ,K3 as b_,L0e as ba,qee as bb,gJ as bc,e6 as bd,TC as be,$we as bf,_me as bg,rme as bh,mIe as bi,Aae as bj,F_e as bk,We as bl,Fl as bm,wa as bn,Ime as bo,GSe as bp,zd as bq,sr as br,tn as bs,Qf as bt,rv as bu,GN as bv,Oc as bw,Mn as bx,PSe as by,qC as bz,aEe as c,nA as c$,Rl as c0,_a as c1,pa as c2,kl as c3,K_ as c4,cm as c5,J1 as c6,Y1 as c7,Nl as c8,K1 as c9,ny as cA,BAe as cB,sy as cC,VAe as cD,HAe as cE,LM as cF,RM as cG,wm as cH,aIe as cI,iIe as cJ,fh as cK,Nc as cL,vh as cM,Z3 as cN,Zs as cO,vTe as cP,lR as cQ,Kr as cR,XY as cS,vs as cT,C4 as cU,S1 as cV,REe as cW,Rn as cX,$d as cY,JEe as cZ,jce as c_,yee as ca,Nt as cb,gwe as cc,hwe as cd,ywe as ce,Iwe as cf,cf as cg,iT as ch,kme as ci,XA as cj,Vx as ck,uAe as cl,Ir as cm,X3 as cn,qo as co,fr as cp,vS as cq,$t as cr,fle as cs,ts as ct,ju as cu,Ns as cv,Tl as cw,p1e as cx,ha as cy,HC as cz,M as d,tC as d$,Ws as d0,nf as d1,BIe as d2,R_e as d3,o3e as d4,Qt as d5,vAe as d6,CAe as d7,W_e as d8,qSe as d9,la as dA,_c as dB,Ew as dC,hge as dD,Ghe as dE,qs as dF,cQ as dG,UI as dH,xt as dI,Ps as dJ,rh as dK,DIe as dL,hCe as dM,ah as dN,MIe as dO,IR as dP,wR as dQ,y3e as dR,Qi as dS,T1 as dT,tQ as dU,Qd as dV,td as dW,mi as dX,om as dY,kK as dZ,PU as d_,WI as da,U1 as db,Fke as dc,bm as dd,Sh as de,OA as df,Y_e as dg,QA as dh,gme as di,xn as dj,bM as dk,yEe as dl,T_e as dm,OAe as dn,A_e as dp,k_e as dq,NAe as dr,d0e as ds,k0e as dt,ur as du,wEe as dv,EEe as dw,IEe as dx,LSe as dy,KSe as dz,De as e,UCe as e$,_N as e0,wr as e1,gTe as e2,fM as e3,cse as e4,m5 as e5,gfe as e6,KK as e7,ise as e8,Cxe as e9,XN as eA,IIe as eB,_Ie as eC,bee as eD,Vl as eE,N3 as eF,Ta as eG,g3 as eH,V3 as eI,ec as eJ,X1 as eK,sIe as eL,r2e as eM,NM as eN,Hae as eO,Uae as eP,$u as eQ,Dt as eR,C8 as eS,m6e as eT,yIe as eU,CIe as eV,i6e as eW,es as eX,dl as eY,d_ as eZ,Lee as e_,vxe as ea,r0 as eb,ik as ec,qme as ed,gt as ee,J7 as ef,qe as eg,Uk as eh,dme as ei,Em as ej,ms as ek,B2 as el,Jr as em,xCe as en,Ske as eo,y_e as ep,yke as eq,Cke as er,Eke as es,bke as et,xke as eu,rie as ev,Aa as ew,xh as ex,NIe as ey,hM as ez,St as f,Sl as f$,Zw as f0,XEe as f1,Sr as f2,Np as f3,Mp as f4,Cpe as f5,ho as f6,U2 as f7,eIe as f8,iA as f9,bh as fA,nv as fB,d_e as fC,Vs as fD,zr as fE,_A as fF,pue as fG,uo as fH,due as fI,xx as fJ,Gr as fK,i_e as fL,wue as fM,u_e as fN,m_e as fO,S3 as fP,l_e as fQ,c_e as fR,_i as fS,cue as fT,lue as fU,uue as fV,pEe as fW,Op as fX,CM as fY,m8 as fZ,Wke as f_,Qw as fa,A1 as fb,ca as fc,wS as fd,cJ as fe,eC as ff,TR as fg,Ho as fh,Sm as fi,cM as fj,Ch as fk,ZK as fl,zIe as fm,AY as fn,aC as fo,$3 as fp,VIe as fq,$Ie as fr,DSe as fs,KEe as ft,YEe as fu,ZEe as fv,Hw as fw,HIe as fx,kX as fy,Ume as fz,pe as g,mT as g$,L1 as g0,ZY as g1,cy as g2,FN as g3,gke as g4,Od as g5,oke as g6,Of as g7,Hs as g8,za as g9,ame as gA,T_ as gB,Z_e as gC,K_e as gD,tTe as gE,Pk as gF,wme as gG,Br as gH,gEe as gI,lfe as gJ,CEe as gK,fS as gL,PK as gM,LK as gN,_p as gO,u_ as gP,yCe as gQ,hEe as gR,J_e as gS,Q_e as gT,tv as gU,NSe as gV,$7 as gW,s2e as gX,v0e as gY,ey as gZ,xM as g_,Or as ga,zu as gb,Jd as gc,_r as gd,Vle as ge,R3 as gf,Th as gg,yd as gh,yy as gi,T6e as gj,RC as gk,uv as gl,Tbe as gm,Oke as gn,L_e as go,H6e as gp,zCe as gq,pR as gr,HCe as gs,lIe as gt,KE as gu,kae as gv,z_e as gw,eTe as gx,X_e as gy,H_e as gz,F as h,x1e as h$,Ide as h0,Q3 as h1,RN as h2,fo as h3,C1 as h4,sQ as h5,DEe as h6,gw as h7,ZA as h8,t3 as h9,Xke as hA,dTe as hB,Mm as hC,$re as hD,fEe as hE,cpe as hF,wk as hG,ppe as hH,Ol as hI,$4 as hJ,r3 as hK,mEe as hL,ske as hM,Ihe as hN,gAe as hO,by as hP,d9 as hQ,uT as hR,zC as hS,GC as hT,d8e as hU,v8e as hV,tMe as hW,nMe as hX,Kee as hY,sMe as hZ,Uxe as h_,XI as ha,rve as hb,f_ as hc,e_ as hd,Gke as he,g6e as hf,zi as hg,Qwe as hh,R1 as hi,Yd as hj,Jwe as hk,Kwe as hl,Xw as hm,Pd as hn,Tee as ho,Rp as hp,KA as hq,ffe as hr,U6e as hs,q4e as ht,fpe as hu,vd as hv,nAe as hw,zN as hx,Fhe as hy,eMe as hz,Rt as i,SEe as i$,mAe as i0,$R as i1,Fk as i2,mM as i3,b1e as i4,B3 as i5,xd as i6,bd as i7,nN as i8,VT as i9,Jie as iA,PC as iB,BC as iC,bse as iD,co as iE,Pme as iF,uTe as iG,vke as iH,lm as iI,LN as iJ,hh as iK,f5 as iL,m9 as iM,Ld as iN,OIe as iO,_1e as iP,kIe as iQ,dN as iR,U3 as iS,Dk as iT,vme as iU,F1 as iV,Hwe as iW,Ake as iX,Yme as iY,N_e as iZ,M_e as i_,Qie as ia,_R as ib,O5 as ic,ER as id,jK as ie,wIe as ig,dy as ih,USe as ii,BSe as ij,uEe as ik,lEe as il,dEe as im,Qs as io,qEe as ip,wh as iq,sk as ir,Dx as is,Nme as it,Gfe as iu,Kv as iv,MEe as iw,NEe as ix,uK as iy,ff as iz,de as j,Rx as j$,P_e as j0,ow as j1,Eae as j2,HN as j3,s3e as j4,t_e as j5,MTe as j6,o_e as j7,s_e as j8,YIe as j9,dT as jA,kye as jB,Aye as jC,YN as jD,hQ as jE,mg as jF,vo as jG,ofe as jH,rwe as jI,Mye as jJ,Ea as jK,ml as jL,rk as jM,Bu as jN,Tu as jO,BM as jP,Bp as jQ,Gc as jR,Un as jS,nM as jT,Vee as jU,pg as jV,Swe as jW,QSe as jX,zl as jY,Mw as jZ,_m as j_,XIe as ja,e_e as jb,vQ as jc,r_e as jd,Kfe as je,lw as jf,qfe as jg,Sv as jh,rIe as ji,Z6 as jj,vwe as jk,B4 as jl,_Ee as jm,ot as jn,Qee as jo,Zee as jp,LV as jq,Wwe as jr,lI as js,F6e as jt,ZIe as ju,xwe as jv,bwe as jw,b1 as jx,swe as jy,qd as jz,j1 as k,VTe as k$,U0e as k0,eI as k1,B0e as k2,QY as k3,JY as k4,po as k5,N1 as k6,md as k7,C_ as k8,Sa as k9,XSe as kA,eEe as kB,rEe as kC,oEe as kD,RIe as kE,jx as kF,xTe as kG,yTe as kH,bTe as kI,b5e as kJ,g5e as kK,E5e as kL,Qr as kM,cke as kN,ike as kO,CTe as kP,j0e as kQ,jTe as kR,PTe as kS,LTe as kT,BTe as kU,NTe as kV,OTe as kW,RTe as kX,DTe as kY,FTe as kZ,UTe as k_,qwe as ka,OR as kb,Zo as kc,nke as kd,J4e as ke,gk as kf,xr as kg,C3 as kh,Jee as ki,E9 as kj,vee as kk,JSe as kl,$N as km,Wn as kn,I2 as ko,_h as kp,nte as kq,ete as kr,FR as ks,jR as kt,y_ as ku,ape as kv,ipe as kw,jEe as kx,xIe as ky,HEe as kz,Fe as l,ly as l$,yk as l0,Mme as l1,As as l2,cV as l3,Lwe as l4,WC as l5,$C as l6,K2 as l7,Pwe as l8,Rwe as l9,P8 as lA,XCe as lB,tye as lC,XAe as lD,gM as lE,JIe as lF,R4e as lG,pae as lH,vbe as lI,fbe as lJ,Qa as lK,ek as lL,gCe as lM,M2e as lN,EM as lO,M5e as lP,W9 as lQ,N8 as lR,cIe as lS,_C as lT,A2e as lU,uI as lV,L4e as lW,ode as lX,YAe as lY,j_e as lZ,_l as l_,Cwe as la,oMe as lb,E3 as lc,RSe as ld,_ee as le,sde as lf,XJ as lg,od as lh,j7 as li,Ole as lj,Dle as lk,GU as ll,Lle as lm,n_e as ln,QIe as lo,RX as lp,FK as lq,Ul as lr,Er as ls,oAe as lt,FCe as lu,Ape as lv,Nk as lw,uR as lx,Sw as ly,eke as lz,ge as m,sd as m$,Co as m0,SIe as m1,O_e as m2,OB as m3,uke as m4,hK as m5,gT as m6,Xt as m7,zwe as m8,CS as m9,twe as mA,In as mB,Wne as mC,ewe as mD,$w as mE,Xwe as mF,lce as mG,hTe as mH,O5e as mI,L5e as mJ,TEe as mK,tke as mL,rke as mM,q2e as mN,ake as mO,Eee as mP,Owe as mQ,jwe as mR,Fwe as mS,Mwe as mT,kwe as mU,Nwe as mV,sX as mW,nX as mX,rX as mY,oX as mZ,YSe as m_,zt as ma,kn as mb,uIe as mc,vae as md,VR as me,I_e as mf,w_e as mg,use as mh,lse as mi,Wde as mj,b_e as mk,x_e as ml,S_e as mm,Px as mn,E_e as mo,ZQ as mp,Ex as mq,WIe as mr,bR as ms,zae as mt,ZT as mu,PIe as mv,u3 as mw,gce as mx,LIe as my,Zwe as mz,ice as n,STe as n$,lX as n0,uX as n1,Dwe as n2,Hye as n3,Cd as n4,bC as n5,YTe as n6,JTe as n7,XTe as n8,eAe as n9,kke as nA,wke as nB,Oee as nC,fge as nD,df as nE,yge as nF,Dee as nG,jCe as nH,Ike as nI,RR as nJ,hpe as nK,ese as nL,vy as nM,D0e as nN,Go as nO,uN as nP,$S as nQ,GIe as nR,jo as nS,Xce as nT,AEe as nU,jn as nV,kEe as nW,aa as nX,ox as nY,iue as nZ,cEe as n_,ZTe as na,KTe as nb,Sk as nc,p5 as nd,GTe as ne,qTe as nf,WTe as ng,dIe as nh,$Te as ni,HTe as nj,QTe as nk,zTe as nl,cC as nm,yh as nn,K4e as no,Vke as np,phe as nq,Oxe as nr,cae as ns,PI as nt,Ewe as nu,Lxe as nv,Z4e as nw,Bhe as nx,Gwe as ny,z8 as nz,H as o,ww as o$,FM as o0,Lke as o1,BK as o2,fi as o3,iEe as o4,DK as o5,owe as o6,Y2e as o7,jp as o8,sh as o9,WSe as oA,Ude as oB,KY as oC,Pge as oD,$Se as oE,ZC as oF,UEe as oG,WK as oH,BEe as oI,zEe as oJ,WEe as oK,GEe as oL,cl as oM,Zd as oN,N5e as oO,Kw as oP,MK as oQ,U7 as oR,Mle as oS,jue as oT,qA as oU,z3e as oV,eQ as oW,dC as oX,lwe as oY,iwe as oZ,cwe as o_,a3 as oa,BA as ob,C_e as oc,Jme as od,Xme as oe,efe as of,OU as og,$K as oh,Jfe as oi,tAe as oj,UU as ok,y1 as ol,sfe as om,yo as on,Xie as oo,N4 as op,gh as oq,tfe as or,zSe as os,VSe as ot,HSe as ou,gd as ov,Hp as ow,hy as ox,YY as oy,awe as oz,jIe as p,MSe as p$,oI as p0,rQ as p1,aQ as p2,oQ as p3,fwe as p4,pwe as p5,Bwe as p6,F0e as p7,l0e as p8,Awe as p9,_we as pA,Td as pB,_s as pC,U9 as pD,gD as pE,Ad as pF,ASe as pG,Ac as pH,cr as pI,zO as pJ,FD as pK,jD as pL,BD as pM,VD as pN,b7 as pO,p7 as pP,Yu as pQ,e7 as pR,$f as pS,XO as pT,kd as pU,et as pV,Mu as pW,Da as pX,TSe as pY,_Se as pZ,uj as p_,Twe as pa,iAe as pb,aie as pc,D_e as pd,OSe as pe,uC as pf,dwe as pg,Ywe as ph,nwe as pi,uwe as pj,oC as pk,QEe as pl,lK as pm,dv as pn,oM as po,Vu as pp,v1 as pq,VA as pr,kde as ps,HA as pt,zA as pu,GA as pv,WA as pw,$A as px,g_e as py,tR as pz,ut as q,w7 as q$,qf as q0,hj as q1,ZD as q2,WD as q3,$D as q4,E7 as q5,jc as q6,$5 as q7,ya as q8,zj as q9,yD as qA,B0 as qB,N7 as qC,B9 as qD,H5 as qE,jO as qF,Gf as qG,wD as qH,Q9 as qI,t7 as qJ,c7 as qK,ED as qL,Z9 as qM,ID as qN,TD as qO,o7 as qP,_D as qQ,a7 as qR,s7 as qS,kD as qT,LO as qU,CF as qV,D7 as qW,vi as qX,O7 as qY,DD as qZ,ir as q_,l7 as qa,z5 as qb,UD as qc,j0 as qd,U0 as qe,DO as qf,$9 as qg,vD as qh,OO as qi,Qp as qj,Zu as qk,Y5 as ql,Zp as qm,Yp as qn,ia as qo,q9 as qp,_O as qq,WO as qr,ISe as qs,GO as qt,RD as qu,PD as qv,ui as qw,qD as qx,LD as qy,wSe as qz,se as r,gpe as r$,G0 as r0,Lj as r1,M7 as r2,jj as r3,A7 as r4,V9 as r5,tD as r6,_d as r7,BO as r8,HO as r9,Pj as rA,d7 as rB,m7 as rC,J5 as rD,PO as rE,Rd as rF,Cy as rG,Wbe as rH,hfe as rI,pfe as rJ,ATe as rK,_ke as rL,Tke as rM,VEe as rN,hk as rO,kTe as rP,dfe as rQ,Y3 as rR,dd as rS,Rme as rT,f6e as rU,hIe as rV,Hue as rW,vIe as rX,sv as rY,eA as rZ,PR as r_,i7 as ra,Kp as rb,tl as rc,Ub as rd,Km as re,kSe as rf,NO as rg,Gj as rh,ESe as ri,ZO as rj,Wf as rk,rD as rl,_j as rm,gF as rn,X5 as ro,wF as rp,Fb as rq,Kf as rr,_7 as rs,xF as rt,q5 as ru,f7 as rv,Z5 as rw,Nd as rx,Rj as ry,k7 as rz,FIe as s,ev as s$,Ck as s0,Cee as s1,nS as s2,e1 as s3,oIe as s4,B1 as s5,Uwe as s6,KCe as s7,G_e as s8,nTe as s9,Ok as sA,iTe as sB,cTe as sC,oTe as sD,QAe as sE,JAe as sF,v4e as sG,sTe as sH,LEe as sI,zR as sJ,V_e as sK,B_e as sL,fIe as sM,pIe as sN,f_e as sO,MA as sP,vEe as sQ,Tae as sR,q_e as sS,Qv as sT,X4e as sU,$_e as sV,jE as sW,lr as sX,rl as sY,aB as sZ,FSe as s_,Lk as sa,jf as sb,UN as sc,aAe as sd,PEe as se,$Ee as sf,So as sg,G3e as sh,U_e as si,eh as sj,Tpe as sk,kk as sl,pr as sm,OEe as sn,_ae as so,cAe as sp,Bpe as sq,lTe as sr,aTe as ss,Xpe as st,c1e as su,Kpe as sv,s1e as sw,rAe as sx,rTe as sy,lAe as sz,Yt as t,Rke as t$,hd as t0,lh as t1,c1 as t2,Hpe as t3,Ih as t4,kCe as t5,t3e as t6,vf as t7,n3e as t8,q5e as t9,EAe as tA,wAe as tB,IAe as tC,_Ae as tD,TAe as tE,AAe as tF,kAe as tG,RAe as tH,PAe as tI,LAe as tJ,DAe as tK,jAe as tL,FAe as tM,UAe as tN,zAe as tO,GAe as tP,WAe as tQ,$Ae as tR,qAe as tS,ZAe as tT,KAe as tU,dke as tV,mke as tW,fke as tX,pke as tY,Mke as tZ,Nke as t_,P3 as ta,e3e as tb,MAe as tc,Vwe as td,tIe as te,nIe as tf,p_e as tg,h_e as th,v_e as ti,__e as tj,A3 as tk,mTe as tl,fTe as tm,pTe as tn,ETe as to,wTe as tp,ITe as tq,_Te as tr,TTe as ts,sAe as tt,dAe as tu,fAe as tv,yAe as tw,bAe as tx,xAe as ty,SAe as tz,hl as u,Pke as u0,Dke as u1,jke as u2,Uke as u3,Bke as u4,Hke as u5,zke as u6,$ke as u7,qke as u8,Zke as u9,Kke as ua,Yke as ub,Qke as uc,Jke as ud,UIe as v,kC as w,y1e as x,ka as y,ye as z};

//# debugId=224cc9d9-50d4-5112-a785-c71dcf9ad412
